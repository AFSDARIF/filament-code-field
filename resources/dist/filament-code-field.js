(() => {
  // node_modules/@codemirror/state/dist/index.js
  var Text = class {
    constructor() {
    }
    lineAt(pos) {
      if (pos < 0 || pos > this.length)
        throw new RangeError(`Invalid position ${pos} in document of length ${this.length}`);
      return this.lineInner(pos, false, 1, 0);
    }
    line(n) {
      if (n < 1 || n > this.lines)
        throw new RangeError(`Invalid line number ${n} in ${this.lines}-line document`);
      return this.lineInner(n, true, 1, 0);
    }
    replace(from, to, text) {
      let parts = [];
      this.decompose(0, from, parts, 2);
      if (text.length)
        text.decompose(0, text.length, parts, 1 | 2);
      this.decompose(to, this.length, parts, 1);
      return TextNode.from(parts, this.length - (to - from) + text.length);
    }
    append(other) {
      return this.replace(this.length, this.length, other);
    }
    slice(from, to = this.length) {
      let parts = [];
      this.decompose(from, to, parts, 0);
      return TextNode.from(parts, to - from);
    }
    eq(other) {
      if (other == this)
        return true;
      if (other.length != this.length || other.lines != this.lines)
        return false;
      let start = this.scanIdentical(other, 1), end = this.length - this.scanIdentical(other, -1);
      let a = new RawTextCursor(this), b = new RawTextCursor(other);
      for (let skip = start, pos = start; ; ) {
        a.next(skip);
        b.next(skip);
        skip = 0;
        if (a.lineBreak != b.lineBreak || a.done != b.done || a.value != b.value)
          return false;
        pos += a.value.length;
        if (a.done || pos >= end)
          return true;
      }
    }
    iter(dir = 1) {
      return new RawTextCursor(this, dir);
    }
    iterRange(from, to = this.length) {
      return new PartialTextCursor(this, from, to);
    }
    iterLines(from, to) {
      let inner;
      if (from == null) {
        inner = this.iter();
      } else {
        if (to == null)
          to = this.lines + 1;
        let start = this.line(from).from;
        inner = this.iterRange(start, Math.max(start, to == this.lines + 1 ? this.length : to <= 1 ? 0 : this.line(to - 1).to));
      }
      return new LineCursor(inner);
    }
    toString() {
      return this.sliceString(0);
    }
    toJSON() {
      let lines = [];
      this.flatten(lines);
      return lines;
    }
    static of(text) {
      if (text.length == 0)
        throw new RangeError("A document must have at least one line");
      if (text.length == 1 && !text[0])
        return Text.empty;
      return text.length <= 32 ? new TextLeaf(text) : TextNode.from(TextLeaf.split(text, []));
    }
  };
  var TextLeaf = class extends Text {
    constructor(text, length = textLength(text)) {
      super();
      this.text = text;
      this.length = length;
    }
    get lines() {
      return this.text.length;
    }
    get children() {
      return null;
    }
    lineInner(target, isLine, line, offset) {
      for (let i = 0; ; i++) {
        let string2 = this.text[i], end = offset + string2.length;
        if ((isLine ? line : end) >= target)
          return new Line(offset, end, line, string2);
        offset = end + 1;
        line++;
      }
    }
    decompose(from, to, target, open) {
      let text = from <= 0 && to >= this.length ? this : new TextLeaf(sliceText(this.text, from, to), Math.min(to, this.length) - Math.max(0, from));
      if (open & 1) {
        let prev = target.pop();
        let joined = appendText(text.text, prev.text.slice(), 0, text.length);
        if (joined.length <= 32) {
          target.push(new TextLeaf(joined, prev.length + text.length));
        } else {
          let mid = joined.length >> 1;
          target.push(new TextLeaf(joined.slice(0, mid)), new TextLeaf(joined.slice(mid)));
        }
      } else {
        target.push(text);
      }
    }
    replace(from, to, text) {
      if (!(text instanceof TextLeaf))
        return super.replace(from, to, text);
      let lines = appendText(this.text, appendText(text.text, sliceText(this.text, 0, from)), to);
      let newLen = this.length + text.length - (to - from);
      if (lines.length <= 32)
        return new TextLeaf(lines, newLen);
      return TextNode.from(TextLeaf.split(lines, []), newLen);
    }
    sliceString(from, to = this.length, lineSep = "\n") {
      let result = "";
      for (let pos = 0, i = 0; pos <= to && i < this.text.length; i++) {
        let line = this.text[i], end = pos + line.length;
        if (pos > from && i)
          result += lineSep;
        if (from < end && to > pos)
          result += line.slice(Math.max(0, from - pos), to - pos);
        pos = end + 1;
      }
      return result;
    }
    flatten(target) {
      for (let line of this.text)
        target.push(line);
    }
    scanIdentical() {
      return 0;
    }
    static split(text, target) {
      let part = [], len = -1;
      for (let line of text) {
        part.push(line);
        len += line.length + 1;
        if (part.length == 32) {
          target.push(new TextLeaf(part, len));
          part = [];
          len = -1;
        }
      }
      if (len > -1)
        target.push(new TextLeaf(part, len));
      return target;
    }
  };
  var TextNode = class extends Text {
    constructor(children, length) {
      super();
      this.children = children;
      this.length = length;
      this.lines = 0;
      for (let child of children)
        this.lines += child.lines;
    }
    lineInner(target, isLine, line, offset) {
      for (let i = 0; ; i++) {
        let child = this.children[i], end = offset + child.length, endLine = line + child.lines - 1;
        if ((isLine ? endLine : end) >= target)
          return child.lineInner(target, isLine, line, offset);
        offset = end + 1;
        line = endLine + 1;
      }
    }
    decompose(from, to, target, open) {
      for (let i = 0, pos = 0; pos <= to && i < this.children.length; i++) {
        let child = this.children[i], end = pos + child.length;
        if (from <= end && to >= pos) {
          let childOpen = open & ((pos <= from ? 1 : 0) | (end >= to ? 2 : 0));
          if (pos >= from && end <= to && !childOpen)
            target.push(child);
          else
            child.decompose(from - pos, to - pos, target, childOpen);
        }
        pos = end + 1;
      }
    }
    replace(from, to, text) {
      if (text.lines < this.lines)
        for (let i = 0, pos = 0; i < this.children.length; i++) {
          let child = this.children[i], end = pos + child.length;
          if (from >= pos && to <= end) {
            let updated = child.replace(from - pos, to - pos, text);
            let totalLines = this.lines - child.lines + updated.lines;
            if (updated.lines < totalLines >> 5 - 1 && updated.lines > totalLines >> 5 + 1) {
              let copy = this.children.slice();
              copy[i] = updated;
              return new TextNode(copy, this.length - (to - from) + text.length);
            }
            return super.replace(pos, end, updated);
          }
          pos = end + 1;
        }
      return super.replace(from, to, text);
    }
    sliceString(from, to = this.length, lineSep = "\n") {
      let result = "";
      for (let i = 0, pos = 0; i < this.children.length && pos <= to; i++) {
        let child = this.children[i], end = pos + child.length;
        if (pos > from && i)
          result += lineSep;
        if (from < end && to > pos)
          result += child.sliceString(from - pos, to - pos, lineSep);
        pos = end + 1;
      }
      return result;
    }
    flatten(target) {
      for (let child of this.children)
        child.flatten(target);
    }
    scanIdentical(other, dir) {
      if (!(other instanceof TextNode))
        return 0;
      let length = 0;
      let [iA, iB, eA, eB] = dir > 0 ? [0, 0, this.children.length, other.children.length] : [this.children.length - 1, other.children.length - 1, -1, -1];
      for (; ; iA += dir, iB += dir) {
        if (iA == eA || iB == eB)
          return length;
        let chA = this.children[iA], chB = other.children[iB];
        if (chA != chB)
          return length + chA.scanIdentical(chB, dir);
        length += chA.length + 1;
      }
    }
    static from(children, length = children.reduce((l, ch) => l + ch.length + 1, -1)) {
      let lines = 0;
      for (let ch of children)
        lines += ch.lines;
      if (lines < 32) {
        let flat = [];
        for (let ch of children)
          ch.flatten(flat);
        return new TextLeaf(flat, length);
      }
      let chunk = Math.max(32, lines >> 5), maxChunk = chunk << 1, minChunk = chunk >> 1;
      let chunked = [], currentLines = 0, currentLen = -1, currentChunk = [];
      function add(child) {
        let last;
        if (child.lines > maxChunk && child instanceof TextNode) {
          for (let node of child.children)
            add(node);
        } else if (child.lines > minChunk && (currentLines > minChunk || !currentLines)) {
          flush();
          chunked.push(child);
        } else if (child instanceof TextLeaf && currentLines && (last = currentChunk[currentChunk.length - 1]) instanceof TextLeaf && child.lines + last.lines <= 32) {
          currentLines += child.lines;
          currentLen += child.length + 1;
          currentChunk[currentChunk.length - 1] = new TextLeaf(last.text.concat(child.text), last.length + 1 + child.length);
        } else {
          if (currentLines + child.lines > chunk)
            flush();
          currentLines += child.lines;
          currentLen += child.length + 1;
          currentChunk.push(child);
        }
      }
      function flush() {
        if (currentLines == 0)
          return;
        chunked.push(currentChunk.length == 1 ? currentChunk[0] : TextNode.from(currentChunk, currentLen));
        currentLen = -1;
        currentLines = currentChunk.length = 0;
      }
      for (let child of children)
        add(child);
      flush();
      return chunked.length == 1 ? chunked[0] : new TextNode(chunked, length);
    }
  };
  Text.empty = /* @__PURE__ */ new TextLeaf([""], 0);
  function textLength(text) {
    let length = -1;
    for (let line of text)
      length += line.length + 1;
    return length;
  }
  function appendText(text, target, from = 0, to = 1e9) {
    for (let pos = 0, i = 0, first = true; i < text.length && pos <= to; i++) {
      let line = text[i], end = pos + line.length;
      if (end >= from) {
        if (end > to)
          line = line.slice(0, to - pos);
        if (pos < from)
          line = line.slice(from - pos);
        if (first) {
          target[target.length - 1] += line;
          first = false;
        } else
          target.push(line);
      }
      pos = end + 1;
    }
    return target;
  }
  function sliceText(text, from, to) {
    return appendText(text, [""], from, to);
  }
  var RawTextCursor = class {
    constructor(text, dir = 1) {
      this.dir = dir;
      this.done = false;
      this.lineBreak = false;
      this.value = "";
      this.nodes = [text];
      this.offsets = [dir > 0 ? 1 : (text instanceof TextLeaf ? text.text.length : text.children.length) << 1];
    }
    nextInner(skip, dir) {
      this.done = this.lineBreak = false;
      for (; ; ) {
        let last = this.nodes.length - 1;
        let top2 = this.nodes[last], offsetValue = this.offsets[last], offset = offsetValue >> 1;
        let size = top2 instanceof TextLeaf ? top2.text.length : top2.children.length;
        if (offset == (dir > 0 ? size : 0)) {
          if (last == 0) {
            this.done = true;
            this.value = "";
            return this;
          }
          if (dir > 0)
            this.offsets[last - 1]++;
          this.nodes.pop();
          this.offsets.pop();
        } else if ((offsetValue & 1) == (dir > 0 ? 0 : 1)) {
          this.offsets[last] += dir;
          if (skip == 0) {
            this.lineBreak = true;
            this.value = "\n";
            return this;
          }
          skip--;
        } else if (top2 instanceof TextLeaf) {
          let next = top2.text[offset + (dir < 0 ? -1 : 0)];
          this.offsets[last] += dir;
          if (next.length > Math.max(0, skip)) {
            this.value = skip == 0 ? next : dir > 0 ? next.slice(skip) : next.slice(0, next.length - skip);
            return this;
          }
          skip -= next.length;
        } else {
          let next = top2.children[offset + (dir < 0 ? -1 : 0)];
          if (skip > next.length) {
            skip -= next.length;
            this.offsets[last] += dir;
          } else {
            if (dir < 0)
              this.offsets[last]--;
            this.nodes.push(next);
            this.offsets.push(dir > 0 ? 1 : (next instanceof TextLeaf ? next.text.length : next.children.length) << 1);
          }
        }
      }
    }
    next(skip = 0) {
      if (skip < 0) {
        this.nextInner(-skip, -this.dir);
        skip = this.value.length;
      }
      return this.nextInner(skip, this.dir);
    }
  };
  var PartialTextCursor = class {
    constructor(text, start, end) {
      this.value = "";
      this.done = false;
      this.cursor = new RawTextCursor(text, start > end ? -1 : 1);
      this.pos = start > end ? text.length : 0;
      this.from = Math.min(start, end);
      this.to = Math.max(start, end);
    }
    nextInner(skip, dir) {
      if (dir < 0 ? this.pos <= this.from : this.pos >= this.to) {
        this.value = "";
        this.done = true;
        return this;
      }
      skip += Math.max(0, dir < 0 ? this.pos - this.to : this.from - this.pos);
      let limit = dir < 0 ? this.pos - this.from : this.to - this.pos;
      if (skip > limit)
        skip = limit;
      limit -= skip;
      let {value} = this.cursor.next(skip);
      this.pos += (value.length + skip) * dir;
      this.value = value.length <= limit ? value : dir < 0 ? value.slice(value.length - limit) : value.slice(0, limit);
      this.done = !this.value;
      return this;
    }
    next(skip = 0) {
      if (skip < 0)
        skip = Math.max(skip, this.from - this.pos);
      else if (skip > 0)
        skip = Math.min(skip, this.to - this.pos);
      return this.nextInner(skip, this.cursor.dir);
    }
    get lineBreak() {
      return this.cursor.lineBreak && this.value != "";
    }
  };
  var LineCursor = class {
    constructor(inner) {
      this.inner = inner;
      this.afterBreak = true;
      this.value = "";
      this.done = false;
    }
    next(skip = 0) {
      let {done, lineBreak, value} = this.inner.next(skip);
      if (done) {
        this.done = true;
        this.value = "";
      } else if (lineBreak) {
        if (this.afterBreak) {
          this.value = "";
        } else {
          this.afterBreak = true;
          this.next();
        }
      } else {
        this.value = value;
        this.afterBreak = false;
      }
      return this;
    }
    get lineBreak() {
      return false;
    }
  };
  if (typeof Symbol != "undefined") {
    Text.prototype[Symbol.iterator] = function() {
      return this.iter();
    };
    RawTextCursor.prototype[Symbol.iterator] = PartialTextCursor.prototype[Symbol.iterator] = LineCursor.prototype[Symbol.iterator] = function() {
      return this;
    };
  }
  var Line = class {
    constructor(from, to, number2, text) {
      this.from = from;
      this.to = to;
      this.number = number2;
      this.text = text;
    }
    get length() {
      return this.to - this.from;
    }
  };
  var extend = /* @__PURE__ */ "lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((s) => s ? parseInt(s, 36) : 1);
  for (let i = 1; i < extend.length; i++)
    extend[i] += extend[i - 1];
  function isExtendingChar(code) {
    for (let i = 1; i < extend.length; i += 2)
      if (extend[i] > code)
        return extend[i - 1] <= code;
    return false;
  }
  function isRegionalIndicator(code) {
    return code >= 127462 && code <= 127487;
  }
  var ZWJ = 8205;
  function findClusterBreak(str, pos, forward = true, includeExtending = true) {
    return (forward ? nextClusterBreak : prevClusterBreak)(str, pos, includeExtending);
  }
  function nextClusterBreak(str, pos, includeExtending) {
    if (pos == str.length)
      return pos;
    if (pos && surrogateLow(str.charCodeAt(pos)) && surrogateHigh(str.charCodeAt(pos - 1)))
      pos--;
    let prev = codePointAt(str, pos);
    pos += codePointSize(prev);
    while (pos < str.length) {
      let next = codePointAt(str, pos);
      if (prev == ZWJ || next == ZWJ || includeExtending && isExtendingChar(next)) {
        pos += codePointSize(next);
        prev = next;
      } else if (isRegionalIndicator(next)) {
        let countBefore = 0, i = pos - 2;
        while (i >= 0 && isRegionalIndicator(codePointAt(str, i))) {
          countBefore++;
          i -= 2;
        }
        if (countBefore % 2 == 0)
          break;
        else
          pos += 2;
      } else {
        break;
      }
    }
    return pos;
  }
  function prevClusterBreak(str, pos, includeExtending) {
    while (pos > 0) {
      let found = nextClusterBreak(str, pos - 2, includeExtending);
      if (found < pos)
        return found;
      pos--;
    }
    return 0;
  }
  function surrogateLow(ch) {
    return ch >= 56320 && ch < 57344;
  }
  function surrogateHigh(ch) {
    return ch >= 55296 && ch < 56320;
  }
  function codePointAt(str, pos) {
    let code0 = str.charCodeAt(pos);
    if (!surrogateHigh(code0) || pos + 1 == str.length)
      return code0;
    let code1 = str.charCodeAt(pos + 1);
    if (!surrogateLow(code1))
      return code0;
    return (code0 - 55296 << 10) + (code1 - 56320) + 65536;
  }
  function fromCodePoint(code) {
    if (code <= 65535)
      return String.fromCharCode(code);
    code -= 65536;
    return String.fromCharCode((code >> 10) + 55296, (code & 1023) + 56320);
  }
  function codePointSize(code) {
    return code < 65536 ? 1 : 2;
  }
  var DefaultSplit = /\r\n?|\n/;
  var MapMode = /* @__PURE__ */ function(MapMode2) {
    MapMode2[MapMode2["Simple"] = 0] = "Simple";
    MapMode2[MapMode2["TrackDel"] = 1] = "TrackDel";
    MapMode2[MapMode2["TrackBefore"] = 2] = "TrackBefore";
    MapMode2[MapMode2["TrackAfter"] = 3] = "TrackAfter";
    return MapMode2;
  }(MapMode || (MapMode = {}));
  var ChangeDesc = class {
    constructor(sections) {
      this.sections = sections;
    }
    get length() {
      let result = 0;
      for (let i = 0; i < this.sections.length; i += 2)
        result += this.sections[i];
      return result;
    }
    get newLength() {
      let result = 0;
      for (let i = 0; i < this.sections.length; i += 2) {
        let ins = this.sections[i + 1];
        result += ins < 0 ? this.sections[i] : ins;
      }
      return result;
    }
    get empty() {
      return this.sections.length == 0 || this.sections.length == 2 && this.sections[1] < 0;
    }
    iterGaps(f) {
      for (let i = 0, posA = 0, posB = 0; i < this.sections.length; ) {
        let len = this.sections[i++], ins = this.sections[i++];
        if (ins < 0) {
          f(posA, posB, len);
          posB += len;
        } else {
          posB += ins;
        }
        posA += len;
      }
    }
    iterChangedRanges(f, individual = false) {
      iterChanges(this, f, individual);
    }
    get invertedDesc() {
      let sections = [];
      for (let i = 0; i < this.sections.length; ) {
        let len = this.sections[i++], ins = this.sections[i++];
        if (ins < 0)
          sections.push(len, ins);
        else
          sections.push(ins, len);
      }
      return new ChangeDesc(sections);
    }
    composeDesc(other) {
      return this.empty ? other : other.empty ? this : composeSets(this, other);
    }
    mapDesc(other, before = false) {
      return other.empty ? this : mapSet(this, other, before);
    }
    mapPos(pos, assoc = -1, mode = MapMode.Simple) {
      let posA = 0, posB = 0;
      for (let i = 0; i < this.sections.length; ) {
        let len = this.sections[i++], ins = this.sections[i++], endA = posA + len;
        if (ins < 0) {
          if (endA > pos)
            return posB + (pos - posA);
          posB += len;
        } else {
          if (mode != MapMode.Simple && endA >= pos && (mode == MapMode.TrackDel && posA < pos && endA > pos || mode == MapMode.TrackBefore && posA < pos || mode == MapMode.TrackAfter && endA > pos))
            return null;
          if (endA > pos || endA == pos && assoc < 0 && !len)
            return pos == posA || assoc < 0 ? posB : posB + ins;
          posB += ins;
        }
        posA = endA;
      }
      if (pos > posA)
        throw new RangeError(`Position ${pos} is out of range for changeset of length ${posA}`);
      return posB;
    }
    touchesRange(from, to = from) {
      for (let i = 0, pos = 0; i < this.sections.length && pos <= to; ) {
        let len = this.sections[i++], ins = this.sections[i++], end = pos + len;
        if (ins >= 0 && pos <= to && end >= from)
          return pos < from && end > to ? "cover" : true;
        pos = end;
      }
      return false;
    }
    toString() {
      let result = "";
      for (let i = 0; i < this.sections.length; ) {
        let len = this.sections[i++], ins = this.sections[i++];
        result += (result ? " " : "") + len + (ins >= 0 ? ":" + ins : "");
      }
      return result;
    }
    toJSON() {
      return this.sections;
    }
    static fromJSON(json2) {
      if (!Array.isArray(json2) || json2.length % 2 || json2.some((a) => typeof a != "number"))
        throw new RangeError("Invalid JSON representation of ChangeDesc");
      return new ChangeDesc(json2);
    }
    static create(sections) {
      return new ChangeDesc(sections);
    }
  };
  var ChangeSet = class extends ChangeDesc {
    constructor(sections, inserted) {
      super(sections);
      this.inserted = inserted;
    }
    apply(doc2) {
      if (this.length != doc2.length)
        throw new RangeError("Applying change set to a document with the wrong length");
      iterChanges(this, (fromA, toA, fromB, _toB, text) => doc2 = doc2.replace(fromB, fromB + (toA - fromA), text), false);
      return doc2;
    }
    mapDesc(other, before = false) {
      return mapSet(this, other, before, true);
    }
    invert(doc2) {
      let sections = this.sections.slice(), inserted = [];
      for (let i = 0, pos = 0; i < sections.length; i += 2) {
        let len = sections[i], ins = sections[i + 1];
        if (ins >= 0) {
          sections[i] = ins;
          sections[i + 1] = len;
          let index = i >> 1;
          while (inserted.length < index)
            inserted.push(Text.empty);
          inserted.push(len ? doc2.slice(pos, pos + len) : Text.empty);
        }
        pos += len;
      }
      return new ChangeSet(sections, inserted);
    }
    compose(other) {
      return this.empty ? other : other.empty ? this : composeSets(this, other, true);
    }
    map(other, before = false) {
      return other.empty ? this : mapSet(this, other, before, true);
    }
    iterChanges(f, individual = false) {
      iterChanges(this, f, individual);
    }
    get desc() {
      return ChangeDesc.create(this.sections);
    }
    filter(ranges) {
      let resultSections = [], resultInserted = [], filteredSections = [];
      let iter = new SectionIter(this);
      done:
        for (let i = 0, pos = 0; ; ) {
          let next = i == ranges.length ? 1e9 : ranges[i++];
          while (pos < next || pos == next && iter.len == 0) {
            if (iter.done)
              break done;
            let len = Math.min(iter.len, next - pos);
            addSection(filteredSections, len, -1);
            let ins = iter.ins == -1 ? -1 : iter.off == 0 ? iter.ins : 0;
            addSection(resultSections, len, ins);
            if (ins > 0)
              addInsert(resultInserted, resultSections, iter.text);
            iter.forward(len);
            pos += len;
          }
          let end = ranges[i++];
          while (pos < end) {
            if (iter.done)
              break done;
            let len = Math.min(iter.len, end - pos);
            addSection(resultSections, len, -1);
            addSection(filteredSections, len, iter.ins == -1 ? -1 : iter.off == 0 ? iter.ins : 0);
            iter.forward(len);
            pos += len;
          }
        }
      return {
        changes: new ChangeSet(resultSections, resultInserted),
        filtered: ChangeDesc.create(filteredSections)
      };
    }
    toJSON() {
      let parts = [];
      for (let i = 0; i < this.sections.length; i += 2) {
        let len = this.sections[i], ins = this.sections[i + 1];
        if (ins < 0)
          parts.push(len);
        else if (ins == 0)
          parts.push([len]);
        else
          parts.push([len].concat(this.inserted[i >> 1].toJSON()));
      }
      return parts;
    }
    static of(changes, length, lineSep) {
      let sections = [], inserted = [], pos = 0;
      let total = null;
      function flush(force = false) {
        if (!force && !sections.length)
          return;
        if (pos < length)
          addSection(sections, length - pos, -1);
        let set = new ChangeSet(sections, inserted);
        total = total ? total.compose(set.map(total)) : set;
        sections = [];
        inserted = [];
        pos = 0;
      }
      function process2(spec) {
        if (Array.isArray(spec)) {
          for (let sub of spec)
            process2(sub);
        } else if (spec instanceof ChangeSet) {
          if (spec.length != length)
            throw new RangeError(`Mismatched change set length (got ${spec.length}, expected ${length})`);
          flush();
          total = total ? total.compose(spec.map(total)) : spec;
        } else {
          let {from, to = from, insert: insert2} = spec;
          if (from > to || from < 0 || to > length)
            throw new RangeError(`Invalid change range ${from} to ${to} (in doc of length ${length})`);
          let insText = !insert2 ? Text.empty : typeof insert2 == "string" ? Text.of(insert2.split(lineSep || DefaultSplit)) : insert2;
          let insLen = insText.length;
          if (from == to && insLen == 0)
            return;
          if (from < pos)
            flush();
          if (from > pos)
            addSection(sections, from - pos, -1);
          addSection(sections, to - from, insLen);
          addInsert(inserted, sections, insText);
          pos = to;
        }
      }
      process2(changes);
      flush(!total);
      return total;
    }
    static empty(length) {
      return new ChangeSet(length ? [length, -1] : [], []);
    }
    static fromJSON(json2) {
      if (!Array.isArray(json2))
        throw new RangeError("Invalid JSON representation of ChangeSet");
      let sections = [], inserted = [];
      for (let i = 0; i < json2.length; i++) {
        let part = json2[i];
        if (typeof part == "number") {
          sections.push(part, -1);
        } else if (!Array.isArray(part) || typeof part[0] != "number" || part.some((e, i2) => i2 && typeof e != "string")) {
          throw new RangeError("Invalid JSON representation of ChangeSet");
        } else if (part.length == 1) {
          sections.push(part[0], 0);
        } else {
          while (inserted.length < i)
            inserted.push(Text.empty);
          inserted[i] = Text.of(part.slice(1));
          sections.push(part[0], inserted[i].length);
        }
      }
      return new ChangeSet(sections, inserted);
    }
    static createSet(sections, inserted) {
      return new ChangeSet(sections, inserted);
    }
  };
  function addSection(sections, len, ins, forceJoin = false) {
    if (len == 0 && ins <= 0)
      return;
    let last = sections.length - 2;
    if (last >= 0 && ins <= 0 && ins == sections[last + 1])
      sections[last] += len;
    else if (len == 0 && sections[last] == 0)
      sections[last + 1] += ins;
    else if (forceJoin) {
      sections[last] += len;
      sections[last + 1] += ins;
    } else
      sections.push(len, ins);
  }
  function addInsert(values2, sections, value) {
    if (value.length == 0)
      return;
    let index = sections.length - 2 >> 1;
    if (index < values2.length) {
      values2[values2.length - 1] = values2[values2.length - 1].append(value);
    } else {
      while (values2.length < index)
        values2.push(Text.empty);
      values2.push(value);
    }
  }
  function iterChanges(desc, f, individual) {
    let inserted = desc.inserted;
    for (let posA = 0, posB = 0, i = 0; i < desc.sections.length; ) {
      let len = desc.sections[i++], ins = desc.sections[i++];
      if (ins < 0) {
        posA += len;
        posB += len;
      } else {
        let endA = posA, endB = posB, text = Text.empty;
        for (; ; ) {
          endA += len;
          endB += ins;
          if (ins && inserted)
            text = text.append(inserted[i - 2 >> 1]);
          if (individual || i == desc.sections.length || desc.sections[i + 1] < 0)
            break;
          len = desc.sections[i++];
          ins = desc.sections[i++];
        }
        f(posA, endA, posB, endB, text);
        posA = endA;
        posB = endB;
      }
    }
  }
  function mapSet(setA, setB, before, mkSet = false) {
    let sections = [], insert2 = mkSet ? [] : null;
    let a = new SectionIter(setA), b = new SectionIter(setB);
    for (let inserted = -1; ; ) {
      if (a.ins == -1 && b.ins == -1) {
        let len = Math.min(a.len, b.len);
        addSection(sections, len, -1);
        a.forward(len);
        b.forward(len);
      } else if (b.ins >= 0 && (a.ins < 0 || inserted == a.i || a.off == 0 && (b.len < a.len || b.len == a.len && !before))) {
        let len = b.len;
        addSection(sections, b.ins, -1);
        while (len) {
          let piece = Math.min(a.len, len);
          if (a.ins >= 0 && inserted < a.i && a.len <= piece) {
            addSection(sections, 0, a.ins);
            if (insert2)
              addInsert(insert2, sections, a.text);
            inserted = a.i;
          }
          a.forward(piece);
          len -= piece;
        }
        b.next();
      } else if (a.ins >= 0) {
        let len = 0, left = a.len;
        while (left) {
          if (b.ins == -1) {
            let piece = Math.min(left, b.len);
            len += piece;
            left -= piece;
            b.forward(piece);
          } else if (b.ins == 0 && b.len < left) {
            left -= b.len;
            b.next();
          } else {
            break;
          }
        }
        addSection(sections, len, inserted < a.i ? a.ins : 0);
        if (insert2 && inserted < a.i)
          addInsert(insert2, sections, a.text);
        inserted = a.i;
        a.forward(a.len - left);
      } else if (a.done && b.done) {
        return insert2 ? ChangeSet.createSet(sections, insert2) : ChangeDesc.create(sections);
      } else {
        throw new Error("Mismatched change set lengths");
      }
    }
  }
  function composeSets(setA, setB, mkSet = false) {
    let sections = [];
    let insert2 = mkSet ? [] : null;
    let a = new SectionIter(setA), b = new SectionIter(setB);
    for (let open = false; ; ) {
      if (a.done && b.done) {
        return insert2 ? ChangeSet.createSet(sections, insert2) : ChangeDesc.create(sections);
      } else if (a.ins == 0) {
        addSection(sections, a.len, 0, open);
        a.next();
      } else if (b.len == 0 && !b.done) {
        addSection(sections, 0, b.ins, open);
        if (insert2)
          addInsert(insert2, sections, b.text);
        b.next();
      } else if (a.done || b.done) {
        throw new Error("Mismatched change set lengths");
      } else {
        let len = Math.min(a.len2, b.len), sectionLen = sections.length;
        if (a.ins == -1) {
          let insB = b.ins == -1 ? -1 : b.off ? 0 : b.ins;
          addSection(sections, len, insB, open);
          if (insert2 && insB)
            addInsert(insert2, sections, b.text);
        } else if (b.ins == -1) {
          addSection(sections, a.off ? 0 : a.len, len, open);
          if (insert2)
            addInsert(insert2, sections, a.textBit(len));
        } else {
          addSection(sections, a.off ? 0 : a.len, b.off ? 0 : b.ins, open);
          if (insert2 && !b.off)
            addInsert(insert2, sections, b.text);
        }
        open = (a.ins > len || b.ins >= 0 && b.len > len) && (open || sections.length > sectionLen);
        a.forward2(len);
        b.forward(len);
      }
    }
  }
  var SectionIter = class {
    constructor(set) {
      this.set = set;
      this.i = 0;
      this.next();
    }
    next() {
      let {sections} = this.set;
      if (this.i < sections.length) {
        this.len = sections[this.i++];
        this.ins = sections[this.i++];
      } else {
        this.len = 0;
        this.ins = -2;
      }
      this.off = 0;
    }
    get done() {
      return this.ins == -2;
    }
    get len2() {
      return this.ins < 0 ? this.len : this.ins;
    }
    get text() {
      let {inserted} = this.set, index = this.i - 2 >> 1;
      return index >= inserted.length ? Text.empty : inserted[index];
    }
    textBit(len) {
      let {inserted} = this.set, index = this.i - 2 >> 1;
      return index >= inserted.length && !len ? Text.empty : inserted[index].slice(this.off, len == null ? void 0 : this.off + len);
    }
    forward(len) {
      if (len == this.len)
        this.next();
      else {
        this.len -= len;
        this.off += len;
      }
    }
    forward2(len) {
      if (this.ins == -1)
        this.forward(len);
      else if (len == this.ins)
        this.next();
      else {
        this.ins -= len;
        this.off += len;
      }
    }
  };
  var SelectionRange = class {
    constructor(from, to, flags) {
      this.from = from;
      this.to = to;
      this.flags = flags;
    }
    get anchor() {
      return this.flags & 16 ? this.to : this.from;
    }
    get head() {
      return this.flags & 16 ? this.from : this.to;
    }
    get empty() {
      return this.from == this.to;
    }
    get assoc() {
      return this.flags & 4 ? -1 : this.flags & 8 ? 1 : 0;
    }
    get bidiLevel() {
      let level = this.flags & 3;
      return level == 3 ? null : level;
    }
    get goalColumn() {
      let value = this.flags >> 5;
      return value == 33554431 ? void 0 : value;
    }
    map(change, assoc = -1) {
      let from, to;
      if (this.empty) {
        from = to = change.mapPos(this.from, assoc);
      } else {
        from = change.mapPos(this.from, 1);
        to = change.mapPos(this.to, -1);
      }
      return from == this.from && to == this.to ? this : new SelectionRange(from, to, this.flags);
    }
    extend(from, to = from) {
      if (from <= this.anchor && to >= this.anchor)
        return EditorSelection.range(from, to);
      let head = Math.abs(from - this.anchor) > Math.abs(to - this.anchor) ? from : to;
      return EditorSelection.range(this.anchor, head);
    }
    eq(other) {
      return this.anchor == other.anchor && this.head == other.head;
    }
    toJSON() {
      return {anchor: this.anchor, head: this.head};
    }
    static fromJSON(json2) {
      if (!json2 || typeof json2.anchor != "number" || typeof json2.head != "number")
        throw new RangeError("Invalid JSON representation for SelectionRange");
      return EditorSelection.range(json2.anchor, json2.head);
    }
    static create(from, to, flags) {
      return new SelectionRange(from, to, flags);
    }
  };
  var EditorSelection = class {
    constructor(ranges, mainIndex) {
      this.ranges = ranges;
      this.mainIndex = mainIndex;
    }
    map(change, assoc = -1) {
      if (change.empty)
        return this;
      return EditorSelection.create(this.ranges.map((r) => r.map(change, assoc)), this.mainIndex);
    }
    eq(other) {
      if (this.ranges.length != other.ranges.length || this.mainIndex != other.mainIndex)
        return false;
      for (let i = 0; i < this.ranges.length; i++)
        if (!this.ranges[i].eq(other.ranges[i]))
          return false;
      return true;
    }
    get main() {
      return this.ranges[this.mainIndex];
    }
    asSingle() {
      return this.ranges.length == 1 ? this : new EditorSelection([this.main], 0);
    }
    addRange(range, main = true) {
      return EditorSelection.create([range].concat(this.ranges), main ? 0 : this.mainIndex + 1);
    }
    replaceRange(range, which = this.mainIndex) {
      let ranges = this.ranges.slice();
      ranges[which] = range;
      return EditorSelection.create(ranges, this.mainIndex);
    }
    toJSON() {
      return {ranges: this.ranges.map((r) => r.toJSON()), main: this.mainIndex};
    }
    static fromJSON(json2) {
      if (!json2 || !Array.isArray(json2.ranges) || typeof json2.main != "number" || json2.main >= json2.ranges.length)
        throw new RangeError("Invalid JSON representation for EditorSelection");
      return new EditorSelection(json2.ranges.map((r) => SelectionRange.fromJSON(r)), json2.main);
    }
    static single(anchor, head = anchor) {
      return new EditorSelection([EditorSelection.range(anchor, head)], 0);
    }
    static create(ranges, mainIndex = 0) {
      if (ranges.length == 0)
        throw new RangeError("A selection needs at least one range");
      for (let pos = 0, i = 0; i < ranges.length; i++) {
        let range = ranges[i];
        if (range.empty ? range.from <= pos : range.from < pos)
          return EditorSelection.normalized(ranges.slice(), mainIndex);
        pos = range.to;
      }
      return new EditorSelection(ranges, mainIndex);
    }
    static cursor(pos, assoc = 0, bidiLevel, goalColumn) {
      return SelectionRange.create(pos, pos, (assoc == 0 ? 0 : assoc < 0 ? 4 : 8) | (bidiLevel == null ? 3 : Math.min(2, bidiLevel)) | (goalColumn !== null && goalColumn !== void 0 ? goalColumn : 33554431) << 5);
    }
    static range(anchor, head, goalColumn) {
      let goal = (goalColumn !== null && goalColumn !== void 0 ? goalColumn : 33554431) << 5;
      return head < anchor ? SelectionRange.create(head, anchor, 16 | goal | 8) : SelectionRange.create(anchor, head, goal | (head > anchor ? 4 : 0));
    }
    static normalized(ranges, mainIndex = 0) {
      let main = ranges[mainIndex];
      ranges.sort((a, b) => a.from - b.from);
      mainIndex = ranges.indexOf(main);
      for (let i = 1; i < ranges.length; i++) {
        let range = ranges[i], prev = ranges[i - 1];
        if (range.empty ? range.from <= prev.to : range.from < prev.to) {
          let from = prev.from, to = Math.max(range.to, prev.to);
          if (i <= mainIndex)
            mainIndex--;
          ranges.splice(--i, 2, range.anchor > range.head ? EditorSelection.range(to, from) : EditorSelection.range(from, to));
        }
      }
      return new EditorSelection(ranges, mainIndex);
    }
  };
  function checkSelection(selection, docLength) {
    for (let range of selection.ranges)
      if (range.to > docLength)
        throw new RangeError("Selection points outside of document");
  }
  var nextID = 0;
  var Facet = class {
    constructor(combine, compareInput, compare2, isStatic, enables) {
      this.combine = combine;
      this.compareInput = compareInput;
      this.compare = compare2;
      this.isStatic = isStatic;
      this.id = nextID++;
      this.default = combine([]);
      this.extensions = typeof enables == "function" ? enables(this) : enables;
    }
    static define(config = {}) {
      return new Facet(config.combine || ((a) => a), config.compareInput || ((a, b) => a === b), config.compare || (!config.combine ? sameArray : (a, b) => a === b), !!config.static, config.enables);
    }
    of(value) {
      return new FacetProvider([], this, 0, value);
    }
    compute(deps, get) {
      if (this.isStatic)
        throw new Error("Can't compute a static facet");
      return new FacetProvider(deps, this, 1, get);
    }
    computeN(deps, get) {
      if (this.isStatic)
        throw new Error("Can't compute a static facet");
      return new FacetProvider(deps, this, 2, get);
    }
    from(field, get) {
      if (!get)
        get = (x) => x;
      return this.compute([field], (state) => get(state.field(field)));
    }
  };
  function sameArray(a, b) {
    return a == b || a.length == b.length && a.every((e, i) => e === b[i]);
  }
  var FacetProvider = class {
    constructor(dependencies, facet, type, value) {
      this.dependencies = dependencies;
      this.facet = facet;
      this.type = type;
      this.value = value;
      this.id = nextID++;
    }
    dynamicSlot(addresses) {
      var _a2;
      let getter = this.value;
      let compare2 = this.facet.compareInput;
      let id2 = this.id, idx = addresses[id2] >> 1, multi = this.type == 2;
      let depDoc = false, depSel = false, depAddrs = [];
      for (let dep of this.dependencies) {
        if (dep == "doc")
          depDoc = true;
        else if (dep == "selection")
          depSel = true;
        else if ((((_a2 = addresses[dep.id]) !== null && _a2 !== void 0 ? _a2 : 1) & 1) == 0)
          depAddrs.push(addresses[dep.id]);
      }
      return {
        create(state) {
          state.values[idx] = getter(state);
          return 1;
        },
        update(state, tr) {
          if (depDoc && tr.docChanged || depSel && (tr.docChanged || tr.selection) || ensureAll(state, depAddrs)) {
            let newVal = getter(state);
            if (multi ? !compareArray(newVal, state.values[idx], compare2) : !compare2(newVal, state.values[idx])) {
              state.values[idx] = newVal;
              return 1;
            }
          }
          return 0;
        },
        reconfigure: (state, oldState) => {
          let newVal, oldAddr = oldState.config.address[id2];
          if (oldAddr != null) {
            let oldVal = getAddr(oldState, oldAddr);
            if (this.dependencies.every((dep) => {
              return dep instanceof Facet ? oldState.facet(dep) === state.facet(dep) : dep instanceof StateField ? oldState.field(dep, false) == state.field(dep, false) : true;
            }) || (multi ? compareArray(newVal = getter(state), oldVal, compare2) : compare2(newVal = getter(state), oldVal))) {
              state.values[idx] = oldVal;
              return 0;
            }
          } else {
            newVal = getter(state);
          }
          state.values[idx] = newVal;
          return 1;
        }
      };
    }
  };
  function compareArray(a, b, compare2) {
    if (a.length != b.length)
      return false;
    for (let i = 0; i < a.length; i++)
      if (!compare2(a[i], b[i]))
        return false;
    return true;
  }
  function ensureAll(state, addrs) {
    let changed = false;
    for (let addr of addrs)
      if (ensureAddr(state, addr) & 1)
        changed = true;
    return changed;
  }
  function dynamicFacetSlot(addresses, facet, providers) {
    let providerAddrs = providers.map((p) => addresses[p.id]);
    let providerTypes = providers.map((p) => p.type);
    let dynamic = providerAddrs.filter((p) => !(p & 1));
    let idx = addresses[facet.id] >> 1;
    function get(state) {
      let values2 = [];
      for (let i = 0; i < providerAddrs.length; i++) {
        let value = getAddr(state, providerAddrs[i]);
        if (providerTypes[i] == 2)
          for (let val of value)
            values2.push(val);
        else
          values2.push(value);
      }
      return facet.combine(values2);
    }
    return {
      create(state) {
        for (let addr of providerAddrs)
          ensureAddr(state, addr);
        state.values[idx] = get(state);
        return 1;
      },
      update(state, tr) {
        if (!ensureAll(state, dynamic))
          return 0;
        let value = get(state);
        if (facet.compare(value, state.values[idx]))
          return 0;
        state.values[idx] = value;
        return 1;
      },
      reconfigure(state, oldState) {
        let depChanged = ensureAll(state, providerAddrs);
        let oldProviders = oldState.config.facets[facet.id], oldValue = oldState.facet(facet);
        if (oldProviders && !depChanged && sameArray(providers, oldProviders)) {
          state.values[idx] = oldValue;
          return 0;
        }
        let value = get(state);
        if (facet.compare(value, oldValue)) {
          state.values[idx] = oldValue;
          return 0;
        }
        state.values[idx] = value;
        return 1;
      }
    };
  }
  var initField = /* @__PURE__ */ Facet.define({static: true});
  var StateField = class {
    constructor(id2, createF, updateF, compareF, spec) {
      this.id = id2;
      this.createF = createF;
      this.updateF = updateF;
      this.compareF = compareF;
      this.spec = spec;
      this.provides = void 0;
    }
    static define(config) {
      let field = new StateField(nextID++, config.create, config.update, config.compare || ((a, b) => a === b), config);
      if (config.provide)
        field.provides = config.provide(field);
      return field;
    }
    create(state) {
      let init = state.facet(initField).find((i) => i.field == this);
      return ((init === null || init === void 0 ? void 0 : init.create) || this.createF)(state);
    }
    slot(addresses) {
      let idx = addresses[this.id] >> 1;
      return {
        create: (state) => {
          state.values[idx] = this.create(state);
          return 1;
        },
        update: (state, tr) => {
          let oldVal = state.values[idx];
          let value = this.updateF(oldVal, tr);
          if (this.compareF(oldVal, value))
            return 0;
          state.values[idx] = value;
          return 1;
        },
        reconfigure: (state, oldState) => {
          if (oldState.config.address[this.id] != null) {
            state.values[idx] = oldState.field(this);
            return 0;
          }
          state.values[idx] = this.create(state);
          return 1;
        }
      };
    }
    init(create) {
      return [this, initField.of({field: this, create})];
    }
    get extension() {
      return this;
    }
  };
  var Prec_ = {lowest: 4, low: 3, default: 2, high: 1, highest: 0};
  function prec(value) {
    return (ext) => new PrecExtension(ext, value);
  }
  var Prec = {
    highest: /* @__PURE__ */ prec(Prec_.highest),
    high: /* @__PURE__ */ prec(Prec_.high),
    default: /* @__PURE__ */ prec(Prec_.default),
    low: /* @__PURE__ */ prec(Prec_.low),
    lowest: /* @__PURE__ */ prec(Prec_.lowest)
  };
  var PrecExtension = class {
    constructor(inner, prec2) {
      this.inner = inner;
      this.prec = prec2;
    }
  };
  var Compartment = class {
    of(ext) {
      return new CompartmentInstance(this, ext);
    }
    reconfigure(content2) {
      return Compartment.reconfigure.of({compartment: this, extension: content2});
    }
    get(state) {
      return state.config.compartments.get(this);
    }
  };
  var CompartmentInstance = class {
    constructor(compartment, inner) {
      this.compartment = compartment;
      this.inner = inner;
    }
  };
  var Configuration = class {
    constructor(base2, compartments, dynamicSlots, address, staticValues, facets) {
      this.base = base2;
      this.compartments = compartments;
      this.dynamicSlots = dynamicSlots;
      this.address = address;
      this.staticValues = staticValues;
      this.facets = facets;
      this.statusTemplate = [];
      while (this.statusTemplate.length < dynamicSlots.length)
        this.statusTemplate.push(0);
    }
    staticFacet(facet) {
      let addr = this.address[facet.id];
      return addr == null ? facet.default : this.staticValues[addr >> 1];
    }
    static resolve(base2, compartments, oldState) {
      let fields = [];
      let facets = Object.create(null);
      let newCompartments = new Map();
      for (let ext of flatten(base2, compartments, newCompartments)) {
        if (ext instanceof StateField)
          fields.push(ext);
        else
          (facets[ext.facet.id] || (facets[ext.facet.id] = [])).push(ext);
      }
      let address = Object.create(null);
      let staticValues = [];
      let dynamicSlots = [];
      for (let field of fields) {
        address[field.id] = dynamicSlots.length << 1;
        dynamicSlots.push((a) => field.slot(a));
      }
      let oldFacets = oldState === null || oldState === void 0 ? void 0 : oldState.config.facets;
      for (let id2 in facets) {
        let providers = facets[id2], facet = providers[0].facet;
        let oldProviders = oldFacets && oldFacets[id2] || [];
        if (providers.every((p) => p.type == 0)) {
          address[facet.id] = staticValues.length << 1 | 1;
          if (sameArray(oldProviders, providers)) {
            staticValues.push(oldState.facet(facet));
          } else {
            let value = facet.combine(providers.map((p) => p.value));
            staticValues.push(oldState && facet.compare(value, oldState.facet(facet)) ? oldState.facet(facet) : value);
          }
        } else {
          for (let p of providers) {
            if (p.type == 0) {
              address[p.id] = staticValues.length << 1 | 1;
              staticValues.push(p.value);
            } else {
              address[p.id] = dynamicSlots.length << 1;
              dynamicSlots.push((a) => p.dynamicSlot(a));
            }
          }
          address[facet.id] = dynamicSlots.length << 1;
          dynamicSlots.push((a) => dynamicFacetSlot(a, facet, providers));
        }
      }
      let dynamic = dynamicSlots.map((f) => f(address));
      return new Configuration(base2, newCompartments, dynamic, address, staticValues, facets);
    }
  };
  function flatten(extension, compartments, newCompartments) {
    let result = [[], [], [], [], []];
    let seen = new Map();
    function inner(ext, prec2) {
      let known = seen.get(ext);
      if (known != null) {
        if (known <= prec2)
          return;
        let found = result[known].indexOf(ext);
        if (found > -1)
          result[known].splice(found, 1);
        if (ext instanceof CompartmentInstance)
          newCompartments.delete(ext.compartment);
      }
      seen.set(ext, prec2);
      if (Array.isArray(ext)) {
        for (let e of ext)
          inner(e, prec2);
      } else if (ext instanceof CompartmentInstance) {
        if (newCompartments.has(ext.compartment))
          throw new RangeError(`Duplicate use of compartment in extensions`);
        let content2 = compartments.get(ext.compartment) || ext.inner;
        newCompartments.set(ext.compartment, content2);
        inner(content2, prec2);
      } else if (ext instanceof PrecExtension) {
        inner(ext.inner, ext.prec);
      } else if (ext instanceof StateField) {
        result[prec2].push(ext);
        if (ext.provides)
          inner(ext.provides, prec2);
      } else if (ext instanceof FacetProvider) {
        result[prec2].push(ext);
        if (ext.facet.extensions)
          inner(ext.facet.extensions, Prec_.default);
      } else {
        let content2 = ext.extension;
        if (!content2)
          throw new Error(`Unrecognized extension value in extension set (${ext}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);
        inner(content2, prec2);
      }
    }
    inner(extension, Prec_.default);
    return result.reduce((a, b) => a.concat(b));
  }
  function ensureAddr(state, addr) {
    if (addr & 1)
      return 2;
    let idx = addr >> 1;
    let status = state.status[idx];
    if (status == 4)
      throw new Error("Cyclic dependency between fields and/or facets");
    if (status & 2)
      return status;
    state.status[idx] = 4;
    let changed = state.computeSlot(state, state.config.dynamicSlots[idx]);
    return state.status[idx] = 2 | changed;
  }
  function getAddr(state, addr) {
    return addr & 1 ? state.config.staticValues[addr >> 1] : state.values[addr >> 1];
  }
  var languageData = /* @__PURE__ */ Facet.define();
  var allowMultipleSelections = /* @__PURE__ */ Facet.define({
    combine: (values2) => values2.some((v) => v),
    static: true
  });
  var lineSeparator = /* @__PURE__ */ Facet.define({
    combine: (values2) => values2.length ? values2[0] : void 0,
    static: true
  });
  var changeFilter = /* @__PURE__ */ Facet.define();
  var transactionFilter = /* @__PURE__ */ Facet.define();
  var transactionExtender = /* @__PURE__ */ Facet.define();
  var readOnly = /* @__PURE__ */ Facet.define({
    combine: (values2) => values2.length ? values2[0] : false
  });
  var Annotation = class {
    constructor(type, value) {
      this.type = type;
      this.value = value;
    }
    static define() {
      return new AnnotationType();
    }
  };
  var AnnotationType = class {
    of(value) {
      return new Annotation(this, value);
    }
  };
  var StateEffectType = class {
    constructor(map) {
      this.map = map;
    }
    of(value) {
      return new StateEffect(this, value);
    }
  };
  var StateEffect = class {
    constructor(type, value) {
      this.type = type;
      this.value = value;
    }
    map(mapping) {
      let mapped = this.type.map(this.value, mapping);
      return mapped === void 0 ? void 0 : mapped == this.value ? this : new StateEffect(this.type, mapped);
    }
    is(type) {
      return this.type == type;
    }
    static define(spec = {}) {
      return new StateEffectType(spec.map || ((v) => v));
    }
    static mapEffects(effects, mapping) {
      if (!effects.length)
        return effects;
      let result = [];
      for (let effect of effects) {
        let mapped = effect.map(mapping);
        if (mapped)
          result.push(mapped);
      }
      return result;
    }
  };
  StateEffect.reconfigure = /* @__PURE__ */ StateEffect.define();
  StateEffect.appendConfig = /* @__PURE__ */ StateEffect.define();
  var Transaction = class {
    constructor(startState, changes, selection, effects, annotations, scrollIntoView3) {
      this.startState = startState;
      this.changes = changes;
      this.selection = selection;
      this.effects = effects;
      this.annotations = annotations;
      this.scrollIntoView = scrollIntoView3;
      this._doc = null;
      this._state = null;
      if (selection)
        checkSelection(selection, changes.newLength);
      if (!annotations.some((a) => a.type == Transaction.time))
        this.annotations = annotations.concat(Transaction.time.of(Date.now()));
    }
    static create(startState, changes, selection, effects, annotations, scrollIntoView3) {
      return new Transaction(startState, changes, selection, effects, annotations, scrollIntoView3);
    }
    get newDoc() {
      return this._doc || (this._doc = this.changes.apply(this.startState.doc));
    }
    get newSelection() {
      return this.selection || this.startState.selection.map(this.changes);
    }
    get state() {
      if (!this._state)
        this.startState.applyTransaction(this);
      return this._state;
    }
    annotation(type) {
      for (let ann of this.annotations)
        if (ann.type == type)
          return ann.value;
      return void 0;
    }
    get docChanged() {
      return !this.changes.empty;
    }
    get reconfigured() {
      return this.startState.config != this.state.config;
    }
    isUserEvent(event) {
      let e = this.annotation(Transaction.userEvent);
      return !!(e && (e == event || e.length > event.length && e.slice(0, event.length) == event && e[event.length] == "."));
    }
  };
  Transaction.time = /* @__PURE__ */ Annotation.define();
  Transaction.userEvent = /* @__PURE__ */ Annotation.define();
  Transaction.addToHistory = /* @__PURE__ */ Annotation.define();
  Transaction.remote = /* @__PURE__ */ Annotation.define();
  function joinRanges(a, b) {
    let result = [];
    for (let iA = 0, iB = 0; ; ) {
      let from, to;
      if (iA < a.length && (iB == b.length || b[iB] >= a[iA])) {
        from = a[iA++];
        to = a[iA++];
      } else if (iB < b.length) {
        from = b[iB++];
        to = b[iB++];
      } else
        return result;
      if (!result.length || result[result.length - 1] < from)
        result.push(from, to);
      else if (result[result.length - 1] < to)
        result[result.length - 1] = to;
    }
  }
  function mergeTransaction(a, b, sequential) {
    var _a2;
    let mapForA, mapForB, changes;
    if (sequential) {
      mapForA = b.changes;
      mapForB = ChangeSet.empty(b.changes.length);
      changes = a.changes.compose(b.changes);
    } else {
      mapForA = b.changes.map(a.changes);
      mapForB = a.changes.mapDesc(b.changes, true);
      changes = a.changes.compose(mapForA);
    }
    return {
      changes,
      selection: b.selection ? b.selection.map(mapForB) : (_a2 = a.selection) === null || _a2 === void 0 ? void 0 : _a2.map(mapForA),
      effects: StateEffect.mapEffects(a.effects, mapForA).concat(StateEffect.mapEffects(b.effects, mapForB)),
      annotations: a.annotations.length ? a.annotations.concat(b.annotations) : b.annotations,
      scrollIntoView: a.scrollIntoView || b.scrollIntoView
    };
  }
  function resolveTransactionInner(state, spec, docSize) {
    let sel = spec.selection, annotations = asArray(spec.annotations);
    if (spec.userEvent)
      annotations = annotations.concat(Transaction.userEvent.of(spec.userEvent));
    return {
      changes: spec.changes instanceof ChangeSet ? spec.changes : ChangeSet.of(spec.changes || [], docSize, state.facet(lineSeparator)),
      selection: sel && (sel instanceof EditorSelection ? sel : EditorSelection.single(sel.anchor, sel.head)),
      effects: asArray(spec.effects),
      annotations,
      scrollIntoView: !!spec.scrollIntoView
    };
  }
  function resolveTransaction(state, specs, filter) {
    let s = resolveTransactionInner(state, specs.length ? specs[0] : {}, state.doc.length);
    if (specs.length && specs[0].filter === false)
      filter = false;
    for (let i = 1; i < specs.length; i++) {
      if (specs[i].filter === false)
        filter = false;
      let seq = !!specs[i].sequential;
      s = mergeTransaction(s, resolveTransactionInner(state, specs[i], seq ? s.changes.newLength : state.doc.length), seq);
    }
    let tr = Transaction.create(state, s.changes, s.selection, s.effects, s.annotations, s.scrollIntoView);
    return extendTransaction(filter ? filterTransaction(tr) : tr);
  }
  function filterTransaction(tr) {
    let state = tr.startState;
    let result = true;
    for (let filter of state.facet(changeFilter)) {
      let value = filter(tr);
      if (value === false) {
        result = false;
        break;
      }
      if (Array.isArray(value))
        result = result === true ? value : joinRanges(result, value);
    }
    if (result !== true) {
      let changes, back;
      if (result === false) {
        back = tr.changes.invertedDesc;
        changes = ChangeSet.empty(state.doc.length);
      } else {
        let filtered = tr.changes.filter(result);
        changes = filtered.changes;
        back = filtered.filtered.mapDesc(filtered.changes).invertedDesc;
      }
      tr = Transaction.create(state, changes, tr.selection && tr.selection.map(back), StateEffect.mapEffects(tr.effects, back), tr.annotations, tr.scrollIntoView);
    }
    let filters = state.facet(transactionFilter);
    for (let i = filters.length - 1; i >= 0; i--) {
      let filtered = filters[i](tr);
      if (filtered instanceof Transaction)
        tr = filtered;
      else if (Array.isArray(filtered) && filtered.length == 1 && filtered[0] instanceof Transaction)
        tr = filtered[0];
      else
        tr = resolveTransaction(state, asArray(filtered), false);
    }
    return tr;
  }
  function extendTransaction(tr) {
    let state = tr.startState, extenders = state.facet(transactionExtender), spec = tr;
    for (let i = extenders.length - 1; i >= 0; i--) {
      let extension = extenders[i](tr);
      if (extension && Object.keys(extension).length)
        spec = mergeTransaction(spec, resolveTransactionInner(state, extension, tr.changes.newLength), true);
    }
    return spec == tr ? tr : Transaction.create(state, tr.changes, tr.selection, spec.effects, spec.annotations, spec.scrollIntoView);
  }
  var none = [];
  function asArray(value) {
    return value == null ? none : Array.isArray(value) ? value : [value];
  }
  var CharCategory = /* @__PURE__ */ function(CharCategory2) {
    CharCategory2[CharCategory2["Word"] = 0] = "Word";
    CharCategory2[CharCategory2["Space"] = 1] = "Space";
    CharCategory2[CharCategory2["Other"] = 2] = "Other";
    return CharCategory2;
  }(CharCategory || (CharCategory = {}));
  var nonASCIISingleCaseWordChar = /[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;
  var wordChar;
  try {
    wordChar = /* @__PURE__ */ new RegExp("[\\p{Alphabetic}\\p{Number}_]", "u");
  } catch (_) {
  }
  function hasWordChar(str) {
    if (wordChar)
      return wordChar.test(str);
    for (let i = 0; i < str.length; i++) {
      let ch = str[i];
      if (/\w/.test(ch) || ch > "\x80" && (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch)))
        return true;
    }
    return false;
  }
  function makeCategorizer(wordChars) {
    return (char) => {
      if (!/\S/.test(char))
        return CharCategory.Space;
      if (hasWordChar(char))
        return CharCategory.Word;
      for (let i = 0; i < wordChars.length; i++)
        if (char.indexOf(wordChars[i]) > -1)
          return CharCategory.Word;
      return CharCategory.Other;
    };
  }
  var EditorState = class {
    constructor(config, doc2, selection, values2, computeSlot, tr) {
      this.config = config;
      this.doc = doc2;
      this.selection = selection;
      this.values = values2;
      this.status = config.statusTemplate.slice();
      this.computeSlot = computeSlot;
      if (tr)
        tr._state = this;
      for (let i = 0; i < this.config.dynamicSlots.length; i++)
        ensureAddr(this, i << 1);
      this.computeSlot = null;
    }
    field(field, require2 = true) {
      let addr = this.config.address[field.id];
      if (addr == null) {
        if (require2)
          throw new RangeError("Field is not present in this state");
        return void 0;
      }
      ensureAddr(this, addr);
      return getAddr(this, addr);
    }
    update(...specs) {
      return resolveTransaction(this, specs, true);
    }
    applyTransaction(tr) {
      let conf = this.config, {base: base2, compartments} = conf;
      for (let effect of tr.effects) {
        if (effect.is(Compartment.reconfigure)) {
          if (conf) {
            compartments = new Map();
            conf.compartments.forEach((val, key) => compartments.set(key, val));
            conf = null;
          }
          compartments.set(effect.value.compartment, effect.value.extension);
        } else if (effect.is(StateEffect.reconfigure)) {
          conf = null;
          base2 = effect.value;
        } else if (effect.is(StateEffect.appendConfig)) {
          conf = null;
          base2 = asArray(base2).concat(effect.value);
        }
      }
      let startValues;
      if (!conf) {
        conf = Configuration.resolve(base2, compartments, this);
        let intermediateState = new EditorState(conf, this.doc, this.selection, conf.dynamicSlots.map(() => null), (state, slot) => slot.reconfigure(state, this), null);
        startValues = intermediateState.values;
      } else {
        startValues = tr.startState.values.slice();
      }
      new EditorState(conf, tr.newDoc, tr.newSelection, startValues, (state, slot) => slot.update(state, tr), tr);
    }
    replaceSelection(text) {
      if (typeof text == "string")
        text = this.toText(text);
      return this.changeByRange((range) => ({
        changes: {from: range.from, to: range.to, insert: text},
        range: EditorSelection.cursor(range.from + text.length)
      }));
    }
    changeByRange(f) {
      let sel = this.selection;
      let result1 = f(sel.ranges[0]);
      let changes = this.changes(result1.changes), ranges = [result1.range];
      let effects = asArray(result1.effects);
      for (let i = 1; i < sel.ranges.length; i++) {
        let result = f(sel.ranges[i]);
        let newChanges = this.changes(result.changes), newMapped = newChanges.map(changes);
        for (let j = 0; j < i; j++)
          ranges[j] = ranges[j].map(newMapped);
        let mapBy = changes.mapDesc(newChanges, true);
        ranges.push(result.range.map(mapBy));
        changes = changes.compose(newMapped);
        effects = StateEffect.mapEffects(effects, newMapped).concat(StateEffect.mapEffects(asArray(result.effects), mapBy));
      }
      return {
        changes,
        selection: EditorSelection.create(ranges, sel.mainIndex),
        effects
      };
    }
    changes(spec = []) {
      if (spec instanceof ChangeSet)
        return spec;
      return ChangeSet.of(spec, this.doc.length, this.facet(EditorState.lineSeparator));
    }
    toText(string2) {
      return Text.of(string2.split(this.facet(EditorState.lineSeparator) || DefaultSplit));
    }
    sliceDoc(from = 0, to = this.doc.length) {
      return this.doc.sliceString(from, to, this.lineBreak);
    }
    facet(facet) {
      let addr = this.config.address[facet.id];
      if (addr == null)
        return facet.default;
      ensureAddr(this, addr);
      return getAddr(this, addr);
    }
    toJSON(fields) {
      let result = {
        doc: this.sliceDoc(),
        selection: this.selection.toJSON()
      };
      if (fields)
        for (let prop in fields) {
          let value = fields[prop];
          if (value instanceof StateField && this.config.address[value.id] != null)
            result[prop] = value.spec.toJSON(this.field(fields[prop]), this);
        }
      return result;
    }
    static fromJSON(json2, config = {}, fields) {
      if (!json2 || typeof json2.doc != "string")
        throw new RangeError("Invalid JSON representation for EditorState");
      let fieldInit = [];
      if (fields)
        for (let prop in fields) {
          if (Object.prototype.hasOwnProperty.call(json2, prop)) {
            let field = fields[prop], value = json2[prop];
            fieldInit.push(field.init((state) => field.spec.fromJSON(value, state)));
          }
        }
      return EditorState.create({
        doc: json2.doc,
        selection: EditorSelection.fromJSON(json2.selection),
        extensions: config.extensions ? fieldInit.concat([config.extensions]) : fieldInit
      });
    }
    static create(config = {}) {
      let configuration = Configuration.resolve(config.extensions || [], new Map());
      let doc2 = config.doc instanceof Text ? config.doc : Text.of((config.doc || "").split(configuration.staticFacet(EditorState.lineSeparator) || DefaultSplit));
      let selection = !config.selection ? EditorSelection.single(0) : config.selection instanceof EditorSelection ? config.selection : EditorSelection.single(config.selection.anchor, config.selection.head);
      checkSelection(selection, doc2.length);
      if (!configuration.staticFacet(allowMultipleSelections))
        selection = selection.asSingle();
      return new EditorState(configuration, doc2, selection, configuration.dynamicSlots.map(() => null), (state, slot) => slot.create(state), null);
    }
    get tabSize() {
      return this.facet(EditorState.tabSize);
    }
    get lineBreak() {
      return this.facet(EditorState.lineSeparator) || "\n";
    }
    get readOnly() {
      return this.facet(readOnly);
    }
    phrase(phrase, ...insert2) {
      for (let map of this.facet(EditorState.phrases))
        if (Object.prototype.hasOwnProperty.call(map, phrase)) {
          phrase = map[phrase];
          break;
        }
      if (insert2.length)
        phrase = phrase.replace(/\$(\$|\d*)/g, (m, i) => {
          if (i == "$")
            return "$";
          let n = +(i || 1);
          return !n || n > insert2.length ? m : insert2[n - 1];
        });
      return phrase;
    }
    languageDataAt(name2, pos, side = -1) {
      let values2 = [];
      for (let provider of this.facet(languageData)) {
        for (let result of provider(this, pos, side)) {
          if (Object.prototype.hasOwnProperty.call(result, name2))
            values2.push(result[name2]);
        }
      }
      return values2;
    }
    charCategorizer(at) {
      return makeCategorizer(this.languageDataAt("wordChars", at).join(""));
    }
    wordAt(pos) {
      let {text, from, length} = this.doc.lineAt(pos);
      let cat = this.charCategorizer(pos);
      let start = pos - from, end = pos - from;
      while (start > 0) {
        let prev = findClusterBreak(text, start, false);
        if (cat(text.slice(prev, start)) != CharCategory.Word)
          break;
        start = prev;
      }
      while (end < length) {
        let next = findClusterBreak(text, end);
        if (cat(text.slice(end, next)) != CharCategory.Word)
          break;
        end = next;
      }
      return start == end ? null : EditorSelection.range(start + from, end + from);
    }
  };
  EditorState.allowMultipleSelections = allowMultipleSelections;
  EditorState.tabSize = /* @__PURE__ */ Facet.define({
    combine: (values2) => values2.length ? values2[0] : 4
  });
  EditorState.lineSeparator = lineSeparator;
  EditorState.readOnly = readOnly;
  EditorState.phrases = /* @__PURE__ */ Facet.define({
    compare(a, b) {
      let kA = Object.keys(a), kB = Object.keys(b);
      return kA.length == kB.length && kA.every((k) => a[k] == b[k]);
    }
  });
  EditorState.languageData = languageData;
  EditorState.changeFilter = changeFilter;
  EditorState.transactionFilter = transactionFilter;
  EditorState.transactionExtender = transactionExtender;
  Compartment.reconfigure = /* @__PURE__ */ StateEffect.define();
  function combineConfig(configs, defaults, combine = {}) {
    let result = {};
    for (let config of configs)
      for (let key of Object.keys(config)) {
        let value = config[key], current = result[key];
        if (current === void 0)
          result[key] = value;
        else if (current === value || value === void 0)
          ;
        else if (Object.hasOwnProperty.call(combine, key))
          result[key] = combine[key](current, value);
        else
          throw new Error("Config merge conflict for field " + key);
      }
    for (let key in defaults)
      if (result[key] === void 0)
        result[key] = defaults[key];
    return result;
  }
  var RangeValue = class {
    eq(other) {
      return this == other;
    }
    range(from, to = from) {
      return Range.create(from, to, this);
    }
  };
  RangeValue.prototype.startSide = RangeValue.prototype.endSide = 0;
  RangeValue.prototype.point = false;
  RangeValue.prototype.mapMode = MapMode.TrackDel;
  var Range = class {
    constructor(from, to, value) {
      this.from = from;
      this.to = to;
      this.value = value;
    }
    static create(from, to, value) {
      return new Range(from, to, value);
    }
  };
  function cmpRange(a, b) {
    return a.from - b.from || a.value.startSide - b.value.startSide;
  }
  var Chunk = class {
    constructor(from, to, value, maxPoint) {
      this.from = from;
      this.to = to;
      this.value = value;
      this.maxPoint = maxPoint;
    }
    get length() {
      return this.to[this.to.length - 1];
    }
    findIndex(pos, side, end, startAt = 0) {
      let arr = end ? this.to : this.from;
      for (let lo = startAt, hi = arr.length; ; ) {
        if (lo == hi)
          return lo;
        let mid = lo + hi >> 1;
        let diff = arr[mid] - pos || (end ? this.value[mid].endSide : this.value[mid].startSide) - side;
        if (mid == lo)
          return diff >= 0 ? lo : hi;
        if (diff >= 0)
          hi = mid;
        else
          lo = mid + 1;
      }
    }
    between(offset, from, to, f) {
      for (let i = this.findIndex(from, -1e9, true), e = this.findIndex(to, 1e9, false, i); i < e; i++)
        if (f(this.from[i] + offset, this.to[i] + offset, this.value[i]) === false)
          return false;
    }
    map(offset, changes) {
      let value = [], from = [], to = [], newPos = -1, maxPoint = -1;
      for (let i = 0; i < this.value.length; i++) {
        let val = this.value[i], curFrom = this.from[i] + offset, curTo = this.to[i] + offset, newFrom, newTo;
        if (curFrom == curTo) {
          let mapped = changes.mapPos(curFrom, val.startSide, val.mapMode);
          if (mapped == null)
            continue;
          newFrom = newTo = mapped;
          if (val.startSide != val.endSide) {
            newTo = changes.mapPos(curFrom, val.endSide);
            if (newTo < newFrom)
              continue;
          }
        } else {
          newFrom = changes.mapPos(curFrom, val.startSide);
          newTo = changes.mapPos(curTo, val.endSide);
          if (newFrom > newTo || newFrom == newTo && val.startSide > 0 && val.endSide <= 0)
            continue;
        }
        if ((newTo - newFrom || val.endSide - val.startSide) < 0)
          continue;
        if (newPos < 0)
          newPos = newFrom;
        if (val.point)
          maxPoint = Math.max(maxPoint, newTo - newFrom);
        value.push(val);
        from.push(newFrom - newPos);
        to.push(newTo - newPos);
      }
      return {mapped: value.length ? new Chunk(from, to, value, maxPoint) : null, pos: newPos};
    }
  };
  var RangeSet = class {
    constructor(chunkPos, chunk, nextLayer, maxPoint) {
      this.chunkPos = chunkPos;
      this.chunk = chunk;
      this.nextLayer = nextLayer;
      this.maxPoint = maxPoint;
    }
    static create(chunkPos, chunk, nextLayer, maxPoint) {
      return new RangeSet(chunkPos, chunk, nextLayer, maxPoint);
    }
    get length() {
      let last = this.chunk.length - 1;
      return last < 0 ? 0 : Math.max(this.chunkEnd(last), this.nextLayer.length);
    }
    get size() {
      if (this.isEmpty)
        return 0;
      let size = this.nextLayer.size;
      for (let chunk of this.chunk)
        size += chunk.value.length;
      return size;
    }
    chunkEnd(index) {
      return this.chunkPos[index] + this.chunk[index].length;
    }
    update(updateSpec) {
      let {add = [], sort = false, filterFrom = 0, filterTo = this.length} = updateSpec;
      let filter = updateSpec.filter;
      if (add.length == 0 && !filter)
        return this;
      if (sort)
        add = add.slice().sort(cmpRange);
      if (this.isEmpty)
        return add.length ? RangeSet.of(add) : this;
      let cur2 = new LayerCursor(this, null, -1).goto(0), i = 0, spill = [];
      let builder = new RangeSetBuilder();
      while (cur2.value || i < add.length) {
        if (i < add.length && (cur2.from - add[i].from || cur2.startSide - add[i].value.startSide) >= 0) {
          let range = add[i++];
          if (!builder.addInner(range.from, range.to, range.value))
            spill.push(range);
        } else if (cur2.rangeIndex == 1 && cur2.chunkIndex < this.chunk.length && (i == add.length || this.chunkEnd(cur2.chunkIndex) < add[i].from) && (!filter || filterFrom > this.chunkEnd(cur2.chunkIndex) || filterTo < this.chunkPos[cur2.chunkIndex]) && builder.addChunk(this.chunkPos[cur2.chunkIndex], this.chunk[cur2.chunkIndex])) {
          cur2.nextChunk();
        } else {
          if (!filter || filterFrom > cur2.to || filterTo < cur2.from || filter(cur2.from, cur2.to, cur2.value)) {
            if (!builder.addInner(cur2.from, cur2.to, cur2.value))
              spill.push(Range.create(cur2.from, cur2.to, cur2.value));
          }
          cur2.next();
        }
      }
      return builder.finishInner(this.nextLayer.isEmpty && !spill.length ? RangeSet.empty : this.nextLayer.update({add: spill, filter, filterFrom, filterTo}));
    }
    map(changes) {
      if (changes.empty || this.isEmpty)
        return this;
      let chunks = [], chunkPos = [], maxPoint = -1;
      for (let i = 0; i < this.chunk.length; i++) {
        let start = this.chunkPos[i], chunk = this.chunk[i];
        let touch = changes.touchesRange(start, start + chunk.length);
        if (touch === false) {
          maxPoint = Math.max(maxPoint, chunk.maxPoint);
          chunks.push(chunk);
          chunkPos.push(changes.mapPos(start));
        } else if (touch === true) {
          let {mapped, pos} = chunk.map(start, changes);
          if (mapped) {
            maxPoint = Math.max(maxPoint, mapped.maxPoint);
            chunks.push(mapped);
            chunkPos.push(pos);
          }
        }
      }
      let next = this.nextLayer.map(changes);
      return chunks.length == 0 ? next : new RangeSet(chunkPos, chunks, next || RangeSet.empty, maxPoint);
    }
    between(from, to, f) {
      if (this.isEmpty)
        return;
      for (let i = 0; i < this.chunk.length; i++) {
        let start = this.chunkPos[i], chunk = this.chunk[i];
        if (to >= start && from <= start + chunk.length && chunk.between(start, from - start, to - start, f) === false)
          return;
      }
      this.nextLayer.between(from, to, f);
    }
    iter(from = 0) {
      return HeapCursor.from([this]).goto(from);
    }
    get isEmpty() {
      return this.nextLayer == this;
    }
    static iter(sets, from = 0) {
      return HeapCursor.from(sets).goto(from);
    }
    static compare(oldSets, newSets, textDiff, comparator, minPointSize = -1) {
      let a = oldSets.filter((set) => set.maxPoint > 0 || !set.isEmpty && set.maxPoint >= minPointSize);
      let b = newSets.filter((set) => set.maxPoint > 0 || !set.isEmpty && set.maxPoint >= minPointSize);
      let sharedChunks = findSharedChunks(a, b, textDiff);
      let sideA = new SpanCursor(a, sharedChunks, minPointSize);
      let sideB = new SpanCursor(b, sharedChunks, minPointSize);
      textDiff.iterGaps((fromA, fromB, length) => compare(sideA, fromA, sideB, fromB, length, comparator));
      if (textDiff.empty && textDiff.length == 0)
        compare(sideA, 0, sideB, 0, 0, comparator);
    }
    static eq(oldSets, newSets, from = 0, to) {
      if (to == null)
        to = 1e9 - 1;
      let a = oldSets.filter((set) => !set.isEmpty && newSets.indexOf(set) < 0);
      let b = newSets.filter((set) => !set.isEmpty && oldSets.indexOf(set) < 0);
      if (a.length != b.length)
        return false;
      if (!a.length)
        return true;
      let sharedChunks = findSharedChunks(a, b);
      let sideA = new SpanCursor(a, sharedChunks, 0).goto(from), sideB = new SpanCursor(b, sharedChunks, 0).goto(from);
      for (; ; ) {
        if (sideA.to != sideB.to || !sameValues(sideA.active, sideB.active) || sideA.point && (!sideB.point || !sideA.point.eq(sideB.point)))
          return false;
        if (sideA.to > to)
          return true;
        sideA.next();
        sideB.next();
      }
    }
    static spans(sets, from, to, iterator, minPointSize = -1) {
      let cursor = new SpanCursor(sets, null, minPointSize).goto(from), pos = from;
      let open = cursor.openStart;
      for (; ; ) {
        let curTo = Math.min(cursor.to, to);
        if (cursor.point) {
          iterator.point(pos, curTo, cursor.point, cursor.activeForPoint(cursor.to), open, cursor.pointRank);
          open = cursor.openEnd(curTo) + (cursor.to > curTo ? 1 : 0);
        } else if (curTo > pos) {
          iterator.span(pos, curTo, cursor.active, open);
          open = cursor.openEnd(curTo);
        }
        if (cursor.to > to)
          break;
        pos = cursor.to;
        cursor.next();
      }
      return open;
    }
    static of(ranges, sort = false) {
      let build = new RangeSetBuilder();
      for (let range of ranges instanceof Range ? [ranges] : sort ? lazySort(ranges) : ranges)
        build.add(range.from, range.to, range.value);
      return build.finish();
    }
  };
  RangeSet.empty = /* @__PURE__ */ new RangeSet([], [], null, -1);
  function lazySort(ranges) {
    if (ranges.length > 1)
      for (let prev = ranges[0], i = 1; i < ranges.length; i++) {
        let cur2 = ranges[i];
        if (cmpRange(prev, cur2) > 0)
          return ranges.slice().sort(cmpRange);
        prev = cur2;
      }
    return ranges;
  }
  RangeSet.empty.nextLayer = RangeSet.empty;
  var RangeSetBuilder = class {
    constructor() {
      this.chunks = [];
      this.chunkPos = [];
      this.chunkStart = -1;
      this.last = null;
      this.lastFrom = -1e9;
      this.lastTo = -1e9;
      this.from = [];
      this.to = [];
      this.value = [];
      this.maxPoint = -1;
      this.setMaxPoint = -1;
      this.nextLayer = null;
    }
    finishChunk(newArrays) {
      this.chunks.push(new Chunk(this.from, this.to, this.value, this.maxPoint));
      this.chunkPos.push(this.chunkStart);
      this.chunkStart = -1;
      this.setMaxPoint = Math.max(this.setMaxPoint, this.maxPoint);
      this.maxPoint = -1;
      if (newArrays) {
        this.from = [];
        this.to = [];
        this.value = [];
      }
    }
    add(from, to, value) {
      if (!this.addInner(from, to, value))
        (this.nextLayer || (this.nextLayer = new RangeSetBuilder())).add(from, to, value);
    }
    addInner(from, to, value) {
      let diff = from - this.lastTo || value.startSide - this.last.endSide;
      if (diff <= 0 && (from - this.lastFrom || value.startSide - this.last.startSide) < 0)
        throw new Error("Ranges must be added sorted by `from` position and `startSide`");
      if (diff < 0)
        return false;
      if (this.from.length == 250)
        this.finishChunk(true);
      if (this.chunkStart < 0)
        this.chunkStart = from;
      this.from.push(from - this.chunkStart);
      this.to.push(to - this.chunkStart);
      this.last = value;
      this.lastFrom = from;
      this.lastTo = to;
      this.value.push(value);
      if (value.point)
        this.maxPoint = Math.max(this.maxPoint, to - from);
      return true;
    }
    addChunk(from, chunk) {
      if ((from - this.lastTo || chunk.value[0].startSide - this.last.endSide) < 0)
        return false;
      if (this.from.length)
        this.finishChunk(true);
      this.setMaxPoint = Math.max(this.setMaxPoint, chunk.maxPoint);
      this.chunks.push(chunk);
      this.chunkPos.push(from);
      let last = chunk.value.length - 1;
      this.last = chunk.value[last];
      this.lastFrom = chunk.from[last] + from;
      this.lastTo = chunk.to[last] + from;
      return true;
    }
    finish() {
      return this.finishInner(RangeSet.empty);
    }
    finishInner(next) {
      if (this.from.length)
        this.finishChunk(false);
      if (this.chunks.length == 0)
        return next;
      let result = RangeSet.create(this.chunkPos, this.chunks, this.nextLayer ? this.nextLayer.finishInner(next) : next, this.setMaxPoint);
      this.from = null;
      return result;
    }
  };
  function findSharedChunks(a, b, textDiff) {
    let inA = new Map();
    for (let set of a)
      for (let i = 0; i < set.chunk.length; i++)
        if (set.chunk[i].maxPoint <= 0)
          inA.set(set.chunk[i], set.chunkPos[i]);
    let shared = new Set();
    for (let set of b)
      for (let i = 0; i < set.chunk.length; i++) {
        let known = inA.get(set.chunk[i]);
        if (known != null && (textDiff ? textDiff.mapPos(known) : known) == set.chunkPos[i] && !(textDiff === null || textDiff === void 0 ? void 0 : textDiff.touchesRange(known, known + set.chunk[i].length)))
          shared.add(set.chunk[i]);
      }
    return shared;
  }
  var LayerCursor = class {
    constructor(layer, skip, minPoint, rank = 0) {
      this.layer = layer;
      this.skip = skip;
      this.minPoint = minPoint;
      this.rank = rank;
    }
    get startSide() {
      return this.value ? this.value.startSide : 0;
    }
    get endSide() {
      return this.value ? this.value.endSide : 0;
    }
    goto(pos, side = -1e9) {
      this.chunkIndex = this.rangeIndex = 0;
      this.gotoInner(pos, side, false);
      return this;
    }
    gotoInner(pos, side, forward) {
      while (this.chunkIndex < this.layer.chunk.length) {
        let next = this.layer.chunk[this.chunkIndex];
        if (!(this.skip && this.skip.has(next) || this.layer.chunkEnd(this.chunkIndex) < pos || next.maxPoint < this.minPoint))
          break;
        this.chunkIndex++;
        forward = false;
      }
      if (this.chunkIndex < this.layer.chunk.length) {
        let rangeIndex = this.layer.chunk[this.chunkIndex].findIndex(pos - this.layer.chunkPos[this.chunkIndex], side, true);
        if (!forward || this.rangeIndex < rangeIndex)
          this.setRangeIndex(rangeIndex);
      }
      this.next();
    }
    forward(pos, side) {
      if ((this.to - pos || this.endSide - side) < 0)
        this.gotoInner(pos, side, true);
    }
    next() {
      for (; ; ) {
        if (this.chunkIndex == this.layer.chunk.length) {
          this.from = this.to = 1e9;
          this.value = null;
          break;
        } else {
          let chunkPos = this.layer.chunkPos[this.chunkIndex], chunk = this.layer.chunk[this.chunkIndex];
          let from = chunkPos + chunk.from[this.rangeIndex];
          this.from = from;
          this.to = chunkPos + chunk.to[this.rangeIndex];
          this.value = chunk.value[this.rangeIndex];
          this.setRangeIndex(this.rangeIndex + 1);
          if (this.minPoint < 0 || this.value.point && this.to - this.from >= this.minPoint)
            break;
        }
      }
    }
    setRangeIndex(index) {
      if (index == this.layer.chunk[this.chunkIndex].value.length) {
        this.chunkIndex++;
        if (this.skip) {
          while (this.chunkIndex < this.layer.chunk.length && this.skip.has(this.layer.chunk[this.chunkIndex]))
            this.chunkIndex++;
        }
        this.rangeIndex = 0;
      } else {
        this.rangeIndex = index;
      }
    }
    nextChunk() {
      this.chunkIndex++;
      this.rangeIndex = 0;
      this.next();
    }
    compare(other) {
      return this.from - other.from || this.startSide - other.startSide || this.rank - other.rank || this.to - other.to || this.endSide - other.endSide;
    }
  };
  var HeapCursor = class {
    constructor(heap) {
      this.heap = heap;
    }
    static from(sets, skip = null, minPoint = -1) {
      let heap = [];
      for (let i = 0; i < sets.length; i++) {
        for (let cur2 = sets[i]; !cur2.isEmpty; cur2 = cur2.nextLayer) {
          if (cur2.maxPoint >= minPoint)
            heap.push(new LayerCursor(cur2, skip, minPoint, i));
        }
      }
      return heap.length == 1 ? heap[0] : new HeapCursor(heap);
    }
    get startSide() {
      return this.value ? this.value.startSide : 0;
    }
    goto(pos, side = -1e9) {
      for (let cur2 of this.heap)
        cur2.goto(pos, side);
      for (let i = this.heap.length >> 1; i >= 0; i--)
        heapBubble(this.heap, i);
      this.next();
      return this;
    }
    forward(pos, side) {
      for (let cur2 of this.heap)
        cur2.forward(pos, side);
      for (let i = this.heap.length >> 1; i >= 0; i--)
        heapBubble(this.heap, i);
      if ((this.to - pos || this.value.endSide - side) < 0)
        this.next();
    }
    next() {
      if (this.heap.length == 0) {
        this.from = this.to = 1e9;
        this.value = null;
        this.rank = -1;
      } else {
        let top2 = this.heap[0];
        this.from = top2.from;
        this.to = top2.to;
        this.value = top2.value;
        this.rank = top2.rank;
        if (top2.value)
          top2.next();
        heapBubble(this.heap, 0);
      }
    }
  };
  function heapBubble(heap, index) {
    for (let cur2 = heap[index]; ; ) {
      let childIndex = (index << 1) + 1;
      if (childIndex >= heap.length)
        break;
      let child = heap[childIndex];
      if (childIndex + 1 < heap.length && child.compare(heap[childIndex + 1]) >= 0) {
        child = heap[childIndex + 1];
        childIndex++;
      }
      if (cur2.compare(child) < 0)
        break;
      heap[childIndex] = cur2;
      heap[index] = child;
      index = childIndex;
    }
  }
  var SpanCursor = class {
    constructor(sets, skip, minPoint) {
      this.minPoint = minPoint;
      this.active = [];
      this.activeTo = [];
      this.activeRank = [];
      this.minActive = -1;
      this.point = null;
      this.pointFrom = 0;
      this.pointRank = 0;
      this.to = -1e9;
      this.endSide = 0;
      this.openStart = -1;
      this.cursor = HeapCursor.from(sets, skip, minPoint);
    }
    goto(pos, side = -1e9) {
      this.cursor.goto(pos, side);
      this.active.length = this.activeTo.length = this.activeRank.length = 0;
      this.minActive = -1;
      this.to = pos;
      this.endSide = side;
      this.openStart = -1;
      this.next();
      return this;
    }
    forward(pos, side) {
      while (this.minActive > -1 && (this.activeTo[this.minActive] - pos || this.active[this.minActive].endSide - side) < 0)
        this.removeActive(this.minActive);
      this.cursor.forward(pos, side);
    }
    removeActive(index) {
      remove(this.active, index);
      remove(this.activeTo, index);
      remove(this.activeRank, index);
      this.minActive = findMinIndex(this.active, this.activeTo);
    }
    addActive(trackOpen) {
      let i = 0, {value, to, rank} = this.cursor;
      while (i < this.activeRank.length && this.activeRank[i] <= rank)
        i++;
      insert(this.active, i, value);
      insert(this.activeTo, i, to);
      insert(this.activeRank, i, rank);
      if (trackOpen)
        insert(trackOpen, i, this.cursor.from);
      this.minActive = findMinIndex(this.active, this.activeTo);
    }
    next() {
      let from = this.to, wasPoint = this.point;
      this.point = null;
      let trackOpen = this.openStart < 0 ? [] : null, trackExtra = 0;
      for (; ; ) {
        let a = this.minActive;
        if (a > -1 && (this.activeTo[a] - this.cursor.from || this.active[a].endSide - this.cursor.startSide) < 0) {
          if (this.activeTo[a] > from) {
            this.to = this.activeTo[a];
            this.endSide = this.active[a].endSide;
            break;
          }
          this.removeActive(a);
          if (trackOpen)
            remove(trackOpen, a);
        } else if (!this.cursor.value) {
          this.to = this.endSide = 1e9;
          break;
        } else if (this.cursor.from > from) {
          this.to = this.cursor.from;
          this.endSide = this.cursor.startSide;
          break;
        } else {
          let nextVal = this.cursor.value;
          if (!nextVal.point) {
            this.addActive(trackOpen);
            if (this.cursor.from < from && this.cursor.to > from)
              trackExtra++;
            this.cursor.next();
          } else if (wasPoint && this.cursor.to == this.to && this.cursor.from < this.cursor.to) {
            this.cursor.next();
          } else {
            this.point = nextVal;
            this.pointFrom = this.cursor.from;
            this.pointRank = this.cursor.rank;
            this.to = this.cursor.to;
            this.endSide = nextVal.endSide;
            if (this.cursor.from < from)
              trackExtra = 1;
            this.cursor.next();
            this.forward(this.to, this.endSide);
            break;
          }
        }
      }
      if (trackOpen) {
        let openStart = 0;
        while (openStart < trackOpen.length && trackOpen[openStart] < from)
          openStart++;
        this.openStart = openStart + trackExtra;
      }
    }
    activeForPoint(to) {
      if (!this.active.length)
        return this.active;
      let active = [];
      for (let i = this.active.length - 1; i >= 0; i--) {
        if (this.activeRank[i] < this.pointRank)
          break;
        if (this.activeTo[i] > to || this.activeTo[i] == to && this.active[i].endSide >= this.point.endSide)
          active.push(this.active[i]);
      }
      return active.reverse();
    }
    openEnd(to) {
      let open = 0;
      for (let i = this.activeTo.length - 1; i >= 0 && this.activeTo[i] > to; i--)
        open++;
      return open;
    }
  };
  function compare(a, startA, b, startB, length, comparator) {
    a.goto(startA);
    b.goto(startB);
    let endB = startB + length;
    let pos = startB, dPos = startB - startA;
    for (; ; ) {
      let diff = a.to + dPos - b.to || a.endSide - b.endSide;
      let end = diff < 0 ? a.to + dPos : b.to, clipEnd = Math.min(end, endB);
      if (a.point || b.point) {
        if (!(a.point && b.point && (a.point == b.point || a.point.eq(b.point)) && sameValues(a.activeForPoint(a.to + dPos), b.activeForPoint(b.to))))
          comparator.comparePoint(pos, clipEnd, a.point, b.point);
      } else {
        if (clipEnd > pos && !sameValues(a.active, b.active))
          comparator.compareRange(pos, clipEnd, a.active, b.active);
      }
      if (end > endB)
        break;
      pos = end;
      if (diff <= 0)
        a.next();
      if (diff >= 0)
        b.next();
    }
  }
  function sameValues(a, b) {
    if (a.length != b.length)
      return false;
    for (let i = 0; i < a.length; i++)
      if (a[i] != b[i] && !a[i].eq(b[i]))
        return false;
    return true;
  }
  function remove(array, index) {
    for (let i = index, e = array.length - 1; i < e; i++)
      array[i] = array[i + 1];
    array.pop();
  }
  function insert(array, index, value) {
    for (let i = array.length - 1; i >= index; i--)
      array[i + 1] = array[i];
    array[index] = value;
  }
  function findMinIndex(value, array) {
    let found = -1, foundPos = 1e9;
    for (let i = 0; i < array.length; i++)
      if ((array[i] - foundPos || value[i].endSide - value[found].endSide) < 0) {
        found = i;
        foundPos = array[i];
      }
    return found;
  }
  function countColumn(string2, tabSize, to = string2.length) {
    let n = 0;
    for (let i = 0; i < to; ) {
      if (string2.charCodeAt(i) == 9) {
        n += tabSize - n % tabSize;
        i++;
      } else {
        n++;
        i = findClusterBreak(string2, i);
      }
    }
    return n;
  }
  function findColumn(string2, col, tabSize, strict) {
    for (let i = 0, n = 0; ; ) {
      if (n >= col)
        return i;
      if (i == string2.length)
        break;
      n += string2.charCodeAt(i) == 9 ? tabSize - n % tabSize : 1;
      i = findClusterBreak(string2, i);
    }
    return strict === true ? -1 : string2.length;
  }

  // node_modules/style-mod/src/style-mod.js
  var C = "\u037C";
  var COUNT = typeof Symbol == "undefined" ? "__" + C : Symbol.for(C);
  var SET = typeof Symbol == "undefined" ? "__styleSet" + Math.floor(Math.random() * 1e8) : Symbol("styleSet");
  var top = typeof globalThis != "undefined" ? globalThis : typeof window != "undefined" ? window : {};
  var StyleModule = class {
    constructor(spec, options) {
      this.rules = [];
      let {finish} = options || {};
      function splitSelector(selector) {
        return /^@/.test(selector) ? [selector] : selector.split(/,\s*/);
      }
      function render(selectors, spec2, target, isKeyframes) {
        let local = [], isAt = /^@(\w+)\b/.exec(selectors[0]), keyframes = isAt && isAt[1] == "keyframes";
        if (isAt && spec2 == null)
          return target.push(selectors[0] + ";");
        for (let prop in spec2) {
          let value = spec2[prop];
          if (/&/.test(prop)) {
            render(prop.split(/,\s*/).map((part) => selectors.map((sel) => part.replace(/&/, sel))).reduce((a, b) => a.concat(b)), value, target);
          } else if (value && typeof value == "object") {
            if (!isAt)
              throw new RangeError("The value of a property (" + prop + ") should be a primitive value.");
            render(splitSelector(prop), value, local, keyframes);
          } else if (value != null) {
            local.push(prop.replace(/_.*/, "").replace(/[A-Z]/g, (l) => "-" + l.toLowerCase()) + ": " + value + ";");
          }
        }
        if (local.length || keyframes) {
          target.push((finish && !isAt && !isKeyframes ? selectors.map(finish) : selectors).join(", ") + " {" + local.join(" ") + "}");
        }
      }
      for (let prop in spec)
        render(splitSelector(prop), spec[prop], this.rules);
    }
    getRules() {
      return this.rules.join("\n");
    }
    static newName() {
      let id2 = top[COUNT] || 1;
      top[COUNT] = id2 + 1;
      return C + id2.toString(36);
    }
    static mount(root, modules) {
      (root[SET] || new StyleSet(root)).mount(Array.isArray(modules) ? modules : [modules]);
    }
  };
  var adoptedSet = null;
  var StyleSet = class {
    constructor(root) {
      if (!root.head && root.adoptedStyleSheets && typeof CSSStyleSheet != "undefined") {
        if (adoptedSet) {
          root.adoptedStyleSheets = [adoptedSet.sheet].concat(root.adoptedStyleSheets);
          return root[SET] = adoptedSet;
        }
        this.sheet = new CSSStyleSheet();
        root.adoptedStyleSheets = [this.sheet].concat(root.adoptedStyleSheets);
        adoptedSet = this;
      } else {
        this.styleTag = (root.ownerDocument || root).createElement("style");
        let target = root.head || root;
        target.insertBefore(this.styleTag, target.firstChild);
      }
      this.modules = [];
      root[SET] = this;
    }
    mount(modules) {
      let sheet = this.sheet;
      let pos = 0, j = 0;
      for (let i = 0; i < modules.length; i++) {
        let mod = modules[i], index = this.modules.indexOf(mod);
        if (index < j && index > -1) {
          this.modules.splice(index, 1);
          j--;
          index = -1;
        }
        if (index == -1) {
          this.modules.splice(j++, 0, mod);
          if (sheet)
            for (let k = 0; k < mod.rules.length; k++)
              sheet.insertRule(mod.rules[k], pos++);
        } else {
          while (j < index)
            pos += this.modules[j++].rules.length;
          pos += mod.rules.length;
          j++;
        }
      }
      if (!sheet) {
        let text = "";
        for (let i = 0; i < this.modules.length; i++)
          text += this.modules[i].getRules() + "\n";
        this.styleTag.textContent = text;
      }
    }
  };

  // node_modules/w3c-keyname/index.es.js
  var base = {
    8: "Backspace",
    9: "Tab",
    10: "Enter",
    12: "NumLock",
    13: "Enter",
    16: "Shift",
    17: "Control",
    18: "Alt",
    20: "CapsLock",
    27: "Escape",
    32: " ",
    33: "PageUp",
    34: "PageDown",
    35: "End",
    36: "Home",
    37: "ArrowLeft",
    38: "ArrowUp",
    39: "ArrowRight",
    40: "ArrowDown",
    44: "PrintScreen",
    45: "Insert",
    46: "Delete",
    59: ";",
    61: "=",
    91: "Meta",
    92: "Meta",
    106: "*",
    107: "+",
    108: ",",
    109: "-",
    110: ".",
    111: "/",
    144: "NumLock",
    145: "ScrollLock",
    160: "Shift",
    161: "Shift",
    162: "Control",
    163: "Control",
    164: "Alt",
    165: "Alt",
    173: "-",
    186: ";",
    187: "=",
    188: ",",
    189: "-",
    190: ".",
    191: "/",
    192: "`",
    219: "[",
    220: "\\",
    221: "]",
    222: "'"
  };
  var shift = {
    48: ")",
    49: "!",
    50: "@",
    51: "#",
    52: "$",
    53: "%",
    54: "^",
    55: "&",
    56: "*",
    57: "(",
    59: ":",
    61: "+",
    173: "_",
    186: ":",
    187: "+",
    188: "<",
    189: "_",
    190: ">",
    191: "?",
    192: "~",
    219: "{",
    220: "|",
    221: "}",
    222: '"'
  };
  var chrome = typeof navigator != "undefined" && /Chrome\/(\d+)/.exec(navigator.userAgent);
  var gecko = typeof navigator != "undefined" && /Gecko\/\d+/.test(navigator.userAgent);
  var mac = typeof navigator != "undefined" && /Mac/.test(navigator.platform);
  var ie = typeof navigator != "undefined" && /MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);
  var brokenModifierNames = mac || chrome && +chrome[1] < 57;
  for (var i = 0; i < 10; i++)
    base[48 + i] = base[96 + i] = String(i);
  for (var i = 1; i <= 24; i++)
    base[i + 111] = "F" + i;
  for (var i = 65; i <= 90; i++) {
    base[i] = String.fromCharCode(i + 32);
    shift[i] = String.fromCharCode(i);
  }
  for (var code in base)
    if (!shift.hasOwnProperty(code))
      shift[code] = base[code];
  function keyName(event) {
    var ignoreKey = brokenModifierNames && (event.ctrlKey || event.altKey || event.metaKey) || ie && event.shiftKey && event.key && event.key.length == 1 || event.key == "Unidentified";
    var name2 = !ignoreKey && event.key || (event.shiftKey ? shift : base)[event.keyCode] || event.key || "Unidentified";
    if (name2 == "Esc")
      name2 = "Escape";
    if (name2 == "Del")
      name2 = "Delete";
    if (name2 == "Left")
      name2 = "ArrowLeft";
    if (name2 == "Up")
      name2 = "ArrowUp";
    if (name2 == "Right")
      name2 = "ArrowRight";
    if (name2 == "Down")
      name2 = "ArrowDown";
    return name2;
  }

  // node_modules/@codemirror/view/dist/index.js
  function getSelection(root) {
    let target;
    if (root.nodeType == 11) {
      target = root.getSelection ? root : root.ownerDocument;
    } else {
      target = root;
    }
    return target.getSelection();
  }
  function contains(dom, node) {
    return node ? dom == node || dom.contains(node.nodeType != 1 ? node.parentNode : node) : false;
  }
  function deepActiveElement(doc2) {
    let elt2 = doc2.activeElement;
    while (elt2 && elt2.shadowRoot)
      elt2 = elt2.shadowRoot.activeElement;
    return elt2;
  }
  function hasSelection(dom, selection) {
    if (!selection.anchorNode)
      return false;
    try {
      return contains(dom, selection.anchorNode);
    } catch (_) {
      return false;
    }
  }
  function clientRectsFor(dom) {
    if (dom.nodeType == 3)
      return textRange(dom, 0, dom.nodeValue.length).getClientRects();
    else if (dom.nodeType == 1)
      return dom.getClientRects();
    else
      return [];
  }
  function isEquivalentPosition(node, off, targetNode, targetOff) {
    return targetNode ? scanFor(node, off, targetNode, targetOff, -1) || scanFor(node, off, targetNode, targetOff, 1) : false;
  }
  function domIndex(node) {
    for (var index = 0; ; index++) {
      node = node.previousSibling;
      if (!node)
        return index;
    }
  }
  function scanFor(node, off, targetNode, targetOff, dir) {
    for (; ; ) {
      if (node == targetNode && off == targetOff)
        return true;
      if (off == (dir < 0 ? 0 : maxOffset(node))) {
        if (node.nodeName == "DIV")
          return false;
        let parent = node.parentNode;
        if (!parent || parent.nodeType != 1)
          return false;
        off = domIndex(node) + (dir < 0 ? 0 : 1);
        node = parent;
      } else if (node.nodeType == 1) {
        node = node.childNodes[off + (dir < 0 ? -1 : 0)];
        if (node.nodeType == 1 && node.contentEditable == "false")
          return false;
        off = dir < 0 ? maxOffset(node) : 0;
      } else {
        return false;
      }
    }
  }
  function maxOffset(node) {
    return node.nodeType == 3 ? node.nodeValue.length : node.childNodes.length;
  }
  var Rect0 = {left: 0, right: 0, top: 0, bottom: 0};
  function flattenRect(rect, left) {
    let x = left ? rect.left : rect.right;
    return {left: x, right: x, top: rect.top, bottom: rect.bottom};
  }
  function windowRect(win) {
    return {
      left: 0,
      right: win.innerWidth,
      top: 0,
      bottom: win.innerHeight
    };
  }
  function scrollRectIntoView(dom, rect, side, x, y, xMargin, yMargin, ltr) {
    let doc2 = dom.ownerDocument, win = doc2.defaultView || window;
    for (let cur2 = dom; cur2; ) {
      if (cur2.nodeType == 1) {
        let bounding, top2 = cur2 == doc2.body;
        if (top2) {
          bounding = windowRect(win);
        } else {
          if (cur2.scrollHeight <= cur2.clientHeight && cur2.scrollWidth <= cur2.clientWidth) {
            cur2 = cur2.assignedSlot || cur2.parentNode;
            continue;
          }
          let rect2 = cur2.getBoundingClientRect();
          bounding = {
            left: rect2.left,
            right: rect2.left + cur2.clientWidth,
            top: rect2.top,
            bottom: rect2.top + cur2.clientHeight
          };
        }
        let moveX = 0, moveY = 0;
        if (y == "nearest") {
          if (rect.top < bounding.top) {
            moveY = -(bounding.top - rect.top + yMargin);
            if (side > 0 && rect.bottom > bounding.bottom + moveY)
              moveY = rect.bottom - bounding.bottom + moveY + yMargin;
          } else if (rect.bottom > bounding.bottom) {
            moveY = rect.bottom - bounding.bottom + yMargin;
            if (side < 0 && rect.top - moveY < bounding.top)
              moveY = -(bounding.top + moveY - rect.top + yMargin);
          }
        } else {
          let rectHeight = rect.bottom - rect.top, boundingHeight = bounding.bottom - bounding.top;
          let targetTop = y == "center" && rectHeight <= boundingHeight ? rect.top + rectHeight / 2 - boundingHeight / 2 : y == "start" || y == "center" && side < 0 ? rect.top - yMargin : rect.bottom - boundingHeight + yMargin;
          moveY = targetTop - bounding.top;
        }
        if (x == "nearest") {
          if (rect.left < bounding.left) {
            moveX = -(bounding.left - rect.left + xMargin);
            if (side > 0 && rect.right > bounding.right + moveX)
              moveX = rect.right - bounding.right + moveX + xMargin;
          } else if (rect.right > bounding.right) {
            moveX = rect.right - bounding.right + xMargin;
            if (side < 0 && rect.left < bounding.left + moveX)
              moveX = -(bounding.left + moveX - rect.left + xMargin);
          }
        } else {
          let targetLeft = x == "center" ? rect.left + (rect.right - rect.left) / 2 - (bounding.right - bounding.left) / 2 : x == "start" == ltr ? rect.left - xMargin : rect.right - (bounding.right - bounding.left) + xMargin;
          moveX = targetLeft - bounding.left;
        }
        if (moveX || moveY) {
          if (top2) {
            win.scrollBy(moveX, moveY);
          } else {
            let movedX = 0, movedY = 0;
            if (moveY) {
              let start = cur2.scrollTop;
              cur2.scrollTop += moveY;
              movedY = cur2.scrollTop - start;
            }
            if (moveX) {
              let start = cur2.scrollLeft;
              cur2.scrollLeft += moveX;
              movedX = cur2.scrollLeft - start;
            }
            rect = {
              left: rect.left - movedX,
              top: rect.top - movedY,
              right: rect.right - movedX,
              bottom: rect.bottom - movedY
            };
            if (movedX && Math.abs(movedX - moveX) < 1)
              x = "nearest";
            if (movedY && Math.abs(movedY - moveY) < 1)
              y = "nearest";
          }
        }
        if (top2)
          break;
        cur2 = cur2.assignedSlot || cur2.parentNode;
      } else if (cur2.nodeType == 11) {
        cur2 = cur2.host;
      } else {
        break;
      }
    }
  }
  var DOMSelectionState = class {
    constructor() {
      this.anchorNode = null;
      this.anchorOffset = 0;
      this.focusNode = null;
      this.focusOffset = 0;
    }
    eq(domSel) {
      return this.anchorNode == domSel.anchorNode && this.anchorOffset == domSel.anchorOffset && this.focusNode == domSel.focusNode && this.focusOffset == domSel.focusOffset;
    }
    setRange(range) {
      this.set(range.anchorNode, range.anchorOffset, range.focusNode, range.focusOffset);
    }
    set(anchorNode, anchorOffset, focusNode, focusOffset) {
      this.anchorNode = anchorNode;
      this.anchorOffset = anchorOffset;
      this.focusNode = focusNode;
      this.focusOffset = focusOffset;
    }
  };
  var preventScrollSupported = null;
  function focusPreventScroll(dom) {
    if (dom.setActive)
      return dom.setActive();
    if (preventScrollSupported)
      return dom.focus(preventScrollSupported);
    let stack = [];
    for (let cur2 = dom; cur2; cur2 = cur2.parentNode) {
      stack.push(cur2, cur2.scrollTop, cur2.scrollLeft);
      if (cur2 == cur2.ownerDocument)
        break;
    }
    dom.focus(preventScrollSupported == null ? {
      get preventScroll() {
        preventScrollSupported = {preventScroll: true};
        return true;
      }
    } : void 0);
    if (!preventScrollSupported) {
      preventScrollSupported = false;
      for (let i = 0; i < stack.length; ) {
        let elt2 = stack[i++], top2 = stack[i++], left = stack[i++];
        if (elt2.scrollTop != top2)
          elt2.scrollTop = top2;
        if (elt2.scrollLeft != left)
          elt2.scrollLeft = left;
      }
    }
  }
  var scratchRange;
  function textRange(node, from, to = from) {
    let range = scratchRange || (scratchRange = document.createRange());
    range.setEnd(node, to);
    range.setStart(node, from);
    return range;
  }
  function dispatchKey(elt2, name2, code) {
    let options = {key: name2, code: name2, keyCode: code, which: code, cancelable: true};
    let down = new KeyboardEvent("keydown", options);
    down.synthetic = true;
    elt2.dispatchEvent(down);
    let up = new KeyboardEvent("keyup", options);
    up.synthetic = true;
    elt2.dispatchEvent(up);
    return down.defaultPrevented || up.defaultPrevented;
  }
  function getRoot(node) {
    while (node) {
      if (node && (node.nodeType == 9 || node.nodeType == 11 && node.host))
        return node;
      node = node.assignedSlot || node.parentNode;
    }
    return null;
  }
  function clearAttributes(node) {
    while (node.attributes.length)
      node.removeAttributeNode(node.attributes[0]);
  }
  function atElementStart(doc2, selection) {
    let node = selection.focusNode, offset = selection.focusOffset;
    if (!node || selection.anchorNode != node || selection.anchorOffset != offset)
      return false;
    for (; ; ) {
      if (offset) {
        if (node.nodeType != 1)
          return false;
        let prev = node.childNodes[offset - 1];
        if (prev.contentEditable == "false")
          offset--;
        else {
          node = prev;
          offset = maxOffset(node);
        }
      } else if (node == doc2) {
        return true;
      } else {
        offset = domIndex(node);
        node = node.parentNode;
      }
    }
  }
  var DOMPos = class {
    constructor(node, offset, precise = true) {
      this.node = node;
      this.offset = offset;
      this.precise = precise;
    }
    static before(dom, precise) {
      return new DOMPos(dom.parentNode, domIndex(dom), precise);
    }
    static after(dom, precise) {
      return new DOMPos(dom.parentNode, domIndex(dom) + 1, precise);
    }
  };
  var noChildren = [];
  var ContentView = class {
    constructor() {
      this.parent = null;
      this.dom = null;
      this.dirty = 2;
    }
    get editorView() {
      if (!this.parent)
        throw new Error("Accessing view in orphan content view");
      return this.parent.editorView;
    }
    get overrideDOMText() {
      return null;
    }
    get posAtStart() {
      return this.parent ? this.parent.posBefore(this) : 0;
    }
    get posAtEnd() {
      return this.posAtStart + this.length;
    }
    posBefore(view) {
      let pos = this.posAtStart;
      for (let child of this.children) {
        if (child == view)
          return pos;
        pos += child.length + child.breakAfter;
      }
      throw new RangeError("Invalid child in posBefore");
    }
    posAfter(view) {
      return this.posBefore(view) + view.length;
    }
    coordsAt(_pos, _side) {
      return null;
    }
    sync(track) {
      if (this.dirty & 2) {
        let parent = this.dom;
        let prev = null, next;
        for (let child of this.children) {
          if (child.dirty) {
            if (!child.dom && (next = prev ? prev.nextSibling : parent.firstChild)) {
              let contentView = ContentView.get(next);
              if (!contentView || !contentView.parent && contentView.canReuseDOM(child))
                child.reuseDOM(next);
            }
            child.sync(track);
            child.dirty = 0;
          }
          next = prev ? prev.nextSibling : parent.firstChild;
          if (track && !track.written && track.node == parent && next != child.dom)
            track.written = true;
          if (child.dom.parentNode == parent) {
            while (next && next != child.dom)
              next = rm$1(next);
          } else {
            parent.insertBefore(child.dom, next);
          }
          prev = child.dom;
        }
        next = prev ? prev.nextSibling : parent.firstChild;
        if (next && track && track.node == parent)
          track.written = true;
        while (next)
          next = rm$1(next);
      } else if (this.dirty & 1) {
        for (let child of this.children)
          if (child.dirty) {
            child.sync(track);
            child.dirty = 0;
          }
      }
    }
    reuseDOM(_dom) {
    }
    localPosFromDOM(node, offset) {
      let after;
      if (node == this.dom) {
        after = this.dom.childNodes[offset];
      } else {
        let bias = maxOffset(node) == 0 ? 0 : offset == 0 ? -1 : 1;
        for (; ; ) {
          let parent = node.parentNode;
          if (parent == this.dom)
            break;
          if (bias == 0 && parent.firstChild != parent.lastChild) {
            if (node == parent.firstChild)
              bias = -1;
            else
              bias = 1;
          }
          node = parent;
        }
        if (bias < 0)
          after = node;
        else
          after = node.nextSibling;
      }
      if (after == this.dom.firstChild)
        return 0;
      while (after && !ContentView.get(after))
        after = after.nextSibling;
      if (!after)
        return this.length;
      for (let i = 0, pos = 0; ; i++) {
        let child = this.children[i];
        if (child.dom == after)
          return pos;
        pos += child.length + child.breakAfter;
      }
    }
    domBoundsAround(from, to, offset = 0) {
      let fromI = -1, fromStart = -1, toI = -1, toEnd = -1;
      for (let i = 0, pos = offset, prevEnd = offset; i < this.children.length; i++) {
        let child = this.children[i], end = pos + child.length;
        if (pos < from && end > to)
          return child.domBoundsAround(from, to, pos);
        if (end >= from && fromI == -1) {
          fromI = i;
          fromStart = pos;
        }
        if (pos > to && child.dom.parentNode == this.dom) {
          toI = i;
          toEnd = prevEnd;
          break;
        }
        prevEnd = end;
        pos = end + child.breakAfter;
      }
      return {
        from: fromStart,
        to: toEnd < 0 ? offset + this.length : toEnd,
        startDOM: (fromI ? this.children[fromI - 1].dom.nextSibling : null) || this.dom.firstChild,
        endDOM: toI < this.children.length && toI >= 0 ? this.children[toI].dom : null
      };
    }
    markDirty(andParent = false) {
      this.dirty |= 2;
      this.markParentsDirty(andParent);
    }
    markParentsDirty(childList) {
      for (let parent = this.parent; parent; parent = parent.parent) {
        if (childList)
          parent.dirty |= 2;
        if (parent.dirty & 1)
          return;
        parent.dirty |= 1;
        childList = false;
      }
    }
    setParent(parent) {
      if (this.parent != parent) {
        this.parent = parent;
        if (this.dirty)
          this.markParentsDirty(true);
      }
    }
    setDOM(dom) {
      if (this.dom)
        this.dom.cmView = null;
      this.dom = dom;
      dom.cmView = this;
    }
    get rootView() {
      for (let v = this; ; ) {
        let parent = v.parent;
        if (!parent)
          return v;
        v = parent;
      }
    }
    replaceChildren(from, to, children = noChildren) {
      this.markDirty();
      for (let i = from; i < to; i++) {
        let child = this.children[i];
        if (child.parent == this)
          child.destroy();
      }
      this.children.splice(from, to - from, ...children);
      for (let i = 0; i < children.length; i++)
        children[i].setParent(this);
    }
    ignoreMutation(_rec) {
      return false;
    }
    ignoreEvent(_event) {
      return false;
    }
    childCursor(pos = this.length) {
      return new ChildCursor(this.children, pos, this.children.length);
    }
    childPos(pos, bias = 1) {
      return this.childCursor().findPos(pos, bias);
    }
    toString() {
      let name2 = this.constructor.name.replace("View", "");
      return name2 + (this.children.length ? "(" + this.children.join() + ")" : this.length ? "[" + (name2 == "Text" ? this.text : this.length) + "]" : "") + (this.breakAfter ? "#" : "");
    }
    static get(node) {
      return node.cmView;
    }
    get isEditable() {
      return true;
    }
    merge(from, to, source, hasStart, openStart, openEnd) {
      return false;
    }
    become(other) {
      return false;
    }
    canReuseDOM(other) {
      return other.constructor == this.constructor;
    }
    getSide() {
      return 0;
    }
    destroy() {
      this.parent = null;
    }
  };
  ContentView.prototype.breakAfter = 0;
  function rm$1(dom) {
    let next = dom.nextSibling;
    dom.parentNode.removeChild(dom);
    return next;
  }
  var ChildCursor = class {
    constructor(children, pos, i) {
      this.children = children;
      this.pos = pos;
      this.i = i;
      this.off = 0;
    }
    findPos(pos, bias = 1) {
      for (; ; ) {
        if (pos > this.pos || pos == this.pos && (bias > 0 || this.i == 0 || this.children[this.i - 1].breakAfter)) {
          this.off = pos - this.pos;
          return this;
        }
        let next = this.children[--this.i];
        this.pos -= next.length + next.breakAfter;
      }
    }
  };
  function replaceRange(parent, fromI, fromOff, toI, toOff, insert2, breakAtStart, openStart, openEnd) {
    let {children} = parent;
    let before = children.length ? children[fromI] : null;
    let last = insert2.length ? insert2[insert2.length - 1] : null;
    let breakAtEnd = last ? last.breakAfter : breakAtStart;
    if (fromI == toI && before && !breakAtStart && !breakAtEnd && insert2.length < 2 && before.merge(fromOff, toOff, insert2.length ? last : null, fromOff == 0, openStart, openEnd))
      return;
    if (toI < children.length) {
      let after = children[toI];
      if (after && toOff < after.length) {
        if (fromI == toI) {
          after = after.split(toOff);
          toOff = 0;
        }
        if (!breakAtEnd && last && after.merge(0, toOff, last, true, 0, openEnd)) {
          insert2[insert2.length - 1] = after;
        } else {
          if (toOff)
            after.merge(0, toOff, null, false, 0, openEnd);
          insert2.push(after);
        }
      } else if (after === null || after === void 0 ? void 0 : after.breakAfter) {
        if (last)
          last.breakAfter = 1;
        else
          breakAtStart = 1;
      }
      toI++;
    }
    if (before) {
      before.breakAfter = breakAtStart;
      if (fromOff > 0) {
        if (!breakAtStart && insert2.length && before.merge(fromOff, before.length, insert2[0], false, openStart, 0)) {
          before.breakAfter = insert2.shift().breakAfter;
        } else if (fromOff < before.length || before.children.length && before.children[before.children.length - 1].length == 0) {
          before.merge(fromOff, before.length, null, false, openStart, 0);
        }
        fromI++;
      }
    }
    while (fromI < toI && insert2.length) {
      if (children[toI - 1].become(insert2[insert2.length - 1])) {
        toI--;
        insert2.pop();
        openEnd = insert2.length ? 0 : openStart;
      } else if (children[fromI].become(insert2[0])) {
        fromI++;
        insert2.shift();
        openStart = insert2.length ? 0 : openEnd;
      } else {
        break;
      }
    }
    if (!insert2.length && fromI && toI < children.length && !children[fromI - 1].breakAfter && children[toI].merge(0, 0, children[fromI - 1], false, openStart, openEnd))
      fromI--;
    if (fromI < toI || insert2.length)
      parent.replaceChildren(fromI, toI, insert2);
  }
  function mergeChildrenInto(parent, from, to, insert2, openStart, openEnd) {
    let cur2 = parent.childCursor();
    let {i: toI, off: toOff} = cur2.findPos(to, 1);
    let {i: fromI, off: fromOff} = cur2.findPos(from, -1);
    let dLen = from - to;
    for (let view of insert2)
      dLen += view.length;
    parent.length += dLen;
    replaceRange(parent, fromI, fromOff, toI, toOff, insert2, 0, openStart, openEnd);
  }
  var nav = typeof navigator != "undefined" ? navigator : {userAgent: "", vendor: "", platform: ""};
  var doc = typeof document != "undefined" ? document : {documentElement: {style: {}}};
  var ie_edge = /* @__PURE__ */ /Edge\/(\d+)/.exec(nav.userAgent);
  var ie_upto10 = /* @__PURE__ */ /MSIE \d/.test(nav.userAgent);
  var ie_11up = /* @__PURE__ */ /Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent);
  var ie2 = !!(ie_upto10 || ie_11up || ie_edge);
  var gecko2 = !ie2 && /* @__PURE__ */ /gecko\/(\d+)/i.test(nav.userAgent);
  var chrome2 = !ie2 && /* @__PURE__ */ /Chrome\/(\d+)/.exec(nav.userAgent);
  var webkit = "webkitFontSmoothing" in doc.documentElement.style;
  var safari = !ie2 && /* @__PURE__ */ /Apple Computer/.test(nav.vendor);
  var ios = safari && (/* @__PURE__ */ /Mobile\/\w+/.test(nav.userAgent) || nav.maxTouchPoints > 2);
  var browser = {
    mac: ios || /* @__PURE__ */ /Mac/.test(nav.platform),
    windows: /* @__PURE__ */ /Win/.test(nav.platform),
    linux: /* @__PURE__ */ /Linux|X11/.test(nav.platform),
    ie: ie2,
    ie_version: ie_upto10 ? doc.documentMode || 6 : ie_11up ? +ie_11up[1] : ie_edge ? +ie_edge[1] : 0,
    gecko: gecko2,
    gecko_version: gecko2 ? +(/* @__PURE__ */ /Firefox\/(\d+)/.exec(nav.userAgent) || [0, 0])[1] : 0,
    chrome: !!chrome2,
    chrome_version: chrome2 ? +chrome2[1] : 0,
    ios,
    android: /* @__PURE__ */ /Android\b/.test(nav.userAgent),
    webkit,
    safari,
    webkit_version: webkit ? +(/* @__PURE__ */ /\bAppleWebKit\/(\d+)/.exec(navigator.userAgent) || [0, 0])[1] : 0,
    tabSize: doc.documentElement.style.tabSize != null ? "tab-size" : "-moz-tab-size"
  };
  var MaxJoinLen = 256;
  var TextView = class extends ContentView {
    constructor(text) {
      super();
      this.text = text;
    }
    get length() {
      return this.text.length;
    }
    createDOM(textDOM) {
      this.setDOM(textDOM || document.createTextNode(this.text));
    }
    sync(track) {
      if (!this.dom)
        this.createDOM();
      if (this.dom.nodeValue != this.text) {
        if (track && track.node == this.dom)
          track.written = true;
        this.dom.nodeValue = this.text;
      }
    }
    reuseDOM(dom) {
      if (dom.nodeType == 3)
        this.createDOM(dom);
    }
    merge(from, to, source) {
      if (source && (!(source instanceof TextView) || this.length - (to - from) + source.length > MaxJoinLen))
        return false;
      this.text = this.text.slice(0, from) + (source ? source.text : "") + this.text.slice(to);
      this.markDirty();
      return true;
    }
    split(from) {
      let result = new TextView(this.text.slice(from));
      this.text = this.text.slice(0, from);
      this.markDirty();
      return result;
    }
    localPosFromDOM(node, offset) {
      return node == this.dom ? offset : offset ? this.text.length : 0;
    }
    domAtPos(pos) {
      return new DOMPos(this.dom, pos);
    }
    domBoundsAround(_from, _to, offset) {
      return {from: offset, to: offset + this.length, startDOM: this.dom, endDOM: this.dom.nextSibling};
    }
    coordsAt(pos, side) {
      return textCoords(this.dom, pos, side);
    }
  };
  var MarkView = class extends ContentView {
    constructor(mark, children = [], length = 0) {
      super();
      this.mark = mark;
      this.children = children;
      this.length = length;
      for (let ch of children)
        ch.setParent(this);
    }
    setAttrs(dom) {
      clearAttributes(dom);
      if (this.mark.class)
        dom.className = this.mark.class;
      if (this.mark.attrs)
        for (let name2 in this.mark.attrs)
          dom.setAttribute(name2, this.mark.attrs[name2]);
      return dom;
    }
    reuseDOM(node) {
      if (node.nodeName == this.mark.tagName.toUpperCase()) {
        this.setDOM(node);
        this.dirty |= 4 | 2;
      }
    }
    sync(track) {
      if (!this.dom)
        this.setDOM(this.setAttrs(document.createElement(this.mark.tagName)));
      else if (this.dirty & 4)
        this.setAttrs(this.dom);
      super.sync(track);
    }
    merge(from, to, source, _hasStart, openStart, openEnd) {
      if (source && (!(source instanceof MarkView && source.mark.eq(this.mark)) || from && openStart <= 0 || to < this.length && openEnd <= 0))
        return false;
      mergeChildrenInto(this, from, to, source ? source.children : [], openStart - 1, openEnd - 1);
      this.markDirty();
      return true;
    }
    split(from) {
      let result = [], off = 0, detachFrom = -1, i = 0;
      for (let elt2 of this.children) {
        let end = off + elt2.length;
        if (end > from)
          result.push(off < from ? elt2.split(from - off) : elt2);
        if (detachFrom < 0 && off >= from)
          detachFrom = i;
        off = end;
        i++;
      }
      let length = this.length - from;
      this.length = from;
      if (detachFrom > -1) {
        this.children.length = detachFrom;
        this.markDirty();
      }
      return new MarkView(this.mark, result, length);
    }
    domAtPos(pos) {
      return inlineDOMAtPos(this, pos);
    }
    coordsAt(pos, side) {
      return coordsInChildren(this, pos, side);
    }
  };
  function textCoords(text, pos, side) {
    let length = text.nodeValue.length;
    if (pos > length)
      pos = length;
    let from = pos, to = pos, flatten2 = 0;
    if (pos == 0 && side < 0 || pos == length && side >= 0) {
      if (!(browser.chrome || browser.gecko)) {
        if (pos) {
          from--;
          flatten2 = 1;
        } else if (to < length) {
          to++;
          flatten2 = -1;
        }
      }
    } else {
      if (side < 0)
        from--;
      else if (to < length)
        to++;
    }
    let rects = textRange(text, from, to).getClientRects();
    if (!rects.length)
      return Rect0;
    let rect = rects[(flatten2 ? flatten2 < 0 : side >= 0) ? 0 : rects.length - 1];
    if (browser.safari && !flatten2 && rect.width == 0)
      rect = Array.prototype.find.call(rects, (r) => r.width) || rect;
    return flatten2 ? flattenRect(rect, flatten2 < 0) : rect || null;
  }
  var WidgetView = class extends ContentView {
    constructor(widget, length, side) {
      super();
      this.widget = widget;
      this.length = length;
      this.side = side;
      this.prevWidget = null;
    }
    static create(widget, length, side) {
      return new (widget.customView || WidgetView)(widget, length, side);
    }
    split(from) {
      let result = WidgetView.create(this.widget, this.length - from, this.side);
      this.length -= from;
      return result;
    }
    sync() {
      if (!this.dom || !this.widget.updateDOM(this.dom)) {
        if (this.dom && this.prevWidget)
          this.prevWidget.destroy(this.dom);
        this.prevWidget = null;
        this.setDOM(this.widget.toDOM(this.editorView));
        this.dom.contentEditable = "false";
      }
    }
    getSide() {
      return this.side;
    }
    merge(from, to, source, hasStart, openStart, openEnd) {
      if (source && (!(source instanceof WidgetView) || !this.widget.compare(source.widget) || from > 0 && openStart <= 0 || to < this.length && openEnd <= 0))
        return false;
      this.length = from + (source ? source.length : 0) + (this.length - to);
      return true;
    }
    become(other) {
      if (other.length == this.length && other instanceof WidgetView && other.side == this.side) {
        if (this.widget.constructor == other.widget.constructor) {
          if (!this.widget.eq(other.widget))
            this.markDirty(true);
          if (this.dom && !this.prevWidget)
            this.prevWidget = this.widget;
          this.widget = other.widget;
          return true;
        }
      }
      return false;
    }
    ignoreMutation() {
      return true;
    }
    ignoreEvent(event) {
      return this.widget.ignoreEvent(event);
    }
    get overrideDOMText() {
      if (this.length == 0)
        return Text.empty;
      let top2 = this;
      while (top2.parent)
        top2 = top2.parent;
      let view = top2.editorView, text = view && view.state.doc, start = this.posAtStart;
      return text ? text.slice(start, start + this.length) : Text.empty;
    }
    domAtPos(pos) {
      return pos == 0 ? DOMPos.before(this.dom) : DOMPos.after(this.dom, pos == this.length);
    }
    domBoundsAround() {
      return null;
    }
    coordsAt(pos, side) {
      let rects = this.dom.getClientRects(), rect = null;
      if (!rects.length)
        return Rect0;
      for (let i = pos > 0 ? rects.length - 1 : 0; ; i += pos > 0 ? -1 : 1) {
        rect = rects[i];
        if (pos > 0 ? i == 0 : i == rects.length - 1 || rect.top < rect.bottom)
          break;
      }
      return this.length ? rect : flattenRect(rect, this.side > 0);
    }
    get isEditable() {
      return false;
    }
    destroy() {
      super.destroy();
      if (this.dom)
        this.widget.destroy(this.dom);
    }
  };
  var CompositionView = class extends WidgetView {
    domAtPos(pos) {
      let {topView, text} = this.widget;
      if (!topView)
        return new DOMPos(text, Math.min(pos, text.nodeValue.length));
      return scanCompositionTree(pos, 0, topView, text, (v, p) => v.domAtPos(p), (p) => new DOMPos(text, Math.min(p, text.nodeValue.length)));
    }
    sync() {
      this.setDOM(this.widget.toDOM());
    }
    localPosFromDOM(node, offset) {
      let {topView, text} = this.widget;
      if (!topView)
        return Math.min(offset, this.length);
      return posFromDOMInCompositionTree(node, offset, topView, text);
    }
    ignoreMutation() {
      return false;
    }
    get overrideDOMText() {
      return null;
    }
    coordsAt(pos, side) {
      let {topView, text} = this.widget;
      if (!topView)
        return textCoords(text, pos, side);
      return scanCompositionTree(pos, side, topView, text, (v, pos2, side2) => v.coordsAt(pos2, side2), (pos2, side2) => textCoords(text, pos2, side2));
    }
    destroy() {
      var _a2;
      super.destroy();
      (_a2 = this.widget.topView) === null || _a2 === void 0 ? void 0 : _a2.destroy();
    }
    get isEditable() {
      return true;
    }
    canReuseDOM() {
      return true;
    }
  };
  function scanCompositionTree(pos, side, view, text, enterView, fromText) {
    if (view instanceof MarkView) {
      for (let child = view.dom.firstChild; child; child = child.nextSibling) {
        let desc = ContentView.get(child);
        if (!desc)
          return fromText(pos, side);
        let hasComp = contains(child, text);
        let len = desc.length + (hasComp ? text.nodeValue.length : 0);
        if (pos < len || pos == len && desc.getSide() <= 0)
          return hasComp ? scanCompositionTree(pos, side, desc, text, enterView, fromText) : enterView(desc, pos, side);
        pos -= len;
      }
      return enterView(view, view.length, -1);
    } else if (view.dom == text) {
      return fromText(pos, side);
    } else {
      return enterView(view, pos, side);
    }
  }
  function posFromDOMInCompositionTree(node, offset, view, text) {
    if (view instanceof MarkView) {
      for (let child of view.children) {
        let pos = 0, hasComp = contains(child.dom, text);
        if (contains(child.dom, node))
          return pos + (hasComp ? posFromDOMInCompositionTree(node, offset, child, text) : child.localPosFromDOM(node, offset));
        pos += hasComp ? text.nodeValue.length : child.length;
      }
    } else if (view.dom == text) {
      return Math.min(offset, text.nodeValue.length);
    }
    return view.localPosFromDOM(node, offset);
  }
  var WidgetBufferView = class extends ContentView {
    constructor(side) {
      super();
      this.side = side;
    }
    get length() {
      return 0;
    }
    merge() {
      return false;
    }
    become(other) {
      return other instanceof WidgetBufferView && other.side == this.side;
    }
    split() {
      return new WidgetBufferView(this.side);
    }
    sync() {
      if (!this.dom) {
        let dom = document.createElement("img");
        dom.className = "cm-widgetBuffer";
        dom.setAttribute("aria-hidden", "true");
        this.setDOM(dom);
      }
    }
    getSide() {
      return this.side;
    }
    domAtPos(pos) {
      return DOMPos.before(this.dom);
    }
    localPosFromDOM() {
      return 0;
    }
    domBoundsAround() {
      return null;
    }
    coordsAt(pos) {
      let imgRect = this.dom.getBoundingClientRect();
      let siblingRect = inlineSiblingRect(this, this.side > 0 ? -1 : 1);
      return siblingRect && siblingRect.top < imgRect.bottom && siblingRect.bottom > imgRect.top ? {left: imgRect.left, right: imgRect.right, top: siblingRect.top, bottom: siblingRect.bottom} : imgRect;
    }
    get overrideDOMText() {
      return Text.empty;
    }
  };
  TextView.prototype.children = WidgetView.prototype.children = WidgetBufferView.prototype.children = noChildren;
  function inlineSiblingRect(view, side) {
    let parent = view.parent, index = parent ? parent.children.indexOf(view) : -1;
    while (parent && index >= 0) {
      if (side < 0 ? index > 0 : index < parent.children.length) {
        let next = parent.children[index + side];
        if (next instanceof TextView) {
          let nextRect = next.coordsAt(side < 0 ? next.length : 0, side);
          if (nextRect)
            return nextRect;
        }
        index += side;
      } else if (parent instanceof MarkView && parent.parent) {
        index = parent.parent.children.indexOf(parent) + (side < 0 ? 0 : 1);
        parent = parent.parent;
      } else {
        let last = parent.dom.lastChild;
        if (last && last.nodeName == "BR")
          return last.getClientRects()[0];
        break;
      }
    }
    return void 0;
  }
  function inlineDOMAtPos(parent, pos) {
    let dom = parent.dom, {children} = parent, i = 0;
    for (let off = 0; i < children.length; i++) {
      let child = children[i], end = off + child.length;
      if (end == off && child.getSide() <= 0)
        continue;
      if (pos > off && pos < end && child.dom.parentNode == dom)
        return child.domAtPos(pos - off);
      if (pos <= off)
        break;
      off = end;
    }
    for (let j = i; j > 0; j--) {
      let prev = children[j - 1];
      if (prev.dom.parentNode == dom)
        return prev.domAtPos(prev.length);
    }
    for (let j = i; j < children.length; j++) {
      let next = children[j];
      if (next.dom.parentNode == dom)
        return next.domAtPos(0);
    }
    return new DOMPos(dom, 0);
  }
  function joinInlineInto(parent, view, open) {
    let last, {children} = parent;
    if (open > 0 && view instanceof MarkView && children.length && (last = children[children.length - 1]) instanceof MarkView && last.mark.eq(view.mark)) {
      joinInlineInto(last, view.children[0], open - 1);
    } else {
      children.push(view);
      view.setParent(parent);
    }
    parent.length += view.length;
  }
  function coordsInChildren(view, pos, side) {
    let before = null, beforePos = -1, after = null, afterPos = -1;
    function scan(view2, pos2) {
      for (let i = 0, off = 0; i < view2.children.length && off <= pos2; i++) {
        let child = view2.children[i], end = off + child.length;
        if (end >= pos2) {
          if (child.children.length) {
            scan(child, pos2 - off);
          } else if (!after && (end > pos2 || off == end && child.getSide() > 0)) {
            after = child;
            afterPos = pos2 - off;
          } else if (off < pos2 || off == end && child.getSide() < 0) {
            before = child;
            beforePos = pos2 - off;
          }
        }
        off = end;
      }
    }
    scan(view, pos);
    let target = (side < 0 ? before : after) || before || after;
    if (target)
      return target.coordsAt(Math.max(0, target == before ? beforePos : afterPos), side);
    return fallbackRect(view);
  }
  function fallbackRect(view) {
    let last = view.dom.lastChild;
    if (!last)
      return view.dom.getBoundingClientRect();
    let rects = clientRectsFor(last);
    return rects[rects.length - 1] || null;
  }
  function combineAttrs(source, target) {
    for (let name2 in source) {
      if (name2 == "class" && target.class)
        target.class += " " + source.class;
      else if (name2 == "style" && target.style)
        target.style += ";" + source.style;
      else
        target[name2] = source[name2];
    }
    return target;
  }
  function attrsEq(a, b) {
    if (a == b)
      return true;
    if (!a || !b)
      return false;
    let keysA = Object.keys(a), keysB = Object.keys(b);
    if (keysA.length != keysB.length)
      return false;
    for (let key of keysA) {
      if (keysB.indexOf(key) == -1 || a[key] !== b[key])
        return false;
    }
    return true;
  }
  function updateAttrs(dom, prev, attrs) {
    let changed = null;
    if (prev) {
      for (let name2 in prev)
        if (!(attrs && name2 in attrs))
          dom.removeAttribute(changed = name2);
    }
    if (attrs) {
      for (let name2 in attrs)
        if (!(prev && prev[name2] == attrs[name2]))
          dom.setAttribute(changed = name2, attrs[name2]);
    }
    return !!changed;
  }
  var WidgetType = class {
    eq(widget) {
      return false;
    }
    updateDOM(dom) {
      return false;
    }
    compare(other) {
      return this == other || this.constructor == other.constructor && this.eq(other);
    }
    get estimatedHeight() {
      return -1;
    }
    ignoreEvent(event) {
      return true;
    }
    get customView() {
      return null;
    }
    destroy(dom) {
    }
  };
  var BlockType = /* @__PURE__ */ function(BlockType2) {
    BlockType2[BlockType2["Text"] = 0] = "Text";
    BlockType2[BlockType2["WidgetBefore"] = 1] = "WidgetBefore";
    BlockType2[BlockType2["WidgetAfter"] = 2] = "WidgetAfter";
    BlockType2[BlockType2["WidgetRange"] = 3] = "WidgetRange";
    return BlockType2;
  }(BlockType || (BlockType = {}));
  var Decoration = class extends RangeValue {
    constructor(startSide, endSide, widget, spec) {
      super();
      this.startSide = startSide;
      this.endSide = endSide;
      this.widget = widget;
      this.spec = spec;
    }
    get heightRelevant() {
      return false;
    }
    static mark(spec) {
      return new MarkDecoration(spec);
    }
    static widget(spec) {
      let side = spec.side || 0, block = !!spec.block;
      side += block ? side > 0 ? 3e8 : -4e8 : side > 0 ? 1e8 : -1e8;
      return new PointDecoration(spec, side, side, block, spec.widget || null, false);
    }
    static replace(spec) {
      let block = !!spec.block, startSide, endSide;
      if (spec.isBlockGap) {
        startSide = -5e8;
        endSide = 4e8;
      } else {
        let {start, end} = getInclusive(spec, block);
        startSide = (start ? block ? -3e8 : -1 : 5e8) - 1;
        endSide = (end ? block ? 2e8 : 1 : -6e8) + 1;
      }
      return new PointDecoration(spec, startSide, endSide, block, spec.widget || null, true);
    }
    static line(spec) {
      return new LineDecoration(spec);
    }
    static set(of, sort = false) {
      return RangeSet.of(of, sort);
    }
    hasHeight() {
      return this.widget ? this.widget.estimatedHeight > -1 : false;
    }
  };
  Decoration.none = RangeSet.empty;
  var MarkDecoration = class extends Decoration {
    constructor(spec) {
      let {start, end} = getInclusive(spec);
      super(start ? -1 : 5e8, end ? 1 : -6e8, null, spec);
      this.tagName = spec.tagName || "span";
      this.class = spec.class || "";
      this.attrs = spec.attributes || null;
    }
    eq(other) {
      return this == other || other instanceof MarkDecoration && this.tagName == other.tagName && this.class == other.class && attrsEq(this.attrs, other.attrs);
    }
    range(from, to = from) {
      if (from >= to)
        throw new RangeError("Mark decorations may not be empty");
      return super.range(from, to);
    }
  };
  MarkDecoration.prototype.point = false;
  var LineDecoration = class extends Decoration {
    constructor(spec) {
      super(-2e8, -2e8, null, spec);
    }
    eq(other) {
      return other instanceof LineDecoration && attrsEq(this.spec.attributes, other.spec.attributes);
    }
    range(from, to = from) {
      if (to != from)
        throw new RangeError("Line decoration ranges must be zero-length");
      return super.range(from, to);
    }
  };
  LineDecoration.prototype.mapMode = MapMode.TrackBefore;
  LineDecoration.prototype.point = true;
  var PointDecoration = class extends Decoration {
    constructor(spec, startSide, endSide, block, widget, isReplace) {
      super(startSide, endSide, widget, spec);
      this.block = block;
      this.isReplace = isReplace;
      this.mapMode = !block ? MapMode.TrackDel : startSide <= 0 ? MapMode.TrackBefore : MapMode.TrackAfter;
    }
    get type() {
      return this.startSide < this.endSide ? BlockType.WidgetRange : this.startSide <= 0 ? BlockType.WidgetBefore : BlockType.WidgetAfter;
    }
    get heightRelevant() {
      return this.block || !!this.widget && this.widget.estimatedHeight >= 5;
    }
    eq(other) {
      return other instanceof PointDecoration && widgetsEq(this.widget, other.widget) && this.block == other.block && this.startSide == other.startSide && this.endSide == other.endSide;
    }
    range(from, to = from) {
      if (this.isReplace && (from > to || from == to && this.startSide > 0 && this.endSide <= 0))
        throw new RangeError("Invalid range for replacement decoration");
      if (!this.isReplace && to != from)
        throw new RangeError("Widget decorations can only have zero-length ranges");
      return super.range(from, to);
    }
  };
  PointDecoration.prototype.point = true;
  function getInclusive(spec, block = false) {
    let {inclusiveStart: start, inclusiveEnd: end} = spec;
    if (start == null)
      start = spec.inclusive;
    if (end == null)
      end = spec.inclusive;
    return {start: start !== null && start !== void 0 ? start : block, end: end !== null && end !== void 0 ? end : block};
  }
  function widgetsEq(a, b) {
    return a == b || !!(a && b && a.compare(b));
  }
  function addRange(from, to, ranges, margin = 0) {
    let last = ranges.length - 1;
    if (last >= 0 && ranges[last] + margin >= from)
      ranges[last] = Math.max(ranges[last], to);
    else
      ranges.push(from, to);
  }
  var LineView = class extends ContentView {
    constructor() {
      super(...arguments);
      this.children = [];
      this.length = 0;
      this.prevAttrs = void 0;
      this.attrs = null;
      this.breakAfter = 0;
    }
    merge(from, to, source, hasStart, openStart, openEnd) {
      if (source) {
        if (!(source instanceof LineView))
          return false;
        if (!this.dom)
          source.transferDOM(this);
      }
      if (hasStart)
        this.setDeco(source ? source.attrs : null);
      mergeChildrenInto(this, from, to, source ? source.children : [], openStart, openEnd);
      return true;
    }
    split(at) {
      let end = new LineView();
      end.breakAfter = this.breakAfter;
      if (this.length == 0)
        return end;
      let {i, off} = this.childPos(at);
      if (off) {
        end.append(this.children[i].split(off), 0);
        this.children[i].merge(off, this.children[i].length, null, false, 0, 0);
        i++;
      }
      for (let j = i; j < this.children.length; j++)
        end.append(this.children[j], 0);
      while (i > 0 && this.children[i - 1].length == 0)
        this.children[--i].destroy();
      this.children.length = i;
      this.markDirty();
      this.length = at;
      return end;
    }
    transferDOM(other) {
      if (!this.dom)
        return;
      this.markDirty();
      other.setDOM(this.dom);
      other.prevAttrs = this.prevAttrs === void 0 ? this.attrs : this.prevAttrs;
      this.prevAttrs = void 0;
      this.dom = null;
    }
    setDeco(attrs) {
      if (!attrsEq(this.attrs, attrs)) {
        if (this.dom) {
          this.prevAttrs = this.attrs;
          this.markDirty();
        }
        this.attrs = attrs;
      }
    }
    append(child, openStart) {
      joinInlineInto(this, child, openStart);
    }
    addLineDeco(deco) {
      let attrs = deco.spec.attributes, cls = deco.spec.class;
      if (attrs)
        this.attrs = combineAttrs(attrs, this.attrs || {});
      if (cls)
        this.attrs = combineAttrs({class: cls}, this.attrs || {});
    }
    domAtPos(pos) {
      return inlineDOMAtPos(this, pos);
    }
    reuseDOM(node) {
      if (node.nodeName == "DIV") {
        this.setDOM(node);
        this.dirty |= 4 | 2;
      }
    }
    sync(track) {
      var _a2;
      if (!this.dom) {
        this.setDOM(document.createElement("div"));
        this.dom.className = "cm-line";
        this.prevAttrs = this.attrs ? null : void 0;
      } else if (this.dirty & 4) {
        clearAttributes(this.dom);
        this.dom.className = "cm-line";
        this.prevAttrs = this.attrs ? null : void 0;
      }
      if (this.prevAttrs !== void 0) {
        updateAttrs(this.dom, this.prevAttrs, this.attrs);
        this.dom.classList.add("cm-line");
        this.prevAttrs = void 0;
      }
      super.sync(track);
      let last = this.dom.lastChild;
      while (last && ContentView.get(last) instanceof MarkView)
        last = last.lastChild;
      if (!last || !this.length || last.nodeName != "BR" && ((_a2 = ContentView.get(last)) === null || _a2 === void 0 ? void 0 : _a2.isEditable) == false && (!browser.ios || !this.children.some((ch) => ch instanceof TextView))) {
        let hack = document.createElement("BR");
        hack.cmIgnore = true;
        this.dom.appendChild(hack);
      }
    }
    measureTextSize() {
      if (this.children.length == 0 || this.length > 20)
        return null;
      let totalWidth = 0;
      for (let child of this.children) {
        if (!(child instanceof TextView) || /[^ -~]/.test(child.text))
          return null;
        let rects = clientRectsFor(child.dom);
        if (rects.length != 1)
          return null;
        totalWidth += rects[0].width;
      }
      return !totalWidth ? null : {
        lineHeight: this.dom.getBoundingClientRect().height,
        charWidth: totalWidth / this.length
      };
    }
    coordsAt(pos, side) {
      return coordsInChildren(this, pos, side);
    }
    become(_other) {
      return false;
    }
    get type() {
      return BlockType.Text;
    }
    static find(docView, pos) {
      for (let i = 0, off = 0; i < docView.children.length; i++) {
        let block = docView.children[i], end = off + block.length;
        if (end >= pos) {
          if (block instanceof LineView)
            return block;
          if (end > pos)
            break;
        }
        off = end + block.breakAfter;
      }
      return null;
    }
  };
  var BlockWidgetView = class extends ContentView {
    constructor(widget, length, type) {
      super();
      this.widget = widget;
      this.length = length;
      this.type = type;
      this.breakAfter = 0;
      this.prevWidget = null;
    }
    merge(from, to, source, _takeDeco, openStart, openEnd) {
      if (source && (!(source instanceof BlockWidgetView) || !this.widget.compare(source.widget) || from > 0 && openStart <= 0 || to < this.length && openEnd <= 0))
        return false;
      this.length = from + (source ? source.length : 0) + (this.length - to);
      return true;
    }
    domAtPos(pos) {
      return pos == 0 ? DOMPos.before(this.dom) : DOMPos.after(this.dom, pos == this.length);
    }
    split(at) {
      let len = this.length - at;
      this.length = at;
      let end = new BlockWidgetView(this.widget, len, this.type);
      end.breakAfter = this.breakAfter;
      return end;
    }
    get children() {
      return noChildren;
    }
    sync() {
      if (!this.dom || !this.widget.updateDOM(this.dom)) {
        if (this.dom && this.prevWidget)
          this.prevWidget.destroy(this.dom);
        this.prevWidget = null;
        this.setDOM(this.widget.toDOM(this.editorView));
        this.dom.contentEditable = "false";
      }
    }
    get overrideDOMText() {
      return this.parent ? this.parent.view.state.doc.slice(this.posAtStart, this.posAtEnd) : Text.empty;
    }
    domBoundsAround() {
      return null;
    }
    become(other) {
      if (other instanceof BlockWidgetView && other.type == this.type && other.widget.constructor == this.widget.constructor) {
        if (!other.widget.eq(this.widget))
          this.markDirty(true);
        if (this.dom && !this.prevWidget)
          this.prevWidget = this.widget;
        this.widget = other.widget;
        this.length = other.length;
        this.breakAfter = other.breakAfter;
        return true;
      }
      return false;
    }
    ignoreMutation() {
      return true;
    }
    ignoreEvent(event) {
      return this.widget.ignoreEvent(event);
    }
    destroy() {
      super.destroy();
      if (this.dom)
        this.widget.destroy(this.dom);
    }
  };
  var ContentBuilder = class {
    constructor(doc2, pos, end, disallowBlockEffectsFor) {
      this.doc = doc2;
      this.pos = pos;
      this.end = end;
      this.disallowBlockEffectsFor = disallowBlockEffectsFor;
      this.content = [];
      this.curLine = null;
      this.breakAtStart = 0;
      this.pendingBuffer = 0;
      this.atCursorPos = true;
      this.openStart = -1;
      this.openEnd = -1;
      this.text = "";
      this.textOff = 0;
      this.cursor = doc2.iter();
      this.skip = pos;
    }
    posCovered() {
      if (this.content.length == 0)
        return !this.breakAtStart && this.doc.lineAt(this.pos).from != this.pos;
      let last = this.content[this.content.length - 1];
      return !last.breakAfter && !(last instanceof BlockWidgetView && last.type == BlockType.WidgetBefore);
    }
    getLine() {
      if (!this.curLine) {
        this.content.push(this.curLine = new LineView());
        this.atCursorPos = true;
      }
      return this.curLine;
    }
    flushBuffer(active) {
      if (this.pendingBuffer) {
        this.curLine.append(wrapMarks(new WidgetBufferView(-1), active), active.length);
        this.pendingBuffer = 0;
      }
    }
    addBlockWidget(view) {
      this.flushBuffer([]);
      this.curLine = null;
      this.content.push(view);
    }
    finish(openEnd) {
      if (!openEnd)
        this.flushBuffer([]);
      else
        this.pendingBuffer = 0;
      if (!this.posCovered())
        this.getLine();
    }
    buildText(length, active, openStart) {
      while (length > 0) {
        if (this.textOff == this.text.length) {
          let {value, lineBreak, done} = this.cursor.next(this.skip);
          this.skip = 0;
          if (done)
            throw new Error("Ran out of text content when drawing inline views");
          if (lineBreak) {
            if (!this.posCovered())
              this.getLine();
            if (this.content.length)
              this.content[this.content.length - 1].breakAfter = 1;
            else
              this.breakAtStart = 1;
            this.flushBuffer([]);
            this.curLine = null;
            length--;
            continue;
          } else {
            this.text = value;
            this.textOff = 0;
          }
        }
        let take = Math.min(this.text.length - this.textOff, length, 512);
        this.flushBuffer(active.slice(0, openStart));
        this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff, this.textOff + take)), active), openStart);
        this.atCursorPos = true;
        this.textOff += take;
        length -= take;
        openStart = 0;
      }
    }
    span(from, to, active, openStart) {
      this.buildText(to - from, active, openStart);
      this.pos = to;
      if (this.openStart < 0)
        this.openStart = openStart;
    }
    point(from, to, deco, active, openStart, index) {
      if (this.disallowBlockEffectsFor[index] && deco instanceof PointDecoration) {
        if (deco.block)
          throw new RangeError("Block decorations may not be specified via plugins");
        if (to > this.doc.lineAt(this.pos).to)
          throw new RangeError("Decorations that replace line breaks may not be specified via plugins");
      }
      let len = to - from;
      if (deco instanceof PointDecoration) {
        if (deco.block) {
          let {type} = deco;
          if (type == BlockType.WidgetAfter && !this.posCovered())
            this.getLine();
          this.addBlockWidget(new BlockWidgetView(deco.widget || new NullWidget("div"), len, type));
        } else {
          let view = WidgetView.create(deco.widget || new NullWidget("span"), len, len ? 0 : deco.startSide);
          let cursorBefore = this.atCursorPos && !view.isEditable && openStart <= active.length && (from < to || deco.startSide > 0);
          let cursorAfter = !view.isEditable && (from < to || deco.startSide <= 0);
          let line = this.getLine();
          if (this.pendingBuffer == 2 && !cursorBefore)
            this.pendingBuffer = 0;
          this.flushBuffer(active);
          if (cursorBefore) {
            line.append(wrapMarks(new WidgetBufferView(1), active), openStart);
            openStart = active.length + Math.max(0, openStart - active.length);
          }
          line.append(wrapMarks(view, active), openStart);
          this.atCursorPos = cursorAfter;
          this.pendingBuffer = !cursorAfter ? 0 : from < to ? 1 : 2;
        }
      } else if (this.doc.lineAt(this.pos).from == this.pos) {
        this.getLine().addLineDeco(deco);
      }
      if (len) {
        if (this.textOff + len <= this.text.length) {
          this.textOff += len;
        } else {
          this.skip += len - (this.text.length - this.textOff);
          this.text = "";
          this.textOff = 0;
        }
        this.pos = to;
      }
      if (this.openStart < 0)
        this.openStart = openStart;
    }
    static build(text, from, to, decorations2, dynamicDecorationMap) {
      let builder = new ContentBuilder(text, from, to, dynamicDecorationMap);
      builder.openEnd = RangeSet.spans(decorations2, from, to, builder);
      if (builder.openStart < 0)
        builder.openStart = builder.openEnd;
      builder.finish(builder.openEnd);
      return builder;
    }
  };
  function wrapMarks(view, active) {
    for (let mark of active)
      view = new MarkView(mark, [view], view.length);
    return view;
  }
  var NullWidget = class extends WidgetType {
    constructor(tag) {
      super();
      this.tag = tag;
    }
    eq(other) {
      return other.tag == this.tag;
    }
    toDOM() {
      return document.createElement(this.tag);
    }
    updateDOM(elt2) {
      return elt2.nodeName.toLowerCase() == this.tag;
    }
  };
  var clickAddsSelectionRange = /* @__PURE__ */ Facet.define();
  var dragMovesSelection$1 = /* @__PURE__ */ Facet.define();
  var mouseSelectionStyle = /* @__PURE__ */ Facet.define();
  var exceptionSink = /* @__PURE__ */ Facet.define();
  var updateListener = /* @__PURE__ */ Facet.define();
  var inputHandler = /* @__PURE__ */ Facet.define();
  var perLineTextDirection = /* @__PURE__ */ Facet.define({
    combine: (values2) => values2.some((x) => x)
  });
  var nativeSelectionHidden = /* @__PURE__ */ Facet.define({
    combine: (values2) => values2.some((x) => x)
  });
  var ScrollTarget = class {
    constructor(range, y = "nearest", x = "nearest", yMargin = 5, xMargin = 5) {
      this.range = range;
      this.y = y;
      this.x = x;
      this.yMargin = yMargin;
      this.xMargin = xMargin;
    }
    map(changes) {
      return changes.empty ? this : new ScrollTarget(this.range.map(changes), this.y, this.x, this.yMargin, this.xMargin);
    }
  };
  var scrollIntoView = /* @__PURE__ */ StateEffect.define({map: (t2, ch) => t2.map(ch)});
  function logException(state, exception, context) {
    let handler = state.facet(exceptionSink);
    if (handler.length)
      handler[0](exception);
    else if (window.onerror)
      window.onerror(String(exception), context, void 0, void 0, exception);
    else if (context)
      console.error(context + ":", exception);
    else
      console.error(exception);
  }
  var editable = /* @__PURE__ */ Facet.define({combine: (values2) => values2.length ? values2[0] : true});
  var nextPluginID = 0;
  var viewPlugin = /* @__PURE__ */ Facet.define();
  var ViewPlugin = class {
    constructor(id2, create, domEventHandlers, buildExtensions) {
      this.id = id2;
      this.create = create;
      this.domEventHandlers = domEventHandlers;
      this.extension = buildExtensions(this);
    }
    static define(create, spec) {
      const {eventHandlers, provide, decorations: deco} = spec || {};
      return new ViewPlugin(nextPluginID++, create, eventHandlers, (plugin) => {
        let ext = [viewPlugin.of(plugin)];
        if (deco)
          ext.push(decorations.of((view) => {
            let pluginInst = view.plugin(plugin);
            return pluginInst ? deco(pluginInst) : Decoration.none;
          }));
        if (provide)
          ext.push(provide(plugin));
        return ext;
      });
    }
    static fromClass(cls, spec) {
      return ViewPlugin.define((view) => new cls(view), spec);
    }
  };
  var PluginInstance = class {
    constructor(spec) {
      this.spec = spec;
      this.mustUpdate = null;
      this.value = null;
    }
    update(view) {
      if (!this.value) {
        if (this.spec) {
          try {
            this.value = this.spec.create(view);
          } catch (e) {
            logException(view.state, e, "CodeMirror plugin crashed");
            this.deactivate();
          }
        }
      } else if (this.mustUpdate) {
        let update = this.mustUpdate;
        this.mustUpdate = null;
        if (this.value.update) {
          try {
            this.value.update(update);
          } catch (e) {
            logException(update.state, e, "CodeMirror plugin crashed");
            if (this.value.destroy)
              try {
                this.value.destroy();
              } catch (_) {
              }
            this.deactivate();
          }
        }
      }
      return this;
    }
    destroy(view) {
      var _a2;
      if ((_a2 = this.value) === null || _a2 === void 0 ? void 0 : _a2.destroy) {
        try {
          this.value.destroy();
        } catch (e) {
          logException(view.state, e, "CodeMirror plugin crashed");
        }
      }
    }
    deactivate() {
      this.spec = this.value = null;
    }
  };
  var editorAttributes = /* @__PURE__ */ Facet.define();
  var contentAttributes = /* @__PURE__ */ Facet.define();
  var decorations = /* @__PURE__ */ Facet.define();
  var atomicRanges = /* @__PURE__ */ Facet.define();
  var scrollMargins = /* @__PURE__ */ Facet.define();
  var styleModule = /* @__PURE__ */ Facet.define();
  var ChangedRange = class {
    constructor(fromA, toA, fromB, toB) {
      this.fromA = fromA;
      this.toA = toA;
      this.fromB = fromB;
      this.toB = toB;
    }
    join(other) {
      return new ChangedRange(Math.min(this.fromA, other.fromA), Math.max(this.toA, other.toA), Math.min(this.fromB, other.fromB), Math.max(this.toB, other.toB));
    }
    addToSet(set) {
      let i = set.length, me = this;
      for (; i > 0; i--) {
        let range = set[i - 1];
        if (range.fromA > me.toA)
          continue;
        if (range.toA < me.fromA)
          break;
        me = me.join(range);
        set.splice(i - 1, 1);
      }
      set.splice(i, 0, me);
      return set;
    }
    static extendWithRanges(diff, ranges) {
      if (ranges.length == 0)
        return diff;
      let result = [];
      for (let dI = 0, rI = 0, posA = 0, posB = 0; ; dI++) {
        let next = dI == diff.length ? null : diff[dI], off = posA - posB;
        let end = next ? next.fromB : 1e9;
        while (rI < ranges.length && ranges[rI] < end) {
          let from = ranges[rI], to = ranges[rI + 1];
          let fromB = Math.max(posB, from), toB = Math.min(end, to);
          if (fromB <= toB)
            new ChangedRange(fromB + off, toB + off, fromB, toB).addToSet(result);
          if (to > end)
            break;
          else
            rI += 2;
        }
        if (!next)
          return result;
        new ChangedRange(next.fromA, next.toA, next.fromB, next.toB).addToSet(result);
        posA = next.toA;
        posB = next.toB;
      }
    }
  };
  var ViewUpdate = class {
    constructor(view, state, transactions) {
      this.view = view;
      this.state = state;
      this.transactions = transactions;
      this.flags = 0;
      this.startState = view.state;
      this.changes = ChangeSet.empty(this.startState.doc.length);
      for (let tr of transactions)
        this.changes = this.changes.compose(tr.changes);
      let changedRanges = [];
      this.changes.iterChangedRanges((fromA, toA, fromB, toB) => changedRanges.push(new ChangedRange(fromA, toA, fromB, toB)));
      this.changedRanges = changedRanges;
      let focus = view.hasFocus;
      if (focus != view.inputState.notifiedFocused) {
        view.inputState.notifiedFocused = focus;
        this.flags |= 1;
      }
    }
    static create(view, state, transactions) {
      return new ViewUpdate(view, state, transactions);
    }
    get viewportChanged() {
      return (this.flags & 4) > 0;
    }
    get heightChanged() {
      return (this.flags & 2) > 0;
    }
    get geometryChanged() {
      return this.docChanged || (this.flags & (8 | 2)) > 0;
    }
    get focusChanged() {
      return (this.flags & 1) > 0;
    }
    get docChanged() {
      return !this.changes.empty;
    }
    get selectionSet() {
      return this.transactions.some((tr) => tr.selection);
    }
    get empty() {
      return this.flags == 0 && this.transactions.length == 0;
    }
  };
  var Direction = /* @__PURE__ */ function(Direction2) {
    Direction2[Direction2["LTR"] = 0] = "LTR";
    Direction2[Direction2["RTL"] = 1] = "RTL";
    return Direction2;
  }(Direction || (Direction = {}));
  var LTR = Direction.LTR;
  var RTL = Direction.RTL;
  function dec(str) {
    let result = [];
    for (let i = 0; i < str.length; i++)
      result.push(1 << +str[i]);
    return result;
  }
  var LowTypes = /* @__PURE__ */ dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008");
  var ArabicTypes = /* @__PURE__ */ dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333");
  var Brackets = /* @__PURE__ */ Object.create(null);
  var BracketStack = [];
  for (let p of ["()", "[]", "{}"]) {
    let l = /* @__PURE__ */ p.charCodeAt(0), r = /* @__PURE__ */ p.charCodeAt(1);
    Brackets[l] = r;
    Brackets[r] = -l;
  }
  function charType(ch) {
    return ch <= 247 ? LowTypes[ch] : 1424 <= ch && ch <= 1524 ? 2 : 1536 <= ch && ch <= 1785 ? ArabicTypes[ch - 1536] : 1774 <= ch && ch <= 2220 ? 4 : 8192 <= ch && ch <= 8203 ? 256 : 64336 <= ch && ch <= 65023 ? 4 : ch == 8204 ? 256 : 1;
  }
  var BidiRE = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;
  var BidiSpan = class {
    constructor(from, to, level) {
      this.from = from;
      this.to = to;
      this.level = level;
    }
    get dir() {
      return this.level % 2 ? RTL : LTR;
    }
    side(end, dir) {
      return this.dir == dir == end ? this.to : this.from;
    }
    static find(order, index, level, assoc) {
      let maybe = -1;
      for (let i = 0; i < order.length; i++) {
        let span = order[i];
        if (span.from <= index && span.to >= index) {
          if (span.level == level)
            return i;
          if (maybe < 0 || (assoc != 0 ? assoc < 0 ? span.from < index : span.to > index : order[maybe].level > span.level))
            maybe = i;
        }
      }
      if (maybe < 0)
        throw new RangeError("Index out of range");
      return maybe;
    }
  };
  var types = [];
  function computeOrder(line, direction) {
    let len = line.length, outerType = direction == LTR ? 1 : 2, oppositeType = direction == LTR ? 2 : 1;
    if (!line || outerType == 1 && !BidiRE.test(line))
      return trivialOrder(len);
    for (let i = 0, prev = outerType, prevStrong = outerType; i < len; i++) {
      let type = charType(line.charCodeAt(i));
      if (type == 512)
        type = prev;
      else if (type == 8 && prevStrong == 4)
        type = 16;
      types[i] = type == 4 ? 2 : type;
      if (type & 7)
        prevStrong = type;
      prev = type;
    }
    for (let i = 0, prev = outerType, prevStrong = outerType; i < len; i++) {
      let type = types[i];
      if (type == 128) {
        if (i < len - 1 && prev == types[i + 1] && prev & 24)
          type = types[i] = prev;
        else
          types[i] = 256;
      } else if (type == 64) {
        let end = i + 1;
        while (end < len && types[end] == 64)
          end++;
        let replace = i && prev == 8 || end < len && types[end] == 8 ? prevStrong == 1 ? 1 : 8 : 256;
        for (let j = i; j < end; j++)
          types[j] = replace;
        i = end - 1;
      } else if (type == 8 && prevStrong == 1) {
        types[i] = 1;
      }
      prev = type;
      if (type & 7)
        prevStrong = type;
    }
    for (let i = 0, sI = 0, context = 0, ch, br, type; i < len; i++) {
      if (br = Brackets[ch = line.charCodeAt(i)]) {
        if (br < 0) {
          for (let sJ = sI - 3; sJ >= 0; sJ -= 3) {
            if (BracketStack[sJ + 1] == -br) {
              let flags = BracketStack[sJ + 2];
              let type2 = flags & 2 ? outerType : !(flags & 4) ? 0 : flags & 1 ? oppositeType : outerType;
              if (type2)
                types[i] = types[BracketStack[sJ]] = type2;
              sI = sJ;
              break;
            }
          }
        } else if (BracketStack.length == 189) {
          break;
        } else {
          BracketStack[sI++] = i;
          BracketStack[sI++] = ch;
          BracketStack[sI++] = context;
        }
      } else if ((type = types[i]) == 2 || type == 1) {
        let embed = type == outerType;
        context = embed ? 0 : 1;
        for (let sJ = sI - 3; sJ >= 0; sJ -= 3) {
          let cur2 = BracketStack[sJ + 2];
          if (cur2 & 2)
            break;
          if (embed) {
            BracketStack[sJ + 2] |= 2;
          } else {
            if (cur2 & 4)
              break;
            BracketStack[sJ + 2] |= 4;
          }
        }
      }
    }
    for (let i = 0; i < len; i++) {
      if (types[i] == 256) {
        let end = i + 1;
        while (end < len && types[end] == 256)
          end++;
        let beforeL = (i ? types[i - 1] : outerType) == 1;
        let afterL = (end < len ? types[end] : outerType) == 1;
        let replace = beforeL == afterL ? beforeL ? 1 : 2 : outerType;
        for (let j = i; j < end; j++)
          types[j] = replace;
        i = end - 1;
      }
    }
    let order = [];
    if (outerType == 1) {
      for (let i = 0; i < len; ) {
        let start = i, rtl = types[i++] != 1;
        while (i < len && rtl == (types[i] != 1))
          i++;
        if (rtl) {
          for (let j = i; j > start; ) {
            let end = j, l = types[--j] != 2;
            while (j > start && l == (types[j - 1] != 2))
              j--;
            order.push(new BidiSpan(j, end, l ? 2 : 1));
          }
        } else {
          order.push(new BidiSpan(start, i, 0));
        }
      }
    } else {
      for (let i = 0; i < len; ) {
        let start = i, rtl = types[i++] == 2;
        while (i < len && rtl == (types[i] == 2))
          i++;
        order.push(new BidiSpan(start, i, rtl ? 1 : 2));
      }
    }
    return order;
  }
  function trivialOrder(length) {
    return [new BidiSpan(0, length, 0)];
  }
  var movedOver = "";
  function moveVisually(line, order, dir, start, forward) {
    var _a2;
    let startIndex = start.head - line.from, spanI = -1;
    if (startIndex == 0) {
      if (!forward || !line.length)
        return null;
      if (order[0].level != dir) {
        startIndex = order[0].side(false, dir);
        spanI = 0;
      }
    } else if (startIndex == line.length) {
      if (forward)
        return null;
      let last = order[order.length - 1];
      if (last.level != dir) {
        startIndex = last.side(true, dir);
        spanI = order.length - 1;
      }
    }
    if (spanI < 0)
      spanI = BidiSpan.find(order, startIndex, (_a2 = start.bidiLevel) !== null && _a2 !== void 0 ? _a2 : -1, start.assoc);
    let span = order[spanI];
    if (startIndex == span.side(forward, dir)) {
      span = order[spanI += forward ? 1 : -1];
      startIndex = span.side(!forward, dir);
    }
    let indexForward = forward == (span.dir == dir);
    let nextIndex = findClusterBreak(line.text, startIndex, indexForward);
    movedOver = line.text.slice(Math.min(startIndex, nextIndex), Math.max(startIndex, nextIndex));
    if (nextIndex != span.side(forward, dir))
      return EditorSelection.cursor(nextIndex + line.from, indexForward ? -1 : 1, span.level);
    let nextSpan = spanI == (forward ? order.length - 1 : 0) ? null : order[spanI + (forward ? 1 : -1)];
    if (!nextSpan && span.level != dir)
      return EditorSelection.cursor(forward ? line.to : line.from, forward ? -1 : 1, dir);
    if (nextSpan && nextSpan.level < span.level)
      return EditorSelection.cursor(nextSpan.side(!forward, dir) + line.from, forward ? 1 : -1, nextSpan.level);
    return EditorSelection.cursor(nextIndex + line.from, forward ? -1 : 1, span.level);
  }
  var LineBreakPlaceholder = "\uFFFF";
  var DOMReader = class {
    constructor(points, state) {
      this.points = points;
      this.text = "";
      this.lineSeparator = state.facet(EditorState.lineSeparator);
    }
    append(text) {
      this.text += text;
    }
    lineBreak() {
      this.text += LineBreakPlaceholder;
    }
    readRange(start, end) {
      if (!start)
        return this;
      let parent = start.parentNode;
      for (let cur2 = start; ; ) {
        this.findPointBefore(parent, cur2);
        this.readNode(cur2);
        let next = cur2.nextSibling;
        if (next == end)
          break;
        let view = ContentView.get(cur2), nextView = ContentView.get(next);
        if (view && nextView ? view.breakAfter : (view ? view.breakAfter : isBlockElement(cur2)) || isBlockElement(next) && (cur2.nodeName != "BR" || cur2.cmIgnore))
          this.lineBreak();
        cur2 = next;
      }
      this.findPointBefore(parent, end);
      return this;
    }
    readTextNode(node) {
      let text = node.nodeValue;
      for (let point of this.points)
        if (point.node == node)
          point.pos = this.text.length + Math.min(point.offset, text.length);
      for (let off = 0, re = this.lineSeparator ? null : /\r\n?|\n/g; ; ) {
        let nextBreak = -1, breakSize = 1, m;
        if (this.lineSeparator) {
          nextBreak = text.indexOf(this.lineSeparator, off);
          breakSize = this.lineSeparator.length;
        } else if (m = re.exec(text)) {
          nextBreak = m.index;
          breakSize = m[0].length;
        }
        this.append(text.slice(off, nextBreak < 0 ? text.length : nextBreak));
        if (nextBreak < 0)
          break;
        this.lineBreak();
        if (breakSize > 1) {
          for (let point of this.points)
            if (point.node == node && point.pos > this.text.length)
              point.pos -= breakSize - 1;
        }
        off = nextBreak + breakSize;
      }
    }
    readNode(node) {
      if (node.cmIgnore)
        return;
      let view = ContentView.get(node);
      let fromView = view && view.overrideDOMText;
      if (fromView != null) {
        this.findPointInside(node, fromView.length);
        for (let i = fromView.iter(); !i.next().done; ) {
          if (i.lineBreak)
            this.lineBreak();
          else
            this.append(i.value);
        }
      } else if (node.nodeType == 3) {
        this.readTextNode(node);
      } else if (node.nodeName == "BR") {
        if (node.nextSibling)
          this.lineBreak();
      } else if (node.nodeType == 1) {
        this.readRange(node.firstChild, null);
      }
    }
    findPointBefore(node, next) {
      for (let point of this.points)
        if (point.node == node && node.childNodes[point.offset] == next)
          point.pos = this.text.length;
    }
    findPointInside(node, maxLen) {
      for (let point of this.points)
        if (node.nodeType == 3 ? point.node == node : node.contains(point.node))
          point.pos = this.text.length + Math.min(maxLen, point.offset);
    }
  };
  function isBlockElement(node) {
    return node.nodeType == 1 && /^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(node.nodeName);
  }
  var DOMPoint = class {
    constructor(node, offset) {
      this.node = node;
      this.offset = offset;
      this.pos = -1;
    }
  };
  var DocView = class extends ContentView {
    constructor(view) {
      super();
      this.view = view;
      this.compositionDeco = Decoration.none;
      this.decorations = [];
      this.dynamicDecorationMap = [];
      this.minWidth = 0;
      this.minWidthFrom = 0;
      this.minWidthTo = 0;
      this.impreciseAnchor = null;
      this.impreciseHead = null;
      this.forceSelection = false;
      this.lastUpdate = Date.now();
      this.setDOM(view.contentDOM);
      this.children = [new LineView()];
      this.children[0].setParent(this);
      this.updateDeco();
      this.updateInner([new ChangedRange(0, 0, 0, view.state.doc.length)], 0);
    }
    get editorView() {
      return this.view;
    }
    get length() {
      return this.view.state.doc.length;
    }
    update(update) {
      let changedRanges = update.changedRanges;
      if (this.minWidth > 0 && changedRanges.length) {
        if (!changedRanges.every(({fromA, toA}) => toA < this.minWidthFrom || fromA > this.minWidthTo)) {
          this.minWidth = this.minWidthFrom = this.minWidthTo = 0;
        } else {
          this.minWidthFrom = update.changes.mapPos(this.minWidthFrom, 1);
          this.minWidthTo = update.changes.mapPos(this.minWidthTo, 1);
        }
      }
      if (this.view.inputState.composing < 0)
        this.compositionDeco = Decoration.none;
      else if (update.transactions.length || this.dirty)
        this.compositionDeco = computeCompositionDeco(this.view, update.changes);
      if ((browser.ie || browser.chrome) && !this.compositionDeco.size && update && update.state.doc.lines != update.startState.doc.lines)
        this.forceSelection = true;
      let prevDeco = this.decorations, deco = this.updateDeco();
      let decoDiff = findChangedDeco(prevDeco, deco, update.changes);
      changedRanges = ChangedRange.extendWithRanges(changedRanges, decoDiff);
      if (this.dirty == 0 && changedRanges.length == 0) {
        return false;
      } else {
        this.updateInner(changedRanges, update.startState.doc.length);
        if (update.transactions.length)
          this.lastUpdate = Date.now();
        return true;
      }
    }
    updateInner(changes, oldLength) {
      this.view.viewState.mustMeasureContent = true;
      this.updateChildren(changes, oldLength);
      let {observer} = this.view;
      observer.ignore(() => {
        this.dom.style.height = this.view.viewState.contentHeight + "px";
        this.dom.style.flexBasis = this.minWidth ? this.minWidth + "px" : "";
        let track = browser.chrome || browser.ios ? {node: observer.selectionRange.focusNode, written: false} : void 0;
        this.sync(track);
        this.dirty = 0;
        if (track && (track.written || observer.selectionRange.focusNode != track.node))
          this.forceSelection = true;
        this.dom.style.height = "";
      });
      let gaps = [];
      if (this.view.viewport.from || this.view.viewport.to < this.view.state.doc.length) {
        for (let child of this.children)
          if (child instanceof BlockWidgetView && child.widget instanceof BlockGapWidget)
            gaps.push(child.dom);
      }
      observer.updateGaps(gaps);
    }
    updateChildren(changes, oldLength) {
      let cursor = this.childCursor(oldLength);
      for (let i = changes.length - 1; ; i--) {
        let next = i >= 0 ? changes[i] : null;
        if (!next)
          break;
        let {fromA, toA, fromB, toB} = next;
        let {content: content2, breakAtStart, openStart, openEnd} = ContentBuilder.build(this.view.state.doc, fromB, toB, this.decorations, this.dynamicDecorationMap);
        let {i: toI, off: toOff} = cursor.findPos(toA, 1);
        let {i: fromI, off: fromOff} = cursor.findPos(fromA, -1);
        replaceRange(this, fromI, fromOff, toI, toOff, content2, breakAtStart, openStart, openEnd);
      }
    }
    updateSelection(mustRead = false, fromPointer = false) {
      if (mustRead || !this.view.observer.selectionRange.focusNode)
        this.view.observer.readSelectionRange();
      if (!(fromPointer || this.mayControlSelection()))
        return;
      let force = this.forceSelection;
      this.forceSelection = false;
      let main = this.view.state.selection.main;
      let anchor = this.domAtPos(main.anchor);
      let head = main.empty ? anchor : this.domAtPos(main.head);
      if (browser.gecko && main.empty && betweenUneditable(anchor)) {
        let dummy = document.createTextNode("");
        this.view.observer.ignore(() => anchor.node.insertBefore(dummy, anchor.node.childNodes[anchor.offset] || null));
        anchor = head = new DOMPos(dummy, 0);
        force = true;
      }
      let domSel = this.view.observer.selectionRange;
      if (force || !domSel.focusNode || !isEquivalentPosition(anchor.node, anchor.offset, domSel.anchorNode, domSel.anchorOffset) || !isEquivalentPosition(head.node, head.offset, domSel.focusNode, domSel.focusOffset)) {
        this.view.observer.ignore(() => {
          if (browser.android && browser.chrome && this.dom.contains(domSel.focusNode) && inUneditable(domSel.focusNode, this.dom)) {
            this.dom.blur();
            this.dom.focus({preventScroll: true});
          }
          let rawSel = getSelection(this.view.root);
          if (!rawSel)
            ;
          else if (main.empty) {
            if (browser.gecko) {
              let nextTo = nextToUneditable(anchor.node, anchor.offset);
              if (nextTo && nextTo != (1 | 2)) {
                let text = nearbyTextNode(anchor.node, anchor.offset, nextTo == 1 ? 1 : -1);
                if (text)
                  anchor = new DOMPos(text, nextTo == 1 ? 0 : text.nodeValue.length);
              }
            }
            rawSel.collapse(anchor.node, anchor.offset);
            if (main.bidiLevel != null && domSel.cursorBidiLevel != null)
              domSel.cursorBidiLevel = main.bidiLevel;
          } else if (rawSel.extend) {
            rawSel.collapse(anchor.node, anchor.offset);
            try {
              rawSel.extend(head.node, head.offset);
            } catch (_) {
            }
          } else {
            let range = document.createRange();
            if (main.anchor > main.head)
              [anchor, head] = [head, anchor];
            range.setEnd(head.node, head.offset);
            range.setStart(anchor.node, anchor.offset);
            rawSel.removeAllRanges();
            rawSel.addRange(range);
          }
        });
        this.view.observer.setSelectionRange(anchor, head);
      }
      this.impreciseAnchor = anchor.precise ? null : new DOMPos(domSel.anchorNode, domSel.anchorOffset);
      this.impreciseHead = head.precise ? null : new DOMPos(domSel.focusNode, domSel.focusOffset);
    }
    enforceCursorAssoc() {
      if (this.compositionDeco.size)
        return;
      let {view} = this, cursor = view.state.selection.main;
      let sel = getSelection(view.root);
      let {anchorNode, anchorOffset} = view.observer.selectionRange;
      if (!sel || !cursor.empty || !cursor.assoc || !sel.modify)
        return;
      let line = LineView.find(this, cursor.head);
      if (!line)
        return;
      let lineStart = line.posAtStart;
      if (cursor.head == lineStart || cursor.head == lineStart + line.length)
        return;
      let before = this.coordsAt(cursor.head, -1), after = this.coordsAt(cursor.head, 1);
      if (!before || !after || before.bottom > after.top)
        return;
      let dom = this.domAtPos(cursor.head + cursor.assoc);
      sel.collapse(dom.node, dom.offset);
      sel.modify("move", cursor.assoc < 0 ? "forward" : "backward", "lineboundary");
      view.observer.readSelectionRange();
      let newRange = view.observer.selectionRange;
      if (view.docView.posFromDOM(newRange.anchorNode, newRange.anchorOffset) != cursor.from)
        sel.collapse(anchorNode, anchorOffset);
    }
    mayControlSelection() {
      let active = this.view.root.activeElement;
      return active == this.dom || hasSelection(this.dom, this.view.observer.selectionRange) && !(active && this.dom.contains(active));
    }
    nearest(dom) {
      for (let cur2 = dom; cur2; ) {
        let domView = ContentView.get(cur2);
        if (domView && domView.rootView == this)
          return domView;
        cur2 = cur2.parentNode;
      }
      return null;
    }
    posFromDOM(node, offset) {
      let view = this.nearest(node);
      if (!view)
        throw new RangeError("Trying to find position for a DOM position outside of the document");
      return view.localPosFromDOM(node, offset) + view.posAtStart;
    }
    domAtPos(pos) {
      let {i, off} = this.childCursor().findPos(pos, -1);
      for (; i < this.children.length - 1; ) {
        let child = this.children[i];
        if (off < child.length || child instanceof LineView)
          break;
        i++;
        off = 0;
      }
      return this.children[i].domAtPos(off);
    }
    coordsAt(pos, side) {
      for (let off = this.length, i = this.children.length - 1; ; i--) {
        let child = this.children[i], start = off - child.breakAfter - child.length;
        if (pos > start || pos == start && child.type != BlockType.WidgetBefore && child.type != BlockType.WidgetAfter && (!i || side == 2 || this.children[i - 1].breakAfter || this.children[i - 1].type == BlockType.WidgetBefore && side > -2))
          return child.coordsAt(pos - start, side);
        off = start;
      }
    }
    measureVisibleLineHeights(viewport) {
      let result = [], {from, to} = viewport;
      let contentWidth = this.view.contentDOM.clientWidth;
      let isWider = contentWidth > Math.max(this.view.scrollDOM.clientWidth, this.minWidth) + 1;
      let widest = -1, ltr = this.view.textDirection == Direction.LTR;
      for (let pos = 0, i = 0; i < this.children.length; i++) {
        let child = this.children[i], end = pos + child.length;
        if (end > to)
          break;
        if (pos >= from) {
          let childRect = child.dom.getBoundingClientRect();
          result.push(childRect.height);
          if (isWider) {
            let last = child.dom.lastChild;
            let rects = last ? clientRectsFor(last) : [];
            if (rects.length) {
              let rect = rects[rects.length - 1];
              let width = ltr ? rect.right - childRect.left : childRect.right - rect.left;
              if (width > widest) {
                widest = width;
                this.minWidth = contentWidth;
                this.minWidthFrom = pos;
                this.minWidthTo = end;
              }
            }
          }
        }
        pos = end + child.breakAfter;
      }
      return result;
    }
    textDirectionAt(pos) {
      let {i} = this.childPos(pos, 1);
      return getComputedStyle(this.children[i].dom).direction == "rtl" ? Direction.RTL : Direction.LTR;
    }
    measureTextSize() {
      for (let child of this.children) {
        if (child instanceof LineView) {
          let measure = child.measureTextSize();
          if (measure)
            return measure;
        }
      }
      let dummy = document.createElement("div"), lineHeight, charWidth;
      dummy.className = "cm-line";
      dummy.style.width = "99999px";
      dummy.textContent = "abc def ghi jkl mno pqr stu";
      this.view.observer.ignore(() => {
        this.dom.appendChild(dummy);
        let rect = clientRectsFor(dummy.firstChild)[0];
        lineHeight = dummy.getBoundingClientRect().height;
        charWidth = rect ? rect.width / 27 : 7;
        dummy.remove();
      });
      return {lineHeight, charWidth};
    }
    childCursor(pos = this.length) {
      let i = this.children.length;
      if (i)
        pos -= this.children[--i].length;
      return new ChildCursor(this.children, pos, i);
    }
    computeBlockGapDeco() {
      let deco = [], vs = this.view.viewState;
      for (let pos = 0, i = 0; ; i++) {
        let next = i == vs.viewports.length ? null : vs.viewports[i];
        let end = next ? next.from - 1 : this.length;
        if (end > pos) {
          let height = vs.lineBlockAt(end).bottom - vs.lineBlockAt(pos).top;
          deco.push(Decoration.replace({
            widget: new BlockGapWidget(height),
            block: true,
            inclusive: true,
            isBlockGap: true
          }).range(pos, end));
        }
        if (!next)
          break;
        pos = next.to + 1;
      }
      return Decoration.set(deco);
    }
    updateDeco() {
      let allDeco = this.view.state.facet(decorations).map((d, i) => {
        let dynamic = this.dynamicDecorationMap[i] = typeof d == "function";
        return dynamic ? d(this.view) : d;
      });
      for (let i = allDeco.length; i < allDeco.length + 3; i++)
        this.dynamicDecorationMap[i] = false;
      return this.decorations = [
        ...allDeco,
        this.compositionDeco,
        this.computeBlockGapDeco(),
        this.view.viewState.lineGapDeco
      ];
    }
    scrollIntoView(target) {
      let {range} = target;
      let rect = this.coordsAt(range.head, range.empty ? range.assoc : range.head > range.anchor ? -1 : 1), other;
      if (!rect)
        return;
      if (!range.empty && (other = this.coordsAt(range.anchor, range.anchor > range.head ? -1 : 1)))
        rect = {
          left: Math.min(rect.left, other.left),
          top: Math.min(rect.top, other.top),
          right: Math.max(rect.right, other.right),
          bottom: Math.max(rect.bottom, other.bottom)
        };
      let mLeft = 0, mRight = 0, mTop = 0, mBottom = 0;
      for (let margins of this.view.state.facet(scrollMargins).map((f) => f(this.view)))
        if (margins) {
          let {left, right, top: top2, bottom} = margins;
          if (left != null)
            mLeft = Math.max(mLeft, left);
          if (right != null)
            mRight = Math.max(mRight, right);
          if (top2 != null)
            mTop = Math.max(mTop, top2);
          if (bottom != null)
            mBottom = Math.max(mBottom, bottom);
        }
      let targetRect = {
        left: rect.left - mLeft,
        top: rect.top - mTop,
        right: rect.right + mRight,
        bottom: rect.bottom + mBottom
      };
      scrollRectIntoView(this.view.scrollDOM, targetRect, range.head < range.anchor ? -1 : 1, target.x, target.y, target.xMargin, target.yMargin, this.view.textDirection == Direction.LTR);
    }
  };
  function betweenUneditable(pos) {
    return pos.node.nodeType == 1 && pos.node.firstChild && (pos.offset == 0 || pos.node.childNodes[pos.offset - 1].contentEditable == "false") && (pos.offset == pos.node.childNodes.length || pos.node.childNodes[pos.offset].contentEditable == "false");
  }
  var BlockGapWidget = class extends WidgetType {
    constructor(height) {
      super();
      this.height = height;
    }
    toDOM() {
      let elt2 = document.createElement("div");
      this.updateDOM(elt2);
      return elt2;
    }
    eq(other) {
      return other.height == this.height;
    }
    updateDOM(elt2) {
      elt2.style.height = this.height + "px";
      return true;
    }
    get estimatedHeight() {
      return this.height;
    }
  };
  function compositionSurroundingNode(view) {
    let sel = view.observer.selectionRange;
    let textNode = sel.focusNode && nearbyTextNode(sel.focusNode, sel.focusOffset, 0);
    if (!textNode)
      return null;
    let cView = view.docView.nearest(textNode);
    if (!cView)
      return null;
    if (cView instanceof LineView) {
      let topNode = textNode;
      while (topNode.parentNode != cView.dom)
        topNode = topNode.parentNode;
      let prev = topNode.previousSibling;
      while (prev && !ContentView.get(prev))
        prev = prev.previousSibling;
      let pos = prev ? ContentView.get(prev).posAtEnd : cView.posAtStart;
      return {from: pos, to: pos, node: topNode, text: textNode};
    } else {
      for (; ; ) {
        let {parent} = cView;
        if (!parent)
          return null;
        if (parent instanceof LineView)
          break;
        cView = parent;
      }
      let from = cView.posAtStart;
      return {from, to: from + cView.length, node: cView.dom, text: textNode};
    }
  }
  function computeCompositionDeco(view, changes) {
    let surrounding = compositionSurroundingNode(view);
    if (!surrounding)
      return Decoration.none;
    let {from, to, node, text: textNode} = surrounding;
    let newFrom = changes.mapPos(from, 1), newTo = Math.max(newFrom, changes.mapPos(to, -1));
    let {state} = view, text = node.nodeType == 3 ? node.nodeValue : new DOMReader([], state).readRange(node.firstChild, null).text;
    if (newTo - newFrom < text.length) {
      if (state.doc.sliceString(newFrom, Math.min(state.doc.length, newFrom + text.length), LineBreakPlaceholder) == text)
        newTo = newFrom + text.length;
      else if (state.doc.sliceString(Math.max(0, newTo - text.length), newTo, LineBreakPlaceholder) == text)
        newFrom = newTo - text.length;
      else
        return Decoration.none;
    } else if (state.doc.sliceString(newFrom, newTo, LineBreakPlaceholder) != text) {
      return Decoration.none;
    }
    let topView = ContentView.get(node);
    if (topView instanceof CompositionView)
      topView = topView.widget.topView;
    else if (topView)
      topView.parent = null;
    return Decoration.set(Decoration.replace({widget: new CompositionWidget(node, textNode, topView), inclusive: true}).range(newFrom, newTo));
  }
  var CompositionWidget = class extends WidgetType {
    constructor(top2, text, topView) {
      super();
      this.top = top2;
      this.text = text;
      this.topView = topView;
    }
    eq(other) {
      return this.top == other.top && this.text == other.text;
    }
    toDOM() {
      return this.top;
    }
    ignoreEvent() {
      return false;
    }
    get customView() {
      return CompositionView;
    }
  };
  function nearbyTextNode(node, offset, side) {
    for (; ; ) {
      if (node.nodeType == 3)
        return node;
      if (node.nodeType == 1 && offset > 0 && side <= 0) {
        node = node.childNodes[offset - 1];
        offset = maxOffset(node);
      } else if (node.nodeType == 1 && offset < node.childNodes.length && side >= 0) {
        node = node.childNodes[offset];
        offset = 0;
      } else {
        return null;
      }
    }
  }
  function nextToUneditable(node, offset) {
    if (node.nodeType != 1)
      return 0;
    return (offset && node.childNodes[offset - 1].contentEditable == "false" ? 1 : 0) | (offset < node.childNodes.length && node.childNodes[offset].contentEditable == "false" ? 2 : 0);
  }
  var DecorationComparator$1 = class {
    constructor() {
      this.changes = [];
    }
    compareRange(from, to) {
      addRange(from, to, this.changes);
    }
    comparePoint(from, to) {
      addRange(from, to, this.changes);
    }
  };
  function findChangedDeco(a, b, diff) {
    let comp = new DecorationComparator$1();
    RangeSet.compare(a, b, diff, comp);
    return comp.changes;
  }
  function inUneditable(node, inside2) {
    for (let cur2 = node; cur2 && cur2 != inside2; cur2 = cur2.assignedSlot || cur2.parentNode) {
      if (cur2.nodeType == 1 && cur2.contentEditable == "false") {
        return true;
      }
    }
    return false;
  }
  function groupAt(state, pos, bias = 1) {
    let categorize = state.charCategorizer(pos);
    let line = state.doc.lineAt(pos), linePos = pos - line.from;
    if (line.length == 0)
      return EditorSelection.cursor(pos);
    if (linePos == 0)
      bias = 1;
    else if (linePos == line.length)
      bias = -1;
    let from = linePos, to = linePos;
    if (bias < 0)
      from = findClusterBreak(line.text, linePos, false);
    else
      to = findClusterBreak(line.text, linePos);
    let cat = categorize(line.text.slice(from, to));
    while (from > 0) {
      let prev = findClusterBreak(line.text, from, false);
      if (categorize(line.text.slice(prev, from)) != cat)
        break;
      from = prev;
    }
    while (to < line.length) {
      let next = findClusterBreak(line.text, to);
      if (categorize(line.text.slice(to, next)) != cat)
        break;
      to = next;
    }
    return EditorSelection.range(from + line.from, to + line.from);
  }
  function getdx(x, rect) {
    return rect.left > x ? rect.left - x : Math.max(0, x - rect.right);
  }
  function getdy(y, rect) {
    return rect.top > y ? rect.top - y : Math.max(0, y - rect.bottom);
  }
  function yOverlap(a, b) {
    return a.top < b.bottom - 1 && a.bottom > b.top + 1;
  }
  function upTop(rect, top2) {
    return top2 < rect.top ? {top: top2, left: rect.left, right: rect.right, bottom: rect.bottom} : rect;
  }
  function upBot(rect, bottom) {
    return bottom > rect.bottom ? {top: rect.top, left: rect.left, right: rect.right, bottom} : rect;
  }
  function domPosAtCoords(parent, x, y) {
    let closest, closestRect, closestX, closestY, closestOverlap = false;
    let above, below, aboveRect, belowRect;
    for (let child = parent.firstChild; child; child = child.nextSibling) {
      let rects = clientRectsFor(child);
      for (let i = 0; i < rects.length; i++) {
        let rect = rects[i];
        if (closestRect && yOverlap(closestRect, rect))
          rect = upTop(upBot(rect, closestRect.bottom), closestRect.top);
        let dx = getdx(x, rect), dy = getdy(y, rect);
        if (dx == 0 && dy == 0)
          return child.nodeType == 3 ? domPosInText(child, x, y) : domPosAtCoords(child, x, y);
        if (!closest || closestY > dy || closestY == dy && closestX > dx) {
          closest = child;
          closestRect = rect;
          closestX = dx;
          closestY = dy;
          closestOverlap = !dx || (dx > 0 ? i < rects.length - 1 : i > 0);
        }
        if (dx == 0) {
          if (y > rect.bottom && (!aboveRect || aboveRect.bottom < rect.bottom)) {
            above = child;
            aboveRect = rect;
          } else if (y < rect.top && (!belowRect || belowRect.top > rect.top)) {
            below = child;
            belowRect = rect;
          }
        } else if (aboveRect && yOverlap(aboveRect, rect)) {
          aboveRect = upBot(aboveRect, rect.bottom);
        } else if (belowRect && yOverlap(belowRect, rect)) {
          belowRect = upTop(belowRect, rect.top);
        }
      }
    }
    if (aboveRect && aboveRect.bottom >= y) {
      closest = above;
      closestRect = aboveRect;
    } else if (belowRect && belowRect.top <= y) {
      closest = below;
      closestRect = belowRect;
    }
    if (!closest)
      return {node: parent, offset: 0};
    let clipX = Math.max(closestRect.left, Math.min(closestRect.right, x));
    if (closest.nodeType == 3)
      return domPosInText(closest, clipX, y);
    if (closestOverlap && closest.contentEditable != "false")
      return domPosAtCoords(closest, clipX, y);
    let offset = Array.prototype.indexOf.call(parent.childNodes, closest) + (x >= (closestRect.left + closestRect.right) / 2 ? 1 : 0);
    return {node: parent, offset};
  }
  function domPosInText(node, x, y) {
    let len = node.nodeValue.length;
    let closestOffset = -1, closestDY = 1e9, generalSide = 0;
    for (let i = 0; i < len; i++) {
      let rects = textRange(node, i, i + 1).getClientRects();
      for (let j = 0; j < rects.length; j++) {
        let rect = rects[j];
        if (rect.top == rect.bottom)
          continue;
        if (!generalSide)
          generalSide = x - rect.left;
        let dy = (rect.top > y ? rect.top - y : y - rect.bottom) - 1;
        if (rect.left - 1 <= x && rect.right + 1 >= x && dy < closestDY) {
          let right = x >= (rect.left + rect.right) / 2, after = right;
          if (browser.chrome || browser.gecko) {
            let rectBefore = textRange(node, i).getBoundingClientRect();
            if (rectBefore.left == rect.right)
              after = !right;
          }
          if (dy <= 0)
            return {node, offset: i + (after ? 1 : 0)};
          closestOffset = i + (after ? 1 : 0);
          closestDY = dy;
        }
      }
    }
    return {node, offset: closestOffset > -1 ? closestOffset : generalSide > 0 ? node.nodeValue.length : 0};
  }
  function posAtCoords(view, {x, y}, precise, bias = -1) {
    var _a2;
    let content2 = view.contentDOM.getBoundingClientRect(), docTop = content2.top + view.viewState.paddingTop;
    let block, {docHeight} = view.viewState;
    let yOffset = y - docTop;
    if (yOffset < 0)
      return 0;
    if (yOffset > docHeight)
      return view.state.doc.length;
    for (let halfLine = view.defaultLineHeight / 2, bounced = false; ; ) {
      block = view.elementAtHeight(yOffset);
      if (block.type == BlockType.Text)
        break;
      for (; ; ) {
        yOffset = bias > 0 ? block.bottom + halfLine : block.top - halfLine;
        if (yOffset >= 0 && yOffset <= docHeight)
          break;
        if (bounced)
          return precise ? null : 0;
        bounced = true;
        bias = -bias;
      }
    }
    y = docTop + yOffset;
    let lineStart = block.from;
    if (lineStart < view.viewport.from)
      return view.viewport.from == 0 ? 0 : precise ? null : posAtCoordsImprecise(view, content2, block, x, y);
    if (lineStart > view.viewport.to)
      return view.viewport.to == view.state.doc.length ? view.state.doc.length : precise ? null : posAtCoordsImprecise(view, content2, block, x, y);
    let doc2 = view.dom.ownerDocument;
    let root = view.root.elementFromPoint ? view.root : doc2;
    let element = root.elementFromPoint(x, y);
    if (element && !view.contentDOM.contains(element))
      element = null;
    if (!element) {
      x = Math.max(content2.left + 1, Math.min(content2.right - 1, x));
      element = root.elementFromPoint(x, y);
      if (element && !view.contentDOM.contains(element))
        element = null;
    }
    let node, offset = -1;
    if (element && ((_a2 = view.docView.nearest(element)) === null || _a2 === void 0 ? void 0 : _a2.isEditable) != false) {
      if (doc2.caretPositionFromPoint) {
        let pos = doc2.caretPositionFromPoint(x, y);
        if (pos)
          ({offsetNode: node, offset} = pos);
      } else if (doc2.caretRangeFromPoint) {
        let range = doc2.caretRangeFromPoint(x, y);
        if (range) {
          ({startContainer: node, startOffset: offset} = range);
          if (!view.contentDOM.contains(node) || browser.safari && isSuspiciousSafariCaretResult(node, offset, x) || browser.chrome && isSuspiciousChromeCaretResult(node, offset, x))
            node = void 0;
        }
      }
    }
    if (!node || !view.docView.dom.contains(node)) {
      let line = LineView.find(view.docView, lineStart);
      if (!line)
        return yOffset > block.top + block.height / 2 ? block.to : block.from;
      ({node, offset} = domPosAtCoords(line.dom, x, y));
    }
    return view.docView.posFromDOM(node, offset);
  }
  function posAtCoordsImprecise(view, contentRect, block, x, y) {
    let into = Math.round((x - contentRect.left) * view.defaultCharacterWidth);
    if (view.lineWrapping && block.height > view.defaultLineHeight * 1.5) {
      let line = Math.floor((y - block.top) / view.defaultLineHeight);
      into += line * view.viewState.heightOracle.lineLength;
    }
    let content2 = view.state.sliceDoc(block.from, block.to);
    return block.from + findColumn(content2, into, view.state.tabSize);
  }
  function isSuspiciousSafariCaretResult(node, offset, x) {
    let len;
    if (node.nodeType != 3 || offset != (len = node.nodeValue.length))
      return false;
    for (let next = node.nextSibling; next; next = next.nextSibling)
      if (next.nodeType != 1 || next.nodeName != "BR")
        return false;
    return textRange(node, len - 1, len).getBoundingClientRect().left > x;
  }
  function isSuspiciousChromeCaretResult(node, offset, x) {
    if (offset != 0)
      return false;
    for (let cur2 = node; ; ) {
      let parent = cur2.parentNode;
      if (!parent || parent.nodeType != 1 || parent.firstChild != cur2)
        return false;
      if (parent.classList.contains("cm-line"))
        break;
      cur2 = parent;
    }
    let rect = node.nodeType == 1 ? node.getBoundingClientRect() : textRange(node, 0, Math.max(node.nodeValue.length, 1)).getBoundingClientRect();
    return x - rect.left > 5;
  }
  function moveToLineBoundary(view, start, forward, includeWrap) {
    let line = view.state.doc.lineAt(start.head);
    let coords = !includeWrap || !view.lineWrapping ? null : view.coordsAtPos(start.assoc < 0 && start.head > line.from ? start.head - 1 : start.head);
    if (coords) {
      let editorRect = view.dom.getBoundingClientRect();
      let direction = view.textDirectionAt(line.from);
      let pos = view.posAtCoords({
        x: forward == (direction == Direction.LTR) ? editorRect.right - 1 : editorRect.left + 1,
        y: (coords.top + coords.bottom) / 2
      });
      if (pos != null)
        return EditorSelection.cursor(pos, forward ? -1 : 1);
    }
    let lineView = LineView.find(view.docView, start.head);
    let end = lineView ? forward ? lineView.posAtEnd : lineView.posAtStart : forward ? line.to : line.from;
    return EditorSelection.cursor(end, forward ? -1 : 1);
  }
  function moveByChar(view, start, forward, by) {
    let line = view.state.doc.lineAt(start.head), spans = view.bidiSpans(line);
    let direction = view.textDirectionAt(line.from);
    for (let cur2 = start, check = null; ; ) {
      let next = moveVisually(line, spans, direction, cur2, forward), char = movedOver;
      if (!next) {
        if (line.number == (forward ? view.state.doc.lines : 1))
          return cur2;
        char = "\n";
        line = view.state.doc.line(line.number + (forward ? 1 : -1));
        spans = view.bidiSpans(line);
        next = EditorSelection.cursor(forward ? line.from : line.to);
      }
      if (!check) {
        if (!by)
          return next;
        check = by(char);
      } else if (!check(char)) {
        return cur2;
      }
      cur2 = next;
    }
  }
  function byGroup(view, pos, start) {
    let categorize = view.state.charCategorizer(pos);
    let cat = categorize(start);
    return (next) => {
      let nextCat = categorize(next);
      if (cat == CharCategory.Space)
        cat = nextCat;
      return cat == nextCat;
    };
  }
  function moveVertically(view, start, forward, distance) {
    let startPos = start.head, dir = forward ? 1 : -1;
    if (startPos == (forward ? view.state.doc.length : 0))
      return EditorSelection.cursor(startPos, start.assoc);
    let goal = start.goalColumn, startY;
    let rect = view.contentDOM.getBoundingClientRect();
    let startCoords = view.coordsAtPos(startPos), docTop = view.documentTop;
    if (startCoords) {
      if (goal == null)
        goal = startCoords.left - rect.left;
      startY = dir < 0 ? startCoords.top : startCoords.bottom;
    } else {
      let line = view.viewState.lineBlockAt(startPos);
      if (goal == null)
        goal = Math.min(rect.right - rect.left, view.defaultCharacterWidth * (startPos - line.from));
      startY = (dir < 0 ? line.top : line.bottom) + docTop;
    }
    let resolvedGoal = rect.left + goal;
    let dist = distance !== null && distance !== void 0 ? distance : view.defaultLineHeight >> 1;
    for (let extra = 0; ; extra += 10) {
      let curY = startY + (dist + extra) * dir;
      let pos = posAtCoords(view, {x: resolvedGoal, y: curY}, false, dir);
      if (curY < rect.top || curY > rect.bottom || (dir < 0 ? pos < startPos : pos > startPos))
        return EditorSelection.cursor(pos, start.assoc, void 0, goal);
    }
  }
  function skipAtoms(view, oldPos, pos) {
    let atoms = view.state.facet(atomicRanges).map((f) => f(view));
    for (; ; ) {
      let moved = false;
      for (let set of atoms) {
        set.between(pos.from - 1, pos.from + 1, (from, to, value) => {
          if (pos.from > from && pos.from < to) {
            pos = oldPos.head > pos.from ? EditorSelection.cursor(from, 1) : EditorSelection.cursor(to, -1);
            moved = true;
          }
        });
      }
      if (!moved)
        return pos;
    }
  }
  var InputState = class {
    constructor(view) {
      this.lastKeyCode = 0;
      this.lastKeyTime = 0;
      this.lastTouchTime = 0;
      this.lastFocusTime = 0;
      this.lastScrollTop = 0;
      this.lastScrollLeft = 0;
      this.chromeScrollHack = -1;
      this.pendingIOSKey = void 0;
      this.lastSelectionOrigin = null;
      this.lastSelectionTime = 0;
      this.lastEscPress = 0;
      this.lastContextMenu = 0;
      this.scrollHandlers = [];
      this.registeredEvents = [];
      this.customHandlers = [];
      this.composing = -1;
      this.compositionFirstChange = null;
      this.compositionEndedAt = 0;
      this.mouseSelection = null;
      for (let type in handlers) {
        let handler = handlers[type];
        view.contentDOM.addEventListener(type, (event) => {
          if (!eventBelongsToEditor(view, event) || this.ignoreDuringComposition(event))
            return;
          if (type == "keydown" && this.keydown(view, event))
            return;
          if (this.mustFlushObserver(event))
            view.observer.forceFlush();
          if (this.runCustomHandlers(type, view, event))
            event.preventDefault();
          else
            handler(view, event);
        }, handlerOptions[type]);
        this.registeredEvents.push(type);
      }
      if (browser.chrome && browser.chrome_version == 102) {
        view.scrollDOM.addEventListener("wheel", () => {
          if (this.chromeScrollHack < 0)
            view.contentDOM.style.pointerEvents = "none";
          else
            window.clearTimeout(this.chromeScrollHack);
          this.chromeScrollHack = setTimeout(() => {
            this.chromeScrollHack = -1;
            view.contentDOM.style.pointerEvents = "";
          }, 100);
        }, {passive: true});
      }
      this.notifiedFocused = view.hasFocus;
      if (browser.safari)
        view.contentDOM.addEventListener("input", () => null);
    }
    setSelectionOrigin(origin) {
      this.lastSelectionOrigin = origin;
      this.lastSelectionTime = Date.now();
    }
    ensureHandlers(view, plugins) {
      var _a2;
      let handlers2;
      this.customHandlers = [];
      for (let plugin of plugins)
        if (handlers2 = (_a2 = plugin.update(view).spec) === null || _a2 === void 0 ? void 0 : _a2.domEventHandlers) {
          this.customHandlers.push({plugin: plugin.value, handlers: handlers2});
          for (let type in handlers2)
            if (this.registeredEvents.indexOf(type) < 0 && type != "scroll") {
              this.registeredEvents.push(type);
              view.contentDOM.addEventListener(type, (event) => {
                if (!eventBelongsToEditor(view, event))
                  return;
                if (this.runCustomHandlers(type, view, event))
                  event.preventDefault();
              });
            }
        }
    }
    runCustomHandlers(type, view, event) {
      for (let set of this.customHandlers) {
        let handler = set.handlers[type];
        if (handler) {
          try {
            if (handler.call(set.plugin, event, view) || event.defaultPrevented)
              return true;
          } catch (e) {
            logException(view.state, e);
          }
        }
      }
      return false;
    }
    runScrollHandlers(view, event) {
      this.lastScrollTop = view.scrollDOM.scrollTop;
      this.lastScrollLeft = view.scrollDOM.scrollLeft;
      for (let set of this.customHandlers) {
        let handler = set.handlers.scroll;
        if (handler) {
          try {
            handler.call(set.plugin, event, view);
          } catch (e) {
            logException(view.state, e);
          }
        }
      }
    }
    keydown(view, event) {
      this.lastKeyCode = event.keyCode;
      this.lastKeyTime = Date.now();
      if (event.keyCode == 9 && Date.now() < this.lastEscPress + 2e3)
        return true;
      if (browser.android && browser.chrome && !event.synthetic && (event.keyCode == 13 || event.keyCode == 8)) {
        view.observer.delayAndroidKey(event.key, event.keyCode);
        return true;
      }
      let pending;
      if (browser.ios && !event.synthetic && !event.altKey && !event.metaKey && ((pending = PendingKeys.find((key) => key.keyCode == event.keyCode)) && !event.ctrlKey || EmacsyPendingKeys.indexOf(event.key) > -1 && event.ctrlKey && !event.shiftKey)) {
        this.pendingIOSKey = pending || event;
        setTimeout(() => this.flushIOSKey(view), 250);
        return true;
      }
      return false;
    }
    flushIOSKey(view) {
      let key = this.pendingIOSKey;
      if (!key)
        return false;
      this.pendingIOSKey = void 0;
      return dispatchKey(view.contentDOM, key.key, key.keyCode);
    }
    ignoreDuringComposition(event) {
      if (!/^key/.test(event.type))
        return false;
      if (this.composing > 0)
        return true;
      if (browser.safari && !browser.ios && Date.now() - this.compositionEndedAt < 100) {
        this.compositionEndedAt = 0;
        return true;
      }
      return false;
    }
    mustFlushObserver(event) {
      return event.type == "keydown" && event.keyCode != 229;
    }
    startMouseSelection(mouseSelection) {
      if (this.mouseSelection)
        this.mouseSelection.destroy();
      this.mouseSelection = mouseSelection;
    }
    update(update) {
      if (this.mouseSelection)
        this.mouseSelection.update(update);
      if (update.transactions.length)
        this.lastKeyCode = this.lastSelectionTime = 0;
    }
    destroy() {
      if (this.mouseSelection)
        this.mouseSelection.destroy();
    }
  };
  var PendingKeys = [
    {key: "Backspace", keyCode: 8, inputType: "deleteContentBackward"},
    {key: "Enter", keyCode: 13, inputType: "insertParagraph"},
    {key: "Delete", keyCode: 46, inputType: "deleteContentForward"}
  ];
  var EmacsyPendingKeys = "dthko";
  var modifierCodes = [16, 17, 18, 20, 91, 92, 224, 225];
  var MouseSelection = class {
    constructor(view, startEvent, style, mustSelect) {
      this.view = view;
      this.style = style;
      this.mustSelect = mustSelect;
      this.lastEvent = startEvent;
      let doc2 = view.contentDOM.ownerDocument;
      doc2.addEventListener("mousemove", this.move = this.move.bind(this));
      doc2.addEventListener("mouseup", this.up = this.up.bind(this));
      this.extend = startEvent.shiftKey;
      this.multiple = view.state.facet(EditorState.allowMultipleSelections) && addsSelectionRange(view, startEvent);
      this.dragMove = dragMovesSelection(view, startEvent);
      this.dragging = isInPrimarySelection(view, startEvent) && getClickType(startEvent) == 1 ? null : false;
      if (this.dragging === false) {
        startEvent.preventDefault();
        this.select(startEvent);
      }
    }
    move(event) {
      if (event.buttons == 0)
        return this.destroy();
      if (this.dragging !== false)
        return;
      this.select(this.lastEvent = event);
    }
    up(event) {
      if (this.dragging == null)
        this.select(this.lastEvent);
      if (!this.dragging)
        event.preventDefault();
      this.destroy();
    }
    destroy() {
      let doc2 = this.view.contentDOM.ownerDocument;
      doc2.removeEventListener("mousemove", this.move);
      doc2.removeEventListener("mouseup", this.up);
      this.view.inputState.mouseSelection = null;
    }
    select(event) {
      let selection = this.style.get(event, this.extend, this.multiple);
      if (this.mustSelect || !selection.eq(this.view.state.selection) || selection.main.assoc != this.view.state.selection.main.assoc)
        this.view.dispatch({
          selection,
          userEvent: "select.pointer",
          scrollIntoView: true
        });
      this.mustSelect = false;
    }
    update(update) {
      if (update.docChanged && this.dragging)
        this.dragging = this.dragging.map(update.changes);
      if (this.style.update(update))
        setTimeout(() => this.select(this.lastEvent), 20);
    }
  };
  function addsSelectionRange(view, event) {
    let facet = view.state.facet(clickAddsSelectionRange);
    return facet.length ? facet[0](event) : browser.mac ? event.metaKey : event.ctrlKey;
  }
  function dragMovesSelection(view, event) {
    let facet = view.state.facet(dragMovesSelection$1);
    return facet.length ? facet[0](event) : browser.mac ? !event.altKey : !event.ctrlKey;
  }
  function isInPrimarySelection(view, event) {
    let {main} = view.state.selection;
    if (main.empty)
      return false;
    let sel = getSelection(view.root);
    if (!sel || sel.rangeCount == 0)
      return true;
    let rects = sel.getRangeAt(0).getClientRects();
    for (let i = 0; i < rects.length; i++) {
      let rect = rects[i];
      if (rect.left <= event.clientX && rect.right >= event.clientX && rect.top <= event.clientY && rect.bottom >= event.clientY)
        return true;
    }
    return false;
  }
  function eventBelongsToEditor(view, event) {
    if (!event.bubbles)
      return true;
    if (event.defaultPrevented)
      return false;
    for (let node = event.target, cView; node != view.contentDOM; node = node.parentNode)
      if (!node || node.nodeType == 11 || (cView = ContentView.get(node)) && cView.ignoreEvent(event))
        return false;
    return true;
  }
  var handlers = /* @__PURE__ */ Object.create(null);
  var handlerOptions = /* @__PURE__ */ Object.create(null);
  var brokenClipboardAPI = browser.ie && browser.ie_version < 15 || browser.ios && browser.webkit_version < 604;
  function capturePaste(view) {
    let parent = view.dom.parentNode;
    if (!parent)
      return;
    let target = parent.appendChild(document.createElement("textarea"));
    target.style.cssText = "position: fixed; left: -10000px; top: 10px";
    target.focus();
    setTimeout(() => {
      view.focus();
      target.remove();
      doPaste(view, target.value);
    }, 50);
  }
  function doPaste(view, input) {
    let {state} = view, changes, i = 1, text = state.toText(input);
    let byLine = text.lines == state.selection.ranges.length;
    let linewise = lastLinewiseCopy != null && state.selection.ranges.every((r) => r.empty) && lastLinewiseCopy == text.toString();
    if (linewise) {
      let lastLine = -1;
      changes = state.changeByRange((range) => {
        let line = state.doc.lineAt(range.from);
        if (line.from == lastLine)
          return {range};
        lastLine = line.from;
        let insert2 = state.toText((byLine ? text.line(i++).text : input) + state.lineBreak);
        return {
          changes: {from: line.from, insert: insert2},
          range: EditorSelection.cursor(range.from + insert2.length)
        };
      });
    } else if (byLine) {
      changes = state.changeByRange((range) => {
        let line = text.line(i++);
        return {
          changes: {from: range.from, to: range.to, insert: line.text},
          range: EditorSelection.cursor(range.from + line.length)
        };
      });
    } else {
      changes = state.replaceSelection(text);
    }
    view.dispatch(changes, {
      userEvent: "input.paste",
      scrollIntoView: true
    });
  }
  handlers.keydown = (view, event) => {
    view.inputState.setSelectionOrigin("select");
    if (event.keyCode == 27)
      view.inputState.lastEscPress = Date.now();
    else if (modifierCodes.indexOf(event.keyCode) < 0)
      view.inputState.lastEscPress = 0;
  };
  handlers.touchstart = (view, e) => {
    view.inputState.lastTouchTime = Date.now();
    view.inputState.setSelectionOrigin("select.pointer");
  };
  handlers.touchmove = (view) => {
    view.inputState.setSelectionOrigin("select.pointer");
  };
  handlerOptions.touchstart = handlerOptions.touchmove = {passive: true};
  handlers.mousedown = (view, event) => {
    view.observer.flush();
    if (view.inputState.lastTouchTime > Date.now() - 2e3)
      return;
    let style = null;
    for (let makeStyle of view.state.facet(mouseSelectionStyle)) {
      style = makeStyle(view, event);
      if (style)
        break;
    }
    if (!style && event.button == 0)
      style = basicMouseSelection(view, event);
    if (style) {
      let mustFocus = view.root.activeElement != view.contentDOM;
      if (mustFocus)
        view.observer.ignore(() => focusPreventScroll(view.contentDOM));
      view.inputState.startMouseSelection(new MouseSelection(view, event, style, mustFocus));
    }
  };
  function rangeForClick(view, pos, bias, type) {
    if (type == 1) {
      return EditorSelection.cursor(pos, bias);
    } else if (type == 2) {
      return groupAt(view.state, pos, bias);
    } else {
      let visual = LineView.find(view.docView, pos), line = view.state.doc.lineAt(visual ? visual.posAtEnd : pos);
      let from = visual ? visual.posAtStart : line.from, to = visual ? visual.posAtEnd : line.to;
      if (to < view.state.doc.length && to == line.to)
        to++;
      return EditorSelection.range(from, to);
    }
  }
  var insideY = (y, rect) => y >= rect.top && y <= rect.bottom;
  var inside = (x, y, rect) => insideY(y, rect) && x >= rect.left && x <= rect.right;
  function findPositionSide(view, pos, x, y) {
    let line = LineView.find(view.docView, pos);
    if (!line)
      return 1;
    let off = pos - line.posAtStart;
    if (off == 0)
      return 1;
    if (off == line.length)
      return -1;
    let before = line.coordsAt(off, -1);
    if (before && inside(x, y, before))
      return -1;
    let after = line.coordsAt(off, 1);
    if (after && inside(x, y, after))
      return 1;
    return before && insideY(y, before) ? -1 : 1;
  }
  function queryPos(view, event) {
    let pos = view.posAtCoords({x: event.clientX, y: event.clientY}, false);
    return {pos, bias: findPositionSide(view, pos, event.clientX, event.clientY)};
  }
  var BadMouseDetail = browser.ie && browser.ie_version <= 11;
  var lastMouseDown = null;
  var lastMouseDownCount = 0;
  var lastMouseDownTime = 0;
  function getClickType(event) {
    if (!BadMouseDetail)
      return event.detail;
    let last = lastMouseDown, lastTime = lastMouseDownTime;
    lastMouseDown = event;
    lastMouseDownTime = Date.now();
    return lastMouseDownCount = !last || lastTime > Date.now() - 400 && Math.abs(last.clientX - event.clientX) < 2 && Math.abs(last.clientY - event.clientY) < 2 ? (lastMouseDownCount + 1) % 3 : 1;
  }
  function basicMouseSelection(view, event) {
    let start = queryPos(view, event), type = getClickType(event);
    let startSel = view.state.selection;
    let last = start, lastEvent = event;
    return {
      update(update) {
        if (update.docChanged) {
          start.pos = update.changes.mapPos(start.pos);
          startSel = startSel.map(update.changes);
          lastEvent = null;
        }
      },
      get(event2, extend2, multiple) {
        let cur2;
        if (lastEvent && event2.clientX == lastEvent.clientX && event2.clientY == lastEvent.clientY)
          cur2 = last;
        else {
          cur2 = last = queryPos(view, event2);
          lastEvent = event2;
        }
        let range = rangeForClick(view, cur2.pos, cur2.bias, type);
        if (start.pos != cur2.pos && !extend2) {
          let startRange = rangeForClick(view, start.pos, start.bias, type);
          let from = Math.min(startRange.from, range.from), to = Math.max(startRange.to, range.to);
          range = from < range.from ? EditorSelection.range(from, to) : EditorSelection.range(to, from);
        }
        if (extend2)
          return startSel.replaceRange(startSel.main.extend(range.from, range.to));
        else if (multiple && startSel.ranges.length > 1 && startSel.ranges.some((r) => r.eq(range)))
          return removeRange(startSel, range);
        else if (multiple)
          return startSel.addRange(range);
        else
          return EditorSelection.create([range]);
      }
    };
  }
  function removeRange(sel, range) {
    for (let i = 0; ; i++) {
      if (sel.ranges[i].eq(range))
        return EditorSelection.create(sel.ranges.slice(0, i).concat(sel.ranges.slice(i + 1)), sel.mainIndex == i ? 0 : sel.mainIndex - (sel.mainIndex > i ? 1 : 0));
    }
  }
  handlers.dragstart = (view, event) => {
    let {selection: {main}} = view.state;
    let {mouseSelection} = view.inputState;
    if (mouseSelection)
      mouseSelection.dragging = main;
    if (event.dataTransfer) {
      event.dataTransfer.setData("Text", view.state.sliceDoc(main.from, main.to));
      event.dataTransfer.effectAllowed = "copyMove";
    }
  };
  function dropText(view, event, text, direct) {
    if (!text)
      return;
    let dropPos = view.posAtCoords({x: event.clientX, y: event.clientY}, false);
    event.preventDefault();
    let {mouseSelection} = view.inputState;
    let del = direct && mouseSelection && mouseSelection.dragging && mouseSelection.dragMove ? {from: mouseSelection.dragging.from, to: mouseSelection.dragging.to} : null;
    let ins = {from: dropPos, insert: text};
    let changes = view.state.changes(del ? [del, ins] : ins);
    view.focus();
    view.dispatch({
      changes,
      selection: {anchor: changes.mapPos(dropPos, -1), head: changes.mapPos(dropPos, 1)},
      userEvent: del ? "move.drop" : "input.drop"
    });
  }
  handlers.drop = (view, event) => {
    if (!event.dataTransfer)
      return;
    if (view.state.readOnly)
      return event.preventDefault();
    let files = event.dataTransfer.files;
    if (files && files.length) {
      event.preventDefault();
      let text = Array(files.length), read = 0;
      let finishFile = () => {
        if (++read == files.length)
          dropText(view, event, text.filter((s) => s != null).join(view.state.lineBreak), false);
      };
      for (let i = 0; i < files.length; i++) {
        let reader = new FileReader();
        reader.onerror = finishFile;
        reader.onload = () => {
          if (!/[\x00-\x08\x0e-\x1f]{2}/.test(reader.result))
            text[i] = reader.result;
          finishFile();
        };
        reader.readAsText(files[i]);
      }
    } else {
      dropText(view, event, event.dataTransfer.getData("Text"), true);
    }
  };
  handlers.paste = (view, event) => {
    if (view.state.readOnly)
      return event.preventDefault();
    view.observer.flush();
    let data2 = brokenClipboardAPI ? null : event.clipboardData;
    if (data2) {
      doPaste(view, data2.getData("text/plain"));
      event.preventDefault();
    } else {
      capturePaste(view);
    }
  };
  function captureCopy(view, text) {
    let parent = view.dom.parentNode;
    if (!parent)
      return;
    let target = parent.appendChild(document.createElement("textarea"));
    target.style.cssText = "position: fixed; left: -10000px; top: 10px";
    target.value = text;
    target.focus();
    target.selectionEnd = text.length;
    target.selectionStart = 0;
    setTimeout(() => {
      target.remove();
      view.focus();
    }, 50);
  }
  function copiedRange(state) {
    let content2 = [], ranges = [], linewise = false;
    for (let range of state.selection.ranges)
      if (!range.empty) {
        content2.push(state.sliceDoc(range.from, range.to));
        ranges.push(range);
      }
    if (!content2.length) {
      let upto = -1;
      for (let {from} of state.selection.ranges) {
        let line = state.doc.lineAt(from);
        if (line.number > upto) {
          content2.push(line.text);
          ranges.push({from: line.from, to: Math.min(state.doc.length, line.to + 1)});
        }
        upto = line.number;
      }
      linewise = true;
    }
    return {text: content2.join(state.lineBreak), ranges, linewise};
  }
  var lastLinewiseCopy = null;
  handlers.copy = handlers.cut = (view, event) => {
    let {text, ranges, linewise} = copiedRange(view.state);
    if (!text && !linewise)
      return;
    lastLinewiseCopy = linewise ? text : null;
    let data2 = brokenClipboardAPI ? null : event.clipboardData;
    if (data2) {
      event.preventDefault();
      data2.clearData();
      data2.setData("text/plain", text);
    } else {
      captureCopy(view, text);
    }
    if (event.type == "cut" && !view.state.readOnly)
      view.dispatch({
        changes: ranges,
        scrollIntoView: true,
        userEvent: "delete.cut"
      });
  };
  function updateForFocusChange(view) {
    setTimeout(() => {
      if (view.hasFocus != view.inputState.notifiedFocused)
        view.update([]);
    }, 10);
  }
  handlers.focus = (view) => {
    view.inputState.lastFocusTime = Date.now();
    if (!view.scrollDOM.scrollTop && (view.inputState.lastScrollTop || view.inputState.lastScrollLeft)) {
      view.scrollDOM.scrollTop = view.inputState.lastScrollTop;
      view.scrollDOM.scrollLeft = view.inputState.lastScrollLeft;
    }
    updateForFocusChange(view);
  };
  handlers.blur = (view) => {
    view.observer.clearSelectionRange();
    updateForFocusChange(view);
  };
  handlers.compositionstart = handlers.compositionupdate = (view) => {
    if (view.inputState.compositionFirstChange == null)
      view.inputState.compositionFirstChange = true;
    if (view.inputState.composing < 0) {
      view.inputState.composing = 0;
    }
  };
  handlers.compositionend = (view) => {
    view.inputState.composing = -1;
    view.inputState.compositionEndedAt = Date.now();
    view.inputState.compositionFirstChange = null;
    if (browser.chrome && browser.android)
      view.observer.flushSoon();
    setTimeout(() => {
      if (view.inputState.composing < 0 && view.docView.compositionDeco.size)
        view.update([]);
    }, 50);
  };
  handlers.contextmenu = (view) => {
    view.inputState.lastContextMenu = Date.now();
  };
  handlers.beforeinput = (view, event) => {
    var _a2;
    let pending;
    if (browser.chrome && browser.android && (pending = PendingKeys.find((key) => key.inputType == event.inputType))) {
      view.observer.delayAndroidKey(pending.key, pending.keyCode);
      if (pending.key == "Backspace" || pending.key == "Delete") {
        let startViewHeight = ((_a2 = window.visualViewport) === null || _a2 === void 0 ? void 0 : _a2.height) || 0;
        setTimeout(() => {
          var _a3;
          if ((((_a3 = window.visualViewport) === null || _a3 === void 0 ? void 0 : _a3.height) || 0) > startViewHeight + 10 && view.hasFocus) {
            view.contentDOM.blur();
            view.focus();
          }
        }, 100);
      }
    }
  };
  var wrappingWhiteSpace = ["pre-wrap", "normal", "pre-line", "break-spaces"];
  var HeightOracle = class {
    constructor(lineWrapping) {
      this.lineWrapping = lineWrapping;
      this.doc = Text.empty;
      this.heightSamples = {};
      this.lineHeight = 14;
      this.charWidth = 7;
      this.lineLength = 30;
      this.heightChanged = false;
    }
    heightForGap(from, to) {
      let lines = this.doc.lineAt(to).number - this.doc.lineAt(from).number + 1;
      if (this.lineWrapping)
        lines += Math.ceil((to - from - lines * this.lineLength * 0.5) / this.lineLength);
      return this.lineHeight * lines;
    }
    heightForLine(length) {
      if (!this.lineWrapping)
        return this.lineHeight;
      let lines = 1 + Math.max(0, Math.ceil((length - this.lineLength) / (this.lineLength - 5)));
      return lines * this.lineHeight;
    }
    setDoc(doc2) {
      this.doc = doc2;
      return this;
    }
    mustRefreshForWrapping(whiteSpace) {
      return wrappingWhiteSpace.indexOf(whiteSpace) > -1 != this.lineWrapping;
    }
    mustRefreshForHeights(lineHeights) {
      let newHeight = false;
      for (let i = 0; i < lineHeights.length; i++) {
        let h = lineHeights[i];
        if (h < 0) {
          i++;
        } else if (!this.heightSamples[Math.floor(h * 10)]) {
          newHeight = true;
          this.heightSamples[Math.floor(h * 10)] = true;
        }
      }
      return newHeight;
    }
    refresh(whiteSpace, lineHeight, charWidth, lineLength, knownHeights) {
      let lineWrapping = wrappingWhiteSpace.indexOf(whiteSpace) > -1;
      let changed = Math.round(lineHeight) != Math.round(this.lineHeight) || this.lineWrapping != lineWrapping;
      this.lineWrapping = lineWrapping;
      this.lineHeight = lineHeight;
      this.charWidth = charWidth;
      this.lineLength = lineLength;
      if (changed) {
        this.heightSamples = {};
        for (let i = 0; i < knownHeights.length; i++) {
          let h = knownHeights[i];
          if (h < 0)
            i++;
          else
            this.heightSamples[Math.floor(h * 10)] = true;
        }
      }
      return changed;
    }
  };
  var MeasuredHeights = class {
    constructor(from, heights) {
      this.from = from;
      this.heights = heights;
      this.index = 0;
    }
    get more() {
      return this.index < this.heights.length;
    }
  };
  var BlockInfo = class {
    constructor(from, length, top2, height, type) {
      this.from = from;
      this.length = length;
      this.top = top2;
      this.height = height;
      this.type = type;
    }
    get to() {
      return this.from + this.length;
    }
    get bottom() {
      return this.top + this.height;
    }
    join(other) {
      let detail = (Array.isArray(this.type) ? this.type : [this]).concat(Array.isArray(other.type) ? other.type : [other]);
      return new BlockInfo(this.from, this.length + other.length, this.top, this.height + other.height, detail);
    }
  };
  var QueryType = /* @__PURE__ */ function(QueryType2) {
    QueryType2[QueryType2["ByPos"] = 0] = "ByPos";
    QueryType2[QueryType2["ByHeight"] = 1] = "ByHeight";
    QueryType2[QueryType2["ByPosNoHeight"] = 2] = "ByPosNoHeight";
    return QueryType2;
  }(QueryType || (QueryType = {}));
  var Epsilon = 1e-3;
  var HeightMap = class {
    constructor(length, height, flags = 2) {
      this.length = length;
      this.height = height;
      this.flags = flags;
    }
    get outdated() {
      return (this.flags & 2) > 0;
    }
    set outdated(value) {
      this.flags = (value ? 2 : 0) | this.flags & ~2;
    }
    setHeight(oracle, height) {
      if (this.height != height) {
        if (Math.abs(this.height - height) > Epsilon)
          oracle.heightChanged = true;
        this.height = height;
      }
    }
    replace(_from, _to, nodes) {
      return HeightMap.of(nodes);
    }
    decomposeLeft(_to, result) {
      result.push(this);
    }
    decomposeRight(_from, result) {
      result.push(this);
    }
    applyChanges(decorations2, oldDoc, oracle, changes) {
      let me = this;
      for (let i = changes.length - 1; i >= 0; i--) {
        let {fromA, toA, fromB, toB} = changes[i];
        let start = me.lineAt(fromA, QueryType.ByPosNoHeight, oldDoc, 0, 0);
        let end = start.to >= toA ? start : me.lineAt(toA, QueryType.ByPosNoHeight, oldDoc, 0, 0);
        toB += end.to - toA;
        toA = end.to;
        while (i > 0 && start.from <= changes[i - 1].toA) {
          fromA = changes[i - 1].fromA;
          fromB = changes[i - 1].fromB;
          i--;
          if (fromA < start.from)
            start = me.lineAt(fromA, QueryType.ByPosNoHeight, oldDoc, 0, 0);
        }
        fromB += start.from - fromA;
        fromA = start.from;
        let nodes = NodeBuilder.build(oracle, decorations2, fromB, toB);
        me = me.replace(fromA, toA, nodes);
      }
      return me.updateHeight(oracle, 0);
    }
    static empty() {
      return new HeightMapText(0, 0);
    }
    static of(nodes) {
      if (nodes.length == 1)
        return nodes[0];
      let i = 0, j = nodes.length, before = 0, after = 0;
      for (; ; ) {
        if (i == j) {
          if (before > after * 2) {
            let split = nodes[i - 1];
            if (split.break)
              nodes.splice(--i, 1, split.left, null, split.right);
            else
              nodes.splice(--i, 1, split.left, split.right);
            j += 1 + split.break;
            before -= split.size;
          } else if (after > before * 2) {
            let split = nodes[j];
            if (split.break)
              nodes.splice(j, 1, split.left, null, split.right);
            else
              nodes.splice(j, 1, split.left, split.right);
            j += 2 + split.break;
            after -= split.size;
          } else {
            break;
          }
        } else if (before < after) {
          let next = nodes[i++];
          if (next)
            before += next.size;
        } else {
          let next = nodes[--j];
          if (next)
            after += next.size;
        }
      }
      let brk = 0;
      if (nodes[i - 1] == null) {
        brk = 1;
        i--;
      } else if (nodes[i] == null) {
        brk = 1;
        j++;
      }
      return new HeightMapBranch(HeightMap.of(nodes.slice(0, i)), brk, HeightMap.of(nodes.slice(j)));
    }
  };
  HeightMap.prototype.size = 1;
  var HeightMapBlock = class extends HeightMap {
    constructor(length, height, type) {
      super(length, height);
      this.type = type;
    }
    blockAt(_height, _doc, top2, offset) {
      return new BlockInfo(offset, this.length, top2, this.height, this.type);
    }
    lineAt(_value, _type, doc2, top2, offset) {
      return this.blockAt(0, doc2, top2, offset);
    }
    forEachLine(from, to, doc2, top2, offset, f) {
      if (from <= offset + this.length && to >= offset)
        f(this.blockAt(0, doc2, top2, offset));
    }
    updateHeight(oracle, offset = 0, _force = false, measured) {
      if (measured && measured.from <= offset && measured.more)
        this.setHeight(oracle, measured.heights[measured.index++]);
      this.outdated = false;
      return this;
    }
    toString() {
      return `block(${this.length})`;
    }
  };
  var HeightMapText = class extends HeightMapBlock {
    constructor(length, height) {
      super(length, height, BlockType.Text);
      this.collapsed = 0;
      this.widgetHeight = 0;
    }
    replace(_from, _to, nodes) {
      let node = nodes[0];
      if (nodes.length == 1 && (node instanceof HeightMapText || node instanceof HeightMapGap && node.flags & 4) && Math.abs(this.length - node.length) < 10) {
        if (node instanceof HeightMapGap)
          node = new HeightMapText(node.length, this.height);
        else
          node.height = this.height;
        if (!this.outdated)
          node.outdated = false;
        return node;
      } else {
        return HeightMap.of(nodes);
      }
    }
    updateHeight(oracle, offset = 0, force = false, measured) {
      if (measured && measured.from <= offset && measured.more)
        this.setHeight(oracle, measured.heights[measured.index++]);
      else if (force || this.outdated)
        this.setHeight(oracle, Math.max(this.widgetHeight, oracle.heightForLine(this.length - this.collapsed)));
      this.outdated = false;
      return this;
    }
    toString() {
      return `line(${this.length}${this.collapsed ? -this.collapsed : ""}${this.widgetHeight ? ":" + this.widgetHeight : ""})`;
    }
  };
  var HeightMapGap = class extends HeightMap {
    constructor(length) {
      super(length, 0);
    }
    lines(doc2, offset) {
      let firstLine = doc2.lineAt(offset).number, lastLine = doc2.lineAt(offset + this.length).number;
      return {firstLine, lastLine, lineHeight: this.height / (lastLine - firstLine + 1)};
    }
    blockAt(height, doc2, top2, offset) {
      let {firstLine, lastLine, lineHeight} = this.lines(doc2, offset);
      let line = Math.max(0, Math.min(lastLine - firstLine, Math.floor((height - top2) / lineHeight)));
      let {from, length} = doc2.line(firstLine + line);
      return new BlockInfo(from, length, top2 + lineHeight * line, lineHeight, BlockType.Text);
    }
    lineAt(value, type, doc2, top2, offset) {
      if (type == QueryType.ByHeight)
        return this.blockAt(value, doc2, top2, offset);
      if (type == QueryType.ByPosNoHeight) {
        let {from: from2, to} = doc2.lineAt(value);
        return new BlockInfo(from2, to - from2, 0, 0, BlockType.Text);
      }
      let {firstLine, lineHeight} = this.lines(doc2, offset);
      let {from, length, number: number2} = doc2.lineAt(value);
      return new BlockInfo(from, length, top2 + lineHeight * (number2 - firstLine), lineHeight, BlockType.Text);
    }
    forEachLine(from, to, doc2, top2, offset, f) {
      let {firstLine, lineHeight} = this.lines(doc2, offset);
      for (let pos = Math.max(from, offset), end = Math.min(offset + this.length, to); pos <= end; ) {
        let line = doc2.lineAt(pos);
        if (pos == from)
          top2 += lineHeight * (line.number - firstLine);
        f(new BlockInfo(line.from, line.length, top2, lineHeight, BlockType.Text));
        top2 += lineHeight;
        pos = line.to + 1;
      }
    }
    replace(from, to, nodes) {
      let after = this.length - to;
      if (after > 0) {
        let last = nodes[nodes.length - 1];
        if (last instanceof HeightMapGap)
          nodes[nodes.length - 1] = new HeightMapGap(last.length + after);
        else
          nodes.push(null, new HeightMapGap(after - 1));
      }
      if (from > 0) {
        let first = nodes[0];
        if (first instanceof HeightMapGap)
          nodes[0] = new HeightMapGap(from + first.length);
        else
          nodes.unshift(new HeightMapGap(from - 1), null);
      }
      return HeightMap.of(nodes);
    }
    decomposeLeft(to, result) {
      result.push(new HeightMapGap(to - 1), null);
    }
    decomposeRight(from, result) {
      result.push(null, new HeightMapGap(this.length - from - 1));
    }
    updateHeight(oracle, offset = 0, force = false, measured) {
      let end = offset + this.length;
      if (measured && measured.from <= offset + this.length && measured.more) {
        let nodes = [], pos = Math.max(offset, measured.from), singleHeight = -1;
        let wasChanged = oracle.heightChanged;
        if (measured.from > offset)
          nodes.push(new HeightMapGap(measured.from - offset - 1).updateHeight(oracle, offset));
        while (pos <= end && measured.more) {
          let len = oracle.doc.lineAt(pos).length;
          if (nodes.length)
            nodes.push(null);
          let height = measured.heights[measured.index++];
          if (singleHeight == -1)
            singleHeight = height;
          else if (Math.abs(height - singleHeight) >= Epsilon)
            singleHeight = -2;
          let line = new HeightMapText(len, height);
          line.outdated = false;
          nodes.push(line);
          pos += len + 1;
        }
        if (pos <= end)
          nodes.push(null, new HeightMapGap(end - pos).updateHeight(oracle, pos));
        let result = HeightMap.of(nodes);
        oracle.heightChanged = wasChanged || singleHeight < 0 || Math.abs(result.height - this.height) >= Epsilon || Math.abs(singleHeight - this.lines(oracle.doc, offset).lineHeight) >= Epsilon;
        return result;
      } else if (force || this.outdated) {
        this.setHeight(oracle, oracle.heightForGap(offset, offset + this.length));
        this.outdated = false;
      }
      return this;
    }
    toString() {
      return `gap(${this.length})`;
    }
  };
  var HeightMapBranch = class extends HeightMap {
    constructor(left, brk, right) {
      super(left.length + brk + right.length, left.height + right.height, brk | (left.outdated || right.outdated ? 2 : 0));
      this.left = left;
      this.right = right;
      this.size = left.size + right.size;
    }
    get break() {
      return this.flags & 1;
    }
    blockAt(height, doc2, top2, offset) {
      let mid = top2 + this.left.height;
      return height < mid ? this.left.blockAt(height, doc2, top2, offset) : this.right.blockAt(height, doc2, mid, offset + this.left.length + this.break);
    }
    lineAt(value, type, doc2, top2, offset) {
      let rightTop = top2 + this.left.height, rightOffset = offset + this.left.length + this.break;
      let left = type == QueryType.ByHeight ? value < rightTop : value < rightOffset;
      let base2 = left ? this.left.lineAt(value, type, doc2, top2, offset) : this.right.lineAt(value, type, doc2, rightTop, rightOffset);
      if (this.break || (left ? base2.to < rightOffset : base2.from > rightOffset))
        return base2;
      let subQuery = type == QueryType.ByPosNoHeight ? QueryType.ByPosNoHeight : QueryType.ByPos;
      if (left)
        return base2.join(this.right.lineAt(rightOffset, subQuery, doc2, rightTop, rightOffset));
      else
        return this.left.lineAt(rightOffset, subQuery, doc2, top2, offset).join(base2);
    }
    forEachLine(from, to, doc2, top2, offset, f) {
      let rightTop = top2 + this.left.height, rightOffset = offset + this.left.length + this.break;
      if (this.break) {
        if (from < rightOffset)
          this.left.forEachLine(from, to, doc2, top2, offset, f);
        if (to >= rightOffset)
          this.right.forEachLine(from, to, doc2, rightTop, rightOffset, f);
      } else {
        let mid = this.lineAt(rightOffset, QueryType.ByPos, doc2, top2, offset);
        if (from < mid.from)
          this.left.forEachLine(from, mid.from - 1, doc2, top2, offset, f);
        if (mid.to >= from && mid.from <= to)
          f(mid);
        if (to > mid.to)
          this.right.forEachLine(mid.to + 1, to, doc2, rightTop, rightOffset, f);
      }
    }
    replace(from, to, nodes) {
      let rightStart = this.left.length + this.break;
      if (to < rightStart)
        return this.balanced(this.left.replace(from, to, nodes), this.right);
      if (from > this.left.length)
        return this.balanced(this.left, this.right.replace(from - rightStart, to - rightStart, nodes));
      let result = [];
      if (from > 0)
        this.decomposeLeft(from, result);
      let left = result.length;
      for (let node of nodes)
        result.push(node);
      if (from > 0)
        mergeGaps(result, left - 1);
      if (to < this.length) {
        let right = result.length;
        this.decomposeRight(to, result);
        mergeGaps(result, right);
      }
      return HeightMap.of(result);
    }
    decomposeLeft(to, result) {
      let left = this.left.length;
      if (to <= left)
        return this.left.decomposeLeft(to, result);
      result.push(this.left);
      if (this.break) {
        left++;
        if (to >= left)
          result.push(null);
      }
      if (to > left)
        this.right.decomposeLeft(to - left, result);
    }
    decomposeRight(from, result) {
      let left = this.left.length, right = left + this.break;
      if (from >= right)
        return this.right.decomposeRight(from - right, result);
      if (from < left)
        this.left.decomposeRight(from, result);
      if (this.break && from < right)
        result.push(null);
      result.push(this.right);
    }
    balanced(left, right) {
      if (left.size > 2 * right.size || right.size > 2 * left.size)
        return HeightMap.of(this.break ? [left, null, right] : [left, right]);
      this.left = left;
      this.right = right;
      this.height = left.height + right.height;
      this.outdated = left.outdated || right.outdated;
      this.size = left.size + right.size;
      this.length = left.length + this.break + right.length;
      return this;
    }
    updateHeight(oracle, offset = 0, force = false, measured) {
      let {left, right} = this, rightStart = offset + left.length + this.break, rebalance = null;
      if (measured && measured.from <= offset + left.length && measured.more)
        rebalance = left = left.updateHeight(oracle, offset, force, measured);
      else
        left.updateHeight(oracle, offset, force);
      if (measured && measured.from <= rightStart + right.length && measured.more)
        rebalance = right = right.updateHeight(oracle, rightStart, force, measured);
      else
        right.updateHeight(oracle, rightStart, force);
      if (rebalance)
        return this.balanced(left, right);
      this.height = this.left.height + this.right.height;
      this.outdated = false;
      return this;
    }
    toString() {
      return this.left + (this.break ? " " : "-") + this.right;
    }
  };
  function mergeGaps(nodes, around) {
    let before, after;
    if (nodes[around] == null && (before = nodes[around - 1]) instanceof HeightMapGap && (after = nodes[around + 1]) instanceof HeightMapGap)
      nodes.splice(around - 1, 3, new HeightMapGap(before.length + 1 + after.length));
  }
  var relevantWidgetHeight = 5;
  var NodeBuilder = class {
    constructor(pos, oracle) {
      this.pos = pos;
      this.oracle = oracle;
      this.nodes = [];
      this.lineStart = -1;
      this.lineEnd = -1;
      this.covering = null;
      this.writtenTo = pos;
    }
    get isCovered() {
      return this.covering && this.nodes[this.nodes.length - 1] == this.covering;
    }
    span(_from, to) {
      if (this.lineStart > -1) {
        let end = Math.min(to, this.lineEnd), last = this.nodes[this.nodes.length - 1];
        if (last instanceof HeightMapText)
          last.length += end - this.pos;
        else if (end > this.pos || !this.isCovered)
          this.nodes.push(new HeightMapText(end - this.pos, -1));
        this.writtenTo = end;
        if (to > end) {
          this.nodes.push(null);
          this.writtenTo++;
          this.lineStart = -1;
        }
      }
      this.pos = to;
    }
    point(from, to, deco) {
      if (from < to || deco.heightRelevant) {
        let height = deco.widget ? deco.widget.estimatedHeight : 0;
        if (height < 0)
          height = this.oracle.lineHeight;
        let len = to - from;
        if (deco.block) {
          this.addBlock(new HeightMapBlock(len, height, deco.type));
        } else if (len || height >= relevantWidgetHeight) {
          this.addLineDeco(height, len);
        }
      } else if (to > from) {
        this.span(from, to);
      }
      if (this.lineEnd > -1 && this.lineEnd < this.pos)
        this.lineEnd = this.oracle.doc.lineAt(this.pos).to;
    }
    enterLine() {
      if (this.lineStart > -1)
        return;
      let {from, to} = this.oracle.doc.lineAt(this.pos);
      this.lineStart = from;
      this.lineEnd = to;
      if (this.writtenTo < from) {
        if (this.writtenTo < from - 1 || this.nodes[this.nodes.length - 1] == null)
          this.nodes.push(this.blankContent(this.writtenTo, from - 1));
        this.nodes.push(null);
      }
      if (this.pos > from)
        this.nodes.push(new HeightMapText(this.pos - from, -1));
      this.writtenTo = this.pos;
    }
    blankContent(from, to) {
      let gap = new HeightMapGap(to - from);
      if (this.oracle.doc.lineAt(from).to == to)
        gap.flags |= 4;
      return gap;
    }
    ensureLine() {
      this.enterLine();
      let last = this.nodes.length ? this.nodes[this.nodes.length - 1] : null;
      if (last instanceof HeightMapText)
        return last;
      let line = new HeightMapText(0, -1);
      this.nodes.push(line);
      return line;
    }
    addBlock(block) {
      this.enterLine();
      if (block.type == BlockType.WidgetAfter && !this.isCovered)
        this.ensureLine();
      this.nodes.push(block);
      this.writtenTo = this.pos = this.pos + block.length;
      if (block.type != BlockType.WidgetBefore)
        this.covering = block;
    }
    addLineDeco(height, length) {
      let line = this.ensureLine();
      line.length += length;
      line.collapsed += length;
      line.widgetHeight = Math.max(line.widgetHeight, height);
      this.writtenTo = this.pos = this.pos + length;
    }
    finish(from) {
      let last = this.nodes.length == 0 ? null : this.nodes[this.nodes.length - 1];
      if (this.lineStart > -1 && !(last instanceof HeightMapText) && !this.isCovered)
        this.nodes.push(new HeightMapText(0, -1));
      else if (this.writtenTo < this.pos || last == null)
        this.nodes.push(this.blankContent(this.writtenTo, this.pos));
      let pos = from;
      for (let node of this.nodes) {
        if (node instanceof HeightMapText)
          node.updateHeight(this.oracle, pos);
        pos += node ? node.length : 1;
      }
      return this.nodes;
    }
    static build(oracle, decorations2, from, to) {
      let builder = new NodeBuilder(from, oracle);
      RangeSet.spans(decorations2, from, to, builder, 0);
      return builder.finish(from);
    }
  };
  function heightRelevantDecoChanges(a, b, diff) {
    let comp = new DecorationComparator();
    RangeSet.compare(a, b, diff, comp, 0);
    return comp.changes;
  }
  var DecorationComparator = class {
    constructor() {
      this.changes = [];
    }
    compareRange() {
    }
    comparePoint(from, to, a, b) {
      if (from < to || a && a.heightRelevant || b && b.heightRelevant)
        addRange(from, to, this.changes, 5);
    }
  };
  function visiblePixelRange(dom, paddingTop) {
    let rect = dom.getBoundingClientRect();
    let doc2 = dom.ownerDocument, win = doc2.defaultView || window;
    let left = Math.max(0, rect.left), right = Math.min(win.innerWidth, rect.right);
    let top2 = Math.max(0, rect.top), bottom = Math.min(win.innerHeight, rect.bottom);
    for (let parent = dom.parentNode; parent && parent != doc2.body; ) {
      if (parent.nodeType == 1) {
        let elt2 = parent;
        let style = window.getComputedStyle(elt2);
        if ((elt2.scrollHeight > elt2.clientHeight || elt2.scrollWidth > elt2.clientWidth) && style.overflow != "visible") {
          let parentRect = elt2.getBoundingClientRect();
          left = Math.max(left, parentRect.left);
          right = Math.min(right, parentRect.right);
          top2 = Math.max(top2, parentRect.top);
          bottom = parent == dom.parentNode ? parentRect.bottom : Math.min(bottom, parentRect.bottom);
        }
        parent = style.position == "absolute" || style.position == "fixed" ? elt2.offsetParent : elt2.parentNode;
      } else if (parent.nodeType == 11) {
        parent = parent.host;
      } else {
        break;
      }
    }
    return {
      left: left - rect.left,
      right: Math.max(left, right) - rect.left,
      top: top2 - (rect.top + paddingTop),
      bottom: Math.max(top2, bottom) - (rect.top + paddingTop)
    };
  }
  function fullPixelRange(dom, paddingTop) {
    let rect = dom.getBoundingClientRect();
    return {
      left: 0,
      right: rect.right - rect.left,
      top: paddingTop,
      bottom: rect.bottom - (rect.top + paddingTop)
    };
  }
  var LineGap = class {
    constructor(from, to, size) {
      this.from = from;
      this.to = to;
      this.size = size;
    }
    static same(a, b) {
      if (a.length != b.length)
        return false;
      for (let i = 0; i < a.length; i++) {
        let gA = a[i], gB = b[i];
        if (gA.from != gB.from || gA.to != gB.to || gA.size != gB.size)
          return false;
      }
      return true;
    }
    draw(wrapping) {
      return Decoration.replace({widget: new LineGapWidget(this.size, wrapping)}).range(this.from, this.to);
    }
  };
  var LineGapWidget = class extends WidgetType {
    constructor(size, vertical) {
      super();
      this.size = size;
      this.vertical = vertical;
    }
    eq(other) {
      return other.size == this.size && other.vertical == this.vertical;
    }
    toDOM() {
      let elt2 = document.createElement("div");
      if (this.vertical) {
        elt2.style.height = this.size + "px";
      } else {
        elt2.style.width = this.size + "px";
        elt2.style.height = "2px";
        elt2.style.display = "inline-block";
      }
      return elt2;
    }
    get estimatedHeight() {
      return this.vertical ? this.size : -1;
    }
  };
  var ViewState = class {
    constructor(state) {
      this.state = state;
      this.pixelViewport = {left: 0, right: window.innerWidth, top: 0, bottom: 0};
      this.inView = true;
      this.paddingTop = 0;
      this.paddingBottom = 0;
      this.contentDOMWidth = 0;
      this.contentDOMHeight = 0;
      this.editorHeight = 0;
      this.editorWidth = 0;
      this.scaler = IdScaler;
      this.scrollTarget = null;
      this.printing = false;
      this.mustMeasureContent = true;
      this.defaultTextDirection = Direction.LTR;
      this.visibleRanges = [];
      this.mustEnforceCursorAssoc = false;
      let guessWrapping = state.facet(contentAttributes).some((v) => typeof v != "function" && v.class == "cm-lineWrapping");
      this.heightOracle = new HeightOracle(guessWrapping);
      this.stateDeco = state.facet(decorations).filter((d) => typeof d != "function");
      this.heightMap = HeightMap.empty().applyChanges(this.stateDeco, Text.empty, this.heightOracle.setDoc(state.doc), [new ChangedRange(0, 0, 0, state.doc.length)]);
      this.viewport = this.getViewport(0, null);
      this.updateViewportLines();
      this.updateForViewport();
      this.lineGaps = this.ensureLineGaps([]);
      this.lineGapDeco = Decoration.set(this.lineGaps.map((gap) => gap.draw(false)));
      this.computeVisibleRanges();
    }
    updateForViewport() {
      let viewports = [this.viewport], {main} = this.state.selection;
      for (let i = 0; i <= 1; i++) {
        let pos = i ? main.head : main.anchor;
        if (!viewports.some(({from, to}) => pos >= from && pos <= to)) {
          let {from, to} = this.lineBlockAt(pos);
          viewports.push(new Viewport(from, to));
        }
      }
      this.viewports = viewports.sort((a, b) => a.from - b.from);
      this.scaler = this.heightMap.height <= 7e6 ? IdScaler : new BigScaler(this.heightOracle.doc, this.heightMap, this.viewports);
    }
    updateViewportLines() {
      this.viewportLines = [];
      this.heightMap.forEachLine(this.viewport.from, this.viewport.to, this.state.doc, 0, 0, (block) => {
        this.viewportLines.push(this.scaler.scale == 1 ? block : scaleBlock(block, this.scaler));
      });
    }
    update(update, scrollTarget = null) {
      this.state = update.state;
      let prevDeco = this.stateDeco;
      this.stateDeco = this.state.facet(decorations).filter((d) => typeof d != "function");
      let contentChanges = update.changedRanges;
      let heightChanges = ChangedRange.extendWithRanges(contentChanges, heightRelevantDecoChanges(prevDeco, this.stateDeco, update ? update.changes : ChangeSet.empty(this.state.doc.length)));
      let prevHeight = this.heightMap.height;
      this.heightMap = this.heightMap.applyChanges(this.stateDeco, update.startState.doc, this.heightOracle.setDoc(this.state.doc), heightChanges);
      if (this.heightMap.height != prevHeight)
        update.flags |= 2;
      let viewport = heightChanges.length ? this.mapViewport(this.viewport, update.changes) : this.viewport;
      if (scrollTarget && (scrollTarget.range.head < viewport.from || scrollTarget.range.head > viewport.to) || !this.viewportIsAppropriate(viewport))
        viewport = this.getViewport(0, scrollTarget);
      let updateLines = !update.changes.empty || update.flags & 2 || viewport.from != this.viewport.from || viewport.to != this.viewport.to;
      this.viewport = viewport;
      this.updateForViewport();
      if (updateLines)
        this.updateViewportLines();
      if (this.lineGaps.length || this.viewport.to - this.viewport.from > 2e3 << 1)
        this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps, update.changes)));
      update.flags |= this.computeVisibleRanges();
      if (scrollTarget)
        this.scrollTarget = scrollTarget;
      if (!this.mustEnforceCursorAssoc && update.selectionSet && update.view.lineWrapping && update.state.selection.main.empty && update.state.selection.main.assoc && !update.state.facet(nativeSelectionHidden))
        this.mustEnforceCursorAssoc = true;
    }
    measure(view) {
      let dom = view.contentDOM, style = window.getComputedStyle(dom);
      let oracle = this.heightOracle;
      let whiteSpace = style.whiteSpace;
      this.defaultTextDirection = style.direction == "rtl" ? Direction.RTL : Direction.LTR;
      let refresh = this.heightOracle.mustRefreshForWrapping(whiteSpace);
      let measureContent = refresh || this.mustMeasureContent || this.contentDOMHeight != dom.clientHeight;
      this.contentDOMHeight = dom.clientHeight;
      this.mustMeasureContent = false;
      let result = 0, bias = 0;
      let paddingTop = parseInt(style.paddingTop) || 0, paddingBottom = parseInt(style.paddingBottom) || 0;
      if (this.paddingTop != paddingTop || this.paddingBottom != paddingBottom) {
        this.paddingTop = paddingTop;
        this.paddingBottom = paddingBottom;
        result |= 8 | 2;
      }
      if (this.editorWidth != view.scrollDOM.clientWidth) {
        if (oracle.lineWrapping)
          measureContent = true;
        this.editorWidth = view.scrollDOM.clientWidth;
        result |= 8;
      }
      let pixelViewport = (this.printing ? fullPixelRange : visiblePixelRange)(dom, this.paddingTop);
      let dTop = pixelViewport.top - this.pixelViewport.top, dBottom = pixelViewport.bottom - this.pixelViewport.bottom;
      this.pixelViewport = pixelViewport;
      let inView = this.pixelViewport.bottom > this.pixelViewport.top && this.pixelViewport.right > this.pixelViewport.left;
      if (inView != this.inView) {
        this.inView = inView;
        if (inView)
          measureContent = true;
      }
      if (!this.inView && !this.scrollTarget)
        return 0;
      let contentWidth = dom.clientWidth;
      if (this.contentDOMWidth != contentWidth || this.editorHeight != view.scrollDOM.clientHeight) {
        this.contentDOMWidth = contentWidth;
        this.editorHeight = view.scrollDOM.clientHeight;
        result |= 8;
      }
      if (measureContent) {
        let lineHeights = view.docView.measureVisibleLineHeights(this.viewport);
        if (oracle.mustRefreshForHeights(lineHeights))
          refresh = true;
        if (refresh || oracle.lineWrapping && Math.abs(contentWidth - this.contentDOMWidth) > oracle.charWidth) {
          let {lineHeight, charWidth} = view.docView.measureTextSize();
          refresh = lineHeight > 0 && oracle.refresh(whiteSpace, lineHeight, charWidth, contentWidth / charWidth, lineHeights);
          if (refresh) {
            view.docView.minWidth = 0;
            result |= 8;
          }
        }
        if (dTop > 0 && dBottom > 0)
          bias = Math.max(dTop, dBottom);
        else if (dTop < 0 && dBottom < 0)
          bias = Math.min(dTop, dBottom);
        oracle.heightChanged = false;
        for (let vp of this.viewports) {
          let heights = vp.from == this.viewport.from ? lineHeights : view.docView.measureVisibleLineHeights(vp);
          this.heightMap = (refresh ? HeightMap.empty().applyChanges(this.stateDeco, Text.empty, this.heightOracle, [new ChangedRange(0, 0, 0, view.state.doc.length)]) : this.heightMap).updateHeight(oracle, 0, refresh, new MeasuredHeights(vp.from, heights));
        }
        if (oracle.heightChanged)
          result |= 2;
      }
      let viewportChange = !this.viewportIsAppropriate(this.viewport, bias) || this.scrollTarget && (this.scrollTarget.range.head < this.viewport.from || this.scrollTarget.range.head > this.viewport.to);
      if (viewportChange)
        this.viewport = this.getViewport(bias, this.scrollTarget);
      this.updateForViewport();
      if (result & 2 || viewportChange)
        this.updateViewportLines();
      if (this.lineGaps.length || this.viewport.to - this.viewport.from > 2e3 << 1)
        this.updateLineGaps(this.ensureLineGaps(refresh ? [] : this.lineGaps, view));
      result |= this.computeVisibleRanges();
      if (this.mustEnforceCursorAssoc) {
        this.mustEnforceCursorAssoc = false;
        view.docView.enforceCursorAssoc();
      }
      return result;
    }
    get visibleTop() {
      return this.scaler.fromDOM(this.pixelViewport.top);
    }
    get visibleBottom() {
      return this.scaler.fromDOM(this.pixelViewport.bottom);
    }
    getViewport(bias, scrollTarget) {
      let marginTop = 0.5 - Math.max(-0.5, Math.min(0.5, bias / 1e3 / 2));
      let map = this.heightMap, doc2 = this.state.doc, {visibleTop, visibleBottom} = this;
      let viewport = new Viewport(map.lineAt(visibleTop - marginTop * 1e3, QueryType.ByHeight, doc2, 0, 0).from, map.lineAt(visibleBottom + (1 - marginTop) * 1e3, QueryType.ByHeight, doc2, 0, 0).to);
      if (scrollTarget) {
        let {head} = scrollTarget.range;
        if (head < viewport.from || head > viewport.to) {
          let viewHeight = Math.min(this.editorHeight, this.pixelViewport.bottom - this.pixelViewport.top);
          let block = map.lineAt(head, QueryType.ByPos, doc2, 0, 0), topPos;
          if (scrollTarget.y == "center")
            topPos = (block.top + block.bottom) / 2 - viewHeight / 2;
          else if (scrollTarget.y == "start" || scrollTarget.y == "nearest" && head < viewport.from)
            topPos = block.top;
          else
            topPos = block.bottom - viewHeight;
          viewport = new Viewport(map.lineAt(topPos - 1e3 / 2, QueryType.ByHeight, doc2, 0, 0).from, map.lineAt(topPos + viewHeight + 1e3 / 2, QueryType.ByHeight, doc2, 0, 0).to);
        }
      }
      return viewport;
    }
    mapViewport(viewport, changes) {
      let from = changes.mapPos(viewport.from, -1), to = changes.mapPos(viewport.to, 1);
      return new Viewport(this.heightMap.lineAt(from, QueryType.ByPos, this.state.doc, 0, 0).from, this.heightMap.lineAt(to, QueryType.ByPos, this.state.doc, 0, 0).to);
    }
    viewportIsAppropriate({from, to}, bias = 0) {
      if (!this.inView)
        return true;
      let {top: top2} = this.heightMap.lineAt(from, QueryType.ByPos, this.state.doc, 0, 0);
      let {bottom} = this.heightMap.lineAt(to, QueryType.ByPos, this.state.doc, 0, 0);
      let {visibleTop, visibleBottom} = this;
      return (from == 0 || top2 <= visibleTop - Math.max(10, Math.min(-bias, 250))) && (to == this.state.doc.length || bottom >= visibleBottom + Math.max(10, Math.min(bias, 250))) && (top2 > visibleTop - 2 * 1e3 && bottom < visibleBottom + 2 * 1e3);
    }
    mapLineGaps(gaps, changes) {
      if (!gaps.length || changes.empty)
        return gaps;
      let mapped = [];
      for (let gap of gaps)
        if (!changes.touchesRange(gap.from, gap.to))
          mapped.push(new LineGap(changes.mapPos(gap.from), changes.mapPos(gap.to), gap.size));
      return mapped;
    }
    ensureLineGaps(current, mayMeasure) {
      let wrapping = this.heightOracle.lineWrapping;
      let margin = wrapping ? 1e4 : 2e3, halfMargin = margin >> 1, doubleMargin = margin << 1;
      if (this.defaultTextDirection != Direction.LTR && !wrapping)
        return [];
      let gaps = [];
      let addGap = (from, to, line, structure) => {
        if (to - from < halfMargin)
          return;
        let sel = this.state.selection.main, avoid = [sel.from];
        if (!sel.empty)
          avoid.push(sel.to);
        for (let pos of avoid) {
          if (pos > from && pos < to) {
            addGap(from, pos - 10, line, structure);
            addGap(pos + 10, to, line, structure);
            return;
          }
        }
        let gap = find(current, (gap2) => gap2.from >= line.from && gap2.to <= line.to && Math.abs(gap2.from - from) < halfMargin && Math.abs(gap2.to - to) < halfMargin && !avoid.some((pos) => gap2.from < pos && gap2.to > pos));
        if (!gap) {
          if (to < line.to && mayMeasure && wrapping && mayMeasure.visibleRanges.some((r) => r.from <= to && r.to >= to)) {
            let lineStart = mayMeasure.moveToLineBoundary(EditorSelection.cursor(to), false, true).head;
            if (lineStart > from)
              to = lineStart;
          }
          gap = new LineGap(from, to, this.gapSize(line, from, to, structure));
        }
        gaps.push(gap);
      };
      for (let line of this.viewportLines) {
        if (line.length < doubleMargin)
          continue;
        let structure = lineStructure(line.from, line.to, this.stateDeco);
        if (structure.total < doubleMargin)
          continue;
        let target = this.scrollTarget ? this.scrollTarget.range.head : null;
        let viewFrom, viewTo;
        if (wrapping) {
          let marginHeight = margin / this.heightOracle.lineLength * this.heightOracle.lineHeight;
          let top2, bot;
          if (target != null) {
            let targetFrac = findFraction(structure, target);
            let spaceFrac = ((this.visibleBottom - this.visibleTop) / 2 + marginHeight) / line.height;
            top2 = targetFrac - spaceFrac;
            bot = targetFrac + spaceFrac;
          } else {
            top2 = (this.visibleTop - line.top - marginHeight) / line.height;
            bot = (this.visibleBottom - line.top + marginHeight) / line.height;
          }
          viewFrom = findPosition(structure, top2);
          viewTo = findPosition(structure, bot);
        } else {
          let totalWidth = structure.total * this.heightOracle.charWidth;
          let marginWidth = margin * this.heightOracle.charWidth;
          let left, right;
          if (target != null) {
            let targetFrac = findFraction(structure, target);
            let spaceFrac = ((this.pixelViewport.right - this.pixelViewport.left) / 2 + marginWidth) / totalWidth;
            left = targetFrac - spaceFrac;
            right = targetFrac + spaceFrac;
          } else {
            left = (this.pixelViewport.left - marginWidth) / totalWidth;
            right = (this.pixelViewport.right + marginWidth) / totalWidth;
          }
          viewFrom = findPosition(structure, left);
          viewTo = findPosition(structure, right);
        }
        if (viewFrom > line.from)
          addGap(line.from, viewFrom, line, structure);
        if (viewTo < line.to)
          addGap(viewTo, line.to, line, structure);
      }
      return gaps;
    }
    gapSize(line, from, to, structure) {
      let fraction = findFraction(structure, to) - findFraction(structure, from);
      if (this.heightOracle.lineWrapping) {
        return line.height * fraction;
      } else {
        return structure.total * this.heightOracle.charWidth * fraction;
      }
    }
    updateLineGaps(gaps) {
      if (!LineGap.same(gaps, this.lineGaps)) {
        this.lineGaps = gaps;
        this.lineGapDeco = Decoration.set(gaps.map((gap) => gap.draw(this.heightOracle.lineWrapping)));
      }
    }
    computeVisibleRanges() {
      let deco = this.stateDeco;
      if (this.lineGaps.length)
        deco = deco.concat(this.lineGapDeco);
      let ranges = [];
      RangeSet.spans(deco, this.viewport.from, this.viewport.to, {
        span(from, to) {
          ranges.push({from, to});
        },
        point() {
        }
      }, 20);
      let changed = ranges.length != this.visibleRanges.length || this.visibleRanges.some((r, i) => r.from != ranges[i].from || r.to != ranges[i].to);
      this.visibleRanges = ranges;
      return changed ? 4 : 0;
    }
    lineBlockAt(pos) {
      return pos >= this.viewport.from && pos <= this.viewport.to && this.viewportLines.find((b) => b.from <= pos && b.to >= pos) || scaleBlock(this.heightMap.lineAt(pos, QueryType.ByPos, this.state.doc, 0, 0), this.scaler);
    }
    lineBlockAtHeight(height) {
      return scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(height), QueryType.ByHeight, this.state.doc, 0, 0), this.scaler);
    }
    elementAtHeight(height) {
      return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(height), this.state.doc, 0, 0), this.scaler);
    }
    get docHeight() {
      return this.scaler.toDOM(this.heightMap.height);
    }
    get contentHeight() {
      return this.docHeight + this.paddingTop + this.paddingBottom;
    }
  };
  var Viewport = class {
    constructor(from, to) {
      this.from = from;
      this.to = to;
    }
  };
  function lineStructure(from, to, stateDeco) {
    let ranges = [], pos = from, total = 0;
    RangeSet.spans(stateDeco, from, to, {
      span() {
      },
      point(from2, to2) {
        if (from2 > pos) {
          ranges.push({from: pos, to: from2});
          total += from2 - pos;
        }
        pos = to2;
      }
    }, 20);
    if (pos < to) {
      ranges.push({from: pos, to});
      total += to - pos;
    }
    return {total, ranges};
  }
  function findPosition({total, ranges}, ratio) {
    if (ratio <= 0)
      return ranges[0].from;
    if (ratio >= 1)
      return ranges[ranges.length - 1].to;
    let dist = Math.floor(total * ratio);
    for (let i = 0; ; i++) {
      let {from, to} = ranges[i], size = to - from;
      if (dist <= size)
        return from + dist;
      dist -= size;
    }
  }
  function findFraction(structure, pos) {
    let counted = 0;
    for (let {from, to} of structure.ranges) {
      if (pos <= to) {
        counted += pos - from;
        break;
      }
      counted += to - from;
    }
    return counted / structure.total;
  }
  function find(array, f) {
    for (let val of array)
      if (f(val))
        return val;
    return void 0;
  }
  var IdScaler = {
    toDOM(n) {
      return n;
    },
    fromDOM(n) {
      return n;
    },
    scale: 1
  };
  var BigScaler = class {
    constructor(doc2, heightMap, viewports) {
      let vpHeight = 0, base2 = 0, domBase = 0;
      this.viewports = viewports.map(({from, to}) => {
        let top2 = heightMap.lineAt(from, QueryType.ByPos, doc2, 0, 0).top;
        let bottom = heightMap.lineAt(to, QueryType.ByPos, doc2, 0, 0).bottom;
        vpHeight += bottom - top2;
        return {from, to, top: top2, bottom, domTop: 0, domBottom: 0};
      });
      this.scale = (7e6 - vpHeight) / (heightMap.height - vpHeight);
      for (let obj of this.viewports) {
        obj.domTop = domBase + (obj.top - base2) * this.scale;
        domBase = obj.domBottom = obj.domTop + (obj.bottom - obj.top);
        base2 = obj.bottom;
      }
    }
    toDOM(n) {
      for (let i = 0, base2 = 0, domBase = 0; ; i++) {
        let vp = i < this.viewports.length ? this.viewports[i] : null;
        if (!vp || n < vp.top)
          return domBase + (n - base2) * this.scale;
        if (n <= vp.bottom)
          return vp.domTop + (n - vp.top);
        base2 = vp.bottom;
        domBase = vp.domBottom;
      }
    }
    fromDOM(n) {
      for (let i = 0, base2 = 0, domBase = 0; ; i++) {
        let vp = i < this.viewports.length ? this.viewports[i] : null;
        if (!vp || n < vp.domTop)
          return base2 + (n - domBase) / this.scale;
        if (n <= vp.domBottom)
          return vp.top + (n - vp.domTop);
        base2 = vp.bottom;
        domBase = vp.domBottom;
      }
    }
  };
  function scaleBlock(block, scaler) {
    if (scaler.scale == 1)
      return block;
    let bTop = scaler.toDOM(block.top), bBottom = scaler.toDOM(block.bottom);
    return new BlockInfo(block.from, block.length, bTop, bBottom - bTop, Array.isArray(block.type) ? block.type.map((b) => scaleBlock(b, scaler)) : block.type);
  }
  var theme = /* @__PURE__ */ Facet.define({combine: (strs) => strs.join(" ")});
  var darkTheme = /* @__PURE__ */ Facet.define({combine: (values2) => values2.indexOf(true) > -1});
  var baseThemeID = /* @__PURE__ */ StyleModule.newName();
  var baseLightID = /* @__PURE__ */ StyleModule.newName();
  var baseDarkID = /* @__PURE__ */ StyleModule.newName();
  var lightDarkIDs = {"&light": "." + baseLightID, "&dark": "." + baseDarkID};
  function buildTheme(main, spec, scopes) {
    return new StyleModule(spec, {
      finish(sel) {
        return /&/.test(sel) ? sel.replace(/&\w*/, (m) => {
          if (m == "&")
            return main;
          if (!scopes || !scopes[m])
            throw new RangeError(`Unsupported selector: ${m}`);
          return scopes[m];
        }) : main + " " + sel;
      }
    });
  }
  var baseTheme$1 = /* @__PURE__ */ buildTheme("." + baseThemeID, {
    "&.cm-editor": {
      position: "relative !important",
      boxSizing: "border-box",
      "&.cm-focused": {
        outline: "1px dotted #212121"
      },
      display: "flex !important",
      flexDirection: "column"
    },
    ".cm-scroller": {
      display: "flex !important",
      alignItems: "flex-start !important",
      fontFamily: "monospace",
      lineHeight: 1.4,
      height: "100%",
      overflowX: "auto",
      position: "relative",
      zIndex: 0
    },
    ".cm-content": {
      margin: 0,
      flexGrow: 2,
      flexShrink: 0,
      minHeight: "100%",
      display: "block",
      whiteSpace: "pre",
      wordWrap: "normal",
      boxSizing: "border-box",
      padding: "4px 0",
      outline: "none",
      "&[contenteditable=true]": {
        WebkitUserModify: "read-write-plaintext-only"
      }
    },
    ".cm-lineWrapping": {
      whiteSpace_fallback: "pre-wrap",
      whiteSpace: "break-spaces",
      wordBreak: "break-word",
      overflowWrap: "anywhere",
      flexShrink: 1
    },
    "&light .cm-content": {caretColor: "black"},
    "&dark .cm-content": {caretColor: "white"},
    ".cm-line": {
      display: "block",
      padding: "0 2px 0 4px"
    },
    ".cm-selectionLayer": {
      zIndex: -1,
      contain: "size style"
    },
    ".cm-selectionBackground": {
      position: "absolute"
    },
    "&light .cm-selectionBackground": {
      background: "#d9d9d9"
    },
    "&dark .cm-selectionBackground": {
      background: "#222"
    },
    "&light.cm-focused .cm-selectionBackground": {
      background: "#d7d4f0"
    },
    "&dark.cm-focused .cm-selectionBackground": {
      background: "#233"
    },
    ".cm-cursorLayer": {
      zIndex: 100,
      contain: "size style",
      pointerEvents: "none"
    },
    "&.cm-focused .cm-cursorLayer": {
      animation: "steps(1) cm-blink 1.2s infinite"
    },
    "@keyframes cm-blink": {"0%": {}, "50%": {opacity: 0}, "100%": {}},
    "@keyframes cm-blink2": {"0%": {}, "50%": {opacity: 0}, "100%": {}},
    ".cm-cursor, .cm-dropCursor": {
      position: "absolute",
      borderLeft: "1.2px solid black",
      marginLeft: "-0.6px",
      pointerEvents: "none"
    },
    ".cm-cursor": {
      display: "none"
    },
    "&dark .cm-cursor": {
      borderLeftColor: "#444"
    },
    "&.cm-focused .cm-cursor": {
      display: "block"
    },
    "&light .cm-activeLine": {backgroundColor: "#cceeff44"},
    "&dark .cm-activeLine": {backgroundColor: "#99eeff33"},
    "&light .cm-specialChar": {color: "red"},
    "&dark .cm-specialChar": {color: "#f78"},
    ".cm-gutters": {
      flexShrink: 0,
      display: "flex",
      height: "100%",
      boxSizing: "border-box",
      left: 0,
      zIndex: 200
    },
    "&light .cm-gutters": {
      backgroundColor: "#f5f5f5",
      color: "#6c6c6c",
      borderRight: "1px solid #ddd"
    },
    "&dark .cm-gutters": {
      backgroundColor: "#333338",
      color: "#ccc"
    },
    ".cm-gutter": {
      display: "flex !important",
      flexDirection: "column",
      flexShrink: 0,
      boxSizing: "border-box",
      minHeight: "100%",
      overflow: "hidden"
    },
    ".cm-gutterElement": {
      boxSizing: "border-box"
    },
    ".cm-lineNumbers .cm-gutterElement": {
      padding: "0 3px 0 5px",
      minWidth: "20px",
      textAlign: "right",
      whiteSpace: "nowrap"
    },
    "&light .cm-activeLineGutter": {
      backgroundColor: "#e2f2ff"
    },
    "&dark .cm-activeLineGutter": {
      backgroundColor: "#222227"
    },
    ".cm-panels": {
      boxSizing: "border-box",
      position: "sticky",
      left: 0,
      right: 0
    },
    "&light .cm-panels": {
      backgroundColor: "#f5f5f5",
      color: "black"
    },
    "&light .cm-panels-top": {
      borderBottom: "1px solid #ddd"
    },
    "&light .cm-panels-bottom": {
      borderTop: "1px solid #ddd"
    },
    "&dark .cm-panels": {
      backgroundColor: "#333338",
      color: "white"
    },
    ".cm-tab": {
      display: "inline-block",
      overflow: "hidden",
      verticalAlign: "bottom"
    },
    ".cm-widgetBuffer": {
      verticalAlign: "text-top",
      height: "1em",
      width: 0,
      display: "inline"
    },
    ".cm-placeholder": {
      color: "#888",
      display: "inline-block",
      verticalAlign: "top"
    },
    ".cm-button": {
      verticalAlign: "middle",
      color: "inherit",
      fontSize: "70%",
      padding: ".2em 1em",
      borderRadius: "1px"
    },
    "&light .cm-button": {
      backgroundImage: "linear-gradient(#eff1f5, #d9d9df)",
      border: "1px solid #888",
      "&:active": {
        backgroundImage: "linear-gradient(#b4b4b4, #d0d3d6)"
      }
    },
    "&dark .cm-button": {
      backgroundImage: "linear-gradient(#393939, #111)",
      border: "1px solid #888",
      "&:active": {
        backgroundImage: "linear-gradient(#111, #333)"
      }
    },
    ".cm-textfield": {
      verticalAlign: "middle",
      color: "inherit",
      fontSize: "70%",
      border: "1px solid silver",
      padding: ".2em .5em"
    },
    "&light .cm-textfield": {
      backgroundColor: "white"
    },
    "&dark .cm-textfield": {
      border: "1px solid #555",
      backgroundColor: "inherit"
    }
  }, lightDarkIDs);
  var DOMChange = class {
    constructor(view, start, end, typeOver) {
      this.typeOver = typeOver;
      this.bounds = null;
      this.text = "";
      let {impreciseHead: iHead, impreciseAnchor: iAnchor} = view.docView;
      if (view.state.readOnly && start > -1) {
        this.newSel = null;
      } else if (start > -1 && (this.bounds = view.docView.domBoundsAround(start, end, 0))) {
        let selPoints = iHead || iAnchor ? [] : selectionPoints(view);
        let reader = new DOMReader(selPoints, view.state);
        reader.readRange(this.bounds.startDOM, this.bounds.endDOM);
        this.text = reader.text;
        this.newSel = selectionFromPoints(selPoints, this.bounds.from);
      } else {
        let domSel = view.observer.selectionRange;
        let head = iHead && iHead.node == domSel.focusNode && iHead.offset == domSel.focusOffset || !contains(view.contentDOM, domSel.focusNode) ? view.state.selection.main.head : view.docView.posFromDOM(domSel.focusNode, domSel.focusOffset);
        let anchor = iAnchor && iAnchor.node == domSel.anchorNode && iAnchor.offset == domSel.anchorOffset || !contains(view.contentDOM, domSel.anchorNode) ? view.state.selection.main.anchor : view.docView.posFromDOM(domSel.anchorNode, domSel.anchorOffset);
        this.newSel = EditorSelection.single(anchor, head);
      }
    }
  };
  function applyDOMChange(view, domChange) {
    let change;
    let {newSel} = domChange, sel = view.state.selection.main;
    if (domChange.bounds) {
      let {from, to} = domChange.bounds;
      let preferredPos = sel.from, preferredSide = null;
      if (view.inputState.lastKeyCode === 8 && view.inputState.lastKeyTime > Date.now() - 100 || browser.android && domChange.text.length < to - from) {
        preferredPos = sel.to;
        preferredSide = "end";
      }
      let diff = findDiff(view.state.doc.sliceString(from, to, LineBreakPlaceholder), domChange.text, preferredPos - from, preferredSide);
      if (diff) {
        if (browser.chrome && view.inputState.lastKeyCode == 13 && diff.toB == diff.from + 2 && domChange.text.slice(diff.from, diff.toB) == LineBreakPlaceholder + LineBreakPlaceholder)
          diff.toB--;
        change = {
          from: from + diff.from,
          to: from + diff.toA,
          insert: Text.of(domChange.text.slice(diff.from, diff.toB).split(LineBreakPlaceholder))
        };
      }
    } else if (newSel && (!view.hasFocus || !view.state.facet(editable) || newSel.main.eq(sel))) {
      newSel = null;
    }
    if (!change && !newSel)
      return false;
    if (!change && domChange.typeOver && !sel.empty && newSel && newSel.main.empty) {
      change = {from: sel.from, to: sel.to, insert: view.state.doc.slice(sel.from, sel.to)};
    } else if (change && change.from >= sel.from && change.to <= sel.to && (change.from != sel.from || change.to != sel.to) && sel.to - sel.from - (change.to - change.from) <= 4) {
      change = {
        from: sel.from,
        to: sel.to,
        insert: view.state.doc.slice(sel.from, change.from).append(change.insert).append(view.state.doc.slice(change.to, sel.to))
      };
    } else if ((browser.mac || browser.android) && change && change.from == change.to && change.from == sel.head - 1 && /^\. ?$/.test(change.insert.toString())) {
      if (newSel && change.insert.length == 2)
        newSel = EditorSelection.single(newSel.main.anchor - 1, newSel.main.head - 1);
      change = {from: sel.from, to: sel.to, insert: Text.of([" "])};
    } else if (browser.chrome && change && change.from == change.to && change.from == sel.head && change.insert.toString() == "\n " && view.lineWrapping) {
      if (newSel)
        newSel = EditorSelection.single(newSel.main.anchor - 1, newSel.main.head - 1);
      change = {from: sel.from, to: sel.to, insert: Text.of([" "])};
    }
    if (change) {
      let startState = view.state;
      if (browser.ios && view.inputState.flushIOSKey(view))
        return true;
      if (browser.android && (change.from == sel.from && change.to == sel.to && change.insert.length == 1 && change.insert.lines == 2 && dispatchKey(view.contentDOM, "Enter", 13) || change.from == sel.from - 1 && change.to == sel.to && change.insert.length == 0 && dispatchKey(view.contentDOM, "Backspace", 8) || change.from == sel.from && change.to == sel.to + 1 && change.insert.length == 0 && dispatchKey(view.contentDOM, "Delete", 46)))
        return true;
      let text = change.insert.toString();
      if (view.state.facet(inputHandler).some((h) => h(view, change.from, change.to, text)))
        return true;
      if (view.inputState.composing >= 0)
        view.inputState.composing++;
      let tr;
      if (change.from >= sel.from && change.to <= sel.to && change.to - change.from >= (sel.to - sel.from) / 3 && (!newSel || newSel.main.empty && newSel.main.from == change.from + change.insert.length) && view.inputState.composing < 0) {
        let before = sel.from < change.from ? startState.sliceDoc(sel.from, change.from) : "";
        let after = sel.to > change.to ? startState.sliceDoc(change.to, sel.to) : "";
        tr = startState.replaceSelection(view.state.toText(before + change.insert.sliceString(0, void 0, view.state.lineBreak) + after));
      } else {
        let changes = startState.changes(change);
        let mainSel = newSel && !startState.selection.main.eq(newSel.main) && newSel.main.to <= changes.newLength ? newSel.main : void 0;
        if (startState.selection.ranges.length > 1 && view.inputState.composing >= 0 && change.to <= sel.to && change.to >= sel.to - 10) {
          let replaced = view.state.sliceDoc(change.from, change.to);
          let compositionRange = compositionSurroundingNode(view) || view.state.doc.lineAt(sel.head);
          let offset = sel.to - change.to, size = sel.to - sel.from;
          tr = startState.changeByRange((range) => {
            if (range.from == sel.from && range.to == sel.to)
              return {changes, range: mainSel || range.map(changes)};
            let to = range.to - offset, from = to - replaced.length;
            if (range.to - range.from != size || view.state.sliceDoc(from, to) != replaced || compositionRange && range.to >= compositionRange.from && range.from <= compositionRange.to)
              return {range};
            let rangeChanges = startState.changes({from, to, insert: change.insert}), selOff = range.to - sel.to;
            return {
              changes: rangeChanges,
              range: !mainSel ? range.map(rangeChanges) : EditorSelection.range(Math.max(0, mainSel.anchor + selOff), Math.max(0, mainSel.head + selOff))
            };
          });
        } else {
          tr = {
            changes,
            selection: mainSel && startState.selection.replaceRange(mainSel)
          };
        }
      }
      let userEvent = "input.type";
      if (view.composing) {
        userEvent += ".compose";
        if (view.inputState.compositionFirstChange) {
          userEvent += ".start";
          view.inputState.compositionFirstChange = false;
        }
      }
      view.dispatch(tr, {scrollIntoView: true, userEvent});
      return true;
    } else if (newSel && !newSel.main.eq(sel)) {
      let scrollIntoView3 = false, userEvent = "select";
      if (view.inputState.lastSelectionTime > Date.now() - 50) {
        if (view.inputState.lastSelectionOrigin == "select")
          scrollIntoView3 = true;
        userEvent = view.inputState.lastSelectionOrigin;
      }
      view.dispatch({selection: newSel, scrollIntoView: scrollIntoView3, userEvent});
      return true;
    } else {
      return false;
    }
  }
  function findDiff(a, b, preferredPos, preferredSide) {
    let minLen = Math.min(a.length, b.length);
    let from = 0;
    while (from < minLen && a.charCodeAt(from) == b.charCodeAt(from))
      from++;
    if (from == minLen && a.length == b.length)
      return null;
    let toA = a.length, toB = b.length;
    while (toA > 0 && toB > 0 && a.charCodeAt(toA - 1) == b.charCodeAt(toB - 1)) {
      toA--;
      toB--;
    }
    if (preferredSide == "end") {
      let adjust = Math.max(0, from - Math.min(toA, toB));
      preferredPos -= toA + adjust - from;
    }
    if (toA < from && a.length < b.length) {
      let move = preferredPos <= from && preferredPos >= toA ? from - preferredPos : 0;
      from -= move;
      toB = from + (toB - toA);
      toA = from;
    } else if (toB < from) {
      let move = preferredPos <= from && preferredPos >= toB ? from - preferredPos : 0;
      from -= move;
      toA = from + (toA - toB);
      toB = from;
    }
    return {from, toA, toB};
  }
  function selectionPoints(view) {
    let result = [];
    if (view.root.activeElement != view.contentDOM)
      return result;
    let {anchorNode, anchorOffset, focusNode, focusOffset} = view.observer.selectionRange;
    if (anchorNode) {
      result.push(new DOMPoint(anchorNode, anchorOffset));
      if (focusNode != anchorNode || focusOffset != anchorOffset)
        result.push(new DOMPoint(focusNode, focusOffset));
    }
    return result;
  }
  function selectionFromPoints(points, base2) {
    if (points.length == 0)
      return null;
    let anchor = points[0].pos, head = points.length == 2 ? points[1].pos : anchor;
    return anchor > -1 && head > -1 ? EditorSelection.single(anchor + base2, head + base2) : null;
  }
  var observeOptions = {
    childList: true,
    characterData: true,
    subtree: true,
    attributes: true,
    characterDataOldValue: true
  };
  var useCharData = browser.ie && browser.ie_version <= 11;
  var DOMObserver = class {
    constructor(view) {
      this.view = view;
      this.active = false;
      this.selectionRange = new DOMSelectionState();
      this.selectionChanged = false;
      this.delayedFlush = -1;
      this.resizeTimeout = -1;
      this.queue = [];
      this.delayedAndroidKey = null;
      this.flushingAndroidKey = -1;
      this.lastChange = 0;
      this.scrollTargets = [];
      this.intersection = null;
      this.resize = null;
      this.intersecting = false;
      this.gapIntersection = null;
      this.gaps = [];
      this.parentCheck = -1;
      this.dom = view.contentDOM;
      this.observer = new MutationObserver((mutations) => {
        for (let mut of mutations)
          this.queue.push(mut);
        if ((browser.ie && browser.ie_version <= 11 || browser.ios && view.composing) && mutations.some((m) => m.type == "childList" && m.removedNodes.length || m.type == "characterData" && m.oldValue.length > m.target.nodeValue.length))
          this.flushSoon();
        else
          this.flush();
      });
      if (useCharData)
        this.onCharData = (event) => {
          this.queue.push({
            target: event.target,
            type: "characterData",
            oldValue: event.prevValue
          });
          this.flushSoon();
        };
      this.onSelectionChange = this.onSelectionChange.bind(this);
      this.onResize = this.onResize.bind(this);
      this.onPrint = this.onPrint.bind(this);
      this.onScroll = this.onScroll.bind(this);
      if (typeof ResizeObserver == "function") {
        this.resize = new ResizeObserver(() => {
          var _a2;
          if (((_a2 = this.view.docView) === null || _a2 === void 0 ? void 0 : _a2.lastUpdate) < Date.now() - 75)
            this.onResize();
        });
        this.resize.observe(view.scrollDOM);
      }
      this.addWindowListeners(this.win = view.win);
      this.start();
      if (typeof IntersectionObserver == "function") {
        this.intersection = new IntersectionObserver((entries) => {
          if (this.parentCheck < 0)
            this.parentCheck = setTimeout(this.listenForScroll.bind(this), 1e3);
          if (entries.length > 0 && entries[entries.length - 1].intersectionRatio > 0 != this.intersecting) {
            this.intersecting = !this.intersecting;
            if (this.intersecting != this.view.inView)
              this.onScrollChanged(document.createEvent("Event"));
          }
        }, {});
        this.intersection.observe(this.dom);
        this.gapIntersection = new IntersectionObserver((entries) => {
          if (entries.length > 0 && entries[entries.length - 1].intersectionRatio > 0)
            this.onScrollChanged(document.createEvent("Event"));
        }, {});
      }
      this.listenForScroll();
      this.readSelectionRange();
    }
    onScrollChanged(e) {
      this.view.inputState.runScrollHandlers(this.view, e);
      if (this.intersecting)
        this.view.measure();
    }
    onScroll(e) {
      if (this.intersecting)
        this.flush(false);
      this.onScrollChanged(e);
    }
    onResize() {
      if (this.resizeTimeout < 0)
        this.resizeTimeout = setTimeout(() => {
          this.resizeTimeout = -1;
          this.view.requestMeasure();
        }, 50);
    }
    onPrint() {
      this.view.viewState.printing = true;
      this.view.measure();
      setTimeout(() => {
        this.view.viewState.printing = false;
        this.view.requestMeasure();
      }, 500);
    }
    updateGaps(gaps) {
      if (this.gapIntersection && (gaps.length != this.gaps.length || this.gaps.some((g, i) => g != gaps[i]))) {
        this.gapIntersection.disconnect();
        for (let gap of gaps)
          this.gapIntersection.observe(gap);
        this.gaps = gaps;
      }
    }
    onSelectionChange(event) {
      let wasChanged = this.selectionChanged;
      if (!this.readSelectionRange() || this.delayedAndroidKey)
        return;
      let {view} = this, sel = this.selectionRange;
      if (view.state.facet(editable) ? view.root.activeElement != this.dom : !hasSelection(view.dom, sel))
        return;
      let context = sel.anchorNode && view.docView.nearest(sel.anchorNode);
      if (context && context.ignoreEvent(event)) {
        if (!wasChanged)
          this.selectionChanged = false;
        return;
      }
      if ((browser.ie && browser.ie_version <= 11 || browser.android && browser.chrome) && !view.state.selection.main.empty && sel.focusNode && isEquivalentPosition(sel.focusNode, sel.focusOffset, sel.anchorNode, sel.anchorOffset))
        this.flushSoon();
      else
        this.flush(false);
    }
    readSelectionRange() {
      let {view} = this;
      let range = browser.safari && view.root.nodeType == 11 && deepActiveElement(this.dom.ownerDocument) == this.dom && safariSelectionRangeHack(this.view) || getSelection(view.root);
      if (!range || this.selectionRange.eq(range))
        return false;
      let local = hasSelection(this.dom, range);
      if (local && !this.selectionChanged && view.inputState.lastFocusTime > Date.now() - 200 && view.inputState.lastTouchTime < Date.now() - 300 && atElementStart(this.dom, range)) {
        this.view.inputState.lastFocusTime = 0;
        view.docView.updateSelection();
        return false;
      }
      this.selectionRange.setRange(range);
      if (local)
        this.selectionChanged = true;
      return true;
    }
    setSelectionRange(anchor, head) {
      this.selectionRange.set(anchor.node, anchor.offset, head.node, head.offset);
      this.selectionChanged = false;
    }
    clearSelectionRange() {
      this.selectionRange.set(null, 0, null, 0);
    }
    listenForScroll() {
      this.parentCheck = -1;
      let i = 0, changed = null;
      for (let dom = this.dom; dom; ) {
        if (dom.nodeType == 1) {
          if (!changed && i < this.scrollTargets.length && this.scrollTargets[i] == dom)
            i++;
          else if (!changed)
            changed = this.scrollTargets.slice(0, i);
          if (changed)
            changed.push(dom);
          dom = dom.assignedSlot || dom.parentNode;
        } else if (dom.nodeType == 11) {
          dom = dom.host;
        } else {
          break;
        }
      }
      if (i < this.scrollTargets.length && !changed)
        changed = this.scrollTargets.slice(0, i);
      if (changed) {
        for (let dom of this.scrollTargets)
          dom.removeEventListener("scroll", this.onScroll);
        for (let dom of this.scrollTargets = changed)
          dom.addEventListener("scroll", this.onScroll);
      }
    }
    ignore(f) {
      if (!this.active)
        return f();
      try {
        this.stop();
        return f();
      } finally {
        this.start();
        this.clear();
      }
    }
    start() {
      if (this.active)
        return;
      this.observer.observe(this.dom, observeOptions);
      if (useCharData)
        this.dom.addEventListener("DOMCharacterDataModified", this.onCharData);
      this.active = true;
    }
    stop() {
      if (!this.active)
        return;
      this.active = false;
      this.observer.disconnect();
      if (useCharData)
        this.dom.removeEventListener("DOMCharacterDataModified", this.onCharData);
    }
    clear() {
      this.processRecords();
      this.queue.length = 0;
      this.selectionChanged = false;
    }
    delayAndroidKey(key, keyCode) {
      var _a2;
      if (!this.delayedAndroidKey) {
        let flush = () => {
          let key2 = this.delayedAndroidKey;
          if (key2) {
            this.clearDelayedAndroidKey();
            if (!this.flush() && key2.force)
              dispatchKey(this.dom, key2.key, key2.keyCode);
          }
        };
        this.flushingAndroidKey = this.view.win.requestAnimationFrame(flush);
      }
      if (!this.delayedAndroidKey || key == "Enter")
        this.delayedAndroidKey = {
          key,
          keyCode,
          force: this.lastChange < Date.now() - 50 || !!((_a2 = this.delayedAndroidKey) === null || _a2 === void 0 ? void 0 : _a2.force)
        };
    }
    clearDelayedAndroidKey() {
      this.win.cancelAnimationFrame(this.flushingAndroidKey);
      this.delayedAndroidKey = null;
      this.flushingAndroidKey = -1;
    }
    flushSoon() {
      if (this.delayedFlush < 0)
        this.delayedFlush = this.view.win.requestAnimationFrame(() => {
          this.delayedFlush = -1;
          this.flush();
        });
    }
    forceFlush() {
      if (this.delayedFlush >= 0) {
        this.view.win.cancelAnimationFrame(this.delayedFlush);
        this.delayedFlush = -1;
      }
      this.flush();
    }
    processRecords() {
      let records = this.queue;
      for (let mut of this.observer.takeRecords())
        records.push(mut);
      if (records.length)
        this.queue = [];
      let from = -1, to = -1, typeOver = false;
      for (let record of records) {
        let range = this.readMutation(record);
        if (!range)
          continue;
        if (range.typeOver)
          typeOver = true;
        if (from == -1) {
          ({from, to} = range);
        } else {
          from = Math.min(range.from, from);
          to = Math.max(range.to, to);
        }
      }
      return {from, to, typeOver};
    }
    readChange() {
      let {from, to, typeOver} = this.processRecords();
      let newSel = this.selectionChanged && hasSelection(this.dom, this.selectionRange);
      if (from < 0 && !newSel)
        return null;
      if (from > -1)
        this.lastChange = Date.now();
      this.view.inputState.lastFocusTime = 0;
      this.selectionChanged = false;
      return new DOMChange(this.view, from, to, typeOver);
    }
    flush(readSelection = true) {
      if (this.delayedFlush >= 0 || this.delayedAndroidKey)
        return false;
      if (readSelection)
        this.readSelectionRange();
      let domChange = this.readChange();
      if (!domChange)
        return false;
      let startState = this.view.state;
      let handled = applyDOMChange(this.view, domChange);
      if (this.view.state == startState)
        this.view.update([]);
      return handled;
    }
    readMutation(rec) {
      let cView = this.view.docView.nearest(rec.target);
      if (!cView || cView.ignoreMutation(rec))
        return null;
      cView.markDirty(rec.type == "attributes");
      if (rec.type == "attributes")
        cView.dirty |= 4;
      if (rec.type == "childList") {
        let childBefore = findChild(cView, rec.previousSibling || rec.target.previousSibling, -1);
        let childAfter = findChild(cView, rec.nextSibling || rec.target.nextSibling, 1);
        return {
          from: childBefore ? cView.posAfter(childBefore) : cView.posAtStart,
          to: childAfter ? cView.posBefore(childAfter) : cView.posAtEnd,
          typeOver: false
        };
      } else if (rec.type == "characterData") {
        return {from: cView.posAtStart, to: cView.posAtEnd, typeOver: rec.target.nodeValue == rec.oldValue};
      } else {
        return null;
      }
    }
    setWindow(win) {
      if (win != this.win) {
        this.removeWindowListeners(this.win);
        this.win = win;
        this.addWindowListeners(this.win);
      }
    }
    addWindowListeners(win) {
      win.addEventListener("resize", this.onResize);
      win.addEventListener("beforeprint", this.onPrint);
      win.addEventListener("scroll", this.onScroll);
      win.document.addEventListener("selectionchange", this.onSelectionChange);
    }
    removeWindowListeners(win) {
      win.removeEventListener("scroll", this.onScroll);
      win.removeEventListener("resize", this.onResize);
      win.removeEventListener("beforeprint", this.onPrint);
      win.document.removeEventListener("selectionchange", this.onSelectionChange);
    }
    destroy() {
      var _a2, _b, _c;
      this.stop();
      (_a2 = this.intersection) === null || _a2 === void 0 ? void 0 : _a2.disconnect();
      (_b = this.gapIntersection) === null || _b === void 0 ? void 0 : _b.disconnect();
      (_c = this.resize) === null || _c === void 0 ? void 0 : _c.disconnect();
      for (let dom of this.scrollTargets)
        dom.removeEventListener("scroll", this.onScroll);
      this.removeWindowListeners(this.win);
      clearTimeout(this.parentCheck);
      clearTimeout(this.resizeTimeout);
      this.win.cancelAnimationFrame(this.delayedFlush);
      this.win.cancelAnimationFrame(this.flushingAndroidKey);
    }
  };
  function findChild(cView, dom, dir) {
    while (dom) {
      let curView = ContentView.get(dom);
      if (curView && curView.parent == cView)
        return curView;
      let parent = dom.parentNode;
      dom = parent != cView.dom ? parent : dir > 0 ? dom.nextSibling : dom.previousSibling;
    }
    return null;
  }
  function safariSelectionRangeHack(view) {
    let found = null;
    function read(event) {
      event.preventDefault();
      event.stopImmediatePropagation();
      found = event.getTargetRanges()[0];
    }
    view.contentDOM.addEventListener("beforeinput", read, true);
    view.dom.ownerDocument.execCommand("indent");
    view.contentDOM.removeEventListener("beforeinput", read, true);
    if (!found)
      return null;
    let anchorNode = found.startContainer, anchorOffset = found.startOffset;
    let focusNode = found.endContainer, focusOffset = found.endOffset;
    let curAnchor = view.docView.domAtPos(view.state.selection.main.anchor);
    if (isEquivalentPosition(curAnchor.node, curAnchor.offset, focusNode, focusOffset))
      [anchorNode, anchorOffset, focusNode, focusOffset] = [focusNode, focusOffset, anchorNode, anchorOffset];
    return {anchorNode, anchorOffset, focusNode, focusOffset};
  }
  var EditorView = class {
    constructor(config = {}) {
      this.plugins = [];
      this.pluginMap = new Map();
      this.editorAttrs = {};
      this.contentAttrs = {};
      this.bidiCache = [];
      this.destroyed = false;
      this.updateState = 2;
      this.measureScheduled = -1;
      this.measureRequests = [];
      this.contentDOM = document.createElement("div");
      this.scrollDOM = document.createElement("div");
      this.scrollDOM.tabIndex = -1;
      this.scrollDOM.className = "cm-scroller";
      this.scrollDOM.appendChild(this.contentDOM);
      this.announceDOM = document.createElement("div");
      this.announceDOM.style.cssText = "position: absolute; top: -10000px";
      this.announceDOM.setAttribute("aria-live", "polite");
      this.dom = document.createElement("div");
      this.dom.appendChild(this.announceDOM);
      this.dom.appendChild(this.scrollDOM);
      this._dispatch = config.dispatch || ((tr) => this.update([tr]));
      this.dispatch = this.dispatch.bind(this);
      this._root = config.root || getRoot(config.parent) || document;
      this.viewState = new ViewState(config.state || EditorState.create(config));
      this.plugins = this.state.facet(viewPlugin).map((spec) => new PluginInstance(spec));
      for (let plugin of this.plugins)
        plugin.update(this);
      this.observer = new DOMObserver(this);
      this.inputState = new InputState(this);
      this.inputState.ensureHandlers(this, this.plugins);
      this.docView = new DocView(this);
      this.mountStyles();
      this.updateAttrs();
      this.updateState = 0;
      this.requestMeasure();
      if (config.parent)
        config.parent.appendChild(this.dom);
    }
    get state() {
      return this.viewState.state;
    }
    get viewport() {
      return this.viewState.viewport;
    }
    get visibleRanges() {
      return this.viewState.visibleRanges;
    }
    get inView() {
      return this.viewState.inView;
    }
    get composing() {
      return this.inputState.composing > 0;
    }
    get compositionStarted() {
      return this.inputState.composing >= 0;
    }
    get root() {
      return this._root;
    }
    get win() {
      return this.dom.ownerDocument.defaultView || window;
    }
    dispatch(...input) {
      this._dispatch(input.length == 1 && input[0] instanceof Transaction ? input[0] : this.state.update(...input));
    }
    update(transactions) {
      if (this.updateState != 0)
        throw new Error("Calls to EditorView.update are not allowed while an update is in progress");
      let redrawn = false, attrsChanged = false, update;
      let state = this.state;
      for (let tr of transactions) {
        if (tr.startState != state)
          throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");
        state = tr.state;
      }
      if (this.destroyed) {
        this.viewState.state = state;
        return;
      }
      let pendingKey = this.observer.delayedAndroidKey, domChange = null;
      if (pendingKey) {
        this.observer.clearDelayedAndroidKey();
        domChange = this.observer.readChange();
        if (domChange && !this.state.doc.eq(state.doc) || !this.state.selection.eq(state.selection))
          domChange = null;
      } else {
        this.observer.clear();
      }
      if (state.facet(EditorState.phrases) != this.state.facet(EditorState.phrases))
        return this.setState(state);
      update = ViewUpdate.create(this, state, transactions);
      let scrollTarget = this.viewState.scrollTarget;
      try {
        this.updateState = 2;
        for (let tr of transactions) {
          if (scrollTarget)
            scrollTarget = scrollTarget.map(tr.changes);
          if (tr.scrollIntoView) {
            let {main} = tr.state.selection;
            scrollTarget = new ScrollTarget(main.empty ? main : EditorSelection.cursor(main.head, main.head > main.anchor ? -1 : 1));
          }
          for (let e of tr.effects)
            if (e.is(scrollIntoView))
              scrollTarget = e.value;
        }
        this.viewState.update(update, scrollTarget);
        this.bidiCache = CachedOrder.update(this.bidiCache, update.changes);
        if (!update.empty) {
          this.updatePlugins(update);
          this.inputState.update(update);
        }
        redrawn = this.docView.update(update);
        if (this.state.facet(styleModule) != this.styleModules)
          this.mountStyles();
        attrsChanged = this.updateAttrs();
        this.showAnnouncements(transactions);
        this.docView.updateSelection(redrawn, transactions.some((tr) => tr.isUserEvent("select.pointer")));
      } finally {
        this.updateState = 0;
      }
      if (update.startState.facet(theme) != update.state.facet(theme))
        this.viewState.mustMeasureContent = true;
      if (redrawn || attrsChanged || scrollTarget || this.viewState.mustEnforceCursorAssoc || this.viewState.mustMeasureContent)
        this.requestMeasure();
      if (!update.empty)
        for (let listener of this.state.facet(updateListener))
          listener(update);
      if (domChange) {
        if (!applyDOMChange(this, domChange) && pendingKey.force)
          dispatchKey(this.contentDOM, pendingKey.key, pendingKey.keyCode);
      }
    }
    setState(newState) {
      if (this.updateState != 0)
        throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");
      if (this.destroyed) {
        this.viewState.state = newState;
        return;
      }
      this.updateState = 2;
      let hadFocus = this.hasFocus;
      try {
        for (let plugin of this.plugins)
          plugin.destroy(this);
        this.viewState = new ViewState(newState);
        this.plugins = newState.facet(viewPlugin).map((spec) => new PluginInstance(spec));
        this.pluginMap.clear();
        for (let plugin of this.plugins)
          plugin.update(this);
        this.docView = new DocView(this);
        this.inputState.ensureHandlers(this, this.plugins);
        this.mountStyles();
        this.updateAttrs();
        this.bidiCache = [];
      } finally {
        this.updateState = 0;
      }
      if (hadFocus)
        this.focus();
      this.requestMeasure();
    }
    updatePlugins(update) {
      let prevSpecs = update.startState.facet(viewPlugin), specs = update.state.facet(viewPlugin);
      if (prevSpecs != specs) {
        let newPlugins = [];
        for (let spec of specs) {
          let found = prevSpecs.indexOf(spec);
          if (found < 0) {
            newPlugins.push(new PluginInstance(spec));
          } else {
            let plugin = this.plugins[found];
            plugin.mustUpdate = update;
            newPlugins.push(plugin);
          }
        }
        for (let plugin of this.plugins)
          if (plugin.mustUpdate != update)
            plugin.destroy(this);
        this.plugins = newPlugins;
        this.pluginMap.clear();
        this.inputState.ensureHandlers(this, this.plugins);
      } else {
        for (let p of this.plugins)
          p.mustUpdate = update;
      }
      for (let i = 0; i < this.plugins.length; i++)
        this.plugins[i].update(this);
    }
    measure(flush = true) {
      if (this.destroyed)
        return;
      if (this.measureScheduled > -1)
        cancelAnimationFrame(this.measureScheduled);
      this.measureScheduled = 0;
      if (flush)
        this.observer.forceFlush();
      let updated = null;
      let {scrollHeight, scrollTop, clientHeight} = this.scrollDOM;
      let refHeight = scrollTop > scrollHeight - clientHeight - 4 ? scrollHeight : scrollTop;
      try {
        for (let i = 0; ; i++) {
          this.updateState = 1;
          let oldViewport = this.viewport;
          let refBlock = this.viewState.lineBlockAtHeight(refHeight);
          let changed = this.viewState.measure(this);
          if (!changed && !this.measureRequests.length && this.viewState.scrollTarget == null)
            break;
          if (i > 5) {
            console.warn(this.measureRequests.length ? "Measure loop restarted more than 5 times" : "Viewport failed to stabilize");
            break;
          }
          let measuring = [];
          if (!(changed & 4))
            [this.measureRequests, measuring] = [measuring, this.measureRequests];
          let measured = measuring.map((m) => {
            try {
              return m.read(this);
            } catch (e) {
              logException(this.state, e);
              return BadMeasure;
            }
          });
          let update = ViewUpdate.create(this, this.state, []), redrawn = false, scrolled = false;
          update.flags |= changed;
          if (!updated)
            updated = update;
          else
            updated.flags |= changed;
          this.updateState = 2;
          if (!update.empty) {
            this.updatePlugins(update);
            this.inputState.update(update);
            this.updateAttrs();
            redrawn = this.docView.update(update);
          }
          for (let i2 = 0; i2 < measuring.length; i2++)
            if (measured[i2] != BadMeasure) {
              try {
                let m = measuring[i2];
                if (m.write)
                  m.write(measured[i2], this);
              } catch (e) {
                logException(this.state, e);
              }
            }
          if (this.viewState.editorHeight) {
            if (this.viewState.scrollTarget) {
              this.docView.scrollIntoView(this.viewState.scrollTarget);
              this.viewState.scrollTarget = null;
              scrolled = true;
            } else {
              let diff = this.viewState.lineBlockAt(refBlock.from).top - refBlock.top;
              if (diff > 1 || diff < -1) {
                this.scrollDOM.scrollTop += diff;
                scrolled = true;
              }
            }
          }
          if (redrawn)
            this.docView.updateSelection(true);
          if (this.viewport.from == oldViewport.from && this.viewport.to == oldViewport.to && !scrolled && this.measureRequests.length == 0)
            break;
        }
      } finally {
        this.updateState = 0;
        this.measureScheduled = -1;
      }
      if (updated && !updated.empty)
        for (let listener of this.state.facet(updateListener))
          listener(updated);
    }
    get themeClasses() {
      return baseThemeID + " " + (this.state.facet(darkTheme) ? baseDarkID : baseLightID) + " " + this.state.facet(theme);
    }
    updateAttrs() {
      let editorAttrs = attrsFromFacet(this, editorAttributes, {
        class: "cm-editor" + (this.hasFocus ? " cm-focused " : " ") + this.themeClasses
      });
      let contentAttrs = {
        spellcheck: "false",
        autocorrect: "off",
        autocapitalize: "off",
        translate: "no",
        contenteditable: !this.state.facet(editable) ? "false" : "true",
        class: "cm-content",
        style: `${browser.tabSize}: ${this.state.tabSize}`,
        role: "textbox",
        "aria-multiline": "true"
      };
      if (this.state.readOnly)
        contentAttrs["aria-readonly"] = "true";
      attrsFromFacet(this, contentAttributes, contentAttrs);
      let changed = this.observer.ignore(() => {
        let changedContent = updateAttrs(this.contentDOM, this.contentAttrs, contentAttrs);
        let changedEditor = updateAttrs(this.dom, this.editorAttrs, editorAttrs);
        return changedContent || changedEditor;
      });
      this.editorAttrs = editorAttrs;
      this.contentAttrs = contentAttrs;
      return changed;
    }
    showAnnouncements(trs) {
      let first = true;
      for (let tr of trs)
        for (let effect of tr.effects)
          if (effect.is(EditorView.announce)) {
            if (first)
              this.announceDOM.textContent = "";
            first = false;
            let div = this.announceDOM.appendChild(document.createElement("div"));
            div.textContent = effect.value;
          }
    }
    mountStyles() {
      this.styleModules = this.state.facet(styleModule);
      StyleModule.mount(this.root, this.styleModules.concat(baseTheme$1).reverse());
    }
    readMeasured() {
      if (this.updateState == 2)
        throw new Error("Reading the editor layout isn't allowed during an update");
      if (this.updateState == 0 && this.measureScheduled > -1)
        this.measure(false);
    }
    requestMeasure(request) {
      if (this.measureScheduled < 0)
        this.measureScheduled = this.win.requestAnimationFrame(() => this.measure());
      if (request) {
        if (request.key != null)
          for (let i = 0; i < this.measureRequests.length; i++) {
            if (this.measureRequests[i].key === request.key) {
              this.measureRequests[i] = request;
              return;
            }
          }
        this.measureRequests.push(request);
      }
    }
    plugin(plugin) {
      let known = this.pluginMap.get(plugin);
      if (known === void 0 || known && known.spec != plugin)
        this.pluginMap.set(plugin, known = this.plugins.find((p) => p.spec == plugin) || null);
      return known && known.update(this).value;
    }
    get documentTop() {
      return this.contentDOM.getBoundingClientRect().top + this.viewState.paddingTop;
    }
    get documentPadding() {
      return {top: this.viewState.paddingTop, bottom: this.viewState.paddingBottom};
    }
    elementAtHeight(height) {
      this.readMeasured();
      return this.viewState.elementAtHeight(height);
    }
    lineBlockAtHeight(height) {
      this.readMeasured();
      return this.viewState.lineBlockAtHeight(height);
    }
    get viewportLineBlocks() {
      return this.viewState.viewportLines;
    }
    lineBlockAt(pos) {
      return this.viewState.lineBlockAt(pos);
    }
    get contentHeight() {
      return this.viewState.contentHeight;
    }
    moveByChar(start, forward, by) {
      return skipAtoms(this, start, moveByChar(this, start, forward, by));
    }
    moveByGroup(start, forward) {
      return skipAtoms(this, start, moveByChar(this, start, forward, (initial) => byGroup(this, start.head, initial)));
    }
    moveToLineBoundary(start, forward, includeWrap = true) {
      return moveToLineBoundary(this, start, forward, includeWrap);
    }
    moveVertically(start, forward, distance) {
      return skipAtoms(this, start, moveVertically(this, start, forward, distance));
    }
    domAtPos(pos) {
      return this.docView.domAtPos(pos);
    }
    posAtDOM(node, offset = 0) {
      return this.docView.posFromDOM(node, offset);
    }
    posAtCoords(coords, precise = true) {
      this.readMeasured();
      return posAtCoords(this, coords, precise);
    }
    coordsAtPos(pos, side = 1) {
      this.readMeasured();
      let rect = this.docView.coordsAt(pos, side);
      if (!rect || rect.left == rect.right)
        return rect;
      let line = this.state.doc.lineAt(pos), order = this.bidiSpans(line);
      let span = order[BidiSpan.find(order, pos - line.from, -1, side)];
      return flattenRect(rect, span.dir == Direction.LTR == side > 0);
    }
    get defaultCharacterWidth() {
      return this.viewState.heightOracle.charWidth;
    }
    get defaultLineHeight() {
      return this.viewState.heightOracle.lineHeight;
    }
    get textDirection() {
      return this.viewState.defaultTextDirection;
    }
    textDirectionAt(pos) {
      let perLine = this.state.facet(perLineTextDirection);
      if (!perLine || pos < this.viewport.from || pos > this.viewport.to)
        return this.textDirection;
      this.readMeasured();
      return this.docView.textDirectionAt(pos);
    }
    get lineWrapping() {
      return this.viewState.heightOracle.lineWrapping;
    }
    bidiSpans(line) {
      if (line.length > MaxBidiLine)
        return trivialOrder(line.length);
      let dir = this.textDirectionAt(line.from);
      for (let entry of this.bidiCache)
        if (entry.from == line.from && entry.dir == dir)
          return entry.order;
      let order = computeOrder(line.text, dir);
      this.bidiCache.push(new CachedOrder(line.from, line.to, dir, order));
      return order;
    }
    get hasFocus() {
      var _a2;
      return (this.dom.ownerDocument.hasFocus() || browser.safari && ((_a2 = this.inputState) === null || _a2 === void 0 ? void 0 : _a2.lastContextMenu) > Date.now() - 3e4) && this.root.activeElement == this.contentDOM;
    }
    focus() {
      this.observer.ignore(() => {
        focusPreventScroll(this.contentDOM);
        this.docView.updateSelection();
      });
    }
    setRoot(root) {
      if (this._root != root) {
        this._root = root;
        this.observer.setWindow((root.nodeType == 9 ? root : root.ownerDocument).defaultView || window);
        this.mountStyles();
      }
    }
    destroy() {
      for (let plugin of this.plugins)
        plugin.destroy(this);
      this.plugins = [];
      this.inputState.destroy();
      this.dom.remove();
      this.observer.destroy();
      if (this.measureScheduled > -1)
        cancelAnimationFrame(this.measureScheduled);
      this.destroyed = true;
    }
    static scrollIntoView(pos, options = {}) {
      return scrollIntoView.of(new ScrollTarget(typeof pos == "number" ? EditorSelection.cursor(pos) : pos, options.y, options.x, options.yMargin, options.xMargin));
    }
    static domEventHandlers(handlers2) {
      return ViewPlugin.define(() => ({}), {eventHandlers: handlers2});
    }
    static theme(spec, options) {
      let prefix = StyleModule.newName();
      let result = [theme.of(prefix), styleModule.of(buildTheme(`.${prefix}`, spec))];
      if (options && options.dark)
        result.push(darkTheme.of(true));
      return result;
    }
    static baseTheme(spec) {
      return Prec.lowest(styleModule.of(buildTheme("." + baseThemeID, spec, lightDarkIDs)));
    }
    static findFromDOM(dom) {
      var _a2;
      let content2 = dom.querySelector(".cm-content");
      let cView = content2 && ContentView.get(content2) || ContentView.get(dom);
      return ((_a2 = cView === null || cView === void 0 ? void 0 : cView.rootView) === null || _a2 === void 0 ? void 0 : _a2.view) || null;
    }
  };
  EditorView.styleModule = styleModule;
  EditorView.inputHandler = inputHandler;
  EditorView.perLineTextDirection = perLineTextDirection;
  EditorView.exceptionSink = exceptionSink;
  EditorView.updateListener = updateListener;
  EditorView.editable = editable;
  EditorView.mouseSelectionStyle = mouseSelectionStyle;
  EditorView.dragMovesSelection = dragMovesSelection$1;
  EditorView.clickAddsSelectionRange = clickAddsSelectionRange;
  EditorView.decorations = decorations;
  EditorView.atomicRanges = atomicRanges;
  EditorView.scrollMargins = scrollMargins;
  EditorView.darkTheme = darkTheme;
  EditorView.contentAttributes = contentAttributes;
  EditorView.editorAttributes = editorAttributes;
  EditorView.lineWrapping = /* @__PURE__ */ EditorView.contentAttributes.of({class: "cm-lineWrapping"});
  EditorView.announce = /* @__PURE__ */ StateEffect.define();
  var MaxBidiLine = 4096;
  var BadMeasure = {};
  var CachedOrder = class {
    constructor(from, to, dir, order) {
      this.from = from;
      this.to = to;
      this.dir = dir;
      this.order = order;
    }
    static update(cache2, changes) {
      if (changes.empty)
        return cache2;
      let result = [], lastDir = cache2.length ? cache2[cache2.length - 1].dir : Direction.LTR;
      for (let i = Math.max(0, cache2.length - 10); i < cache2.length; i++) {
        let entry = cache2[i];
        if (entry.dir == lastDir && !changes.touchesRange(entry.from, entry.to))
          result.push(new CachedOrder(changes.mapPos(entry.from, 1), changes.mapPos(entry.to, -1), entry.dir, entry.order));
      }
      return result;
    }
  };
  function attrsFromFacet(view, facet, base2) {
    for (let sources = view.state.facet(facet), i = sources.length - 1; i >= 0; i--) {
      let source = sources[i], value = typeof source == "function" ? source(view) : source;
      if (value)
        combineAttrs(value, base2);
    }
    return base2;
  }
  var currentPlatform = browser.mac ? "mac" : browser.windows ? "win" : browser.linux ? "linux" : "key";
  function normalizeKeyName(name2, platform) {
    const parts = name2.split(/-(?!$)/);
    let result = parts[parts.length - 1];
    if (result == "Space")
      result = " ";
    let alt, ctrl, shift2, meta2;
    for (let i = 0; i < parts.length - 1; ++i) {
      const mod = parts[i];
      if (/^(cmd|meta|m)$/i.test(mod))
        meta2 = true;
      else if (/^a(lt)?$/i.test(mod))
        alt = true;
      else if (/^(c|ctrl|control)$/i.test(mod))
        ctrl = true;
      else if (/^s(hift)?$/i.test(mod))
        shift2 = true;
      else if (/^mod$/i.test(mod)) {
        if (platform == "mac")
          meta2 = true;
        else
          ctrl = true;
      } else
        throw new Error("Unrecognized modifier name: " + mod);
    }
    if (alt)
      result = "Alt-" + result;
    if (ctrl)
      result = "Ctrl-" + result;
    if (meta2)
      result = "Meta-" + result;
    if (shift2)
      result = "Shift-" + result;
    return result;
  }
  function modifiers(name2, event, shift2) {
    if (event.altKey)
      name2 = "Alt-" + name2;
    if (event.ctrlKey)
      name2 = "Ctrl-" + name2;
    if (event.metaKey)
      name2 = "Meta-" + name2;
    if (shift2 !== false && event.shiftKey)
      name2 = "Shift-" + name2;
    return name2;
  }
  var handleKeyEvents = /* @__PURE__ */ Prec.default(/* @__PURE__ */ EditorView.domEventHandlers({
    keydown(event, view) {
      return runHandlers(getKeymap(view.state), event, view, "editor");
    }
  }));
  var keymap = /* @__PURE__ */ Facet.define({enables: handleKeyEvents});
  var Keymaps = /* @__PURE__ */ new WeakMap();
  function getKeymap(state) {
    let bindings = state.facet(keymap);
    let map = Keymaps.get(bindings);
    if (!map)
      Keymaps.set(bindings, map = buildKeymap(bindings.reduce((a, b) => a.concat(b), [])));
    return map;
  }
  var storedPrefix = null;
  var PrefixTimeout = 4e3;
  function buildKeymap(bindings, platform = currentPlatform) {
    let bound = Object.create(null);
    let isPrefix = Object.create(null);
    let checkPrefix = (name2, is) => {
      let current = isPrefix[name2];
      if (current == null)
        isPrefix[name2] = is;
      else if (current != is)
        throw new Error("Key binding " + name2 + " is used both as a regular binding and as a multi-stroke prefix");
    };
    let add = (scope, key, command, preventDefault) => {
      var _a2, _b;
      let scopeObj = bound[scope] || (bound[scope] = Object.create(null));
      let parts = key.split(/ (?!$)/).map((k) => normalizeKeyName(k, platform));
      for (let i = 1; i < parts.length; i++) {
        let prefix = parts.slice(0, i).join(" ");
        checkPrefix(prefix, true);
        if (!scopeObj[prefix])
          scopeObj[prefix] = {
            preventDefault: true,
            run: [(view) => {
              let ourObj = storedPrefix = {view, prefix, scope};
              setTimeout(() => {
                if (storedPrefix == ourObj)
                  storedPrefix = null;
              }, PrefixTimeout);
              return true;
            }]
          };
      }
      let full = parts.join(" ");
      checkPrefix(full, false);
      let binding = scopeObj[full] || (scopeObj[full] = {preventDefault: false, run: ((_b = (_a2 = scopeObj._any) === null || _a2 === void 0 ? void 0 : _a2.run) === null || _b === void 0 ? void 0 : _b.slice()) || []});
      if (command)
        binding.run.push(command);
      if (preventDefault)
        binding.preventDefault = true;
    };
    for (let b of bindings) {
      let scopes = b.scope ? b.scope.split(" ") : ["editor"];
      if (b.any)
        for (let scope of scopes) {
          let scopeObj = bound[scope] || (bound[scope] = Object.create(null));
          if (!scopeObj._any)
            scopeObj._any = {preventDefault: false, run: []};
          for (let key in scopeObj)
            scopeObj[key].run.push(b.any);
        }
      let name2 = b[platform] || b.key;
      if (!name2)
        continue;
      for (let scope of scopes) {
        add(scope, name2, b.run, b.preventDefault);
        if (b.shift)
          add(scope, "Shift-" + name2, b.shift, b.preventDefault);
      }
    }
    return bound;
  }
  function runHandlers(map, event, view, scope) {
    let name2 = keyName(event);
    let charCode = codePointAt(name2, 0), isChar = codePointSize(charCode) == name2.length && name2 != " ";
    let prefix = "", fallthrough = false;
    if (storedPrefix && storedPrefix.view == view && storedPrefix.scope == scope) {
      prefix = storedPrefix.prefix + " ";
      if (fallthrough = modifierCodes.indexOf(event.keyCode) < 0)
        storedPrefix = null;
    }
    let ran = new Set();
    let runFor = (binding) => {
      if (binding) {
        for (let cmd of binding.run)
          if (!ran.has(cmd)) {
            ran.add(cmd);
            if (cmd(view, event))
              return true;
          }
        if (binding.preventDefault)
          fallthrough = true;
      }
      return false;
    };
    let scopeObj = map[scope], baseName, shiftName;
    if (scopeObj) {
      if (runFor(scopeObj[prefix + modifiers(name2, event, !isChar)]))
        return true;
      if (isChar && (event.altKey || event.metaKey || event.ctrlKey) && (baseName = base[event.keyCode]) && baseName != name2) {
        if (runFor(scopeObj[prefix + modifiers(baseName, event, true)]))
          return true;
        else if (event.shiftKey && (shiftName = shift[event.keyCode]) != name2 && shiftName != baseName && runFor(scopeObj[prefix + modifiers(shiftName, event, false)]))
          return true;
      } else if (isChar && event.shiftKey) {
        if (runFor(scopeObj[prefix + modifiers(name2, event, true)]))
          return true;
      }
      if (runFor(scopeObj._any))
        return true;
    }
    return fallthrough;
  }
  var CanHidePrimary = !browser.ios;
  var themeSpec = {
    ".cm-line": {
      "& ::selection": {backgroundColor: "transparent !important"},
      "&::selection": {backgroundColor: "transparent !important"}
    }
  };
  if (CanHidePrimary)
    themeSpec[".cm-line"].caretColor = "transparent !important";
  var UnicodeRegexpSupport = /x/.unicode != null ? "gu" : "g";
  var Outside = "-10000px";
  var TooltipViewManager = class {
    constructor(view, facet, createTooltipView) {
      this.facet = facet;
      this.createTooltipView = createTooltipView;
      this.input = view.state.facet(facet);
      this.tooltips = this.input.filter((t2) => t2);
      this.tooltipViews = this.tooltips.map(createTooltipView);
    }
    update(update) {
      var _a2;
      let input = update.state.facet(this.facet);
      let tooltips = input.filter((x) => x);
      if (input === this.input) {
        for (let t2 of this.tooltipViews)
          if (t2.update)
            t2.update(update);
        return false;
      }
      let tooltipViews = [];
      for (let i = 0; i < tooltips.length; i++) {
        let tip = tooltips[i], known = -1;
        if (!tip)
          continue;
        for (let i2 = 0; i2 < this.tooltips.length; i2++) {
          let other = this.tooltips[i2];
          if (other && other.create == tip.create)
            known = i2;
        }
        if (known < 0) {
          tooltipViews[i] = this.createTooltipView(tip);
        } else {
          let tooltipView = tooltipViews[i] = this.tooltipViews[known];
          if (tooltipView.update)
            tooltipView.update(update);
        }
      }
      for (let t2 of this.tooltipViews)
        if (tooltipViews.indexOf(t2) < 0) {
          t2.dom.remove();
          (_a2 = t2.destroy) === null || _a2 === void 0 ? void 0 : _a2.call(t2);
        }
      this.input = input;
      this.tooltips = tooltips;
      this.tooltipViews = tooltipViews;
      return true;
    }
  };
  function windowSpace(view) {
    let {win} = view;
    return {top: 0, left: 0, bottom: win.innerHeight, right: win.innerWidth};
  }
  var tooltipConfig = /* @__PURE__ */ Facet.define({
    combine: (values2) => {
      var _a2, _b, _c;
      return {
        position: browser.ios ? "absolute" : ((_a2 = values2.find((conf) => conf.position)) === null || _a2 === void 0 ? void 0 : _a2.position) || "fixed",
        parent: ((_b = values2.find((conf) => conf.parent)) === null || _b === void 0 ? void 0 : _b.parent) || null,
        tooltipSpace: ((_c = values2.find((conf) => conf.tooltipSpace)) === null || _c === void 0 ? void 0 : _c.tooltipSpace) || windowSpace
      };
    }
  });
  var tooltipPlugin = /* @__PURE__ */ ViewPlugin.fromClass(class {
    constructor(view) {
      this.view = view;
      this.inView = true;
      this.lastTransaction = 0;
      this.measureTimeout = -1;
      let config = view.state.facet(tooltipConfig);
      this.position = config.position;
      this.parent = config.parent;
      this.classes = view.themeClasses;
      this.createContainer();
      this.measureReq = {read: this.readMeasure.bind(this), write: this.writeMeasure.bind(this), key: this};
      this.manager = new TooltipViewManager(view, showTooltip, (t2) => this.createTooltip(t2));
      this.intersectionObserver = typeof IntersectionObserver == "function" ? new IntersectionObserver((entries) => {
        if (Date.now() > this.lastTransaction - 50 && entries.length > 0 && entries[entries.length - 1].intersectionRatio < 1)
          this.measureSoon();
      }, {threshold: [1]}) : null;
      this.observeIntersection();
      view.win.addEventListener("resize", this.measureSoon = this.measureSoon.bind(this));
      this.maybeMeasure();
    }
    createContainer() {
      if (this.parent) {
        this.container = document.createElement("div");
        this.container.style.position = "relative";
        this.container.className = this.view.themeClasses;
        this.parent.appendChild(this.container);
      } else {
        this.container = this.view.dom;
      }
    }
    observeIntersection() {
      if (this.intersectionObserver) {
        this.intersectionObserver.disconnect();
        for (let tooltip of this.manager.tooltipViews)
          this.intersectionObserver.observe(tooltip.dom);
      }
    }
    measureSoon() {
      if (this.measureTimeout < 0)
        this.measureTimeout = setTimeout(() => {
          this.measureTimeout = -1;
          this.maybeMeasure();
        }, 50);
    }
    update(update) {
      if (update.transactions.length)
        this.lastTransaction = Date.now();
      let updated = this.manager.update(update);
      if (updated)
        this.observeIntersection();
      let shouldMeasure = updated || update.geometryChanged;
      let newConfig = update.state.facet(tooltipConfig);
      if (newConfig.position != this.position) {
        this.position = newConfig.position;
        for (let t2 of this.manager.tooltipViews)
          t2.dom.style.position = this.position;
        shouldMeasure = true;
      }
      if (newConfig.parent != this.parent) {
        if (this.parent)
          this.container.remove();
        this.parent = newConfig.parent;
        this.createContainer();
        for (let t2 of this.manager.tooltipViews)
          this.container.appendChild(t2.dom);
        shouldMeasure = true;
      } else if (this.parent && this.view.themeClasses != this.classes) {
        this.classes = this.container.className = this.view.themeClasses;
      }
      if (shouldMeasure)
        this.maybeMeasure();
    }
    createTooltip(tooltip) {
      let tooltipView = tooltip.create(this.view);
      tooltipView.dom.classList.add("cm-tooltip");
      if (tooltip.arrow && !tooltipView.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")) {
        let arrow = document.createElement("div");
        arrow.className = "cm-tooltip-arrow";
        tooltipView.dom.appendChild(arrow);
      }
      tooltipView.dom.style.position = this.position;
      tooltipView.dom.style.top = Outside;
      this.container.appendChild(tooltipView.dom);
      if (tooltipView.mount)
        tooltipView.mount(this.view);
      return tooltipView;
    }
    destroy() {
      var _a2, _b;
      this.view.win.removeEventListener("resize", this.measureSoon);
      for (let tooltipView of this.manager.tooltipViews) {
        tooltipView.dom.remove();
        (_a2 = tooltipView.destroy) === null || _a2 === void 0 ? void 0 : _a2.call(tooltipView);
      }
      (_b = this.intersectionObserver) === null || _b === void 0 ? void 0 : _b.disconnect();
      clearTimeout(this.measureTimeout);
    }
    readMeasure() {
      let editor = this.view.dom.getBoundingClientRect();
      return {
        editor,
        parent: this.parent ? this.container.getBoundingClientRect() : editor,
        pos: this.manager.tooltips.map((t2, i) => {
          let tv = this.manager.tooltipViews[i];
          return tv.getCoords ? tv.getCoords(t2.pos) : this.view.coordsAtPos(t2.pos);
        }),
        size: this.manager.tooltipViews.map(({dom}) => dom.getBoundingClientRect()),
        space: this.view.state.facet(tooltipConfig).tooltipSpace(this.view)
      };
    }
    writeMeasure(measured) {
      let {editor, space: space4} = measured;
      let others = [];
      for (let i = 0; i < this.manager.tooltips.length; i++) {
        let tooltip = this.manager.tooltips[i], tView = this.manager.tooltipViews[i], {dom} = tView;
        let pos = measured.pos[i], size = measured.size[i];
        if (!pos || pos.bottom <= Math.max(editor.top, space4.top) || pos.top >= Math.min(editor.bottom, space4.bottom) || pos.right < Math.max(editor.left, space4.left) - 0.1 || pos.left > Math.min(editor.right, space4.right) + 0.1) {
          dom.style.top = Outside;
          continue;
        }
        let arrow = tooltip.arrow ? tView.dom.querySelector(".cm-tooltip-arrow") : null;
        let arrowHeight = arrow ? 7 : 0;
        let width = size.right - size.left, height = size.bottom - size.top;
        let offset = tView.offset || noOffset, ltr = this.view.textDirection == Direction.LTR;
        let left = size.width > space4.right - space4.left ? ltr ? space4.left : space4.right - size.width : ltr ? Math.min(pos.left - (arrow ? 14 : 0) + offset.x, space4.right - width) : Math.max(space4.left, pos.left - width + (arrow ? 14 : 0) - offset.x);
        let above = !!tooltip.above;
        if (!tooltip.strictSide && (above ? pos.top - (size.bottom - size.top) - offset.y < space4.top : pos.bottom + (size.bottom - size.top) + offset.y > space4.bottom) && above == space4.bottom - pos.bottom > pos.top - space4.top)
          above = !above;
        let top2 = above ? pos.top - height - arrowHeight - offset.y : pos.bottom + arrowHeight + offset.y;
        let right = left + width;
        if (tView.overlap !== true) {
          for (let r of others)
            if (r.left < right && r.right > left && r.top < top2 + height && r.bottom > top2)
              top2 = above ? r.top - height - 2 - arrowHeight : r.bottom + arrowHeight + 2;
        }
        if (this.position == "absolute") {
          dom.style.top = top2 - measured.parent.top + "px";
          dom.style.left = left - measured.parent.left + "px";
        } else {
          dom.style.top = top2 + "px";
          dom.style.left = left + "px";
        }
        if (arrow)
          arrow.style.left = `${pos.left + (ltr ? offset.x : -offset.x) - (left + 14 - 7)}px`;
        if (tView.overlap !== true)
          others.push({left, top: top2, right, bottom: top2 + height});
        dom.classList.toggle("cm-tooltip-above", above);
        dom.classList.toggle("cm-tooltip-below", !above);
        if (tView.positioned)
          tView.positioned(measured.space);
      }
    }
    maybeMeasure() {
      if (this.manager.tooltips.length) {
        if (this.view.inView)
          this.view.requestMeasure(this.measureReq);
        if (this.inView != this.view.inView) {
          this.inView = this.view.inView;
          if (!this.inView)
            for (let tv of this.manager.tooltipViews)
              tv.dom.style.top = Outside;
        }
      }
    }
  }, {
    eventHandlers: {
      scroll() {
        this.maybeMeasure();
      }
    }
  });
  var baseTheme = /* @__PURE__ */ EditorView.baseTheme({
    ".cm-tooltip": {
      zIndex: 100
    },
    "&light .cm-tooltip": {
      border: "1px solid #bbb",
      backgroundColor: "#f5f5f5"
    },
    "&light .cm-tooltip-section:not(:first-child)": {
      borderTop: "1px solid #bbb"
    },
    "&dark .cm-tooltip": {
      backgroundColor: "#333338",
      color: "white"
    },
    ".cm-tooltip-arrow": {
      height: `${7}px`,
      width: `${7 * 2}px`,
      position: "absolute",
      zIndex: -1,
      overflow: "hidden",
      "&:before, &:after": {
        content: "''",
        position: "absolute",
        width: 0,
        height: 0,
        borderLeft: `${7}px solid transparent`,
        borderRight: `${7}px solid transparent`
      },
      ".cm-tooltip-above &": {
        bottom: `-${7}px`,
        "&:before": {
          borderTop: `${7}px solid #bbb`
        },
        "&:after": {
          borderTop: `${7}px solid #f5f5f5`,
          bottom: "1px"
        }
      },
      ".cm-tooltip-below &": {
        top: `-${7}px`,
        "&:before": {
          borderBottom: `${7}px solid #bbb`
        },
        "&:after": {
          borderBottom: `${7}px solid #f5f5f5`,
          top: "1px"
        }
      }
    },
    "&dark .cm-tooltip .cm-tooltip-arrow": {
      "&:before": {
        borderTopColor: "#333338",
        borderBottomColor: "#333338"
      },
      "&:after": {
        borderTopColor: "transparent",
        borderBottomColor: "transparent"
      }
    }
  });
  var noOffset = {x: 0, y: 0};
  var showTooltip = /* @__PURE__ */ Facet.define({
    enables: [tooltipPlugin, baseTheme]
  });
  function getTooltip(view, tooltip) {
    let plugin = view.plugin(tooltipPlugin);
    if (!plugin)
      return null;
    let found = plugin.manager.tooltips.indexOf(tooltip);
    return found < 0 ? null : plugin.manager.tooltipViews[found];
  }
  var GutterMarker = class extends RangeValue {
    compare(other) {
      return this == other || this.constructor == other.constructor && this.eq(other);
    }
    eq(other) {
      return false;
    }
    destroy(dom) {
    }
  };
  GutterMarker.prototype.elementClass = "";
  GutterMarker.prototype.toDOM = void 0;
  GutterMarker.prototype.mapMode = MapMode.TrackBefore;
  GutterMarker.prototype.startSide = GutterMarker.prototype.endSide = -1;
  GutterMarker.prototype.point = true;
  var gutterLineClass = /* @__PURE__ */ Facet.define();
  var activeGutters = /* @__PURE__ */ Facet.define();
  var unfixGutters = /* @__PURE__ */ Facet.define({
    combine: (values2) => values2.some((x) => x)
  });
  function gutters(config) {
    let result = [
      gutterView
    ];
    if (config && config.fixed === false)
      result.push(unfixGutters.of(true));
    return result;
  }
  var gutterView = /* @__PURE__ */ ViewPlugin.fromClass(class {
    constructor(view) {
      this.view = view;
      this.prevViewport = view.viewport;
      this.dom = document.createElement("div");
      this.dom.className = "cm-gutters";
      this.dom.setAttribute("aria-hidden", "true");
      this.dom.style.minHeight = this.view.contentHeight + "px";
      this.gutters = view.state.facet(activeGutters).map((conf) => new SingleGutterView(view, conf));
      for (let gutter2 of this.gutters)
        this.dom.appendChild(gutter2.dom);
      this.fixed = !view.state.facet(unfixGutters);
      if (this.fixed) {
        this.dom.style.position = "sticky";
      }
      this.syncGutters(false);
      view.scrollDOM.insertBefore(this.dom, view.contentDOM);
    }
    update(update) {
      if (this.updateGutters(update)) {
        let vpA = this.prevViewport, vpB = update.view.viewport;
        let vpOverlap = Math.min(vpA.to, vpB.to) - Math.max(vpA.from, vpB.from);
        this.syncGutters(vpOverlap < (vpB.to - vpB.from) * 0.8);
      }
      if (update.geometryChanged)
        this.dom.style.minHeight = this.view.contentHeight + "px";
      if (this.view.state.facet(unfixGutters) != !this.fixed) {
        this.fixed = !this.fixed;
        this.dom.style.position = this.fixed ? "sticky" : "";
      }
      this.prevViewport = update.view.viewport;
    }
    syncGutters(detach) {
      let after = this.dom.nextSibling;
      if (detach)
        this.dom.remove();
      let lineClasses = RangeSet.iter(this.view.state.facet(gutterLineClass), this.view.viewport.from);
      let classSet = [];
      let contexts = this.gutters.map((gutter2) => new UpdateContext(gutter2, this.view.viewport, -this.view.documentPadding.top));
      for (let line of this.view.viewportLineBlocks) {
        let text;
        if (Array.isArray(line.type)) {
          for (let b of line.type)
            if (b.type == BlockType.Text) {
              text = b;
              break;
            }
        } else {
          text = line.type == BlockType.Text ? line : void 0;
        }
        if (!text)
          continue;
        if (classSet.length)
          classSet = [];
        advanceCursor(lineClasses, classSet, line.from);
        for (let cx of contexts)
          cx.line(this.view, text, classSet);
      }
      for (let cx of contexts)
        cx.finish();
      if (detach)
        this.view.scrollDOM.insertBefore(this.dom, after);
    }
    updateGutters(update) {
      let prev = update.startState.facet(activeGutters), cur2 = update.state.facet(activeGutters);
      let change = update.docChanged || update.heightChanged || update.viewportChanged || !RangeSet.eq(update.startState.facet(gutterLineClass), update.state.facet(gutterLineClass), update.view.viewport.from, update.view.viewport.to);
      if (prev == cur2) {
        for (let gutter2 of this.gutters)
          if (gutter2.update(update))
            change = true;
      } else {
        change = true;
        let gutters2 = [];
        for (let conf of cur2) {
          let known = prev.indexOf(conf);
          if (known < 0) {
            gutters2.push(new SingleGutterView(this.view, conf));
          } else {
            this.gutters[known].update(update);
            gutters2.push(this.gutters[known]);
          }
        }
        for (let g of this.gutters) {
          g.dom.remove();
          if (gutters2.indexOf(g) < 0)
            g.destroy();
        }
        for (let g of gutters2)
          this.dom.appendChild(g.dom);
        this.gutters = gutters2;
      }
      return change;
    }
    destroy() {
      for (let view of this.gutters)
        view.destroy();
      this.dom.remove();
    }
  }, {
    provide: (plugin) => EditorView.scrollMargins.of((view) => {
      let value = view.plugin(plugin);
      if (!value || value.gutters.length == 0 || !value.fixed)
        return null;
      return view.textDirection == Direction.LTR ? {left: value.dom.offsetWidth} : {right: value.dom.offsetWidth};
    })
  });
  function asArray2(val) {
    return Array.isArray(val) ? val : [val];
  }
  function advanceCursor(cursor, collect, pos) {
    while (cursor.value && cursor.from <= pos) {
      if (cursor.from == pos)
        collect.push(cursor.value);
      cursor.next();
    }
  }
  var UpdateContext = class {
    constructor(gutter2, viewport, height) {
      this.gutter = gutter2;
      this.height = height;
      this.localMarkers = [];
      this.i = 0;
      this.cursor = RangeSet.iter(gutter2.markers, viewport.from);
    }
    line(view, line, extraMarkers) {
      if (this.localMarkers.length)
        this.localMarkers = [];
      advanceCursor(this.cursor, this.localMarkers, line.from);
      let localMarkers = extraMarkers.length ? this.localMarkers.concat(extraMarkers) : this.localMarkers;
      let forLine = this.gutter.config.lineMarker(view, line, localMarkers);
      if (forLine)
        localMarkers.unshift(forLine);
      let gutter2 = this.gutter;
      if (localMarkers.length == 0 && !gutter2.config.renderEmptyElements)
        return;
      let above = line.top - this.height;
      if (this.i == gutter2.elements.length) {
        let newElt = new GutterElement(view, line.height, above, localMarkers);
        gutter2.elements.push(newElt);
        gutter2.dom.appendChild(newElt.dom);
      } else {
        gutter2.elements[this.i].update(view, line.height, above, localMarkers);
      }
      this.height = line.bottom;
      this.i++;
    }
    finish() {
      let gutter2 = this.gutter;
      while (gutter2.elements.length > this.i) {
        let last = gutter2.elements.pop();
        gutter2.dom.removeChild(last.dom);
        last.destroy();
      }
    }
  };
  var SingleGutterView = class {
    constructor(view, config) {
      this.view = view;
      this.config = config;
      this.elements = [];
      this.spacer = null;
      this.dom = document.createElement("div");
      this.dom.className = "cm-gutter" + (this.config.class ? " " + this.config.class : "");
      for (let prop in config.domEventHandlers) {
        this.dom.addEventListener(prop, (event) => {
          let line = view.lineBlockAtHeight(event.clientY - view.documentTop);
          if (config.domEventHandlers[prop](view, line, event))
            event.preventDefault();
        });
      }
      this.markers = asArray2(config.markers(view));
      if (config.initialSpacer) {
        this.spacer = new GutterElement(view, 0, 0, [config.initialSpacer(view)]);
        this.dom.appendChild(this.spacer.dom);
        this.spacer.dom.style.cssText += "visibility: hidden; pointer-events: none";
      }
    }
    update(update) {
      let prevMarkers = this.markers;
      this.markers = asArray2(this.config.markers(update.view));
      if (this.spacer && this.config.updateSpacer) {
        let updated = this.config.updateSpacer(this.spacer.markers[0], update);
        if (updated != this.spacer.markers[0])
          this.spacer.update(update.view, 0, 0, [updated]);
      }
      let vp = update.view.viewport;
      return !RangeSet.eq(this.markers, prevMarkers, vp.from, vp.to) || (this.config.lineMarkerChange ? this.config.lineMarkerChange(update) : false);
    }
    destroy() {
      for (let elt2 of this.elements)
        elt2.destroy();
    }
  };
  var GutterElement = class {
    constructor(view, height, above, markers) {
      this.height = -1;
      this.above = 0;
      this.markers = [];
      this.dom = document.createElement("div");
      this.dom.className = "cm-gutterElement";
      this.update(view, height, above, markers);
    }
    update(view, height, above, markers) {
      if (this.height != height)
        this.dom.style.height = (this.height = height) + "px";
      if (this.above != above)
        this.dom.style.marginTop = (this.above = above) ? above + "px" : "";
      if (!sameMarkers(this.markers, markers))
        this.setMarkers(view, markers);
    }
    setMarkers(view, markers) {
      let cls = "cm-gutterElement", domPos = this.dom.firstChild;
      for (let iNew = 0, iOld = 0; ; ) {
        let skipTo = iOld, marker = iNew < markers.length ? markers[iNew++] : null, matched = false;
        if (marker) {
          let c = marker.elementClass;
          if (c)
            cls += " " + c;
          for (let i = iOld; i < this.markers.length; i++)
            if (this.markers[i].compare(marker)) {
              skipTo = i;
              matched = true;
              break;
            }
        } else {
          skipTo = this.markers.length;
        }
        while (iOld < skipTo) {
          let next = this.markers[iOld++];
          if (next.toDOM) {
            next.destroy(domPos);
            let after = domPos.nextSibling;
            domPos.remove();
            domPos = after;
          }
        }
        if (!marker)
          break;
        if (marker.toDOM) {
          if (matched)
            domPos = domPos.nextSibling;
          else
            this.dom.insertBefore(marker.toDOM(view), domPos);
        }
        if (matched)
          iOld++;
      }
      this.dom.className = cls;
      this.markers = markers;
    }
    destroy() {
      this.setMarkers(null, []);
    }
  };
  function sameMarkers(a, b) {
    if (a.length != b.length)
      return false;
    for (let i = 0; i < a.length; i++)
      if (!a[i].compare(b[i]))
        return false;
    return true;
  }
  var lineNumberMarkers = /* @__PURE__ */ Facet.define();
  var lineNumberConfig = /* @__PURE__ */ Facet.define({
    combine(values2) {
      return combineConfig(values2, {formatNumber: String, domEventHandlers: {}}, {
        domEventHandlers(a, b) {
          let result = Object.assign({}, a);
          for (let event in b) {
            let exists = result[event], add = b[event];
            result[event] = exists ? (view, line, event2) => exists(view, line, event2) || add(view, line, event2) : add;
          }
          return result;
        }
      });
    }
  });
  var NumberMarker = class extends GutterMarker {
    constructor(number2) {
      super();
      this.number = number2;
    }
    eq(other) {
      return this.number == other.number;
    }
    toDOM() {
      return document.createTextNode(this.number);
    }
  };
  function formatNumber(view, number2) {
    return view.state.facet(lineNumberConfig).formatNumber(number2, view.state);
  }
  var lineNumberGutter = /* @__PURE__ */ activeGutters.compute([lineNumberConfig], (state) => ({
    class: "cm-lineNumbers",
    renderEmptyElements: false,
    markers(view) {
      return view.state.facet(lineNumberMarkers);
    },
    lineMarker(view, line, others) {
      if (others.some((m) => m.toDOM))
        return null;
      return new NumberMarker(formatNumber(view, view.state.doc.lineAt(line.from).number));
    },
    lineMarkerChange: (update) => update.startState.facet(lineNumberConfig) != update.state.facet(lineNumberConfig),
    initialSpacer(view) {
      return new NumberMarker(formatNumber(view, maxLineNumber(view.state.doc.lines)));
    },
    updateSpacer(spacer, update) {
      let max = formatNumber(update.view, maxLineNumber(update.view.state.doc.lines));
      return max == spacer.number ? spacer : new NumberMarker(max);
    },
    domEventHandlers: state.facet(lineNumberConfig).domEventHandlers
  }));
  function lineNumbers(config = {}) {
    return [
      lineNumberConfig.of(config),
      gutters(),
      lineNumberGutter
    ];
  }
  function maxLineNumber(lines) {
    let last = 9;
    while (last < lines)
      last = last * 10 + 9;
    return last;
  }

  // node_modules/@lezer/common/dist/index.js
  var DefaultBufferLength = 1024;
  var nextPropID = 0;
  var Range2 = class {
    constructor(from, to) {
      this.from = from;
      this.to = to;
    }
  };
  var NodeProp = class {
    constructor(config = {}) {
      this.id = nextPropID++;
      this.perNode = !!config.perNode;
      this.deserialize = config.deserialize || (() => {
        throw new Error("This node type doesn't define a deserialize function");
      });
    }
    add(match) {
      if (this.perNode)
        throw new RangeError("Can't add per-node props to node types");
      if (typeof match != "function")
        match = NodeType.match(match);
      return (type) => {
        let result = match(type);
        return result === void 0 ? null : [this, result];
      };
    }
  };
  NodeProp.closedBy = new NodeProp({deserialize: (str) => str.split(" ")});
  NodeProp.openedBy = new NodeProp({deserialize: (str) => str.split(" ")});
  NodeProp.group = new NodeProp({deserialize: (str) => str.split(" ")});
  NodeProp.contextHash = new NodeProp({perNode: true});
  NodeProp.lookAhead = new NodeProp({perNode: true});
  NodeProp.mounted = new NodeProp({perNode: true});
  var MountedTree = class {
    constructor(tree, overlay, parser7) {
      this.tree = tree;
      this.overlay = overlay;
      this.parser = parser7;
    }
  };
  var noProps = Object.create(null);
  var NodeType = class {
    constructor(name2, props, id2, flags = 0) {
      this.name = name2;
      this.props = props;
      this.id = id2;
      this.flags = flags;
    }
    static define(spec) {
      let props = spec.props && spec.props.length ? Object.create(null) : noProps;
      let flags = (spec.top ? 1 : 0) | (spec.skipped ? 2 : 0) | (spec.error ? 4 : 0) | (spec.name == null ? 8 : 0);
      let type = new NodeType(spec.name || "", props, spec.id, flags);
      if (spec.props)
        for (let src of spec.props) {
          if (!Array.isArray(src))
            src = src(type);
          if (src) {
            if (src[0].perNode)
              throw new RangeError("Can't store a per-node prop on a node type");
            props[src[0].id] = src[1];
          }
        }
      return type;
    }
    prop(prop) {
      return this.props[prop.id];
    }
    get isTop() {
      return (this.flags & 1) > 0;
    }
    get isSkipped() {
      return (this.flags & 2) > 0;
    }
    get isError() {
      return (this.flags & 4) > 0;
    }
    get isAnonymous() {
      return (this.flags & 8) > 0;
    }
    is(name2) {
      if (typeof name2 == "string") {
        if (this.name == name2)
          return true;
        let group = this.prop(NodeProp.group);
        return group ? group.indexOf(name2) > -1 : false;
      }
      return this.id == name2;
    }
    static match(map) {
      let direct = Object.create(null);
      for (let prop in map)
        for (let name2 of prop.split(" "))
          direct[name2] = map[prop];
      return (node) => {
        for (let groups = node.prop(NodeProp.group), i = -1; i < (groups ? groups.length : 0); i++) {
          let found = direct[i < 0 ? node.name : groups[i]];
          if (found)
            return found;
        }
      };
    }
  };
  NodeType.none = new NodeType("", Object.create(null), 0, 8);
  var NodeSet = class {
    constructor(types2) {
      this.types = types2;
      for (let i = 0; i < types2.length; i++)
        if (types2[i].id != i)
          throw new RangeError("Node type ids should correspond to array positions when creating a node set");
    }
    extend(...props) {
      let newTypes = [];
      for (let type of this.types) {
        let newProps = null;
        for (let source of props) {
          let add = source(type);
          if (add) {
            if (!newProps)
              newProps = Object.assign({}, type.props);
            newProps[add[0].id] = add[1];
          }
        }
        newTypes.push(newProps ? new NodeType(type.name, newProps, type.id, type.flags) : type);
      }
      return new NodeSet(newTypes);
    }
  };
  var CachedNode = new WeakMap();
  var CachedInnerNode = new WeakMap();
  var IterMode;
  (function(IterMode2) {
    IterMode2[IterMode2["ExcludeBuffers"] = 1] = "ExcludeBuffers";
    IterMode2[IterMode2["IncludeAnonymous"] = 2] = "IncludeAnonymous";
    IterMode2[IterMode2["IgnoreMounts"] = 4] = "IgnoreMounts";
    IterMode2[IterMode2["IgnoreOverlays"] = 8] = "IgnoreOverlays";
  })(IterMode || (IterMode = {}));
  var Tree = class {
    constructor(type, children, positions, length, props) {
      this.type = type;
      this.children = children;
      this.positions = positions;
      this.length = length;
      this.props = null;
      if (props && props.length) {
        this.props = Object.create(null);
        for (let [prop, value] of props)
          this.props[typeof prop == "number" ? prop : prop.id] = value;
      }
    }
    toString() {
      let mounted = this.prop(NodeProp.mounted);
      if (mounted && !mounted.overlay)
        return mounted.tree.toString();
      let children = "";
      for (let ch of this.children) {
        let str = ch.toString();
        if (str) {
          if (children)
            children += ",";
          children += str;
        }
      }
      return !this.type.name ? children : (/\W/.test(this.type.name) && !this.type.isError ? JSON.stringify(this.type.name) : this.type.name) + (children.length ? "(" + children + ")" : "");
    }
    cursor(mode = 0) {
      return new TreeCursor(this.topNode, mode);
    }
    cursorAt(pos, side = 0, mode = 0) {
      let scope = CachedNode.get(this) || this.topNode;
      let cursor = new TreeCursor(scope);
      cursor.moveTo(pos, side);
      CachedNode.set(this, cursor._tree);
      return cursor;
    }
    get topNode() {
      return new TreeNode(this, 0, 0, null);
    }
    resolve(pos, side = 0) {
      let node = resolveNode(CachedNode.get(this) || this.topNode, pos, side, false);
      CachedNode.set(this, node);
      return node;
    }
    resolveInner(pos, side = 0) {
      let node = resolveNode(CachedInnerNode.get(this) || this.topNode, pos, side, true);
      CachedInnerNode.set(this, node);
      return node;
    }
    iterate(spec) {
      let {enter, leave, from = 0, to = this.length} = spec;
      for (let c = this.cursor((spec.mode || 0) | IterMode.IncludeAnonymous); ; ) {
        let entered = false;
        if (c.from <= to && c.to >= from && (c.type.isAnonymous || enter(c) !== false)) {
          if (c.firstChild())
            continue;
          entered = true;
        }
        for (; ; ) {
          if (entered && leave && !c.type.isAnonymous)
            leave(c);
          if (c.nextSibling())
            break;
          if (!c.parent())
            return;
          entered = true;
        }
      }
    }
    prop(prop) {
      return !prop.perNode ? this.type.prop(prop) : this.props ? this.props[prop.id] : void 0;
    }
    get propValues() {
      let result = [];
      if (this.props)
        for (let id2 in this.props)
          result.push([+id2, this.props[id2]]);
      return result;
    }
    balance(config = {}) {
      return this.children.length <= 8 ? this : balanceRange(NodeType.none, this.children, this.positions, 0, this.children.length, 0, this.length, (children, positions, length) => new Tree(this.type, children, positions, length, this.propValues), config.makeTree || ((children, positions, length) => new Tree(NodeType.none, children, positions, length)));
    }
    static build(data2) {
      return buildTree(data2);
    }
  };
  Tree.empty = new Tree(NodeType.none, [], [], 0);
  var FlatBufferCursor = class {
    constructor(buffer, index) {
      this.buffer = buffer;
      this.index = index;
    }
    get id() {
      return this.buffer[this.index - 4];
    }
    get start() {
      return this.buffer[this.index - 3];
    }
    get end() {
      return this.buffer[this.index - 2];
    }
    get size() {
      return this.buffer[this.index - 1];
    }
    get pos() {
      return this.index;
    }
    next() {
      this.index -= 4;
    }
    fork() {
      return new FlatBufferCursor(this.buffer, this.index);
    }
  };
  var TreeBuffer = class {
    constructor(buffer, length, set) {
      this.buffer = buffer;
      this.length = length;
      this.set = set;
    }
    get type() {
      return NodeType.none;
    }
    toString() {
      let result = [];
      for (let index = 0; index < this.buffer.length; ) {
        result.push(this.childString(index));
        index = this.buffer[index + 3];
      }
      return result.join(",");
    }
    childString(index) {
      let id2 = this.buffer[index], endIndex = this.buffer[index + 3];
      let type = this.set.types[id2], result = type.name;
      if (/\W/.test(result) && !type.isError)
        result = JSON.stringify(result);
      index += 4;
      if (endIndex == index)
        return result;
      let children = [];
      while (index < endIndex) {
        children.push(this.childString(index));
        index = this.buffer[index + 3];
      }
      return result + "(" + children.join(",") + ")";
    }
    findChild(startIndex, endIndex, dir, pos, side) {
      let {buffer} = this, pick = -1;
      for (let i = startIndex; i != endIndex; i = buffer[i + 3]) {
        if (checkSide(side, pos, buffer[i + 1], buffer[i + 2])) {
          pick = i;
          if (dir > 0)
            break;
        }
      }
      return pick;
    }
    slice(startI, endI, from, to) {
      let b = this.buffer;
      let copy = new Uint16Array(endI - startI);
      for (let i = startI, j = 0; i < endI; ) {
        copy[j++] = b[i++];
        copy[j++] = b[i++] - from;
        copy[j++] = b[i++] - from;
        copy[j++] = b[i++] - startI;
      }
      return new TreeBuffer(copy, to - from, this.set);
    }
  };
  function checkSide(side, pos, from, to) {
    switch (side) {
      case -2:
        return from < pos;
      case -1:
        return to >= pos && from < pos;
      case 0:
        return from < pos && to > pos;
      case 1:
        return from <= pos && to > pos;
      case 2:
        return to > pos;
      case 4:
        return true;
    }
  }
  function enterUnfinishedNodesBefore(node, pos) {
    let scan = node.childBefore(pos);
    while (scan) {
      let last = scan.lastChild;
      if (!last || last.to != scan.to)
        break;
      if (last.type.isError && last.from == last.to) {
        node = scan;
        scan = last.prevSibling;
      } else {
        scan = last;
      }
    }
    return node;
  }
  function resolveNode(node, pos, side, overlays) {
    var _a2;
    while (node.from == node.to || (side < 1 ? node.from >= pos : node.from > pos) || (side > -1 ? node.to <= pos : node.to < pos)) {
      let parent = !overlays && node instanceof TreeNode && node.index < 0 ? null : node.parent;
      if (!parent)
        return node;
      node = parent;
    }
    let mode = overlays ? 0 : IterMode.IgnoreOverlays;
    if (overlays)
      for (let scan = node, parent = scan.parent; parent; scan = parent, parent = scan.parent) {
        if (scan instanceof TreeNode && scan.index < 0 && ((_a2 = parent.enter(pos, side, mode)) === null || _a2 === void 0 ? void 0 : _a2.from) != scan.from)
          node = parent;
      }
    for (; ; ) {
      let inner = node.enter(pos, side, mode);
      if (!inner)
        return node;
      node = inner;
    }
  }
  var TreeNode = class {
    constructor(_tree, from, index, _parent) {
      this._tree = _tree;
      this.from = from;
      this.index = index;
      this._parent = _parent;
    }
    get type() {
      return this._tree.type;
    }
    get name() {
      return this._tree.type.name;
    }
    get to() {
      return this.from + this._tree.length;
    }
    nextChild(i, dir, pos, side, mode = 0) {
      for (let parent = this; ; ) {
        for (let {children, positions} = parent._tree, e = dir > 0 ? children.length : -1; i != e; i += dir) {
          let next = children[i], start = positions[i] + parent.from;
          if (!checkSide(side, pos, start, start + next.length))
            continue;
          if (next instanceof TreeBuffer) {
            if (mode & IterMode.ExcludeBuffers)
              continue;
            let index = next.findChild(0, next.buffer.length, dir, pos - start, side);
            if (index > -1)
              return new BufferNode(new BufferContext(parent, next, i, start), null, index);
          } else if (mode & IterMode.IncludeAnonymous || (!next.type.isAnonymous || hasChild(next))) {
            let mounted;
            if (!(mode & IterMode.IgnoreMounts) && next.props && (mounted = next.prop(NodeProp.mounted)) && !mounted.overlay)
              return new TreeNode(mounted.tree, start, i, parent);
            let inner = new TreeNode(next, start, i, parent);
            return mode & IterMode.IncludeAnonymous || !inner.type.isAnonymous ? inner : inner.nextChild(dir < 0 ? next.children.length - 1 : 0, dir, pos, side);
          }
        }
        if (mode & IterMode.IncludeAnonymous || !parent.type.isAnonymous)
          return null;
        if (parent.index >= 0)
          i = parent.index + dir;
        else
          i = dir < 0 ? -1 : parent._parent._tree.children.length;
        parent = parent._parent;
        if (!parent)
          return null;
      }
    }
    get firstChild() {
      return this.nextChild(0, 1, 0, 4);
    }
    get lastChild() {
      return this.nextChild(this._tree.children.length - 1, -1, 0, 4);
    }
    childAfter(pos) {
      return this.nextChild(0, 1, pos, 2);
    }
    childBefore(pos) {
      return this.nextChild(this._tree.children.length - 1, -1, pos, -2);
    }
    enter(pos, side, mode = 0) {
      let mounted;
      if (!(mode & IterMode.IgnoreOverlays) && (mounted = this._tree.prop(NodeProp.mounted)) && mounted.overlay) {
        let rPos = pos - this.from;
        for (let {from, to} of mounted.overlay) {
          if ((side > 0 ? from <= rPos : from < rPos) && (side < 0 ? to >= rPos : to > rPos))
            return new TreeNode(mounted.tree, mounted.overlay[0].from + this.from, -1, this);
        }
      }
      return this.nextChild(0, 1, pos, side, mode);
    }
    nextSignificantParent() {
      let val = this;
      while (val.type.isAnonymous && val._parent)
        val = val._parent;
      return val;
    }
    get parent() {
      return this._parent ? this._parent.nextSignificantParent() : null;
    }
    get nextSibling() {
      return this._parent && this.index >= 0 ? this._parent.nextChild(this.index + 1, 1, 0, 4) : null;
    }
    get prevSibling() {
      return this._parent && this.index >= 0 ? this._parent.nextChild(this.index - 1, -1, 0, 4) : null;
    }
    cursor(mode = 0) {
      return new TreeCursor(this, mode);
    }
    get tree() {
      return this._tree;
    }
    toTree() {
      return this._tree;
    }
    resolve(pos, side = 0) {
      return resolveNode(this, pos, side, false);
    }
    resolveInner(pos, side = 0) {
      return resolveNode(this, pos, side, true);
    }
    enterUnfinishedNodesBefore(pos) {
      return enterUnfinishedNodesBefore(this, pos);
    }
    getChild(type, before = null, after = null) {
      let r = getChildren(this, type, before, after);
      return r.length ? r[0] : null;
    }
    getChildren(type, before = null, after = null) {
      return getChildren(this, type, before, after);
    }
    toString() {
      return this._tree.toString();
    }
    get node() {
      return this;
    }
    matchContext(context) {
      return matchNodeContext(this, context);
    }
  };
  function getChildren(node, type, before, after) {
    let cur2 = node.cursor(), result = [];
    if (!cur2.firstChild())
      return result;
    if (before != null) {
      while (!cur2.type.is(before))
        if (!cur2.nextSibling())
          return result;
    }
    for (; ; ) {
      if (after != null && cur2.type.is(after))
        return result;
      if (cur2.type.is(type))
        result.push(cur2.node);
      if (!cur2.nextSibling())
        return after == null ? result : [];
    }
  }
  function matchNodeContext(node, context, i = context.length - 1) {
    for (let p = node.parent; i >= 0; p = p.parent) {
      if (!p)
        return false;
      if (!p.type.isAnonymous) {
        if (context[i] && context[i] != p.name)
          return false;
        i--;
      }
    }
    return true;
  }
  var BufferContext = class {
    constructor(parent, buffer, index, start) {
      this.parent = parent;
      this.buffer = buffer;
      this.index = index;
      this.start = start;
    }
  };
  var BufferNode = class {
    constructor(context, _parent, index) {
      this.context = context;
      this._parent = _parent;
      this.index = index;
      this.type = context.buffer.set.types[context.buffer.buffer[index]];
    }
    get name() {
      return this.type.name;
    }
    get from() {
      return this.context.start + this.context.buffer.buffer[this.index + 1];
    }
    get to() {
      return this.context.start + this.context.buffer.buffer[this.index + 2];
    }
    child(dir, pos, side) {
      let {buffer} = this.context;
      let index = buffer.findChild(this.index + 4, buffer.buffer[this.index + 3], dir, pos - this.context.start, side);
      return index < 0 ? null : new BufferNode(this.context, this, index);
    }
    get firstChild() {
      return this.child(1, 0, 4);
    }
    get lastChild() {
      return this.child(-1, 0, 4);
    }
    childAfter(pos) {
      return this.child(1, pos, 2);
    }
    childBefore(pos) {
      return this.child(-1, pos, -2);
    }
    enter(pos, side, mode = 0) {
      if (mode & IterMode.ExcludeBuffers)
        return null;
      let {buffer} = this.context;
      let index = buffer.findChild(this.index + 4, buffer.buffer[this.index + 3], side > 0 ? 1 : -1, pos - this.context.start, side);
      return index < 0 ? null : new BufferNode(this.context, this, index);
    }
    get parent() {
      return this._parent || this.context.parent.nextSignificantParent();
    }
    externalSibling(dir) {
      return this._parent ? null : this.context.parent.nextChild(this.context.index + dir, dir, 0, 4);
    }
    get nextSibling() {
      let {buffer} = this.context;
      let after = buffer.buffer[this.index + 3];
      if (after < (this._parent ? buffer.buffer[this._parent.index + 3] : buffer.buffer.length))
        return new BufferNode(this.context, this._parent, after);
      return this.externalSibling(1);
    }
    get prevSibling() {
      let {buffer} = this.context;
      let parentStart = this._parent ? this._parent.index + 4 : 0;
      if (this.index == parentStart)
        return this.externalSibling(-1);
      return new BufferNode(this.context, this._parent, buffer.findChild(parentStart, this.index, -1, 0, 4));
    }
    cursor(mode = 0) {
      return new TreeCursor(this, mode);
    }
    get tree() {
      return null;
    }
    toTree() {
      let children = [], positions = [];
      let {buffer} = this.context;
      let startI = this.index + 4, endI = buffer.buffer[this.index + 3];
      if (endI > startI) {
        let from = buffer.buffer[this.index + 1], to = buffer.buffer[this.index + 2];
        children.push(buffer.slice(startI, endI, from, to));
        positions.push(0);
      }
      return new Tree(this.type, children, positions, this.to - this.from);
    }
    resolve(pos, side = 0) {
      return resolveNode(this, pos, side, false);
    }
    resolveInner(pos, side = 0) {
      return resolveNode(this, pos, side, true);
    }
    enterUnfinishedNodesBefore(pos) {
      return enterUnfinishedNodesBefore(this, pos);
    }
    toString() {
      return this.context.buffer.childString(this.index);
    }
    getChild(type, before = null, after = null) {
      let r = getChildren(this, type, before, after);
      return r.length ? r[0] : null;
    }
    getChildren(type, before = null, after = null) {
      return getChildren(this, type, before, after);
    }
    get node() {
      return this;
    }
    matchContext(context) {
      return matchNodeContext(this, context);
    }
  };
  var TreeCursor = class {
    constructor(node, mode = 0) {
      this.mode = mode;
      this.buffer = null;
      this.stack = [];
      this.index = 0;
      this.bufferNode = null;
      if (node instanceof TreeNode) {
        this.yieldNode(node);
      } else {
        this._tree = node.context.parent;
        this.buffer = node.context;
        for (let n = node._parent; n; n = n._parent)
          this.stack.unshift(n.index);
        this.bufferNode = node;
        this.yieldBuf(node.index);
      }
    }
    get name() {
      return this.type.name;
    }
    yieldNode(node) {
      if (!node)
        return false;
      this._tree = node;
      this.type = node.type;
      this.from = node.from;
      this.to = node.to;
      return true;
    }
    yieldBuf(index, type) {
      this.index = index;
      let {start, buffer} = this.buffer;
      this.type = type || buffer.set.types[buffer.buffer[index]];
      this.from = start + buffer.buffer[index + 1];
      this.to = start + buffer.buffer[index + 2];
      return true;
    }
    yield(node) {
      if (!node)
        return false;
      if (node instanceof TreeNode) {
        this.buffer = null;
        return this.yieldNode(node);
      }
      this.buffer = node.context;
      return this.yieldBuf(node.index, node.type);
    }
    toString() {
      return this.buffer ? this.buffer.buffer.childString(this.index) : this._tree.toString();
    }
    enterChild(dir, pos, side) {
      if (!this.buffer)
        return this.yield(this._tree.nextChild(dir < 0 ? this._tree._tree.children.length - 1 : 0, dir, pos, side, this.mode));
      let {buffer} = this.buffer;
      let index = buffer.findChild(this.index + 4, buffer.buffer[this.index + 3], dir, pos - this.buffer.start, side);
      if (index < 0)
        return false;
      this.stack.push(this.index);
      return this.yieldBuf(index);
    }
    firstChild() {
      return this.enterChild(1, 0, 4);
    }
    lastChild() {
      return this.enterChild(-1, 0, 4);
    }
    childAfter(pos) {
      return this.enterChild(1, pos, 2);
    }
    childBefore(pos) {
      return this.enterChild(-1, pos, -2);
    }
    enter(pos, side, mode = this.mode) {
      if (!this.buffer)
        return this.yield(this._tree.enter(pos, side, mode));
      return mode & IterMode.ExcludeBuffers ? false : this.enterChild(1, pos, side);
    }
    parent() {
      if (!this.buffer)
        return this.yieldNode(this.mode & IterMode.IncludeAnonymous ? this._tree._parent : this._tree.parent);
      if (this.stack.length)
        return this.yieldBuf(this.stack.pop());
      let parent = this.mode & IterMode.IncludeAnonymous ? this.buffer.parent : this.buffer.parent.nextSignificantParent();
      this.buffer = null;
      return this.yieldNode(parent);
    }
    sibling(dir) {
      if (!this.buffer)
        return !this._tree._parent ? false : this.yield(this._tree.index < 0 ? null : this._tree._parent.nextChild(this._tree.index + dir, dir, 0, 4, this.mode));
      let {buffer} = this.buffer, d = this.stack.length - 1;
      if (dir < 0) {
        let parentStart = d < 0 ? 0 : this.stack[d] + 4;
        if (this.index != parentStart)
          return this.yieldBuf(buffer.findChild(parentStart, this.index, -1, 0, 4));
      } else {
        let after = buffer.buffer[this.index + 3];
        if (after < (d < 0 ? buffer.buffer.length : buffer.buffer[this.stack[d] + 3]))
          return this.yieldBuf(after);
      }
      return d < 0 ? this.yield(this.buffer.parent.nextChild(this.buffer.index + dir, dir, 0, 4, this.mode)) : false;
    }
    nextSibling() {
      return this.sibling(1);
    }
    prevSibling() {
      return this.sibling(-1);
    }
    atLastNode(dir) {
      let index, parent, {buffer} = this;
      if (buffer) {
        if (dir > 0) {
          if (this.index < buffer.buffer.buffer.length)
            return false;
        } else {
          for (let i = 0; i < this.index; i++)
            if (buffer.buffer.buffer[i + 3] < this.index)
              return false;
        }
        ({index, parent} = buffer);
      } else {
        ({index, _parent: parent} = this._tree);
      }
      for (; parent; {index, _parent: parent} = parent) {
        if (index > -1)
          for (let i = index + dir, e = dir < 0 ? -1 : parent._tree.children.length; i != e; i += dir) {
            let child = parent._tree.children[i];
            if (this.mode & IterMode.IncludeAnonymous || child instanceof TreeBuffer || !child.type.isAnonymous || hasChild(child))
              return false;
          }
      }
      return true;
    }
    move(dir, enter) {
      if (enter && this.enterChild(dir, 0, 4))
        return true;
      for (; ; ) {
        if (this.sibling(dir))
          return true;
        if (this.atLastNode(dir) || !this.parent())
          return false;
      }
    }
    next(enter = true) {
      return this.move(1, enter);
    }
    prev(enter = true) {
      return this.move(-1, enter);
    }
    moveTo(pos, side = 0) {
      while (this.from == this.to || (side < 1 ? this.from >= pos : this.from > pos) || (side > -1 ? this.to <= pos : this.to < pos))
        if (!this.parent())
          break;
      while (this.enterChild(1, pos, side)) {
      }
      return this;
    }
    get node() {
      if (!this.buffer)
        return this._tree;
      let cache2 = this.bufferNode, result = null, depth = 0;
      if (cache2 && cache2.context == this.buffer) {
        scan:
          for (let index = this.index, d = this.stack.length; d >= 0; ) {
            for (let c = cache2; c; c = c._parent)
              if (c.index == index) {
                if (index == this.index)
                  return c;
                result = c;
                depth = d + 1;
                break scan;
              }
            index = this.stack[--d];
          }
      }
      for (let i = depth; i < this.stack.length; i++)
        result = new BufferNode(this.buffer, result, this.stack[i]);
      return this.bufferNode = new BufferNode(this.buffer, result, this.index);
    }
    get tree() {
      return this.buffer ? null : this._tree._tree;
    }
    iterate(enter, leave) {
      for (let depth = 0; ; ) {
        let mustLeave = false;
        if (this.type.isAnonymous || enter(this) !== false) {
          if (this.firstChild()) {
            depth++;
            continue;
          }
          if (!this.type.isAnonymous)
            mustLeave = true;
        }
        for (; ; ) {
          if (mustLeave && leave)
            leave(this);
          mustLeave = this.type.isAnonymous;
          if (this.nextSibling())
            break;
          if (!depth)
            return;
          this.parent();
          depth--;
          mustLeave = true;
        }
      }
    }
    matchContext(context) {
      if (!this.buffer)
        return matchNodeContext(this.node, context);
      let {buffer} = this.buffer, {types: types2} = buffer.set;
      for (let i = context.length - 1, d = this.stack.length - 1; i >= 0; d--) {
        if (d < 0)
          return matchNodeContext(this.node, context, i);
        let type = types2[buffer.buffer[this.stack[d]]];
        if (!type.isAnonymous) {
          if (context[i] && context[i] != type.name)
            return false;
          i--;
        }
      }
      return true;
    }
  };
  function hasChild(tree) {
    return tree.children.some((ch) => ch instanceof TreeBuffer || !ch.type.isAnonymous || hasChild(ch));
  }
  function buildTree(data2) {
    var _a2;
    let {buffer, nodeSet, maxBufferLength = DefaultBufferLength, reused = [], minRepeatType = nodeSet.types.length} = data2;
    let cursor = Array.isArray(buffer) ? new FlatBufferCursor(buffer, buffer.length) : buffer;
    let types2 = nodeSet.types;
    let contextHash = 0, lookAhead = 0;
    function takeNode(parentStart, minPos, children2, positions2, inRepeat) {
      let {id: id2, start, end, size} = cursor;
      let lookAheadAtStart = lookAhead;
      while (size < 0) {
        cursor.next();
        if (size == -1) {
          let node2 = reused[id2];
          children2.push(node2);
          positions2.push(start - parentStart);
          return;
        } else if (size == -3) {
          contextHash = id2;
          return;
        } else if (size == -4) {
          lookAhead = id2;
          return;
        } else {
          throw new RangeError(`Unrecognized record size: ${size}`);
        }
      }
      let type = types2[id2], node, buffer2;
      let startPos = start - parentStart;
      if (end - start <= maxBufferLength && (buffer2 = findBufferSize(cursor.pos - minPos, inRepeat))) {
        let data3 = new Uint16Array(buffer2.size - buffer2.skip);
        let endPos = cursor.pos - buffer2.size, index = data3.length;
        while (cursor.pos > endPos)
          index = copyToBuffer(buffer2.start, data3, index);
        node = new TreeBuffer(data3, end - buffer2.start, nodeSet);
        startPos = buffer2.start - parentStart;
      } else {
        let endPos = cursor.pos - size;
        cursor.next();
        let localChildren = [], localPositions = [];
        let localInRepeat = id2 >= minRepeatType ? id2 : -1;
        let lastGroup = 0, lastEnd = end;
        while (cursor.pos > endPos) {
          if (localInRepeat >= 0 && cursor.id == localInRepeat && cursor.size >= 0) {
            if (cursor.end <= lastEnd - maxBufferLength) {
              makeRepeatLeaf(localChildren, localPositions, start, lastGroup, cursor.end, lastEnd, localInRepeat, lookAheadAtStart);
              lastGroup = localChildren.length;
              lastEnd = cursor.end;
            }
            cursor.next();
          } else {
            takeNode(start, endPos, localChildren, localPositions, localInRepeat);
          }
        }
        if (localInRepeat >= 0 && lastGroup > 0 && lastGroup < localChildren.length)
          makeRepeatLeaf(localChildren, localPositions, start, lastGroup, start, lastEnd, localInRepeat, lookAheadAtStart);
        localChildren.reverse();
        localPositions.reverse();
        if (localInRepeat > -1 && lastGroup > 0) {
          let make = makeBalanced(type);
          node = balanceRange(type, localChildren, localPositions, 0, localChildren.length, 0, end - start, make, make);
        } else {
          node = makeTree(type, localChildren, localPositions, end - start, lookAheadAtStart - end);
        }
      }
      children2.push(node);
      positions2.push(startPos);
    }
    function makeBalanced(type) {
      return (children2, positions2, length2) => {
        let lookAhead2 = 0, lastI = children2.length - 1, last, lookAheadProp;
        if (lastI >= 0 && (last = children2[lastI]) instanceof Tree) {
          if (!lastI && last.type == type && last.length == length2)
            return last;
          if (lookAheadProp = last.prop(NodeProp.lookAhead))
            lookAhead2 = positions2[lastI] + last.length + lookAheadProp;
        }
        return makeTree(type, children2, positions2, length2, lookAhead2);
      };
    }
    function makeRepeatLeaf(children2, positions2, base2, i, from, to, type, lookAhead2) {
      let localChildren = [], localPositions = [];
      while (children2.length > i) {
        localChildren.push(children2.pop());
        localPositions.push(positions2.pop() + base2 - from);
      }
      children2.push(makeTree(nodeSet.types[type], localChildren, localPositions, to - from, lookAhead2 - to));
      positions2.push(from - base2);
    }
    function makeTree(type, children2, positions2, length2, lookAhead2 = 0, props) {
      if (contextHash) {
        let pair2 = [NodeProp.contextHash, contextHash];
        props = props ? [pair2].concat(props) : [pair2];
      }
      if (lookAhead2 > 25) {
        let pair2 = [NodeProp.lookAhead, lookAhead2];
        props = props ? [pair2].concat(props) : [pair2];
      }
      return new Tree(type, children2, positions2, length2, props);
    }
    function findBufferSize(maxSize, inRepeat) {
      let fork = cursor.fork();
      let size = 0, start = 0, skip = 0, minStart = fork.end - maxBufferLength;
      let result = {size: 0, start: 0, skip: 0};
      scan:
        for (let minPos = fork.pos - maxSize; fork.pos > minPos; ) {
          let nodeSize2 = fork.size;
          if (fork.id == inRepeat && nodeSize2 >= 0) {
            result.size = size;
            result.start = start;
            result.skip = skip;
            skip += 4;
            size += 4;
            fork.next();
            continue;
          }
          let startPos = fork.pos - nodeSize2;
          if (nodeSize2 < 0 || startPos < minPos || fork.start < minStart)
            break;
          let localSkipped = fork.id >= minRepeatType ? 4 : 0;
          let nodeStart = fork.start;
          fork.next();
          while (fork.pos > startPos) {
            if (fork.size < 0) {
              if (fork.size == -3)
                localSkipped += 4;
              else
                break scan;
            } else if (fork.id >= minRepeatType) {
              localSkipped += 4;
            }
            fork.next();
          }
          start = nodeStart;
          size += nodeSize2;
          skip += localSkipped;
        }
      if (inRepeat < 0 || size == maxSize) {
        result.size = size;
        result.start = start;
        result.skip = skip;
      }
      return result.size > 4 ? result : void 0;
    }
    function copyToBuffer(bufferStart, buffer2, index) {
      let {id: id2, start, end, size} = cursor;
      cursor.next();
      if (size >= 0 && id2 < minRepeatType) {
        let startIndex = index;
        if (size > 4) {
          let endPos = cursor.pos - (size - 4);
          while (cursor.pos > endPos)
            index = copyToBuffer(bufferStart, buffer2, index);
        }
        buffer2[--index] = startIndex;
        buffer2[--index] = end - bufferStart;
        buffer2[--index] = start - bufferStart;
        buffer2[--index] = id2;
      } else if (size == -3) {
        contextHash = id2;
      } else if (size == -4) {
        lookAhead = id2;
      }
      return index;
    }
    let children = [], positions = [];
    while (cursor.pos > 0)
      takeNode(data2.start || 0, data2.bufferStart || 0, children, positions, -1);
    let length = (_a2 = data2.length) !== null && _a2 !== void 0 ? _a2 : children.length ? positions[0] + children[0].length : 0;
    return new Tree(types2[data2.topID], children.reverse(), positions.reverse(), length);
  }
  var nodeSizeCache = new WeakMap();
  function nodeSize(balanceType, node) {
    if (!balanceType.isAnonymous || node instanceof TreeBuffer || node.type != balanceType)
      return 1;
    let size = nodeSizeCache.get(node);
    if (size == null) {
      size = 1;
      for (let child of node.children) {
        if (child.type != balanceType || !(child instanceof Tree)) {
          size = 1;
          break;
        }
        size += nodeSize(balanceType, child);
      }
      nodeSizeCache.set(node, size);
    }
    return size;
  }
  function balanceRange(balanceType, children, positions, from, to, start, length, mkTop, mkTree) {
    let total = 0;
    for (let i = from; i < to; i++)
      total += nodeSize(balanceType, children[i]);
    let maxChild = Math.ceil(total * 1.5 / 8);
    let localChildren = [], localPositions = [];
    function divide(children2, positions2, from2, to2, offset) {
      for (let i = from2; i < to2; ) {
        let groupFrom = i, groupStart = positions2[i], groupSize = nodeSize(balanceType, children2[i]);
        i++;
        for (; i < to2; i++) {
          let nextSize = nodeSize(balanceType, children2[i]);
          if (groupSize + nextSize >= maxChild)
            break;
          groupSize += nextSize;
        }
        if (i == groupFrom + 1) {
          if (groupSize > maxChild) {
            let only = children2[groupFrom];
            divide(only.children, only.positions, 0, only.children.length, positions2[groupFrom] + offset);
            continue;
          }
          localChildren.push(children2[groupFrom]);
        } else {
          let length2 = positions2[i - 1] + children2[i - 1].length - groupStart;
          localChildren.push(balanceRange(balanceType, children2, positions2, groupFrom, i, groupStart, length2, null, mkTree));
        }
        localPositions.push(groupStart + offset - start);
      }
    }
    divide(children, positions, from, to, 0);
    return (mkTop || mkTree)(localChildren, localPositions, length);
  }
  var NodeWeakMap = class {
    constructor() {
      this.map = new WeakMap();
    }
    setBuffer(buffer, index, value) {
      let inner = this.map.get(buffer);
      if (!inner)
        this.map.set(buffer, inner = new Map());
      inner.set(index, value);
    }
    getBuffer(buffer, index) {
      let inner = this.map.get(buffer);
      return inner && inner.get(index);
    }
    set(node, value) {
      if (node instanceof BufferNode)
        this.setBuffer(node.context.buffer, node.index, value);
      else if (node instanceof TreeNode)
        this.map.set(node.tree, value);
    }
    get(node) {
      return node instanceof BufferNode ? this.getBuffer(node.context.buffer, node.index) : node instanceof TreeNode ? this.map.get(node.tree) : void 0;
    }
    cursorSet(cursor, value) {
      if (cursor.buffer)
        this.setBuffer(cursor.buffer.buffer, cursor.index, value);
      else
        this.map.set(cursor.tree, value);
    }
    cursorGet(cursor) {
      return cursor.buffer ? this.getBuffer(cursor.buffer.buffer, cursor.index) : this.map.get(cursor.tree);
    }
  };
  var TreeFragment = class {
    constructor(from, to, tree, offset, openStart = false, openEnd = false) {
      this.from = from;
      this.to = to;
      this.tree = tree;
      this.offset = offset;
      this.open = (openStart ? 1 : 0) | (openEnd ? 2 : 0);
    }
    get openStart() {
      return (this.open & 1) > 0;
    }
    get openEnd() {
      return (this.open & 2) > 0;
    }
    static addTree(tree, fragments = [], partial = false) {
      let result = [new TreeFragment(0, tree.length, tree, 0, false, partial)];
      for (let f of fragments)
        if (f.to > tree.length)
          result.push(f);
      return result;
    }
    static applyChanges(fragments, changes, minGap = 128) {
      if (!changes.length)
        return fragments;
      let result = [];
      let fI = 1, nextF = fragments.length ? fragments[0] : null;
      for (let cI = 0, pos = 0, off = 0; ; cI++) {
        let nextC = cI < changes.length ? changes[cI] : null;
        let nextPos = nextC ? nextC.fromA : 1e9;
        if (nextPos - pos >= minGap)
          while (nextF && nextF.from < nextPos) {
            let cut = nextF;
            if (pos >= cut.from || nextPos <= cut.to || off) {
              let fFrom = Math.max(cut.from, pos) - off, fTo = Math.min(cut.to, nextPos) - off;
              cut = fFrom >= fTo ? null : new TreeFragment(fFrom, fTo, cut.tree, cut.offset + off, cI > 0, !!nextC);
            }
            if (cut)
              result.push(cut);
            if (nextF.to > nextPos)
              break;
            nextF = fI < fragments.length ? fragments[fI++] : null;
          }
        if (!nextC)
          break;
        pos = nextC.toA;
        off = nextC.toA - nextC.toB;
      }
      return result;
    }
  };
  var Parser = class {
    startParse(input, fragments, ranges) {
      if (typeof input == "string")
        input = new StringInput(input);
      ranges = !ranges ? [new Range2(0, input.length)] : ranges.length ? ranges.map((r) => new Range2(r.from, r.to)) : [new Range2(0, 0)];
      return this.createParse(input, fragments || [], ranges);
    }
    parse(input, fragments, ranges) {
      let parse = this.startParse(input, fragments, ranges);
      for (; ; ) {
        let done = parse.advance();
        if (done)
          return done;
      }
    }
  };
  var StringInput = class {
    constructor(string2) {
      this.string = string2;
    }
    get length() {
      return this.string.length;
    }
    chunk(from) {
      return this.string.slice(from);
    }
    get lineChunks() {
      return false;
    }
    read(from, to) {
      return this.string.slice(from, to);
    }
  };
  function parseMixed(nest) {
    return (parse, input, fragments, ranges) => new MixedParse(parse, nest, input, fragments, ranges);
  }
  var InnerParse = class {
    constructor(parser7, parse, overlay, target, ranges) {
      this.parser = parser7;
      this.parse = parse;
      this.overlay = overlay;
      this.target = target;
      this.ranges = ranges;
    }
  };
  var ActiveOverlay = class {
    constructor(parser7, predicate, mounts, index, start, target, prev) {
      this.parser = parser7;
      this.predicate = predicate;
      this.mounts = mounts;
      this.index = index;
      this.start = start;
      this.target = target;
      this.prev = prev;
      this.depth = 0;
      this.ranges = [];
    }
  };
  var stoppedInner = new NodeProp({perNode: true});
  var MixedParse = class {
    constructor(base2, nest, input, fragments, ranges) {
      this.nest = nest;
      this.input = input;
      this.fragments = fragments;
      this.ranges = ranges;
      this.inner = [];
      this.innerDone = 0;
      this.baseTree = null;
      this.stoppedAt = null;
      this.baseParse = base2;
    }
    advance() {
      if (this.baseParse) {
        let done2 = this.baseParse.advance();
        if (!done2)
          return null;
        this.baseParse = null;
        this.baseTree = done2;
        this.startInner();
        if (this.stoppedAt != null)
          for (let inner2 of this.inner)
            inner2.parse.stopAt(this.stoppedAt);
      }
      if (this.innerDone == this.inner.length) {
        let result = this.baseTree;
        if (this.stoppedAt != null)
          result = new Tree(result.type, result.children, result.positions, result.length, result.propValues.concat([[stoppedInner, this.stoppedAt]]));
        return result;
      }
      let inner = this.inner[this.innerDone], done = inner.parse.advance();
      if (done) {
        this.innerDone++;
        let props = Object.assign(Object.create(null), inner.target.props);
        props[NodeProp.mounted.id] = new MountedTree(done, inner.overlay, inner.parser);
        inner.target.props = props;
      }
      return null;
    }
    get parsedPos() {
      if (this.baseParse)
        return 0;
      let pos = this.input.length;
      for (let i = this.innerDone; i < this.inner.length; i++) {
        if (this.inner[i].ranges[0].from < pos)
          pos = Math.min(pos, this.inner[i].parse.parsedPos);
      }
      return pos;
    }
    stopAt(pos) {
      this.stoppedAt = pos;
      if (this.baseParse)
        this.baseParse.stopAt(pos);
      else
        for (let i = this.innerDone; i < this.inner.length; i++)
          this.inner[i].parse.stopAt(pos);
    }
    startInner() {
      let fragmentCursor = new FragmentCursor(this.fragments);
      let overlay = null;
      let covered = null;
      let cursor = new TreeCursor(new TreeNode(this.baseTree, this.ranges[0].from, 0, null), IterMode.IncludeAnonymous | IterMode.IgnoreMounts);
      scan:
        for (let nest, isCovered; this.stoppedAt == null || cursor.from < this.stoppedAt; ) {
          let enter = true, range;
          if (fragmentCursor.hasNode(cursor)) {
            if (overlay) {
              let match = overlay.mounts.find((m) => m.frag.from <= cursor.from && m.frag.to >= cursor.to && m.mount.overlay);
              if (match)
                for (let r of match.mount.overlay) {
                  let from = r.from + match.pos, to = r.to + match.pos;
                  if (from >= cursor.from && to <= cursor.to && !overlay.ranges.some((r2) => r2.from < to && r2.to > from))
                    overlay.ranges.push({from, to});
                }
            }
            enter = false;
          } else if (covered && (isCovered = checkCover(covered.ranges, cursor.from, cursor.to))) {
            enter = isCovered != 2;
          } else if (!cursor.type.isAnonymous && cursor.from < cursor.to && (nest = this.nest(cursor, this.input))) {
            if (!cursor.tree)
              materialize(cursor);
            let oldMounts = fragmentCursor.findMounts(cursor.from, nest.parser);
            if (typeof nest.overlay == "function") {
              overlay = new ActiveOverlay(nest.parser, nest.overlay, oldMounts, this.inner.length, cursor.from, cursor.tree, overlay);
            } else {
              let ranges = punchRanges(this.ranges, nest.overlay || [new Range2(cursor.from, cursor.to)]);
              if (ranges.length)
                this.inner.push(new InnerParse(nest.parser, nest.parser.startParse(this.input, enterFragments(oldMounts, ranges), ranges), nest.overlay ? nest.overlay.map((r) => new Range2(r.from - cursor.from, r.to - cursor.from)) : null, cursor.tree, ranges));
              if (!nest.overlay)
                enter = false;
              else if (ranges.length)
                covered = {ranges, depth: 0, prev: covered};
            }
          } else if (overlay && (range = overlay.predicate(cursor))) {
            if (range === true)
              range = new Range2(cursor.from, cursor.to);
            if (range.from < range.to)
              overlay.ranges.push(range);
          }
          if (enter && cursor.firstChild()) {
            if (overlay)
              overlay.depth++;
            if (covered)
              covered.depth++;
          } else {
            for (; ; ) {
              if (cursor.nextSibling())
                break;
              if (!cursor.parent())
                break scan;
              if (overlay && !--overlay.depth) {
                let ranges = punchRanges(this.ranges, overlay.ranges);
                if (ranges.length)
                  this.inner.splice(overlay.index, 0, new InnerParse(overlay.parser, overlay.parser.startParse(this.input, enterFragments(overlay.mounts, ranges), ranges), overlay.ranges.map((r) => new Range2(r.from - overlay.start, r.to - overlay.start)), overlay.target, ranges));
                overlay = overlay.prev;
              }
              if (covered && !--covered.depth)
                covered = covered.prev;
            }
          }
        }
    }
  };
  function checkCover(covered, from, to) {
    for (let range of covered) {
      if (range.from >= to)
        break;
      if (range.to > from)
        return range.from <= from && range.to >= to ? 2 : 1;
    }
    return 0;
  }
  function sliceBuf(buf, startI, endI, nodes, positions, off) {
    if (startI < endI) {
      let from = buf.buffer[startI + 1], to = buf.buffer[endI - 2];
      nodes.push(buf.slice(startI, endI, from, to));
      positions.push(from - off);
    }
  }
  function materialize(cursor) {
    let {node} = cursor, depth = 0;
    do {
      cursor.parent();
      depth++;
    } while (!cursor.tree);
    let i = 0, base2 = cursor.tree, off = 0;
    for (; ; i++) {
      off = base2.positions[i] + cursor.from;
      if (off <= node.from && off + base2.children[i].length >= node.to)
        break;
    }
    let buf = base2.children[i], b = buf.buffer;
    function split(startI, endI, type, innerOffset, length) {
      let i2 = startI;
      while (b[i2 + 2] + off <= node.from)
        i2 = b[i2 + 3];
      let children = [], positions = [];
      sliceBuf(buf, startI, i2, children, positions, innerOffset);
      let from = b[i2 + 1], to = b[i2 + 2];
      let isTarget = from + off == node.from && to + off == node.to && b[i2] == node.type.id;
      children.push(isTarget ? node.toTree() : split(i2 + 4, b[i2 + 3], buf.set.types[b[i2]], from, to - from));
      positions.push(from - innerOffset);
      sliceBuf(buf, b[i2 + 3], endI, children, positions, innerOffset);
      return new Tree(type, children, positions, length);
    }
    base2.children[i] = split(0, b.length, NodeType.none, 0, buf.length);
    for (let d = 0; d <= depth; d++)
      cursor.childAfter(node.from);
  }
  var StructureCursor = class {
    constructor(root, offset) {
      this.offset = offset;
      this.done = false;
      this.cursor = root.cursor(IterMode.IncludeAnonymous | IterMode.IgnoreMounts);
    }
    moveTo(pos) {
      let {cursor} = this, p = pos - this.offset;
      while (!this.done && cursor.from < p) {
        if (cursor.to >= pos && cursor.enter(p, 1, IterMode.IgnoreOverlays | IterMode.ExcludeBuffers))
          ;
        else if (!cursor.next(false))
          this.done = true;
      }
    }
    hasNode(cursor) {
      this.moveTo(cursor.from);
      if (!this.done && this.cursor.from + this.offset == cursor.from && this.cursor.tree) {
        for (let tree = this.cursor.tree; ; ) {
          if (tree == cursor.tree)
            return true;
          if (tree.children.length && tree.positions[0] == 0 && tree.children[0] instanceof Tree)
            tree = tree.children[0];
          else
            break;
        }
      }
      return false;
    }
  };
  var FragmentCursor = class {
    constructor(fragments) {
      var _a2;
      this.fragments = fragments;
      this.curTo = 0;
      this.fragI = 0;
      if (fragments.length) {
        let first = this.curFrag = fragments[0];
        this.curTo = (_a2 = first.tree.prop(stoppedInner)) !== null && _a2 !== void 0 ? _a2 : first.to;
        this.inner = new StructureCursor(first.tree, -first.offset);
      } else {
        this.curFrag = this.inner = null;
      }
    }
    hasNode(node) {
      while (this.curFrag && node.from >= this.curTo)
        this.nextFrag();
      return this.curFrag && this.curFrag.from <= node.from && this.curTo >= node.to && this.inner.hasNode(node);
    }
    nextFrag() {
      var _a2;
      this.fragI++;
      if (this.fragI == this.fragments.length) {
        this.curFrag = this.inner = null;
      } else {
        let frag = this.curFrag = this.fragments[this.fragI];
        this.curTo = (_a2 = frag.tree.prop(stoppedInner)) !== null && _a2 !== void 0 ? _a2 : frag.to;
        this.inner = new StructureCursor(frag.tree, -frag.offset);
      }
    }
    findMounts(pos, parser7) {
      var _a2;
      let result = [];
      if (this.inner) {
        this.inner.cursor.moveTo(pos, 1);
        for (let pos2 = this.inner.cursor.node; pos2; pos2 = pos2.parent) {
          let mount = (_a2 = pos2.tree) === null || _a2 === void 0 ? void 0 : _a2.prop(NodeProp.mounted);
          if (mount && mount.parser == parser7) {
            for (let i = this.fragI; i < this.fragments.length; i++) {
              let frag = this.fragments[i];
              if (frag.from >= pos2.to)
                break;
              if (frag.tree == this.curFrag.tree)
                result.push({
                  frag,
                  pos: pos2.from - frag.offset,
                  mount
                });
            }
          }
        }
      }
      return result;
    }
  };
  function punchRanges(outer, ranges) {
    let copy = null, current = ranges;
    for (let i = 1, j = 0; i < outer.length; i++) {
      let gapFrom = outer[i - 1].to, gapTo = outer[i].from;
      for (; j < current.length; j++) {
        let r = current[j];
        if (r.from >= gapTo)
          break;
        if (r.to <= gapFrom)
          continue;
        if (!copy)
          current = copy = ranges.slice();
        if (r.from < gapFrom) {
          copy[j] = new Range2(r.from, gapFrom);
          if (r.to > gapTo)
            copy.splice(j + 1, 0, new Range2(gapTo, r.to));
        } else if (r.to > gapTo) {
          copy[j--] = new Range2(gapTo, r.to);
        } else {
          copy.splice(j--, 1);
        }
      }
    }
    return current;
  }
  function findCoverChanges(a, b, from, to) {
    let iA = 0, iB = 0, inA = false, inB = false, pos = -1e9;
    let result = [];
    for (; ; ) {
      let nextA = iA == a.length ? 1e9 : inA ? a[iA].to : a[iA].from;
      let nextB = iB == b.length ? 1e9 : inB ? b[iB].to : b[iB].from;
      if (inA != inB) {
        let start = Math.max(pos, from), end = Math.min(nextA, nextB, to);
        if (start < end)
          result.push(new Range2(start, end));
      }
      pos = Math.min(nextA, nextB);
      if (pos == 1e9)
        break;
      if (nextA == pos) {
        if (!inA)
          inA = true;
        else {
          inA = false;
          iA++;
        }
      }
      if (nextB == pos) {
        if (!inB)
          inB = true;
        else {
          inB = false;
          iB++;
        }
      }
    }
    return result;
  }
  function enterFragments(mounts, ranges) {
    let result = [];
    for (let {pos, mount, frag} of mounts) {
      let startPos = pos + (mount.overlay ? mount.overlay[0].from : 0), endPos = startPos + mount.tree.length;
      let from = Math.max(frag.from, startPos), to = Math.min(frag.to, endPos);
      if (mount.overlay) {
        let overlay = mount.overlay.map((r) => new Range2(r.from + pos, r.to + pos));
        let changes = findCoverChanges(ranges, overlay, from, to);
        for (let i = 0, pos2 = from; ; i++) {
          let last = i == changes.length, end = last ? to : changes[i].from;
          if (end > pos2)
            result.push(new TreeFragment(pos2, end, mount.tree, -startPos, frag.from >= pos2 || frag.openStart, frag.to <= end || frag.openEnd));
          if (last)
            break;
          pos2 = changes[i].to;
        }
      } else {
        result.push(new TreeFragment(from, to, mount.tree, -startPos, frag.from >= startPos || frag.openStart, frag.to <= endPos || frag.openEnd));
      }
    }
    return result;
  }

  // node_modules/@lezer/highlight/dist/index.js
  var nextTagID = 0;
  var Tag = class {
    constructor(set, base2, modified) {
      this.set = set;
      this.base = base2;
      this.modified = modified;
      this.id = nextTagID++;
    }
    static define(parent) {
      if (parent === null || parent === void 0 ? void 0 : parent.base)
        throw new Error("Can not derive from a modified tag");
      let tag = new Tag([], null, []);
      tag.set.push(tag);
      if (parent)
        for (let t2 of parent.set)
          tag.set.push(t2);
      return tag;
    }
    static defineModifier() {
      let mod = new Modifier();
      return (tag) => {
        if (tag.modified.indexOf(mod) > -1)
          return tag;
        return Modifier.get(tag.base || tag, tag.modified.concat(mod).sort((a, b) => a.id - b.id));
      };
    }
  };
  var nextModifierID = 0;
  var Modifier = class {
    constructor() {
      this.instances = [];
      this.id = nextModifierID++;
    }
    static get(base2, mods) {
      if (!mods.length)
        return base2;
      let exists = mods[0].instances.find((t2) => t2.base == base2 && sameArray2(mods, t2.modified));
      if (exists)
        return exists;
      let set = [], tag = new Tag(set, base2, mods);
      for (let m of mods)
        m.instances.push(tag);
      let configs = powerSet(mods);
      for (let parent of base2.set)
        if (!parent.modified.length)
          for (let config of configs)
            set.push(Modifier.get(parent, config));
      return tag;
    }
  };
  function sameArray2(a, b) {
    return a.length == b.length && a.every((x, i) => x == b[i]);
  }
  function powerSet(array) {
    let sets = [[]];
    for (let i = 0; i < array.length; i++) {
      for (let j = 0, e = sets.length; j < e; j++) {
        sets.push(sets[j].concat(array[i]));
      }
    }
    return sets.sort((a, b) => b.length - a.length);
  }
  function styleTags(spec) {
    let byName = Object.create(null);
    for (let prop in spec) {
      let tags3 = spec[prop];
      if (!Array.isArray(tags3))
        tags3 = [tags3];
      for (let part of prop.split(" "))
        if (part) {
          let pieces = [], mode = 2, rest = part;
          for (let pos = 0; ; ) {
            if (rest == "..." && pos > 0 && pos + 3 == part.length) {
              mode = 1;
              break;
            }
            let m = /^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(rest);
            if (!m)
              throw new RangeError("Invalid path: " + part);
            pieces.push(m[0] == "*" ? "" : m[0][0] == '"' ? JSON.parse(m[0]) : m[0]);
            pos += m[0].length;
            if (pos == part.length)
              break;
            let next = part[pos++];
            if (pos == part.length && next == "!") {
              mode = 0;
              break;
            }
            if (next != "/")
              throw new RangeError("Invalid path: " + part);
            rest = part.slice(pos);
          }
          let last = pieces.length - 1, inner = pieces[last];
          if (!inner)
            throw new RangeError("Invalid path: " + part);
          let rule = new Rule(tags3, mode, last > 0 ? pieces.slice(0, last) : null);
          byName[inner] = rule.sort(byName[inner]);
        }
    }
    return ruleNodeProp.add(byName);
  }
  var ruleNodeProp = new NodeProp();
  var Rule = class {
    constructor(tags3, mode, context, next) {
      this.tags = tags3;
      this.mode = mode;
      this.context = context;
      this.next = next;
    }
    get opaque() {
      return this.mode == 0;
    }
    get inherit() {
      return this.mode == 1;
    }
    sort(other) {
      if (!other || other.depth < this.depth) {
        this.next = other;
        return this;
      }
      other.next = this.sort(other.next);
      return other;
    }
    get depth() {
      return this.context ? this.context.length : 0;
    }
  };
  Rule.empty = new Rule([], 2, null);
  function tagHighlighter(tags3, options) {
    let map = Object.create(null);
    for (let style of tags3) {
      if (!Array.isArray(style.tag))
        map[style.tag.id] = style.class;
      else
        for (let tag of style.tag)
          map[tag.id] = style.class;
    }
    let {scope, all = null} = options || {};
    return {
      style: (tags4) => {
        let cls = all;
        for (let tag of tags4) {
          for (let sub of tag.set) {
            let tagClass = map[sub.id];
            if (tagClass) {
              cls = cls ? cls + " " + tagClass : tagClass;
              break;
            }
          }
        }
        return cls;
      },
      scope
    };
  }
  function highlightTags(highlighters, tags3) {
    let result = null;
    for (let highlighter of highlighters) {
      let value = highlighter.style(tags3);
      if (value)
        result = result ? result + " " + value : value;
    }
    return result;
  }
  function highlightTree(tree, highlighter, putStyle, from = 0, to = tree.length) {
    let builder = new HighlightBuilder(from, Array.isArray(highlighter) ? highlighter : [highlighter], putStyle);
    builder.highlightRange(tree.cursor(), from, to, "", builder.highlighters);
    builder.flush(to);
  }
  var HighlightBuilder = class {
    constructor(at, highlighters, span) {
      this.at = at;
      this.highlighters = highlighters;
      this.span = span;
      this.class = "";
    }
    startSpan(at, cls) {
      if (cls != this.class) {
        this.flush(at);
        if (at > this.at)
          this.at = at;
        this.class = cls;
      }
    }
    flush(to) {
      if (to > this.at && this.class)
        this.span(this.at, to, this.class);
    }
    highlightRange(cursor, from, to, inheritedClass, highlighters) {
      let {type, from: start, to: end} = cursor;
      if (start >= to || end <= from)
        return;
      if (type.isTop)
        highlighters = this.highlighters.filter((h) => !h.scope || h.scope(type));
      let cls = inheritedClass;
      let rule = getStyleTags(cursor) || Rule.empty;
      let tagCls = highlightTags(highlighters, rule.tags);
      if (tagCls) {
        if (cls)
          cls += " ";
        cls += tagCls;
        if (rule.mode == 1)
          inheritedClass += (inheritedClass ? " " : "") + tagCls;
      }
      this.startSpan(cursor.from, cls);
      if (rule.opaque)
        return;
      let mounted = cursor.tree && cursor.tree.prop(NodeProp.mounted);
      if (mounted && mounted.overlay) {
        let inner = cursor.node.enter(mounted.overlay[0].from + start, 1);
        let innerHighlighters = this.highlighters.filter((h) => !h.scope || h.scope(mounted.tree.type));
        let hasChild2 = cursor.firstChild();
        for (let i = 0, pos = start; ; i++) {
          let next = i < mounted.overlay.length ? mounted.overlay[i] : null;
          let nextPos = next ? next.from + start : end;
          let rangeFrom = Math.max(from, pos), rangeTo = Math.min(to, nextPos);
          if (rangeFrom < rangeTo && hasChild2) {
            while (cursor.from < rangeTo) {
              this.highlightRange(cursor, rangeFrom, rangeTo, inheritedClass, highlighters);
              this.startSpan(Math.min(to, cursor.to), cls);
              if (cursor.to >= nextPos || !cursor.nextSibling())
                break;
            }
          }
          if (!next || nextPos > to)
            break;
          pos = next.to + start;
          if (pos > from) {
            this.highlightRange(inner.cursor(), Math.max(from, next.from + start), Math.min(to, pos), inheritedClass, innerHighlighters);
            this.startSpan(pos, cls);
          }
        }
        if (hasChild2)
          cursor.parent();
      } else if (cursor.firstChild()) {
        do {
          if (cursor.to <= from)
            continue;
          if (cursor.from >= to)
            break;
          this.highlightRange(cursor, from, to, inheritedClass, highlighters);
          this.startSpan(Math.min(to, cursor.to), cls);
        } while (cursor.nextSibling());
        cursor.parent();
      }
    }
  };
  function getStyleTags(node) {
    let rule = node.type.prop(ruleNodeProp);
    while (rule && rule.context && !node.matchContext(rule.context))
      rule = rule.next;
    return rule || null;
  }
  var t = Tag.define;
  var comment = t();
  var name = t();
  var typeName = t(name);
  var propertyName = t(name);
  var literal = t();
  var string = t(literal);
  var number = t(literal);
  var content = t();
  var heading = t(content);
  var keyword = t();
  var operator = t();
  var punctuation = t();
  var bracket = t(punctuation);
  var meta = t();
  var tags = {
    comment,
    lineComment: t(comment),
    blockComment: t(comment),
    docComment: t(comment),
    name,
    variableName: t(name),
    typeName,
    tagName: t(typeName),
    propertyName,
    attributeName: t(propertyName),
    className: t(name),
    labelName: t(name),
    namespace: t(name),
    macroName: t(name),
    literal,
    string,
    docString: t(string),
    character: t(string),
    attributeValue: t(string),
    number,
    integer: t(number),
    float: t(number),
    bool: t(literal),
    regexp: t(literal),
    escape: t(literal),
    color: t(literal),
    url: t(literal),
    keyword,
    self: t(keyword),
    null: t(keyword),
    atom: t(keyword),
    unit: t(keyword),
    modifier: t(keyword),
    operatorKeyword: t(keyword),
    controlKeyword: t(keyword),
    definitionKeyword: t(keyword),
    moduleKeyword: t(keyword),
    operator,
    derefOperator: t(operator),
    arithmeticOperator: t(operator),
    logicOperator: t(operator),
    bitwiseOperator: t(operator),
    compareOperator: t(operator),
    updateOperator: t(operator),
    definitionOperator: t(operator),
    typeOperator: t(operator),
    controlOperator: t(operator),
    punctuation,
    separator: t(punctuation),
    bracket,
    angleBracket: t(bracket),
    squareBracket: t(bracket),
    paren: t(bracket),
    brace: t(bracket),
    content,
    heading,
    heading1: t(heading),
    heading2: t(heading),
    heading3: t(heading),
    heading4: t(heading),
    heading5: t(heading),
    heading6: t(heading),
    contentSeparator: t(content),
    list: t(content),
    quote: t(content),
    emphasis: t(content),
    strong: t(content),
    link: t(content),
    monospace: t(content),
    strikethrough: t(content),
    inserted: t(),
    deleted: t(),
    changed: t(),
    invalid: t(),
    meta,
    documentMeta: t(meta),
    annotation: t(meta),
    processingInstruction: t(meta),
    definition: Tag.defineModifier(),
    constant: Tag.defineModifier(),
    function: Tag.defineModifier(),
    standard: Tag.defineModifier(),
    local: Tag.defineModifier(),
    special: Tag.defineModifier()
  };
  var classHighlighter = tagHighlighter([
    {tag: tags.link, class: "tok-link"},
    {tag: tags.heading, class: "tok-heading"},
    {tag: tags.emphasis, class: "tok-emphasis"},
    {tag: tags.strong, class: "tok-strong"},
    {tag: tags.keyword, class: "tok-keyword"},
    {tag: tags.atom, class: "tok-atom"},
    {tag: tags.bool, class: "tok-bool"},
    {tag: tags.url, class: "tok-url"},
    {tag: tags.labelName, class: "tok-labelName"},
    {tag: tags.inserted, class: "tok-inserted"},
    {tag: tags.deleted, class: "tok-deleted"},
    {tag: tags.literal, class: "tok-literal"},
    {tag: tags.string, class: "tok-string"},
    {tag: tags.number, class: "tok-number"},
    {tag: [tags.regexp, tags.escape, tags.special(tags.string)], class: "tok-string2"},
    {tag: tags.variableName, class: "tok-variableName"},
    {tag: tags.local(tags.variableName), class: "tok-variableName tok-local"},
    {tag: tags.definition(tags.variableName), class: "tok-variableName tok-definition"},
    {tag: tags.special(tags.variableName), class: "tok-variableName2"},
    {tag: tags.definition(tags.propertyName), class: "tok-propertyName tok-definition"},
    {tag: tags.typeName, class: "tok-typeName"},
    {tag: tags.namespace, class: "tok-namespace"},
    {tag: tags.className, class: "tok-className"},
    {tag: tags.macroName, class: "tok-macroName"},
    {tag: tags.propertyName, class: "tok-propertyName"},
    {tag: tags.operator, class: "tok-operator"},
    {tag: tags.comment, class: "tok-comment"},
    {tag: tags.meta, class: "tok-meta"},
    {tag: tags.invalid, class: "tok-invalid"},
    {tag: tags.punctuation, class: "tok-punctuation"}
  ]);

  // node_modules/@codemirror/language/dist/index.js
  var _a;
  var languageDataProp = /* @__PURE__ */ new NodeProp();
  function defineLanguageFacet(baseData) {
    return Facet.define({
      combine: baseData ? (values2) => values2.concat(baseData) : void 0
    });
  }
  var Language = class {
    constructor(data2, parser7, extraExtensions = [], name2 = "") {
      this.data = data2;
      this.name = name2;
      if (!EditorState.prototype.hasOwnProperty("tree"))
        Object.defineProperty(EditorState.prototype, "tree", {get() {
          return syntaxTree(this);
        }});
      this.parser = parser7;
      this.extension = [
        language.of(this),
        EditorState.languageData.of((state, pos, side) => state.facet(languageDataFacetAt(state, pos, side)))
      ].concat(extraExtensions);
    }
    isActiveAt(state, pos, side = -1) {
      return languageDataFacetAt(state, pos, side) == this.data;
    }
    findRegions(state) {
      let lang = state.facet(language);
      if ((lang === null || lang === void 0 ? void 0 : lang.data) == this.data)
        return [{from: 0, to: state.doc.length}];
      if (!lang || !lang.allowsNesting)
        return [];
      let result = [];
      let explore = (tree, from) => {
        if (tree.prop(languageDataProp) == this.data) {
          result.push({from, to: from + tree.length});
          return;
        }
        let mount = tree.prop(NodeProp.mounted);
        if (mount) {
          if (mount.tree.prop(languageDataProp) == this.data) {
            if (mount.overlay)
              for (let r of mount.overlay)
                result.push({from: r.from + from, to: r.to + from});
            else
              result.push({from, to: from + tree.length});
            return;
          } else if (mount.overlay) {
            let size = result.length;
            explore(mount.tree, mount.overlay[0].from + from);
            if (result.length > size)
              return;
          }
        }
        for (let i = 0; i < tree.children.length; i++) {
          let ch = tree.children[i];
          if (ch instanceof Tree)
            explore(ch, tree.positions[i] + from);
        }
      };
      explore(syntaxTree(state), 0);
      return result;
    }
    get allowsNesting() {
      return true;
    }
  };
  Language.setState = /* @__PURE__ */ StateEffect.define();
  function languageDataFacetAt(state, pos, side) {
    let topLang = state.facet(language);
    if (!topLang)
      return null;
    let facet = topLang.data;
    if (topLang.allowsNesting) {
      for (let node = syntaxTree(state).topNode; node; node = node.enter(pos, side, IterMode.ExcludeBuffers))
        facet = node.type.prop(languageDataProp) || facet;
    }
    return facet;
  }
  var LRLanguage = class extends Language {
    constructor(data2, parser7, name2) {
      super(data2, parser7, [], name2);
      this.parser = parser7;
    }
    static define(spec) {
      let data2 = defineLanguageFacet(spec.languageData);
      return new LRLanguage(data2, spec.parser.configure({
        props: [languageDataProp.add((type) => type.isTop ? data2 : void 0)]
      }), spec.name);
    }
    configure(options, name2) {
      return new LRLanguage(this.data, this.parser.configure(options), name2 || this.name);
    }
    get allowsNesting() {
      return this.parser.hasWrappers();
    }
  };
  function syntaxTree(state) {
    let field = state.field(Language.state, false);
    return field ? field.tree : Tree.empty;
  }
  var DocInput = class {
    constructor(doc2, length = doc2.length) {
      this.doc = doc2;
      this.length = length;
      this.cursorPos = 0;
      this.string = "";
      this.cursor = doc2.iter();
    }
    syncTo(pos) {
      this.string = this.cursor.next(pos - this.cursorPos).value;
      this.cursorPos = pos + this.string.length;
      return this.cursorPos - this.string.length;
    }
    chunk(pos) {
      this.syncTo(pos);
      return this.string;
    }
    get lineChunks() {
      return true;
    }
    read(from, to) {
      let stringStart = this.cursorPos - this.string.length;
      if (from < stringStart || to >= this.cursorPos)
        return this.doc.sliceString(from, to);
      else
        return this.string.slice(from - stringStart, to - stringStart);
    }
  };
  var currentContext = null;
  var ParseContext = class {
    constructor(parser7, state, fragments = [], tree, treeLen, viewport, skipped, scheduleOn) {
      this.parser = parser7;
      this.state = state;
      this.fragments = fragments;
      this.tree = tree;
      this.treeLen = treeLen;
      this.viewport = viewport;
      this.skipped = skipped;
      this.scheduleOn = scheduleOn;
      this.parse = null;
      this.tempSkipped = [];
    }
    static create(parser7, state, viewport) {
      return new ParseContext(parser7, state, [], Tree.empty, 0, viewport, [], null);
    }
    startParse() {
      return this.parser.startParse(new DocInput(this.state.doc), this.fragments);
    }
    work(until, upto) {
      if (upto != null && upto >= this.state.doc.length)
        upto = void 0;
      if (this.tree != Tree.empty && this.isDone(upto !== null && upto !== void 0 ? upto : this.state.doc.length)) {
        this.takeTree();
        return true;
      }
      return this.withContext(() => {
        var _a2;
        if (typeof until == "number") {
          let endTime = Date.now() + until;
          until = () => Date.now() > endTime;
        }
        if (!this.parse)
          this.parse = this.startParse();
        if (upto != null && (this.parse.stoppedAt == null || this.parse.stoppedAt > upto) && upto < this.state.doc.length)
          this.parse.stopAt(upto);
        for (; ; ) {
          let done = this.parse.advance();
          if (done) {
            this.fragments = this.withoutTempSkipped(TreeFragment.addTree(done, this.fragments, this.parse.stoppedAt != null));
            this.treeLen = (_a2 = this.parse.stoppedAt) !== null && _a2 !== void 0 ? _a2 : this.state.doc.length;
            this.tree = done;
            this.parse = null;
            if (this.treeLen < (upto !== null && upto !== void 0 ? upto : this.state.doc.length))
              this.parse = this.startParse();
            else
              return true;
          }
          if (until())
            return false;
        }
      });
    }
    takeTree() {
      let pos, tree;
      if (this.parse && (pos = this.parse.parsedPos) >= this.treeLen) {
        if (this.parse.stoppedAt == null || this.parse.stoppedAt > pos)
          this.parse.stopAt(pos);
        this.withContext(() => {
          while (!(tree = this.parse.advance())) {
          }
        });
        this.treeLen = pos;
        this.tree = tree;
        this.fragments = this.withoutTempSkipped(TreeFragment.addTree(this.tree, this.fragments, true));
        this.parse = null;
      }
    }
    withContext(f) {
      let prev = currentContext;
      currentContext = this;
      try {
        return f();
      } finally {
        currentContext = prev;
      }
    }
    withoutTempSkipped(fragments) {
      for (let r; r = this.tempSkipped.pop(); )
        fragments = cutFragments(fragments, r.from, r.to);
      return fragments;
    }
    changes(changes, newState) {
      let {fragments, tree, treeLen, viewport, skipped} = this;
      this.takeTree();
      if (!changes.empty) {
        let ranges = [];
        changes.iterChangedRanges((fromA, toA, fromB, toB) => ranges.push({fromA, toA, fromB, toB}));
        fragments = TreeFragment.applyChanges(fragments, ranges);
        tree = Tree.empty;
        treeLen = 0;
        viewport = {from: changes.mapPos(viewport.from, -1), to: changes.mapPos(viewport.to, 1)};
        if (this.skipped.length) {
          skipped = [];
          for (let r of this.skipped) {
            let from = changes.mapPos(r.from, 1), to = changes.mapPos(r.to, -1);
            if (from < to)
              skipped.push({from, to});
          }
        }
      }
      return new ParseContext(this.parser, newState, fragments, tree, treeLen, viewport, skipped, this.scheduleOn);
    }
    updateViewport(viewport) {
      if (this.viewport.from == viewport.from && this.viewport.to == viewport.to)
        return false;
      this.viewport = viewport;
      let startLen = this.skipped.length;
      for (let i = 0; i < this.skipped.length; i++) {
        let {from, to} = this.skipped[i];
        if (from < viewport.to && to > viewport.from) {
          this.fragments = cutFragments(this.fragments, from, to);
          this.skipped.splice(i--, 1);
        }
      }
      if (this.skipped.length >= startLen)
        return false;
      this.reset();
      return true;
    }
    reset() {
      if (this.parse) {
        this.takeTree();
        this.parse = null;
      }
    }
    skipUntilInView(from, to) {
      this.skipped.push({from, to});
    }
    static getSkippingParser(until) {
      return new class extends Parser {
        createParse(input, fragments, ranges) {
          let from = ranges[0].from, to = ranges[ranges.length - 1].to;
          let parser7 = {
            parsedPos: from,
            advance() {
              let cx = currentContext;
              if (cx) {
                for (let r of ranges)
                  cx.tempSkipped.push(r);
                if (until)
                  cx.scheduleOn = cx.scheduleOn ? Promise.all([cx.scheduleOn, until]) : until;
              }
              this.parsedPos = to;
              return new Tree(NodeType.none, [], [], to - from);
            },
            stoppedAt: null,
            stopAt() {
            }
          };
          return parser7;
        }
      }();
    }
    isDone(upto) {
      upto = Math.min(upto, this.state.doc.length);
      let frags = this.fragments;
      return this.treeLen >= upto && frags.length && frags[0].from == 0 && frags[0].to >= upto;
    }
    static get() {
      return currentContext;
    }
  };
  function cutFragments(fragments, from, to) {
    return TreeFragment.applyChanges(fragments, [{fromA: from, toA: to, fromB: from, toB: to}]);
  }
  var LanguageState = class {
    constructor(context) {
      this.context = context;
      this.tree = context.tree;
    }
    apply(tr) {
      if (!tr.docChanged && this.tree == this.context.tree)
        return this;
      let newCx = this.context.changes(tr.changes, tr.state);
      let upto = this.context.treeLen == tr.startState.doc.length ? void 0 : Math.max(tr.changes.mapPos(this.context.treeLen), newCx.viewport.to);
      if (!newCx.work(20, upto))
        newCx.takeTree();
      return new LanguageState(newCx);
    }
    static init(state) {
      let vpTo = Math.min(3e3, state.doc.length);
      let parseState = ParseContext.create(state.facet(language).parser, state, {from: 0, to: vpTo});
      if (!parseState.work(20, vpTo))
        parseState.takeTree();
      return new LanguageState(parseState);
    }
  };
  Language.state = /* @__PURE__ */ StateField.define({
    create: LanguageState.init,
    update(value, tr) {
      for (let e of tr.effects)
        if (e.is(Language.setState))
          return e.value;
      if (tr.startState.facet(language) != tr.state.facet(language))
        return LanguageState.init(tr.state);
      return value.apply(tr);
    }
  });
  var requestIdle = (callback) => {
    let timeout = setTimeout(() => callback(), 500);
    return () => clearTimeout(timeout);
  };
  if (typeof requestIdleCallback != "undefined")
    requestIdle = (callback) => {
      let idle = -1, timeout = setTimeout(() => {
        idle = requestIdleCallback(callback, {timeout: 500 - 100});
      }, 100);
      return () => idle < 0 ? clearTimeout(timeout) : cancelIdleCallback(idle);
    };
  var isInputPending = typeof navigator != "undefined" && ((_a = navigator.scheduling) === null || _a === void 0 ? void 0 : _a.isInputPending) ? () => navigator.scheduling.isInputPending() : null;
  var parseWorker = /* @__PURE__ */ ViewPlugin.fromClass(class ParseWorker {
    constructor(view) {
      this.view = view;
      this.working = null;
      this.workScheduled = 0;
      this.chunkEnd = -1;
      this.chunkBudget = -1;
      this.work = this.work.bind(this);
      this.scheduleWork();
    }
    update(update) {
      let cx = this.view.state.field(Language.state).context;
      if (cx.updateViewport(update.view.viewport) || this.view.viewport.to > cx.treeLen)
        this.scheduleWork();
      if (update.docChanged) {
        if (this.view.hasFocus)
          this.chunkBudget += 50;
        this.scheduleWork();
      }
      this.checkAsyncSchedule(cx);
    }
    scheduleWork() {
      if (this.working)
        return;
      let {state} = this.view, field = state.field(Language.state);
      if (field.tree != field.context.tree || !field.context.isDone(state.doc.length))
        this.working = requestIdle(this.work);
    }
    work(deadline) {
      this.working = null;
      let now = Date.now();
      if (this.chunkEnd < now && (this.chunkEnd < 0 || this.view.hasFocus)) {
        this.chunkEnd = now + 3e4;
        this.chunkBudget = 3e3;
      }
      if (this.chunkBudget <= 0)
        return;
      let {state, viewport: {to: vpTo}} = this.view, field = state.field(Language.state);
      if (field.tree == field.context.tree && field.context.isDone(vpTo + 1e5))
        return;
      let endTime = Date.now() + Math.min(this.chunkBudget, 100, deadline && !isInputPending ? Math.max(25, deadline.timeRemaining() - 5) : 1e9);
      let viewportFirst = field.context.treeLen < vpTo && state.doc.length > vpTo + 1e3;
      let done = field.context.work(() => {
        return isInputPending && isInputPending() || Date.now() > endTime;
      }, vpTo + (viewportFirst ? 0 : 1e5));
      this.chunkBudget -= Date.now() - now;
      if (done || this.chunkBudget <= 0) {
        field.context.takeTree();
        this.view.dispatch({effects: Language.setState.of(new LanguageState(field.context))});
      }
      if (this.chunkBudget > 0 && !(done && !viewportFirst))
        this.scheduleWork();
      this.checkAsyncSchedule(field.context);
    }
    checkAsyncSchedule(cx) {
      if (cx.scheduleOn) {
        this.workScheduled++;
        cx.scheduleOn.then(() => this.scheduleWork()).catch((err) => logException(this.view.state, err)).then(() => this.workScheduled--);
        cx.scheduleOn = null;
      }
    }
    destroy() {
      if (this.working)
        this.working();
    }
    isWorking() {
      return !!(this.working || this.workScheduled > 0);
    }
  }, {
    eventHandlers: {focus() {
      this.scheduleWork();
    }}
  });
  var language = /* @__PURE__ */ Facet.define({
    combine(languages) {
      return languages.length ? languages[0] : null;
    },
    enables: (language2) => [
      Language.state,
      parseWorker,
      EditorView.contentAttributes.compute([language2], (state) => {
        let lang = state.facet(language2);
        return lang && lang.name ? {"data-language": lang.name} : {};
      })
    ]
  });
  var LanguageSupport = class {
    constructor(language2, support = []) {
      this.language = language2;
      this.support = support;
      this.extension = [language2, support];
    }
  };
  var LanguageDescription = class {
    constructor(name2, alias, extensions, filename, loadFunc, support = void 0) {
      this.name = name2;
      this.alias = alias;
      this.extensions = extensions;
      this.filename = filename;
      this.loadFunc = loadFunc;
      this.support = support;
      this.loading = null;
    }
    load() {
      return this.loading || (this.loading = this.loadFunc().then((support) => this.support = support, (err) => {
        this.loading = null;
        throw err;
      }));
    }
    static of(spec) {
      let {load, support} = spec;
      if (!load) {
        if (!support)
          throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");
        load = () => Promise.resolve(support);
      }
      return new LanguageDescription(spec.name, (spec.alias || []).concat(spec.name).map((s) => s.toLowerCase()), spec.extensions || [], spec.filename, load, support);
    }
    static matchFilename(descs, filename) {
      for (let d of descs)
        if (d.filename && d.filename.test(filename))
          return d;
      let ext = /\.([^.]+)$/.exec(filename);
      if (ext) {
        for (let d of descs)
          if (d.extensions.indexOf(ext[1]) > -1)
            return d;
      }
      return null;
    }
    static matchLanguageName(descs, name2, fuzzy = true) {
      name2 = name2.toLowerCase();
      for (let d of descs)
        if (d.alias.some((a) => a == name2))
          return d;
      if (fuzzy)
        for (let d of descs)
          for (let a of d.alias) {
            let found = name2.indexOf(a);
            if (found > -1 && (a.length > 2 || !/\w/.test(name2[found - 1]) && !/\w/.test(name2[found + a.length])))
              return d;
          }
      return null;
    }
  };
  var indentUnit = /* @__PURE__ */ Facet.define({
    combine: (values2) => {
      if (!values2.length)
        return "  ";
      if (!/^(?: +|\t+)$/.test(values2[0]))
        throw new Error("Invalid indent unit: " + JSON.stringify(values2[0]));
      return values2[0];
    }
  });
  function getIndentUnit(state) {
    let unit = state.facet(indentUnit);
    return unit.charCodeAt(0) == 9 ? state.tabSize * unit.length : unit.length;
  }
  function indentString(state, cols) {
    let result = "", ts = state.tabSize;
    if (state.facet(indentUnit).charCodeAt(0) == 9)
      while (cols >= ts) {
        result += "	";
        cols -= ts;
      }
    for (let i = 0; i < cols; i++)
      result += " ";
    return result;
  }
  var indentNodeProp = /* @__PURE__ */ new NodeProp();
  function bracketedAligned(context) {
    let tree = context.node;
    let openToken = tree.childAfter(tree.from), last = tree.lastChild;
    if (!openToken)
      return null;
    let sim = context.options.simulateBreak;
    let openLine = context.state.doc.lineAt(openToken.from);
    let lineEnd2 = sim == null || sim <= openLine.from ? openLine.to : Math.min(openLine.to, sim);
    for (let pos = openToken.to; ; ) {
      let next = tree.childAfter(pos);
      if (!next || next == last)
        return null;
      if (!next.type.isSkipped)
        return next.from < lineEnd2 ? openToken : null;
      pos = next.to;
    }
  }
  function delimitedIndent({closing, align = true, units = 1}) {
    return (context) => delimitedStrategy(context, align, units, closing);
  }
  function delimitedStrategy(context, align, units, closing, closedAt) {
    let after = context.textAfter, space4 = after.match(/^\s*/)[0].length;
    let closed = closing && after.slice(space4, space4 + closing.length) == closing || closedAt == context.pos + space4;
    let aligned = align ? bracketedAligned(context) : null;
    if (aligned)
      return closed ? context.column(aligned.from) : context.column(aligned.to);
    return context.baseIndent + (closed ? 0 : context.unit * units);
  }
  var flatIndent = (context) => context.baseIndent;
  function continuedIndent({except, units = 1} = {}) {
    return (context) => {
      let matchExcept = except && except.test(context.textAfter);
      return context.baseIndent + (matchExcept ? 0 : units * context.unit);
    };
  }
  var foldNodeProp = /* @__PURE__ */ new NodeProp();
  function foldInside(node) {
    let first = node.firstChild, last = node.lastChild;
    return first && first.to < last.from ? {from: first.to, to: last.type.isError ? node.to : last.from} : null;
  }
  var HighlightStyle = class {
    constructor(specs, options) {
      this.specs = specs;
      let modSpec;
      function def(spec) {
        let cls = StyleModule.newName();
        (modSpec || (modSpec = Object.create(null)))["." + cls] = spec;
        return cls;
      }
      const all = typeof options.all == "string" ? options.all : options.all ? def(options.all) : void 0;
      const scopeOpt = options.scope;
      this.scope = scopeOpt instanceof Language ? (type) => type.prop(languageDataProp) == scopeOpt.data : scopeOpt ? (type) => type == scopeOpt : void 0;
      this.style = tagHighlighter(specs.map((style) => ({
        tag: style.tag,
        class: style.class || def(Object.assign({}, style, {tag: null}))
      })), {
        all
      }).style;
      this.module = modSpec ? new StyleModule(modSpec) : null;
      this.themeType = options.themeType;
    }
    static define(specs, options) {
      return new HighlightStyle(specs, options || {});
    }
  };
  var highlighterFacet = /* @__PURE__ */ Facet.define();
  var fallbackHighlighter = /* @__PURE__ */ Facet.define({
    combine(values2) {
      return values2.length ? [values2[0]] : null;
    }
  });
  function getHighlighters(state) {
    let main = state.facet(highlighterFacet);
    return main.length ? main : state.facet(fallbackHighlighter);
  }
  function syntaxHighlighting(highlighter, options) {
    let ext = [treeHighlighter], themeType;
    if (highlighter instanceof HighlightStyle) {
      if (highlighter.module)
        ext.push(EditorView.styleModule.of(highlighter.module));
      themeType = highlighter.themeType;
    }
    if (options === null || options === void 0 ? void 0 : options.fallback)
      ext.push(fallbackHighlighter.of(highlighter));
    else if (themeType)
      ext.push(highlighterFacet.computeN([EditorView.darkTheme], (state) => {
        return state.facet(EditorView.darkTheme) == (themeType == "dark") ? [highlighter] : [];
      }));
    else
      ext.push(highlighterFacet.of(highlighter));
    return ext;
  }
  var TreeHighlighter = class {
    constructor(view) {
      this.markCache = Object.create(null);
      this.tree = syntaxTree(view.state);
      this.decorations = this.buildDeco(view, getHighlighters(view.state));
    }
    update(update) {
      let tree = syntaxTree(update.state), highlighters = getHighlighters(update.state);
      let styleChange = highlighters != getHighlighters(update.startState);
      if (tree.length < update.view.viewport.to && !styleChange && tree.type == this.tree.type) {
        this.decorations = this.decorations.map(update.changes);
      } else if (tree != this.tree || update.viewportChanged || styleChange) {
        this.tree = tree;
        this.decorations = this.buildDeco(update.view, highlighters);
      }
    }
    buildDeco(view, highlighters) {
      if (!highlighters || !this.tree.length)
        return Decoration.none;
      let builder = new RangeSetBuilder();
      for (let {from, to} of view.visibleRanges) {
        highlightTree(this.tree, highlighters, (from2, to2, style) => {
          builder.add(from2, to2, this.markCache[style] || (this.markCache[style] = Decoration.mark({class: style})));
        }, from, to);
      }
      return builder.finish();
    }
  };
  var treeHighlighter = /* @__PURE__ */ Prec.high(/* @__PURE__ */ ViewPlugin.fromClass(TreeHighlighter, {
    decorations: (v) => v.decorations
  }));
  var defaultHighlightStyle = /* @__PURE__ */ HighlightStyle.define([
    {
      tag: tags.meta,
      color: "#7a757a"
    },
    {
      tag: tags.link,
      textDecoration: "underline"
    },
    {
      tag: tags.heading,
      textDecoration: "underline",
      fontWeight: "bold"
    },
    {
      tag: tags.emphasis,
      fontStyle: "italic"
    },
    {
      tag: tags.strong,
      fontWeight: "bold"
    },
    {
      tag: tags.strikethrough,
      textDecoration: "line-through"
    },
    {
      tag: tags.keyword,
      color: "#708"
    },
    {
      tag: [tags.atom, tags.bool, tags.url, tags.contentSeparator, tags.labelName],
      color: "#219"
    },
    {
      tag: [tags.literal, tags.inserted],
      color: "#164"
    },
    {
      tag: [tags.string, tags.deleted],
      color: "#a11"
    },
    {
      tag: [tags.regexp, tags.escape, /* @__PURE__ */ tags.special(tags.string)],
      color: "#e40"
    },
    {
      tag: /* @__PURE__ */ tags.definition(tags.variableName),
      color: "#00f"
    },
    {
      tag: /* @__PURE__ */ tags.local(tags.variableName),
      color: "#30a"
    },
    {
      tag: [tags.typeName, tags.namespace],
      color: "#085"
    },
    {
      tag: tags.className,
      color: "#167"
    },
    {
      tag: [/* @__PURE__ */ tags.special(tags.variableName), tags.macroName],
      color: "#256"
    },
    {
      tag: /* @__PURE__ */ tags.definition(tags.propertyName),
      color: "#00c"
    },
    {
      tag: tags.comment,
      color: "#940"
    },
    {
      tag: tags.invalid,
      color: "#f00"
    }
  ]);
  var noTokens = /* @__PURE__ */ Object.create(null);
  var typeArray = [NodeType.none];
  var warned = [];
  var defaultTable = /* @__PURE__ */ Object.create(null);
  for (let [legacyName, name2] of [
    ["variable", "variableName"],
    ["variable-2", "variableName.special"],
    ["string-2", "string.special"],
    ["def", "variableName.definition"],
    ["tag", "tagName"],
    ["attribute", "attributeName"],
    ["type", "typeName"],
    ["builtin", "variableName.standard"],
    ["qualifier", "modifier"],
    ["error", "invalid"],
    ["header", "heading"],
    ["property", "propertyName"]
  ])
    defaultTable[legacyName] = /* @__PURE__ */ createTokenType(noTokens, name2);
  function warnForPart(part, msg) {
    if (warned.indexOf(part) > -1)
      return;
    warned.push(part);
    console.warn(msg);
  }
  function createTokenType(extra, tagStr) {
    let tag = null;
    for (let part of tagStr.split(".")) {
      let value = extra[part] || tags[part];
      if (!value) {
        warnForPart(part, `Unknown highlighting tag ${part}`);
      } else if (typeof value == "function") {
        if (!tag)
          warnForPart(part, `Modifier ${part} used at start of tag`);
        else
          tag = value(tag);
      } else {
        if (tag)
          warnForPart(part, `Tag ${part} used as modifier`);
        else
          tag = value;
      }
    }
    if (!tag)
      return 0;
    let name2 = tagStr.replace(/ /g, "_"), type = NodeType.define({
      id: typeArray.length,
      name: name2,
      props: [styleTags({[name2]: tag})]
    });
    typeArray.push(type);
    return type.id;
  }

  // node_modules/@codemirror/commands/dist/index.js
  var fromHistory = /* @__PURE__ */ Annotation.define();
  var invertedEffects = /* @__PURE__ */ Facet.define();
  var HistEvent = class {
    constructor(changes, effects, mapped, startSelection, selectionsAfter) {
      this.changes = changes;
      this.effects = effects;
      this.mapped = mapped;
      this.startSelection = startSelection;
      this.selectionsAfter = selectionsAfter;
    }
    setSelAfter(after) {
      return new HistEvent(this.changes, this.effects, this.mapped, this.startSelection, after);
    }
    toJSON() {
      var _a2, _b, _c;
      return {
        changes: (_a2 = this.changes) === null || _a2 === void 0 ? void 0 : _a2.toJSON(),
        mapped: (_b = this.mapped) === null || _b === void 0 ? void 0 : _b.toJSON(),
        startSelection: (_c = this.startSelection) === null || _c === void 0 ? void 0 : _c.toJSON(),
        selectionsAfter: this.selectionsAfter.map((s) => s.toJSON())
      };
    }
    static fromJSON(json2) {
      return new HistEvent(json2.changes && ChangeSet.fromJSON(json2.changes), [], json2.mapped && ChangeDesc.fromJSON(json2.mapped), json2.startSelection && EditorSelection.fromJSON(json2.startSelection), json2.selectionsAfter.map(EditorSelection.fromJSON));
    }
    static fromTransaction(tr, selection) {
      let effects = none2;
      for (let invert of tr.startState.facet(invertedEffects)) {
        let result = invert(tr);
        if (result.length)
          effects = effects.concat(result);
      }
      if (!effects.length && tr.changes.empty)
        return null;
      return new HistEvent(tr.changes.invert(tr.startState.doc), effects, void 0, selection || tr.startState.selection, none2);
    }
    static selection(selections) {
      return new HistEvent(void 0, none2, void 0, void 0, selections);
    }
  };
  function updateBranch(branch, to, maxLen, newEvent) {
    let start = to + 1 > maxLen + 20 ? to - maxLen - 1 : 0;
    let newBranch = branch.slice(start, to);
    newBranch.push(newEvent);
    return newBranch;
  }
  function isAdjacent(a, b) {
    let ranges = [], isAdjacent2 = false;
    a.iterChangedRanges((f, t2) => ranges.push(f, t2));
    b.iterChangedRanges((_f, _t, f, t2) => {
      for (let i = 0; i < ranges.length; ) {
        let from = ranges[i++], to = ranges[i++];
        if (t2 >= from && f <= to)
          isAdjacent2 = true;
      }
    });
    return isAdjacent2;
  }
  function eqSelectionShape(a, b) {
    return a.ranges.length == b.ranges.length && a.ranges.filter((r, i) => r.empty != b.ranges[i].empty).length === 0;
  }
  function conc(a, b) {
    return !a.length ? b : !b.length ? a : a.concat(b);
  }
  var none2 = [];
  var MaxSelectionsPerEvent = 200;
  function addSelection(branch, selection) {
    if (!branch.length) {
      return [HistEvent.selection([selection])];
    } else {
      let lastEvent = branch[branch.length - 1];
      let sels = lastEvent.selectionsAfter.slice(Math.max(0, lastEvent.selectionsAfter.length - MaxSelectionsPerEvent));
      if (sels.length && sels[sels.length - 1].eq(selection))
        return branch;
      sels.push(selection);
      return updateBranch(branch, branch.length - 1, 1e9, lastEvent.setSelAfter(sels));
    }
  }
  function popSelection(branch) {
    let last = branch[branch.length - 1];
    let newBranch = branch.slice();
    newBranch[branch.length - 1] = last.setSelAfter(last.selectionsAfter.slice(0, last.selectionsAfter.length - 1));
    return newBranch;
  }
  function addMappingToBranch(branch, mapping) {
    if (!branch.length)
      return branch;
    let length = branch.length, selections = none2;
    while (length) {
      let event = mapEvent(branch[length - 1], mapping, selections);
      if (event.changes && !event.changes.empty || event.effects.length) {
        let result = branch.slice(0, length);
        result[length - 1] = event;
        return result;
      } else {
        mapping = event.mapped;
        length--;
        selections = event.selectionsAfter;
      }
    }
    return selections.length ? [HistEvent.selection(selections)] : none2;
  }
  function mapEvent(event, mapping, extraSelections) {
    let selections = conc(event.selectionsAfter.length ? event.selectionsAfter.map((s) => s.map(mapping)) : none2, extraSelections);
    if (!event.changes)
      return HistEvent.selection(selections);
    let mappedChanges = event.changes.map(mapping), before = mapping.mapDesc(event.changes, true);
    let fullMapping = event.mapped ? event.mapped.composeDesc(before) : before;
    return new HistEvent(mappedChanges, StateEffect.mapEffects(event.effects, mapping), fullMapping, event.startSelection.map(before), selections);
  }
  var joinableUserEvent = /^(input\.type|delete)($|\.)/;
  var HistoryState = class {
    constructor(done, undone, prevTime = 0, prevUserEvent = void 0) {
      this.done = done;
      this.undone = undone;
      this.prevTime = prevTime;
      this.prevUserEvent = prevUserEvent;
    }
    isolate() {
      return this.prevTime ? new HistoryState(this.done, this.undone) : this;
    }
    addChanges(event, time, userEvent, newGroupDelay, maxLen) {
      let done = this.done, lastEvent = done[done.length - 1];
      if (lastEvent && lastEvent.changes && !lastEvent.changes.empty && event.changes && (!userEvent || joinableUserEvent.test(userEvent)) && (!lastEvent.selectionsAfter.length && time - this.prevTime < newGroupDelay && isAdjacent(lastEvent.changes, event.changes) || userEvent == "input.type.compose")) {
        done = updateBranch(done, done.length - 1, maxLen, new HistEvent(event.changes.compose(lastEvent.changes), conc(event.effects, lastEvent.effects), lastEvent.mapped, lastEvent.startSelection, none2));
      } else {
        done = updateBranch(done, done.length, maxLen, event);
      }
      return new HistoryState(done, none2, time, userEvent);
    }
    addSelection(selection, time, userEvent, newGroupDelay) {
      let last = this.done.length ? this.done[this.done.length - 1].selectionsAfter : none2;
      if (last.length > 0 && time - this.prevTime < newGroupDelay && userEvent == this.prevUserEvent && userEvent && /^select($|\.)/.test(userEvent) && eqSelectionShape(last[last.length - 1], selection))
        return this;
      return new HistoryState(addSelection(this.done, selection), this.undone, time, userEvent);
    }
    addMapping(mapping) {
      return new HistoryState(addMappingToBranch(this.done, mapping), addMappingToBranch(this.undone, mapping), this.prevTime, this.prevUserEvent);
    }
    pop(side, state, selection) {
      let branch = side == 0 ? this.done : this.undone;
      if (branch.length == 0)
        return null;
      let event = branch[branch.length - 1];
      if (selection && event.selectionsAfter.length) {
        return state.update({
          selection: event.selectionsAfter[event.selectionsAfter.length - 1],
          annotations: fromHistory.of({side, rest: popSelection(branch)}),
          userEvent: side == 0 ? "select.undo" : "select.redo",
          scrollIntoView: true
        });
      } else if (!event.changes) {
        return null;
      } else {
        let rest = branch.length == 1 ? none2 : branch.slice(0, branch.length - 1);
        if (event.mapped)
          rest = addMappingToBranch(rest, event.mapped);
        return state.update({
          changes: event.changes,
          selection: event.startSelection,
          effects: event.effects,
          annotations: fromHistory.of({side, rest}),
          filter: false,
          userEvent: side == 0 ? "undo" : "redo",
          scrollIntoView: true
        });
      }
    }
  };
  HistoryState.empty = /* @__PURE__ */ new HistoryState(none2, none2);
  function changeBySelectedLine(state, f) {
    let atLine = -1;
    return state.changeByRange((range) => {
      let changes = [];
      for (let pos = range.from; pos <= range.to; ) {
        let line = state.doc.lineAt(pos);
        if (line.number > atLine && (range.empty || range.to > line.from)) {
          f(line, changes, range);
          atLine = line.number;
        }
        pos = line.to + 1;
      }
      let changeSet = state.changes(changes);
      return {
        changes,
        range: EditorSelection.range(changeSet.mapPos(range.anchor, 1), changeSet.mapPos(range.head, 1))
      };
    });
  }
  var indentMore = ({state, dispatch}) => {
    if (state.readOnly)
      return false;
    dispatch(state.update(changeBySelectedLine(state, (line, changes) => {
      changes.push({from: line.from, insert: state.facet(indentUnit)});
    }), {userEvent: "input.indent"}));
    return true;
  };
  var indentLess = ({state, dispatch}) => {
    if (state.readOnly)
      return false;
    dispatch(state.update(changeBySelectedLine(state, (line, changes) => {
      let space4 = /^\s*/.exec(line.text)[0];
      if (!space4)
        return;
      let col = countColumn(space4, state.tabSize), keep = 0;
      let insert2 = indentString(state, Math.max(0, col - getIndentUnit(state)));
      while (keep < space4.length && keep < insert2.length && space4.charCodeAt(keep) == insert2.charCodeAt(keep))
        keep++;
      changes.push({from: line.from + keep, to: line.from + space4.length, insert: insert2.slice(keep)});
    }), {userEvent: "delete.dedent"}));
    return true;
  };
  var indentWithTab = {key: "Tab", run: indentMore, shift: indentLess};

  // node_modules/@codemirror/autocomplete/dist/index.js
  var CompletionContext = class {
    constructor(state, pos, explicit) {
      this.state = state;
      this.pos = pos;
      this.explicit = explicit;
      this.abortListeners = [];
    }
    tokenBefore(types2) {
      let token = syntaxTree(this.state).resolveInner(this.pos, -1);
      while (token && types2.indexOf(token.name) < 0)
        token = token.parent;
      return token ? {
        from: token.from,
        to: this.pos,
        text: this.state.sliceDoc(token.from, this.pos),
        type: token.type
      } : null;
    }
    matchBefore(expr) {
      let line = this.state.doc.lineAt(this.pos);
      let start = Math.max(line.from, this.pos - 250);
      let str = line.text.slice(start - line.from, this.pos - line.from);
      let found = str.search(ensureAnchor(expr, false));
      return found < 0 ? null : {from: start + found, to: this.pos, text: str.slice(found)};
    }
    get aborted() {
      return this.abortListeners == null;
    }
    addEventListener(type, listener) {
      if (type == "abort" && this.abortListeners)
        this.abortListeners.push(listener);
    }
  };
  function toSet(chars) {
    let flat = Object.keys(chars).join("");
    let words = /\w/.test(flat);
    if (words)
      flat = flat.replace(/\w/g, "");
    return `[${words ? "\\w" : ""}${flat.replace(/[^\w\s]/g, "\\$&")}]`;
  }
  function prefixMatch(options) {
    let first = Object.create(null), rest = Object.create(null);
    for (let {label} of options) {
      first[label[0]] = true;
      for (let i = 1; i < label.length; i++)
        rest[label[i]] = true;
    }
    let source = toSet(first) + toSet(rest) + "*$";
    return [new RegExp("^" + source), new RegExp(source)];
  }
  function completeFromList(list) {
    let options = list.map((o) => typeof o == "string" ? {label: o} : o);
    let [validFor, match] = options.every((o) => /^\w+$/.test(o.label)) ? [/\w*$/, /\w+$/] : prefixMatch(options);
    return (context) => {
      let token = context.matchBefore(match);
      return token || context.explicit ? {from: token ? token.from : context.pos, options, validFor} : null;
    };
  }
  function ifNotIn(nodes, source) {
    return (context) => {
      for (let pos = syntaxTree(context.state).resolveInner(context.pos, -1); pos; pos = pos.parent)
        if (nodes.indexOf(pos.name) > -1)
          return null;
      return source(context);
    };
  }
  var Option = class {
    constructor(completion, source, match) {
      this.completion = completion;
      this.source = source;
      this.match = match;
    }
  };
  function cur(state) {
    return state.selection.main.head;
  }
  function ensureAnchor(expr, start) {
    var _a2;
    let {source} = expr;
    let addStart = start && source[0] != "^", addEnd = source[source.length - 1] != "$";
    if (!addStart && !addEnd)
      return expr;
    return new RegExp(`${addStart ? "^" : ""}(?:${source})${addEnd ? "$" : ""}`, (_a2 = expr.flags) !== null && _a2 !== void 0 ? _a2 : expr.ignoreCase ? "i" : "");
  }
  var pickedCompletion = /* @__PURE__ */ Annotation.define();
  function insertCompletionText(state, text, from, to) {
    return Object.assign(Object.assign({}, state.changeByRange((range) => {
      if (range == state.selection.main)
        return {
          changes: {from, to, insert: text},
          range: EditorSelection.cursor(from + text.length)
        };
      let len = to - from;
      if (!range.empty || len && state.sliceDoc(range.from - len, range.from) != state.sliceDoc(from, to))
        return {range};
      return {
        changes: {from: range.from - len, to: range.from, insert: text},
        range: EditorSelection.cursor(range.from - len + text.length)
      };
    })), {userEvent: "input.complete"});
  }
  function applyCompletion(view, option) {
    const apply = option.completion.apply || option.completion.label;
    let result = option.source;
    if (typeof apply == "string")
      view.dispatch(Object.assign(Object.assign({}, insertCompletionText(view.state, apply, result.from, result.to)), {annotations: pickedCompletion.of(option.completion)}));
    else
      apply(view, option.completion, result.from, result.to);
  }
  var SourceCache = /* @__PURE__ */ new WeakMap();
  function asSource(source) {
    if (!Array.isArray(source))
      return source;
    let known = SourceCache.get(source);
    if (!known)
      SourceCache.set(source, known = completeFromList(source));
    return known;
  }
  var FuzzyMatcher = class {
    constructor(pattern) {
      this.pattern = pattern;
      this.chars = [];
      this.folded = [];
      this.any = [];
      this.precise = [];
      this.byWord = [];
      for (let p = 0; p < pattern.length; ) {
        let char = codePointAt(pattern, p), size = codePointSize(char);
        this.chars.push(char);
        let part = pattern.slice(p, p + size), upper = part.toUpperCase();
        this.folded.push(codePointAt(upper == part ? part.toLowerCase() : upper, 0));
        p += size;
      }
      this.astral = pattern.length != this.chars.length;
    }
    match(word) {
      if (this.pattern.length == 0)
        return [0];
      if (word.length < this.pattern.length)
        return null;
      let {chars, folded, any, precise, byWord} = this;
      if (chars.length == 1) {
        let first = codePointAt(word, 0);
        return first == chars[0] ? [0, 0, codePointSize(first)] : first == folded[0] ? [-200, 0, codePointSize(first)] : null;
      }
      let direct = word.indexOf(this.pattern);
      if (direct == 0)
        return [0, 0, this.pattern.length];
      let len = chars.length, anyTo = 0;
      if (direct < 0) {
        for (let i = 0, e = Math.min(word.length, 200); i < e && anyTo < len; ) {
          let next = codePointAt(word, i);
          if (next == chars[anyTo] || next == folded[anyTo])
            any[anyTo++] = i;
          i += codePointSize(next);
        }
        if (anyTo < len)
          return null;
      }
      let preciseTo = 0;
      let byWordTo = 0, byWordFolded = false;
      let adjacentTo = 0, adjacentStart = -1, adjacentEnd = -1;
      let hasLower = /[a-z]/.test(word), wordAdjacent = true;
      for (let i = 0, e = Math.min(word.length, 200), prevType = 0; i < e && byWordTo < len; ) {
        let next = codePointAt(word, i);
        if (direct < 0) {
          if (preciseTo < len && next == chars[preciseTo])
            precise[preciseTo++] = i;
          if (adjacentTo < len) {
            if (next == chars[adjacentTo] || next == folded[adjacentTo]) {
              if (adjacentTo == 0)
                adjacentStart = i;
              adjacentEnd = i + 1;
              adjacentTo++;
            } else {
              adjacentTo = 0;
            }
          }
        }
        let ch, type = next < 255 ? next >= 48 && next <= 57 || next >= 97 && next <= 122 ? 2 : next >= 65 && next <= 90 ? 1 : 0 : (ch = fromCodePoint(next)) != ch.toLowerCase() ? 1 : ch != ch.toUpperCase() ? 2 : 0;
        if (!i || type == 1 && hasLower || prevType == 0 && type != 0) {
          if (chars[byWordTo] == next || folded[byWordTo] == next && (byWordFolded = true))
            byWord[byWordTo++] = i;
          else if (byWord.length)
            wordAdjacent = false;
        }
        prevType = type;
        i += codePointSize(next);
      }
      if (byWordTo == len && byWord[0] == 0 && wordAdjacent)
        return this.result(-100 + (byWordFolded ? -200 : 0), byWord, word);
      if (adjacentTo == len && adjacentStart == 0)
        return [-200 - word.length, 0, adjacentEnd];
      if (direct > -1)
        return [-700 - word.length, direct, direct + this.pattern.length];
      if (adjacentTo == len)
        return [-200 + -700 - word.length, adjacentStart, adjacentEnd];
      if (byWordTo == len)
        return this.result(-100 + (byWordFolded ? -200 : 0) + -700 + (wordAdjacent ? 0 : -1100), byWord, word);
      return chars.length == 2 ? null : this.result((any[0] ? -700 : 0) + -200 + -1100, any, word);
    }
    result(score2, positions, word) {
      let result = [score2 - word.length], i = 1;
      for (let pos of positions) {
        let to = pos + (this.astral ? codePointSize(codePointAt(word, pos)) : 1);
        if (i > 1 && result[i - 1] == pos)
          result[i - 1] = to;
        else {
          result[i++] = pos;
          result[i++] = to;
        }
      }
      return result;
    }
  };
  var completionConfig = /* @__PURE__ */ Facet.define({
    combine(configs) {
      return combineConfig(configs, {
        activateOnTyping: true,
        selectOnOpen: true,
        override: null,
        closeOnBlur: true,
        maxRenderedOptions: 100,
        defaultKeymap: true,
        optionClass: () => "",
        aboveCursor: false,
        icons: true,
        addToOptions: [],
        compareCompletions: (a, b) => a.label.localeCompare(b.label),
        interactionDelay: 75
      }, {
        defaultKeymap: (a, b) => a && b,
        closeOnBlur: (a, b) => a && b,
        icons: (a, b) => a && b,
        optionClass: (a, b) => (c) => joinClass(a(c), b(c)),
        addToOptions: (a, b) => a.concat(b)
      });
    }
  });
  function joinClass(a, b) {
    return a ? b ? a + " " + b : a : b;
  }
  function optionContent(config) {
    let content2 = config.addToOptions.slice();
    if (config.icons)
      content2.push({
        render(completion) {
          let icon = document.createElement("div");
          icon.classList.add("cm-completionIcon");
          if (completion.type)
            icon.classList.add(...completion.type.split(/\s+/g).map((cls) => "cm-completionIcon-" + cls));
          icon.setAttribute("aria-hidden", "true");
          return icon;
        },
        position: 20
      });
    content2.push({
      render(completion, _s, match) {
        let labelElt = document.createElement("span");
        labelElt.className = "cm-completionLabel";
        let {label} = completion, off = 0;
        for (let j = 1; j < match.length; ) {
          let from = match[j++], to = match[j++];
          if (from > off)
            labelElt.appendChild(document.createTextNode(label.slice(off, from)));
          let span = labelElt.appendChild(document.createElement("span"));
          span.appendChild(document.createTextNode(label.slice(from, to)));
          span.className = "cm-completionMatchedText";
          off = to;
        }
        if (off < label.length)
          labelElt.appendChild(document.createTextNode(label.slice(off)));
        return labelElt;
      },
      position: 50
    }, {
      render(completion) {
        if (!completion.detail)
          return null;
        let detailElt = document.createElement("span");
        detailElt.className = "cm-completionDetail";
        detailElt.textContent = completion.detail;
        return detailElt;
      },
      position: 80
    });
    return content2.sort((a, b) => a.position - b.position).map((a) => a.render);
  }
  function rangeAroundSelected(total, selected, max) {
    if (total <= max)
      return {from: 0, to: total};
    if (selected < 0)
      selected = 0;
    if (selected <= total >> 1) {
      let off2 = Math.floor(selected / max);
      return {from: off2 * max, to: (off2 + 1) * max};
    }
    let off = Math.floor((total - selected) / max);
    return {from: total - (off + 1) * max, to: total - off * max};
  }
  var CompletionTooltip = class {
    constructor(view, stateField) {
      this.view = view;
      this.stateField = stateField;
      this.info = null;
      this.placeInfo = {
        read: () => this.measureInfo(),
        write: (pos) => this.positionInfo(pos),
        key: this
      };
      this.space = null;
      let cState = view.state.field(stateField);
      let {options, selected} = cState.open;
      let config = view.state.facet(completionConfig);
      this.optionContent = optionContent(config);
      this.optionClass = config.optionClass;
      this.range = rangeAroundSelected(options.length, selected, config.maxRenderedOptions);
      this.dom = document.createElement("div");
      this.dom.className = "cm-tooltip-autocomplete";
      this.dom.addEventListener("mousedown", (e) => {
        for (let dom = e.target, match; dom && dom != this.dom; dom = dom.parentNode) {
          if (dom.nodeName == "LI" && (match = /-(\d+)$/.exec(dom.id)) && +match[1] < options.length) {
            applyCompletion(view, options[+match[1]]);
            e.preventDefault();
            return;
          }
        }
      });
      this.list = this.dom.appendChild(this.createListBox(options, cState.id, this.range));
      this.list.addEventListener("scroll", () => {
        if (this.info)
          this.view.requestMeasure(this.placeInfo);
      });
    }
    mount() {
      this.updateSel();
    }
    update(update) {
      var _a2, _b, _c;
      let cState = update.state.field(this.stateField);
      let prevState = update.startState.field(this.stateField);
      if (cState != prevState) {
        this.updateSel();
        if (((_a2 = cState.open) === null || _a2 === void 0 ? void 0 : _a2.disabled) != ((_b = prevState.open) === null || _b === void 0 ? void 0 : _b.disabled))
          this.dom.classList.toggle("cm-tooltip-autocomplete-disabled", !!((_c = cState.open) === null || _c === void 0 ? void 0 : _c.disabled));
      }
    }
    positioned(space4) {
      this.space = space4;
      if (this.info)
        this.view.requestMeasure(this.placeInfo);
    }
    updateSel() {
      let cState = this.view.state.field(this.stateField), open = cState.open;
      if (open.selected > -1 && open.selected < this.range.from || open.selected >= this.range.to) {
        this.range = rangeAroundSelected(open.options.length, open.selected, this.view.state.facet(completionConfig).maxRenderedOptions);
        this.list.remove();
        this.list = this.dom.appendChild(this.createListBox(open.options, cState.id, this.range));
        this.list.addEventListener("scroll", () => {
          if (this.info)
            this.view.requestMeasure(this.placeInfo);
        });
      }
      if (this.updateSelectedOption(open.selected)) {
        if (this.info) {
          this.info.remove();
          this.info = null;
        }
        let {completion} = open.options[open.selected];
        let {info} = completion;
        if (!info)
          return;
        let infoResult = typeof info === "string" ? document.createTextNode(info) : info(completion);
        if (!infoResult)
          return;
        if ("then" in infoResult) {
          infoResult.then((node) => {
            if (node && this.view.state.field(this.stateField, false) == cState)
              this.addInfoPane(node);
          }).catch((e) => logException(this.view.state, e, "completion info"));
        } else {
          this.addInfoPane(infoResult);
        }
      }
    }
    addInfoPane(content2) {
      let dom = this.info = document.createElement("div");
      dom.className = "cm-tooltip cm-completionInfo";
      dom.appendChild(content2);
      this.dom.appendChild(dom);
      this.view.requestMeasure(this.placeInfo);
    }
    updateSelectedOption(selected) {
      let set = null;
      for (let opt = this.list.firstChild, i = this.range.from; opt; opt = opt.nextSibling, i++) {
        if (i == selected) {
          if (!opt.hasAttribute("aria-selected")) {
            opt.setAttribute("aria-selected", "true");
            set = opt;
          }
        } else {
          if (opt.hasAttribute("aria-selected"))
            opt.removeAttribute("aria-selected");
        }
      }
      if (set)
        scrollIntoView2(this.list, set);
      return set;
    }
    measureInfo() {
      let sel = this.dom.querySelector("[aria-selected]");
      if (!sel || !this.info)
        return null;
      let listRect = this.dom.getBoundingClientRect();
      let infoRect = this.info.getBoundingClientRect();
      let selRect = sel.getBoundingClientRect();
      let space4 = this.space;
      if (!space4) {
        let win = this.dom.ownerDocument.defaultView || window;
        space4 = {left: 0, top: 0, right: win.innerWidth, bottom: win.innerHeight};
      }
      if (selRect.top > Math.min(space4.bottom, listRect.bottom) - 10 || selRect.bottom < Math.max(space4.top, listRect.top) + 10)
        return null;
      let rtl = this.view.textDirection == Direction.RTL, left = rtl, narrow = false, maxWidth;
      let top2 = "", bottom = "";
      let spaceLeft = listRect.left - space4.left, spaceRight = space4.right - listRect.right;
      if (left && spaceLeft < Math.min(infoRect.width, spaceRight))
        left = false;
      else if (!left && spaceRight < Math.min(infoRect.width, spaceLeft))
        left = true;
      if (infoRect.width <= (left ? spaceLeft : spaceRight)) {
        top2 = Math.max(space4.top, Math.min(selRect.top, space4.bottom - infoRect.height)) - listRect.top + "px";
        maxWidth = Math.min(400, left ? spaceLeft : spaceRight) + "px";
      } else {
        narrow = true;
        maxWidth = Math.min(400, (rtl ? listRect.right : space4.right - listRect.left) - 30) + "px";
        let spaceBelow = space4.bottom - listRect.bottom;
        if (spaceBelow >= infoRect.height || spaceBelow > listRect.top)
          top2 = selRect.bottom - listRect.top + "px";
        else
          bottom = listRect.bottom - selRect.top + "px";
      }
      return {
        top: top2,
        bottom,
        maxWidth,
        class: narrow ? rtl ? "left-narrow" : "right-narrow" : left ? "left" : "right"
      };
    }
    positionInfo(pos) {
      if (this.info) {
        if (pos) {
          this.info.style.top = pos.top;
          this.info.style.bottom = pos.bottom;
          this.info.style.maxWidth = pos.maxWidth;
          this.info.className = "cm-tooltip cm-completionInfo cm-completionInfo-" + pos.class;
        } else {
          this.info.style.top = "-1e6px";
        }
      }
    }
    createListBox(options, id2, range) {
      const ul = document.createElement("ul");
      ul.id = id2;
      ul.setAttribute("role", "listbox");
      ul.setAttribute("aria-expanded", "true");
      ul.setAttribute("aria-label", this.view.state.phrase("Completions"));
      for (let i = range.from; i < range.to; i++) {
        let {completion, match} = options[i];
        const li = ul.appendChild(document.createElement("li"));
        li.id = id2 + "-" + i;
        li.setAttribute("role", "option");
        let cls = this.optionClass(completion);
        if (cls)
          li.className = cls;
        for (let source of this.optionContent) {
          let node = source(completion, this.view.state, match);
          if (node)
            li.appendChild(node);
        }
      }
      if (range.from)
        ul.classList.add("cm-completionListIncompleteTop");
      if (range.to < options.length)
        ul.classList.add("cm-completionListIncompleteBottom");
      return ul;
    }
  };
  function completionTooltip(stateField) {
    return (view) => new CompletionTooltip(view, stateField);
  }
  function scrollIntoView2(container, element) {
    let parent = container.getBoundingClientRect();
    let self = element.getBoundingClientRect();
    if (self.top < parent.top)
      container.scrollTop -= parent.top - self.top;
    else if (self.bottom > parent.bottom)
      container.scrollTop += self.bottom - parent.bottom;
  }
  function score(option) {
    return (option.boost || 0) * 100 + (option.apply ? 10 : 0) + (option.info ? 5 : 0) + (option.type ? 1 : 0);
  }
  function sortOptions(active, state) {
    let options = [], i = 0;
    for (let a of active)
      if (a.hasResult()) {
        if (a.result.filter === false) {
          let getMatch = a.result.getMatch;
          for (let option of a.result.options) {
            let match = [1e9 - i++];
            if (getMatch)
              for (let n of getMatch(option))
                match.push(n);
            options.push(new Option(option, a, match));
          }
        } else {
          let matcher = new FuzzyMatcher(state.sliceDoc(a.from, a.to)), match;
          for (let option of a.result.options)
            if (match = matcher.match(option.label)) {
              if (option.boost != null)
                match[0] += option.boost;
              options.push(new Option(option, a, match));
            }
        }
      }
    let result = [], prev = null;
    let compare2 = state.facet(completionConfig).compareCompletions;
    for (let opt of options.sort((a, b) => b.match[0] - a.match[0] || compare2(a.completion, b.completion))) {
      if (!prev || prev.label != opt.completion.label || prev.detail != opt.completion.detail || prev.type != null && opt.completion.type != null && prev.type != opt.completion.type || prev.apply != opt.completion.apply)
        result.push(opt);
      else if (score(opt.completion) > score(prev))
        result[result.length - 1] = opt;
      prev = opt.completion;
    }
    return result;
  }
  var CompletionDialog = class {
    constructor(options, attrs, tooltip, timestamp, selected, disabled) {
      this.options = options;
      this.attrs = attrs;
      this.tooltip = tooltip;
      this.timestamp = timestamp;
      this.selected = selected;
      this.disabled = disabled;
    }
    setSelected(selected, id2) {
      return selected == this.selected || selected >= this.options.length ? this : new CompletionDialog(this.options, makeAttrs(id2, selected), this.tooltip, this.timestamp, selected, this.disabled);
    }
    static build(active, state, id2, prev, conf) {
      let options = sortOptions(active, state);
      if (!options.length) {
        return prev && active.some((a) => a.state == 1) ? new CompletionDialog(prev.options, prev.attrs, prev.tooltip, prev.timestamp, prev.selected, true) : null;
      }
      let selected = state.facet(completionConfig).selectOnOpen ? 0 : -1;
      if (prev && prev.selected != selected && prev.selected != -1) {
        let selectedValue = prev.options[prev.selected].completion;
        for (let i = 0; i < options.length; i++)
          if (options[i].completion == selectedValue) {
            selected = i;
            break;
          }
      }
      return new CompletionDialog(options, makeAttrs(id2, selected), {
        pos: active.reduce((a, b) => b.hasResult() ? Math.min(a, b.from) : a, 1e8),
        create: completionTooltip(completionState),
        above: conf.aboveCursor
      }, prev ? prev.timestamp : Date.now(), selected, false);
    }
    map(changes) {
      return new CompletionDialog(this.options, this.attrs, Object.assign(Object.assign({}, this.tooltip), {pos: changes.mapPos(this.tooltip.pos)}), this.timestamp, this.selected, this.disabled);
    }
  };
  var CompletionState = class {
    constructor(active, id2, open) {
      this.active = active;
      this.id = id2;
      this.open = open;
    }
    static start() {
      return new CompletionState(none3, "cm-ac-" + Math.floor(Math.random() * 2e6).toString(36), null);
    }
    update(tr) {
      let {state} = tr, conf = state.facet(completionConfig);
      let sources = conf.override || state.languageDataAt("autocomplete", cur(state)).map(asSource);
      let active = sources.map((source) => {
        let value = this.active.find((s) => s.source == source) || new ActiveSource(source, this.active.some((a) => a.state != 0) ? 1 : 0);
        return value.update(tr, conf);
      });
      if (active.length == this.active.length && active.every((a, i) => a == this.active[i]))
        active = this.active;
      let open = this.open;
      if (tr.selection || active.some((a) => a.hasResult() && tr.changes.touchesRange(a.from, a.to)) || !sameResults(active, this.active))
        open = CompletionDialog.build(active, state, this.id, this.open, conf);
      else if (open && open.disabled && !active.some((a) => a.state == 1))
        open = null;
      else if (open && tr.docChanged)
        open = open.map(tr.changes);
      if (!open && active.every((a) => a.state != 1) && active.some((a) => a.hasResult()))
        active = active.map((a) => a.hasResult() ? new ActiveSource(a.source, 0) : a);
      for (let effect of tr.effects)
        if (effect.is(setSelectedEffect))
          open = open && open.setSelected(effect.value, this.id);
      return active == this.active && open == this.open ? this : new CompletionState(active, this.id, open);
    }
    get tooltip() {
      return this.open ? this.open.tooltip : null;
    }
    get attrs() {
      return this.open ? this.open.attrs : baseAttrs;
    }
  };
  function sameResults(a, b) {
    if (a == b)
      return true;
    for (let iA = 0, iB = 0; ; ) {
      while (iA < a.length && !a[iA].hasResult)
        iA++;
      while (iB < b.length && !b[iB].hasResult)
        iB++;
      let endA = iA == a.length, endB = iB == b.length;
      if (endA || endB)
        return endA == endB;
      if (a[iA++].result != b[iB++].result)
        return false;
    }
  }
  var baseAttrs = {
    "aria-autocomplete": "list"
  };
  function makeAttrs(id2, selected) {
    let result = {
      "aria-autocomplete": "list",
      "aria-haspopup": "listbox",
      "aria-controls": id2
    };
    if (selected > -1)
      result["aria-activedescendant"] = id2 + "-" + selected;
    return result;
  }
  var none3 = [];
  function getUserEvent(tr) {
    return tr.isUserEvent("input.type") ? "input" : tr.isUserEvent("delete.backward") ? "delete" : null;
  }
  var ActiveSource = class {
    constructor(source, state, explicitPos = -1) {
      this.source = source;
      this.state = state;
      this.explicitPos = explicitPos;
    }
    hasResult() {
      return false;
    }
    update(tr, conf) {
      let event = getUserEvent(tr), value = this;
      if (event)
        value = value.handleUserEvent(tr, event, conf);
      else if (tr.docChanged)
        value = value.handleChange(tr);
      else if (tr.selection && value.state != 0)
        value = new ActiveSource(value.source, 0);
      for (let effect of tr.effects) {
        if (effect.is(startCompletionEffect))
          value = new ActiveSource(value.source, 1, effect.value ? cur(tr.state) : -1);
        else if (effect.is(closeCompletionEffect))
          value = new ActiveSource(value.source, 0);
        else if (effect.is(setActiveEffect)) {
          for (let active of effect.value)
            if (active.source == value.source)
              value = active;
        }
      }
      return value;
    }
    handleUserEvent(tr, type, conf) {
      return type == "delete" || !conf.activateOnTyping ? this.map(tr.changes) : new ActiveSource(this.source, 1);
    }
    handleChange(tr) {
      return tr.changes.touchesRange(cur(tr.startState)) ? new ActiveSource(this.source, 0) : this.map(tr.changes);
    }
    map(changes) {
      return changes.empty || this.explicitPos < 0 ? this : new ActiveSource(this.source, this.state, changes.mapPos(this.explicitPos));
    }
  };
  var ActiveResult = class extends ActiveSource {
    constructor(source, explicitPos, result, from, to) {
      super(source, 2, explicitPos);
      this.result = result;
      this.from = from;
      this.to = to;
    }
    hasResult() {
      return true;
    }
    handleUserEvent(tr, type, conf) {
      var _a2;
      let from = tr.changes.mapPos(this.from), to = tr.changes.mapPos(this.to, 1);
      let pos = cur(tr.state);
      if ((this.explicitPos < 0 ? pos <= from : pos < this.from) || pos > to || type == "delete" && cur(tr.startState) == this.from)
        return new ActiveSource(this.source, type == "input" && conf.activateOnTyping ? 1 : 0);
      let explicitPos = this.explicitPos < 0 ? -1 : tr.changes.mapPos(this.explicitPos), updated;
      if (checkValid(this.result.validFor, tr.state, from, to))
        return new ActiveResult(this.source, explicitPos, this.result, from, to);
      if (this.result.update && (updated = this.result.update(this.result, from, to, new CompletionContext(tr.state, pos, explicitPos >= 0))))
        return new ActiveResult(this.source, explicitPos, updated, updated.from, (_a2 = updated.to) !== null && _a2 !== void 0 ? _a2 : cur(tr.state));
      return new ActiveSource(this.source, 1, explicitPos);
    }
    handleChange(tr) {
      return tr.changes.touchesRange(this.from, this.to) ? new ActiveSource(this.source, 0) : this.map(tr.changes);
    }
    map(mapping) {
      return mapping.empty ? this : new ActiveResult(this.source, this.explicitPos < 0 ? -1 : mapping.mapPos(this.explicitPos), this.result, mapping.mapPos(this.from), mapping.mapPos(this.to, 1));
    }
  };
  function checkValid(validFor, state, from, to) {
    if (!validFor)
      return false;
    let text = state.sliceDoc(from, to);
    return typeof validFor == "function" ? validFor(text, from, to, state) : ensureAnchor(validFor, true).test(text);
  }
  var startCompletionEffect = /* @__PURE__ */ StateEffect.define();
  var closeCompletionEffect = /* @__PURE__ */ StateEffect.define();
  var setActiveEffect = /* @__PURE__ */ StateEffect.define({
    map(sources, mapping) {
      return sources.map((s) => s.map(mapping));
    }
  });
  var setSelectedEffect = /* @__PURE__ */ StateEffect.define();
  var completionState = /* @__PURE__ */ StateField.define({
    create() {
      return CompletionState.start();
    },
    update(value, tr) {
      return value.update(tr);
    },
    provide: (f) => [
      showTooltip.from(f, (val) => val.tooltip),
      EditorView.contentAttributes.from(f, (state) => state.attrs)
    ]
  });
  function moveCompletionSelection(forward, by = "option") {
    return (view) => {
      let cState = view.state.field(completionState, false);
      if (!cState || !cState.open || cState.open.disabled || Date.now() - cState.open.timestamp < view.state.facet(completionConfig).interactionDelay)
        return false;
      let step = 1, tooltip;
      if (by == "page" && (tooltip = getTooltip(view, cState.open.tooltip)))
        step = Math.max(2, Math.floor(tooltip.dom.offsetHeight / tooltip.dom.querySelector("li").offsetHeight) - 1);
      let {length} = cState.open.options;
      let selected = cState.open.selected > -1 ? cState.open.selected + step * (forward ? 1 : -1) : forward ? 0 : length - 1;
      if (selected < 0)
        selected = by == "page" ? 0 : length - 1;
      else if (selected >= length)
        selected = by == "page" ? length - 1 : 0;
      view.dispatch({effects: setSelectedEffect.of(selected)});
      return true;
    };
  }
  var acceptCompletion = (view) => {
    let cState = view.state.field(completionState, false);
    if (view.state.readOnly || !cState || !cState.open || cState.open.selected < 0 || Date.now() - cState.open.timestamp < view.state.facet(completionConfig).interactionDelay)
      return false;
    if (!cState.open.disabled)
      applyCompletion(view, cState.open.options[cState.open.selected]);
    return true;
  };
  var startCompletion = (view) => {
    let cState = view.state.field(completionState, false);
    if (!cState)
      return false;
    view.dispatch({effects: startCompletionEffect.of(true)});
    return true;
  };
  var closeCompletion = (view) => {
    let cState = view.state.field(completionState, false);
    if (!cState || !cState.active.some((a) => a.state != 0))
      return false;
    view.dispatch({effects: closeCompletionEffect.of(null)});
    return true;
  };
  var RunningQuery = class {
    constructor(active, context) {
      this.active = active;
      this.context = context;
      this.time = Date.now();
      this.updates = [];
      this.done = void 0;
    }
  };
  var DebounceTime = 50;
  var MaxUpdateCount = 50;
  var MinAbortTime = 1e3;
  var completionPlugin = /* @__PURE__ */ ViewPlugin.fromClass(class {
    constructor(view) {
      this.view = view;
      this.debounceUpdate = -1;
      this.running = [];
      this.debounceAccept = -1;
      this.composing = 0;
      for (let active of view.state.field(completionState).active)
        if (active.state == 1)
          this.startQuery(active);
    }
    update(update) {
      let cState = update.state.field(completionState);
      if (!update.selectionSet && !update.docChanged && update.startState.field(completionState) == cState)
        return;
      let doesReset = update.transactions.some((tr) => {
        return (tr.selection || tr.docChanged) && !getUserEvent(tr);
      });
      for (let i = 0; i < this.running.length; i++) {
        let query = this.running[i];
        if (doesReset || query.updates.length + update.transactions.length > MaxUpdateCount && Date.now() - query.time > MinAbortTime) {
          for (let handler of query.context.abortListeners) {
            try {
              handler();
            } catch (e) {
              logException(this.view.state, e);
            }
          }
          query.context.abortListeners = null;
          this.running.splice(i--, 1);
        } else {
          query.updates.push(...update.transactions);
        }
      }
      if (this.debounceUpdate > -1)
        clearTimeout(this.debounceUpdate);
      this.debounceUpdate = cState.active.some((a) => a.state == 1 && !this.running.some((q) => q.active.source == a.source)) ? setTimeout(() => this.startUpdate(), DebounceTime) : -1;
      if (this.composing != 0)
        for (let tr of update.transactions) {
          if (getUserEvent(tr) == "input")
            this.composing = 2;
          else if (this.composing == 2 && tr.selection)
            this.composing = 3;
        }
    }
    startUpdate() {
      this.debounceUpdate = -1;
      let {state} = this.view, cState = state.field(completionState);
      for (let active of cState.active) {
        if (active.state == 1 && !this.running.some((r) => r.active.source == active.source))
          this.startQuery(active);
      }
    }
    startQuery(active) {
      let {state} = this.view, pos = cur(state);
      let context = new CompletionContext(state, pos, active.explicitPos == pos);
      let pending = new RunningQuery(active, context);
      this.running.push(pending);
      Promise.resolve(active.source(context)).then((result) => {
        if (!pending.context.aborted) {
          pending.done = result || null;
          this.scheduleAccept();
        }
      }, (err) => {
        this.view.dispatch({effects: closeCompletionEffect.of(null)});
        logException(this.view.state, err);
      });
    }
    scheduleAccept() {
      if (this.running.every((q) => q.done !== void 0))
        this.accept();
      else if (this.debounceAccept < 0)
        this.debounceAccept = setTimeout(() => this.accept(), DebounceTime);
    }
    accept() {
      var _a2;
      if (this.debounceAccept > -1)
        clearTimeout(this.debounceAccept);
      this.debounceAccept = -1;
      let updated = [];
      let conf = this.view.state.facet(completionConfig);
      for (let i = 0; i < this.running.length; i++) {
        let query = this.running[i];
        if (query.done === void 0)
          continue;
        this.running.splice(i--, 1);
        if (query.done) {
          let active = new ActiveResult(query.active.source, query.active.explicitPos, query.done, query.done.from, (_a2 = query.done.to) !== null && _a2 !== void 0 ? _a2 : cur(query.updates.length ? query.updates[0].startState : this.view.state));
          for (let tr of query.updates)
            active = active.update(tr, conf);
          if (active.hasResult()) {
            updated.push(active);
            continue;
          }
        }
        let current = this.view.state.field(completionState).active.find((a) => a.source == query.active.source);
        if (current && current.state == 1) {
          if (query.done == null) {
            let active = new ActiveSource(query.active.source, 0);
            for (let tr of query.updates)
              active = active.update(tr, conf);
            if (active.state != 1)
              updated.push(active);
          } else {
            this.startQuery(current);
          }
        }
      }
      if (updated.length)
        this.view.dispatch({effects: setActiveEffect.of(updated)});
    }
  }, {
    eventHandlers: {
      blur() {
        let state = this.view.state.field(completionState, false);
        if (state && state.tooltip && this.view.state.facet(completionConfig).closeOnBlur)
          this.view.dispatch({effects: closeCompletionEffect.of(null)});
      },
      compositionstart() {
        this.composing = 1;
      },
      compositionend() {
        if (this.composing == 3) {
          setTimeout(() => this.view.dispatch({effects: startCompletionEffect.of(false)}), 20);
        }
        this.composing = 0;
      }
    }
  });
  var baseTheme2 = /* @__PURE__ */ EditorView.baseTheme({
    ".cm-tooltip.cm-tooltip-autocomplete": {
      "& > ul": {
        fontFamily: "monospace",
        whiteSpace: "nowrap",
        overflow: "hidden auto",
        maxWidth_fallback: "700px",
        maxWidth: "min(700px, 95vw)",
        minWidth: "250px",
        maxHeight: "10em",
        listStyle: "none",
        margin: 0,
        padding: 0,
        "& > li": {
          overflowX: "hidden",
          textOverflow: "ellipsis",
          cursor: "pointer",
          padding: "1px 3px",
          lineHeight: 1.2
        }
      }
    },
    "&light .cm-tooltip-autocomplete ul li[aria-selected]": {
      background: "#17c",
      color: "white"
    },
    "&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]": {
      background: "#777"
    },
    "&dark .cm-tooltip-autocomplete ul li[aria-selected]": {
      background: "#347",
      color: "white"
    },
    "&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]": {
      background: "#444"
    },
    ".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after": {
      content: '"\xB7\xB7\xB7"',
      opacity: 0.5,
      display: "block",
      textAlign: "center"
    },
    ".cm-tooltip.cm-completionInfo": {
      position: "absolute",
      padding: "3px 9px",
      width: "max-content",
      maxWidth: `${400}px`,
      boxSizing: "border-box"
    },
    ".cm-completionInfo.cm-completionInfo-left": {right: "100%"},
    ".cm-completionInfo.cm-completionInfo-right": {left: "100%"},
    ".cm-completionInfo.cm-completionInfo-left-narrow": {right: `${30}px`},
    ".cm-completionInfo.cm-completionInfo-right-narrow": {left: `${30}px`},
    "&light .cm-snippetField": {backgroundColor: "#00000022"},
    "&dark .cm-snippetField": {backgroundColor: "#ffffff22"},
    ".cm-snippetFieldPosition": {
      verticalAlign: "text-top",
      width: 0,
      height: "1.15em",
      display: "inline-block",
      margin: "0 -0.7px -.7em",
      borderLeft: "1.4px dotted #888"
    },
    ".cm-completionMatchedText": {
      textDecoration: "underline"
    },
    ".cm-completionDetail": {
      marginLeft: "0.5em",
      fontStyle: "italic"
    },
    ".cm-completionIcon": {
      fontSize: "90%",
      width: ".8em",
      display: "inline-block",
      textAlign: "center",
      paddingRight: ".6em",
      opacity: "0.6"
    },
    ".cm-completionIcon-function, .cm-completionIcon-method": {
      "&:after": {content: "'\u0192'"}
    },
    ".cm-completionIcon-class": {
      "&:after": {content: "'\u25CB'"}
    },
    ".cm-completionIcon-interface": {
      "&:after": {content: "'\u25CC'"}
    },
    ".cm-completionIcon-variable": {
      "&:after": {content: "'\u{1D465}'"}
    },
    ".cm-completionIcon-constant": {
      "&:after": {content: "'\u{1D436}'"}
    },
    ".cm-completionIcon-type": {
      "&:after": {content: "'\u{1D461}'"}
    },
    ".cm-completionIcon-enum": {
      "&:after": {content: "'\u222A'"}
    },
    ".cm-completionIcon-property": {
      "&:after": {content: "'\u25A1'"}
    },
    ".cm-completionIcon-keyword": {
      "&:after": {content: "'\u{1F511}\uFE0E'"}
    },
    ".cm-completionIcon-namespace": {
      "&:after": {content: "'\u25A2'"}
    },
    ".cm-completionIcon-text": {
      "&:after": {content: "'abc'", fontSize: "50%", verticalAlign: "middle"}
    }
  });
  var FieldPos = class {
    constructor(field, line, from, to) {
      this.field = field;
      this.line = line;
      this.from = from;
      this.to = to;
    }
  };
  var FieldRange = class {
    constructor(field, from, to) {
      this.field = field;
      this.from = from;
      this.to = to;
    }
    map(changes) {
      let from = changes.mapPos(this.from, -1, MapMode.TrackDel);
      let to = changes.mapPos(this.to, 1, MapMode.TrackDel);
      return from == null || to == null ? null : new FieldRange(this.field, from, to);
    }
  };
  var Snippet = class {
    constructor(lines, fieldPositions) {
      this.lines = lines;
      this.fieldPositions = fieldPositions;
    }
    instantiate(state, pos) {
      let text = [], lineStart = [pos];
      let lineObj = state.doc.lineAt(pos), baseIndent = /^\s*/.exec(lineObj.text)[0];
      for (let line of this.lines) {
        if (text.length) {
          let indent = baseIndent, tabs = /^\t*/.exec(line)[0].length;
          for (let i = 0; i < tabs; i++)
            indent += state.facet(indentUnit);
          lineStart.push(pos + indent.length - tabs);
          line = indent + line.slice(tabs);
        }
        text.push(line);
        pos += line.length + 1;
      }
      let ranges = this.fieldPositions.map((pos2) => new FieldRange(pos2.field, lineStart[pos2.line] + pos2.from, lineStart[pos2.line] + pos2.to));
      return {text, ranges};
    }
    static parse(template2) {
      let fields = [];
      let lines = [], positions = [], m;
      for (let line of template2.split(/\r\n?|\n/)) {
        while (m = /[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(line)) {
          let seq = m[1] ? +m[1] : null, name2 = m[2] || m[3] || "", found = -1;
          for (let i = 0; i < fields.length; i++) {
            if (seq != null ? fields[i].seq == seq : name2 ? fields[i].name == name2 : false)
              found = i;
          }
          if (found < 0) {
            let i = 0;
            while (i < fields.length && (seq == null || fields[i].seq != null && fields[i].seq < seq))
              i++;
            fields.splice(i, 0, {seq, name: name2});
            found = i;
            for (let pos of positions)
              if (pos.field >= found)
                pos.field++;
          }
          positions.push(new FieldPos(found, lines.length, m.index, m.index + name2.length));
          line = line.slice(0, m.index) + name2 + line.slice(m.index + m[0].length);
        }
        for (let esc; esc = /([$#])\\{/.exec(line); ) {
          line = line.slice(0, esc.index) + esc[1] + "{" + line.slice(esc.index + esc[0].length);
          for (let pos of positions)
            if (pos.line == lines.length && pos.from > esc.index) {
              pos.from--;
              pos.to--;
            }
        }
        lines.push(line);
      }
      return new Snippet(lines, positions);
    }
  };
  var fieldMarker = /* @__PURE__ */ Decoration.widget({widget: /* @__PURE__ */ new class extends WidgetType {
    toDOM() {
      let span = document.createElement("span");
      span.className = "cm-snippetFieldPosition";
      return span;
    }
    ignoreEvent() {
      return false;
    }
  }()});
  var fieldRange = /* @__PURE__ */ Decoration.mark({class: "cm-snippetField"});
  var ActiveSnippet = class {
    constructor(ranges, active) {
      this.ranges = ranges;
      this.active = active;
      this.deco = Decoration.set(ranges.map((r) => (r.from == r.to ? fieldMarker : fieldRange).range(r.from, r.to)));
    }
    map(changes) {
      let ranges = [];
      for (let r of this.ranges) {
        let mapped = r.map(changes);
        if (!mapped)
          return null;
        ranges.push(mapped);
      }
      return new ActiveSnippet(ranges, this.active);
    }
    selectionInsideField(sel) {
      return sel.ranges.every((range) => this.ranges.some((r) => r.field == this.active && r.from <= range.from && r.to >= range.to));
    }
  };
  var setActive = /* @__PURE__ */ StateEffect.define({
    map(value, changes) {
      return value && value.map(changes);
    }
  });
  var moveToField = /* @__PURE__ */ StateEffect.define();
  var snippetState = /* @__PURE__ */ StateField.define({
    create() {
      return null;
    },
    update(value, tr) {
      for (let effect of tr.effects) {
        if (effect.is(setActive))
          return effect.value;
        if (effect.is(moveToField) && value)
          return new ActiveSnippet(value.ranges, effect.value);
      }
      if (value && tr.docChanged)
        value = value.map(tr.changes);
      if (value && tr.selection && !value.selectionInsideField(tr.selection))
        value = null;
      return value;
    },
    provide: (f) => EditorView.decorations.from(f, (val) => val ? val.deco : Decoration.none)
  });
  function fieldSelection(ranges, field) {
    return EditorSelection.create(ranges.filter((r) => r.field == field).map((r) => EditorSelection.range(r.from, r.to)));
  }
  function snippet(template2) {
    let snippet2 = Snippet.parse(template2);
    return (editor, _completion, from, to) => {
      let {text, ranges} = snippet2.instantiate(editor.state, from);
      let spec = {
        changes: {from, to, insert: Text.of(text)},
        scrollIntoView: true
      };
      if (ranges.length)
        spec.selection = fieldSelection(ranges, 0);
      if (ranges.length > 1) {
        let active = new ActiveSnippet(ranges, 0);
        let effects = spec.effects = [setActive.of(active)];
        if (editor.state.field(snippetState, false) === void 0)
          effects.push(StateEffect.appendConfig.of([snippetState, addSnippetKeymap, snippetPointerHandler, baseTheme2]));
      }
      editor.dispatch(editor.state.update(spec));
    };
  }
  function moveField(dir) {
    return ({state, dispatch}) => {
      let active = state.field(snippetState, false);
      if (!active || dir < 0 && active.active == 0)
        return false;
      let next = active.active + dir, last = dir > 0 && !active.ranges.some((r) => r.field == next + dir);
      dispatch(state.update({
        selection: fieldSelection(active.ranges, next),
        effects: setActive.of(last ? null : new ActiveSnippet(active.ranges, next))
      }));
      return true;
    };
  }
  var clearSnippet = ({state, dispatch}) => {
    let active = state.field(snippetState, false);
    if (!active)
      return false;
    dispatch(state.update({effects: setActive.of(null)}));
    return true;
  };
  var nextSnippetField = /* @__PURE__ */ moveField(1);
  var prevSnippetField = /* @__PURE__ */ moveField(-1);
  var defaultSnippetKeymap = [
    {key: "Tab", run: nextSnippetField, shift: prevSnippetField},
    {key: "Escape", run: clearSnippet}
  ];
  var snippetKeymap = /* @__PURE__ */ Facet.define({
    combine(maps) {
      return maps.length ? maps[0] : defaultSnippetKeymap;
    }
  });
  var addSnippetKeymap = /* @__PURE__ */ Prec.highest(/* @__PURE__ */ keymap.compute([snippetKeymap], (state) => state.facet(snippetKeymap)));
  function snippetCompletion(template2, completion) {
    return Object.assign(Object.assign({}, completion), {apply: snippet(template2)});
  }
  var snippetPointerHandler = /* @__PURE__ */ EditorView.domEventHandlers({
    mousedown(event, view) {
      let active = view.state.field(snippetState, false), pos;
      if (!active || (pos = view.posAtCoords({x: event.clientX, y: event.clientY})) == null)
        return false;
      let match = active.ranges.find((r) => r.from <= pos && r.to >= pos);
      if (!match || match.field == active.active)
        return false;
      view.dispatch({
        selection: fieldSelection(active.ranges, match.field),
        effects: setActive.of(active.ranges.some((r) => r.field > match.field) ? new ActiveSnippet(active.ranges, match.field) : null)
      });
      return true;
    }
  });
  var closedBracket = /* @__PURE__ */ new class extends RangeValue {
  }();
  closedBracket.startSide = 1;
  closedBracket.endSide = -1;
  var android = typeof navigator == "object" && /* @__PURE__ */ /Android\b/.test(navigator.userAgent);
  function autocompletion(config = {}) {
    return [
      completionState,
      completionConfig.of(config),
      completionPlugin,
      completionKeymapExt,
      baseTheme2
    ];
  }
  var completionKeymap = [
    {key: "Ctrl-Space", run: startCompletion},
    {key: "Escape", run: closeCompletion},
    {key: "ArrowDown", run: /* @__PURE__ */ moveCompletionSelection(true)},
    {key: "ArrowUp", run: /* @__PURE__ */ moveCompletionSelection(false)},
    {key: "PageDown", run: /* @__PURE__ */ moveCompletionSelection(true, "page")},
    {key: "PageUp", run: /* @__PURE__ */ moveCompletionSelection(false, "page")},
    {key: "Enter", run: acceptCompletion}
  ];
  var completionKeymapExt = /* @__PURE__ */ Prec.highest(/* @__PURE__ */ keymap.computeN([completionConfig], (state) => state.facet(completionConfig).defaultKeymap ? [completionKeymap] : []));

  // node_modules/@lezer/lr/dist/index.js
  var Stack = class {
    constructor(p, stack, state, reducePos, pos, score2, buffer, bufferBase, curContext, lookAhead = 0, parent) {
      this.p = p;
      this.stack = stack;
      this.state = state;
      this.reducePos = reducePos;
      this.pos = pos;
      this.score = score2;
      this.buffer = buffer;
      this.bufferBase = bufferBase;
      this.curContext = curContext;
      this.lookAhead = lookAhead;
      this.parent = parent;
    }
    toString() {
      return `[${this.stack.filter((_, i) => i % 3 == 0).concat(this.state)}]@${this.pos}${this.score ? "!" + this.score : ""}`;
    }
    static start(p, state, pos = 0) {
      let cx = p.parser.context;
      return new Stack(p, [], state, pos, pos, 0, [], 0, cx ? new StackContext(cx, cx.start) : null, 0, null);
    }
    get context() {
      return this.curContext ? this.curContext.context : null;
    }
    pushState(state, start) {
      this.stack.push(this.state, start, this.bufferBase + this.buffer.length);
      this.state = state;
    }
    reduce(action) {
      let depth = action >> 19, type = action & 65535;
      let {parser: parser7} = this.p;
      let dPrec = parser7.dynamicPrecedence(type);
      if (dPrec)
        this.score += dPrec;
      if (depth == 0) {
        this.pushState(parser7.getGoto(this.state, type, true), this.reducePos);
        if (type < parser7.minRepeatTerm)
          this.storeNode(type, this.reducePos, this.reducePos, 4, true);
        this.reduceContext(type, this.reducePos);
        return;
      }
      let base2 = this.stack.length - (depth - 1) * 3 - (action & 262144 ? 6 : 0);
      let start = this.stack[base2 - 2];
      let bufferBase = this.stack[base2 - 1], count = this.bufferBase + this.buffer.length - bufferBase;
      if (type < parser7.minRepeatTerm || action & 131072) {
        let pos = parser7.stateFlag(this.state, 1) ? this.pos : this.reducePos;
        this.storeNode(type, start, pos, count + 4, true);
      }
      if (action & 262144) {
        this.state = this.stack[base2];
      } else {
        let baseStateID = this.stack[base2 - 3];
        this.state = parser7.getGoto(baseStateID, type, true);
      }
      while (this.stack.length > base2)
        this.stack.pop();
      this.reduceContext(type, start);
    }
    storeNode(term, start, end, size = 4, isReduce = false) {
      if (term == 0 && (!this.stack.length || this.stack[this.stack.length - 1] < this.buffer.length + this.bufferBase)) {
        let cur2 = this, top2 = this.buffer.length;
        if (top2 == 0 && cur2.parent) {
          top2 = cur2.bufferBase - cur2.parent.bufferBase;
          cur2 = cur2.parent;
        }
        if (top2 > 0 && cur2.buffer[top2 - 4] == 0 && cur2.buffer[top2 - 1] > -1) {
          if (start == end)
            return;
          if (cur2.buffer[top2 - 2] >= start) {
            cur2.buffer[top2 - 2] = end;
            return;
          }
        }
      }
      if (!isReduce || this.pos == end) {
        this.buffer.push(term, start, end, size);
      } else {
        let index = this.buffer.length;
        if (index > 0 && this.buffer[index - 4] != 0)
          while (index > 0 && this.buffer[index - 2] > end) {
            this.buffer[index] = this.buffer[index - 4];
            this.buffer[index + 1] = this.buffer[index - 3];
            this.buffer[index + 2] = this.buffer[index - 2];
            this.buffer[index + 3] = this.buffer[index - 1];
            index -= 4;
            if (size > 4)
              size -= 4;
          }
        this.buffer[index] = term;
        this.buffer[index + 1] = start;
        this.buffer[index + 2] = end;
        this.buffer[index + 3] = size;
      }
    }
    shift(action, next, nextEnd) {
      let start = this.pos;
      if (action & 131072) {
        this.pushState(action & 65535, this.pos);
      } else if ((action & 262144) == 0) {
        let nextState = action, {parser: parser7} = this.p;
        if (nextEnd > this.pos || next <= parser7.maxNode) {
          this.pos = nextEnd;
          if (!parser7.stateFlag(nextState, 1))
            this.reducePos = nextEnd;
        }
        this.pushState(nextState, start);
        this.shiftContext(next, start);
        if (next <= parser7.maxNode)
          this.buffer.push(next, start, nextEnd, 4);
      } else {
        this.pos = nextEnd;
        this.shiftContext(next, start);
        if (next <= this.p.parser.maxNode)
          this.buffer.push(next, start, nextEnd, 4);
      }
    }
    apply(action, next, nextEnd) {
      if (action & 65536)
        this.reduce(action);
      else
        this.shift(action, next, nextEnd);
    }
    useNode(value, next) {
      let index = this.p.reused.length - 1;
      if (index < 0 || this.p.reused[index] != value) {
        this.p.reused.push(value);
        index++;
      }
      let start = this.pos;
      this.reducePos = this.pos = start + value.length;
      this.pushState(next, start);
      this.buffer.push(index, start, this.reducePos, -1);
      if (this.curContext)
        this.updateContext(this.curContext.tracker.reuse(this.curContext.context, value, this, this.p.stream.reset(this.pos - value.length)));
    }
    split() {
      let parent = this;
      let off = parent.buffer.length;
      while (off > 0 && parent.buffer[off - 2] > parent.reducePos)
        off -= 4;
      let buffer = parent.buffer.slice(off), base2 = parent.bufferBase + off;
      while (parent && base2 == parent.bufferBase)
        parent = parent.parent;
      return new Stack(this.p, this.stack.slice(), this.state, this.reducePos, this.pos, this.score, buffer, base2, this.curContext, this.lookAhead, parent);
    }
    recoverByDelete(next, nextEnd) {
      let isNode = next <= this.p.parser.maxNode;
      if (isNode)
        this.storeNode(next, this.pos, nextEnd, 4);
      this.storeNode(0, this.pos, nextEnd, isNode ? 8 : 4);
      this.pos = this.reducePos = nextEnd;
      this.score -= 190;
    }
    canShift(term) {
      for (let sim = new SimulatedStack(this); ; ) {
        let action = this.p.parser.stateSlot(sim.state, 4) || this.p.parser.hasAction(sim.state, term);
        if ((action & 65536) == 0)
          return true;
        if (action == 0)
          return false;
        sim.reduce(action);
      }
    }
    recoverByInsert(next) {
      if (this.stack.length >= 300)
        return [];
      let nextStates = this.p.parser.nextStates(this.state);
      if (nextStates.length > 4 << 1 || this.stack.length >= 120) {
        let best = [];
        for (let i = 0, s; i < nextStates.length; i += 2) {
          if ((s = nextStates[i + 1]) != this.state && this.p.parser.hasAction(s, next))
            best.push(nextStates[i], s);
        }
        if (this.stack.length < 120)
          for (let i = 0; best.length < 4 << 1 && i < nextStates.length; i += 2) {
            let s = nextStates[i + 1];
            if (!best.some((v, i2) => i2 & 1 && v == s))
              best.push(nextStates[i], s);
          }
        nextStates = best;
      }
      let result = [];
      for (let i = 0; i < nextStates.length && result.length < 4; i += 2) {
        let s = nextStates[i + 1];
        if (s == this.state)
          continue;
        let stack = this.split();
        stack.pushState(s, this.pos);
        stack.storeNode(0, stack.pos, stack.pos, 4, true);
        stack.shiftContext(nextStates[i], this.pos);
        stack.score -= 200;
        result.push(stack);
      }
      return result;
    }
    forceReduce() {
      let reduce = this.p.parser.stateSlot(this.state, 5);
      if ((reduce & 65536) == 0)
        return false;
      let {parser: parser7} = this.p;
      if (!parser7.validAction(this.state, reduce)) {
        let depth = reduce >> 19, term = reduce & 65535;
        let target = this.stack.length - depth * 3;
        if (target < 0 || parser7.getGoto(this.stack[target], term, false) < 0)
          return false;
        this.storeNode(0, this.reducePos, this.reducePos, 4, true);
        this.score -= 100;
      }
      this.reducePos = this.pos;
      this.reduce(reduce);
      return true;
    }
    forceAll() {
      while (!this.p.parser.stateFlag(this.state, 2)) {
        if (!this.forceReduce()) {
          this.storeNode(0, this.pos, this.pos, 4, true);
          break;
        }
      }
      return this;
    }
    get deadEnd() {
      if (this.stack.length != 3)
        return false;
      let {parser: parser7} = this.p;
      return parser7.data[parser7.stateSlot(this.state, 1)] == 65535 && !parser7.stateSlot(this.state, 4);
    }
    restart() {
      this.state = this.stack[0];
      this.stack.length = 0;
    }
    sameState(other) {
      if (this.state != other.state || this.stack.length != other.stack.length)
        return false;
      for (let i = 0; i < this.stack.length; i += 3)
        if (this.stack[i] != other.stack[i])
          return false;
      return true;
    }
    get parser() {
      return this.p.parser;
    }
    dialectEnabled(dialectID) {
      return this.p.parser.dialect.flags[dialectID];
    }
    shiftContext(term, start) {
      if (this.curContext)
        this.updateContext(this.curContext.tracker.shift(this.curContext.context, term, this, this.p.stream.reset(start)));
    }
    reduceContext(term, start) {
      if (this.curContext)
        this.updateContext(this.curContext.tracker.reduce(this.curContext.context, term, this, this.p.stream.reset(start)));
    }
    emitContext() {
      let last = this.buffer.length - 1;
      if (last < 0 || this.buffer[last] != -3)
        this.buffer.push(this.curContext.hash, this.reducePos, this.reducePos, -3);
    }
    emitLookAhead() {
      let last = this.buffer.length - 1;
      if (last < 0 || this.buffer[last] != -4)
        this.buffer.push(this.lookAhead, this.reducePos, this.reducePos, -4);
    }
    updateContext(context) {
      if (context != this.curContext.context) {
        let newCx = new StackContext(this.curContext.tracker, context);
        if (newCx.hash != this.curContext.hash)
          this.emitContext();
        this.curContext = newCx;
      }
    }
    setLookAhead(lookAhead) {
      if (lookAhead > this.lookAhead) {
        this.emitLookAhead();
        this.lookAhead = lookAhead;
      }
    }
    close() {
      if (this.curContext && this.curContext.tracker.strict)
        this.emitContext();
      if (this.lookAhead > 0)
        this.emitLookAhead();
    }
  };
  var StackContext = class {
    constructor(tracker, context) {
      this.tracker = tracker;
      this.context = context;
      this.hash = tracker.strict ? tracker.hash(context) : 0;
    }
  };
  var Recover;
  (function(Recover2) {
    Recover2[Recover2["Insert"] = 200] = "Insert";
    Recover2[Recover2["Delete"] = 190] = "Delete";
    Recover2[Recover2["Reduce"] = 100] = "Reduce";
    Recover2[Recover2["MaxNext"] = 4] = "MaxNext";
    Recover2[Recover2["MaxInsertStackDepth"] = 300] = "MaxInsertStackDepth";
    Recover2[Recover2["DampenInsertStackDepth"] = 120] = "DampenInsertStackDepth";
  })(Recover || (Recover = {}));
  var SimulatedStack = class {
    constructor(start) {
      this.start = start;
      this.state = start.state;
      this.stack = start.stack;
      this.base = this.stack.length;
    }
    reduce(action) {
      let term = action & 65535, depth = action >> 19;
      if (depth == 0) {
        if (this.stack == this.start.stack)
          this.stack = this.stack.slice();
        this.stack.push(this.state, 0, 0);
        this.base += 3;
      } else {
        this.base -= (depth - 1) * 3;
      }
      let goto = this.start.p.parser.getGoto(this.stack[this.base - 3], term, true);
      this.state = goto;
    }
  };
  var StackBufferCursor = class {
    constructor(stack, pos, index) {
      this.stack = stack;
      this.pos = pos;
      this.index = index;
      this.buffer = stack.buffer;
      if (this.index == 0)
        this.maybeNext();
    }
    static create(stack, pos = stack.bufferBase + stack.buffer.length) {
      return new StackBufferCursor(stack, pos, pos - stack.bufferBase);
    }
    maybeNext() {
      let next = this.stack.parent;
      if (next != null) {
        this.index = this.stack.bufferBase - next.bufferBase;
        this.stack = next;
        this.buffer = next.buffer;
      }
    }
    get id() {
      return this.buffer[this.index - 4];
    }
    get start() {
      return this.buffer[this.index - 3];
    }
    get end() {
      return this.buffer[this.index - 2];
    }
    get size() {
      return this.buffer[this.index - 1];
    }
    next() {
      this.index -= 4;
      this.pos -= 4;
      if (this.index == 0)
        this.maybeNext();
    }
    fork() {
      return new StackBufferCursor(this.stack, this.pos, this.index);
    }
  };
  var CachedToken = class {
    constructor() {
      this.start = -1;
      this.value = -1;
      this.end = -1;
      this.extended = -1;
      this.lookAhead = 0;
      this.mask = 0;
      this.context = 0;
    }
  };
  var nullToken = new CachedToken();
  var InputStream = class {
    constructor(input, ranges) {
      this.input = input;
      this.ranges = ranges;
      this.chunk = "";
      this.chunkOff = 0;
      this.chunk2 = "";
      this.chunk2Pos = 0;
      this.next = -1;
      this.token = nullToken;
      this.rangeIndex = 0;
      this.pos = this.chunkPos = ranges[0].from;
      this.range = ranges[0];
      this.end = ranges[ranges.length - 1].to;
      this.readNext();
    }
    resolveOffset(offset, assoc) {
      let range = this.range, index = this.rangeIndex;
      let pos = this.pos + offset;
      while (pos < range.from) {
        if (!index)
          return null;
        let next = this.ranges[--index];
        pos -= range.from - next.to;
        range = next;
      }
      while (assoc < 0 ? pos > range.to : pos >= range.to) {
        if (index == this.ranges.length - 1)
          return null;
        let next = this.ranges[++index];
        pos += next.from - range.to;
        range = next;
      }
      return pos;
    }
    clipPos(pos) {
      if (pos >= this.range.from && pos < this.range.to)
        return pos;
      for (let range of this.ranges)
        if (range.to > pos)
          return Math.max(pos, range.from);
      return this.end;
    }
    peek(offset) {
      let idx = this.chunkOff + offset, pos, result;
      if (idx >= 0 && idx < this.chunk.length) {
        pos = this.pos + offset;
        result = this.chunk.charCodeAt(idx);
      } else {
        let resolved = this.resolveOffset(offset, 1);
        if (resolved == null)
          return -1;
        pos = resolved;
        if (pos >= this.chunk2Pos && pos < this.chunk2Pos + this.chunk2.length) {
          result = this.chunk2.charCodeAt(pos - this.chunk2Pos);
        } else {
          let i = this.rangeIndex, range = this.range;
          while (range.to <= pos)
            range = this.ranges[++i];
          this.chunk2 = this.input.chunk(this.chunk2Pos = pos);
          if (pos + this.chunk2.length > range.to)
            this.chunk2 = this.chunk2.slice(0, range.to - pos);
          result = this.chunk2.charCodeAt(0);
        }
      }
      if (pos >= this.token.lookAhead)
        this.token.lookAhead = pos + 1;
      return result;
    }
    acceptToken(token, endOffset = 0) {
      let end = endOffset ? this.resolveOffset(endOffset, -1) : this.pos;
      if (end == null || end < this.token.start)
        throw new RangeError("Token end out of bounds");
      this.token.value = token;
      this.token.end = end;
    }
    getChunk() {
      if (this.pos >= this.chunk2Pos && this.pos < this.chunk2Pos + this.chunk2.length) {
        let {chunk, chunkPos} = this;
        this.chunk = this.chunk2;
        this.chunkPos = this.chunk2Pos;
        this.chunk2 = chunk;
        this.chunk2Pos = chunkPos;
        this.chunkOff = this.pos - this.chunkPos;
      } else {
        this.chunk2 = this.chunk;
        this.chunk2Pos = this.chunkPos;
        let nextChunk = this.input.chunk(this.pos);
        let end = this.pos + nextChunk.length;
        this.chunk = end > this.range.to ? nextChunk.slice(0, this.range.to - this.pos) : nextChunk;
        this.chunkPos = this.pos;
        this.chunkOff = 0;
      }
    }
    readNext() {
      if (this.chunkOff >= this.chunk.length) {
        this.getChunk();
        if (this.chunkOff == this.chunk.length)
          return this.next = -1;
      }
      return this.next = this.chunk.charCodeAt(this.chunkOff);
    }
    advance(n = 1) {
      this.chunkOff += n;
      while (this.pos + n >= this.range.to) {
        if (this.rangeIndex == this.ranges.length - 1)
          return this.setDone();
        n -= this.range.to - this.pos;
        this.range = this.ranges[++this.rangeIndex];
        this.pos = this.range.from;
      }
      this.pos += n;
      if (this.pos >= this.token.lookAhead)
        this.token.lookAhead = this.pos + 1;
      return this.readNext();
    }
    setDone() {
      this.pos = this.chunkPos = this.end;
      this.range = this.ranges[this.rangeIndex = this.ranges.length - 1];
      this.chunk = "";
      return this.next = -1;
    }
    reset(pos, token) {
      if (token) {
        this.token = token;
        token.start = pos;
        token.lookAhead = pos + 1;
        token.value = token.extended = -1;
      } else {
        this.token = nullToken;
      }
      if (this.pos != pos) {
        this.pos = pos;
        if (pos == this.end) {
          this.setDone();
          return this;
        }
        while (pos < this.range.from)
          this.range = this.ranges[--this.rangeIndex];
        while (pos >= this.range.to)
          this.range = this.ranges[++this.rangeIndex];
        if (pos >= this.chunkPos && pos < this.chunkPos + this.chunk.length) {
          this.chunkOff = pos - this.chunkPos;
        } else {
          this.chunk = "";
          this.chunkOff = 0;
        }
        this.readNext();
      }
      return this;
    }
    read(from, to) {
      if (from >= this.chunkPos && to <= this.chunkPos + this.chunk.length)
        return this.chunk.slice(from - this.chunkPos, to - this.chunkPos);
      if (from >= this.chunk2Pos && to <= this.chunk2Pos + this.chunk2.length)
        return this.chunk2.slice(from - this.chunk2Pos, to - this.chunk2Pos);
      if (from >= this.range.from && to <= this.range.to)
        return this.input.read(from, to);
      let result = "";
      for (let r of this.ranges) {
        if (r.from >= to)
          break;
        if (r.to > from)
          result += this.input.read(Math.max(r.from, from), Math.min(r.to, to));
      }
      return result;
    }
  };
  var TokenGroup = class {
    constructor(data2, id2) {
      this.data = data2;
      this.id = id2;
    }
    token(input, stack) {
      readToken(this.data, input, stack, this.id);
    }
  };
  TokenGroup.prototype.contextual = TokenGroup.prototype.fallback = TokenGroup.prototype.extend = false;
  var ExternalTokenizer = class {
    constructor(token, options = {}) {
      this.token = token;
      this.contextual = !!options.contextual;
      this.fallback = !!options.fallback;
      this.extend = !!options.extend;
    }
  };
  function readToken(data2, input, stack, group) {
    let state = 0, groupMask = 1 << group, {parser: parser7} = stack.p, {dialect} = parser7;
    scan:
      for (; ; ) {
        if ((groupMask & data2[state]) == 0)
          break;
        let accEnd = data2[state + 1];
        for (let i = state + 3; i < accEnd; i += 2)
          if ((data2[i + 1] & groupMask) > 0) {
            let term = data2[i];
            if (dialect.allows(term) && (input.token.value == -1 || input.token.value == term || parser7.overrides(term, input.token.value))) {
              input.acceptToken(term);
              break;
            }
          }
        let next = input.next, low = 0, high = data2[state + 2];
        if (input.next < 0 && high > low && data2[accEnd + high * 3 - 3] == 65535 && data2[accEnd + high * 3 - 3] == 65535) {
          state = data2[accEnd + high * 3 - 1];
          continue scan;
        }
        for (; low < high; ) {
          let mid = low + high >> 1;
          let index = accEnd + mid + (mid << 1);
          let from = data2[index], to = data2[index + 1] || 65536;
          if (next < from)
            high = mid;
          else if (next >= to)
            low = mid + 1;
          else {
            state = data2[index + 2];
            input.advance();
            continue scan;
          }
        }
        break;
      }
  }
  function decodeArray(input, Type2 = Uint16Array) {
    if (typeof input != "string")
      return input;
    let array = null;
    for (let pos = 0, out = 0; pos < input.length; ) {
      let value = 0;
      for (; ; ) {
        let next = input.charCodeAt(pos++), stop = false;
        if (next == 126) {
          value = 65535;
          break;
        }
        if (next >= 92)
          next--;
        if (next >= 34)
          next--;
        let digit = next - 32;
        if (digit >= 46) {
          digit -= 46;
          stop = true;
        }
        value += digit;
        if (stop)
          break;
        value *= 46;
      }
      if (array)
        array[out++] = value;
      else
        array = new Type2(value);
    }
    return array;
  }
  var verbose = typeof process != "undefined" && process.env && /\bparse\b/.test(process.env.LOG);
  var stackIDs = null;
  var Safety;
  (function(Safety2) {
    Safety2[Safety2["Margin"] = 25] = "Margin";
  })(Safety || (Safety = {}));
  function cutAt(tree, pos, side) {
    let cursor = tree.cursor(IterMode.IncludeAnonymous);
    cursor.moveTo(pos);
    for (; ; ) {
      if (!(side < 0 ? cursor.childBefore(pos) : cursor.childAfter(pos)))
        for (; ; ) {
          if ((side < 0 ? cursor.to < pos : cursor.from > pos) && !cursor.type.isError)
            return side < 0 ? Math.max(0, Math.min(cursor.to - 1, pos - 25)) : Math.min(tree.length, Math.max(cursor.from + 1, pos + 25));
          if (side < 0 ? cursor.prevSibling() : cursor.nextSibling())
            break;
          if (!cursor.parent())
            return side < 0 ? 0 : tree.length;
        }
    }
  }
  var FragmentCursor2 = class {
    constructor(fragments, nodeSet) {
      this.fragments = fragments;
      this.nodeSet = nodeSet;
      this.i = 0;
      this.fragment = null;
      this.safeFrom = -1;
      this.safeTo = -1;
      this.trees = [];
      this.start = [];
      this.index = [];
      this.nextFragment();
    }
    nextFragment() {
      let fr = this.fragment = this.i == this.fragments.length ? null : this.fragments[this.i++];
      if (fr) {
        this.safeFrom = fr.openStart ? cutAt(fr.tree, fr.from + fr.offset, 1) - fr.offset : fr.from;
        this.safeTo = fr.openEnd ? cutAt(fr.tree, fr.to + fr.offset, -1) - fr.offset : fr.to;
        while (this.trees.length) {
          this.trees.pop();
          this.start.pop();
          this.index.pop();
        }
        this.trees.push(fr.tree);
        this.start.push(-fr.offset);
        this.index.push(0);
        this.nextStart = this.safeFrom;
      } else {
        this.nextStart = 1e9;
      }
    }
    nodeAt(pos) {
      if (pos < this.nextStart)
        return null;
      while (this.fragment && this.safeTo <= pos)
        this.nextFragment();
      if (!this.fragment)
        return null;
      for (; ; ) {
        let last = this.trees.length - 1;
        if (last < 0) {
          this.nextFragment();
          return null;
        }
        let top2 = this.trees[last], index = this.index[last];
        if (index == top2.children.length) {
          this.trees.pop();
          this.start.pop();
          this.index.pop();
          continue;
        }
        let next = top2.children[index];
        let start = this.start[last] + top2.positions[index];
        if (start > pos) {
          this.nextStart = start;
          return null;
        }
        if (next instanceof Tree) {
          if (start == pos) {
            if (start < this.safeFrom)
              return null;
            let end = start + next.length;
            if (end <= this.safeTo) {
              let lookAhead = next.prop(NodeProp.lookAhead);
              if (!lookAhead || end + lookAhead < this.fragment.to)
                return next;
            }
          }
          this.index[last]++;
          if (start + next.length >= Math.max(this.safeFrom, pos)) {
            this.trees.push(next);
            this.start.push(start);
            this.index.push(0);
          }
        } else {
          this.index[last]++;
          this.nextStart = start + next.length;
        }
      }
    }
  };
  var TokenCache = class {
    constructor(parser7, stream) {
      this.stream = stream;
      this.tokens = [];
      this.mainToken = null;
      this.actions = [];
      this.tokens = parser7.tokenizers.map((_) => new CachedToken());
    }
    getActions(stack) {
      let actionIndex = 0;
      let main = null;
      let {parser: parser7} = stack.p, {tokenizers} = parser7;
      let mask = parser7.stateSlot(stack.state, 3);
      let context = stack.curContext ? stack.curContext.hash : 0;
      let lookAhead = 0;
      for (let i = 0; i < tokenizers.length; i++) {
        if ((1 << i & mask) == 0)
          continue;
        let tokenizer = tokenizers[i], token = this.tokens[i];
        if (main && !tokenizer.fallback)
          continue;
        if (tokenizer.contextual || token.start != stack.pos || token.mask != mask || token.context != context) {
          this.updateCachedToken(token, tokenizer, stack);
          token.mask = mask;
          token.context = context;
        }
        if (token.lookAhead > token.end + 25)
          lookAhead = Math.max(token.lookAhead, lookAhead);
        if (token.value != 0) {
          let startIndex = actionIndex;
          if (token.extended > -1)
            actionIndex = this.addActions(stack, token.extended, token.end, actionIndex);
          actionIndex = this.addActions(stack, token.value, token.end, actionIndex);
          if (!tokenizer.extend) {
            main = token;
            if (actionIndex > startIndex)
              break;
          }
        }
      }
      while (this.actions.length > actionIndex)
        this.actions.pop();
      if (lookAhead)
        stack.setLookAhead(lookAhead);
      if (!main && stack.pos == this.stream.end) {
        main = new CachedToken();
        main.value = stack.p.parser.eofTerm;
        main.start = main.end = stack.pos;
        actionIndex = this.addActions(stack, main.value, main.end, actionIndex);
      }
      this.mainToken = main;
      return this.actions;
    }
    getMainToken(stack) {
      if (this.mainToken)
        return this.mainToken;
      let main = new CachedToken(), {pos, p} = stack;
      main.start = pos;
      main.end = Math.min(pos + 1, p.stream.end);
      main.value = pos == p.stream.end ? p.parser.eofTerm : 0;
      return main;
    }
    updateCachedToken(token, tokenizer, stack) {
      let start = this.stream.clipPos(stack.pos);
      tokenizer.token(this.stream.reset(start, token), stack);
      if (token.value > -1) {
        let {parser: parser7} = stack.p;
        for (let i = 0; i < parser7.specialized.length; i++)
          if (parser7.specialized[i] == token.value) {
            let result = parser7.specializers[i](this.stream.read(token.start, token.end), stack);
            if (result >= 0 && stack.p.parser.dialect.allows(result >> 1)) {
              if ((result & 1) == 0)
                token.value = result >> 1;
              else
                token.extended = result >> 1;
              break;
            }
          }
      } else {
        token.value = 0;
        token.end = this.stream.clipPos(start + 1);
      }
    }
    putAction(action, token, end, index) {
      for (let i = 0; i < index; i += 3)
        if (this.actions[i] == action)
          return index;
      this.actions[index++] = action;
      this.actions[index++] = token;
      this.actions[index++] = end;
      return index;
    }
    addActions(stack, token, end, index) {
      let {state} = stack, {parser: parser7} = stack.p, {data: data2} = parser7;
      for (let set = 0; set < 2; set++) {
        for (let i = parser7.stateSlot(state, set ? 2 : 1); ; i += 3) {
          if (data2[i] == 65535) {
            if (data2[i + 1] == 1) {
              i = pair(data2, i + 2);
            } else {
              if (index == 0 && data2[i + 1] == 2)
                index = this.putAction(pair(data2, i + 2), token, end, index);
              break;
            }
          }
          if (data2[i] == token)
            index = this.putAction(pair(data2, i + 1), token, end, index);
        }
      }
      return index;
    }
  };
  var Rec;
  (function(Rec2) {
    Rec2[Rec2["Distance"] = 5] = "Distance";
    Rec2[Rec2["MaxRemainingPerStep"] = 3] = "MaxRemainingPerStep";
    Rec2[Rec2["MinBufferLengthPrune"] = 500] = "MinBufferLengthPrune";
    Rec2[Rec2["ForceReduceLimit"] = 10] = "ForceReduceLimit";
    Rec2[Rec2["CutDepth"] = 15e3] = "CutDepth";
    Rec2[Rec2["CutTo"] = 9e3] = "CutTo";
  })(Rec || (Rec = {}));
  var Parse = class {
    constructor(parser7, input, fragments, ranges) {
      this.parser = parser7;
      this.input = input;
      this.ranges = ranges;
      this.recovering = 0;
      this.nextStackID = 9812;
      this.minStackPos = 0;
      this.reused = [];
      this.stoppedAt = null;
      this.stream = new InputStream(input, ranges);
      this.tokens = new TokenCache(parser7, this.stream);
      this.topTerm = parser7.top[1];
      let {from} = ranges[0];
      this.stacks = [Stack.start(this, parser7.top[0], from)];
      this.fragments = fragments.length && this.stream.end - from > parser7.bufferLength * 4 ? new FragmentCursor2(fragments, parser7.nodeSet) : null;
    }
    get parsedPos() {
      return this.minStackPos;
    }
    advance() {
      let stacks = this.stacks, pos = this.minStackPos;
      let newStacks = this.stacks = [];
      let stopped, stoppedTokens;
      for (let i = 0; i < stacks.length; i++) {
        let stack = stacks[i];
        for (; ; ) {
          this.tokens.mainToken = null;
          if (stack.pos > pos) {
            newStacks.push(stack);
          } else if (this.advanceStack(stack, newStacks, stacks)) {
            continue;
          } else {
            if (!stopped) {
              stopped = [];
              stoppedTokens = [];
            }
            stopped.push(stack);
            let tok = this.tokens.getMainToken(stack);
            stoppedTokens.push(tok.value, tok.end);
          }
          break;
        }
      }
      if (!newStacks.length) {
        let finished = stopped && findFinished(stopped);
        if (finished)
          return this.stackToTree(finished);
        if (this.parser.strict) {
          if (verbose && stopped)
            console.log("Stuck with token " + (this.tokens.mainToken ? this.parser.getName(this.tokens.mainToken.value) : "none"));
          throw new SyntaxError("No parse at " + pos);
        }
        if (!this.recovering)
          this.recovering = 5;
      }
      if (this.recovering && stopped) {
        let finished = this.stoppedAt != null && stopped[0].pos > this.stoppedAt ? stopped[0] : this.runRecovery(stopped, stoppedTokens, newStacks);
        if (finished)
          return this.stackToTree(finished.forceAll());
      }
      if (this.recovering) {
        let maxRemaining = this.recovering == 1 ? 1 : this.recovering * 3;
        if (newStacks.length > maxRemaining) {
          newStacks.sort((a, b) => b.score - a.score);
          while (newStacks.length > maxRemaining)
            newStacks.pop();
        }
        if (newStacks.some((s) => s.reducePos > pos))
          this.recovering--;
      } else if (newStacks.length > 1) {
        outer:
          for (let i = 0; i < newStacks.length - 1; i++) {
            let stack = newStacks[i];
            for (let j = i + 1; j < newStacks.length; j++) {
              let other = newStacks[j];
              if (stack.sameState(other) || stack.buffer.length > 500 && other.buffer.length > 500) {
                if ((stack.score - other.score || stack.buffer.length - other.buffer.length) > 0) {
                  newStacks.splice(j--, 1);
                } else {
                  newStacks.splice(i--, 1);
                  continue outer;
                }
              }
            }
          }
      }
      this.minStackPos = newStacks[0].pos;
      for (let i = 1; i < newStacks.length; i++)
        if (newStacks[i].pos < this.minStackPos)
          this.minStackPos = newStacks[i].pos;
      return null;
    }
    stopAt(pos) {
      if (this.stoppedAt != null && this.stoppedAt < pos)
        throw new RangeError("Can't move stoppedAt forward");
      this.stoppedAt = pos;
    }
    advanceStack(stack, stacks, split) {
      let start = stack.pos, {parser: parser7} = this;
      let base2 = verbose ? this.stackID(stack) + " -> " : "";
      if (this.stoppedAt != null && start > this.stoppedAt)
        return stack.forceReduce() ? stack : null;
      if (this.fragments) {
        let strictCx = stack.curContext && stack.curContext.tracker.strict, cxHash = strictCx ? stack.curContext.hash : 0;
        for (let cached = this.fragments.nodeAt(start); cached; ) {
          let match = this.parser.nodeSet.types[cached.type.id] == cached.type ? parser7.getGoto(stack.state, cached.type.id) : -1;
          if (match > -1 && cached.length && (!strictCx || (cached.prop(NodeProp.contextHash) || 0) == cxHash)) {
            stack.useNode(cached, match);
            if (verbose)
              console.log(base2 + this.stackID(stack) + ` (via reuse of ${parser7.getName(cached.type.id)})`);
            return true;
          }
          if (!(cached instanceof Tree) || cached.children.length == 0 || cached.positions[0] > 0)
            break;
          let inner = cached.children[0];
          if (inner instanceof Tree && cached.positions[0] == 0)
            cached = inner;
          else
            break;
        }
      }
      let defaultReduce = parser7.stateSlot(stack.state, 4);
      if (defaultReduce > 0) {
        stack.reduce(defaultReduce);
        if (verbose)
          console.log(base2 + this.stackID(stack) + ` (via always-reduce ${parser7.getName(defaultReduce & 65535)})`);
        return true;
      }
      if (stack.stack.length >= 15e3) {
        while (stack.stack.length > 9e3 && stack.forceReduce()) {
        }
      }
      let actions = this.tokens.getActions(stack);
      for (let i = 0; i < actions.length; ) {
        let action = actions[i++], term = actions[i++], end = actions[i++];
        let last = i == actions.length || !split;
        let localStack = last ? stack : stack.split();
        localStack.apply(action, term, end);
        if (verbose)
          console.log(base2 + this.stackID(localStack) + ` (via ${(action & 65536) == 0 ? "shift" : `reduce of ${parser7.getName(action & 65535)}`} for ${parser7.getName(term)} @ ${start}${localStack == stack ? "" : ", split"})`);
        if (last)
          return true;
        else if (localStack.pos > start)
          stacks.push(localStack);
        else
          split.push(localStack);
      }
      return false;
    }
    advanceFully(stack, newStacks) {
      let pos = stack.pos;
      for (; ; ) {
        if (!this.advanceStack(stack, null, null))
          return false;
        if (stack.pos > pos) {
          pushStackDedup(stack, newStacks);
          return true;
        }
      }
    }
    runRecovery(stacks, tokens, newStacks) {
      let finished = null, restarted = false;
      for (let i = 0; i < stacks.length; i++) {
        let stack = stacks[i], token = tokens[i << 1], tokenEnd = tokens[(i << 1) + 1];
        let base2 = verbose ? this.stackID(stack) + " -> " : "";
        if (stack.deadEnd) {
          if (restarted)
            continue;
          restarted = true;
          stack.restart();
          if (verbose)
            console.log(base2 + this.stackID(stack) + " (restarted)");
          let done = this.advanceFully(stack, newStacks);
          if (done)
            continue;
        }
        let force = stack.split(), forceBase = base2;
        for (let j = 0; force.forceReduce() && j < 10; j++) {
          if (verbose)
            console.log(forceBase + this.stackID(force) + " (via force-reduce)");
          let done = this.advanceFully(force, newStacks);
          if (done)
            break;
          if (verbose)
            forceBase = this.stackID(force) + " -> ";
        }
        for (let insert2 of stack.recoverByInsert(token)) {
          if (verbose)
            console.log(base2 + this.stackID(insert2) + " (via recover-insert)");
          this.advanceFully(insert2, newStacks);
        }
        if (this.stream.end > stack.pos) {
          if (tokenEnd == stack.pos) {
            tokenEnd++;
            token = 0;
          }
          stack.recoverByDelete(token, tokenEnd);
          if (verbose)
            console.log(base2 + this.stackID(stack) + ` (via recover-delete ${this.parser.getName(token)})`);
          pushStackDedup(stack, newStacks);
        } else if (!finished || finished.score < stack.score) {
          finished = stack;
        }
      }
      return finished;
    }
    stackToTree(stack) {
      stack.close();
      return Tree.build({
        buffer: StackBufferCursor.create(stack),
        nodeSet: this.parser.nodeSet,
        topID: this.topTerm,
        maxBufferLength: this.parser.bufferLength,
        reused: this.reused,
        start: this.ranges[0].from,
        length: stack.pos - this.ranges[0].from,
        minRepeatType: this.parser.minRepeatTerm
      });
    }
    stackID(stack) {
      let id2 = (stackIDs || (stackIDs = new WeakMap())).get(stack);
      if (!id2)
        stackIDs.set(stack, id2 = String.fromCodePoint(this.nextStackID++));
      return id2 + stack;
    }
  };
  function pushStackDedup(stack, newStacks) {
    for (let i = 0; i < newStacks.length; i++) {
      let other = newStacks[i];
      if (other.pos == stack.pos && other.sameState(stack)) {
        if (newStacks[i].score < stack.score)
          newStacks[i] = stack;
        return;
      }
    }
    newStacks.push(stack);
  }
  var Dialect = class {
    constructor(source, flags, disabled) {
      this.source = source;
      this.flags = flags;
      this.disabled = disabled;
    }
    allows(term) {
      return !this.disabled || this.disabled[term] == 0;
    }
  };
  var id = (x) => x;
  var ContextTracker = class {
    constructor(spec) {
      this.start = spec.start;
      this.shift = spec.shift || id;
      this.reduce = spec.reduce || id;
      this.reuse = spec.reuse || id;
      this.hash = spec.hash || (() => 0);
      this.strict = spec.strict !== false;
    }
  };
  var LRParser = class extends Parser {
    constructor(spec) {
      super();
      this.wrappers = [];
      if (spec.version != 14)
        throw new RangeError(`Parser version (${spec.version}) doesn't match runtime version (${14})`);
      let nodeNames = spec.nodeNames.split(" ");
      this.minRepeatTerm = nodeNames.length;
      for (let i = 0; i < spec.repeatNodeCount; i++)
        nodeNames.push("");
      let topTerms = Object.keys(spec.topRules).map((r) => spec.topRules[r][1]);
      let nodeProps = [];
      for (let i = 0; i < nodeNames.length; i++)
        nodeProps.push([]);
      function setProp(nodeID, prop, value) {
        nodeProps[nodeID].push([prop, prop.deserialize(String(value))]);
      }
      if (spec.nodeProps)
        for (let propSpec of spec.nodeProps) {
          let prop = propSpec[0];
          if (typeof prop == "string")
            prop = NodeProp[prop];
          for (let i = 1; i < propSpec.length; ) {
            let next = propSpec[i++];
            if (next >= 0) {
              setProp(next, prop, propSpec[i++]);
            } else {
              let value = propSpec[i + -next];
              for (let j = -next; j > 0; j--)
                setProp(propSpec[i++], prop, value);
              i++;
            }
          }
        }
      this.nodeSet = new NodeSet(nodeNames.map((name2, i) => NodeType.define({
        name: i >= this.minRepeatTerm ? void 0 : name2,
        id: i,
        props: nodeProps[i],
        top: topTerms.indexOf(i) > -1,
        error: i == 0,
        skipped: spec.skippedNodes && spec.skippedNodes.indexOf(i) > -1
      })));
      if (spec.propSources)
        this.nodeSet = this.nodeSet.extend(...spec.propSources);
      this.strict = false;
      this.bufferLength = DefaultBufferLength;
      let tokenArray = decodeArray(spec.tokenData);
      this.context = spec.context;
      this.specializerSpecs = spec.specialized || [];
      this.specialized = new Uint16Array(this.specializerSpecs.length);
      for (let i = 0; i < this.specializerSpecs.length; i++)
        this.specialized[i] = this.specializerSpecs[i].term;
      this.specializers = this.specializerSpecs.map(getSpecializer);
      this.states = decodeArray(spec.states, Uint32Array);
      this.data = decodeArray(spec.stateData);
      this.goto = decodeArray(spec.goto);
      this.maxTerm = spec.maxTerm;
      this.tokenizers = spec.tokenizers.map((value) => typeof value == "number" ? new TokenGroup(tokenArray, value) : value);
      this.topRules = spec.topRules;
      this.dialects = spec.dialects || {};
      this.dynamicPrecedences = spec.dynamicPrecedences || null;
      this.tokenPrecTable = spec.tokenPrec;
      this.termNames = spec.termNames || null;
      this.maxNode = this.nodeSet.types.length - 1;
      this.dialect = this.parseDialect();
      this.top = this.topRules[Object.keys(this.topRules)[0]];
    }
    createParse(input, fragments, ranges) {
      let parse = new Parse(this, input, fragments, ranges);
      for (let w of this.wrappers)
        parse = w(parse, input, fragments, ranges);
      return parse;
    }
    getGoto(state, term, loose = false) {
      let table = this.goto;
      if (term >= table[0])
        return -1;
      for (let pos = table[term + 1]; ; ) {
        let groupTag = table[pos++], last = groupTag & 1;
        let target = table[pos++];
        if (last && loose)
          return target;
        for (let end = pos + (groupTag >> 1); pos < end; pos++)
          if (table[pos] == state)
            return target;
        if (last)
          return -1;
      }
    }
    hasAction(state, terminal) {
      let data2 = this.data;
      for (let set = 0; set < 2; set++) {
        for (let i = this.stateSlot(state, set ? 2 : 1), next; ; i += 3) {
          if ((next = data2[i]) == 65535) {
            if (data2[i + 1] == 1)
              next = data2[i = pair(data2, i + 2)];
            else if (data2[i + 1] == 2)
              return pair(data2, i + 2);
            else
              break;
          }
          if (next == terminal || next == 0)
            return pair(data2, i + 1);
        }
      }
      return 0;
    }
    stateSlot(state, slot) {
      return this.states[state * 6 + slot];
    }
    stateFlag(state, flag) {
      return (this.stateSlot(state, 0) & flag) > 0;
    }
    validAction(state, action) {
      if (action == this.stateSlot(state, 4))
        return true;
      for (let i = this.stateSlot(state, 1); ; i += 3) {
        if (this.data[i] == 65535) {
          if (this.data[i + 1] == 1)
            i = pair(this.data, i + 2);
          else
            return false;
        }
        if (action == pair(this.data, i + 1))
          return true;
      }
    }
    nextStates(state) {
      let result = [];
      for (let i = this.stateSlot(state, 1); ; i += 3) {
        if (this.data[i] == 65535) {
          if (this.data[i + 1] == 1)
            i = pair(this.data, i + 2);
          else
            break;
        }
        if ((this.data[i + 2] & 65536 >> 16) == 0) {
          let value = this.data[i + 1];
          if (!result.some((v, i2) => i2 & 1 && v == value))
            result.push(this.data[i], value);
        }
      }
      return result;
    }
    overrides(token, prev) {
      let iPrev = findOffset(this.data, this.tokenPrecTable, prev);
      return iPrev < 0 || findOffset(this.data, this.tokenPrecTable, token) < iPrev;
    }
    configure(config) {
      let copy = Object.assign(Object.create(LRParser.prototype), this);
      if (config.props)
        copy.nodeSet = this.nodeSet.extend(...config.props);
      if (config.top) {
        let info = this.topRules[config.top];
        if (!info)
          throw new RangeError(`Invalid top rule name ${config.top}`);
        copy.top = info;
      }
      if (config.tokenizers)
        copy.tokenizers = this.tokenizers.map((t2) => {
          let found = config.tokenizers.find((r) => r.from == t2);
          return found ? found.to : t2;
        });
      if (config.specializers) {
        copy.specializers = this.specializers.slice();
        copy.specializerSpecs = this.specializerSpecs.map((s, i) => {
          let found = config.specializers.find((r) => r.from == s.external);
          if (!found)
            return s;
          let spec = Object.assign(Object.assign({}, s), {external: found.to});
          copy.specializers[i] = getSpecializer(spec);
          return spec;
        });
      }
      if (config.contextTracker)
        copy.context = config.contextTracker;
      if (config.dialect)
        copy.dialect = this.parseDialect(config.dialect);
      if (config.strict != null)
        copy.strict = config.strict;
      if (config.wrap)
        copy.wrappers = copy.wrappers.concat(config.wrap);
      if (config.bufferLength != null)
        copy.bufferLength = config.bufferLength;
      return copy;
    }
    hasWrappers() {
      return this.wrappers.length > 0;
    }
    getName(term) {
      return this.termNames ? this.termNames[term] : String(term <= this.maxNode && this.nodeSet.types[term].name || term);
    }
    get eofTerm() {
      return this.maxNode + 1;
    }
    get topNode() {
      return this.nodeSet.types[this.top[1]];
    }
    dynamicPrecedence(term) {
      let prec2 = this.dynamicPrecedences;
      return prec2 == null ? 0 : prec2[term] || 0;
    }
    parseDialect(dialect) {
      let values2 = Object.keys(this.dialects), flags = values2.map(() => false);
      if (dialect)
        for (let part of dialect.split(" ")) {
          let id2 = values2.indexOf(part);
          if (id2 >= 0)
            flags[id2] = true;
        }
      let disabled = null;
      for (let i = 0; i < values2.length; i++)
        if (!flags[i]) {
          for (let j = this.dialects[values2[i]], id2; (id2 = this.data[j++]) != 65535; )
            (disabled || (disabled = new Uint8Array(this.maxTerm + 1)))[id2] = 1;
        }
      return new Dialect(dialect, flags, disabled);
    }
    static deserialize(spec) {
      return new LRParser(spec);
    }
  };
  function pair(data2, off) {
    return data2[off] | data2[off + 1] << 16;
  }
  function findOffset(data2, start, term) {
    for (let i = start, next; (next = data2[i]) != 65535; i++)
      if (next == term)
        return i - start;
    return -1;
  }
  function findFinished(stacks) {
    let best = null;
    for (let stack of stacks) {
      let stopped = stack.p.stoppedAt;
      if ((stack.pos == stack.p.stream.end || stopped != null && stack.pos > stopped) && stack.p.parser.stateFlag(stack.state, 2) && (!best || best.score < stack.score))
        best = stack;
    }
    return best;
  }
  function getSpecializer(spec) {
    if (spec.external) {
      let mask = spec.extend ? 1 : 0;
      return (value, stack) => spec.external(value, stack) << 1 | mask;
    }
    return spec.get;
  }

  // node_modules/@lezer/json/dist/index.es.js
  var jsonHighlighting = styleTags({
    String: tags.string,
    Number: tags.number,
    "True False": tags.bool,
    PropertyName: tags.propertyName,
    Null: tags.null,
    ",": tags.separator,
    "[ ]": tags.squareBracket,
    "{ }": tags.brace
  });
  var parser = LRParser.deserialize({
    version: 14,
    states: "$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",
    stateData: "#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",
    goto: "!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",
    nodeNames: "\u26A0 JsonText True False Null Number String } { Object Property PropertyName ] [ Array",
    maxTerm: 25,
    nodeProps: [
      ["openedBy", 7, "{", 12, "["],
      ["closedBy", 8, "}", 13, "]"]
    ],
    propSources: [jsonHighlighting],
    skippedNodes: [0],
    repeatNodeCount: 2,
    tokenData: "(p~RaXY!WYZ!W]^!Wpq!Wrs!]|}$i}!O$n!Q!R$w!R![&V![!]&h!}#O&m#P#Q&r#Y#Z&w#b#c'f#h#i'}#o#p(f#q#r(k~!]Oc~~!`Upq!]qr!]rs!rs#O!]#O#P!w#P~!]~!wOe~~!zXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#g~#jR!Q![#s!c!i#s#T#Z#s~#vR!Q![$P!c!i$P#T#Z$P~$SR!Q![$]!c!i$]#T#Z$]~$`R!Q![!]!c!i!]#T#Z!]~$nOh~~$qQ!Q!R$w!R![&V~$|RT~!O!P%V!g!h%k#X#Y%k~%YP!Q![%]~%bRT~!Q![%]!g!h%k#X#Y%k~%nR{|%w}!O%w!Q![%}~%zP!Q![%}~&SPT~!Q![%}~&[ST~!O!P%V!Q![&V!g!h%k#X#Y%k~&mOg~~&rO]~~&wO[~~&zP#T#U&}~'QP#`#a'T~'WP#g#h'Z~'^P#X#Y'a~'fOR~~'iP#i#j'l~'oP#`#a'r~'uP#`#a'x~'}OS~~(QP#f#g(T~(WP#i#j(Z~(^P#X#Y(a~(fOQ~~(kOW~~(pOV~",
    tokenizers: [0],
    topRules: {JsonText: [0, 1]},
    tokenPrec: 0
  });

  // node_modules/@codemirror/lang-json/dist/index.js
  var jsonLanguage = /* @__PURE__ */ LRLanguage.define({
    name: "json",
    parser: /* @__PURE__ */ parser.configure({
      props: [
        /* @__PURE__ */ indentNodeProp.add({
          Object: /* @__PURE__ */ continuedIndent({except: /^\s*\}/}),
          Array: /* @__PURE__ */ continuedIndent({except: /^\s*\]/})
        }),
        /* @__PURE__ */ foldNodeProp.add({
          "Object Array": foldInside
        })
      ]
    }),
    languageData: {
      closeBrackets: {brackets: ["[", "{", '"']},
      indentOnInput: /^\s*[\}\]]$/
    }
  });
  function json() {
    return new LanguageSupport(jsonLanguage);
  }

  // node_modules/@lezer/css/dist/index.es.js
  var descendantOp = 93;
  var Unit = 1;
  var callee = 94;
  var identifier = 95;
  var VariableName = 2;
  var space = [
    9,
    10,
    11,
    12,
    13,
    32,
    133,
    160,
    5760,
    8192,
    8193,
    8194,
    8195,
    8196,
    8197,
    8198,
    8199,
    8200,
    8201,
    8202,
    8232,
    8233,
    8239,
    8287,
    12288
  ];
  var colon = 58;
  var parenL = 40;
  var underscore = 95;
  var bracketL = 91;
  var dash = 45;
  var period = 46;
  var hash = 35;
  var percent = 37;
  function isAlpha(ch) {
    return ch >= 65 && ch <= 90 || ch >= 97 && ch <= 122 || ch >= 161;
  }
  function isDigit(ch) {
    return ch >= 48 && ch <= 57;
  }
  var identifiers = new ExternalTokenizer((input, stack) => {
    for (let inside2 = false, dashes = 0, i = 0; ; i++) {
      let {next} = input;
      if (isAlpha(next) || next == dash || next == underscore || inside2 && isDigit(next)) {
        if (!inside2 && (next != dash || i > 0))
          inside2 = true;
        if (dashes === i && next == dash)
          dashes++;
        input.advance();
      } else {
        if (inside2)
          input.acceptToken(next == parenL ? callee : dashes == 2 && stack.canShift(VariableName) ? VariableName : identifier);
        break;
      }
    }
  });
  var descendant = new ExternalTokenizer((input) => {
    if (space.includes(input.peek(-1))) {
      let {next} = input;
      if (isAlpha(next) || next == underscore || next == hash || next == period || next == bracketL || next == colon || next == dash)
        input.acceptToken(descendantOp);
    }
  });
  var unitToken = new ExternalTokenizer((input) => {
    if (!space.includes(input.peek(-1))) {
      let {next} = input;
      if (next == percent) {
        input.advance();
        input.acceptToken(Unit);
      }
      if (isAlpha(next)) {
        do {
          input.advance();
        } while (isAlpha(input.next));
        input.acceptToken(Unit);
      }
    }
  });
  var cssHighlighting = styleTags({
    "AtKeyword import charset namespace keyframes media supports": tags.definitionKeyword,
    "from to selector": tags.keyword,
    NamespaceName: tags.namespace,
    KeyframeName: tags.labelName,
    TagName: tags.tagName,
    ClassName: tags.className,
    PseudoClassName: tags.constant(tags.className),
    IdName: tags.labelName,
    "FeatureName PropertyName": tags.propertyName,
    AttributeName: tags.attributeName,
    NumberLiteral: tags.number,
    KeywordQuery: tags.keyword,
    UnaryQueryOp: tags.operatorKeyword,
    "CallTag ValueName": tags.atom,
    VariableName: tags.variableName,
    Callee: tags.operatorKeyword,
    Unit: tags.unit,
    "UniversalSelector NestingSelector": tags.definitionOperator,
    MatchOp: tags.compareOperator,
    "ChildOp SiblingOp, LogicOp": tags.logicOperator,
    BinOp: tags.arithmeticOperator,
    Important: tags.modifier,
    Comment: tags.blockComment,
    ParenthesizedContent: tags.special(tags.name),
    ColorLiteral: tags.color,
    StringLiteral: tags.string,
    ":": tags.punctuation,
    "PseudoOp #": tags.derefOperator,
    "; ,": tags.separator,
    "( )": tags.paren,
    "[ ]": tags.squareBracket,
    "{ }": tags.brace
  });
  var spec_callee = {__proto__: null, lang: 32, "nth-child": 32, "nth-last-child": 32, "nth-of-type": 32, "nth-last-of-type": 32, dir: 32, "host-context": 32, url: 60, "url-prefix": 60, domain: 60, regexp: 60, selector: 134};
  var spec_AtKeyword = {__proto__: null, "@import": 114, "@media": 138, "@charset": 142, "@namespace": 146, "@keyframes": 152, "@supports": 164};
  var spec_identifier = {__proto__: null, not: 128, only: 128, from: 158, to: 160};
  var parser2 = LRParser.deserialize({
    version: 14,
    states: "7WOYQ[OOOOQP'#Cd'#CdOOQP'#Cc'#CcO!ZQ[O'#CfO!}QXO'#CaO#UQ[O'#ChO#aQ[O'#DPO#fQ[O'#DTOOQP'#Ec'#EcO#kQdO'#DeO$VQ[O'#DrO#kQdO'#DtO$hQ[O'#DvO$sQ[O'#DyO$xQ[O'#EPO%WQ[O'#EROOQS'#Eb'#EbOOQS'#ES'#ESQYQ[OOOOQP'#Cg'#CgOOQP,59Q,59QO!ZQ[O,59QO%_Q[O'#EVO%yQWO,58{O&RQ[O,59SO#aQ[O,59kO#fQ[O,59oO%_Q[O,59sO%_Q[O,59uO%_Q[O,59vO'bQ[O'#D`OOQS,58{,58{OOQP'#Ck'#CkOOQO'#C}'#C}OOQP,59S,59SO'iQWO,59SO'nQWO,59SOOQP'#DR'#DROOQP,59k,59kOOQO'#DV'#DVO'sQ`O,59oOOQS'#Cp'#CpO#kQdO'#CqO'{QvO'#CsO)VQtO,5:POOQO'#Cx'#CxO'nQWO'#CwO)kQWO'#CyOOQS'#Ef'#EfOOQO'#Dh'#DhO)pQ[O'#DoO*OQWO'#EiO$xQ[O'#DmO*^QWO'#DpOOQO'#Ej'#EjO%|QWO,5:^O*cQpO,5:`OOQS'#Dx'#DxO*kQWO,5:bO*pQ[O,5:bOOQO'#D{'#D{O*xQWO,5:eO*}QWO,5:kO+VQWO,5:mOOQS-E8Q-E8QOOQP1G.l1G.lO+yQXO,5:qOOQO-E8T-E8TOOQS1G.g1G.gOOQP1G.n1G.nO'iQWO1G.nO'nQWO1G.nOOQP1G/V1G/VO,WQ`O1G/ZO,qQXO1G/_O-XQXO1G/aO-oQXO1G/bO.VQXO'#CdO.zQWO'#DaOOQS,59z,59zO/PQWO,59zO/XQ[O,59zO/`Q[O'#DOO/gQdO'#CoOOQP1G/Z1G/ZO#kQdO1G/ZO/nQpO,59]OOQS,59_,59_O#kQdO,59aO/vQWO1G/kOOQS,59c,59cO/{Q!bO,59eO0TQWO'#DhO0`QWO,5:TO0eQWO,5:ZO$xQ[O,5:VO$xQ[O'#EYO0mQWO,5;TO0xQWO,5:XO%_Q[O,5:[OOQS1G/x1G/xOOQS1G/z1G/zOOQS1G/|1G/|O1ZQWO1G/|O1`QdO'#D|OOQS1G0P1G0POOQS1G0V1G0VOOQS1G0X1G0XOOQP7+$Y7+$YOOQP7+$u7+$uO#kQdO7+$uO#kQdO,59{O1nQ[O'#EXO1xQWO1G/fOOQS1G/f1G/fO1xQWO1G/fO2QQXO'#EhO2XQWO,59jO2^QtO'#ETO3RQdO'#EeO3]QWO,59ZO3bQpO7+$uOOQS1G.w1G.wOOQS1G.{1G.{OOQS7+%V7+%VO3jQWO1G/PO#kQdO1G/oOOQO1G/u1G/uOOQO1G/q1G/qO3oQWO,5:tOOQO-E8W-E8WO3}QXO1G/vOOQS7+%h7+%hO4UQYO'#CsO%|QWO'#EZO4^QdO,5:hOOQS,5:h,5:hO4lQpO<<HaO4tQtO1G/gOOQO,5:s,5:sO5XQ[O,5:sOOQO-E8V-E8VOOQS7+%Q7+%QO5cQWO7+%QO5kQWO,5;SOOQP1G/U1G/UOOQS-E8R-E8RO#kQdO'#EUO5sQWO,5;POOQT1G.u1G.uOOQP<<Ha<<HaOOQS7+$k7+$kO5{QdO7+%ZOOQO7+%b7+%bOOQS,5:u,5:uOOQS-E8X-E8XOOQS1G0S1G0SOOQPAN={AN={O6SQtO'#EWO#kQdO'#EWO6}QdO7+%ROOQO7+%R7+%ROOQO1G0_1G0_OOQS<<Hl<<HlO7_QdO,5:pOOQO-E8S-E8SOOQO<<Hu<<HuO7iQtO,5:rOOQS-E8U-E8UOOQO<<Hm<<Hm",
    stateData: "8j~O#TOSROS~OUWOXWO]TO^TOtUOxVO!Y_O!ZXO!gYO!iZO!k[O!n]O!t^O#RPO#WRO~O#RcO~O]hO^hOpfOtiOxjO|kO!PmO#PlO#WeO~O!RnO~P!`O`tO#QqO#RpO~O#RuO~O#RwO~OQ!QObzOf!QOh!QOn!PO#Q}O#RyO#Z{O~Ob!SO!b!UO!e!VO#R!RO!R#]P~Oh![On!PO#R!ZO~O#R!^O~Ob!SO!b!UO!e!VO#R!RO~O!W#]P~P$VOUWOXWO]TO^TOtUOxVO#RPO#WRO~OpfO!RnO~O`!iO#QqO#RpO~OQ!pOUWOXWO]TO^TOtUOxVO!Y_O!ZXO!gYO!iZO!k[O!n]O!t^O#R!oO#WRO~O!Q!qO~P&^Ob!tO~Ob!uO~Ov!vOz!wO~OP!yObgXjgX!WgX!bgX!egX#RgXagXQgXfgXhgXngXpgX#QgX#ZgXvgX!QgX!VgX~Ob!SOj!zO!b!UO!e!VO#R!RO!W#]P~Ob!}O~Ob!SO!b!UO!e!VO#R#OO~Op#SO!`#RO!R#]X!W#]X~Ob#VO~Oj!zO!W#XO~O!W#YO~Oh#ZOn!PO~O!R#[O~O!RnO!`#RO~O!RnO!W#_O~O]hO^hOtiOxjO|kO!PmO#PlO#WeO~Op!ya!R!yaa!ya~P+_Ov#aOz#bO~O]hO^hOtiOxjO#WeO~Op{i|{i!P{i!R{i#P{ia{i~P,`Op}i|}i!P}i!R}i#P}ia}i~P,`Op!Oi|!Oi!P!Oi!R!Oi#P!Oia!Oi~P,`O]WX]!UX^WXpWXtWXxWX|WX!PWX!RWX#PWX#WWX~O]#cO~O!Q#fO!W#dO~O!Q#fO~P&^Oa#[P~P%_Oa#XP~P#kOa#nOj!zO~O!W#pO~Oh#qOo#qO~O]!^Xa![X!`![X~O]#rO~Oa#sO!`#RO~Op#SO!R#]a!W#]a~O!`#ROp!aa!R!aa!W!aaa!aa~O!W#xO~O!Q#|O!q#zO!r#zO#Z#yO~O!Q!{X!W!{X~P&^O!Q$SO!W#dO~Oa#[X~P!`Oa$VO~Oj!zOQ!wXa!wXb!wXf!wXh!wXn!wXp!wX#Q!wX#R!wX#Z!wX~Op$XOa#XX~P#kOa$ZO~Oj!zOv$[O~Oa$]O~O!`#ROp!|a!R!|a!W!|a~Oa$_O~P+_OP!yO!RgX~O!Q$bO!q#zO!r#zO#Z#yO~Oj!zOv$cO~Oj!zOp$eO!V$gO!Q!Ti!W!Ti~P#kO!Q!{a!W!{a~P&^O!Q$iO!W#dO~OpfOa#[a~Op$XOa#Xa~Oa$lO~P#kOj!zOQ!zXb!zXf!zXh!zXn!zXp!zX!Q!zX!V!zX!W!zX#Q!zX#R!zX#Z!zX~Op$eO!V$oO!Q!Tq!W!Tq~P#kOa!xap!xa~P#kOj!zOQ!zab!zaf!zah!zan!zap!za!Q!za!V!za!W!za#Q!za#R!za#Z!za~Oo#Zj!Pj~",
    goto: ",O#_PPPPP#`P#h#vP#h$U#hPP$[PPP$b$k$kP$}P$kP$k%e%wPPP&a&g#hP&mP#hP&sP#hP#h#hPPP&y']'iPP#`PP'o'o'y'oP'oP'o'oP#`P#`P#`P'|#`P(P(SPP#`P#`(V(e(s(y)T)Z)e)kPPPPPP)q)yP*e*hP+^+a+j]`Obn!s#d$QiWObfklmn!s!t#V#d$QiQObfklmn!s!t#V#d$QQdRR!ceQrTR!ghQ!gtQ!|!OR#`!iq!QXZz!u!w!z#b#c#k#r$O$X$^$e$f$jp!QXZz!u!w!z#b#c#k#r$O$X$^$e$f$jT#z#[#{q!OXZz!u!w!z#b#c#k#r$O$X$^$e$f$jp!QXZz!u!w!z#b#c#k#r$O$X$^$e$f$jQ![[R#Z!]QsTR!hhQ!gsR#`!hQvUR!jiQxVR!kjQoSQ!fgQ#W!XQ#^!`Q#_!aR$`#zQ!rnQ#g!sQ$P#dR$h$QX!pn!s#d$Qa!WY^_|!S!U#R#SR#P!SR!][R!_]R#]!_QbOU!bb!s$QQ!snR$Q#dQ#k!uU$W#k$^$jQ$^#rR$j$XQ$Y#kR$k$YQgSS!eg$UR$U#hQ$f$OR$n$fQ#e!rS$R#e$TR$T#gQ#T!TR#v#TQ#{#[R$a#{]aObn!s#d$Q[SObn!s#d$QQ!dfQ!lkQ!mlQ!nmQ#h!tR#w#VR#l!uQ|XQ!YZQ!xz[#j!u#k#r$X$^$jQ#m!wQ#o!zQ#}#bQ$O#cS$d$O$fR$m$eR#i!tQ!XYQ!a_R!{|U!TY_|Q!`^Q#Q!SQ#U!UQ#t#RR#u#S",
    nodeNames: "\u26A0 Unit VariableName Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee CallLiteral CallTag ParenthesizedContent , PseudoClassName ArgList IdSelector # IdName ] AttributeSelector [ AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp } { Block Declaration PropertyName Important ; ImportStatement AtKeyword import KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList from to SupportsStatement supports AtRule",
    maxTerm: 106,
    nodeProps: [
      ["openedBy", 17, "(", 48, "{"],
      ["closedBy", 18, ")", 49, "}"]
    ],
    propSources: [cssHighlighting],
    skippedNodes: [0, 3],
    repeatNodeCount: 8,
    tokenData: "Ay~R![OX$wX^%]^p$wpq%]qr(crs+}st,otu2Uuv$wvw2rwx2}xy3jyz3uz{3z{|4_|}8U}!O8a!O!P8x!P!Q9Z!Q![;e![!]<Y!]!^<x!^!_$w!_!`=T!`!a=`!a!b$w!b!c>O!c!}$w!}#O?[#O#P$w#P#Q?g#Q#R2U#R#T$w#T#U?r#U#c$w#c#d@q#d#o$w#o#pAQ#p#q2U#q#rA]#r#sAh#s#y$w#y#z%]#z$f$w$f$g%]$g#BY$w#BY#BZ%]#BZ$IS$w$IS$I_%]$I_$I|$w$I|$JO%]$JO$JT$w$JT$JU%]$JU$KV$w$KV$KW%]$KW&FU$w&FU&FV%]&FV~$wW$zQOy%Qz~%QW%VQoWOy%Qz~%Q~%bf#T~OX%QX^&v^p%Qpq&vqy%Qz#y%Q#y#z&v#z$f%Q$f$g&v$g#BY%Q#BY#BZ&v#BZ$IS%Q$IS$I_&v$I_$I|%Q$I|$JO&v$JO$JT%Q$JT$JU&v$JU$KV%Q$KV$KW&v$KW&FU%Q&FU&FV&v&FV~%Q~&}f#T~oWOX%QX^&v^p%Qpq&vqy%Qz#y%Q#y#z&v#z$f%Q$f$g&v$g#BY%Q#BY#BZ&v#BZ$IS%Q$IS$I_&v$I_$I|%Q$I|$JO&v$JO$JT%Q$JT$JU&v$JU$KV%Q$KV$KW&v$KW&FU%Q&FU&FV&v&FV~%Q^(fSOy%Qz#]%Q#]#^(r#^~%Q^(wSoWOy%Qz#a%Q#a#b)T#b~%Q^)YSoWOy%Qz#d%Q#d#e)f#e~%Q^)kSoWOy%Qz#c%Q#c#d)w#d~%Q^)|SoWOy%Qz#f%Q#f#g*Y#g~%Q^*_SoWOy%Qz#h%Q#h#i*k#i~%Q^*pSoWOy%Qz#T%Q#T#U*|#U~%Q^+RSoWOy%Qz#b%Q#b#c+_#c~%Q^+dSoWOy%Qz#h%Q#h#i+p#i~%Q^+wQ!VUoWOy%Qz~%Q~,QUOY+}Zr+}rs,ds#O+}#O#P,i#P~+}~,iOh~~,lPO~+}_,tWtPOy%Qz!Q%Q!Q![-^![!c%Q!c!i-^!i#T%Q#T#Z-^#Z~%Q^-cWoWOy%Qz!Q%Q!Q![-{![!c%Q!c!i-{!i#T%Q#T#Z-{#Z~%Q^.QWoWOy%Qz!Q%Q!Q![.j![!c%Q!c!i.j!i#T%Q#T#Z.j#Z~%Q^.qWfUoWOy%Qz!Q%Q!Q![/Z![!c%Q!c!i/Z!i#T%Q#T#Z/Z#Z~%Q^/bWfUoWOy%Qz!Q%Q!Q![/z![!c%Q!c!i/z!i#T%Q#T#Z/z#Z~%Q^0PWoWOy%Qz!Q%Q!Q![0i![!c%Q!c!i0i!i#T%Q#T#Z0i#Z~%Q^0pWfUoWOy%Qz!Q%Q!Q![1Y![!c%Q!c!i1Y!i#T%Q#T#Z1Y#Z~%Q^1_WoWOy%Qz!Q%Q!Q![1w![!c%Q!c!i1w!i#T%Q#T#Z1w#Z~%Q^2OQfUoWOy%Qz~%QY2XSOy%Qz!_%Q!_!`2e!`~%QY2lQzQoWOy%Qz~%QX2wQXPOy%Qz~%Q~3QUOY2}Zw2}wx,dx#O2}#O#P3d#P~2}~3gPO~2}_3oQbVOy%Qz~%Q~3zOa~_4RSUPjSOy%Qz!_%Q!_!`2e!`~%Q_4fUjS!PPOy%Qz!O%Q!O!P4x!P!Q%Q!Q![7_![~%Q^4}SoWOy%Qz!Q%Q!Q![5Z![~%Q^5bWoW#ZUOy%Qz!Q%Q!Q![5Z![!g%Q!g!h5z!h#X%Q#X#Y5z#Y~%Q^6PWoWOy%Qz{%Q{|6i|}%Q}!O6i!O!Q%Q!Q![6z![~%Q^6nSoWOy%Qz!Q%Q!Q![6z![~%Q^7RSoW#ZUOy%Qz!Q%Q!Q![6z![~%Q^7fYoW#ZUOy%Qz!O%Q!O!P5Z!P!Q%Q!Q![7_![!g%Q!g!h5z!h#X%Q#X#Y5z#Y~%Q_8ZQpVOy%Qz~%Q^8fUjSOy%Qz!O%Q!O!P4x!P!Q%Q!Q![7_![~%Q_8}S#WPOy%Qz!Q%Q!Q![5Z![~%Q~9`RjSOy%Qz{9i{~%Q~9nSoWOy9iyz9zz{:o{~9i~9}ROz9zz{:W{~9z~:ZTOz9zz{:W{!P9z!P!Q:j!Q~9z~:oOR~~:tUoWOy9iyz9zz{:o{!P9i!P!Q;W!Q~9i~;_QoWR~Oy%Qz~%Q^;jY#ZUOy%Qz!O%Q!O!P5Z!P!Q%Q!Q![7_![!g%Q!g!h5z!h#X%Q#X#Y5z#Y~%QX<_S]POy%Qz![%Q![!]<k!]~%QX<rQ^PoWOy%Qz~%Q_<}Q!WVOy%Qz~%QY=YQzQOy%Qz~%QX=eS|POy%Qz!`%Q!`!a=q!a~%QX=xQ|PoWOy%Qz~%QX>RUOy%Qz!c%Q!c!}>e!}#T%Q#T#o>e#o~%QX>lY!YPoWOy%Qz}%Q}!O>e!O!Q%Q!Q![>e![!c%Q!c!}>e!}#T%Q#T#o>e#o~%QX?aQxPOy%Qz~%Q^?lQvUOy%Qz~%QX?uSOy%Qz#b%Q#b#c@R#c~%QX@WSoWOy%Qz#W%Q#W#X@d#X~%QX@kQ!`PoWOy%Qz~%QX@tSOy%Qz#f%Q#f#g@d#g~%QXAVQ!RPOy%Qz~%Q_AbQ!QVOy%Qz~%QZAmS!PPOy%Qz!_%Q!_!`2e!`~%Q",
    tokenizers: [descendant, unitToken, identifiers, 0, 1, 2, 3],
    topRules: {StyleSheet: [0, 4]},
    specialized: [{term: 94, get: (value) => spec_callee[value] || -1}, {term: 56, get: (value) => spec_AtKeyword[value] || -1}, {term: 95, get: (value) => spec_identifier[value] || -1}],
    tokenPrec: 1078
  });

  // node_modules/@codemirror/lang-css/dist/index.js
  var _properties = null;
  function properties() {
    if (!_properties && typeof document == "object" && document.body) {
      let names = [];
      for (let prop in document.body.style) {
        if (!/[A-Z]|^-|^(item|length)$/.test(prop))
          names.push(prop);
      }
      _properties = names.sort().map((name2) => ({type: "property", label: name2}));
    }
    return _properties || [];
  }
  var pseudoClasses = /* @__PURE__ */ [
    "active",
    "after",
    "any-link",
    "autofill",
    "backdrop",
    "before",
    "checked",
    "cue",
    "default",
    "defined",
    "disabled",
    "empty",
    "enabled",
    "file-selector-button",
    "first",
    "first-child",
    "first-letter",
    "first-line",
    "first-of-type",
    "focus",
    "focus-visible",
    "focus-within",
    "fullscreen",
    "has",
    "host",
    "host-context",
    "hover",
    "in-range",
    "indeterminate",
    "invalid",
    "is",
    "lang",
    "last-child",
    "last-of-type",
    "left",
    "link",
    "marker",
    "modal",
    "not",
    "nth-child",
    "nth-last-child",
    "nth-last-of-type",
    "nth-of-type",
    "only-child",
    "only-of-type",
    "optional",
    "out-of-range",
    "part",
    "placeholder",
    "placeholder-shown",
    "read-only",
    "read-write",
    "required",
    "right",
    "root",
    "scope",
    "selection",
    "slotted",
    "target",
    "target-text",
    "valid",
    "visited",
    "where"
  ].map((name2) => ({type: "class", label: name2}));
  var values = /* @__PURE__ */ [
    "above",
    "absolute",
    "activeborder",
    "additive",
    "activecaption",
    "after-white-space",
    "ahead",
    "alias",
    "all",
    "all-scroll",
    "alphabetic",
    "alternate",
    "always",
    "antialiased",
    "appworkspace",
    "asterisks",
    "attr",
    "auto",
    "auto-flow",
    "avoid",
    "avoid-column",
    "avoid-page",
    "avoid-region",
    "axis-pan",
    "background",
    "backwards",
    "baseline",
    "below",
    "bidi-override",
    "blink",
    "block",
    "block-axis",
    "bold",
    "bolder",
    "border",
    "border-box",
    "both",
    "bottom",
    "break",
    "break-all",
    "break-word",
    "bullets",
    "button",
    "button-bevel",
    "buttonface",
    "buttonhighlight",
    "buttonshadow",
    "buttontext",
    "calc",
    "capitalize",
    "caps-lock-indicator",
    "caption",
    "captiontext",
    "caret",
    "cell",
    "center",
    "checkbox",
    "circle",
    "cjk-decimal",
    "clear",
    "clip",
    "close-quote",
    "col-resize",
    "collapse",
    "color",
    "color-burn",
    "color-dodge",
    "column",
    "column-reverse",
    "compact",
    "condensed",
    "contain",
    "content",
    "contents",
    "content-box",
    "context-menu",
    "continuous",
    "copy",
    "counter",
    "counters",
    "cover",
    "crop",
    "cross",
    "crosshair",
    "currentcolor",
    "cursive",
    "cyclic",
    "darken",
    "dashed",
    "decimal",
    "decimal-leading-zero",
    "default",
    "default-button",
    "dense",
    "destination-atop",
    "destination-in",
    "destination-out",
    "destination-over",
    "difference",
    "disc",
    "discard",
    "disclosure-closed",
    "disclosure-open",
    "document",
    "dot-dash",
    "dot-dot-dash",
    "dotted",
    "double",
    "down",
    "e-resize",
    "ease",
    "ease-in",
    "ease-in-out",
    "ease-out",
    "element",
    "ellipse",
    "ellipsis",
    "embed",
    "end",
    "ethiopic-abegede-gez",
    "ethiopic-halehame-aa-er",
    "ethiopic-halehame-gez",
    "ew-resize",
    "exclusion",
    "expanded",
    "extends",
    "extra-condensed",
    "extra-expanded",
    "fantasy",
    "fast",
    "fill",
    "fill-box",
    "fixed",
    "flat",
    "flex",
    "flex-end",
    "flex-start",
    "footnotes",
    "forwards",
    "from",
    "geometricPrecision",
    "graytext",
    "grid",
    "groove",
    "hand",
    "hard-light",
    "help",
    "hidden",
    "hide",
    "higher",
    "highlight",
    "highlighttext",
    "horizontal",
    "hsl",
    "hsla",
    "hue",
    "icon",
    "ignore",
    "inactiveborder",
    "inactivecaption",
    "inactivecaptiontext",
    "infinite",
    "infobackground",
    "infotext",
    "inherit",
    "initial",
    "inline",
    "inline-axis",
    "inline-block",
    "inline-flex",
    "inline-grid",
    "inline-table",
    "inset",
    "inside",
    "intrinsic",
    "invert",
    "italic",
    "justify",
    "keep-all",
    "landscape",
    "large",
    "larger",
    "left",
    "level",
    "lighter",
    "lighten",
    "line-through",
    "linear",
    "linear-gradient",
    "lines",
    "list-item",
    "listbox",
    "listitem",
    "local",
    "logical",
    "loud",
    "lower",
    "lower-hexadecimal",
    "lower-latin",
    "lower-norwegian",
    "lowercase",
    "ltr",
    "luminosity",
    "manipulation",
    "match",
    "matrix",
    "matrix3d",
    "medium",
    "menu",
    "menutext",
    "message-box",
    "middle",
    "min-intrinsic",
    "mix",
    "monospace",
    "move",
    "multiple",
    "multiple_mask_images",
    "multiply",
    "n-resize",
    "narrower",
    "ne-resize",
    "nesw-resize",
    "no-close-quote",
    "no-drop",
    "no-open-quote",
    "no-repeat",
    "none",
    "normal",
    "not-allowed",
    "nowrap",
    "ns-resize",
    "numbers",
    "numeric",
    "nw-resize",
    "nwse-resize",
    "oblique",
    "opacity",
    "open-quote",
    "optimizeLegibility",
    "optimizeSpeed",
    "outset",
    "outside",
    "outside-shape",
    "overlay",
    "overline",
    "padding",
    "padding-box",
    "painted",
    "page",
    "paused",
    "perspective",
    "pinch-zoom",
    "plus-darker",
    "plus-lighter",
    "pointer",
    "polygon",
    "portrait",
    "pre",
    "pre-line",
    "pre-wrap",
    "preserve-3d",
    "progress",
    "push-button",
    "radial-gradient",
    "radio",
    "read-only",
    "read-write",
    "read-write-plaintext-only",
    "rectangle",
    "region",
    "relative",
    "repeat",
    "repeating-linear-gradient",
    "repeating-radial-gradient",
    "repeat-x",
    "repeat-y",
    "reset",
    "reverse",
    "rgb",
    "rgba",
    "ridge",
    "right",
    "rotate",
    "rotate3d",
    "rotateX",
    "rotateY",
    "rotateZ",
    "round",
    "row",
    "row-resize",
    "row-reverse",
    "rtl",
    "run-in",
    "running",
    "s-resize",
    "sans-serif",
    "saturation",
    "scale",
    "scale3d",
    "scaleX",
    "scaleY",
    "scaleZ",
    "screen",
    "scroll",
    "scrollbar",
    "scroll-position",
    "se-resize",
    "self-start",
    "self-end",
    "semi-condensed",
    "semi-expanded",
    "separate",
    "serif",
    "show",
    "single",
    "skew",
    "skewX",
    "skewY",
    "skip-white-space",
    "slide",
    "slider-horizontal",
    "slider-vertical",
    "sliderthumb-horizontal",
    "sliderthumb-vertical",
    "slow",
    "small",
    "small-caps",
    "small-caption",
    "smaller",
    "soft-light",
    "solid",
    "source-atop",
    "source-in",
    "source-out",
    "source-over",
    "space",
    "space-around",
    "space-between",
    "space-evenly",
    "spell-out",
    "square",
    "start",
    "static",
    "status-bar",
    "stretch",
    "stroke",
    "stroke-box",
    "sub",
    "subpixel-antialiased",
    "svg_masks",
    "super",
    "sw-resize",
    "symbolic",
    "symbols",
    "system-ui",
    "table",
    "table-caption",
    "table-cell",
    "table-column",
    "table-column-group",
    "table-footer-group",
    "table-header-group",
    "table-row",
    "table-row-group",
    "text",
    "text-bottom",
    "text-top",
    "textarea",
    "textfield",
    "thick",
    "thin",
    "threeddarkshadow",
    "threedface",
    "threedhighlight",
    "threedlightshadow",
    "threedshadow",
    "to",
    "top",
    "transform",
    "translate",
    "translate3d",
    "translateX",
    "translateY",
    "translateZ",
    "transparent",
    "ultra-condensed",
    "ultra-expanded",
    "underline",
    "unidirectional-pan",
    "unset",
    "up",
    "upper-latin",
    "uppercase",
    "url",
    "var",
    "vertical",
    "vertical-text",
    "view-box",
    "visible",
    "visibleFill",
    "visiblePainted",
    "visibleStroke",
    "visual",
    "w-resize",
    "wait",
    "wave",
    "wider",
    "window",
    "windowframe",
    "windowtext",
    "words",
    "wrap",
    "wrap-reverse",
    "x-large",
    "x-small",
    "xor",
    "xx-large",
    "xx-small"
  ].map((name2) => ({type: "keyword", label: name2})).concat(/* @__PURE__ */ [
    "aliceblue",
    "antiquewhite",
    "aqua",
    "aquamarine",
    "azure",
    "beige",
    "bisque",
    "black",
    "blanchedalmond",
    "blue",
    "blueviolet",
    "brown",
    "burlywood",
    "cadetblue",
    "chartreuse",
    "chocolate",
    "coral",
    "cornflowerblue",
    "cornsilk",
    "crimson",
    "cyan",
    "darkblue",
    "darkcyan",
    "darkgoldenrod",
    "darkgray",
    "darkgreen",
    "darkkhaki",
    "darkmagenta",
    "darkolivegreen",
    "darkorange",
    "darkorchid",
    "darkred",
    "darksalmon",
    "darkseagreen",
    "darkslateblue",
    "darkslategray",
    "darkturquoise",
    "darkviolet",
    "deeppink",
    "deepskyblue",
    "dimgray",
    "dodgerblue",
    "firebrick",
    "floralwhite",
    "forestgreen",
    "fuchsia",
    "gainsboro",
    "ghostwhite",
    "gold",
    "goldenrod",
    "gray",
    "grey",
    "green",
    "greenyellow",
    "honeydew",
    "hotpink",
    "indianred",
    "indigo",
    "ivory",
    "khaki",
    "lavender",
    "lavenderblush",
    "lawngreen",
    "lemonchiffon",
    "lightblue",
    "lightcoral",
    "lightcyan",
    "lightgoldenrodyellow",
    "lightgray",
    "lightgreen",
    "lightpink",
    "lightsalmon",
    "lightseagreen",
    "lightskyblue",
    "lightslategray",
    "lightsteelblue",
    "lightyellow",
    "lime",
    "limegreen",
    "linen",
    "magenta",
    "maroon",
    "mediumaquamarine",
    "mediumblue",
    "mediumorchid",
    "mediumpurple",
    "mediumseagreen",
    "mediumslateblue",
    "mediumspringgreen",
    "mediumturquoise",
    "mediumvioletred",
    "midnightblue",
    "mintcream",
    "mistyrose",
    "moccasin",
    "navajowhite",
    "navy",
    "oldlace",
    "olive",
    "olivedrab",
    "orange",
    "orangered",
    "orchid",
    "palegoldenrod",
    "palegreen",
    "paleturquoise",
    "palevioletred",
    "papayawhip",
    "peachpuff",
    "peru",
    "pink",
    "plum",
    "powderblue",
    "purple",
    "rebeccapurple",
    "red",
    "rosybrown",
    "royalblue",
    "saddlebrown",
    "salmon",
    "sandybrown",
    "seagreen",
    "seashell",
    "sienna",
    "silver",
    "skyblue",
    "slateblue",
    "slategray",
    "snow",
    "springgreen",
    "steelblue",
    "tan",
    "teal",
    "thistle",
    "tomato",
    "turquoise",
    "violet",
    "wheat",
    "white",
    "whitesmoke",
    "yellow",
    "yellowgreen"
  ].map((name2) => ({type: "constant", label: name2})));
  var tags2 = /* @__PURE__ */ [
    "a",
    "abbr",
    "address",
    "article",
    "aside",
    "b",
    "bdi",
    "bdo",
    "blockquote",
    "body",
    "br",
    "button",
    "canvas",
    "caption",
    "cite",
    "code",
    "col",
    "colgroup",
    "dd",
    "del",
    "details",
    "dfn",
    "dialog",
    "div",
    "dl",
    "dt",
    "em",
    "figcaption",
    "figure",
    "footer",
    "form",
    "header",
    "hgroup",
    "h1",
    "h2",
    "h3",
    "h4",
    "h5",
    "h6",
    "hr",
    "html",
    "i",
    "iframe",
    "img",
    "input",
    "ins",
    "kbd",
    "label",
    "legend",
    "li",
    "main",
    "meter",
    "nav",
    "ol",
    "output",
    "p",
    "pre",
    "ruby",
    "section",
    "select",
    "small",
    "source",
    "span",
    "strong",
    "sub",
    "summary",
    "sup",
    "table",
    "tbody",
    "td",
    "template",
    "textarea",
    "tfoot",
    "th",
    "thead",
    "tr",
    "u",
    "ul"
  ].map((name2) => ({type: "type", label: name2}));
  var identifier2 = /^[\w-]*/;
  var cssCompletionSource = (context) => {
    let {state, pos} = context, node = syntaxTree(state).resolveInner(pos, -1);
    if (node.name == "PropertyName")
      return {from: node.from, options: properties(), validFor: identifier2};
    if (node.name == "ValueName")
      return {from: node.from, options: values, validFor: identifier2};
    if (node.name == "PseudoClassName")
      return {from: node.from, options: pseudoClasses, validFor: identifier2};
    if (node.name == "TagName") {
      for (let {parent} = node; parent; parent = parent.parent)
        if (parent.name == "Block")
          return {from: node.from, options: properties(), validFor: identifier2};
      return {from: node.from, options: tags2, validFor: identifier2};
    }
    if (!context.explicit)
      return null;
    let above = node.resolve(pos), before = above.childBefore(pos);
    if (before && before.name == ":" && above.name == "PseudoClassSelector")
      return {from: pos, options: pseudoClasses, validFor: identifier2};
    if (before && before.name == ":" && above.name == "Declaration" || above.name == "ArgList")
      return {from: pos, options: values, validFor: identifier2};
    if (above.name == "Block")
      return {from: pos, options: properties(), validFor: identifier2};
    return null;
  };
  var cssLanguage = /* @__PURE__ */ LRLanguage.define({
    name: "css",
    parser: /* @__PURE__ */ parser2.configure({
      props: [
        /* @__PURE__ */ indentNodeProp.add({
          Declaration: /* @__PURE__ */ continuedIndent()
        }),
        /* @__PURE__ */ foldNodeProp.add({
          Block: foldInside
        })
      ]
    }),
    languageData: {
      commentTokens: {block: {open: "/*", close: "*/"}},
      indentOnInput: /^\s*\}$/,
      wordChars: "-"
    }
  });
  function css() {
    return new LanguageSupport(cssLanguage, cssLanguage.data.of({autocomplete: cssCompletionSource}));
  }

  // node_modules/@lezer/html/dist/index.es.js
  var scriptText = 53;
  var StartCloseScriptTag = 1;
  var styleText = 54;
  var StartCloseStyleTag = 2;
  var textareaText = 55;
  var StartCloseTextareaTag = 3;
  var StartTag = 4;
  var StartScriptTag = 5;
  var StartStyleTag = 6;
  var StartTextareaTag = 7;
  var StartSelfClosingTag = 8;
  var StartCloseTag = 9;
  var NoMatchStartCloseTag = 10;
  var MismatchedStartCloseTag = 11;
  var missingCloseTag = 56;
  var IncompleteCloseTag = 12;
  var commentContent$1 = 57;
  var Element = 18;
  var ScriptText = 27;
  var StyleText = 30;
  var TextareaText = 33;
  var OpenTag = 35;
  var Dialect_noMatch = 0;
  var selfClosers = {
    area: true,
    base: true,
    br: true,
    col: true,
    command: true,
    embed: true,
    frame: true,
    hr: true,
    img: true,
    input: true,
    keygen: true,
    link: true,
    meta: true,
    param: true,
    source: true,
    track: true,
    wbr: true,
    menuitem: true
  };
  var implicitlyClosed = {
    dd: true,
    li: true,
    optgroup: true,
    option: true,
    p: true,
    rp: true,
    rt: true,
    tbody: true,
    td: true,
    tfoot: true,
    th: true,
    tr: true
  };
  var closeOnOpen = {
    dd: {dd: true, dt: true},
    dt: {dd: true, dt: true},
    li: {li: true},
    option: {option: true, optgroup: true},
    optgroup: {optgroup: true},
    p: {
      address: true,
      article: true,
      aside: true,
      blockquote: true,
      dir: true,
      div: true,
      dl: true,
      fieldset: true,
      footer: true,
      form: true,
      h1: true,
      h2: true,
      h3: true,
      h4: true,
      h5: true,
      h6: true,
      header: true,
      hgroup: true,
      hr: true,
      menu: true,
      nav: true,
      ol: true,
      p: true,
      pre: true,
      section: true,
      table: true,
      ul: true
    },
    rp: {rp: true, rt: true},
    rt: {rp: true, rt: true},
    tbody: {tbody: true, tfoot: true},
    td: {td: true, th: true},
    tfoot: {tbody: true},
    th: {td: true, th: true},
    thead: {tbody: true, tfoot: true},
    tr: {tr: true}
  };
  function nameChar(ch) {
    return ch == 45 || ch == 46 || ch == 58 || ch >= 65 && ch <= 90 || ch == 95 || ch >= 97 && ch <= 122 || ch >= 161;
  }
  function isSpace(ch) {
    return ch == 9 || ch == 10 || ch == 13 || ch == 32;
  }
  var cachedName = null;
  var cachedInput = null;
  var cachedPos = 0;
  function tagNameAfter(input, offset) {
    let pos = input.pos + offset;
    if (cachedPos == pos && cachedInput == input)
      return cachedName;
    let next = input.peek(offset);
    while (isSpace(next))
      next = input.peek(++offset);
    let name2 = "";
    for (; ; ) {
      if (!nameChar(next))
        break;
      name2 += String.fromCharCode(next);
      next = input.peek(++offset);
    }
    cachedInput = input;
    cachedPos = pos;
    return cachedName = name2 ? name2.toLowerCase() : next == question || next == bang ? void 0 : null;
  }
  var lessThan = 60;
  var greaterThan = 62;
  var slash = 47;
  var question = 63;
  var bang = 33;
  var dash2 = 45;
  function ElementContext(name2, parent) {
    this.name = name2;
    this.parent = parent;
    this.hash = parent ? parent.hash : 0;
    for (let i = 0; i < name2.length; i++)
      this.hash += (this.hash << 4) + name2.charCodeAt(i) + (name2.charCodeAt(i) << 8);
  }
  var startTagTerms = [StartTag, StartSelfClosingTag, StartScriptTag, StartStyleTag, StartTextareaTag];
  var elementContext = new ContextTracker({
    start: null,
    shift(context, term, stack, input) {
      return startTagTerms.indexOf(term) > -1 ? new ElementContext(tagNameAfter(input, 1) || "", context) : context;
    },
    reduce(context, term) {
      return term == Element && context ? context.parent : context;
    },
    reuse(context, node, stack, input) {
      let type = node.type.id;
      return type == StartTag || type == OpenTag ? new ElementContext(tagNameAfter(input, 1) || "", context) : context;
    },
    hash(context) {
      return context ? context.hash : 0;
    },
    strict: false
  });
  var tagStart = new ExternalTokenizer((input, stack) => {
    if (input.next != lessThan) {
      if (input.next < 0 && stack.context)
        input.acceptToken(missingCloseTag);
      return;
    }
    input.advance();
    let close = input.next == slash;
    if (close)
      input.advance();
    let name2 = tagNameAfter(input, 0);
    if (name2 === void 0)
      return;
    if (!name2)
      return input.acceptToken(close ? IncompleteCloseTag : StartTag);
    let parent = stack.context ? stack.context.name : null;
    if (close) {
      if (name2 == parent)
        return input.acceptToken(StartCloseTag);
      if (parent && implicitlyClosed[parent])
        return input.acceptToken(missingCloseTag, -2);
      if (stack.dialectEnabled(Dialect_noMatch))
        return input.acceptToken(NoMatchStartCloseTag);
      for (let cx = stack.context; cx; cx = cx.parent)
        if (cx.name == name2)
          return;
      input.acceptToken(MismatchedStartCloseTag);
    } else {
      if (name2 == "script")
        return input.acceptToken(StartScriptTag);
      if (name2 == "style")
        return input.acceptToken(StartStyleTag);
      if (name2 == "textarea")
        return input.acceptToken(StartTextareaTag);
      if (selfClosers.hasOwnProperty(name2))
        return input.acceptToken(StartSelfClosingTag);
      if (parent && closeOnOpen[parent] && closeOnOpen[parent][name2])
        input.acceptToken(missingCloseTag, -1);
      else
        input.acceptToken(StartTag);
    }
  }, {contextual: true});
  var commentContent = new ExternalTokenizer((input) => {
    for (let dashes = 0, i = 0; ; i++) {
      if (input.next < 0) {
        if (i)
          input.acceptToken(commentContent$1);
        break;
      }
      if (input.next == dash2) {
        dashes++;
      } else if (input.next == greaterThan && dashes >= 2) {
        if (i > 3)
          input.acceptToken(commentContent$1, -2);
        break;
      } else {
        dashes = 0;
      }
      input.advance();
    }
  });
  function contentTokenizer(tag, textToken, endToken) {
    let lastState = 2 + tag.length;
    return new ExternalTokenizer((input) => {
      for (let state = 0, matchedLen = 0, i = 0; ; i++) {
        if (input.next < 0) {
          if (i)
            input.acceptToken(textToken);
          break;
        }
        if (state == 0 && input.next == lessThan || state == 1 && input.next == slash || state >= 2 && state < lastState && input.next == tag.charCodeAt(state - 2)) {
          state++;
          matchedLen++;
        } else if ((state == 2 || state == lastState) && isSpace(input.next)) {
          matchedLen++;
        } else if (state == lastState && input.next == greaterThan) {
          if (i > matchedLen)
            input.acceptToken(textToken, -matchedLen);
          else
            input.acceptToken(endToken, -(matchedLen - 2));
          break;
        } else if ((input.next == 10 || input.next == 13) && i) {
          input.acceptToken(textToken, 1);
          break;
        } else {
          state = matchedLen = 0;
        }
        input.advance();
      }
    });
  }
  var scriptTokens = contentTokenizer("script", scriptText, StartCloseScriptTag);
  var styleTokens = contentTokenizer("style", styleText, StartCloseStyleTag);
  var textareaTokens = contentTokenizer("textarea", textareaText, StartCloseTextareaTag);
  var htmlHighlighting = styleTags({
    "Text RawText": tags.content,
    "StartTag StartCloseTag SelfCloserEndTag EndTag SelfCloseEndTag": tags.angleBracket,
    TagName: tags.tagName,
    "MismatchedCloseTag/TagName": [tags.tagName, tags.invalid],
    AttributeName: tags.attributeName,
    "AttributeValue UnquotedAttributeValue": tags.attributeValue,
    Is: tags.definitionOperator,
    "EntityReference CharacterReference": tags.character,
    Comment: tags.blockComment,
    ProcessingInst: tags.processingInstruction,
    DoctypeDecl: tags.documentMeta
  });
  var parser3 = LRParser.deserialize({
    version: 14,
    states: ",xOVOxOOO!WQ!bO'#CoO!]Q!bO'#CyO!bQ!bO'#C|O!gQ!bO'#DPO!lQ!bO'#DRO!qOXO'#CnO!|OYO'#CnO#XO[O'#CnO$eOxO'#CnOOOW'#Cn'#CnO$lO!rO'#DSO$tQ!bO'#DUO$yQ!bO'#DVOOOW'#Dj'#DjOOOW'#DX'#DXQVOxOOO%OQ#tO,59ZO%WQ#tO,59eO%`Q#tO,59hO%hQ#tO,59kO%pQ#tO,59mOOOX'#D]'#D]O%xOXO'#CwO&TOXO,59YOOOY'#D^'#D^O&]OYO'#CzO&hOYO,59YOOO['#D_'#D_O&pO[O'#C}O&{O[O,59YOOOW'#D`'#D`O'TOxO,59YO'[Q!bO'#DQOOOW,59Y,59YOOO`'#Da'#DaO'aO!rO,59nOOOW,59n,59nO'iQ!bO,59pO'nQ!bO,59qOOOW-E7V-E7VO'sQ#tO'#CqOOQO'#DY'#DYO(OQ#tO1G.uOOOX1G.u1G.uO(WQ#tO1G/POOOY1G/P1G/PO(`Q#tO1G/SOOO[1G/S1G/SO(hQ#tO1G/VOOOW1G/V1G/VO(pQ#tO1G/XOOOW1G/X1G/XOOOX-E7Z-E7ZO(xQ!bO'#CxOOOW1G.t1G.tOOOY-E7[-E7[O(}Q!bO'#C{OOO[-E7]-E7]O)SQ!bO'#DOOOOW-E7^-E7^O)XQ!bO,59lOOO`-E7_-E7_OOOW1G/Y1G/YOOOW1G/[1G/[OOOW1G/]1G/]O)^Q&jO,59]OOQO-E7W-E7WOOOX7+$a7+$aOOOY7+$k7+$kOOO[7+$n7+$nOOOW7+$q7+$qOOOW7+$s7+$sO)iQ!bO,59dO)nQ!bO,59gO)sQ!bO,59jOOOW1G/W1G/WO)xO,UO'#CtO*ZO7[O'#CtOOQO1G.w1G.wOOOW1G/O1G/OOOOW1G/R1G/ROOOW1G/U1G/UOOOO'#DZ'#DZO*lO,UO,59`OOQO,59`,59`OOOO'#D['#D[O*}O7[O,59`OOOO-E7X-E7XOOQO1G.z1G.zOOOO-E7Y-E7Y",
    stateData: "+h~O!]OS~OSSOTPOUQOVROWTOY]OZ[O[^O^^O_^O`^Oa^Ow^Oz_O!cZO~OdaO~OdbO~OdcO~OddO~OdeO~O!VfOPkP!YkP~O!WiOQnP!YnP~O!XlORqP!YqP~OSSOTPOUQOVROWTOXqOY]OZ[O[^O^^O_^O`^Oa^Ow^O!cZO~O!YrO~P#dO!ZsO!duO~OdvO~OdwO~OfyOj|O~OfyOj!OO~OfyOj!QO~OfyOj!SO~OfyOj!UO~O!VfOPkX!YkX~OP!WO!Y!XO~O!WiOQnX!YnX~OQ!ZO!Y!XO~O!XlORqX!YqX~OR!]O!Y!XO~O!Y!XO~P#dOd!_O~O!ZsO!d!aO~Oj!bO~Oj!cO~Og!dOfeXjeX~OfyOj!fO~OfyOj!gO~OfyOj!hO~OfyOj!iO~OfyOj!jO~Od!kO~Od!lO~Od!mO~Oj!nO~Oi!qO!_!oO!a!pO~Oj!rO~Oj!sO~Oj!tO~O_!uO`!uOa!uO!_!wO!`!uO~O_!xO`!xOa!xO!a!wO!b!xO~O_!uO`!uOa!uO!_!{O!`!uO~O_!xO`!xOa!xO!a!{O!b!xO~O`_a!cwz!c~",
    goto: "%o!_PPPPPPPPPPPPPPPPPP!`!fP!lPP!xPP!{#O#R#X#[#_#e#h#k#q#w!`P!`!`P#}$T$k$q$w$}%T%Z%aPPPPPPPP%gX^OX`pXUOX`pezabcde{}!P!R!TR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ}bQ!PcQ!RdQ!TeZ!e{}!P!R!TQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",
    nodeNames: "\u26A0 StartCloseTag StartCloseTag StartCloseTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue EndTag ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",
    maxTerm: 66,
    context: elementContext,
    nodeProps: [
      ["closedBy", -11, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, "EndTag", -4, 19, 29, 32, 35, "CloseTag"],
      ["group", -9, 12, 15, 16, 17, 18, 38, 39, 40, 41, "Entity", 14, "Entity TextContent", -3, 27, 30, 33, "TextContent Entity"],
      ["openedBy", 26, "StartTag StartCloseTag", -4, 28, 31, 34, 36, "OpenTag"]
    ],
    propSources: [htmlHighlighting],
    skippedNodes: [0],
    repeatNodeCount: 9,
    tokenData: "!#b!aR!WOX$kXY)sYZ)sZ]$k]^)s^p$kpq)sqr$krs*zsv$kvw+dwx2yx}$k}!O3f!O!P$k!P!Q7_!Q![$k![!]8u!]!^$k!^!_>b!_!`!!p!`!a8T!a!c$k!c!}8u!}#R$k#R#S8u#S#T$k#T#o8u#o$f$k$f$g&R$g%W$k%W%o8u%o%p$k%p&a8u&a&b$k&b1p8u1p4U$k4U4d8u4d4e$k4e$IS8u$IS$I`$k$I`$Ib8u$Ib$Kh$k$Kh%#t8u%#t&/x$k&/x&Et8u&Et&FV$k&FV;'S8u;'S;:j<t;:j?&r$k?&r?Ah8u?Ah?BY$k?BY?Mn8u?Mn~$k!Z$vc^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx!P$k!P!Q&R!Q!^$k!^!_(k!_!a&R!a$f$k$f$g&R$g~$k!R&[V^P!``!bpOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&Rq&xT^P!bpOv&qwx'Xx!^&q!^!_'g!_~&qP'^R^POv'Xw!^'X!_~'Xp'lQ!bpOv'gx~'ga'yU^P!``Or'rrs'Xsv'rw!^'r!^!_(]!_~'r`(bR!``Or(]sv(]w~(]!Q(rT!``!bpOr(krs'gsv(kwx(]x~(kW)WXiWOX)RZ])R^p)Rqr)Rsw)Rx!P)R!Q!^)R!a$f)R$g~)R!a*O^^P!``!bp!]^OX&RXY)sYZ)sZ]&R]^)s^p&Rpq)sqr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&R!Z+TT!_h^P!bpOv&qwx'Xx!^&q!^!_'g!_~&q!Z+kbiWa!ROX,sXZ.QZ],s]^.Q^p,sqr,srs.Qst/]tw,swx.Qx!P,s!P!Q.Q!Q!],s!]!^)R!^!a.Q!a$f,s$f$g.Q$g~,s!Z,xbiWOX,sXZ.QZ],s]^.Q^p,sqr,srs.Qst)Rtw,swx.Qx!P,s!P!Q.Q!Q!],s!]!^.i!^!a.Q!a$f,s$f$g.Q$g~,s!R.TTOp.Qqs.Qt!].Q!]!^.d!^~.Q!R.iO_!R!Z.pXiW_!ROX)RZ])R^p)Rqr)Rsw)Rx!P)R!Q!^)R!a$f)R$g~)R!Z/baiWOX0gXZ1qZ]0g]^1q^p0gqr0grs1qsw0gwx1qx!P0g!P!Q1q!Q!]0g!]!^)R!^!a1q!a$f0g$f$g1q$g~0g!Z0laiWOX0gXZ1qZ]0g]^1q^p0gqr0grs1qsw0gwx1qx!P0g!P!Q1q!Q!]0g!]!^2V!^!a1q!a$f0g$f$g1q$g~0g!R1tSOp1qq!]1q!]!^2Q!^~1q!R2VO`!R!Z2^XiW`!ROX)RZ])R^p)Rqr)Rsw)Rx!P)R!Q!^)R!a$f)R$g~)R!Z3SU!ax^P!``Or'rrs'Xsv'rw!^'r!^!_(]!_~'r!]3qe^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx}$k}!O5S!O!P$k!P!Q&R!Q!^$k!^!_(k!_!a&R!a$f$k$f$g&R$g~$k!]5_d^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx!P$k!P!Q&R!Q!^$k!^!_(k!_!`&R!`!a6m!a$f$k$f$g&R$g~$k!T6xV^P!``!bp!dQOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&R!X7hX^P!``!bpOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_!`&R!`!a8T!a~&R!X8`VjU^P!``!bpOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&R!a9U!YfSdQ^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx}$k}!O8u!O!P8u!P!Q&R!Q![8u![!]8u!]!^$k!^!_(k!_!a&R!a!c$k!c!}8u!}#R$k#R#S8u#S#T$k#T#o8u#o$f$k$f$g&R$g$}$k$}%O8u%O%W$k%W%o8u%o%p$k%p&a8u&a&b$k&b1p8u1p4U8u4U4d8u4d4e$k4e$IS8u$IS$I`$k$I`$Ib8u$Ib$Je$k$Je$Jg8u$Jg$Kh$k$Kh%#t8u%#t&/x$k&/x&Et8u&Et&FV$k&FV;'S8u;'S;:j<t;:j?&r$k?&r?Ah8u?Ah?BY$k?BY?Mn8u?Mn~$k!a=Pe^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx!P$k!P!Q&R!Q!^$k!^!_(k!_!a&R!a$f$k$f$g&R$g;=`$k;=`<%l8u<%l~$k!R>iW!``!bpOq(kqr?Rrs'gsv(kwx(]x!a(k!a!bKj!b~(k!R?YZ!``!bpOr(krs'gsv(kwx(]x}(k}!O?{!O!f(k!f!gAR!g#W(k#W#XGz#X~(k!R@SV!``!bpOr(krs'gsv(kwx(]x}(k}!O@i!O~(k!R@rT!``!bp!cPOr(krs'gsv(kwx(]x~(k!RAYV!``!bpOr(krs'gsv(kwx(]x!q(k!q!rAo!r~(k!RAvV!``!bpOr(krs'gsv(kwx(]x!e(k!e!fB]!f~(k!RBdV!``!bpOr(krs'gsv(kwx(]x!v(k!v!wBy!w~(k!RCQV!``!bpOr(krs'gsv(kwx(]x!{(k!{!|Cg!|~(k!RCnV!``!bpOr(krs'gsv(kwx(]x!r(k!r!sDT!s~(k!RD[V!``!bpOr(krs'gsv(kwx(]x!g(k!g!hDq!h~(k!RDxW!``!bpOrDqrsEbsvDqvwEvwxFfx!`Dq!`!aGb!a~DqqEgT!bpOvEbvxEvx!`Eb!`!aFX!a~EbPEyRO!`Ev!`!aFS!a~EvPFXOzPqF`Q!bpzPOv'gx~'gaFkV!``OrFfrsEvsvFfvwEvw!`Ff!`!aGQ!a~FfaGXR!``zPOr(]sv(]w~(]!RGkT!``!bpzPOr(krs'gsv(kwx(]x~(k!RHRV!``!bpOr(krs'gsv(kwx(]x#c(k#c#dHh#d~(k!RHoV!``!bpOr(krs'gsv(kwx(]x#V(k#V#WIU#W~(k!RI]V!``!bpOr(krs'gsv(kwx(]x#h(k#h#iIr#i~(k!RIyV!``!bpOr(krs'gsv(kwx(]x#m(k#m#nJ`#n~(k!RJgV!``!bpOr(krs'gsv(kwx(]x#d(k#d#eJ|#e~(k!RKTV!``!bpOr(krs'gsv(kwx(]x#X(k#X#YDq#Y~(k!RKqW!``!bpOrKjrsLZsvKjvwLowxNPx!aKj!a!b! g!b~KjqL`T!bpOvLZvxLox!aLZ!a!bM^!b~LZPLrRO!aLo!a!bL{!b~LoPMORO!`Lo!`!aMX!a~LoPM^OwPqMcT!bpOvLZvxLox!`LZ!`!aMr!a~LZqMyQ!bpwPOv'gx~'gaNUV!``OrNPrsLosvNPvwLow!aNP!a!bNk!b~NPaNpV!``OrNPrsLosvNPvwLow!`NP!`!a! V!a~NPa! ^R!``wPOr(]sv(]w~(]!R! nW!``!bpOrKjrsLZsvKjvwLowxNPx!`Kj!`!a!!W!a~Kj!R!!aT!``!bpwPOr(krs'gsv(kwx(]x~(k!V!!{VgS^P!``!bpOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&R",
    tokenizers: [scriptTokens, styleTokens, textareaTokens, tagStart, commentContent, 0, 1, 2, 3, 4, 5],
    topRules: {Document: [0, 13]},
    dialects: {noMatch: 0},
    tokenPrec: 476
  });
  function getAttrs(element, input) {
    let attrs = Object.create(null);
    for (let att of element.firstChild.getChildren("Attribute")) {
      let name2 = att.getChild("AttributeName"), value = att.getChild("AttributeValue") || att.getChild("UnquotedAttributeValue");
      if (name2)
        attrs[input.read(name2.from, name2.to)] = !value ? "" : value.name == "AttributeValue" ? input.read(value.from + 1, value.to - 1) : input.read(value.from, value.to);
    }
    return attrs;
  }
  function maybeNest(node, input, tags3) {
    let attrs;
    for (let tag of tags3) {
      if (!tag.attrs || tag.attrs(attrs || (attrs = getAttrs(node.node.parent, input))))
        return {parser: tag.parser};
    }
    return null;
  }
  function configureNesting(tags3) {
    let script = [], style = [], textarea = [];
    for (let tag of tags3) {
      let array = tag.tag == "script" ? script : tag.tag == "style" ? style : tag.tag == "textarea" ? textarea : null;
      if (!array)
        throw new RangeError("Only script, style, and textarea tags can host nested parsers");
      array.push(tag);
    }
    return parseMixed((node, input) => {
      let id2 = node.type.id;
      if (id2 == ScriptText)
        return maybeNest(node, input, script);
      if (id2 == StyleText)
        return maybeNest(node, input, style);
      if (id2 == TextareaText)
        return maybeNest(node, input, textarea);
      return null;
    });
  }

  // node_modules/@lezer/javascript/dist/index.es.js
  var TSExtends = 1;
  var noSemi = 281;
  var incdec = 2;
  var incdecPrefix = 3;
  var templateContent = 282;
  var InterpolationStart = 4;
  var templateEnd = 283;
  var insertSemi = 284;
  var spaces = 286;
  var newline = 287;
  var LineComment = 5;
  var BlockComment = 6;
  var Dialect_ts = 1;
  var space2 = [
    9,
    10,
    11,
    12,
    13,
    32,
    133,
    160,
    5760,
    8192,
    8193,
    8194,
    8195,
    8196,
    8197,
    8198,
    8199,
    8200,
    8201,
    8202,
    8232,
    8233,
    8239,
    8287,
    12288
  ];
  var braceR = 125;
  var braceL = 123;
  var semicolon = 59;
  var slash2 = 47;
  var star = 42;
  var plus = 43;
  var minus = 45;
  var dollar = 36;
  var backtick = 96;
  var backslash = 92;
  var trackNewline = new ContextTracker({
    start: false,
    shift(context, term) {
      return term == LineComment || term == BlockComment || term == spaces ? context : term == newline;
    },
    strict: false
  });
  var insertSemicolon = new ExternalTokenizer((input, stack) => {
    let {next} = input;
    if ((next == braceR || next == -1 || stack.context) && stack.canShift(insertSemi))
      input.acceptToken(insertSemi);
  }, {contextual: true, fallback: true});
  var noSemicolon = new ExternalTokenizer((input, stack) => {
    let {next} = input, after;
    if (space2.indexOf(next) > -1)
      return;
    if (next == slash2 && ((after = input.peek(1)) == slash2 || after == star))
      return;
    if (next != braceR && next != semicolon && next != -1 && !stack.context && stack.canShift(noSemi))
      input.acceptToken(noSemi);
  }, {contextual: true});
  var incdecToken = new ExternalTokenizer((input, stack) => {
    let {next} = input;
    if (next == plus || next == minus) {
      input.advance();
      if (next == input.next) {
        input.advance();
        let mayPostfix = !stack.context && stack.canShift(incdec);
        input.acceptToken(mayPostfix ? incdec : incdecPrefix);
      }
    }
  }, {contextual: true});
  var template = new ExternalTokenizer((input) => {
    for (let afterDollar = false, i = 0; ; i++) {
      let {next} = input;
      if (next < 0) {
        if (i)
          input.acceptToken(templateContent);
        break;
      } else if (next == backtick) {
        if (i)
          input.acceptToken(templateContent);
        else
          input.acceptToken(templateEnd, 1);
        break;
      } else if (next == braceL && afterDollar) {
        if (i == 1)
          input.acceptToken(InterpolationStart, 1);
        else
          input.acceptToken(templateContent, -1);
        break;
      } else if (next == 10 && i) {
        input.advance();
        input.acceptToken(templateContent);
        break;
      } else if (next == backslash) {
        input.advance();
      }
      afterDollar = next == dollar;
      input.advance();
    }
  });
  var tsExtends = new ExternalTokenizer((input, stack) => {
    if (input.next != 101 || !stack.dialectEnabled(Dialect_ts))
      return;
    input.advance();
    for (let i = 0; i < 6; i++) {
      if (input.next != "xtends".charCodeAt(i))
        return;
      input.advance();
    }
    if (input.next >= 57 && input.next <= 65 || input.next >= 48 && input.next <= 90 || input.next == 95 || input.next >= 97 && input.next <= 122 || input.next > 160)
      return;
    input.acceptToken(TSExtends);
  });
  var jsHighlight = styleTags({
    "get set async static": tags.modifier,
    "for while do if else switch try catch finally return throw break continue default case": tags.controlKeyword,
    "in of await yield void typeof delete instanceof": tags.operatorKeyword,
    "let var const function class extends": tags.definitionKeyword,
    "import export from": tags.moduleKeyword,
    "with debugger as new": tags.keyword,
    TemplateString: tags.special(tags.string),
    super: tags.atom,
    BooleanLiteral: tags.bool,
    this: tags.self,
    null: tags.null,
    Star: tags.modifier,
    VariableName: tags.variableName,
    "CallExpression/VariableName TaggedTemplateExpression/VariableName": tags.function(tags.variableName),
    VariableDefinition: tags.definition(tags.variableName),
    Label: tags.labelName,
    PropertyName: tags.propertyName,
    PrivatePropertyName: tags.special(tags.propertyName),
    "CallExpression/MemberExpression/PropertyName": tags.function(tags.propertyName),
    "FunctionDeclaration/VariableDefinition": tags.function(tags.definition(tags.variableName)),
    "ClassDeclaration/VariableDefinition": tags.definition(tags.className),
    PropertyDefinition: tags.definition(tags.propertyName),
    PrivatePropertyDefinition: tags.definition(tags.special(tags.propertyName)),
    UpdateOp: tags.updateOperator,
    LineComment: tags.lineComment,
    BlockComment: tags.blockComment,
    Number: tags.number,
    String: tags.string,
    ArithOp: tags.arithmeticOperator,
    LogicOp: tags.logicOperator,
    BitOp: tags.bitwiseOperator,
    CompareOp: tags.compareOperator,
    RegExp: tags.regexp,
    Equals: tags.definitionOperator,
    Arrow: tags.function(tags.punctuation),
    ": Spread": tags.punctuation,
    "( )": tags.paren,
    "[ ]": tags.squareBracket,
    "{ }": tags.brace,
    "InterpolationStart InterpolationEnd": tags.special(tags.brace),
    ".": tags.derefOperator,
    ", ;": tags.separator,
    TypeName: tags.typeName,
    TypeDefinition: tags.definition(tags.typeName),
    "type enum interface implements namespace module declare": tags.definitionKeyword,
    "abstract global Privacy readonly override": tags.modifier,
    "is keyof unique infer": tags.operatorKeyword,
    JSXAttributeValue: tags.attributeValue,
    JSXText: tags.content,
    "JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag": tags.angleBracket,
    "JSXIdentifier JSXNameSpacedName": tags.tagName,
    "JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName": tags.attributeName
  });
  var spec_identifier2 = {__proto__: null, export: 18, as: 23, from: 29, default: 32, async: 37, function: 38, this: 48, true: 56, false: 56, void: 66, typeof: 70, null: 86, super: 88, new: 122, await: 139, yield: 141, delete: 142, class: 152, extends: 154, public: 197, private: 197, protected: 197, readonly: 199, instanceof: 220, in: 222, const: 224, import: 256, keyof: 307, unique: 311, infer: 317, is: 351, abstract: 371, implements: 373, type: 375, let: 378, var: 380, interface: 387, enum: 391, namespace: 397, module: 399, declare: 403, global: 407, for: 428, of: 437, while: 440, with: 444, do: 448, if: 452, else: 454, switch: 458, case: 464, try: 470, catch: 474, finally: 478, return: 482, throw: 486, break: 490, continue: 494, debugger: 498};
  var spec_word = {__proto__: null, async: 109, get: 111, set: 113, public: 161, private: 161, protected: 161, static: 163, abstract: 165, override: 167, readonly: 173, new: 355};
  var spec_LessThan = {__proto__: null, "<": 129};
  var parser4 = LRParser.deserialize({
    version: 14,
    states: "$8SO`QdOOO'QQ(C|O'#ChO'XOWO'#DVO)dQdO'#D]O)tQdO'#DhO){QdO'#DrO-xQdO'#DxOOQO'#E]'#E]O.]Q`O'#E[O.bQ`O'#E[OOQ(C['#Ef'#EfO0aQ(C|O'#ItO2wQ(C|O'#IuO3eQ`O'#EzO3jQ!bO'#FaOOQ(C['#FS'#FSO3rO#tO'#FSO4QQ&jO'#FhO5bQ`O'#FgOOQ(C['#Iu'#IuOOQ(CW'#It'#ItOOQS'#J^'#J^O5gQ`O'#HpO5lQ(ChO'#HqOOQS'#Ih'#IhOOQS'#Hr'#HrQ`QdOOO){QdO'#DjO5tQ`O'#G[O5yQ&jO'#CmO6XQ`O'#EZO6dQ`O'#EgO6iQ,UO'#FRO7TQ`O'#G[O7YQ`O'#G`O7eQ`O'#G`O7sQ`O'#GcO7sQ`O'#GdO7sQ`O'#GfO5tQ`O'#GiO8dQ`O'#GlO9rQ`O'#CdO:SQ`O'#GyO:[Q`O'#HPO:[Q`O'#HRO`QdO'#HTO:[Q`O'#HVO:[Q`O'#HYO:aQ`O'#H`O:fQ(CjO'#HfO){QdO'#HhO:qQ(CjO'#HjO:|Q(CjO'#HlO5lQ(ChO'#HnO){QdO'#DWOOOW'#Ht'#HtO;XOWO,59qOOQ(C[,59q,59qO=jQtO'#ChO=tQdO'#HuO>XQ`O'#IvO@WQtO'#IvO'dQdO'#IvO@_Q`O,59wO@uQ7[O'#DbOAnQ`O'#E]OA{Q`O'#JROBWQ`O'#JQOBWQ`O'#JQOB`Q`O,5:yOBeQ`O'#JPOBlQaO'#DyO5yQ&jO'#EZOBzQ`O'#EZOCVQpO'#FROOQ(C[,5:S,5:SOC_QdO,5:SOE]Q(C|O,5:^OEyQ`O,5:dOFdQ(ChO'#JOO7YQ`O'#I}OFkQ`O'#I}OFsQ`O,5:xOFxQ`O'#I}OGWQdO,5:vOIWQ&jO'#EWOJeQ`O,5:vOKwQ&jO'#DlOLOQdO'#DqOLYQ7[O,5;PO){QdO,5;POOQS'#Er'#ErOOQS'#Et'#EtO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;ROOQS'#Ex'#ExOLbQdO,5;cOOQ(C[,5;h,5;hOOQ(C[,5;i,5;iONbQ`O,5;iOOQ(C[,5;j,5;jO){QdO'#IPONgQ(ChO,5<TO! RQ&jO,5;RO){QdO,5;fO! kQ!bO'#JVO! YQ!bO'#JVO! rQ!bO'#JVO!!TQ!bO,5;qOOOO,5;{,5;{O!!cQdO'#FcOOOO'#IO'#IOO3rO#tO,5;nO!!jQ!bO'#FeOOQ(C[,5;n,5;nO!#WQ,VO'#CrOOQ(C]'#Cu'#CuO!#kQ`O'#CuO!#pOWO'#CyO!$^Q,VO,5<QO!$eQ`O,5<SO!%tQ&jO'#FrO!&RQ`O'#FsO!&WQ`O'#FsO!&]Q&jO'#FwO!'[Q7[O'#F{O!'}Q,VO'#IqOOQ(C]'#Iq'#IqO!(XQaO'#IpO!(gQ`O'#IoO!(oQ`O'#CqOOQ(C]'#Cs'#CsOOQ(C]'#C|'#C|O!(wQ`O'#DOOJjQ&jO'#FjOJjQ&jO'#FlO!(|Q`O'#FnO!)RQ`O'#FoO!&WQ`O'#FuOJjQ&jO'#FzO!)WQ`O'#E^O!)oQ`O,5<RO`QdO,5>[OOQS'#Ik'#IkOOQS,5>],5>]OOQS-E;p-E;pO!+kQ(C|O,5:UOOQ(CX'#Cp'#CpO!,[Q&kO,5<vOOQO'#Cf'#CfO!,mQ(ChO'#IlO5bQ`O'#IlO:aQ`O,59XO!-OQ!bO,59XO!-WQ&jO,59XO5yQ&jO,59XO!-cQ`O,5:vO!-kQ`O'#GxO!-yQ`O'#JbO){QdO,5;kO!.RQ7[O,5;mO!.WQ`O,5=cO!.]Q`O,5=cO!.bQ`O,5=cO5lQ(ChO,5=cO5tQ`O,5<vO!.pQ`O'#E_O!/UQ7[O'#E`OOQ(CW'#JP'#JPO!/gQ(ChO'#J_O5lQ(ChO,5<zO7sQ`O,5=QOOQP'#Cr'#CrO!/rQ!bO,5<}O!/zQ!cO,5=OO!0VQ`O,5=QO!0[QpO,5=TO:aQ`O'#GnO5tQ`O'#GpO!0dQ`O'#GpO5yQ&jO'#GsO!0iQ`O'#GsOOQS,5=W,5=WO!0nQ`O'#GtO!0vQ`O'#CmO!0{Q`O,59OO!1VQ`O,59OO!3XQdO,59OOOQS,59O,59OO!3fQ(ChO,59OO){QdO,59OO!3qQdO'#G{OOQS'#G|'#G|OOQS'#G}'#G}O`QdO,5=eO!4RQ`O,5=eO){QdO'#DxO`QdO,5=kO`QdO,5=mO!4WQ`O,5=oO`QdO,5=qO!4]Q`O,5=tO!4bQdO,5=zOOQS,5>Q,5>QO){QdO,5>QO5lQ(ChO,5>SOOQS,5>U,5>UO!8cQ`O,5>UOOQS,5>W,5>WO!8cQ`O,5>WOOQS,5>Y,5>YO!8hQpO,59rOOOW-E;r-E;rOOQ(C[1G/]1G/]O!8mQtO,5>aO'dQdO,5>aOOQO,5>f,5>fO!8wQdO'#HuOOQO-E;s-E;sO!9UQ`O,5?bO!9^QtO,5?bO!9eQ`O,5?lOOQ(C[1G/c1G/cO!9mQ!bO'#DTOOQO'#Ix'#IxO){QdO'#IxO!:[Q!bO'#IxO!:yQ!bO'#DcO!;[Q7[O'#DcO!=gQdO'#DcO!=nQ`O'#IwO!=vQ`O,59|O!={Q`O'#EaO!>ZQ`O'#JSO!>cQ`O,5:zO!>yQ7[O'#DcO){QdO,5?mO!?TQ`O'#HzOOQO-E;x-E;xO!9eQ`O,5?lOOQ(CW1G0e1G0eO!@aQ7[O'#D|OOQ(C[,5:e,5:eO){QdO,5:eOIWQ&jO,5:eO!@hQaO,5:eO:aQ`O,5:uO!-OQ!bO,5:uO!-WQ&jO,5:uO5yQ&jO,5:uOOQ(C[1G/n1G/nOOQ(C[1G0O1G0OOOQ(CW'#EV'#EVO){QdO,5?jO!@sQ(ChO,5?jO!AUQ(ChO,5?jO!A]Q`O,5?iO!AeQ`O'#H|O!A]Q`O,5?iOOQ(CW1G0d1G0dO7YQ`O,5?iOOQ(C[1G0b1G0bO!BPQ(C|O1G0bO!CRQ(CyO,5:rOOQ(C]'#Fq'#FqO!CoQ(C}O'#IqOGWQdO1G0bO!EqQ,VO'#IyO!E{Q`O,5:WO!FQQtO'#IzO){QdO'#IzO!F[Q`O,5:]OOQ(C]'#DT'#DTOOQ(C[1G0k1G0kO!FaQ`O1G0kO!HrQ(C|O1G0mO!HyQ(C|O1G0mO!K^Q(C|O1G0mO!KeQ(C|O1G0mO!MlQ(C|O1G0mO!NPQ(C|O1G0mO#!pQ(C|O1G0mO#!wQ(C|O1G0mO#%[Q(C|O1G0mO#%cQ(C|O1G0mO#'WQ(C|O1G0mO#*QQMlO'#ChO#+{QMlO1G0}O#-vQMlO'#IuOOQ(C[1G1T1G1TO#.ZQ(C|O,5>kOOQ(CW-E;}-E;}O#.zQ(C}O1G0mOOQ(C[1G0m1G0mO#1PQ(C|O1G1QO#1pQ!bO,5;sO#1uQ!bO,5;tO#1zQ!bO'#F[O#2`Q`O'#FZOOQO'#JW'#JWOOQO'#H}'#H}O#2eQ!bO1G1]OOQ(C[1G1]1G1]OOOO1G1f1G1fO#2sQMlO'#ItO#2}Q`O,5;}OLbQdO,5;}OOOO-E;|-E;|OOQ(C[1G1Y1G1YOOQ(C[,5<P,5<PO#3SQ!bO,5<POOQ(C],59a,59aOIWQ&jO'#C{OOOW'#Hs'#HsO#3XOWO,59eOOQ(C],59e,59eO){QdO1G1lO!)RQ`O'#IRO#3dQ`O,5<eOOQ(C],5<b,5<bOOQO'#GV'#GVOJjQ&jO,5<pOOQO'#GX'#GXOJjQ&jO,5<rOIWQ&jO,5<tOOQO1G1n1G1nO#3oQqO'#CpO#4SQqO,5<^O#4ZQ`O'#JZO5tQ`O'#JZO#4iQ`O,5<`OJjQ&jO,5<_O#4nQ`O'#FtO#4yQ`O,5<_O#5OQqO'#FqO#5]QqO'#J[O#5gQ`O'#J[OIWQ&jO'#J[O#5lQ`O,5<cOOQ(CW'#Dg'#DgO#5qQ!bO'#F|O!'VQ7[O'#F|O!'VQ7[O'#GOO#6SQ`O'#GPO!&WQ`O'#GSO#6XQ(ChO'#ITO#6dQ7[O,5<gOOQ(C],5<g,5<gO#6kQ7[O'#F|O#6yQ7[O'#F}O#7RQ7[O'#F}OOQ(C],5<u,5<uOJjQ&jO,5?[OJjQ&jO,5?[O#7WQ`O'#IUO#7cQ`O,5?ZO#7kQ`O,59]OOQ(C]'#Ch'#ChO#8[Q,VO,59jOOQ(C],59j,59jO#8}Q,VO,5<UO#9pQ,VO,5<WO#9zQ`O,5<YOOQ(C],5<Z,5<ZO#:PQ`O,5<aO#:UQ,VO,5<fOGWQdO1G1mO#:fQ`O1G1mOOQS1G3v1G3vOOQ(C[1G/p1G/pONbQ`O1G/pOOQS1G2b1G2bOIWQ&jO1G2bO){QdO1G2bOIWQ&jO1G2bO#:kQaO1G2bO#<QQ&jO'#EWOOQ(CW,5?W,5?WO#<[Q(ChO,5?WOOQS1G.s1G.sO:aQ`O1G.sO!-OQ!bO1G.sO!-WQ&jO1G.sO#<mQ`O1G0bO#<rQ`O'#ChO#<}Q`O'#JcO#=VQ`O,5=dO#=[Q`O'#JcO#=aQ`O'#JcO#=iQ`O'#I^O#=wQ`O,5?|O#>PQtO1G1VOOQ(C[1G1X1G1XO5tQ`O1G2}O#>WQ`O1G2}O#>]Q`O1G2}O#>bQ`O1G2}OOQS1G2}1G2}O#>gQ&kO1G2bO7YQ`O'#JQO7YQ`O'#EaO7YQ`O'#IWO#>xQ(ChO,5?yOOQS1G2f1G2fO!0VQ`O1G2lOIWQ&jO1G2iO#?TQ`O1G2iOOQS1G2j1G2jOIWQ&jO1G2jO#?YQaO1G2jO#?bQ7[O'#GhOOQS1G2l1G2lO!'VQ7[O'#IYO!0[QpO1G2oOOQS1G2o1G2oOOQS,5=Y,5=YO#?jQ&kO,5=[O5tQ`O,5=[O#6SQ`O,5=_O5bQ`O,5=_O!-OQ!bO,5=_O!-WQ&jO,5=_O5yQ&jO,5=_O#?{Q`O'#JaO#@WQ`O,5=`OOQS1G.j1G.jO#@]Q(ChO1G.jO#@hQ`O1G.jO#@mQ`O1G.jO5lQ(ChO1G.jO#@uQtO,5@OO#APQ`O,5@OO#A[QdO,5=gO#AcQ`O,5=gO7YQ`O,5@OOOQS1G3P1G3PO`QdO1G3POOQS1G3V1G3VOOQS1G3X1G3XO:[Q`O1G3ZO#AhQdO1G3]O#EcQdO'#H[OOQS1G3`1G3`O#EpQ`O'#HbO:aQ`O'#HdOOQS1G3f1G3fO#ExQdO1G3fO5lQ(ChO1G3lOOQS1G3n1G3nOOQ(CW'#Fx'#FxO5lQ(ChO1G3pO5lQ(ChO1G3rOOOW1G/^1G/^O#IvQpO,5<TO#JOQtO1G3{OOQO1G4Q1G4QO){QdO,5>aO#JYQ`O1G4|O#JbQ`O1G5WO#JjQ`O,5?dOLbQdO,5:{O7YQ`O,5:{O:aQ`O,59}OLbQdO,59}O!-OQ!bO,59}O#JoQMlO,59}OOQO,5:{,5:{O#JyQ7[O'#HvO#KaQ`O,5?cOOQ(C[1G/h1G/hO#KiQ7[O'#H{O#K}Q`O,5?nOOQ(CW1G0f1G0fO!;[Q7[O,59}O#LVQtO1G5XO7YQ`O,5>fOOQ(CW'#ES'#ESO#LaQ(DjO'#ETO!@XQ7[O'#D}OOQO'#Hy'#HyO#L{Q7[O,5:hOOQ(C[,5:h,5:hO#MSQ7[O'#D}O#MeQ7[O'#D}O#MlQ7[O'#EYO#MoQ7[O'#ETO#M|Q7[O'#ETO!@XQ7[O'#ETO#NaQ`O1G0PO#NfQqO1G0POOQ(C[1G0P1G0PO){QdO1G0POIWQ&jO1G0POOQ(C[1G0a1G0aO:aQ`O1G0aO!-OQ!bO1G0aO!-WQ&jO1G0aO#NmQ(C|O1G5UO){QdO1G5UO#N}Q(ChO1G5UO$ `Q`O1G5TO7YQ`O,5>hOOQO,5>h,5>hO$ hQ`O,5>hOOQO-E;z-E;zO$ `Q`O1G5TO$ vQ(C}O,59jO$#xQ(C}O,5<UO$%}Q(C}O,5<WO$(SQ(C}O,5<fOOQ(C[7+%|7+%|O$*_Q(C|O7+%|O$+OQ&jO'#HwO$+YQ`O,5?eOOQ(C]1G/r1G/rO$+bQdO'#HxO$+oQ`O,5?fO$+wQtO,5?fOOQ(C[1G/w1G/wOOQ(C[7+&V7+&VO$,RQMlO,5:^O){QdO7+&iO$,]QMlO,5:UOOQO1G1_1G1_OOQO1G1`1G1`O$,jQ!LQO,5;vOLbQdO,5;uOOQO-E;{-E;{OOQ(C[7+&w7+&wOOOO7+'Q7+'QOOOO1G1i1G1iO$,uQ`O1G1iOOQ(C[1G1k1G1kO$,zQqO,59gOOOW-E;q-E;qOOQ(C]1G/P1G/PO$-RQ(C|O7+'WOOQ(C],5>m,5>mO$-rQ`O,5>mOOQ(C]1G2P1G2PP$-wQ`O'#IRPOQ(C]-E<P-E<PO$.hQ,VO1G2[O$/ZQ,VO1G2^O$/eQqO1G2`OOQ(C]1G1x1G1xO$/lQ`O'#IQO$/zQ`O,5?uO$/zQ`O,5?uO$0SQ`O,5?uO$0_Q`O,5?uOOQO1G1z1G1zO$0mQ,VO1G1yOJjQ&jO1G1yO$0}Q&jO'#ISO$1_Q`O,5?vOIWQ&jO,5?vO$1gQqO,5?vOOQ(C]1G1}1G1}OOQ(CW,5<h,5<hOOQ(CW,5<i,5<iO$1qQ`O,5<iO#5}Q`O,5<iO!-OQ!bO,5<hO$1vQ`O,5<jOOQ(CW,5<k,5<kO$1qQ`O,5<nOOQO,5>o,5>oOOQO-E<R-E<ROOQ(C]1G2R1G2RO!'VQ7[O,5<hO$2OQ`O,5<iO!'VQ7[O,5<jO!'VQ7[O,5<iO$2ZQ,VO1G4vO$2eQ,VO1G4vOOQO,5>p,5>pOOQO-E<S-E<SOOQP1G.w1G.wO!.RQ7[O,59lO){QdO,59lO$2rQ`O1G1tOJjQ&jO1G1{O$2wQ(C|O7+'XOOQ(C[7+'X7+'XOGWQdO7+'XOOQ(C[7+%[7+%[O$3hQqO'#J]O#NaQ`O7+'|O$3rQ`O7+'|O$3zQqO7+'|OOQS7+'|7+'|OIWQ&jO7+'|O){QdO7+'|OIWQ&jO7+'|O$4UQ(CyO'#ChO$4iQ(CyO,5<lO$5ZQ`O,5<lOOQ(CW1G4r1G4rOOQS7+$_7+$_O:aQ`O7+$_O!-OQ!bO7+$_OGWQdO7+%|O$5`Q`O'#I]O$5qQ`O,5?}OOQO1G3O1G3OO5tQ`O,5?}O$5qQ`O,5?}O$5yQ`O,5?}OOQO,5>x,5>xOOQO-E<[-E<[OOQ(C[7+&q7+&qO$6OQ`O7+(iO5lQ(ChO7+(iO5tQ`O7+(iO$6TQ`O7+(iO$6YQaO7+'|OOQ(CW,5>r,5>rOOQ(CW-E<U-E<UOOQS7+(W7+(WO$6hQ(CyO7+(TOIWQ&jO7+(TO$6rQqO7+(UOOQS7+(U7+(UOIWQ&jO7+(UO$6yQ`O'#J`O$7UQ`O,5=SOOQO,5>t,5>tOOQO-E<W-E<WOOQS7+(Z7+(ZO$8OQ7[O'#GqOOQS1G2v1G2vOIWQ&jO1G2vO){QdO1G2vOIWQ&jO1G2vO$8VQaO1G2vO$8eQ&kO1G2vO5lQ(ChO1G2yO#6SQ`O1G2yO5bQ`O1G2yO!-OQ!bO1G2yO!-WQ&jO1G2yO$8vQ`O'#I[O$9RQ`O,5?{O$9ZQ7[O,5?{OOQ(CW1G2z1G2zOOQS7+$U7+$UO$9cQ`O7+$UO5lQ(ChO7+$UO$9hQ`O7+$UO){QdO1G5jO){QdO1G5kO$9mQdO1G3RO$9tQ`O1G3RO$9yQdO1G3RO$:QQ(ChO1G5jOOQS7+(k7+(kO5lQ(ChO7+(uO`QdO7+(wOOQS'#Jf'#JfOOQS'#I_'#I_O$:[QdO,5=vOOQS,5=v,5=vO){QdO'#H]O$:iQ`O'#H_OOQS,5=|,5=|O7YQ`O,5=|OOQS,5>O,5>OOOQS7+)Q7+)QOOQS7+)W7+)WOOQS7+)[7+)[OOQS7+)^7+)^OOQO1G5O1G5OO$:nQMlO1G0gO$:xQ`O1G0gOOQO1G/i1G/iO$;TQMlO1G/iO:aQ`O1G/iOLbQdO'#DcOOQO,5>b,5>bOOQO-E;t-E;tOOQO,5>g,5>gOOQO-E;y-E;yO!-OQ!bO1G/iO:aQ`O,5:iOOQO,5:o,5:oO){QdO,5:oO$;_Q(ChO,5:oO$;jQ(ChO,5:oO!-OQ!bO,5:iOOQO-E;w-E;wOOQ(C[1G0S1G0SO!@XQ7[O,5:iO$;xQ7[O,5:iO$<ZQ(DjO,5:oO$<uQ7[O,5:iO!@XQ7[O,5:oOOQO,5:t,5:tO$<|Q7[O,5:oO$=ZQ(ChO,5:oOOQ(C[7+%k7+%kO#NaQ`O7+%kO#NfQqO7+%kOOQ(C[7+%{7+%{O:aQ`O7+%{O!-OQ!bO7+%{O$=oQ(C|O7+*pO){QdO7+*pOOQO1G4S1G4SO7YQ`O1G4SO$>PQ`O7+*oO$>XQ(C}O1G2[O$@^Q(C}O1G2^O$BcQ(C}O1G1yO$DnQ,VO,5>cOOQO-E;u-E;uO$DxQtO,5>dO){QdO,5>dOOQO-E;v-E;vO$ESQ`O1G5QO$E[QMlO1G0bO$GcQMlO1G0mO$GjQMlO1G0mO$IkQMlO1G0mO$IrQMlO1G0mO$KgQMlO1G0mO$KzQMlO1G0mO$NXQMlO1G0mO$N`QMlO1G0mO%!aQMlO1G0mO%!hQMlO1G0mO%$]QMlO1G0mO%$pQ(C|O<<JTO%%rQMmO1G0mO%'|QMmO'#IqO%)iQMlO1G1QOLbQdO'#F^OOQO'#JX'#JXOOQO1G1b1G1bO%)vQ`O1G1aO%){QMlO,5>kOOOO7+'T7+'TOOOW1G/R1G/ROOQ(C]1G4X1G4XOJjQ&jO7+'zO%*VQ`O,5>lO5tQ`O,5>lOOQO-E<O-E<OO%*eQ`O1G5aO%*eQ`O1G5aO%*mQ`O1G5aO%*xQ,VO7+'eO%+YQqO,5>nO%+dQ`O,5>nOIWQ&jO,5>nOOQO-E<Q-E<QO%+iQqO1G5bO%+sQ`O1G5bOOQ(CW1G2T1G2TO$1qQ`O1G2TOOQ(CW1G2S1G2SO%+{Q`O1G2UOIWQ&jO1G2UOOQ(CW1G2Y1G2YO!-OQ!bO1G2SO#5}Q`O1G2TO%,QQ`O1G2UO%,YQ`O1G2TOJjQ&jO7+*bOOQ(C]1G/W1G/WO%,eQ`O1G/WOOQ(C]7+'`7+'`O%,jQ,VO7+'gO%,zQ(C|O<<JsOOQ(C[<<Js<<JsOIWQ&jO'#IVO%-kQ`O,5?wOOQS<<Kh<<KhOIWQ&jO<<KhO#NaQ`O<<KhO%-sQ`O<<KhO%-{QqO<<KhOIWQ&jO1G2WOOQS<<Gy<<GyO:aQ`O<<GyO%.VQ(C|O<<IhOOQ(C[<<Ih<<IhOOQO,5>w,5>wO%.vQ`O,5>wO%.{Q`O,5>wOOQO-E<Z-E<ZO%/TQ`O1G5iO%/TQ`O1G5iO5tQ`O1G5iO%/]Q`O<<LTOOQS<<LT<<LTO%/bQ`O<<LTO5lQ(ChO<<LTO){QdO<<KhOIWQ&jO<<KhOOQS<<Ko<<KoO$6hQ(CyO<<KoOOQS<<Kp<<KpO$6rQqO<<KpO%/gQ7[O'#IXO%/rQ`O,5?zOLbQdO,5?zOOQS1G2n1G2nO#LaQ(DjO'#ETO!@XQ7[O'#GrOOQO'#IZ'#IZO%/zQ7[O,5=]OOQS,5=],5=]O%0RQ7[O'#ETO%0^Q7[O'#ETO%0uQ7[O'#ETO%1PQ7[O'#GrO%1bQ`O7+(bO%1gQ`O7+(bO%1oQqO7+(bOOQS7+(b7+(bOIWQ&jO7+(bO){QdO7+(bOIWQ&jO7+(bO%1yQaO7+(bOOQS7+(e7+(eO5lQ(ChO7+(eO#6SQ`O7+(eO5bQ`O7+(eO!-OQ!bO7+(eO%2XQ`O,5>vOOQO-E<Y-E<YOOQO'#Gu'#GuO%2dQ`O1G5gO5lQ(ChO<<GpOOQS<<Gp<<GpO%2lQ`O<<GpO%2qQ`O7++UO%2vQ`O7++VOOQS7+(m7+(mO%2{Q`O7+(mO%3QQdO7+(mO%3XQ`O7+(mO){QdO7++UO){QdO7++VOOQS<<La<<LaOOQS<<Lc<<LcOOQS-E<]-E<]OOQS1G3b1G3bO%3^Q`O,5=wOOQS,5=y,5=yO%3cQ`O1G3hOLbQdO7+&ROOQO7+%T7+%TO%3hQMlO1G5XO:aQ`O7+%TOOQO1G0T1G0TO%3rQ(C|O1G0ZOOQO1G0Z1G0ZO){QdO1G0ZO%3|Q(ChO1G0ZO:aQ`O1G0TO!-OQ!bO1G0TO!@XQ7[O1G0TO%4XQ(ChO1G0ZO%4gQ7[O1G0TO%4xQ(ChO1G0ZO%5^Q(DjO1G0ZO%5hQ7[O1G0TO!@XQ7[O1G0ZOOQ(C[<<IV<<IVOOQ(C[<<Ig<<IgO:aQ`O<<IgO%5oQ(C|O<<N[OOQO7+)n7+)nO%6PQ(C}O7+'eO%8[Q(C}O7+'gO%:gQtO1G4OO%:qQMlO7+%|O%;gQMmO,59jO%=hQMmO,5<UO%?lQMmO,5<WO%A[QMmO,5<fO%B}QMlO7+'WO%C[QMlO7+'XO%CiQ`O,5;xOOQO7+&{7+&{O%CnQ,VO<<KfOOQO1G4W1G4WO%CuQ`O1G4WO%DQQ`O1G4WO%D`Q`O7+*{O%D`Q`O7+*{OIWQ&jO1G4YO%DhQqO1G4YO%DrQ`O7+*|OOQ(CW7+'o7+'oO$1qQ`O7+'pO%DzQqO7+'pOOQ(CW7+'n7+'nO$1qQ`O7+'oO%ERQ`O7+'pOIWQ&jO7+'pO#5}Q`O7+'oO%EWQ,VO<<M|OOQ(C]7+$r7+$rO%EbQqO,5>qOOQO-E<T-E<TO#NaQ`OANASOOQSANASANASOIWQ&jOANASO%ElQ(CyO7+'rOOQSAN=eAN=eO5tQ`O1G4cOOQO1G4c1G4cO%E|Q`O1G4cO%FRQ`O7++TO%FRQ`O7++TO5lQ(ChOANAoO%FZQ`OANAoOOQSANAoANAoO%F`Q`OANASO%FhQqOANASOOQSANAZANAZOOQSANA[ANA[O%FrQ`O,5>sOOQO-E<V-E<VO%F}QMlO1G5fO#6SQ`O,5=^O5bQ`O,5=^O!-OQ!bO,5=^OOQO-E<X-E<XOOQS1G2w1G2wO$<ZQ(DjO,5:oO!@XQ7[O,5=^O%GXQ7[O,5=^O%GjQ7[O,5:oOOQS<<K|<<K|OIWQ&jO<<K|O%1bQ`O<<K|O%GtQ`O<<K|O%G|QqO<<K|O){QdO<<K|OIWQ&jO<<K|OOQS<<LP<<LPO5lQ(ChO<<LPO#6SQ`O<<LPO5bQ`O<<LPO%HWQ7[O1G4bO%H`Q`O7++ROOQSAN=[AN=[O5lQ(ChOAN=[OOQS<<Np<<NpOOQS<<Nq<<NqOOQS<<LX<<LXO%HhQ`O<<LXO%HmQdO<<LXO%HtQ`O<<NpO%HyQ`O<<NqOOQS1G3c1G3cO:aQ`O7+)SO%IOQMlO<<ImOOQO<<Ho<<HoOOQO7+%u7+%uO%3rQ(C|O7+%uO){QdO7+%uOOQO7+%o7+%oO:aQ`O7+%oO!-OQ!bO7+%oO%IYQ(ChO7+%uO!@XQ7[O7+%oO%IeQ(ChO7+%uO%IsQ7[O7+%oO%JUQ(ChO7+%uOOQ(C[AN?RAN?RO%JjQMlO<<JTO%JwQMmO1G1yO%MOQMmO1G2[O& SQMmO1G2^O&!rQMlO<<JsO&#PQMlO<<IhOOQO1G1d1G1dOJjQ&jOANAQOOQO7+)r7+)rO&#^Q`O7+)rO&#iQ`O<<NgO&#qQqO7+)tOOQ(CW<<K[<<K[O$1qQ`O<<K[OOQ(CW<<KZ<<KZO&#{QqO<<K[O$1qQ`O<<KZOOQSG26nG26nO#NaQ`OG26nOOQO7+)}7+)}O5tQ`O7+)}O&$SQ`O<<NoOOQSG27ZG27ZO5lQ(ChOG27ZOIWQ&jOG26nOLbQdO1G4_O&$[Q`O7++QO5lQ(ChO1G2xO#6SQ`O1G2xO5bQ`O1G2xO!-OQ!bO1G2xO!@XQ7[O1G2xO%5^Q(DjO1G0ZO&$dQ7[O1G2xO%1bQ`OANAhOOQSANAhANAhOIWQ&jOANAhO&$uQ`OANAhO&$}QqOANAhOOQSANAkANAkO5lQ(ChOANAkO#6SQ`OANAkOOQO'#Gv'#GvOOQO7+)|7+)|OOQSG22vG22vOOQSANAsANAsO&%XQ`OANAsOOQSAND[AND[OOQSAND]AND]OOQS<<Ln<<LnOOQO<<Ia<<IaO%3rQ(C|O<<IaOOQO<<IZ<<IZO:aQ`O<<IZO){QdO<<IaO!-OQ!bO<<IZO&%^Q(ChO<<IaO!@XQ7[O<<IZO&%iQ(ChO<<IaO&%wQMmO7+'eO&'jQMmO7+'gO&)]Q,VOG26lOOQO<<M^<<M^OOQ(CWAN@vAN@vO$1qQ`OAN@vOOQ(CWAN@uAN@uOOQSLD,YLD,YOOQO<<Mi<<MiOOQSLD,uLD,uO#NaQ`OLD,YO&)mQMlO7+)yOOQO7+(d7+(dO5lQ(ChO7+(dO#6SQ`O7+(dO5bQ`O7+(dO!-OQ!bO7+(dO!@XQ7[O7+(dOOQSG27SG27SO%1bQ`OG27SOIWQ&jOG27SOOQSG27VG27VO5lQ(ChOG27VOOQSG27_G27_OOQOAN>{AN>{OOQOAN>uAN>uO%3rQ(C|OAN>{O:aQ`OAN>uO){QdOAN>{O!-OQ!bOAN>uO&)wQ(ChOAN>{O&*SQ(C}OG26lOOQ(CWG26bG26bOOQS!$( t!$( tOOQO<<LO<<LOO5lQ(ChO<<LOO#6SQ`O<<LOO5bQ`O<<LOO!-OQ!bO<<LOOOQSLD,nLD,nO%1bQ`OLD,nOOQSLD,qLD,qOOQOG24gG24gOOQOG24aG24aO%3rQ(C|OG24gO:aQ`OG24aO){QdOG24gO&,pQ!LRO,5:rO&-gQ$ITO'#IqOOQOANAjANAjO5lQ(ChOANAjO#6SQ`OANAjO5bQ`OANAjOOQS!$(!Y!$(!YOOQOLD*RLD*ROOQOLD){LD){O%3rQ(C|OLD*RO&.ZQMmOG26lO&/|Q!LRO,59jO&0pQ!LRO,5<UO&1dQ!LRO,5<WO&2WQ!LRO,5<fOOQOG27UG27UO5lQ(ChOG27UO#6SQ`OG27UOOQO!$'Mm!$'MmO&2}Q!LRO1G2[O&3qQ!LRO1G2^O&4eQ!LRO1G1yOOQOLD,pLD,pO5lQ(ChOLD,pO&5[Q!LRO7+'eO&6RQ!LRO7+'gOOQO!$(![!$(![O&6xQ!LROG26lOLbQdO'#DrO&7oQtO'#ItOLbQdO'#DjO&7vQ(C|O'#ChO&8aQtO'#ChO&8qQdO,5:vO&:qQ&jO'#EWOLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO'#IPO&<OQ`O,5<TO&=eQ&jO,5;ROLbQdO,5;fO!(wQ`O'#DOO!(wQ`O'#DOO!(wQ`O'#DOOIWQ&jO'#FjO&:qQ&jO'#FjO&<WQ&jO'#FjOIWQ&jO'#FlO&:qQ&jO'#FlO&<WQ&jO'#FlOIWQ&jO'#FzO&:qQ&jO'#FzO&<WQ&jO'#FzOLbQdO,5?mO&8qQdO1G0bO&=lQMlO'#ChOLbQdO1G1lOIWQ&jO,5<pO&:qQ&jO,5<pO&<WQ&jO,5<pOIWQ&jO,5<rO&:qQ&jO,5<rO&<WQ&jO,5<rOIWQ&jO,5<_O&:qQ&jO,5<_O&<WQ&jO,5<_O&8qQdO1G1mOLbQdO7+&iOIWQ&jO1G1yO&:qQ&jO1G1yO&<WQ&jO1G1yOIWQ&jO1G1{O&:qQ&jO1G1{O&<WQ&jO1G1{O&8qQdO7+'XO&8qQdO7+%|O&=vQ`O7+'pOIWQ&jOANAQO&:qQ&jOANAQO&<WQ&jOANAQO&=vQ`O<<K[O&=vQ`OAN@vO&={Q`O'#E[O&>QQ`O'#E[O&>YQ`O'#EzO&>_Q`O'#EgO&>dQ`O'#JRO&>oQ`O'#JPO&>zQ`O,5:vO&?PQ,VO,5<QO&?WQ`O'#FsO&?]Q`O'#FsO&?bQ`O'#FsO&?gQ`O,5<RO&?oQ`O,5:vO&?wQMlO1G0}O&@OQ`O,5<_O&@TQ`O,5<_O&@YQ`O,5<_O&@_Q`O,5<aO&@dQ`O,5<aO&@iQ`O,5<aO&@nQ`O1G1mO&@sQ`O1G0bO&@xQ`O1G2UO&@}Q,VO<<KfO&AUQ,VO<<KfO&A]Q,VO<<KfO&AdQqO7+'pO&AkQ`O7+'pO&ApQqO<<K[O4QQ&jO'#FhO5bQ`O'#FgOBzQ`O'#EZOLbQdO,5;cO!&WQ`O'#FsO!&WQ`O'#FsO!&WQ`O'#FsO!&WQ`O'#FuO!&WQ`O'#FuO!&WQ`O'#FuO&AwQ`O,5<jOJjQ&jO7+'zOJjQ&jO7+'zOJjQ&jO7+'zOIWQ&jO1G2UO&BPQ`O1G2UOIWQ&jO7+'pO!'VQ7[O'#GOO$/eQqO1G2`O$/eQqO1G2`O$/eQqO1G2`O!'VQ7[O,5<jOIWQ&jO,5<tOIWQ&jO,5<tOIWQ&jO,5<t",
    stateData: "&B}~O'YOS'ZOSTOSUOS~OQTORTOXyO]cO_hObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#dsO#tpO#x^O%PqO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO%axO%nzO%t{O%v|O%x}O%z!OO%}!PO&T!QO&Z!RO&]!SO&_!TO&a!UO&c!VO']PO'fQO'oYO'|aO~OQ[XZ[X_[Xj[Xu[Xv[Xx[X!R[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'W[X'f[X'p[X'w[X'x[X~O!]$lX~P$zOS!WO'U!XO'V!ZO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']![O'fQO'oYO'|aO~O!Q!`O!R!]O!O'jP!O'tP~P'dO!S!mO~P`OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9aO'fQO'oYO'|aO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O'fQO'oYO'|aO~O!Q!rO#U!uO#V!rO']9bO!c'qP~P+{O#W!vO~O!]!wO#W!vO~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!R#bO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_'hX'W'hX!c'hX!O'hX!T'hX%Q'hX!]'hX~P.jO!{#eO#o#eOQ'iXZ'iX_'iXj'iXu'iXv'iXx'iX!R'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX~O#c'iX'W'iX!O'iX!c'iXn'iX!T'iX%Q'iX!]'iX~P0zO!{#eO~O#z#fO$R#jO~O!T#kO#x^O$U#lO$W#nO~O]#qOh$QOj#rOk#qOl#qOq$ROs$SOx#yO!T#zO!_$XO!d#vO#V$YO#t$VO$_$TO$a$UO$d$WO']#pO'b$PO'f#sO'a'cP~O!d$ZO~O!]$]O~O_$^O'W$^O~O']$bO~O!d$ZO']$bO'^$dO'b$PO~Oc$jO!d$ZO']$bO~O#c#TO~O]$sOu$oO!T$lO!d$nO%R$rO']$bO'^$dO^(UP~O!n$tO~Ox$uO!T$vO']$bO~Ox$uO!T$vO%Z$zO']$bO~O']${O~O#dsO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO~Ob%UOc%TO!n%RO%P%SO%c%QO~P7xOb%XOcmO!T%WO!nlO#dsO%PqO%TrO%UrO%XuO%ZvO%^wO%_wO%axO~O`%[O!{%_O%R%YO'^$dO~P8wO!d%`O!g%dO~O!d%eO~O!TSO~O_$^O'T%mO'W$^O~O_$^O'T%pO'W$^O~O_$^O'T%rO'W$^O~OS!WO'U!XO'V%vO~OQ[XZ[Xj[Xu[Xv[Xx[X!R[X!RdX!a[X!b[X!d[X!j[X!{[X!{dX#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X~O!O[X!OdX~P;dO!Q%xO!O&iX!O&nX!R&iX!R&nX~P'dO!R%zO!O'jX~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!R%zO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O!O'jX~P>aO!O&PO~Ox&SO!W&^O!X&VO!Y&VO'^$dO~O]&TOk&TO!Q&WO'g&QO!S'kP!S'vP~P@dO!O'sX!R'sX!]'sX!c'sX'p'sX~O!{'sX#W#PX!S'sX~PA]O!{&_O!O'uX!R'uX~O!R&`O!O'tX~O!O&cO~O!{#eO~PA]OP&gO!T&dO!o&fO']$bO~Oc&lO!d$ZO']$bO~Ou$oO!d$nO~O!S&mO~P`Ou!{Ov!{Ox!|O!b!yO!d!zO'fQOQ!faZ!faj!fa!R!fa!a!fa!j!fa#[!fa#]!fa#^!fa#_!fa#`!fa#a!fa#b!fa#c!fa#e!fa#g!fa#i!fa#j!fa'p!fa'w!fa'x!fa~O_!fa'W!fa!O!fa!c!fan!fa!T!fa%Q!fa!]!fa~PCfO!c&nO~O!]!wO!{&pO'p&oO!R'rX_'rX'W'rX~O!c'rX~PFOO!R&tO!c'qX~O!c&vO~Ox$uO!T$vO#V&wO']$bO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9aO'fQO'oYO'|aO~O]#qOh$QOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO']&{O'b$PO'f#sO~O#W&}O~O]#qOh$QOj#rOk#qOl#qOq$ROs$SOx#yO!T#zO!_$XO!d#vO#V$YO#t$VO$_$TO$a$UO$d$WO']&{O'b$PO'f#sO~O'a'mP~PJjO!Q'RO!c'nP~P){O'g'TO'oYO~OQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!T!bO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O']'cO'fQO'oYO'|;^O~O!d!zO~O!R#bO_$]a'W$]a!c$]a!O$]a!T$]a%Q$]a!]$]a~O#d'jO~PIWO!]'lO!T'yX#w'yX#z'yX$R'yX~Ou'mO~P! YOu'mO!T'yX#w'yX#z'yX$R'yX~O!T'oO#w'sO#z'nO$R'tO~O!Q'wO~PLbO#z#fO$R'zO~OP$eXu$eXx$eX!b$eX'w$eX'x$eX~OPfX!RfX!{fX'afX'a$eX~P!!rOk'|O~OS'}O'U(OO'V(QO~OP(ZOu(SOx(TO'w(VO'x(XO~O'a(RO~P!#{O'a([O~O]#qOh$QOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO'b$PO'f#sO~O!Q(`O'](]O!c'}P~P!$jO#W(bO~O!d(cO~O!Q(hO'](eO!O(OP~P!$jOj(uOx(mO!W(sO!X(lO!Y(lO!d(cO!x(tO$w(oO'^$dO'g(jO~O!S(rO~P!&jO!b!yOP'eXu'eXx'eX'w'eX'x'eX!R'eX!{'eX~O'a'eX#m'eX~P!'cOP(xO!{(wO!R'dX'a'dX~O!R(yO'a'cX~O']${O'a'cP~O'](|O~O!d)RO~O']&{O~Ox$uO!Q!rO!T$vO#U!uO#V!rO']$bO!c'qP~O!]!wO#W)VO~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_!^a!R!^a'W!^a!O!^a!c!^an!^a!T!^a%Q!^a!]!^a~P!)wOP)_O!T&dO!o)^O%Q)]O'b$PO~O!])aO!T'`X_'`X!R'`X'W'`X~O!d$ZO'b$PO~O!d$ZO']$bO'b$PO~O!]!wO#W&}O~O])lO%R)mO'])iO!S(VP~O!R)nO^(UX~O'g'TO~OZ)rO~O^)sO~O!T$lO']$bO'^$dO^(UP~Ox$uO!Q)xO!R&`O!T$vO']$bO!O'tP~O]&ZOk&ZO!Q)yO'g'TO!S'vP~O!R)zO_(RX'W(RX~O!{*OO'b$PO~OP*RO!T#zO'b$PO~O!T*TO~Ou*VO!TSO~O!n*[O~Oc*aO~O'](|O!S(TP~Oc$jO~O%RtO']${O~P8wOZ*gO^*fO~OQTORTO]cObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#x^O%PqO'fQO'oYO'|aO~O!T!bO#t!lO']9aO~P!1_O^*fO_$^O'W$^O~O_*kO#d*mO%T*mO%U*mO~P){O!d%`O~O%t*rO~O!T*tO~O&V*vO&X*wOQ&SaR&SaX&Sa]&Sa_&Sab&Sac&Sah&Saj&Sak&Sal&Saq&Sas&Sax&Sa{&Sa|&Sa}&Sa!T&Sa!_&Sa!d&Sa!g&Sa!h&Sa!i&Sa!j&Sa!k&Sa!n&Sa#d&Sa#t&Sa#x&Sa%P&Sa%R&Sa%T&Sa%U&Sa%X&Sa%Z&Sa%^&Sa%_&Sa%a&Sa%n&Sa%t&Sa%v&Sa%x&Sa%z&Sa%}&Sa&T&Sa&Z&Sa&]&Sa&_&Sa&a&Sa&c&Sa'S&Sa']&Sa'f&Sa'o&Sa'|&Sa!S&Sa%{&Sa`&Sa&Q&Sa~O']*|O~On+PO~O!O&ia!R&ia~P!)wO!Q+TO!O&iX!R&iX~P){O!R%zO!O'ja~O!O'ja~P>aO!R&`O!O'ta~O!RwX!R!ZX!SwX!S!ZX!]wX!]!ZX!d!ZX!{wX'b!ZX~O!]+YO!{+XO!R#TX!R'lX!S#TX!S'lX!]'lX!d'lX'b'lX~O!]+[O!d$ZO'b$PO!R!VX!S!VX~O]&ROk&ROx&SO'g(jO~OQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!T!bO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O'fQO'oYO'|;^O~O']:SO~P!;jO!R+`O!S'kX~O!S+bO~O!]+YO!{+XO!R#TX!S#TX~O!R+cO!S'vX~O!S+eO~O]&ROk&ROx&SO'^$dO'g(jO~O!X+fO!Y+fO~P!>hOx$uO!Q+hO!T$vO']$bO!O&nX!R&nX~O_+lO!W+oO!X+kO!Y+kO!r+sO!s+qO!t+rO!u+pO!x+tO'^$dO'g(jO'o+iO~O!S+nO~P!?iOP+yO!T&dO!o+xO~O!{,PO!R'ra!c'ra_'ra'W'ra~O!]!wO~P!@sO!R&tO!c'qa~Ox$uO!Q,SO!T$vO#U,UO#V,SO']$bO!R&pX!c&pX~O_#Oi!R#Oi'W#Oi!O#Oi!c#Oin#Oi!T#Oi%Q#Oi!]#Oi~P!)wOP;tOu(SOx(TO'w(VO'x(XO~O#W!za!R!za!c!za!{!za!T!za_!za'W!za!O!za~P!BpO#W'eXQ'eXZ'eX_'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX'W'eX'f'eX'p'eX!c'eX!O'eX!T'eXn'eX%Q'eX!]'eX~P!'cO!R,_O'a'mX~P!#{O'a,aO~O!R,bO!c'nX~P!)wO!c,eO~O!O,fO~OQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zi_#Zij#Zi!R#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O#[#Zi~P!FfO#[#PO~P!FfOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO'fQOZ#Zi_#Zi!R#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~Oj#Zi~P!IQOj#RO~P!IQOQ#^Oj#ROu!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO'fQO_#Zi!R#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P!KlOZ#dO!a#TO#a#TO#b#TO#c#TO~P!KlOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO'fQO_#Zi!R#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'w#Zi~P!NdO'w!}O~P!NdOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO'fQO'w!}O_#Zi!R#Zi#i#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'x#Zi~P##OO'x#OO~P##OOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO'fQO'w!}O'x#OO~O_#Zi!R#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P#%jOQ[XZ[Xj[Xu[Xv[Xx[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X!R[X!S[X~O#m[X~P#'}OQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO#i9nO#j9oO'fQO'p#[O'w!}O'x#OO~O#m,hO~P#*XOQ'iXZ'iXj'iXu'iXv'iXx'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX!R'iX~O!{9sO#o9sO#c'iX#m'iX!S'iX~P#,SO_&sa!R&sa'W&sa!c&san&sa!O&sa!T&sa%Q&sa!]&sa~P!)wOQ#ZiZ#Zi_#Zij#Ziv#Zi!R#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'f#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P!BpO_#ni!R#ni'W#ni!O#ni!c#nin#ni!T#ni%Q#ni!]#ni~P!)wO#z,jO~O#z,kO~O!]'lO!{,lO!T$OX#w$OX#z$OX$R$OX~O!Q,mO~O!T'oO#w,oO#z'nO$R,pO~O!R9pO!S'hX~P#*XO!S,qO~O$R,sO~OS'}O'U(OO'V,vO~O],yOk,yO!O,zO~O!RdX!]dX!cdX!c$eX'pdX~P!!rO!c-QO~P!BpO!R-RO!]!wO'p&oO!c'}X~O!c-WO~O!Q(`O']$bO!c'}P~O#W-YO~O!O$eX!R$eX!]$lX~P!!rO!R-ZO!O(OX~P!BpO!]-]O~O!O-_O~Oj-cO!]!wO!d$ZO'b$PO'p&oO~O!])aO~O_$^O!R-hO'W$^O~O!S-jO~P!&jO!X-kO!Y-kO'^$dO'g(jO~Ox-mO'g(jO~O!x-nO~O']${O!R&xX'a&xX~O!R(yO'a'ca~O'a-sO~Ou-tOv-tOx-uOPra'wra'xra!Rra!{ra~O'ara#mra~P#7pOu(SOx(TOP$^a'w$^a'x$^a!R$^a!{$^a~O'a$^a#m$^a~P#8fOu(SOx(TOP$`a'w$`a'x$`a!R$`a!{$`a~O'a$`a#m$`a~P#9XO]-vO~O#W-wO~O'a$na!R$na!{$na#m$na~P!#{O#W-zO~OP.TO!T&dO!o.SO%Q.RO~O]#qOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO'b$PO'f#sO~Oh.VO'].UO~P#:yO!])aO!T'`a_'`a!R'`a'W'`a~O#W.]O~OZ[X!RdX!SdX~O!R.^O!S(VX~O!S.`O~OZ.aO~O].cO'])iO~O!T$lO']$bO^'QX!R'QX~O!R)nO^(Ua~O!c.fO~P!)wO].hO~OZ.iO~O^.jO~OP.TO!T&dO!o.SO%Q.RO'b$PO~O!R)zO_(Ra'W(Ra~O!{.pO~OP.sO!T#zO~O'g'TO!S(SP~OP.}O!T.yO!o.|O%Q.{O'b$PO~OZ/XO!R/VO!S(TX~O!S/YO~O^/[O_$^O'W$^O~O]/]O~O]/^O'](|O~O#c/_O%r/`O~P0zO!{#eO#c/_O%r/`O~O_/aO~P){O_/cO~O%{/gOQ%yiR%yiX%yi]%yi_%yib%yic%yih%yij%yik%yil%yiq%yis%yix%yi{%yi|%yi}%yi!T%yi!_%yi!d%yi!g%yi!h%yi!i%yi!j%yi!k%yi!n%yi#d%yi#t%yi#x%yi%P%yi%R%yi%T%yi%U%yi%X%yi%Z%yi%^%yi%_%yi%a%yi%n%yi%t%yi%v%yi%x%yi%z%yi%}%yi&T%yi&Z%yi&]%yi&_%yi&a%yi&c%yi'S%yi']%yi'f%yi'o%yi'|%yi!S%yi`%yi&Q%yi~O`/mO!S/kO&Q/lO~P`O!TSO!d/oO~O&X*wOQ&SiR&SiX&Si]&Si_&Sib&Sic&Sih&Sij&Sik&Sil&Siq&Sis&Six&Si{&Si|&Si}&Si!T&Si!_&Si!d&Si!g&Si!h&Si!i&Si!j&Si!k&Si!n&Si#d&Si#t&Si#x&Si%P&Si%R&Si%T&Si%U&Si%X&Si%Z&Si%^&Si%_&Si%a&Si%n&Si%t&Si%v&Si%x&Si%z&Si%}&Si&T&Si&Z&Si&]&Si&_&Si&a&Si&c&Si'S&Si']&Si'f&Si'o&Si'|&Si!S&Si%{&Si`&Si&Q&Si~O!R#bOn$]a~O!O&ii!R&ii~P!)wO!R%zO!O'ji~O!R&`O!O'ti~O!O/uO~O!R!Va!S!Va~P#*XO]&ROk&RO!Q/{O'g(jO!R&jX!S&jX~P@dO!R+`O!S'ka~O]&ZOk&ZO!Q)yO'g'TO!R&oX!S&oX~O!R+cO!S'va~O!O'ui!R'ui~P!)wO_$^O!]!wO!d$ZO!j0VO!{0TO'W$^O'b$PO'p&oO~O!S0YO~P!?iO!X0ZO!Y0ZO'^$dO'g(jO'o+iO~O!W0[O~P#MSO!TSO!W0[O!u0^O!x0_O~P#MSO!W0[O!s0aO!t0aO!u0^O!x0_O~P#MSO!T&dO~O!T&dO~P!BpO!R'ri!c'ri_'ri'W'ri~P!)wO!{0jO!R'ri!c'ri_'ri'W'ri~O!R&tO!c'qi~Ox$uO!T$vO#V0lO']$bO~O#WraQraZra_rajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra'Wra'fra'pra!cra!Ora!Tranra%Qra!]ra~P#7pO#W$^aQ$^aZ$^a_$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a'W$^a'f$^a'p$^a!c$^a!O$^a!T$^an$^a%Q$^a!]$^a~P#8fO#W$`aQ$`aZ$`a_$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a'W$`a'f$`a'p$`a!c$`a!O$`a!T$`an$`a%Q$`a!]$`a~P#9XO#W$naQ$naZ$na_$naj$nav$na!R$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na'W$na'f$na'p$na!c$na!O$na!T$na!{$nan$na%Q$na!]$na~P!BpO_#Oq!R#Oq'W#Oq!O#Oq!c#Oqn#Oq!T#Oq%Q#Oq!]#Oq~P!)wO!R&kX'a&kX~PJjO!R,_O'a'ma~O!Q0tO!R&lX!c&lX~P){O!R,bO!c'na~O!R,bO!c'na~P!)wO#m!fa!S!fa~PCfO#m!^a!R!^a!S!^a~P#*XO!T1XO#x^O$P1YO~O!S1^O~On1_O~P!BpO_$Yq!R$Yq'W$Yq!O$Yq!c$Yqn$Yq!T$Yq%Q$Yq!]$Yq~P!)wO!O1`O~O],yOk,yO~Ou(SOx(TO'x(XOP$xi'w$xi!R$xi!{$xi~O'a$xi#m$xi~P$.POu(SOx(TOP$zi'w$zi'x$zi!R$zi!{$zi~O'a$zi#m$zi~P$.rO'p#[O~P!BpO!Q1cO']$bO!R&tX!c&tX~O!R-RO!c'}a~O!R-RO!]!wO!c'}a~O!R-RO!]!wO'p&oO!c'}a~O'a$gi!R$gi!{$gi#m$gi~P!#{O!Q1kO'](eO!O&vX!R&vX~P!$jO!R-ZO!O(Oa~O!R-ZO!O(Oa~P!BpO!]!wO~O!]!wO#c1sO~Oj1vO!]!wO'p&oO~O!R'di'a'di~P!#{O!{1yO!R'di'a'di~P!#{O!c1|O~O_$Zq!R$Zq'W$Zq!O$Zq!c$Zqn$Zq!T$Zq%Q$Zq!]$Zq~P!)wO!R2QO!T(PX~P!BpO!T&dO%Q2TO~O!T&dO%Q2TO~P!BpO!T$eX$u[X_$eX!R$eX'W$eX~P!!rO$u2XOPgXugXxgX!TgX'wgX'xgX_gX!RgX'WgX~O$u2XO~O]2_O%R2`O'])iO!R'PX!S'PX~O!R.^O!S(Va~OZ2dO~O^2eO~O]2hO~OP2jO!T&dO!o2iO%Q2TO~O_$^O'W$^O~P!BpO!T#zO~P!BpO!R2oO!{2qO!S(SX~O!S2rO~Ox;oO!W2{O!X2tO!Y2tO!r2zO!s2yO!t2yO!x2xO'^$dO'g(jO'o+iO~O!S2wO~P$7ZOP3SO!T.yO!o3RO%Q3QO~OP3SO!T.yO!o3RO%Q3QO'b$PO~O'](|O!R'OX!S'OX~O!R/VO!S(Ta~O]3^O'g3]O~O]3_O~O^3aO~O!c3dO~P){O_3fO~O_3fO~P){O#c3hO%r3iO~PFOO`/mO!S3mO&Q/lO~P`O!]3oO~O!R#Ti!S#Ti~P#*XO!{3qO!R#Ti!S#Ti~O!R!Vi!S!Vi~P#*XO_$^O!{3xO'W$^O~O_$^O!]!wO!{3xO'W$^O~O!X3|O!Y3|O'^$dO'g(jO'o+iO~O_$^O!]!wO!d$ZO!j3}O!{3xO'W$^O'b$PO'p&oO~O!W4OO~P$;xO!W4OO!u4RO!x4SO~P$;xO_$^O!]!wO!j3}O!{3xO'W$^O'p&oO~O!R'rq!c'rq_'rq'W'rq~P!)wO!R&tO!c'qq~O#W$xiQ$xiZ$xi_$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi'W$xi'f$xi'p$xi!c$xi!O$xi!T$xin$xi%Q$xi!]$xi~P$.PO#W$ziQ$ziZ$zi_$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi'W$zi'f$zi'p$zi!c$zi!O$zi!T$zin$zi%Q$zi!]$zi~P$.rO#W$giQ$giZ$gi_$gij$giv$gi!R$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi'W$gi'f$gi'p$gi!c$gi!O$gi!T$gi!{$gin$gi%Q$gi!]$gi~P!BpO!R&ka'a&ka~P!#{O!R&la!c&la~P!)wO!R,bO!c'ni~O#m#Oi!R#Oi!S#Oi~P#*XOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zij#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~O#[#Zi~P$EiO#[9eO~P$EiOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO'fQOZ#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~Oj#Zi~P$GqOj9gO~P$GqOQ#^Oj9gOu!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO'fQO#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P$IyOZ9rO!a9iO#a9iO#b9iO#c9iO~P$IyOQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO'fQO#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'x#Zi!R#Zi!S#Zi~O'w#Zi~P$L_O'w!}O~P$L_OQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO'fQO'w!}O#i#Zi#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~O'x#Zi~P$NgO'x#OO~P$NgOQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO#i9nO'fQO'w!}O'x#OO~O#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~P%!oO_#ky!R#ky'W#ky!O#ky!c#kyn#ky!T#ky%Q#ky!]#ky~P!)wOP;vOu(SOx(TO'w(VO'x(XO~OQ#ZiZ#Zij#Ziv#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'f#Zi'p#Zi!R#Zi!S#Zi~P%%aO!b!yOP'eXu'eXx'eX'w'eX'x'eX!S'eX~OQ'eXZ'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX#m'eX'f'eX'p'eX!R'eX~P%'eO#m#ni!R#ni!S#ni~P#*XO!S4eO~O!R&sa!S&sa~P#*XO!]!wO'p&oO!R&ta!c&ta~O!R-RO!c'}i~O!R-RO!]!wO!c'}i~O'a$gq!R$gq!{$gq#m$gq~P!#{O!O&va!R&va~P!BpO!]4lO~O!R-ZO!O(Oi~P!BpO!R-ZO!O(Oi~O!O4pO~O!]!wO#c4uO~Oj4vO!]!wO'p&oO~O!O4xO~O'a$iq!R$iq!{$iq#m$iq~P!#{O_$Zy!R$Zy'W$Zy!O$Zy!c$Zyn$Zy!T$Zy%Q$Zy!]$Zy~P!)wO!R2QO!T(Pa~O!T&dO%Q4}O~O!T&dO%Q4}O~P!BpO_#Oy!R#Oy'W#Oy!O#Oy!c#Oyn#Oy!T#Oy%Q#Oy!]#Oy~P!)wOZ5QO~O]5SO'])iO~O!R.^O!S(Vi~O]5VO~O^5WO~O'g'TO!R&{X!S&{X~O!R2oO!S(Sa~O!S5eO~P$7ZOx;sO'g(jO'o+iO~O!W5hO!X5gO!Y5gO!x0_O'^$dO'g(jO'o+iO~O!s5iO!t5iO~P%0^O!X5gO!Y5gO'^$dO'g(jO'o+iO~O!T.yO~O!T.yO%Q5kO~O!T.yO%Q5kO~P!BpOP5pO!T.yO!o5oO%Q5kO~OZ5uO!R'Oa!S'Oa~O!R/VO!S(Ti~O]5xO~O!c5yO~O!c5zO~O!c5{O~O!c5{O~P){O_5}O~O!]6QO~O!c6RO~O!R'ui!S'ui~P#*XO_$^O'W$^O~P!)wO_$^O!{6WO'W$^O~O_$^O!]!wO!{6WO'W$^O~O!X6]O!Y6]O'^$dO'g(jO'o+iO~O_$^O!]!wO!j6^O!{6WO'W$^O'p&oO~O!d$ZO'b$PO~P%4xO!W6_O~P%4gO!R'ry!c'ry_'ry'W'ry~P!)wO#W$gqQ$gqZ$gq_$gqj$gqv$gq!R$gq!a$gq!b$gq!d$gq!j$gq#[$gq#]$gq#^$gq#_$gq#`$gq#a$gq#b$gq#c$gq#e$gq#g$gq#i$gq#j$gq'W$gq'f$gq'p$gq!c$gq!O$gq!T$gq!{$gqn$gq%Q$gq!]$gq~P!BpO#W$iqQ$iqZ$iq_$iqj$iqv$iq!R$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq'W$iq'f$iq'p$iq!c$iq!O$iq!T$iq!{$iqn$iq%Q$iq!]$iq~P!BpO!R&li!c&li~P!)wO#m#Oq!R#Oq!S#Oq~P#*XOu-tOv-tOx-uOPra'wra'xra!Sra~OQraZrajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra#mra'fra'pra!Rra~P%;OOu(SOx(TOP$^a'w$^a'x$^a!S$^a~OQ$^aZ$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a#m$^a'f$^a'p$^a!R$^a~P%=SOu(SOx(TOP$`a'w$`a'x$`a!S$`a~OQ$`aZ$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a#m$`a'f$`a'p$`a!R$`a~P%?WOQ$naZ$naj$nav$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na#m$na'f$na'p$na!R$na!S$na~P%%aO#m$Yq!R$Yq!S$Yq~P#*XO#m$Zq!R$Zq!S$Zq~P#*XO!S6hO~O#m6iO~P!#{O!]!wO!R&ti!c&ti~O!]!wO'p&oO!R&ti!c&ti~O!R-RO!c'}q~O!O&vi!R&vi~P!BpO!R-ZO!O(Oq~O!O6oO~P!BpO!O6oO~O!R'dy'a'dy~P!#{O!R&ya!T&ya~P!BpO!T$tq_$tq!R$tq'W$tq~P!BpOZ6vO~O!R.^O!S(Vq~O]6yO~O!T&dO%Q6zO~O!T&dO%Q6zO~P!BpO!{6{O!R&{a!S&{a~O!R2oO!S(Si~P#*XO!X7RO!Y7RO'^$dO'g(jO'o+iO~O!W7TO!x4SO~P%GXO!T.yO%Q7WO~O!T.yO%Q7WO~P!BpO]7_O'g7^O~O!R/VO!S(Tq~O!c7aO~O!c7aO~P){O!c7cO~O!c7dO~O!R#Ty!S#Ty~P#*XO_$^O!{7jO'W$^O~O_$^O!]!wO!{7jO'W$^O~O!X7mO!Y7mO'^$dO'g(jO'o+iO~O_$^O!]!wO!j7nO!{7jO'W$^O'p&oO~O#m#ky!R#ky!S#ky~P#*XOQ$giZ$gij$giv$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi#m$gi'f$gi'p$gi!R$gi!S$gi~P%%aOu(SOx(TO'x(XOP$xi'w$xi!S$xi~OQ$xiZ$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi#m$xi'f$xi'p$xi!R$xi~P%LjOu(SOx(TOP$zi'w$zi'x$zi!S$zi~OQ$ziZ$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi#m$zi'f$zi'p$zi!R$zi~P%NnO#m$Zy!R$Zy!S$Zy~P#*XO#m#Oy!R#Oy!S#Oy~P#*XO!]!wO!R&tq!c&tq~O!R-RO!c'}y~O!O&vq!R&vq~P!BpO!O7tO~P!BpO!R.^O!S(Vy~O!R2oO!S(Sq~O!X8QO!Y8QO'^$dO'g(jO'o+iO~O!T.yO%Q8TO~O!T.yO%Q8TO~P!BpO!c8WO~O_$^O!{8]O'W$^O~O_$^O!]!wO!{8]O'W$^O~OQ$gqZ$gqj$gqv$gq!a$gq!b$gq!d$gq!j$gq#[$gq#]$gq#^$gq#_$gq#`$gq#a$gq#b$gq#c$gq#e$gq#g$gq#i$gq#j$gq#m$gq'f$gq'p$gq!R$gq!S$gq~P%%aOQ$iqZ$iqj$iqv$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq#m$iq'f$iq'p$iq!R$iq!S$iq~P%%aO'a$|!Z!R$|!Z!{$|!Z#m$|!Z~P!#{O!R&{q!S&{q~P#*XO_$^O!{8oO'W$^O~O#W$|!ZQ$|!ZZ$|!Z_$|!Zj$|!Zv$|!Z!R$|!Z!a$|!Z!b$|!Z!d$|!Z!j$|!Z#[$|!Z#]$|!Z#^$|!Z#_$|!Z#`$|!Z#a$|!Z#b$|!Z#c$|!Z#e$|!Z#g$|!Z#i$|!Z#j$|!Z'W$|!Z'f$|!Z'p$|!Z!c$|!Z!O$|!Z!T$|!Z!{$|!Zn$|!Z%Q$|!Z!]$|!Z~P!BpOP;uOu(SOx(TO'w(VO'x(XO~O!S!za!W!za!X!za!Y!za!r!za!s!za!t!za!x!za'^!za'g!za'o!za~P&,_O!W'eX!X'eX!Y'eX!r'eX!s'eX!t'eX!x'eX'^'eX'g'eX'o'eX~P%'eOQ$|!ZZ$|!Zj$|!Zv$|!Z!a$|!Z!b$|!Z!d$|!Z!j$|!Z#[$|!Z#]$|!Z#^$|!Z#_$|!Z#`$|!Z#a$|!Z#b$|!Z#c$|!Z#e$|!Z#g$|!Z#i$|!Z#j$|!Z#m$|!Z'f$|!Z'p$|!Z!R$|!Z!S$|!Z~P%%aO!Wra!Xra!Yra!rra!sra!tra!xra'^ra'gra'ora~P%;OO!W$^a!X$^a!Y$^a!r$^a!s$^a!t$^a!x$^a'^$^a'g$^a'o$^a~P%=SO!W$`a!X$`a!Y$`a!r$`a!s$`a!t$`a!x$`a'^$`a'g$`a'o$`a~P%?WO!S$na!W$na!X$na!Y$na!r$na!s$na!t$na!x$na'^$na'g$na'o$na~P&,_O!W$xi!X$xi!Y$xi!r$xi!s$xi!t$xi!x$xi'^$xi'g$xi'o$xi~P%LjO!W$zi!X$zi!Y$zi!r$zi!s$zi!t$zi!x$zi'^$zi'g$zi'o$zi~P%NnO!S$gi!W$gi!X$gi!Y$gi!r$gi!s$gi!t$gi!x$gi'^$gi'g$gi'o$gi~P&,_O!S$gq!W$gq!X$gq!Y$gq!r$gq!s$gq!t$gq!x$gq'^$gq'g$gq'o$gq~P&,_O!S$iq!W$iq!X$iq!Y$iq!r$iq!s$iq!t$iq!x$iq'^$iq'g$iq'o$iq~P&,_O!S$|!Z!W$|!Z!X$|!Z!Y$|!Z!r$|!Z!s$|!Z!t$|!Z!x$|!Z'^$|!Z'g$|!Z'o$|!Z~P&,_On'hX~P.jOn[X!O[X!c[X%r[X!T[X%Q[X!][X~P$zO!]dX!c[X!cdX'pdX~P;dOQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!TSO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O']'cO'fQO'oYO'|;^O~O]#qOh$QOj#rOk#qOl#qOq$ROs9uOx#yO!T#zO!_;fO!d#vO#V:OO#t$VO$_9xO$a9{O$d$WO']&{O'b$PO'f#sO~O!R9pO!S$]a~O]#qOh$QOj#rOk#qOl#qOq$ROs9vOx#yO!T#zO!_;gO!d#vO#V:PO#t$VO$_9yO$a9|O$d$WO']&{O'b$PO'f#sO~O#d'jO~P&<WO!S[X!SdX~P;dO!]9dO~O#W9cO~O!]!wO#W9cO~O!{9sO~O#c9iO~O!{:QO!R'uX!S'uX~O!{9sO!R'sX!S'sX~O#W:RO~O'a:TO~P!#{O#W:[O~O#W:]O~O#W:^O~O!]!wO#W:_O~O!]!wO#W:RO~O#m:`O~P#*XO#W:aO~O#W:bO~O#W:cO~O#W:dO~O#W:eO~O#W:fO~O#W:gO~O#W:hO~O!O:iO~O#m:jO~P!#{O#m:kO~P!#{O#m:lO~P!#{O!O:mO~P!BpO!O:mO~O!O:nO~P!BpO!]!wO#c;lO~O!]!wO#c;nO~O#x~!b!r!t!u#U#V'|$_$a$d$u%P%Q%R%X%Z%^%_%a%c~UT#x'|#]}'Y'Z#z'Y']'g~",
    goto: "#Kk(ZPPPPPPPP([P(lP*`PPPP-zPP.a3s7o8SP8SPPP8SP:U8SP8SP:YPP:`P:t?VPPPP?ZPPPP?ZA{PPPBRDdP?ZPFwPPPPHp?ZPPPPPJi?ZPPMjNgPPPPNk!!TP!!]!#^PNg?Z?Z!&n!)i!.[!.[!1kPPP!1r!4h?ZPPPPPPPPPP!7_P!8pPP?Z!9}P?ZP?Z?Z?Z?ZP?Z!;dPP!>]P!AQ!AY!A^!A^P!>YP!Ab!AbP!DVP!DZ?Z?Z!Da!GT8SP8SP8S8SP!HW8S8S!Jf8S!M_8S# g8S8S#!T#$c#$c#$g#$c#$oP#$cP8S#%k8S#'X8S8S-zPPP#(yPP#)c#)cP#)cP#)x#)cPP#*OP#)uP#)u#*b!!X#)u#+P#+V#+Y([#+]([P#+d#+d#+dP([P([P([P([PP([P#+j#+mP#+m([P#+qP#+tP([P([P([P([P([P([([#+z#,U#,[#,b#,p#,v#,|#-W#-^#-m#-s#.R#.X#._#.m#/S#0z#1Y#1`#1f#1l#1r#1|#2S#2Y#2d#2v#2|PPPPPPPP#3SPP#3v#7OPP#8f#8m#8uPP#>a#@t#Fp#Fs#Fv#GR#GUPP#GX#G]#Gz#Hq#Hu#IZPP#I_#Ie#IiP#Il#Ip#Is#Jc#Jy#KO#KR#KU#K[#K_#Kc#KgmhOSj}!n$]%c%f%g%i*o*t/g/jQ$imQ$ppQ%ZyS&V!b+`Q&k!jS(l#z(qQ)g$jQ)t$rQ*`%TQ+f&^S+k&d+mQ+}&lQ-k(sQ/U*aY0Z+o+p+q+r+sS2t.y2vU3|0[0^0aU5g2y2z2{S6]4O4RS7R5h5iQ7m6_R8Q7T$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!j'e#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ(}$SQ)l$lQ*b%WQ*i%`Q,X9tQ.W)aQ.c)mQ/^*gQ2_.^Q3Z/VQ4^9vQ5S2`R8{9upeOSjy}!n$]%Y%c%f%g%i*o*t/g/jR*d%[&WVOSTjkn}!S!W!k!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%z&S&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;`;a[!cRU!]!`%x&WQ$clQ$hmS$mp$rv$wrs!r!u$Z$u&`&t&w)x)y)z*m+Y+h,S,U/o0lQ%PwQ&h!iQ&j!jS(_#v(cS)f$i$jQ)j$lQ)w$tQ*Z%RQ*_%TS+|&k&lQ-V(`Q.[)gQ.b)mQ.d)nQ.g)rQ/P*[S/T*`*aQ0h+}Q1b-RQ2^.^Q2b.aQ2g.iQ3Y/UQ4i1cQ5R2`Q5U2dQ6u5QR7w6vx#xa!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k!Y$fm!j$h$i$j&U&j&k&l(k)f)g+]+j+|+}-d.[0Q0W0]0h1u3{4Q6Z7k8^Q)`$cQ*P$|Q*S$}Q*^%TQ.k)wQ/O*ZU/S*_*`*aQ3T/PS3X/T/UQ5b2sQ5t3YS7P5c5fS8O7Q7SQ8f8PQ8u8g#[;b!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd;c9d9x9{:O:V:Y:]:b:e:ke;d9r9y9|:P:W:Z:^:c:f:lW#}a$P(y;^S$|t%YQ$}uQ%OvR)}$z%P#|a!w!y#d#v#y$T$U$Y&g'}(W(Y(Z(b(h(w(x)])_)a*O*R+y,_-Y-Z-]-w.R.T.p.s.{.}1a1k1s1y2Q2T2X2j3Q3S4l4u4}5k5p6i6z7W8T9d9r9w9x9y9z9{9|9}:O:P:U:V:W:X:Y:Z:[:]:^:a:b:c:d:e:f:j:k:l;^;i;j;k;l;n;t;u;vT(O#s(PX)O$S9t9u9vU&Z!b$v+cQ'U!{Q)q$oQ.t*TQ1z-tR5^2o&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a$]#aZ!_!o$a%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,i,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|T!XQ!Y&_cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ&X!bR/|+`Y&R!b&V&^+`+fS(k#z(qS+j&d+mS-d(l(sQ-e(mQ-l(tQ.v*VU0W+k+o+pU0]+q+r+sS0b+t2xQ1u-kQ1w-mQ1x-nS2s.y2vU3{0Z0[0^Q4P0_Q4Q0aS5c2t2{S5f2y2zU6Z3|4O4RQ6`4SS7Q5g5hQ7S5iS7k6]6_S8P7R7TQ8^7mQ8g8QQ;h;oR;m;slhOSj}!n$]%c%f%g%i*o*t/g/jQ%k!QS&x!v9cQ)d$gQ*X%PQ*Y%QQ+z&iS,]&}:RS-y)V:_Q.Y)eQ.x*WQ/n*vQ/p*wQ/x+ZQ0`+qQ0f+{S2P-z:gQ2Y.ZS2].]:hQ3r/zQ3u0RQ4U0gQ5P2ZQ6T3tQ6X3zQ6a4VQ7e6RQ7h6YQ8Y7iQ8l8[R8x8n$W#`Z!_!o%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|W(v#{&|1V8qT)Z$a,i$W#_Z!_!o%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|Q'f#`S)Y$a,iR-{)Z&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ%f{Q%g|Q%i!OQ%j!PR/f*rQ&e!iQ)[$cQ+w&hS.Q)`)wS0c+u+vW2S-}.O.P.kS4T0d0eU4|2U2V2WU6s4{5Y5ZQ7v6tR8b7yT+l&d+mS+j&d+mU0W+k+o+pU0]+q+r+sS0b+t2xS2s.y2vU3{0Z0[0^Q4P0_Q4Q0aS5c2t2{S5f2y2zU6Z3|4O4RQ6`4SS7Q5g5hQ7S5iS7k6]6_S8P7R7TQ8^7mR8g8QS+l&d+mT2u.y2vS&r!q/dQ-U(_Q-b(kS0V+j2sQ1g-VS1p-c-lU3}0]0b5fQ4h1bS4s1v1xU6^4P4Q7SQ6k4iQ6r4vR7n6`Q!xXS&q!q/dQ)W$[Q)b$eQ)h$kQ,Q&rQ-T(_Q-a(kQ-f(nQ.X)cQ/Q*]S0U+j2sS1f-U-VS1o-b-lQ1r-eQ1t-gQ3V/RW3y0V0]0b5fQ4g1bQ4k1gS4o1p1xQ4t1wQ5r3WW6[3}4P4Q7SS6j4h4iS6n4p:iQ6p4sQ6}5aQ7[5sS7l6^6`Q7r6kS7s6o:mQ7u6rQ7|7OQ8V7]Q8_7nS8a7t:nQ8d7}Q8s8eQ9Q8tQ9X9RQ:u:pQ;T:zQ;U:{Q;V;hR;[;m$rWORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oS!xn!k!j:o#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR:u;`$rXORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oQ$[b!Y$em!j$h$i$j&U&j&k&l(k)f)g+]+j+|+}-d.[0Q0W0]0h1u3{4Q6Z7k8^S$kn!kQ)c$fQ*]%TW/R*^*_*`*aU3W/S/T/UQ5a2sS5s3X3YU7O5b5c5fQ7]5tU7}7P7Q7SS8e8O8PS8t8f8gQ9R8u!j:p#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ:z;_R:{;`$f]OSTjk}!S!W!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oY!hRU!]!`%xv$wrs!r!u$Z$u&`&t&w)x)y)z*m+Y+h,S,U/o0lQ*j%`!h:q#]#k'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR:t&WS&[!b$vR0O+c$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!j'e#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR*i%`$roORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oQ'U!{!k:r#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a!h#VZ!_$a%w%}&y'Q'_'`'a'b'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_!R9k'd'u+^,i/v/y0w1P1Q1R1S1W1]3s4]4b4c5`6S6b6f6g7z:|!d#XZ!_$a%w%}&y'Q'a'b'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_}9m'd'u+^,i/v/y0w1R1S1W1]3s4]4b4c5`6S6b6f6g7z:|!`#]Z!_$a%w%}&y'Q'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_Q1a-Px;a'd'u+^,i/v/y0w1W1]3s4]4b4c5`6S6b6f6g7z:|Q;i;pQ;j;qR;k;r&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aS#l`#mR1Y,l&e_ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,l,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aS#g^#nT'n#i'rT#h^#nT'p#i'r&e`ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,l,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aT#l`#mQ#o`R'y#m$rbORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!k;_#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a#RdOSUj}!S!W!n!|#k$]%[%_%`%c%e%f%g%i%m&S&f'w)^*k*o*t+x,m-u.S.|/_/`/a/c/g/j/l1X2i3R3f3h3i5o5}x#{a!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k#[&|!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vQ)S$WQ,x(Sd1V9r9y9|:P:W:Z:^:c:f:le8q9d9x9{:O:V:Y:]:b:e:kx#wa!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;kQ(d#xS(n#z(qQ)T$XQ-g(o#[:w!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd:x9d9x9{:O:V:Y:]:b:e:kd:y9r9y9|:P:W:Z:^:c:f:lQ:};bQ;O;cQ;P;dQ;Q;eQ;R;fR;S;gx#{a!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k#[&|!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd1V9r9y9|:P:W:Z:^:c:f:le8q9d9x9{:O:V:Y:]:b:e:klfOSj}!n$]%c%f%g%i*o*t/g/jQ(g#yQ*}%pQ+O%rR1j-Z%O#|a!w!y#d#v#y$T$U$Y&g'}(W(Y(Z(b(h(w(x)])_)a*O*R+y,_-Y-Z-]-w.R.T.p.s.{.}1a1k1s1y2Q2T2X2j3Q3S4l4u4}5k5p6i6z7W8T9d9r9w9x9y9z9{9|9}:O:P:U:V:W:X:Y:Z:[:]:^:a:b:c:d:e:f:j:k:l;^;i;j;k;l;n;t;u;vQ*Q$}Q.r*SQ2m.qR5]2nT(p#z(qS(p#z(qT2u.y2vQ)b$eQ-f(nQ.X)cQ/Q*]Q3V/RQ5r3WQ6}5aQ7[5sQ7|7OQ8V7]Q8d7}Q8s8eQ9Q8tR9X9Rp(W#t'O)U-X-o-p0q1h1}4f4w7q:v;W;X;Y!n:U&z'i(^(f+v,[,t-P-^-|.P.o.q0e0p1i1m2W2l2n3O4Y4Z4m4q4y5O5Z5n6m6q7Y8`;Z;];p;q;r[:V8p9O9V9Y9Z9]]:W1U4a6c7o7p8zr(Y#t'O)U,}-X-o-p0q1h1}4f4w7q:v;W;X;Y!p:X&z'i(^(f+v,[,t-P-^-|.P.o.q0e0n0p1i1m2W2l2n3O4Y4Z4m4q4y5O5Z5n6m6q7Y8`;Z;];p;q;r^:Y8p9O9T9V9Y9Z9]_:Z1U4a6c6d7o7p8zpeOSjy}!n$]%Y%c%f%g%i*o*t/g/jQ%VxR*k%`peOSjy}!n$]%Y%c%f%g%i*o*t/g/jR%VxQ*U%OR.n)}qeOSjy}!n$]%Y%c%f%g%i*o*t/g/jQ.z*ZS3P/O/PW5j2|2}3O3TU7V5l5m5nU8R7U7X7YQ8h8SR8v8iQ%^yR*e%YR3^/XR7_5uS$mp$rR.d)nQ%czR*o%dR*u%jT/h*t/jR*y%kQ*x%kR/q*yQjOQ!nST$`j!nQ(P#sR,u(PQ!YQR%u!YQ!^RU%{!^%|+UQ%|!_R+U%}Q+a&XR/}+aQ,`'OR0r,`Q,c'QS0u,c0vR0v,dQ+m&dR0X+mS!eR$uU&a!e&b+VQ&b!fR+V&OQ+d&[R0P+dQ&u!sQ,R&sU,V&u,R0mR0m,WQ'r#iR,n'rQ#m`R'x#mQ#cZU'h#c+Q9qQ+Q9_R9q'uQ-S(_W1d-S1e4j6lU1e-T-U-VS4j1f1gR6l4k$k(U#t&z'O'i(^(f)P)Q)U+v,Y,Z,[,t,}-O-P-X-^-o-p-|.P.o.q0e0n0o0p0q1U1h1i1m1}2W2l2n3O4Y4Z4_4`4a4f4m4q4w4y5O5Z5n6c6d6e6m6q7Y7o7p7q8`8p8z8|8}9O9T9U9V9Y9Z9]:v;W;X;Y;Z;];p;q;rQ-[(fU1l-[1n4nQ1n-^R4n1mQ(q#zR-i(qQ(z$OR-r(zQ2R-|R4z2RQ){$xR.m){Q2p.tS5_2p6|R6|5`Q*W%PR.w*WQ2v.yR5d2vQ/W*bS3[/W5vR5v3^Q._)jW2a._2c5T6wQ2c.bQ5T2bR6w5UQ)o$mR.e)oQ/j*tR3l/jWiOSj!nQ%h}Q)X$]Q*n%cQ*p%fQ*q%gQ*s%iQ/e*oS/h*t/jR3k/gQ$_gQ%l!RQ%o!TQ%q!UQ%s!VQ)v$sQ)|$yQ*d%^Q*{%nQ-h(pS/Z*e*hQ/r*zQ/s*}Q/t+OS0S+j2sQ2f.hQ2k.oQ3U/QQ3`/]Q3j/fY3w0U0V0]0b5fQ5X2hQ5[2lQ5q3VQ5w3_[6U3v3y3}4P4Q7SQ6x5VQ7Z5rQ7`5xW7f6V6[6^6`Q7x6yQ7{6}Q8U7[U8X7g7l7nQ8c7|Q8j8VS8k8Z8_Q8r8dQ8w8mQ9P8sQ9S8yQ9W9QR9[9XQ$gmQ&i!jU)e$h$i$jQ+Z&UU+{&j&k&lQ-`(kS.Z)f)gQ/z+]Q0R+jS0g+|+}Q1q-dQ2Z.[Q3t0QS3z0W0]Q4V0hQ4r1uS6Y3{4QQ7i6ZQ8[7kR8n8^S#ua;^R({$PU$Oa$P;^R-q(yQ#taS&z!w)aQ'O!yQ'i#dQ(^#vQ(f#yQ)P$TQ)Q$UQ)U$YQ+v&gQ,Y9wQ,Z9zQ,[9}Q,t'}Q,}(WQ-O(YQ-P(ZQ-X(bQ-^(hQ-o(wQ-p(xd-|)].R.{2T3Q4}5k6z7W8TQ.P)_Q.o*OQ.q*RQ0e+yQ0n:UQ0o:XQ0p:[Q0q,_Q1U9rQ1h-YQ1i-ZQ1m-]Q1}-wQ2W.TQ2l.pQ2n.sQ3O.}Q4Y:aQ4Z:dQ4_9yQ4`9|Q4a:PQ4f1aQ4m1kQ4q1sQ4w1yQ4y2QQ5O2XQ5Z2jQ5n3SQ6c:^Q6d:WQ6e:ZQ6m4lQ6q4uQ7Y5pQ7o:cQ7p:fQ7q6iQ8`:jQ8p9dQ8z:lQ8|9xQ8}9{Q9O:OQ9T:VQ9U:YQ9V:]Q9Y:bQ9Z:eQ9]:kQ:v;^Q;W;iQ;X;jQ;Y;kQ;Z;lQ;];nQ;p;tQ;q;uR;r;vlgOSj}!n$]%c%f%g%i*o*t/g/jS!pU%eQ%n!SQ%t!WQ'V!|Q'v#kS*h%[%_Q*l%`Q*z%mQ+W&SQ+u&fQ,r'wQ.O)^Q/b*kQ0d+xQ1[,mQ1{-uQ2V.SQ2}.|Q3b/_Q3c/`Q3e/aQ3g/cQ3n/lQ4d1XQ5Y2iQ5m3RQ5|3fQ6O3hQ6P3iQ7X5oR7b5}!vZOSUj}!S!n!|$]%[%_%`%c%e%f%g%i%m&S&f)^*k*o*t+x-u.S.|/_/`/a/c/g/j/l2i3R3f3h3i5o5}Q!_RQ!oTQ$akS%w!]%zQ%}!`Q&y!vQ'Q!zQ'W#PQ'X#QQ'Y#RQ'Z#SQ'[#TQ']#UQ'^#VQ'_#WQ'`#XQ'a#YQ'b#ZQ'd#]Q'g#bQ'k#eW'u#k'w,m1XQ)p$nS+R%x+TS+^&W/{Q+g&_Q,O&pQ,^&}Q,d'RQ,g9^Q,i9`Q,w(RQ-x)VQ/v+XQ/y+[Q0i,PQ0s,bQ0w9cQ0x9eQ0y9fQ0z9gQ0{9hQ0|9iQ0}9jQ1O9kQ1P9lQ1Q9mQ1R9nQ1S9oQ1T,hQ1W9sQ1]9pQ2O-zQ2[.]Q3s:QQ3v0TQ4W0jQ4[0tQ4]:RQ4b:TQ4c:_Q5`2qQ6S3qQ6V3xQ6b:`Q6f:gQ6g:hQ7g6WQ7z6{Q8Z7jQ8m8]Q8y8oQ9_!WR:|;aR!aRR&Y!bS&U!b+`S+]&V&^R0Q+fR'P!yR'S!zT!tU$ZS!sU$ZU$xrs*mS&s!r!uQ,T&tQ,W&wQ.l)zS0k,S,UR4X0l`!dR!]!`$u%x&`)x+hh!qUrs!r!u$Z&t&w)z,S,U0lQ/d*mQ/w+YQ3p/oT:s&W)yT!gR$uS!fR$uS%y!]&`S&O!`)xS+S%x+hT+_&W)yT&]!b$vQ#i^R'{#nT'q#i'rR1Z,lT(a#v(cR(i#yQ-})]Q2U.RQ2|.{Q4{2TQ5l3QQ6t4}Q7U5kQ7y6zQ8S7WR8i8TlhOSj}!n$]%c%f%g%i*o*t/g/jQ%]yR*d%YV$yrs*mR.u*TR*c%WQ$qpR)u$rR)k$lT%az%dT%bz%dT/i*t/j",
    nodeNames: "\u26A0 extends ArithOp ArithOp InterpolationStart LineComment BlockComment Script ExportDeclaration export Star as VariableName String from ; default FunctionDeclaration async function VariableDefinition TypeParamList TypeDefinition ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Interpolation null super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression await yield delete LogicOp BitOp ParenthesizedExpression ClassExpression class extends ClassBody MethodDeclaration Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression PrivatePropertyName BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement",
    maxTerm: 332,
    context: trackNewline,
    nodeProps: [
      ["closedBy", 4, "InterpolationEnd", 40, "]", 51, "}", 66, ")", 132, "JSXSelfCloseEndTag JSXEndTag", 146, "JSXEndTag"],
      ["group", -26, 8, 15, 17, 58, 184, 188, 191, 192, 194, 197, 200, 211, 213, 219, 221, 223, 225, 228, 234, 240, 242, 244, 246, 248, 250, 251, "Statement", -30, 12, 13, 24, 27, 28, 41, 43, 44, 45, 47, 52, 60, 68, 74, 75, 91, 92, 101, 103, 119, 122, 124, 125, 126, 127, 129, 130, 148, 149, 151, "Expression", -22, 23, 25, 29, 32, 34, 152, 154, 156, 157, 159, 160, 161, 163, 164, 165, 167, 168, 169, 178, 180, 182, 183, "Type", -3, 79, 85, 90, "ClassItem"],
      ["openedBy", 30, "InterpolationStart", 46, "[", 50, "{", 65, "(", 131, "JSXStartTag", 141, "JSXStartTag JSXStartCloseTag"]
    ],
    propSources: [jsHighlight],
    skippedNodes: [0, 5, 6],
    repeatNodeCount: 28,
    tokenData: "!C}~R!`OX%TXY%cYZ'RZ[%c[]%T]^'R^p%Tpq%cqr'crs(kst0htu2`uv4pvw5ewx6cxy<yyz=Zz{=k{|>k|}?O}!O>k!O!P?`!P!QCl!Q!R!0[!R![!1q![!]!7s!]!^!8V!^!_!8g!_!`!9d!`!a!:[!a!b!<R!b!c%T!c!}2`!}#O!=d#O#P%T#P#Q!=t#Q#R!>U#R#S2`#S#T!>i#T#o2`#o#p!>y#p#q!?O#q#r!?f#r#s!?x#s$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$I|2`$I|$I}!Bq$I}$JO!Bq$JO$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`W%YR$UWO!^%T!_#o%T#p~%T7Z%jg$UW'Y7ROX%TXY%cYZ%TZ[%c[p%Tpq%cq!^%T!_#o%T#p$f%T$f$g%c$g#BY%T#BY#BZ%c#BZ$IS%T$IS$I_%c$I_$JT%T$JT$JU%c$JU$KV%T$KV$KW%c$KW&FU%T&FU&FV%c&FV?HT%T?HT?HU%c?HU~%T7Z'YR$UW'Z7RO!^%T!_#o%T#p~%T$T'jS$UW!j#{O!^%T!_!`'v!`#o%T#p~%T$O'}S#e#v$UWO!^%T!_!`(Z!`#o%T#p~%T$O(bR#e#v$UWO!^%T!_#o%T#p~%T)X(rZ$UW]#eOY(kYZ)eZr(krs*rs!^(k!^!_+U!_#O(k#O#P-b#P#o(k#o#p+U#p~(k&r)jV$UWOr)ers*Ps!^)e!^!_*a!_#o)e#o#p*a#p~)e&r*WR$P&j$UWO!^%T!_#o%T#p~%T&j*dROr*ars*ms~*a&j*rO$P&j)X*{R$P&j$UW]#eO!^%T!_#o%T#p~%T)P+ZV]#eOY+UYZ*aZr+Urs+ps#O+U#O#P+w#P~+U)P+wO$P&j]#e)P+zROr+Urs,Ts~+U)P,[U$P&j]#eOY,nZr,nrs-Vs#O,n#O#P-[#P~,n#e,sU]#eOY,nZr,nrs-Vs#O,n#O#P-[#P~,n#e-[O]#e#e-_PO~,n)X-gV$UWOr(krs-|s!^(k!^!_+U!_#o(k#o#p+U#p~(k)X.VZ$P&j$UW]#eOY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x#m/PZ$UW]#eOY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x#m/yR$UW]#eO!^%T!_#o%T#p~%T#m0XT$UWO!^.x!^!_,n!_#o.x#o#p,n#p~.x3]0mZ$UWOt%Ttu1`u!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`3]1g]$UW'o3TOt%Ttu1`u!Q%T!Q![1`![!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`7Z2k_$UW#zS']$y'g3SOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`[3q_$UW#zSOt%Ttu3ju}%T}!O3j!O!Q%T!Q![3j![!^%T!_!c%T!c!}3j!}#R%T#R#S3j#S#T%T#T#o3j#p$g%T$g~3j$O4wS#^#v$UWO!^%T!_!`5T!`#o%T#p~%T$O5[R$UW#o#vO!^%T!_#o%T#p~%T5b5lU'x5Y$UWOv%Tvw6Ow!^%T!_!`5T!`#o%T#p~%T$O6VS$UW#i#vO!^%T!_!`5T!`#o%T#p~%T)X6jZ$UW]#eOY6cYZ7]Zw6cwx*rx!^6c!^!_8T!_#O6c#O#P:T#P#o6c#o#p8T#p~6c&r7bV$UWOw7]wx*Px!^7]!^!_7w!_#o7]#o#p7w#p~7]&j7zROw7wwx*mx~7w)P8YV]#eOY8TYZ7wZw8Twx+px#O8T#O#P8o#P~8T)P8rROw8Twx8{x~8T)P9SU$P&j]#eOY9fZw9fwx-Vx#O9f#O#P9}#P~9f#e9kU]#eOY9fZw9fwx-Vx#O9f#O#P9}#P~9f#e:QPO~9f)X:YV$UWOw6cwx:ox!^6c!^!_8T!_#o6c#o#p8T#p~6c)X:xZ$P&j$UW]#eOY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k#m;rZ$UW]#eOY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k#m<jT$UWO!^;k!^!_9f!_#o;k#o#p9f#p~;k&i=QR!d&a$UWO!^%T!_#o%T#p~%Tk=bR!cc$UWO!^%T!_#o%T#p~%T7V=tU'^4V#_#v$UWOz%Tz{>W{!^%T!_!`5T!`#o%T#p~%T$O>_S#[#v$UWO!^%T!_!`5T!`#o%T#p~%T%w>rSj%o$UWO!^%T!_!`5T!`#o%T#p~%T&i?VR!R&a$UWO!^%T!_#o%T#p~%T7Z?gVu5^$UWO!O%T!O!P?|!P!Q%T!Q![@r![!^%T!_#o%T#p~%T!{@RT$UWO!O%T!O!P@b!P!^%T!_#o%T#p~%T!{@iR!Q!s$UWO!^%T!_#o%T#p~%T!{@yZ$UWk!sO!Q%T!Q![@r![!^%T!_!g%T!g!hAl!h#R%T#R#S@r#S#X%T#X#YAl#Y#o%T#p~%T!{AqZ$UWO{%T{|Bd|}%T}!OBd!O!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T!{BiV$UWO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T!{CVV$UWk!sO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T7ZCs`$UW#]#vOYDuYZ%TZzDuz{Jl{!PDu!P!Q!-e!Q!^Du!^!_Fx!_!`!.^!`!a!/]!a!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXD|[$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXEy_$UW}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%TPF}V}POYFxZ!PFx!P!QGd!Q!}Fx!}#OG{#O#PHh#P~FxPGiU}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGdPHOTOYG{Z#OG{#O#PH_#P#QFx#Q~G{PHbQOYG{Z~G{PHkQOYFxZ~FxXHvY$UWOYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~HqXIkV$UWOYHqYZ%TZ!^Hq!^!_G{!_#oHq#o#pG{#p~HqXJVV$UWOYDuYZ%TZ!^Du!^!_Fx!_#oDu#o#pFx#p~Du7ZJs^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q!,R!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7ZKtV$UWOzKoz{LZ{!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZL`X$UWOzKoz{LZ{!PKo!P!QL{!Q!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZMSR$UWU7RO!^%T!_#o%T#p~%T7RM`ROzM]z{Mi{~M]7RMlTOzM]z{Mi{!PM]!P!QM{!Q~M]7RNQOU7R7ZNX^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q! T!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7Z! ^_$UWU7R}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%T7R!!bY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!&x!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#VY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!#u!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#|UU7R}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGd7R!$cWOY!$`YZM]Zz!$`z{!${{#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%OYOY!$`YZM]Zz!$`z{!${{!P!$`!P!Q!%n!Q#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%sTU7ROYG{Z#OG{#O#PH_#P#QFx#Q~G{7R!&VTOY!$`YZM]Zz!$`z{!${{~!$`7R!&iTOY!!]YZM]Zz!!]z{!#Q{~!!]7R!&}_}POzM]z{Mi{#ZM]#Z#[!&x#[#]M]#]#^!&x#^#aM]#a#b!&x#b#gM]#g#h!&x#h#iM]#i#j!&x#j#mM]#m#n!&x#n~M]7Z!(R[$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!(|^$UWOY!'|YZKoZz!'|z{!(w{!P!'|!P!Q!)x!Q!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!*PY$UWU7ROYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~Hq7Z!*tX$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#o!'|#o#p!$`#p~!'|7Z!+fX$UWOYJlYZKoZzJlz{NQ{!^Jl!^!_!!]!_#oJl#o#p!!]#p~Jl7Z!,Yc$UW}POzKoz{LZ{!^Ko!^!_M]!_#ZKo#Z#[!,R#[#]Ko#]#^!,R#^#aKo#a#b!,R#b#gKo#g#h!,R#h#iKo#i#j!,R#j#mKo#m#n!,R#n#oKo#o#pM]#p~Ko7Z!-lV$UWT7ROY!-eYZ%TZ!^!-e!^!_!.R!_#o!-e#o#p!.R#p~!-e7R!.WQT7ROY!.RZ~!.R$P!.g[$UW#o#v}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Du]!/f[#wS$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Du!{!0cd$UWk!sO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#U%T#U#V!3X#V#X%T#X#YAl#Y#b%T#b#c!2w#c#d!4m#d#l%T#l#m!5{#m#o%T#p~%T!{!1x_$UWk!sO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#X%T#X#YAl#Y#b%T#b#c!2w#c#o%T#p~%T!{!3OR$UWk!sO!^%T!_#o%T#p~%T!{!3^W$UWO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#o%T#p~%T!{!3}Y$UWk!sO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#b%T#b#c!2w#c#o%T#p~%T!{!4rV$UWO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#o%T#p~%T!{!5`X$UWk!sO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#b%T#b#c!2w#c#o%T#p~%T!{!6QZ$UWO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#o%T#p~%T!{!6z]$UWk!sO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#b%T#b#c!2w#c#o%T#p~%T$u!7|R!]V$UW#m$fO!^%T!_#o%T#p~%T!q!8^R_!i$UWO!^%T!_#o%T#p~%T5w!8rR'bd!a/n#x&s'|P!P!Q!8{!^!_!9Q!_!`!9_W!9QO$WW#v!9VP#`#v!_!`!9Y#v!9_O#o#v#v!9dO#a#v$u!9kT!{$m$UWO!^%T!_!`'v!`!a!9z!a#o%T#p~%T$P!:RR#W#w$UWO!^%T!_#o%T#p~%T%V!:gT'a!R#a#v$RS$UWO!^%T!_!`!:v!`!a!;W!a#o%T#p~%T$O!:}R#a#v$UWO!^%T!_#o%T#p~%T$O!;_T#`#v$UWO!^%T!_!`5T!`!a!;n!a#o%T#p~%T$O!;uS#`#v$UWO!^%T!_!`5T!`#o%T#p~%T*a!<YV'p#{$UWO!O%T!O!P!<o!P!^%T!_!a%T!a!b!=P!b#o%T#p~%T*[!<vRv*S$UWO!^%T!_#o%T#p~%T$O!=WS$UW#j#vO!^%T!_!`5T!`#o%T#p~%T7V!=kRx6}$UWO!^%T!_#o%T#p~%Tk!={R!Oc$UWO!^%T!_#o%T#p~%T$O!>]S#g#v$UWO!^%T!_!`5T!`#o%T#p~%T$a!>pR$UW'f$XO!^%T!_#o%T#p~%T~!?OO!T~5b!?VT'w5Y$UWO!^%T!_!`5T!`#o%T#p#q!=P#q~%T6X!?oR!S5}nQ$UWO!^%T!_#o%T#p~%TX!@PR!kP$UWO!^%T!_#o%T#p~%T7Z!@gr$UW'Y7R#zS']$y'g3SOX%TXY%cYZ%TZ[%c[p%Tpq%cqt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`7Z!CO_$UW'Z7R#zS']$y'g3SOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`",
    tokenizers: [tsExtends, noSemicolon, incdecToken, template, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, insertSemicolon],
    topRules: {Script: [0, 7]},
    dialects: {jsx: 12107, ts: 12109},
    dynamicPrecedences: {"149": 1, "176": 1},
    specialized: [{term: 289, get: (value) => spec_identifier2[value] || -1}, {term: 299, get: (value) => spec_word[value] || -1}, {term: 63, get: (value) => spec_LessThan[value] || -1}],
    tokenPrec: 12130
  });

  // node_modules/@codemirror/lang-javascript/dist/index.js
  var snippets = [
    /* @__PURE__ */ snippetCompletion("function ${name}(${params}) {\n	${}\n}", {
      label: "function",
      detail: "definition",
      type: "keyword"
    }),
    /* @__PURE__ */ snippetCompletion("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}", {
      label: "for",
      detail: "loop",
      type: "keyword"
    }),
    /* @__PURE__ */ snippetCompletion("for (let ${name} of ${collection}) {\n	${}\n}", {
      label: "for",
      detail: "of loop",
      type: "keyword"
    }),
    /* @__PURE__ */ snippetCompletion("do {\n	${}\n} while (${})", {
      label: "do",
      detail: "loop",
      type: "keyword"
    }),
    /* @__PURE__ */ snippetCompletion("while (${}) {\n	${}\n}", {
      label: "while",
      detail: "loop",
      type: "keyword"
    }),
    /* @__PURE__ */ snippetCompletion("try {\n	${}\n} catch (${error}) {\n	${}\n}", {
      label: "try",
      detail: "/ catch block",
      type: "keyword"
    }),
    /* @__PURE__ */ snippetCompletion("if (${}) {\n	${}\n}", {
      label: "if",
      detail: "block",
      type: "keyword"
    }),
    /* @__PURE__ */ snippetCompletion("if (${}) {\n	${}\n} else {\n	${}\n}", {
      label: "if",
      detail: "/ else block",
      type: "keyword"
    }),
    /* @__PURE__ */ snippetCompletion("class ${name} {\n	constructor(${params}) {\n		${}\n	}\n}", {
      label: "class",
      detail: "definition",
      type: "keyword"
    }),
    /* @__PURE__ */ snippetCompletion('import {${names}} from "${module}"\n${}', {
      label: "import",
      detail: "named",
      type: "keyword"
    }),
    /* @__PURE__ */ snippetCompletion('import ${name} from "${module}"\n${}', {
      label: "import",
      detail: "default",
      type: "keyword"
    })
  ];
  var cache = /* @__PURE__ */ new NodeWeakMap();
  var ScopeNodes = /* @__PURE__ */ new Set([
    "Script",
    "Block",
    "FunctionExpression",
    "FunctionDeclaration",
    "ArrowFunction",
    "MethodDeclaration",
    "ForStatement"
  ]);
  function defID(type) {
    return (node, def) => {
      let id2 = node.node.getChild("VariableDefinition");
      if (id2)
        def(id2, type);
      return true;
    };
  }
  var functionContext = ["FunctionDeclaration"];
  var gatherCompletions = {
    FunctionDeclaration: /* @__PURE__ */ defID("function"),
    ClassDeclaration: /* @__PURE__ */ defID("class"),
    ClassExpression: () => true,
    EnumDeclaration: /* @__PURE__ */ defID("constant"),
    TypeAliasDeclaration: /* @__PURE__ */ defID("type"),
    NamespaceDeclaration: /* @__PURE__ */ defID("namespace"),
    VariableDefinition(node, def) {
      if (!node.matchContext(functionContext))
        def(node, "variable");
    },
    TypeDefinition(node, def) {
      def(node, "type");
    },
    __proto__: null
  };
  function getScope(doc2, node) {
    let cached = cache.get(node);
    if (cached)
      return cached;
    let completions = [], top2 = true;
    function def(node2, type) {
      let name2 = doc2.sliceString(node2.from, node2.to);
      completions.push({label: name2, type});
    }
    node.cursor(IterMode.IncludeAnonymous).iterate((node2) => {
      if (top2) {
        top2 = false;
      } else if (node2.name) {
        let gather = gatherCompletions[node2.name];
        if (gather && gather(node2, def) || ScopeNodes.has(node2.name))
          return false;
      } else if (node2.to - node2.from > 8192) {
        for (let c of getScope(doc2, node2.node))
          completions.push(c);
        return false;
      }
    });
    cache.set(node, completions);
    return completions;
  }
  var Identifier = /^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/;
  var dontComplete = [
    "TemplateString",
    "String",
    "RegExp",
    "LineComment",
    "BlockComment",
    "VariableDefinition",
    "TypeDefinition",
    "Label",
    "PropertyDefinition",
    "PropertyName",
    "PrivatePropertyDefinition",
    "PrivatePropertyName"
  ];
  function localCompletionSource(context) {
    let inner = syntaxTree(context.state).resolveInner(context.pos, -1);
    if (dontComplete.indexOf(inner.name) > -1)
      return null;
    let isWord = inner.name == "VariableName" || inner.to - inner.from < 20 && Identifier.test(context.state.sliceDoc(inner.from, inner.to));
    if (!isWord && !context.explicit)
      return null;
    let options = [];
    for (let pos = inner; pos; pos = pos.parent) {
      if (ScopeNodes.has(pos.name))
        options = options.concat(getScope(context.state.doc, pos));
    }
    return {
      options,
      from: isWord ? inner.from : context.pos,
      validFor: Identifier
    };
  }
  var javascriptLanguage = /* @__PURE__ */ LRLanguage.define({
    name: "javascript",
    parser: /* @__PURE__ */ parser4.configure({
      props: [
        /* @__PURE__ */ indentNodeProp.add({
          IfStatement: /* @__PURE__ */ continuedIndent({except: /^\s*({|else\b)/}),
          TryStatement: /* @__PURE__ */ continuedIndent({except: /^\s*({|catch\b|finally\b)/}),
          LabeledStatement: flatIndent,
          SwitchBody: (context) => {
            let after = context.textAfter, closed = /^\s*\}/.test(after), isCase = /^\s*(case|default)\b/.test(after);
            return context.baseIndent + (closed ? 0 : isCase ? 1 : 2) * context.unit;
          },
          Block: /* @__PURE__ */ delimitedIndent({closing: "}"}),
          ArrowFunction: (cx) => cx.baseIndent + cx.unit,
          "TemplateString BlockComment": () => null,
          "Statement Property": /* @__PURE__ */ continuedIndent({except: /^{/}),
          JSXElement(context) {
            let closed = /^\s*<\//.test(context.textAfter);
            return context.lineIndent(context.node.from) + (closed ? 0 : context.unit);
          },
          JSXEscape(context) {
            let closed = /\s*\}/.test(context.textAfter);
            return context.lineIndent(context.node.from) + (closed ? 0 : context.unit);
          },
          "JSXOpenTag JSXSelfClosingTag"(context) {
            return context.column(context.node.from) + context.unit;
          }
        }),
        /* @__PURE__ */ foldNodeProp.add({
          "Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression": foldInside,
          BlockComment(tree) {
            return {from: tree.from + 2, to: tree.to - 2};
          }
        })
      ]
    }),
    languageData: {
      closeBrackets: {brackets: ["(", "[", "{", "'", '"', "`"]},
      commentTokens: {line: "//", block: {open: "/*", close: "*/"}},
      indentOnInput: /^\s*(?:case |default:|\{|\}|<\/)$/,
      wordChars: "$"
    }
  });
  var typescriptLanguage = /* @__PURE__ */ javascriptLanguage.configure({dialect: "ts"}, "typescript");
  var jsxLanguage = /* @__PURE__ */ javascriptLanguage.configure({dialect: "jsx"});
  var tsxLanguage = /* @__PURE__ */ javascriptLanguage.configure({dialect: "jsx ts"}, "typescript");
  var keywords = /* @__PURE__ */ "break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map((kw) => ({label: kw, type: "keyword"}));
  function javascript(config = {}) {
    let lang = config.jsx ? config.typescript ? tsxLanguage : jsxLanguage : config.typescript ? typescriptLanguage : javascriptLanguage;
    return new LanguageSupport(lang, [
      javascriptLanguage.data.of({
        autocomplete: ifNotIn(dontComplete, completeFromList(snippets.concat(keywords)))
      }),
      javascriptLanguage.data.of({
        autocomplete: localCompletionSource
      }),
      config.jsx ? autoCloseTags : []
    ]);
  }
  function elementName(doc2, tree, max = doc2.length) {
    if (!tree)
      return "";
    let name2 = tree.getChild("JSXIdentifier");
    return name2 ? doc2.sliceString(name2.from, Math.min(name2.to, max)) : "";
  }
  var android2 = typeof navigator == "object" && /* @__PURE__ */ /Android\b/.test(navigator.userAgent);
  var autoCloseTags = /* @__PURE__ */ EditorView.inputHandler.of((view, from, to, text) => {
    if ((android2 ? view.composing : view.compositionStarted) || view.state.readOnly || from != to || text != ">" && text != "/" || !javascriptLanguage.isActiveAt(view.state, from, -1))
      return false;
    let {state} = view;
    let changes = state.changeByRange((range) => {
      var _a2, _b, _c;
      let {head} = range, around = syntaxTree(state).resolveInner(head, -1), name2;
      if (around.name == "JSXStartTag")
        around = around.parent;
      if (text == ">" && around.name == "JSXFragmentTag") {
        return {range: EditorSelection.cursor(head + 1), changes: {from: head, insert: `><>`}};
      } else if (text == ">" && around.name == "JSXIdentifier") {
        if (((_b = (_a2 = around.parent) === null || _a2 === void 0 ? void 0 : _a2.lastChild) === null || _b === void 0 ? void 0 : _b.name) != "JSXEndTag" && (name2 = elementName(state.doc, around.parent, head)))
          return {range: EditorSelection.cursor(head + 1), changes: {from: head, insert: `></${name2}>`}};
      } else if (text == "/" && around.name == "JSXFragmentTag") {
        let empty = around.parent, base2 = empty === null || empty === void 0 ? void 0 : empty.parent;
        if (empty.from == head - 1 && ((_c = base2.lastChild) === null || _c === void 0 ? void 0 : _c.name) != "JSXEndTag" && (name2 = elementName(state.doc, base2 === null || base2 === void 0 ? void 0 : base2.firstChild, head))) {
          let insert2 = `/${name2}>`;
          return {range: EditorSelection.cursor(head + insert2.length), changes: {from: head, insert: insert2}};
        }
      }
      return {range};
    });
    if (changes.changes.empty)
      return false;
    view.dispatch(changes, {userEvent: "input.type", scrollIntoView: true});
    return true;
  });

  // node_modules/@codemirror/lang-html/dist/index.js
  var Targets = ["_blank", "_self", "_top", "_parent"];
  var Charsets = ["ascii", "utf-8", "utf-16", "latin1", "latin1"];
  var Methods = ["get", "post", "put", "delete"];
  var Encs = ["application/x-www-form-urlencoded", "multipart/form-data", "text/plain"];
  var Bool = ["true", "false"];
  var S = {};
  var Tags = {
    a: {
      attrs: {
        href: null,
        ping: null,
        type: null,
        media: null,
        target: Targets,
        hreflang: null
      }
    },
    abbr: S,
    address: S,
    area: {
      attrs: {
        alt: null,
        coords: null,
        href: null,
        target: null,
        ping: null,
        media: null,
        hreflang: null,
        type: null,
        shape: ["default", "rect", "circle", "poly"]
      }
    },
    article: S,
    aside: S,
    audio: {
      attrs: {
        src: null,
        mediagroup: null,
        crossorigin: ["anonymous", "use-credentials"],
        preload: ["none", "metadata", "auto"],
        autoplay: ["autoplay"],
        loop: ["loop"],
        controls: ["controls"]
      }
    },
    b: S,
    base: {attrs: {href: null, target: Targets}},
    bdi: S,
    bdo: S,
    blockquote: {attrs: {cite: null}},
    body: S,
    br: S,
    button: {
      attrs: {
        form: null,
        formaction: null,
        name: null,
        value: null,
        autofocus: ["autofocus"],
        disabled: ["autofocus"],
        formenctype: Encs,
        formmethod: Methods,
        formnovalidate: ["novalidate"],
        formtarget: Targets,
        type: ["submit", "reset", "button"]
      }
    },
    canvas: {attrs: {width: null, height: null}},
    caption: S,
    center: S,
    cite: S,
    code: S,
    col: {attrs: {span: null}},
    colgroup: {attrs: {span: null}},
    command: {
      attrs: {
        type: ["command", "checkbox", "radio"],
        label: null,
        icon: null,
        radiogroup: null,
        command: null,
        title: null,
        disabled: ["disabled"],
        checked: ["checked"]
      }
    },
    data: {attrs: {value: null}},
    datagrid: {attrs: {disabled: ["disabled"], multiple: ["multiple"]}},
    datalist: {attrs: {data: null}},
    dd: S,
    del: {attrs: {cite: null, datetime: null}},
    details: {attrs: {open: ["open"]}},
    dfn: S,
    div: S,
    dl: S,
    dt: S,
    em: S,
    embed: {attrs: {src: null, type: null, width: null, height: null}},
    eventsource: {attrs: {src: null}},
    fieldset: {attrs: {disabled: ["disabled"], form: null, name: null}},
    figcaption: S,
    figure: S,
    footer: S,
    form: {
      attrs: {
        action: null,
        name: null,
        "accept-charset": Charsets,
        autocomplete: ["on", "off"],
        enctype: Encs,
        method: Methods,
        novalidate: ["novalidate"],
        target: Targets
      }
    },
    h1: S,
    h2: S,
    h3: S,
    h4: S,
    h5: S,
    h6: S,
    head: {
      children: ["title", "base", "link", "style", "meta", "script", "noscript", "command"]
    },
    header: S,
    hgroup: S,
    hr: S,
    html: {
      attrs: {manifest: null}
    },
    i: S,
    iframe: {
      attrs: {
        src: null,
        srcdoc: null,
        name: null,
        width: null,
        height: null,
        sandbox: ["allow-top-navigation", "allow-same-origin", "allow-forms", "allow-scripts"],
        seamless: ["seamless"]
      }
    },
    img: {
      attrs: {
        alt: null,
        src: null,
        ismap: null,
        usemap: null,
        width: null,
        height: null,
        crossorigin: ["anonymous", "use-credentials"]
      }
    },
    input: {
      attrs: {
        alt: null,
        dirname: null,
        form: null,
        formaction: null,
        height: null,
        list: null,
        max: null,
        maxlength: null,
        min: null,
        name: null,
        pattern: null,
        placeholder: null,
        size: null,
        src: null,
        step: null,
        value: null,
        width: null,
        accept: ["audio/*", "video/*", "image/*"],
        autocomplete: ["on", "off"],
        autofocus: ["autofocus"],
        checked: ["checked"],
        disabled: ["disabled"],
        formenctype: Encs,
        formmethod: Methods,
        formnovalidate: ["novalidate"],
        formtarget: Targets,
        multiple: ["multiple"],
        readonly: ["readonly"],
        required: ["required"],
        type: [
          "hidden",
          "text",
          "search",
          "tel",
          "url",
          "email",
          "password",
          "datetime",
          "date",
          "month",
          "week",
          "time",
          "datetime-local",
          "number",
          "range",
          "color",
          "checkbox",
          "radio",
          "file",
          "submit",
          "image",
          "reset",
          "button"
        ]
      }
    },
    ins: {attrs: {cite: null, datetime: null}},
    kbd: S,
    keygen: {
      attrs: {
        challenge: null,
        form: null,
        name: null,
        autofocus: ["autofocus"],
        disabled: ["disabled"],
        keytype: ["RSA"]
      }
    },
    label: {attrs: {for: null, form: null}},
    legend: S,
    li: {attrs: {value: null}},
    link: {
      attrs: {
        href: null,
        type: null,
        hreflang: null,
        media: null,
        sizes: ["all", "16x16", "16x16 32x32", "16x16 32x32 64x64"]
      }
    },
    map: {attrs: {name: null}},
    mark: S,
    menu: {attrs: {label: null, type: ["list", "context", "toolbar"]}},
    meta: {
      attrs: {
        content: null,
        charset: Charsets,
        name: ["viewport", "application-name", "author", "description", "generator", "keywords"],
        "http-equiv": ["content-language", "content-type", "default-style", "refresh"]
      }
    },
    meter: {attrs: {value: null, min: null, low: null, high: null, max: null, optimum: null}},
    nav: S,
    noscript: S,
    object: {
      attrs: {
        data: null,
        type: null,
        name: null,
        usemap: null,
        form: null,
        width: null,
        height: null,
        typemustmatch: ["typemustmatch"]
      }
    },
    ol: {
      attrs: {reversed: ["reversed"], start: null, type: ["1", "a", "A", "i", "I"]},
      children: ["li", "script", "template", "ul", "ol"]
    },
    optgroup: {attrs: {disabled: ["disabled"], label: null}},
    option: {attrs: {disabled: ["disabled"], label: null, selected: ["selected"], value: null}},
    output: {attrs: {for: null, form: null, name: null}},
    p: S,
    param: {attrs: {name: null, value: null}},
    pre: S,
    progress: {attrs: {value: null, max: null}},
    q: {attrs: {cite: null}},
    rp: S,
    rt: S,
    ruby: S,
    samp: S,
    script: {
      attrs: {
        type: ["text/javascript"],
        src: null,
        async: ["async"],
        defer: ["defer"],
        charset: Charsets
      }
    },
    section: S,
    select: {
      attrs: {
        form: null,
        name: null,
        size: null,
        autofocus: ["autofocus"],
        disabled: ["disabled"],
        multiple: ["multiple"]
      }
    },
    slot: {attrs: {name: null}},
    small: S,
    source: {attrs: {src: null, type: null, media: null}},
    span: S,
    strong: S,
    style: {
      attrs: {
        type: ["text/css"],
        media: null,
        scoped: null
      }
    },
    sub: S,
    summary: S,
    sup: S,
    table: S,
    tbody: S,
    td: {attrs: {colspan: null, rowspan: null, headers: null}},
    template: S,
    textarea: {
      attrs: {
        dirname: null,
        form: null,
        maxlength: null,
        name: null,
        placeholder: null,
        rows: null,
        cols: null,
        autofocus: ["autofocus"],
        disabled: ["disabled"],
        readonly: ["readonly"],
        required: ["required"],
        wrap: ["soft", "hard"]
      }
    },
    tfoot: S,
    th: {attrs: {colspan: null, rowspan: null, headers: null, scope: ["row", "col", "rowgroup", "colgroup"]}},
    thead: S,
    time: {attrs: {datetime: null}},
    title: S,
    tr: S,
    track: {
      attrs: {
        src: null,
        label: null,
        default: null,
        kind: ["subtitles", "captions", "descriptions", "chapters", "metadata"],
        srclang: null
      }
    },
    ul: {children: ["li", "script", "template", "ul", "ol"]},
    var: S,
    video: {
      attrs: {
        src: null,
        poster: null,
        width: null,
        height: null,
        crossorigin: ["anonymous", "use-credentials"],
        preload: ["auto", "metadata", "none"],
        autoplay: ["autoplay"],
        mediagroup: ["movie"],
        muted: ["muted"],
        controls: ["controls"]
      }
    },
    wbr: S
  };
  var GlobalAttrs = {
    accesskey: null,
    class: null,
    contenteditable: Bool,
    contextmenu: null,
    dir: ["ltr", "rtl", "auto"],
    draggable: ["true", "false", "auto"],
    dropzone: ["copy", "move", "link", "string:", "file:"],
    hidden: ["hidden"],
    id: null,
    inert: ["inert"],
    itemid: null,
    itemprop: null,
    itemref: null,
    itemscope: ["itemscope"],
    itemtype: null,
    lang: ["ar", "bn", "de", "en-GB", "en-US", "es", "fr", "hi", "id", "ja", "pa", "pt", "ru", "tr", "zh"],
    spellcheck: Bool,
    autocorrect: Bool,
    autocapitalize: Bool,
    style: null,
    tabindex: null,
    title: null,
    translate: ["yes", "no"],
    onclick: null,
    rel: ["stylesheet", "alternate", "author", "bookmark", "help", "license", "next", "nofollow", "noreferrer", "prefetch", "prev", "search", "tag"],
    role: /* @__PURE__ */ "alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),
    "aria-activedescendant": null,
    "aria-atomic": Bool,
    "aria-autocomplete": ["inline", "list", "both", "none"],
    "aria-busy": Bool,
    "aria-checked": ["true", "false", "mixed", "undefined"],
    "aria-controls": null,
    "aria-describedby": null,
    "aria-disabled": Bool,
    "aria-dropeffect": null,
    "aria-expanded": ["true", "false", "undefined"],
    "aria-flowto": null,
    "aria-grabbed": ["true", "false", "undefined"],
    "aria-haspopup": Bool,
    "aria-hidden": Bool,
    "aria-invalid": ["true", "false", "grammar", "spelling"],
    "aria-label": null,
    "aria-labelledby": null,
    "aria-level": null,
    "aria-live": ["off", "polite", "assertive"],
    "aria-multiline": Bool,
    "aria-multiselectable": Bool,
    "aria-owns": null,
    "aria-posinset": null,
    "aria-pressed": ["true", "false", "mixed", "undefined"],
    "aria-readonly": Bool,
    "aria-relevant": null,
    "aria-required": Bool,
    "aria-selected": ["true", "false", "undefined"],
    "aria-setsize": null,
    "aria-sort": ["ascending", "descending", "none", "other"],
    "aria-valuemax": null,
    "aria-valuemin": null,
    "aria-valuenow": null,
    "aria-valuetext": null
  };
  var Schema = class {
    constructor(extraTags, extraAttrs) {
      this.tags = Object.assign(Object.assign({}, Tags), extraTags);
      this.globalAttrs = Object.assign(Object.assign({}, GlobalAttrs), extraAttrs);
      this.allTags = Object.keys(this.tags);
      this.globalAttrNames = Object.keys(this.globalAttrs);
    }
  };
  Schema.default = /* @__PURE__ */ new Schema();
  function elementName2(doc2, tree, max = doc2.length) {
    if (!tree)
      return "";
    let tag = tree.firstChild;
    let name2 = tag && tag.getChild("TagName");
    return name2 ? doc2.sliceString(name2.from, Math.min(name2.to, max)) : "";
  }
  function findParentElement(tree, skip = false) {
    for (let cur2 = tree.parent; cur2; cur2 = cur2.parent)
      if (cur2.name == "Element") {
        if (skip)
          skip = false;
        else
          return cur2;
      }
    return null;
  }
  function allowedChildren(doc2, tree, schema) {
    let parentInfo = schema.tags[elementName2(doc2, findParentElement(tree, true))];
    return (parentInfo === null || parentInfo === void 0 ? void 0 : parentInfo.children) || schema.allTags;
  }
  function openTags(doc2, tree) {
    let open = [];
    for (let parent = tree; parent = findParentElement(parent); ) {
      let tagName2 = elementName2(doc2, parent);
      if (tagName2 && parent.lastChild.name == "CloseTag")
        break;
      if (tagName2 && open.indexOf(tagName2) < 0 && (tree.name == "EndTag" || tree.from >= parent.firstChild.to))
        open.push(tagName2);
    }
    return open;
  }
  var identifier3 = /^[:\-\.\w\u00b7-\uffff]*$/;
  function completeTag(state, schema, tree, from, to) {
    let end = /\s*>/.test(state.sliceDoc(to, to + 5)) ? "" : ">";
    return {
      from,
      to,
      options: allowedChildren(state.doc, tree, schema).map((tagName2) => ({label: tagName2, type: "type"})).concat(openTags(state.doc, tree).map((tag, i) => ({
        label: "/" + tag,
        apply: "/" + tag + end,
        type: "type",
        boost: 99 - i
      }))),
      validFor: /^\/?[:\-\.\w\u00b7-\uffff]*$/
    };
  }
  function completeCloseTag(state, tree, from, to) {
    let end = /\s*>/.test(state.sliceDoc(to, to + 5)) ? "" : ">";
    return {
      from,
      to,
      options: openTags(state.doc, tree).map((tag, i) => ({label: tag, apply: tag + end, type: "type", boost: 99 - i})),
      validFor: identifier3
    };
  }
  function completeStartTag(state, schema, tree, pos) {
    let options = [], level = 0;
    for (let tagName2 of allowedChildren(state.doc, tree, schema))
      options.push({label: "<" + tagName2, type: "type"});
    for (let open of openTags(state.doc, tree))
      options.push({label: "</" + open + ">", type: "type", boost: 99 - level++});
    return {from: pos, to: pos, options, validFor: /^<\/?[:\-\.\w\u00b7-\uffff]*$/};
  }
  function completeAttrName(state, schema, tree, from, to) {
    let elt2 = findParentElement(tree), info = elt2 ? schema.tags[elementName2(state.doc, elt2)] : null;
    let names = info && info.attrs ? Object.keys(info.attrs).concat(schema.globalAttrNames) : schema.globalAttrNames;
    return {
      from,
      to,
      options: names.map((attrName2) => ({label: attrName2, type: "property"})),
      validFor: identifier3
    };
  }
  function completeAttrValue(state, schema, tree, from, to) {
    var _a2;
    let nameNode = (_a2 = tree.parent) === null || _a2 === void 0 ? void 0 : _a2.getChild("AttributeName");
    let options = [], token = void 0;
    if (nameNode) {
      let attrName2 = state.sliceDoc(nameNode.from, nameNode.to);
      let attrs = schema.globalAttrs[attrName2];
      if (!attrs) {
        let elt2 = findParentElement(tree), info = elt2 ? schema.tags[elementName2(state.doc, elt2)] : null;
        attrs = (info === null || info === void 0 ? void 0 : info.attrs) && info.attrs[attrName2];
      }
      if (attrs) {
        let base2 = state.sliceDoc(from, to).toLowerCase(), quoteStart = '"', quoteEnd = '"';
        if (/^['"]/.test(base2)) {
          token = base2[0] == '"' ? /^[^"]*$/ : /^[^']*$/;
          quoteStart = "";
          quoteEnd = state.sliceDoc(to, to + 1) == base2[0] ? "" : base2[0];
          base2 = base2.slice(1);
          from++;
        } else {
          token = /^[^\s<>='"]*$/;
        }
        for (let value of attrs)
          options.push({label: value, apply: quoteStart + value + quoteEnd, type: "constant"});
      }
    }
    return {from, to, options, validFor: token};
  }
  function htmlCompletionFor(schema, context) {
    let {state, pos} = context, around = syntaxTree(state).resolveInner(pos), tree = around.resolve(pos, -1);
    for (let scan = pos, before; around == tree && (before = tree.childBefore(scan)); ) {
      let last = before.lastChild;
      if (!last || !last.type.isError || last.from < last.to)
        break;
      around = tree = before;
      scan = last.from;
    }
    if (tree.name == "TagName") {
      return tree.parent && /CloseTag$/.test(tree.parent.name) ? completeCloseTag(state, tree, tree.from, pos) : completeTag(state, schema, tree, tree.from, pos);
    } else if (tree.name == "StartTag") {
      return completeTag(state, schema, tree, pos, pos);
    } else if (tree.name == "StartCloseTag" || tree.name == "IncompleteCloseTag") {
      return completeCloseTag(state, tree, pos, pos);
    } else if (context.explicit && (tree.name == "OpenTag" || tree.name == "SelfClosingTag") || tree.name == "AttributeName") {
      return completeAttrName(state, schema, tree, tree.name == "AttributeName" ? tree.from : pos, pos);
    } else if (tree.name == "Is" || tree.name == "AttributeValue" || tree.name == "UnquotedAttributeValue") {
      return completeAttrValue(state, schema, tree, tree.name == "Is" ? pos : tree.from, pos);
    } else if (context.explicit && (around.name == "Element" || around.name == "Text" || around.name == "Document")) {
      return completeStartTag(state, schema, tree, pos);
    } else {
      return null;
    }
  }
  function htmlCompletionSourceWith(config) {
    let {extraTags, extraGlobalAttributes: extraAttrs} = config;
    let schema = extraAttrs || extraTags ? new Schema(extraTags, extraAttrs) : Schema.default;
    return (context) => htmlCompletionFor(schema, context);
  }
  var htmlLanguage = /* @__PURE__ */ LRLanguage.define({
    name: "html",
    parser: /* @__PURE__ */ parser3.configure({
      props: [
        /* @__PURE__ */ indentNodeProp.add({
          Element(context) {
            let after = /^(\s*)(<\/)?/.exec(context.textAfter);
            if (context.node.to <= context.pos + after[0].length)
              return context.continue();
            return context.lineIndent(context.node.from) + (after[2] ? 0 : context.unit);
          },
          "OpenTag CloseTag SelfClosingTag"(context) {
            return context.column(context.node.from) + context.unit;
          },
          Document(context) {
            if (context.pos + /\s*/.exec(context.textAfter)[0].length < context.node.to)
              return context.continue();
            let endElt = null, close;
            for (let cur2 = context.node; ; ) {
              let last = cur2.lastChild;
              if (!last || last.name != "Element" || last.to != cur2.to)
                break;
              endElt = cur2 = last;
            }
            if (endElt && !((close = endElt.lastChild) && (close.name == "CloseTag" || close.name == "SelfClosingTag")))
              return context.lineIndent(endElt.from) + context.unit;
            return null;
          }
        }),
        /* @__PURE__ */ foldNodeProp.add({
          Element(node) {
            let first = node.firstChild, last = node.lastChild;
            if (!first || first.name != "OpenTag")
              return null;
            return {from: first.to, to: last.name == "CloseTag" ? last.from : node.to};
          }
        })
      ],
      wrap: /* @__PURE__ */ configureNesting([
        {
          tag: "script",
          attrs: (attrs) => attrs.type == "text/typescript" || attrs.lang == "ts",
          parser: typescriptLanguage.parser
        },
        {
          tag: "script",
          attrs: (attrs) => attrs.type == "text/jsx",
          parser: jsxLanguage.parser
        },
        {
          tag: "script",
          attrs: (attrs) => attrs.type == "text/typescript-jsx",
          parser: tsxLanguage.parser
        },
        {
          tag: "script",
          attrs(attrs) {
            return !attrs.type || /^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(attrs.type);
          },
          parser: javascriptLanguage.parser
        },
        {
          tag: "style",
          attrs(attrs) {
            return (!attrs.lang || attrs.lang == "css") && (!attrs.type || /^(text\/)?(x-)?(stylesheet|css)$/i.test(attrs.type));
          },
          parser: cssLanguage.parser
        }
      ])
    }),
    languageData: {
      commentTokens: {block: {open: "<!--", close: "-->"}},
      indentOnInput: /^\s*<\/\w+\W$/,
      wordChars: "-._"
    }
  });
  function html(config = {}) {
    let lang = htmlLanguage;
    if (config.matchClosingTags === false)
      lang = lang.configure({dialect: "noMatch"});
    return new LanguageSupport(lang, [
      htmlLanguage.data.of({autocomplete: htmlCompletionSourceWith(config)}),
      config.autoCloseTags !== false ? autoCloseTags2 : [],
      javascript().support,
      css().support
    ]);
  }
  var autoCloseTags2 = /* @__PURE__ */ EditorView.inputHandler.of((view, from, to, text) => {
    if (view.composing || view.state.readOnly || from != to || text != ">" && text != "/" || !htmlLanguage.isActiveAt(view.state, from, -1))
      return false;
    let {state} = view;
    let changes = state.changeByRange((range) => {
      var _a2, _b, _c;
      let {head} = range, around = syntaxTree(state).resolveInner(head, -1), name2;
      if (around.name == "TagName" || around.name == "StartTag")
        around = around.parent;
      if (text == ">" && around.name == "OpenTag") {
        if (((_b = (_a2 = around.parent) === null || _a2 === void 0 ? void 0 : _a2.lastChild) === null || _b === void 0 ? void 0 : _b.name) != "CloseTag" && (name2 = elementName2(state.doc, around.parent, head))) {
          let hasRightBracket = view.state.doc.sliceString(head, head + 1) === ">";
          let insert2 = `${hasRightBracket ? "" : ">"}</${name2}>`;
          return {range: EditorSelection.cursor(head + 1), changes: {from: head + (hasRightBracket ? 1 : 0), insert: insert2}};
        }
      } else if (text == "/" && around.name == "OpenTag") {
        let empty = around.parent, base2 = empty === null || empty === void 0 ? void 0 : empty.parent;
        if (empty.from == head - 1 && ((_c = base2.lastChild) === null || _c === void 0 ? void 0 : _c.name) != "CloseTag" && (name2 = elementName2(state.doc, base2, head))) {
          let hasRightBracket = view.state.doc.sliceString(head, head + 1) === ">";
          let insert2 = `/${name2}${hasRightBracket ? "" : ">"}`;
          let pos = head + insert2.length + (hasRightBracket ? 1 : 0);
          return {range: EditorSelection.cursor(pos), changes: {from: head, insert: insert2}};
        }
      }
      return {range};
    });
    if (changes.changes.empty)
      return false;
    view.dispatch(changes, {userEvent: "input.type", scrollIntoView: true});
    return true;
  });

  // node_modules/@lezer/xml/dist/index.es.js
  var StartTag2 = 1;
  var StartCloseTag2 = 2;
  var MissingCloseTag = 3;
  var mismatchedStartCloseTag = 4;
  var incompleteStartCloseTag = 5;
  var commentContent$12 = 35;
  var piContent$1 = 36;
  var cdataContent$1 = 37;
  var Element2 = 11;
  var OpenTag2 = 13;
  function nameChar2(ch) {
    return ch == 45 || ch == 46 || ch == 58 || ch >= 65 && ch <= 90 || ch == 95 || ch >= 97 && ch <= 122 || ch >= 161;
  }
  function isSpace2(ch) {
    return ch == 9 || ch == 10 || ch == 13 || ch == 32;
  }
  var cachedName2 = null;
  var cachedInput2 = null;
  var cachedPos2 = 0;
  function tagNameAfter2(input, offset) {
    let pos = input.pos + offset;
    if (cachedInput2 == input && cachedPos2 == pos)
      return cachedName2;
    while (isSpace2(input.peek(offset)))
      offset++;
    let name2 = "";
    for (; ; ) {
      let next = input.peek(offset);
      if (!nameChar2(next))
        break;
      name2 += String.fromCharCode(next);
      offset++;
    }
    cachedInput2 = input;
    cachedPos2 = pos;
    return cachedName2 = name2 || null;
  }
  function ElementContext2(name2, parent) {
    this.name = name2;
    this.parent = parent;
    this.hash = parent ? parent.hash : 0;
    for (let i = 0; i < name2.length; i++)
      this.hash += (this.hash << 4) + name2.charCodeAt(i) + (name2.charCodeAt(i) << 8);
  }
  var elementContext2 = new ContextTracker({
    start: null,
    shift(context, term, stack, input) {
      return term == StartTag2 ? new ElementContext2(tagNameAfter2(input, 1) || "", context) : context;
    },
    reduce(context, term) {
      return term == Element2 && context ? context.parent : context;
    },
    reuse(context, node, _stack, input) {
      let type = node.type.id;
      return type == StartTag2 || type == OpenTag2 ? new ElementContext2(tagNameAfter2(input, 1) || "", context) : context;
    },
    hash(context) {
      return context ? context.hash : 0;
    },
    strict: false
  });
  var startTag = new ExternalTokenizer((input, stack) => {
    if (input.next != 60)
      return;
    input.advance();
    if (input.next == 47) {
      input.advance();
      let name2 = tagNameAfter2(input, 0);
      if (!name2)
        return input.acceptToken(incompleteStartCloseTag);
      if (stack.context && name2 == stack.context.name)
        return input.acceptToken(StartCloseTag2);
      for (let cx = stack.context; cx; cx = cx.parent)
        if (cx.name == name2)
          return input.acceptToken(MissingCloseTag, -2);
      input.acceptToken(mismatchedStartCloseTag);
    } else if (input.next != 33 && input.next != 63) {
      return input.acceptToken(StartTag2);
    }
  }, {contextual: true});
  function scanTo(type, end) {
    return new ExternalTokenizer((input) => {
      for (let endPos = 0, len = 0; ; len++) {
        if (input.next < 0) {
          if (len)
            input.acceptToken(type);
          break;
        }
        if (input.next == end.charCodeAt(endPos)) {
          endPos++;
          if (endPos == end.length) {
            if (len > end.length)
              input.acceptToken(type, 1 - end.length);
            break;
          }
        } else {
          endPos = input.next == end.charCodeAt(0) ? 1 : 0;
        }
        input.advance();
      }
    });
  }
  var commentContent2 = scanTo(commentContent$12, "-->");
  var piContent = scanTo(piContent$1, "?>");
  var cdataContent = scanTo(cdataContent$1, "]]>");
  var xmlHighlighting = styleTags({
    Text: tags.content,
    "StartTag StartCloseTag EndTag SelfCloseEndTag": tags.angleBracket,
    TagName: tags.tagName,
    "MismatchedCloseTag/Tagname": [tags.tagName, tags.invalid],
    AttributeName: tags.attributeName,
    AttributeValue: tags.attributeValue,
    Is: tags.definitionOperator,
    "EntityReference CharacterReference": tags.character,
    Comment: tags.blockComment,
    ProcessingInst: tags.processingInstruction,
    DoctypeDecl: tags.documentMeta,
    Cdata: tags.special(tags.string)
  });
  var parser5 = LRParser.deserialize({
    version: 14,
    states: ",SOQOaOOOrOxO'#CfOzOpO'#CiO!tOaO'#CgOOOP'#Cg'#CgO!{OrO'#CrO#TOtO'#CsO#]OpO'#CtOOOP'#DS'#DSOOOP'#Cv'#CvQQOaOOOOOW'#Cw'#CwO#eOxO,59QOOOP,59Q,59QOOOO'#Cx'#CxO#mOpO,59TO#uO!bO,59TOOOP'#C{'#C{O$TOaO,59RO$[OpO'#CoOOOP,59R,59ROOOQ'#C|'#C|O$dOrO,59^OOOP,59^,59^OOOS'#C}'#C}O$lOtO,59_OOOP,59_,59_O$tOpO,59`O$|OpO,59`OOOP-E6t-E6tOOOW-E6u-E6uOOOP1G.l1G.lOOOO-E6v-E6vO%UO!bO1G.oO%UO!bO1G.oO%dOpO'#CkO%lO!bO'#CyO%zO!bO1G.oOOOP1G.o1G.oOOOP1G.w1G.wOOOP-E6y-E6yOOOP1G.m1G.mO&VOpO,59ZO&_OpO,59ZOOOQ-E6z-E6zOOOP1G.x1G.xOOOS-E6{-E6{OOOP1G.y1G.yO&gOpO1G.zO&gOpO1G.zOOOP1G.z1G.zO&oO!bO7+$ZO&}O!bO7+$ZOOOP7+$Z7+$ZOOOP7+$c7+$cO'YOpO,59VO'bOpO,59VO'jO!bO,59eOOOO-E6w-E6wO'xOpO1G.uO'xOpO1G.uOOOP1G.u1G.uO(QOpO7+$fOOOP7+$f7+$fO(YO!bO<<GuOOOP<<Gu<<GuOOOP<<G}<<G}O'bOpO1G.qO'bOpO1G.qO(eO#tO'#CnOOOO1G.q1G.qO(sOpO7+$aOOOP7+$a7+$aOOOP<<HQ<<HQOOOPAN=aAN=aOOOPAN=iAN=iO'bOpO7+$]OOOO7+$]7+$]OOOO'#Cz'#CzO({O#tO,59YOOOO,59Y,59YOOOP<<G{<<G{OOOO<<Gw<<GwOOOO-E6x-E6xOOOO1G.t1G.t",
    stateData: ")Z~OPQOSVOTWOVWOWWOXWOiXOxPO}TO!PUO~OuZOw]O~O^`Oy^O~OPQOQcOSVOTWOVWOWWOXWOxPO}TO!PUO~ORdO~P!SOseO|gO~OthO!OjO~O^lOy^O~OuZOwoO~O^qOy^O~O[vO`sOdwOy^O~ORyO~P!SO^{Oy^O~OseO|}O~OthO!O!PO~O^!QOy^O~O[!SOy^O~O[!VO`sOd!WOy^O~Oa!YOy^O~Oy^O[mX`mXdmX~O[!VO`sOd!WO~O^!]Oy^O~O[!_Oy^O~O[!aOy^O~O[!cO`sOd!dOy^O~O[!cO`sOd!dO~Oa!eOy^O~Oy^Oz!gO~Oy^O[ma`madma~O[!jOy^O~O[!kOy^O~O[!lO`sOd!mO~OW!pOX!pOz!rO{!pO~O[!sOy^O~OW!pOX!pOz!vO{!pO~O",
    goto: "%[wPPPPPPPPPPxxP!OP!UPP!_!iP!oxxxP!u!{#R$Z$j$p$v$|PPPP%SXWORYbXRORYb_t`qru!T!U!bQ!h!YS!o!e!fR!t!nQdRRybXSORYbQYORmYQ[PRn[Q_QQkVjp_krz!R!T!X!Z!^!`!f!i!nQr`QzcQ!RlQ!TqQ!XsQ!ZtQ!^{Q!`!QQ!f!YQ!i!]R!n!eQu`S!UqrU![u!U!bR!b!TQ!q!gR!u!qQbRRxbQfTR|fQiUR!OiSXOYTaRb",
    nodeNames: "\u26A0 StartTag StartCloseTag MissingCloseTag StartCloseTag StartCloseTag Document Text EntityReference CharacterReference Cdata Element EndTag OpenTag TagName Attribute AttributeName Is AttributeValue CloseTag SelfCloseEndTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag DoctypeDecl",
    maxTerm: 47,
    context: elementContext2,
    nodeProps: [
      ["closedBy", 1, "SelfCloseEndTag EndTag", 13, "CloseTag MissingCloseTag"],
      ["openedBy", 12, "StartTag StartCloseTag", 19, "OpenTag", 20, "StartTag"]
    ],
    propSources: [xmlHighlighting],
    skippedNodes: [0],
    repeatNodeCount: 8,
    tokenData: "Az~R!WOX$kXY%rYZ%rZ]$k]^%r^p$kpq%rqr$krs&tsv$kvw'Uw}$k}!O(q!O!P$k!P!Q*n!Q![$k![!]+z!]!^$k!^!_/s!_!`=i!`!a>U!a!b>q!b!c$k!c!}+z!}#P$k#P#Q?}#Q#R$k#R#S+z#S#T$k#T#o+z#o%W$k%W%o+z%o%p$k%p&a+z&a&b$k&b1p+z1p4U$k4U4d+z4d4e$k4e$IS+z$IS$I`$k$I`$Ib+z$Ib$Kh$k$Kh%#t+z%#t&/x$k&/x&Et+z&Et&FV$k&FV;'S+z;'S;:j/S;:j?&r$k?&r?Ah+z?Ah?BY$k?BY?Mn+z?Mn~$kX$rUVP{WOr$krs%Usv$kw!^$k!^!_%d!_~$kP%ZRVPOv%Uw!^%U!_~%UW%iR{WOr%dsv%dw~%d_%{]VP{WyUOX$kXY%rYZ%rZ]$k]^%r^p$kpq%rqr$krs%Usv$kw!^$k!^!_%d!_~$kZ&{RzYVPOv%Uw!^%U!_~%U~'XTOp'hqs'hst(Pt!]'h!^~'h~'kTOp'hqs'ht!]'h!]!^'z!^~'h~(POW~~(SROp(]q!](]!^~(]~(`SOp(]q!](]!]!^(l!^~(]~(qOX~Z(xWVP{WOr$krs%Usv$kw}$k}!O)b!O!^$k!^!_%d!_~$kZ)iWVP{WOr$krs%Usv$kw!^$k!^!_%d!_!`$k!`!a*R!a~$kZ*[U|QVP{WOr$krs%Usv$kw!^$k!^!_%d!_~$k]*uWVP{WOr$krs%Usv$kw!^$k!^!_%d!_!`$k!`!a+_!a~$k]+hUdSVP{WOr$krs%Usv$kw!^$k!^!_%d!_~$k_,V}`S^QVP{WOr$krs%Usv$kw}$k}!O+z!O!P+z!P!Q$k!Q![+z![!]+z!]!^$k!^!_%d!_!c$k!c!}+z!}#R$k#R#S+z#S#T$k#T#o+z#o$}$k$}%O+z%O%W$k%W%o+z%o%p$k%p&a+z&a&b$k&b1p+z1p4U+z4U4d+z4d4e$k4e$IS+z$IS$I`$k$I`$Ib+z$Ib$Je$k$Je$Jg+z$Jg$Kh$k$Kh%#t+z%#t&/x$k&/x&Et+z&Et&FV$k&FV;'S+z;'S;:j/S;:j?&r$k?&r?Ah+z?Ah?BY$k?BY?Mn+z?Mn~$k_/ZWVP{WOr$krs%Usv$kw!^$k!^!_%d!_;=`$k;=`<%l+z<%l~$kX/xU{WOq%dqr0[sv%dw!a%d!a!b=X!b~%dX0aZ{WOr%dsv%dw}%d}!O1S!O!f%d!f!g1x!g!}%d!}#O5s#O#W%d#W#X:k#X~%dX1XT{WOr%dsv%dw}%d}!O1h!O~%dX1oR}P{WOr%dsv%dw~%dX1}T{WOr%dsv%dw!q%d!q!r2^!r~%dX2cT{WOr%dsv%dw!e%d!e!f2r!f~%dX2wT{WOr%dsv%dw!v%d!v!w3W!w~%dX3]T{WOr%dsv%dw!{%d!{!|3l!|~%dX3qT{WOr%dsv%dw!r%d!r!s4Q!s~%dX4VT{WOr%dsv%dw!g%d!g!h4f!h~%dX4kV{WOr4frs5Qsv4fvw5Qw!`4f!`!a5c!a~4fP5TRO!`5Q!`!a5^!a~5QP5cOiPX5jRiP{WOr%dsv%dw~%dX5xV{WOr%dsv%dw!e%d!e!f6_!f#V%d#V#W8w#W~%dX6dT{WOr%dsv%dw!f%d!f!g6s!g~%dX6xT{WOr%dsv%dw!c%d!c!d7X!d~%dX7^T{WOr%dsv%dw!v%d!v!w7m!w~%dX7rT{WOr%dsv%dw!c%d!c!d8R!d~%dX8WT{WOr%dsv%dw!}%d!}#O8g#O~%dX8nR{WxPOr%dsv%dw~%dX8|T{WOr%dsv%dw#W%d#W#X9]#X~%dX9bT{WOr%dsv%dw#T%d#T#U9q#U~%dX9vT{WOr%dsv%dw#h%d#h#i:V#i~%dX:[T{WOr%dsv%dw#T%d#T#U8R#U~%dX:pT{WOr%dsv%dw#c%d#c#d;P#d~%dX;UT{WOr%dsv%dw#V%d#V#W;e#W~%dX;jT{WOr%dsv%dw#h%d#h#i;y#i~%dX<OT{WOr%dsv%dw#m%d#m#n<_#n~%dX<dT{WOr%dsv%dw#d%d#d#e<s#e~%dX<xT{WOr%dsv%dw#X%d#X#Y4f#Y~%dX=`R!PP{WOr%dsv%dw~%dZ=rUaQVP{WOr$krs%Usv$kw!^$k!^!_%d!_~$k_>_U[UVP{WOr$krs%Usv$kw!^$k!^!_%d!_~$kZ>xWVP{WOr$krs%Usv$kw!^$k!^!_%d!_!`$k!`!a?b!a~$kZ?kU!OQVP{WOr$krs%Usv$kw!^$k!^!_%d!_~$kZ@UWVP{WOr$krs%Usv$kw!^$k!^!_%d!_#P$k#P#Q@n#Q~$kZ@uWVP{WOr$krs%Usv$kw!^$k!^!_%d!_!`$k!`!aA_!a~$kZAhUwQVP{WOr$krs%Usv$kw!^$k!^!_%d!_~$k",
    tokenizers: [startTag, commentContent2, piContent, cdataContent, 0, 1, 2, 3],
    topRules: {Document: [0, 6]},
    tokenPrec: 0
  });

  // node_modules/@codemirror/lang-xml/dist/index.js
  function tagName(doc2, tag) {
    let name2 = tag && tag.getChild("TagName");
    return name2 ? doc2.sliceString(name2.from, name2.to) : "";
  }
  function elementName3(doc2, tree) {
    let tag = tree && tree.firstChild;
    return !tag || tag.name != "OpenTag" ? "" : tagName(doc2, tag);
  }
  function attrName(doc2, tag, pos) {
    let attr = tag && tag.getChildren("Attribute").find((a) => a.from <= pos && a.to >= pos);
    let name2 = attr && attr.getChild("AttributeName");
    return name2 ? doc2.sliceString(name2.from, name2.to) : "";
  }
  function findParentElement2(tree) {
    for (let cur2 = tree && tree.parent; cur2; cur2 = cur2.parent)
      if (cur2.name == "Element")
        return cur2;
    return null;
  }
  function findLocation(state, pos) {
    var _a2;
    let at = syntaxTree(state).resolveInner(pos, -1), inTag = null;
    for (let cur2 = at; !inTag && cur2.parent; cur2 = cur2.parent)
      if (cur2.name == "OpenTag" || cur2.name == "CloseTag" || cur2.name == "SelfClosingTag" || cur2.name == "MismatchedCloseTag")
        inTag = cur2;
    if (inTag && (inTag.to > pos || inTag.lastChild.type.isError)) {
      let elt2 = inTag.parent;
      if (at.name == "TagName")
        return inTag.name == "CloseTag" || inTag.name == "MismatchedCloseTag" ? {type: "closeTag", from: at.from, context: elt2} : {type: "openTag", from: at.from, context: findParentElement2(elt2)};
      if (at.name == "AttributeName")
        return {type: "attrName", from: at.from, context: inTag};
      if (at.name == "AttributeValue")
        return {type: "attrValue", from: at.from, context: inTag};
      let before = at == inTag || at.name == "Attribute" ? at.childBefore(pos) : at;
      if ((before === null || before === void 0 ? void 0 : before.name) == "StartTag")
        return {type: "openTag", from: pos, context: findParentElement2(elt2)};
      if ((before === null || before === void 0 ? void 0 : before.name) == "StartCloseTag" && before.to <= pos)
        return {type: "closeTag", from: pos, context: elt2};
      if ((before === null || before === void 0 ? void 0 : before.name) == "Is")
        return {type: "attrValue", from: pos, context: inTag};
      if (before)
        return {type: "attrName", from: pos, context: inTag};
      return null;
    } else if (at.name == "StartCloseTag") {
      return {type: "closeTag", from: pos, context: at.parent};
    }
    while (at.parent && at.to == pos && !((_a2 = at.lastChild) === null || _a2 === void 0 ? void 0 : _a2.type.isError))
      at = at.parent;
    if (at.name == "Element" || at.name == "Text" || at.name == "Document")
      return {type: "tag", from: pos, context: at.name == "Element" ? at : findParentElement2(at)};
    return null;
  }
  var Element3 = class {
    constructor(spec, attrs, attrValues) {
      this.attrs = attrs;
      this.attrValues = attrValues;
      this.children = [];
      this.name = spec.name;
      this.completion = Object.assign(Object.assign({type: "type"}, spec.completion || {}), {label: this.name});
      this.openCompletion = Object.assign(Object.assign({}, this.completion), {label: "<" + this.name});
      this.closeCompletion = Object.assign(Object.assign({}, this.completion), {label: "</" + this.name + ">", boost: 2});
      this.closeNameCompletion = Object.assign(Object.assign({}, this.completion), {label: this.name + ">"});
      this.text = spec.textContent ? spec.textContent.map((s) => ({label: s, type: "text"})) : [];
    }
  };
  var Identifier2 = /^[:\-\.\w\u00b7-\uffff]*$/;
  function attrCompletion(spec) {
    return Object.assign(Object.assign({type: "property"}, spec.completion || {}), {label: spec.name});
  }
  function valueCompletion(spec) {
    return typeof spec == "string" ? {label: `"${spec}"`, type: "constant"} : /^"/.test(spec.label) ? spec : Object.assign(Object.assign({}, spec), {label: `"${spec.label}"`});
  }
  function completeFromSchema(eltSpecs, attrSpecs) {
    let allAttrs = [], globalAttrs = [];
    let attrValues = Object.create(null);
    for (let s of attrSpecs) {
      let completion = attrCompletion(s);
      allAttrs.push(completion);
      if (s.global)
        globalAttrs.push(completion);
      if (s.values)
        attrValues[s.name] = s.values.map(valueCompletion);
    }
    let allElements = [], topElements = [];
    let byName = Object.create(null);
    for (let s of eltSpecs) {
      let attrs = globalAttrs, attrVals = attrValues;
      if (s.attributes)
        attrs = attrs.concat(s.attributes.map((s2) => {
          if (typeof s2 == "string")
            return allAttrs.find((a) => a.label == s2) || {label: s2, type: "property"};
          if (s2.values) {
            if (attrVals == attrValues)
              attrVals = Object.create(attrVals);
            attrVals[s2.name] = s2.values.map(valueCompletion);
          }
          return attrCompletion(s2);
        }));
      let elt2 = new Element3(s, attrs, attrVals);
      byName[elt2.name] = elt2;
      allElements.push(elt2);
      if (s.top)
        topElements.push(elt2);
    }
    if (!topElements.length)
      topElements = allElements;
    for (let i = 0; i < allElements.length; i++) {
      let s = eltSpecs[i], elt2 = allElements[i];
      if (s.children) {
        for (let ch of s.children)
          if (byName[ch])
            elt2.children.push(byName[ch]);
      } else {
        elt2.children = allElements;
      }
    }
    return (cx) => {
      var _a2;
      let {doc: doc2} = cx.state, loc = findLocation(cx.state, cx.pos);
      if (!loc || loc.type == "tag" && !cx.explicit)
        return null;
      let {type, from, context} = loc;
      if (type == "openTag") {
        let children = topElements;
        let parentName = elementName3(doc2, context);
        if (parentName) {
          let parent = byName[parentName];
          children = (parent === null || parent === void 0 ? void 0 : parent.children) || allElements;
        }
        return {
          from,
          options: children.map((ch) => ch.completion),
          validFor: Identifier2
        };
      } else if (type == "closeTag") {
        let parentName = elementName3(doc2, context);
        return parentName ? {
          from,
          to: cx.pos + (doc2.sliceString(cx.pos, cx.pos + 1) == ">" ? 1 : 0),
          options: [((_a2 = byName[parentName]) === null || _a2 === void 0 ? void 0 : _a2.closeNameCompletion) || {label: parentName + ">", type: "type"}],
          validFor: Identifier2
        } : null;
      } else if (type == "attrName") {
        let parent = byName[tagName(doc2, context)];
        return {
          from,
          options: (parent === null || parent === void 0 ? void 0 : parent.attrs) || globalAttrs,
          validFor: Identifier2
        };
      } else if (type == "attrValue") {
        let attr = attrName(doc2, context, from);
        if (!attr)
          return null;
        let parent = byName[tagName(doc2, context)];
        let values2 = ((parent === null || parent === void 0 ? void 0 : parent.attrValues) || attrValues)[attr];
        if (!values2 || !values2.length)
          return null;
        return {
          from,
          to: cx.pos + (doc2.sliceString(cx.pos, cx.pos + 1) == '"' ? 1 : 0),
          options: values2,
          validFor: /^"[^"]*"?$/
        };
      } else if (type == "tag") {
        let parentName = elementName3(doc2, context), parent = byName[parentName];
        let closing = [], last = context && context.lastChild;
        if (parentName && (!last || last.name != "CloseTag" || tagName(doc2, last) != parentName))
          closing.push(parent ? parent.closeCompletion : {label: "</" + parentName + ">", type: "type", boost: 2});
        let options = closing.concat(((parent === null || parent === void 0 ? void 0 : parent.children) || (context ? allElements : topElements)).map((e) => e.openCompletion));
        if (context && (parent === null || parent === void 0 ? void 0 : parent.text.length)) {
          let openTag = context.firstChild;
          if (openTag.to > cx.pos - 20 && !/\S/.test(cx.state.sliceDoc(openTag.to, cx.pos)))
            options = options.concat(parent.text);
        }
        return {
          from,
          options,
          validFor: /^<\/?[:\-\.\w\u00b7-\uffff]*$/
        };
      } else {
        return null;
      }
    };
  }
  var xmlLanguage = /* @__PURE__ */ LRLanguage.define({
    name: "xml",
    parser: /* @__PURE__ */ parser5.configure({
      props: [
        /* @__PURE__ */ indentNodeProp.add({
          Element(context) {
            let closed = /^\s*<\//.test(context.textAfter);
            return context.lineIndent(context.node.from) + (closed ? 0 : context.unit);
          },
          "OpenTag CloseTag SelfClosingTag"(context) {
            return context.column(context.node.from) + context.unit;
          }
        }),
        /* @__PURE__ */ foldNodeProp.add({
          Element(subtree) {
            let first = subtree.firstChild, last = subtree.lastChild;
            if (!first || first.name != "OpenTag")
              return null;
            return {from: first.to, to: last.name == "CloseTag" ? last.from : subtree.to};
          }
        })
      ]
    }),
    languageData: {
      commentTokens: {block: {open: "<!--", close: "-->"}},
      indentOnInput: /^\s*<\/$/
    }
  });
  function xml(conf = {}) {
    return new LanguageSupport(xmlLanguage, xmlLanguage.data.of({
      autocomplete: completeFromSchema(conf.elements || [], conf.attributes || [])
    }));
  }

  // node_modules/@lezer/markdown/dist/index.js
  var CompositeBlock = class {
    constructor(type, value, from, hash2, end, children, positions) {
      this.type = type;
      this.value = value;
      this.from = from;
      this.hash = hash2;
      this.end = end;
      this.children = children;
      this.positions = positions;
      this.hashProp = [[NodeProp.contextHash, hash2]];
    }
    static create(type, value, from, parentHash, end) {
      let hash2 = parentHash + (parentHash << 8) + type + (value << 4) | 0;
      return new CompositeBlock(type, value, from, hash2, end, [], []);
    }
    addChild(child, pos) {
      if (child.prop(NodeProp.contextHash) != this.hash)
        child = new Tree(child.type, child.children, child.positions, child.length, this.hashProp);
      this.children.push(child);
      this.positions.push(pos);
    }
    toTree(nodeSet, end = this.end) {
      let last = this.children.length - 1;
      if (last >= 0)
        end = Math.max(end, this.positions[last] + this.children[last].length + this.from);
      let tree = new Tree(nodeSet.types[this.type], this.children, this.positions, end - this.from).balance({
        makeTree: (children, positions, length) => new Tree(NodeType.none, children, positions, length, this.hashProp)
      });
      return tree;
    }
  };
  var Type;
  (function(Type2) {
    Type2[Type2["Document"] = 1] = "Document";
    Type2[Type2["CodeBlock"] = 2] = "CodeBlock";
    Type2[Type2["FencedCode"] = 3] = "FencedCode";
    Type2[Type2["Blockquote"] = 4] = "Blockquote";
    Type2[Type2["HorizontalRule"] = 5] = "HorizontalRule";
    Type2[Type2["BulletList"] = 6] = "BulletList";
    Type2[Type2["OrderedList"] = 7] = "OrderedList";
    Type2[Type2["ListItem"] = 8] = "ListItem";
    Type2[Type2["ATXHeading1"] = 9] = "ATXHeading1";
    Type2[Type2["ATXHeading2"] = 10] = "ATXHeading2";
    Type2[Type2["ATXHeading3"] = 11] = "ATXHeading3";
    Type2[Type2["ATXHeading4"] = 12] = "ATXHeading4";
    Type2[Type2["ATXHeading5"] = 13] = "ATXHeading5";
    Type2[Type2["ATXHeading6"] = 14] = "ATXHeading6";
    Type2[Type2["SetextHeading1"] = 15] = "SetextHeading1";
    Type2[Type2["SetextHeading2"] = 16] = "SetextHeading2";
    Type2[Type2["HTMLBlock"] = 17] = "HTMLBlock";
    Type2[Type2["LinkReference"] = 18] = "LinkReference";
    Type2[Type2["Paragraph"] = 19] = "Paragraph";
    Type2[Type2["CommentBlock"] = 20] = "CommentBlock";
    Type2[Type2["ProcessingInstructionBlock"] = 21] = "ProcessingInstructionBlock";
    Type2[Type2["Escape"] = 22] = "Escape";
    Type2[Type2["Entity"] = 23] = "Entity";
    Type2[Type2["HardBreak"] = 24] = "HardBreak";
    Type2[Type2["Emphasis"] = 25] = "Emphasis";
    Type2[Type2["StrongEmphasis"] = 26] = "StrongEmphasis";
    Type2[Type2["Link"] = 27] = "Link";
    Type2[Type2["Image"] = 28] = "Image";
    Type2[Type2["InlineCode"] = 29] = "InlineCode";
    Type2[Type2["HTMLTag"] = 30] = "HTMLTag";
    Type2[Type2["Comment"] = 31] = "Comment";
    Type2[Type2["ProcessingInstruction"] = 32] = "ProcessingInstruction";
    Type2[Type2["URL"] = 33] = "URL";
    Type2[Type2["HeaderMark"] = 34] = "HeaderMark";
    Type2[Type2["QuoteMark"] = 35] = "QuoteMark";
    Type2[Type2["ListMark"] = 36] = "ListMark";
    Type2[Type2["LinkMark"] = 37] = "LinkMark";
    Type2[Type2["EmphasisMark"] = 38] = "EmphasisMark";
    Type2[Type2["CodeMark"] = 39] = "CodeMark";
    Type2[Type2["CodeText"] = 40] = "CodeText";
    Type2[Type2["CodeInfo"] = 41] = "CodeInfo";
    Type2[Type2["LinkTitle"] = 42] = "LinkTitle";
    Type2[Type2["LinkLabel"] = 43] = "LinkLabel";
  })(Type || (Type = {}));
  var LeafBlock = class {
    constructor(start, content2) {
      this.start = start;
      this.content = content2;
      this.marks = [];
      this.parsers = [];
    }
  };
  var Line2 = class {
    constructor() {
      this.text = "";
      this.baseIndent = 0;
      this.basePos = 0;
      this.depth = 0;
      this.markers = [];
      this.pos = 0;
      this.indent = 0;
      this.next = -1;
    }
    forward() {
      if (this.basePos > this.pos)
        this.forwardInner();
    }
    forwardInner() {
      let newPos = this.skipSpace(this.basePos);
      this.indent = this.countIndent(newPos, this.pos, this.indent);
      this.pos = newPos;
      this.next = newPos == this.text.length ? -1 : this.text.charCodeAt(newPos);
    }
    skipSpace(from) {
      return skipSpace(this.text, from);
    }
    reset(text) {
      this.text = text;
      this.baseIndent = this.basePos = this.pos = this.indent = 0;
      this.forwardInner();
      this.depth = 1;
      while (this.markers.length)
        this.markers.pop();
    }
    moveBase(to) {
      this.basePos = to;
      this.baseIndent = this.countIndent(to, this.pos, this.indent);
    }
    moveBaseColumn(indent) {
      this.baseIndent = indent;
      this.basePos = this.findColumn(indent);
    }
    addMarker(elt2) {
      this.markers.push(elt2);
    }
    countIndent(to, from = 0, indent = 0) {
      for (let i = from; i < to; i++)
        indent += this.text.charCodeAt(i) == 9 ? 4 - indent % 4 : 1;
      return indent;
    }
    findColumn(goal) {
      let i = 0;
      for (let indent = 0; i < this.text.length && indent < goal; i++)
        indent += this.text.charCodeAt(i) == 9 ? 4 - indent % 4 : 1;
      return i;
    }
    scrub() {
      if (!this.baseIndent)
        return this.text;
      let result = "";
      for (let i = 0; i < this.basePos; i++)
        result += " ";
      return result + this.text.slice(this.basePos);
    }
  };
  function skipForList(bl, cx, line) {
    if (line.pos == line.text.length || bl != cx.block && line.indent >= cx.stack[line.depth + 1].value + line.baseIndent)
      return true;
    if (line.indent >= line.baseIndent + 4)
      return false;
    let size = (bl.type == Type.OrderedList ? isOrderedList : isBulletList)(line, cx, false);
    return size > 0 && (bl.type != Type.BulletList || isHorizontalRule(line, cx, false) < 0) && line.text.charCodeAt(line.pos + size - 1) == bl.value;
  }
  var DefaultSkipMarkup = {
    [Type.Blockquote](bl, cx, line) {
      if (line.next != 62)
        return false;
      line.markers.push(elt(Type.QuoteMark, cx.lineStart + line.pos, cx.lineStart + line.pos + 1));
      line.moveBase(line.pos + (space3(line.text.charCodeAt(line.pos + 1)) ? 2 : 1));
      bl.end = cx.lineStart + line.text.length;
      return true;
    },
    [Type.ListItem](bl, _cx, line) {
      if (line.indent < line.baseIndent + bl.value && line.next > -1)
        return false;
      line.moveBaseColumn(line.baseIndent + bl.value);
      return true;
    },
    [Type.OrderedList]: skipForList,
    [Type.BulletList]: skipForList,
    [Type.Document]() {
      return true;
    }
  };
  function space3(ch) {
    return ch == 32 || ch == 9 || ch == 10 || ch == 13;
  }
  function skipSpace(line, i = 0) {
    while (i < line.length && space3(line.charCodeAt(i)))
      i++;
    return i;
  }
  function skipSpaceBack(line, i, to) {
    while (i > to && space3(line.charCodeAt(i - 1)))
      i--;
    return i;
  }
  function isFencedCode(line) {
    if (line.next != 96 && line.next != 126)
      return -1;
    let pos = line.pos + 1;
    while (pos < line.text.length && line.text.charCodeAt(pos) == line.next)
      pos++;
    if (pos < line.pos + 3)
      return -1;
    if (line.next == 96) {
      for (let i = pos; i < line.text.length; i++)
        if (line.text.charCodeAt(i) == 96)
          return -1;
    }
    return pos;
  }
  function isBlockquote(line) {
    return line.next != 62 ? -1 : line.text.charCodeAt(line.pos + 1) == 32 ? 2 : 1;
  }
  function isHorizontalRule(line, cx, breaking) {
    if (line.next != 42 && line.next != 45 && line.next != 95)
      return -1;
    let count = 1;
    for (let pos = line.pos + 1; pos < line.text.length; pos++) {
      let ch = line.text.charCodeAt(pos);
      if (ch == line.next)
        count++;
      else if (!space3(ch))
        return -1;
    }
    if (breaking && line.next == 45 && isSetextUnderline(line) > -1 && line.depth == cx.stack.length)
      return -1;
    return count < 3 ? -1 : 1;
  }
  function inList(cx, type) {
    for (let i = cx.stack.length - 1; i >= 0; i--)
      if (cx.stack[i].type == type)
        return true;
    return false;
  }
  function isBulletList(line, cx, breaking) {
    return (line.next == 45 || line.next == 43 || line.next == 42) && (line.pos == line.text.length - 1 || space3(line.text.charCodeAt(line.pos + 1))) && (!breaking || inList(cx, Type.BulletList) || line.skipSpace(line.pos + 2) < line.text.length) ? 1 : -1;
  }
  function isOrderedList(line, cx, breaking) {
    let pos = line.pos, next = line.next;
    for (; ; ) {
      if (next >= 48 && next <= 57)
        pos++;
      else
        break;
      if (pos == line.text.length)
        return -1;
      next = line.text.charCodeAt(pos);
    }
    if (pos == line.pos || pos > line.pos + 9 || next != 46 && next != 41 || pos < line.text.length - 1 && !space3(line.text.charCodeAt(pos + 1)) || breaking && !inList(cx, Type.OrderedList) && (line.skipSpace(pos + 1) == line.text.length || pos > line.pos + 1 || line.next != 49))
      return -1;
    return pos + 1 - line.pos;
  }
  function isAtxHeading(line) {
    if (line.next != 35)
      return -1;
    let pos = line.pos + 1;
    while (pos < line.text.length && line.text.charCodeAt(pos) == 35)
      pos++;
    if (pos < line.text.length && line.text.charCodeAt(pos) != 32)
      return -1;
    let size = pos - line.pos;
    return size > 6 ? -1 : size;
  }
  function isSetextUnderline(line) {
    if (line.next != 45 && line.next != 61 || line.indent >= line.baseIndent + 4)
      return -1;
    let pos = line.pos + 1;
    while (pos < line.text.length && line.text.charCodeAt(pos) == line.next)
      pos++;
    let end = pos;
    while (pos < line.text.length && space3(line.text.charCodeAt(pos)))
      pos++;
    return pos == line.text.length ? end : -1;
  }
  var EmptyLine = /^[ \t]*$/;
  var CommentEnd = /-->/;
  var ProcessingEnd = /\?>/;
  var HTMLBlockStyle = [
    [/^<(?:script|pre|style)(?:\s|>|$)/i, /<\/(?:script|pre|style)>/i],
    [/^\s*<!--/, CommentEnd],
    [/^\s*<\?/, ProcessingEnd],
    [/^\s*<![A-Z]/, />/],
    [/^\s*<!\[CDATA\[/, /\]\]>/],
    [/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i, EmptyLine],
    [/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i, EmptyLine]
  ];
  function isHTMLBlock(line, _cx, breaking) {
    if (line.next != 60)
      return -1;
    let rest = line.text.slice(line.pos);
    for (let i = 0, e = HTMLBlockStyle.length - (breaking ? 1 : 0); i < e; i++)
      if (HTMLBlockStyle[i][0].test(rest))
        return i;
    return -1;
  }
  function getListIndent(line, pos) {
    let indentAfter = line.countIndent(pos, line.pos, line.indent);
    let indented = line.countIndent(line.skipSpace(pos), pos, indentAfter);
    return indented >= indentAfter + 5 ? indentAfter + 1 : indented;
  }
  function addCodeText(marks, from, to) {
    let last = marks.length - 1;
    if (last >= 0 && marks[last].to == from && marks[last].type == Type.CodeText)
      marks[last].to = to;
    else
      marks.push(elt(Type.CodeText, from, to));
  }
  var DefaultBlockParsers = {
    LinkReference: void 0,
    IndentedCode(cx, line) {
      let base2 = line.baseIndent + 4;
      if (line.indent < base2)
        return false;
      let start = line.findColumn(base2);
      let from = cx.lineStart + start, to = cx.lineStart + line.text.length;
      let marks = [], pendingMarks = [];
      addCodeText(marks, from, to);
      while (cx.nextLine() && line.depth >= cx.stack.length) {
        if (line.pos == line.text.length) {
          addCodeText(pendingMarks, cx.lineStart - 1, cx.lineStart);
          for (let m of line.markers)
            pendingMarks.push(m);
        } else if (line.indent < base2) {
          break;
        } else {
          if (pendingMarks.length) {
            for (let m of pendingMarks) {
              if (m.type == Type.CodeText)
                addCodeText(marks, m.from, m.to);
              else
                marks.push(m);
            }
            pendingMarks = [];
          }
          addCodeText(marks, cx.lineStart - 1, cx.lineStart);
          for (let m of line.markers)
            marks.push(m);
          to = cx.lineStart + line.text.length;
          let codeStart = cx.lineStart + line.findColumn(line.baseIndent + 4);
          if (codeStart < to)
            addCodeText(marks, codeStart, to);
        }
      }
      if (pendingMarks.length) {
        pendingMarks = pendingMarks.filter((m) => m.type != Type.CodeText);
        if (pendingMarks.length)
          line.markers = pendingMarks.concat(line.markers);
      }
      cx.addNode(cx.buffer.writeElements(marks, -from).finish(Type.CodeBlock, to - from), from);
      return true;
    },
    FencedCode(cx, line) {
      let fenceEnd = isFencedCode(line);
      if (fenceEnd < 0)
        return false;
      let from = cx.lineStart + line.pos, ch = line.next, len = fenceEnd - line.pos;
      let infoFrom = line.skipSpace(fenceEnd), infoTo = skipSpaceBack(line.text, line.text.length, infoFrom);
      let marks = [elt(Type.CodeMark, from, from + len)];
      if (infoFrom < infoTo)
        marks.push(elt(Type.CodeInfo, cx.lineStart + infoFrom, cx.lineStart + infoTo));
      for (let first = true; cx.nextLine() && line.depth >= cx.stack.length; first = false) {
        let i = line.pos;
        if (line.indent - line.baseIndent < 4)
          while (i < line.text.length && line.text.charCodeAt(i) == ch)
            i++;
        if (i - line.pos >= len && line.skipSpace(i) == line.text.length) {
          for (let m of line.markers)
            marks.push(m);
          marks.push(elt(Type.CodeMark, cx.lineStart + line.pos, cx.lineStart + i));
          cx.nextLine();
          break;
        } else {
          if (!first)
            addCodeText(marks, cx.lineStart - 1, cx.lineStart);
          for (let m of line.markers)
            marks.push(m);
          let textStart = cx.lineStart + line.basePos, textEnd = cx.lineStart + line.text.length;
          if (textStart < textEnd)
            addCodeText(marks, textStart, textEnd);
        }
      }
      cx.addNode(cx.buffer.writeElements(marks, -from).finish(Type.FencedCode, cx.prevLineEnd() - from), from);
      return true;
    },
    Blockquote(cx, line) {
      let size = isBlockquote(line);
      if (size < 0)
        return false;
      cx.startContext(Type.Blockquote, line.pos);
      cx.addNode(Type.QuoteMark, cx.lineStart + line.pos, cx.lineStart + line.pos + 1);
      line.moveBase(line.pos + size);
      return null;
    },
    HorizontalRule(cx, line) {
      if (isHorizontalRule(line, cx, false) < 0)
        return false;
      let from = cx.lineStart + line.pos;
      cx.nextLine();
      cx.addNode(Type.HorizontalRule, from);
      return true;
    },
    BulletList(cx, line) {
      let size = isBulletList(line, cx, false);
      if (size < 0)
        return false;
      if (cx.block.type != Type.BulletList)
        cx.startContext(Type.BulletList, line.basePos, line.next);
      let newBase = getListIndent(line, line.pos + 1);
      cx.startContext(Type.ListItem, line.basePos, newBase - line.baseIndent);
      cx.addNode(Type.ListMark, cx.lineStart + line.pos, cx.lineStart + line.pos + size);
      line.moveBaseColumn(newBase);
      return null;
    },
    OrderedList(cx, line) {
      let size = isOrderedList(line, cx, false);
      if (size < 0)
        return false;
      if (cx.block.type != Type.OrderedList)
        cx.startContext(Type.OrderedList, line.basePos, line.text.charCodeAt(line.pos + size - 1));
      let newBase = getListIndent(line, line.pos + size);
      cx.startContext(Type.ListItem, line.basePos, newBase - line.baseIndent);
      cx.addNode(Type.ListMark, cx.lineStart + line.pos, cx.lineStart + line.pos + size);
      line.moveBaseColumn(newBase);
      return null;
    },
    ATXHeading(cx, line) {
      let size = isAtxHeading(line);
      if (size < 0)
        return false;
      let off = line.pos, from = cx.lineStart + off;
      let endOfSpace = skipSpaceBack(line.text, line.text.length, off), after = endOfSpace;
      while (after > off && line.text.charCodeAt(after - 1) == line.next)
        after--;
      if (after == endOfSpace || after == off || !space3(line.text.charCodeAt(after - 1)))
        after = line.text.length;
      let buf = cx.buffer.write(Type.HeaderMark, 0, size).writeElements(cx.parser.parseInline(line.text.slice(off + size + 1, after), from + size + 1), -from);
      if (after < line.text.length)
        buf.write(Type.HeaderMark, after - off, endOfSpace - off);
      let node = buf.finish(Type.ATXHeading1 - 1 + size, line.text.length - off);
      cx.nextLine();
      cx.addNode(node, from);
      return true;
    },
    HTMLBlock(cx, line) {
      let type = isHTMLBlock(line, cx, false);
      if (type < 0)
        return false;
      let from = cx.lineStart + line.pos, end = HTMLBlockStyle[type][1];
      let marks = [], trailing = end != EmptyLine;
      while (!end.test(line.text) && cx.nextLine()) {
        if (line.depth < cx.stack.length) {
          trailing = false;
          break;
        }
        for (let m of line.markers)
          marks.push(m);
      }
      if (trailing)
        cx.nextLine();
      let nodeType = end == CommentEnd ? Type.CommentBlock : end == ProcessingEnd ? Type.ProcessingInstructionBlock : Type.HTMLBlock;
      let to = cx.prevLineEnd();
      cx.addNode(cx.buffer.writeElements(marks, -from).finish(nodeType, to - from), from);
      return true;
    },
    SetextHeading: void 0
  };
  var LinkReferenceParser = class {
    constructor(leaf) {
      this.stage = 0;
      this.elts = [];
      this.pos = 0;
      this.start = leaf.start;
      this.advance(leaf.content);
    }
    nextLine(cx, line, leaf) {
      if (this.stage == -1)
        return false;
      let content2 = leaf.content + "\n" + line.scrub();
      let finish = this.advance(content2);
      if (finish > -1 && finish < content2.length)
        return this.complete(cx, leaf, finish);
      return false;
    }
    finish(cx, leaf) {
      if ((this.stage == 2 || this.stage == 3) && skipSpace(leaf.content, this.pos) == leaf.content.length)
        return this.complete(cx, leaf, leaf.content.length);
      return false;
    }
    complete(cx, leaf, len) {
      cx.addLeafElement(leaf, elt(Type.LinkReference, this.start, this.start + len, this.elts));
      return true;
    }
    nextStage(elt2) {
      if (elt2) {
        this.pos = elt2.to - this.start;
        this.elts.push(elt2);
        this.stage++;
        return true;
      }
      if (elt2 === false)
        this.stage = -1;
      return false;
    }
    advance(content2) {
      for (; ; ) {
        if (this.stage == -1) {
          return -1;
        } else if (this.stage == 0) {
          if (!this.nextStage(parseLinkLabel(content2, this.pos, this.start, true)))
            return -1;
          if (content2.charCodeAt(this.pos) != 58)
            return this.stage = -1;
          this.elts.push(elt(Type.LinkMark, this.pos + this.start, this.pos + this.start + 1));
          this.pos++;
        } else if (this.stage == 1) {
          if (!this.nextStage(parseURL(content2, skipSpace(content2, this.pos), this.start)))
            return -1;
        } else if (this.stage == 2) {
          let skip = skipSpace(content2, this.pos), end = 0;
          if (skip > this.pos) {
            let title = parseLinkTitle(content2, skip, this.start);
            if (title) {
              let titleEnd = lineEnd(content2, title.to - this.start);
              if (titleEnd > 0) {
                this.nextStage(title);
                end = titleEnd;
              }
            }
          }
          if (!end)
            end = lineEnd(content2, this.pos);
          return end > 0 && end < content2.length ? end : -1;
        } else {
          return lineEnd(content2, this.pos);
        }
      }
    }
  };
  function lineEnd(text, pos) {
    for (; pos < text.length; pos++) {
      let next = text.charCodeAt(pos);
      if (next == 10)
        break;
      if (!space3(next))
        return -1;
    }
    return pos;
  }
  var SetextHeadingParser = class {
    nextLine(cx, line, leaf) {
      let underline = line.depth < cx.stack.length ? -1 : isSetextUnderline(line);
      let next = line.next;
      if (underline < 0)
        return false;
      let underlineMark = elt(Type.HeaderMark, cx.lineStart + line.pos, cx.lineStart + underline);
      cx.nextLine();
      cx.addLeafElement(leaf, elt(next == 61 ? Type.SetextHeading1 : Type.SetextHeading2, leaf.start, cx.prevLineEnd(), [
        ...cx.parser.parseInline(leaf.content, leaf.start),
        underlineMark
      ]));
      return true;
    }
    finish() {
      return false;
    }
  };
  var DefaultLeafBlocks = {
    LinkReference(_, leaf) {
      return leaf.content.charCodeAt(0) == 91 ? new LinkReferenceParser(leaf) : null;
    },
    SetextHeading() {
      return new SetextHeadingParser();
    }
  };
  var DefaultEndLeaf = [
    (_, line) => isAtxHeading(line) >= 0,
    (_, line) => isFencedCode(line) >= 0,
    (_, line) => isBlockquote(line) >= 0,
    (p, line) => isBulletList(line, p, true) >= 0,
    (p, line) => isOrderedList(line, p, true) >= 0,
    (p, line) => isHorizontalRule(line, p, true) >= 0,
    (p, line) => isHTMLBlock(line, p, true) >= 0
  ];
  var scanLineResult = {text: "", end: 0};
  var BlockContext = class {
    constructor(parser7, input, fragments, ranges) {
      this.parser = parser7;
      this.input = input;
      this.ranges = ranges;
      this.line = new Line2();
      this.atEnd = false;
      this.dontInject = new Set();
      this.stoppedAt = null;
      this.rangeI = 0;
      this.to = ranges[ranges.length - 1].to;
      this.lineStart = this.absoluteLineStart = this.absoluteLineEnd = ranges[0].from;
      this.block = CompositeBlock.create(Type.Document, 0, this.lineStart, 0, 0);
      this.stack = [this.block];
      this.fragments = fragments.length ? new FragmentCursor3(fragments, input) : null;
      this.readLine();
    }
    get parsedPos() {
      return this.absoluteLineStart;
    }
    advance() {
      if (this.stoppedAt != null && this.absoluteLineStart > this.stoppedAt)
        return this.finish();
      let {line} = this;
      for (; ; ) {
        while (line.depth < this.stack.length)
          this.finishContext();
        for (let mark of line.markers)
          this.addNode(mark.type, mark.from, mark.to);
        if (line.pos < line.text.length)
          break;
        if (!this.nextLine())
          return this.finish();
      }
      if (this.fragments && this.reuseFragment(line.basePos))
        return null;
      start:
        for (; ; ) {
          for (let type of this.parser.blockParsers)
            if (type) {
              let result = type(this, line);
              if (result != false) {
                if (result == true)
                  return null;
                line.forward();
                continue start;
              }
            }
          break;
        }
      let leaf = new LeafBlock(this.lineStart + line.pos, line.text.slice(line.pos));
      for (let parse of this.parser.leafBlockParsers)
        if (parse) {
          let parser7 = parse(this, leaf);
          if (parser7)
            leaf.parsers.push(parser7);
        }
      lines:
        while (this.nextLine()) {
          if (line.pos == line.text.length)
            break;
          if (line.indent < line.baseIndent + 4) {
            for (let stop of this.parser.endLeafBlock)
              if (stop(this, line, leaf))
                break lines;
          }
          for (let parser7 of leaf.parsers)
            if (parser7.nextLine(this, line, leaf))
              return null;
          leaf.content += "\n" + line.scrub();
          for (let m of line.markers)
            leaf.marks.push(m);
        }
      this.finishLeaf(leaf);
      return null;
    }
    stopAt(pos) {
      if (this.stoppedAt != null && this.stoppedAt < pos)
        throw new RangeError("Can't move stoppedAt forward");
      this.stoppedAt = pos;
    }
    reuseFragment(start) {
      if (!this.fragments.moveTo(this.absoluteLineStart + start, this.absoluteLineStart) || !this.fragments.matches(this.block.hash))
        return false;
      let taken = this.fragments.takeNodes(this);
      if (!taken)
        return false;
      let withoutGaps = taken, end = this.absoluteLineStart + taken;
      for (let i = 1; i < this.ranges.length; i++) {
        let gapFrom = this.ranges[i - 1].to, gapTo = this.ranges[i].from;
        if (gapFrom >= this.lineStart && gapTo < end)
          withoutGaps -= gapTo - gapFrom;
      }
      this.lineStart += withoutGaps;
      this.absoluteLineStart += taken;
      this.moveRangeI();
      if (this.absoluteLineStart < this.to) {
        this.lineStart++;
        this.absoluteLineStart++;
        this.readLine();
      } else {
        this.atEnd = true;
        this.readLine();
      }
      return true;
    }
    get depth() {
      return this.stack.length;
    }
    parentType(depth = this.depth - 1) {
      return this.parser.nodeSet.types[this.stack[depth].type];
    }
    nextLine() {
      this.lineStart += this.line.text.length;
      if (this.absoluteLineEnd >= this.to) {
        this.absoluteLineStart = this.absoluteLineEnd;
        this.atEnd = true;
        this.readLine();
        return false;
      } else {
        this.lineStart++;
        this.absoluteLineStart = this.absoluteLineEnd + 1;
        this.moveRangeI();
        this.readLine();
        return true;
      }
    }
    moveRangeI() {
      while (this.rangeI < this.ranges.length - 1 && this.absoluteLineStart >= this.ranges[this.rangeI].to) {
        this.rangeI++;
        this.absoluteLineStart = Math.max(this.absoluteLineStart, this.ranges[this.rangeI].from);
      }
    }
    scanLine(start) {
      let r = scanLineResult;
      r.end = start;
      if (start >= this.to) {
        r.text = "";
      } else {
        r.text = this.lineChunkAt(start);
        r.end += r.text.length;
        if (this.ranges.length > 1) {
          let textOffset = this.absoluteLineStart, rangeI = this.rangeI;
          while (this.ranges[rangeI].to < r.end) {
            rangeI++;
            let nextFrom = this.ranges[rangeI].from;
            let after = this.lineChunkAt(nextFrom);
            r.end = nextFrom + after.length;
            r.text = r.text.slice(0, this.ranges[rangeI - 1].to - textOffset) + after;
            textOffset = r.end - r.text.length;
          }
        }
      }
      return r;
    }
    readLine() {
      let {line} = this, {text, end} = this.scanLine(this.absoluteLineStart);
      this.absoluteLineEnd = end;
      line.reset(text);
      for (; line.depth < this.stack.length; line.depth++) {
        let cx = this.stack[line.depth], handler = this.parser.skipContextMarkup[cx.type];
        if (!handler)
          throw new Error("Unhandled block context " + Type[cx.type]);
        if (!handler(cx, this, line))
          break;
        line.forward();
      }
    }
    lineChunkAt(pos) {
      let next = this.input.chunk(pos), text;
      if (!this.input.lineChunks) {
        let eol = next.indexOf("\n");
        text = eol < 0 ? next : next.slice(0, eol);
      } else {
        text = next == "\n" ? "" : next;
      }
      return pos + text.length > this.to ? text.slice(0, this.to - pos) : text;
    }
    prevLineEnd() {
      return this.atEnd ? this.lineStart : this.lineStart - 1;
    }
    startContext(type, start, value = 0) {
      this.block = CompositeBlock.create(type, value, this.lineStart + start, this.block.hash, this.lineStart + this.line.text.length);
      this.stack.push(this.block);
    }
    startComposite(type, start, value = 0) {
      this.startContext(this.parser.getNodeType(type), start, value);
    }
    addNode(block, from, to) {
      if (typeof block == "number")
        block = new Tree(this.parser.nodeSet.types[block], none4, none4, (to !== null && to !== void 0 ? to : this.prevLineEnd()) - from);
      this.block.addChild(block, from - this.block.from);
    }
    addElement(elt2) {
      this.block.addChild(elt2.toTree(this.parser.nodeSet), elt2.from - this.block.from);
    }
    addLeafElement(leaf, elt2) {
      this.addNode(this.buffer.writeElements(injectMarks(elt2.children, leaf.marks), -elt2.from).finish(elt2.type, elt2.to - elt2.from), elt2.from);
    }
    finishContext() {
      let cx = this.stack.pop();
      let top2 = this.stack[this.stack.length - 1];
      top2.addChild(cx.toTree(this.parser.nodeSet), cx.from - top2.from);
      this.block = top2;
    }
    finish() {
      while (this.stack.length > 1)
        this.finishContext();
      return this.addGaps(this.block.toTree(this.parser.nodeSet, this.lineStart));
    }
    addGaps(tree) {
      return this.ranges.length > 1 ? injectGaps(this.ranges, 0, tree.topNode, this.ranges[0].from, this.dontInject) : tree;
    }
    finishLeaf(leaf) {
      for (let parser7 of leaf.parsers)
        if (parser7.finish(this, leaf))
          return;
      let inline = injectMarks(this.parser.parseInline(leaf.content, leaf.start), leaf.marks);
      this.addNode(this.buffer.writeElements(inline, -leaf.start).finish(Type.Paragraph, leaf.content.length), leaf.start);
    }
    elt(type, from, to, children) {
      if (typeof type == "string")
        return elt(this.parser.getNodeType(type), from, to, children);
      return new TreeElement(type, from);
    }
    get buffer() {
      return new Buffer(this.parser.nodeSet);
    }
  };
  function injectGaps(ranges, rangeI, tree, offset, dont) {
    if (dont.has(tree.tree))
      return tree.tree;
    let rangeEnd = ranges[rangeI].to;
    let children = [], positions = [], start = tree.from + offset;
    function movePastNext(upto, inclusive) {
      while (inclusive ? upto >= rangeEnd : upto > rangeEnd) {
        let size = ranges[rangeI + 1].from - rangeEnd;
        offset += size;
        upto += size;
        rangeI++;
        rangeEnd = ranges[rangeI].to;
      }
    }
    for (let ch = tree.firstChild; ch; ch = ch.nextSibling) {
      movePastNext(ch.from + offset, true);
      let from = ch.from + offset, node;
      if (ch.to + offset > rangeEnd) {
        node = injectGaps(ranges, rangeI, ch, offset, dont);
        movePastNext(ch.to + offset, false);
      } else {
        node = ch.toTree();
      }
      children.push(node);
      positions.push(from - start);
    }
    movePastNext(tree.to + offset, false);
    return new Tree(tree.type, children, positions, tree.to + offset - start, tree.tree ? tree.tree.propValues : void 0);
  }
  var MarkdownParser = class extends Parser {
    constructor(nodeSet, blockParsers, leafBlockParsers, blockNames, endLeafBlock, skipContextMarkup, inlineParsers, inlineNames, wrappers) {
      super();
      this.nodeSet = nodeSet;
      this.blockParsers = blockParsers;
      this.leafBlockParsers = leafBlockParsers;
      this.blockNames = blockNames;
      this.endLeafBlock = endLeafBlock;
      this.skipContextMarkup = skipContextMarkup;
      this.inlineParsers = inlineParsers;
      this.inlineNames = inlineNames;
      this.wrappers = wrappers;
      this.nodeTypes = Object.create(null);
      for (let t2 of nodeSet.types)
        this.nodeTypes[t2.name] = t2.id;
    }
    createParse(input, fragments, ranges) {
      let parse = new BlockContext(this, input, fragments, ranges);
      for (let w of this.wrappers)
        parse = w(parse, input, fragments, ranges);
      return parse;
    }
    configure(spec) {
      let config = resolveConfig(spec);
      if (!config)
        return this;
      let {nodeSet, skipContextMarkup} = this;
      let blockParsers = this.blockParsers.slice(), leafBlockParsers = this.leafBlockParsers.slice(), blockNames = this.blockNames.slice(), inlineParsers = this.inlineParsers.slice(), inlineNames = this.inlineNames.slice(), endLeafBlock = this.endLeafBlock.slice(), wrappers = this.wrappers;
      if (nonEmpty(config.defineNodes)) {
        skipContextMarkup = Object.assign({}, skipContextMarkup);
        let nodeTypes2 = nodeSet.types.slice(), styles;
        for (let s of config.defineNodes) {
          let {name: name2, block, composite, style} = typeof s == "string" ? {name: s} : s;
          if (nodeTypes2.some((t2) => t2.name == name2))
            continue;
          if (composite)
            skipContextMarkup[nodeTypes2.length] = (bl, cx, line) => composite(cx, line, bl.value);
          let id2 = nodeTypes2.length;
          let group = composite ? ["Block", "BlockContext"] : !block ? void 0 : id2 >= Type.ATXHeading1 && id2 <= Type.SetextHeading2 ? ["Block", "LeafBlock", "Heading"] : ["Block", "LeafBlock"];
          nodeTypes2.push(NodeType.define({
            id: id2,
            name: name2,
            props: group && [[NodeProp.group, group]]
          }));
          if (style) {
            if (!styles)
              styles = {};
            if (Array.isArray(style) || style instanceof Tag)
              styles[name2] = style;
            else
              Object.assign(styles, style);
          }
        }
        nodeSet = new NodeSet(nodeTypes2);
        if (styles)
          nodeSet = nodeSet.extend(styleTags(styles));
      }
      if (nonEmpty(config.props))
        nodeSet = nodeSet.extend(...config.props);
      if (nonEmpty(config.remove)) {
        for (let rm of config.remove) {
          let block = this.blockNames.indexOf(rm), inline = this.inlineNames.indexOf(rm);
          if (block > -1)
            blockParsers[block] = leafBlockParsers[block] = void 0;
          if (inline > -1)
            inlineParsers[inline] = void 0;
        }
      }
      if (nonEmpty(config.parseBlock)) {
        for (let spec2 of config.parseBlock) {
          let found = blockNames.indexOf(spec2.name);
          if (found > -1) {
            blockParsers[found] = spec2.parse;
            leafBlockParsers[found] = spec2.leaf;
          } else {
            let pos = spec2.before ? findName(blockNames, spec2.before) : spec2.after ? findName(blockNames, spec2.after) + 1 : blockNames.length - 1;
            blockParsers.splice(pos, 0, spec2.parse);
            leafBlockParsers.splice(pos, 0, spec2.leaf);
            blockNames.splice(pos, 0, spec2.name);
          }
          if (spec2.endLeaf)
            endLeafBlock.push(spec2.endLeaf);
        }
      }
      if (nonEmpty(config.parseInline)) {
        for (let spec2 of config.parseInline) {
          let found = inlineNames.indexOf(spec2.name);
          if (found > -1) {
            inlineParsers[found] = spec2.parse;
          } else {
            let pos = spec2.before ? findName(inlineNames, spec2.before) : spec2.after ? findName(inlineNames, spec2.after) + 1 : inlineNames.length - 1;
            inlineParsers.splice(pos, 0, spec2.parse);
            inlineNames.splice(pos, 0, spec2.name);
          }
        }
      }
      if (config.wrap)
        wrappers = wrappers.concat(config.wrap);
      return new MarkdownParser(nodeSet, blockParsers, leafBlockParsers, blockNames, endLeafBlock, skipContextMarkup, inlineParsers, inlineNames, wrappers);
    }
    getNodeType(name2) {
      let found = this.nodeTypes[name2];
      if (found == null)
        throw new RangeError(`Unknown node type '${name2}'`);
      return found;
    }
    parseInline(text, offset) {
      let cx = new InlineContext(this, text, offset);
      outer:
        for (let pos = offset; pos < cx.end; ) {
          let next = cx.char(pos);
          for (let token of this.inlineParsers)
            if (token) {
              let result = token(cx, next, pos);
              if (result >= 0) {
                pos = result;
                continue outer;
              }
            }
          pos++;
        }
      return cx.resolveMarkers(0);
    }
  };
  function nonEmpty(a) {
    return a != null && a.length > 0;
  }
  function resolveConfig(spec) {
    if (!Array.isArray(spec))
      return spec;
    if (spec.length == 0)
      return null;
    let conf = resolveConfig(spec[0]);
    if (spec.length == 1)
      return conf;
    let rest = resolveConfig(spec.slice(1));
    if (!rest || !conf)
      return conf || rest;
    let conc2 = (a, b) => (a || none4).concat(b || none4);
    let wrapA = conf.wrap, wrapB = rest.wrap;
    return {
      props: conc2(conf.props, rest.props),
      defineNodes: conc2(conf.defineNodes, rest.defineNodes),
      parseBlock: conc2(conf.parseBlock, rest.parseBlock),
      parseInline: conc2(conf.parseInline, rest.parseInline),
      remove: conc2(conf.remove, rest.remove),
      wrap: !wrapA ? wrapB : !wrapB ? wrapA : (inner, input, fragments, ranges) => wrapA(wrapB(inner, input, fragments, ranges), input, fragments, ranges)
    };
  }
  function findName(names, name2) {
    let found = names.indexOf(name2);
    if (found < 0)
      throw new RangeError(`Position specified relative to unknown parser ${name2}`);
    return found;
  }
  var nodeTypes = [NodeType.none];
  for (let i = 1, name2; name2 = Type[i]; i++) {
    nodeTypes[i] = NodeType.define({
      id: i,
      name: name2,
      props: i >= Type.Escape ? [] : [[NodeProp.group, i in DefaultSkipMarkup ? ["Block", "BlockContext"] : ["Block", "LeafBlock"]]]
    });
  }
  var none4 = [];
  var Buffer = class {
    constructor(nodeSet) {
      this.nodeSet = nodeSet;
      this.content = [];
      this.nodes = [];
    }
    write(type, from, to, children = 0) {
      this.content.push(type, from, to, 4 + children * 4);
      return this;
    }
    writeElements(elts, offset = 0) {
      for (let e of elts)
        e.writeTo(this, offset);
      return this;
    }
    finish(type, length) {
      return Tree.build({
        buffer: this.content,
        nodeSet: this.nodeSet,
        reused: this.nodes,
        topID: type,
        length
      });
    }
  };
  var Element4 = class {
    constructor(type, from, to, children = none4) {
      this.type = type;
      this.from = from;
      this.to = to;
      this.children = children;
    }
    writeTo(buf, offset) {
      let startOff = buf.content.length;
      buf.writeElements(this.children, offset);
      buf.content.push(this.type, this.from + offset, this.to + offset, buf.content.length + 4 - startOff);
    }
    toTree(nodeSet) {
      return new Buffer(nodeSet).writeElements(this.children, -this.from).finish(this.type, this.to - this.from);
    }
  };
  var TreeElement = class {
    constructor(tree, from) {
      this.tree = tree;
      this.from = from;
    }
    get to() {
      return this.from + this.tree.length;
    }
    get type() {
      return this.tree.type.id;
    }
    get children() {
      return none4;
    }
    writeTo(buf, offset) {
      buf.nodes.push(this.tree);
      buf.content.push(buf.nodes.length - 1, this.from + offset, this.to + offset, -1);
    }
    toTree() {
      return this.tree;
    }
  };
  function elt(type, from, to, children) {
    return new Element4(type, from, to, children);
  }
  var EmphasisUnderscore = {resolve: "Emphasis", mark: "EmphasisMark"};
  var EmphasisAsterisk = {resolve: "Emphasis", mark: "EmphasisMark"};
  var LinkStart = {};
  var ImageStart = {};
  var InlineDelimiter = class {
    constructor(type, from, to, side) {
      this.type = type;
      this.from = from;
      this.to = to;
      this.side = side;
    }
  };
  var Escapable = "!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~";
  var Punctuation = /[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;
  try {
    Punctuation = new RegExp("[\\p{Pc}|\\p{Pd}|\\p{Pe}|\\p{Pf}|\\p{Pi}|\\p{Po}|\\p{Ps}]", "u");
  } catch (_) {
  }
  var DefaultInline = {
    Escape(cx, next, start) {
      if (next != 92 || start == cx.end - 1)
        return -1;
      let escaped = cx.char(start + 1);
      for (let i = 0; i < Escapable.length; i++)
        if (Escapable.charCodeAt(i) == escaped)
          return cx.append(elt(Type.Escape, start, start + 2));
      return -1;
    },
    Entity(cx, next, start) {
      if (next != 38)
        return -1;
      let m = /^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(cx.slice(start + 1, start + 31));
      return m ? cx.append(elt(Type.Entity, start, start + 1 + m[0].length)) : -1;
    },
    InlineCode(cx, next, start) {
      if (next != 96 || start && cx.char(start - 1) == 96)
        return -1;
      let pos = start + 1;
      while (pos < cx.end && cx.char(pos) == 96)
        pos++;
      let size = pos - start, curSize = 0;
      for (; pos < cx.end; pos++) {
        if (cx.char(pos) == 96) {
          curSize++;
          if (curSize == size && cx.char(pos + 1) != 96)
            return cx.append(elt(Type.InlineCode, start, pos + 1, [
              elt(Type.CodeMark, start, start + size),
              elt(Type.CodeMark, pos + 1 - size, pos + 1)
            ]));
        } else {
          curSize = 0;
        }
      }
      return -1;
    },
    HTMLTag(cx, next, start) {
      if (next != 60 || start == cx.end - 1)
        return -1;
      let after = cx.slice(start + 1, cx.end);
      let url = /^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(after);
      if (url)
        return cx.append(elt(Type.URL, start, start + 1 + url[0].length));
      let comment2 = /^!--[^>](?:-[^-]|[^-])*?-->/i.exec(after);
      if (comment2)
        return cx.append(elt(Type.Comment, start, start + 1 + comment2[0].length));
      let procInst = /^\?[^]*?\?>/.exec(after);
      if (procInst)
        return cx.append(elt(Type.ProcessingInstruction, start, start + 1 + procInst[0].length));
      let m = /^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(after);
      if (!m)
        return -1;
      return cx.append(elt(Type.HTMLTag, start, start + 1 + m[0].length));
    },
    Emphasis(cx, next, start) {
      if (next != 95 && next != 42)
        return -1;
      let pos = start + 1;
      while (cx.char(pos) == next)
        pos++;
      let before = cx.slice(start - 1, start), after = cx.slice(pos, pos + 1);
      let pBefore = Punctuation.test(before), pAfter = Punctuation.test(after);
      let sBefore = /\s|^$/.test(before), sAfter = /\s|^$/.test(after);
      let leftFlanking = !sAfter && (!pAfter || sBefore || pBefore);
      let rightFlanking = !sBefore && (!pBefore || sAfter || pAfter);
      let canOpen = leftFlanking && (next == 42 || !rightFlanking || pBefore);
      let canClose = rightFlanking && (next == 42 || !leftFlanking || pAfter);
      return cx.append(new InlineDelimiter(next == 95 ? EmphasisUnderscore : EmphasisAsterisk, start, pos, (canOpen ? 1 : 0) | (canClose ? 2 : 0)));
    },
    HardBreak(cx, next, start) {
      if (next == 92 && cx.char(start + 1) == 10)
        return cx.append(elt(Type.HardBreak, start, start + 2));
      if (next == 32) {
        let pos = start + 1;
        while (cx.char(pos) == 32)
          pos++;
        if (cx.char(pos) == 10 && pos >= start + 2)
          return cx.append(elt(Type.HardBreak, start, pos + 1));
      }
      return -1;
    },
    Link(cx, next, start) {
      return next == 91 ? cx.append(new InlineDelimiter(LinkStart, start, start + 1, 1)) : -1;
    },
    Image(cx, next, start) {
      return next == 33 && cx.char(start + 1) == 91 ? cx.append(new InlineDelimiter(ImageStart, start, start + 2, 1)) : -1;
    },
    LinkEnd(cx, next, start) {
      if (next != 93)
        return -1;
      for (let i = cx.parts.length - 1; i >= 0; i--) {
        let part = cx.parts[i];
        if (part instanceof InlineDelimiter && (part.type == LinkStart || part.type == ImageStart)) {
          if (!part.side || cx.skipSpace(part.to) == start && !/[(\[]/.test(cx.slice(start + 1, start + 2))) {
            cx.parts[i] = null;
            return -1;
          }
          let content2 = cx.takeContent(i);
          let link = cx.parts[i] = finishLink(cx, content2, part.type == LinkStart ? Type.Link : Type.Image, part.from, start + 1);
          if (part.type == LinkStart)
            for (let j = 0; j < i; j++) {
              let p = cx.parts[j];
              if (p instanceof InlineDelimiter && p.type == LinkStart)
                p.side = 0;
            }
          return link.to;
        }
      }
      return -1;
    }
  };
  function finishLink(cx, content2, type, start, startPos) {
    let {text} = cx, next = cx.char(startPos), endPos = startPos;
    content2.unshift(elt(Type.LinkMark, start, start + (type == Type.Image ? 2 : 1)));
    content2.push(elt(Type.LinkMark, startPos - 1, startPos));
    if (next == 40) {
      let pos = cx.skipSpace(startPos + 1);
      let dest = parseURL(text, pos - cx.offset, cx.offset), title;
      if (dest) {
        pos = cx.skipSpace(dest.to);
        title = parseLinkTitle(text, pos - cx.offset, cx.offset);
        if (title)
          pos = cx.skipSpace(title.to);
      }
      if (cx.char(pos) == 41) {
        content2.push(elt(Type.LinkMark, startPos, startPos + 1));
        endPos = pos + 1;
        if (dest)
          content2.push(dest);
        if (title)
          content2.push(title);
        content2.push(elt(Type.LinkMark, pos, endPos));
      }
    } else if (next == 91) {
      let label = parseLinkLabel(text, startPos - cx.offset, cx.offset, false);
      if (label) {
        content2.push(label);
        endPos = label.to;
      }
    }
    return elt(type, start, endPos, content2);
  }
  function parseURL(text, start, offset) {
    let next = text.charCodeAt(start);
    if (next == 60) {
      for (let pos = start + 1; pos < text.length; pos++) {
        let ch = text.charCodeAt(pos);
        if (ch == 62)
          return elt(Type.URL, start + offset, pos + 1 + offset);
        if (ch == 60 || ch == 10)
          return false;
      }
      return null;
    } else {
      let depth = 0, pos = start;
      for (let escaped = false; pos < text.length; pos++) {
        let ch = text.charCodeAt(pos);
        if (space3(ch)) {
          break;
        } else if (escaped) {
          escaped = false;
        } else if (ch == 40) {
          depth++;
        } else if (ch == 41) {
          if (!depth)
            break;
          depth--;
        } else if (ch == 92) {
          escaped = true;
        }
      }
      return pos > start ? elt(Type.URL, start + offset, pos + offset) : pos == text.length ? null : false;
    }
  }
  function parseLinkTitle(text, start, offset) {
    let next = text.charCodeAt(start);
    if (next != 39 && next != 34 && next != 40)
      return false;
    let end = next == 40 ? 41 : next;
    for (let pos = start + 1, escaped = false; pos < text.length; pos++) {
      let ch = text.charCodeAt(pos);
      if (escaped)
        escaped = false;
      else if (ch == end)
        return elt(Type.LinkTitle, start + offset, pos + 1 + offset);
      else if (ch == 92)
        escaped = true;
    }
    return null;
  }
  function parseLinkLabel(text, start, offset, requireNonWS) {
    for (let escaped = false, pos = start + 1, end = Math.min(text.length, pos + 999); pos < end; pos++) {
      let ch = text.charCodeAt(pos);
      if (escaped)
        escaped = false;
      else if (ch == 93)
        return requireNonWS ? false : elt(Type.LinkLabel, start + offset, pos + 1 + offset);
      else {
        if (requireNonWS && !space3(ch))
          requireNonWS = false;
        if (ch == 91)
          return false;
        else if (ch == 92)
          escaped = true;
      }
    }
    return null;
  }
  var InlineContext = class {
    constructor(parser7, text, offset) {
      this.parser = parser7;
      this.text = text;
      this.offset = offset;
      this.parts = [];
    }
    char(pos) {
      return pos >= this.end ? -1 : this.text.charCodeAt(pos - this.offset);
    }
    get end() {
      return this.offset + this.text.length;
    }
    slice(from, to) {
      return this.text.slice(from - this.offset, to - this.offset);
    }
    append(elt2) {
      this.parts.push(elt2);
      return elt2.to;
    }
    addDelimiter(type, from, to, open, close) {
      return this.append(new InlineDelimiter(type, from, to, (open ? 1 : 0) | (close ? 2 : 0)));
    }
    addElement(elt2) {
      return this.append(elt2);
    }
    resolveMarkers(from) {
      for (let i = from; i < this.parts.length; i++) {
        let close = this.parts[i];
        if (!(close instanceof InlineDelimiter && close.type.resolve && close.side & 2))
          continue;
        let emp = close.type == EmphasisUnderscore || close.type == EmphasisAsterisk;
        let closeSize = close.to - close.from;
        let open, j = i - 1;
        for (; j >= from; j--) {
          let part = this.parts[j];
          if (part instanceof InlineDelimiter && part.side & 1 && part.type == close.type && !(emp && (close.side & 1 || part.side & 2) && (part.to - part.from + closeSize) % 3 == 0 && ((part.to - part.from) % 3 || closeSize % 3))) {
            open = part;
            break;
          }
        }
        if (!open)
          continue;
        let type = close.type.resolve, content2 = [];
        let start = open.from, end = close.to;
        if (emp) {
          let size = Math.min(2, open.to - open.from, closeSize);
          start = open.to - size;
          end = close.from + size;
          type = size == 1 ? "Emphasis" : "StrongEmphasis";
        }
        if (open.type.mark)
          content2.push(this.elt(open.type.mark, start, open.to));
        for (let k = j + 1; k < i; k++) {
          if (this.parts[k] instanceof Element4)
            content2.push(this.parts[k]);
          this.parts[k] = null;
        }
        if (close.type.mark)
          content2.push(this.elt(close.type.mark, close.from, end));
        let element = this.elt(type, start, end, content2);
        this.parts[j] = emp && open.from != start ? new InlineDelimiter(open.type, open.from, start, open.side) : null;
        let keep = this.parts[i] = emp && close.to != end ? new InlineDelimiter(close.type, end, close.to, close.side) : null;
        if (keep)
          this.parts.splice(i, 0, element);
        else
          this.parts[i] = element;
      }
      let result = [];
      for (let i = from; i < this.parts.length; i++) {
        let part = this.parts[i];
        if (part instanceof Element4)
          result.push(part);
      }
      return result;
    }
    findOpeningDelimiter(type) {
      for (let i = this.parts.length - 1; i >= 0; i--) {
        let part = this.parts[i];
        if (part instanceof InlineDelimiter && part.type == type)
          return i;
      }
      return null;
    }
    takeContent(startIndex) {
      let content2 = this.resolveMarkers(startIndex);
      this.parts.length = startIndex;
      return content2;
    }
    skipSpace(from) {
      return skipSpace(this.text, from - this.offset) + this.offset;
    }
    elt(type, from, to, children) {
      if (typeof type == "string")
        return elt(this.parser.getNodeType(type), from, to, children);
      return new TreeElement(type, from);
    }
  };
  function injectMarks(elements, marks) {
    if (!marks.length)
      return elements;
    if (!elements.length)
      return marks;
    let elts = elements.slice(), eI = 0;
    for (let mark of marks) {
      while (eI < elts.length && elts[eI].to < mark.to)
        eI++;
      if (eI < elts.length && elts[eI].from < mark.from) {
        let e = elts[eI];
        if (e instanceof Element4)
          elts[eI] = new Element4(e.type, e.from, e.to, injectMarks(e.children, [mark]));
      } else {
        elts.splice(eI++, 0, mark);
      }
    }
    return elts;
  }
  var NotLast = [Type.CodeBlock, Type.ListItem, Type.OrderedList, Type.BulletList];
  var FragmentCursor3 = class {
    constructor(fragments, input) {
      this.fragments = fragments;
      this.input = input;
      this.i = 0;
      this.fragment = null;
      this.fragmentEnd = -1;
      this.cursor = null;
      if (fragments.length)
        this.fragment = fragments[this.i++];
    }
    nextFragment() {
      this.fragment = this.i < this.fragments.length ? this.fragments[this.i++] : null;
      this.cursor = null;
      this.fragmentEnd = -1;
    }
    moveTo(pos, lineStart) {
      while (this.fragment && this.fragment.to <= pos)
        this.nextFragment();
      if (!this.fragment || this.fragment.from > (pos ? pos - 1 : 0))
        return false;
      if (this.fragmentEnd < 0) {
        let end = this.fragment.to;
        while (end > 0 && this.input.read(end - 1, end) != "\n")
          end--;
        this.fragmentEnd = end ? end - 1 : 0;
      }
      let c = this.cursor;
      if (!c) {
        c = this.cursor = this.fragment.tree.cursor();
        c.firstChild();
      }
      let rPos = pos + this.fragment.offset;
      while (c.to <= rPos)
        if (!c.parent())
          return false;
      for (; ; ) {
        if (c.from >= rPos)
          return this.fragment.from <= lineStart;
        if (!c.childAfter(rPos))
          return false;
      }
    }
    matches(hash2) {
      let tree = this.cursor.tree;
      return tree && tree.prop(NodeProp.contextHash) == hash2;
    }
    takeNodes(cx) {
      let cur2 = this.cursor, off = this.fragment.offset, fragEnd = this.fragmentEnd - (this.fragment.openEnd ? 1 : 0);
      let start = cx.absoluteLineStart, end = start, blockI = cx.block.children.length;
      let prevEnd = end, prevI = blockI;
      for (; ; ) {
        if (cur2.to - off > fragEnd) {
          if (cur2.type.isAnonymous && cur2.firstChild())
            continue;
          break;
        }
        cx.dontInject.add(cur2.tree);
        cx.addNode(cur2.tree, cur2.from - off);
        if (cur2.type.is("Block")) {
          if (NotLast.indexOf(cur2.type.id) < 0) {
            end = cur2.to - off;
            blockI = cx.block.children.length;
          } else {
            end = prevEnd;
            blockI = prevI;
            prevEnd = cur2.to - off;
            prevI = cx.block.children.length;
          }
        }
        if (!cur2.nextSibling())
          break;
      }
      while (cx.block.children.length > blockI) {
        cx.block.children.pop();
        cx.block.positions.pop();
      }
      return end - start;
    }
  };
  var markdownHighlighting = styleTags({
    "Blockquote/...": tags.quote,
    HorizontalRule: tags.contentSeparator,
    "ATXHeading1/... SetextHeading1/...": tags.heading1,
    "ATXHeading2/... SetextHeading2/...": tags.heading2,
    "ATXHeading3/...": tags.heading3,
    "ATXHeading4/...": tags.heading4,
    "ATXHeading5/...": tags.heading5,
    "ATXHeading6/...": tags.heading6,
    "Comment CommentBlock": tags.comment,
    Escape: tags.escape,
    Entity: tags.character,
    "Emphasis/...": tags.emphasis,
    "StrongEmphasis/...": tags.strong,
    "Link/... Image/...": tags.link,
    "OrderedList/... BulletList/...": tags.list,
    "BlockQuote/...": tags.quote,
    "InlineCode CodeText": tags.monospace,
    URL: tags.url,
    "HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark": tags.processingInstruction,
    "CodeInfo LinkLabel": tags.labelName,
    LinkTitle: tags.string,
    Paragraph: tags.content
  });
  var parser6 = new MarkdownParser(new NodeSet(nodeTypes).extend(markdownHighlighting), Object.keys(DefaultBlockParsers).map((n) => DefaultBlockParsers[n]), Object.keys(DefaultBlockParsers).map((n) => DefaultLeafBlocks[n]), Object.keys(DefaultBlockParsers), DefaultEndLeaf, DefaultSkipMarkup, Object.keys(DefaultInline).map((n) => DefaultInline[n]), Object.keys(DefaultInline), []);
  function leftOverSpace(node, from, to) {
    let ranges = [];
    for (let n = node.firstChild, pos = from; ; n = n.nextSibling) {
      let nextPos = n ? n.from : to;
      if (nextPos > pos)
        ranges.push({from: pos, to: nextPos});
      if (!n)
        break;
      pos = n.to;
    }
    return ranges;
  }
  function parseCode(config) {
    let {codeParser, htmlParser} = config;
    let wrap = parseMixed((node, input) => {
      let id2 = node.type.id;
      if (codeParser && (id2 == Type.CodeBlock || id2 == Type.FencedCode)) {
        let info = "";
        if (id2 == Type.FencedCode) {
          let infoNode = node.node.getChild(Type.CodeInfo);
          if (infoNode)
            info = input.read(infoNode.from, infoNode.to);
        }
        let parser7 = codeParser(info);
        if (parser7)
          return {parser: parser7, overlay: (node2) => node2.type.id == Type.CodeText};
      } else if (htmlParser && (id2 == Type.HTMLBlock || id2 == Type.HTMLTag)) {
        return {parser: htmlParser, overlay: leftOverSpace(node.node, node.from, node.to)};
      }
      return null;
    });
    return {wrap};
  }
  var StrikethroughDelim = {resolve: "Strikethrough", mark: "StrikethroughMark"};
  var Strikethrough = {
    defineNodes: [{
      name: "Strikethrough",
      style: {"Strikethrough/...": tags.strikethrough}
    }, {
      name: "StrikethroughMark",
      style: tags.processingInstruction
    }],
    parseInline: [{
      name: "Strikethrough",
      parse(cx, next, pos) {
        if (next != 126 || cx.char(pos + 1) != 126 || cx.char(pos + 2) == 126)
          return -1;
        let before = cx.slice(pos - 1, pos), after = cx.slice(pos + 2, pos + 3);
        let sBefore = /\s|^$/.test(before), sAfter = /\s|^$/.test(after);
        let pBefore = Punctuation.test(before), pAfter = Punctuation.test(after);
        return cx.addDelimiter(StrikethroughDelim, pos, pos + 2, !sAfter && (!pAfter || sBefore || pBefore), !sBefore && (!pBefore || sAfter || pAfter));
      },
      after: "Emphasis"
    }]
  };
  function parseRow(cx, line, startI = 0, elts, offset = 0) {
    let count = 0, first = true, cellStart = -1, cellEnd = -1, esc = false;
    let parseCell = () => {
      elts.push(cx.elt("TableCell", offset + cellStart, offset + cellEnd, cx.parser.parseInline(line.slice(cellStart, cellEnd), offset + cellStart)));
    };
    for (let i = startI; i < line.length; i++) {
      let next = line.charCodeAt(i);
      if (next == 124 && !esc) {
        if (!first || cellStart > -1)
          count++;
        first = false;
        if (elts) {
          if (cellStart > -1)
            parseCell();
          elts.push(cx.elt("TableDelimiter", i + offset, i + offset + 1));
        }
        cellStart = cellEnd = -1;
      } else if (esc || next != 32 && next != 9) {
        if (cellStart < 0)
          cellStart = i;
        cellEnd = i + 1;
      }
      esc = !esc && next == 92;
    }
    if (cellStart > -1) {
      count++;
      if (elts)
        parseCell();
    }
    return count;
  }
  function hasPipe(str, start) {
    for (let i = start; i < str.length; i++) {
      let next = str.charCodeAt(i);
      if (next == 124)
        return true;
      if (next == 92)
        i++;
    }
    return false;
  }
  var delimiterLine = /^\|?(\s*:?-+:?\s*\|)+(\s*:?-+:?\s*)?$/;
  var TableParser = class {
    constructor() {
      this.rows = null;
    }
    nextLine(cx, line, leaf) {
      if (this.rows == null) {
        this.rows = false;
        let lineText;
        if ((line.next == 45 || line.next == 58 || line.next == 124) && delimiterLine.test(lineText = line.text.slice(line.pos))) {
          let firstRow = [], firstCount = parseRow(cx, leaf.content, 0, firstRow, leaf.start);
          if (firstCount == parseRow(cx, lineText, line.pos))
            this.rows = [
              cx.elt("TableHeader", leaf.start, leaf.start + leaf.content.length, firstRow),
              cx.elt("TableDelimiter", cx.lineStart + line.pos, cx.lineStart + line.text.length)
            ];
        }
      } else if (this.rows) {
        let content2 = [];
        parseRow(cx, line.text, line.pos, content2, cx.lineStart);
        this.rows.push(cx.elt("TableRow", cx.lineStart + line.pos, cx.lineStart + line.text.length, content2));
      }
      return false;
    }
    finish(cx, leaf) {
      if (!this.rows)
        return false;
      cx.addLeafElement(leaf, cx.elt("Table", leaf.start, leaf.start + leaf.content.length, this.rows));
      return true;
    }
  };
  var Table = {
    defineNodes: [
      {name: "Table", block: true},
      {name: "TableHeader", style: {"TableHeader/...": tags.heading}},
      "TableRow",
      {name: "TableCell", style: tags.content},
      {name: "TableDelimiter", style: tags.processingInstruction}
    ],
    parseBlock: [{
      name: "Table",
      leaf(_, leaf) {
        return hasPipe(leaf.content, 0) ? new TableParser() : null;
      },
      endLeaf(cx, line, leaf) {
        if (leaf.parsers.some((p) => p instanceof TableParser) || !hasPipe(line.text, line.basePos))
          return false;
        let next = cx.scanLine(cx.absoluteLineEnd + 1).text;
        return delimiterLine.test(next) && parseRow(cx, line.text, line.basePos) == parseRow(cx, next, line.basePos);
      },
      before: "SetextHeading"
    }]
  };
  var TaskParser = class {
    nextLine() {
      return false;
    }
    finish(cx, leaf) {
      cx.addLeafElement(leaf, cx.elt("Task", leaf.start, leaf.start + leaf.content.length, [
        cx.elt("TaskMarker", leaf.start, leaf.start + 3),
        ...cx.parser.parseInline(leaf.content.slice(3), leaf.start + 3)
      ]));
      return true;
    }
  };
  var TaskList = {
    defineNodes: [
      {name: "Task", block: true, style: tags.list},
      {name: "TaskMarker", style: tags.atom}
    ],
    parseBlock: [{
      name: "TaskList",
      leaf(cx, leaf) {
        return /^\[[ xX]\]/.test(leaf.content) && cx.parentType().name == "ListItem" ? new TaskParser() : null;
      },
      after: "SetextHeading"
    }]
  };
  var GFM = [Table, TaskList, Strikethrough];
  function parseSubSuper(ch, node, mark) {
    return (cx, next, pos) => {
      if (next != ch || cx.char(pos + 1) == ch)
        return -1;
      let elts = [cx.elt(mark, pos, pos + 1)];
      for (let i = pos + 1; i < cx.end; i++) {
        let next2 = cx.char(i);
        if (next2 == ch)
          return cx.addElement(cx.elt(node, pos, i + 1, elts.concat(cx.elt(mark, i, i + 1))));
        if (next2 == 92)
          elts.push(cx.elt("Escape", i, i++ + 2));
        if (space3(next2))
          break;
      }
      return -1;
    };
  }
  var Superscript = {
    defineNodes: [
      {name: "Superscript", style: tags.special(tags.content)},
      {name: "SuperscriptMark", style: tags.processingInstruction}
    ],
    parseInline: [{
      name: "Superscript",
      parse: parseSubSuper(94, "Superscript", "SuperscriptMark")
    }]
  };
  var Subscript = {
    defineNodes: [
      {name: "Subscript", style: tags.special(tags.content)},
      {name: "SubscriptMark", style: tags.processingInstruction}
    ],
    parseInline: [{
      name: "Subscript",
      parse: parseSubSuper(126, "Subscript", "SubscriptMark")
    }]
  };
  var Emoji = {
    defineNodes: [{name: "Emoji", style: tags.character}],
    parseInline: [{
      name: "Emoji",
      parse(cx, next, pos) {
        let match;
        if (next != 58 || !(match = /^[a-zA-Z_0-9]+:/.exec(cx.slice(pos + 1, cx.end))))
          return -1;
        return cx.addElement(cx.elt("Emoji", pos, pos + 1 + match[0].length));
      }
    }]
  };

  // node_modules/@codemirror/lang-markdown/dist/index.js
  var data = /* @__PURE__ */ defineLanguageFacet({block: {open: "<!--", close: "-->"}});
  var commonmark = /* @__PURE__ */ parser6.configure({
    props: [
      /* @__PURE__ */ foldNodeProp.add((type) => {
        if (!type.is("Block") || type.is("Document"))
          return void 0;
        return (tree, state) => ({from: state.doc.lineAt(tree.from).to, to: tree.to});
      }),
      /* @__PURE__ */ indentNodeProp.add({
        Document: () => null
      }),
      /* @__PURE__ */ languageDataProp.add({
        Document: data
      })
    ]
  });
  function mkLang(parser7) {
    return new Language(data, parser7, [], "markdown");
  }
  var commonmarkLanguage = /* @__PURE__ */ mkLang(commonmark);
  var extended = /* @__PURE__ */ commonmark.configure([GFM, Subscript, Superscript, Emoji]);
  var markdownLanguage = /* @__PURE__ */ mkLang(extended);
  function getCodeParser(languages, defaultLanguage) {
    return (info) => {
      if (info && languages) {
        let found = null;
        info = /\S*/.exec(info)[0];
        if (typeof languages == "function")
          found = languages(info);
        else
          found = LanguageDescription.matchLanguageName(languages, info, true);
        if (found instanceof LanguageDescription)
          return found.support ? found.support.language.parser : ParseContext.getSkippingParser(found.load());
        else if (found)
          return found.parser;
      }
      return defaultLanguage ? defaultLanguage.parser : null;
    };
  }
  var Context = class {
    constructor(node, from, to, spaceBefore, spaceAfter, type, item) {
      this.node = node;
      this.from = from;
      this.to = to;
      this.spaceBefore = spaceBefore;
      this.spaceAfter = spaceAfter;
      this.type = type;
      this.item = item;
    }
    blank(maxWidth, trailing = true) {
      let result = this.spaceBefore + (this.node.name == "Blockquote" ? ">" : "");
      if (maxWidth != null) {
        while (result.length < maxWidth)
          result += " ";
        return result;
      } else {
        for (let i = this.to - this.from - result.length - this.spaceAfter.length; i > 0; i--)
          result += " ";
        return result + (trailing ? this.spaceAfter : "");
      }
    }
    marker(doc2, add) {
      let number2 = this.node.name == "OrderedList" ? String(+itemNumber(this.item, doc2)[2] + add) : "";
      return this.spaceBefore + number2 + this.type + this.spaceAfter;
    }
  };
  function getContext(node, doc2) {
    let nodes = [];
    for (let cur2 = node; cur2 && cur2.name != "Document"; cur2 = cur2.parent) {
      if (cur2.name == "ListItem" || cur2.name == "Blockquote" || cur2.name == "FencedCode")
        nodes.push(cur2);
    }
    let context = [];
    for (let i = nodes.length - 1; i >= 0; i--) {
      let node2 = nodes[i], match;
      let line = doc2.lineAt(node2.from), startPos = node2.from - line.from;
      if (node2.name == "FencedCode") {
        context.push(new Context(node2, startPos, startPos, "", "", "", null));
      } else if (node2.name == "Blockquote" && (match = /^[ \t]*>( ?)/.exec(line.text.slice(startPos)))) {
        context.push(new Context(node2, startPos, startPos + match[0].length, "", match[1], ">", null));
      } else if (node2.name == "ListItem" && node2.parent.name == "OrderedList" && (match = /^([ \t]*)\d+([.)])([ \t]*)/.exec(line.text.slice(startPos)))) {
        let after = match[3], len = match[0].length;
        if (after.length >= 4) {
          after = after.slice(0, after.length - 4);
          len -= 4;
        }
        context.push(new Context(node2.parent, startPos, startPos + len, match[1], after, match[2], node2));
      } else if (node2.name == "ListItem" && node2.parent.name == "BulletList" && (match = /^([ \t]*)([-+*])([ \t]{1,4}\[[ xX]\])?([ \t]+)/.exec(line.text.slice(startPos)))) {
        let after = match[4], len = match[0].length;
        if (after.length > 4) {
          after = after.slice(0, after.length - 4);
          len -= 4;
        }
        let type = match[2];
        if (match[3])
          type += match[3].replace(/[xX]/, " ");
        context.push(new Context(node2.parent, startPos, startPos + len, match[1], after, type, node2));
      }
    }
    return context;
  }
  function itemNumber(item, doc2) {
    return /^(\s*)(\d+)(?=[.)])/.exec(doc2.sliceString(item.from, item.from + 10));
  }
  function renumberList(after, doc2, changes, offset = 0) {
    for (let prev = -1, node = after; ; ) {
      if (node.name == "ListItem") {
        let m = itemNumber(node, doc2);
        let number2 = +m[2];
        if (prev >= 0) {
          if (number2 != prev + 1)
            return;
          changes.push({from: node.from + m[1].length, to: node.from + m[0].length, insert: String(prev + 2 + offset)});
        }
        prev = number2;
      }
      let next = node.nextSibling;
      if (!next)
        break;
      node = next;
    }
  }
  var insertNewlineContinueMarkup = ({state, dispatch}) => {
    let tree = syntaxTree(state), {doc: doc2} = state;
    let dont = null, changes = state.changeByRange((range) => {
      if (!range.empty || !markdownLanguage.isActiveAt(state, range.from))
        return dont = {range};
      let pos = range.from, line = doc2.lineAt(pos);
      let context = getContext(tree.resolveInner(pos, -1), doc2);
      while (context.length && context[context.length - 1].from > pos - line.from)
        context.pop();
      if (!context.length)
        return dont = {range};
      let inner = context[context.length - 1];
      if (inner.to - inner.spaceAfter.length > pos - line.from)
        return dont = {range};
      let emptyLine = pos >= inner.to - inner.spaceAfter.length && !/\S/.test(line.text.slice(inner.to));
      if (inner.item && emptyLine) {
        if (inner.node.firstChild.to >= pos || line.from > 0 && !/[^\s>]/.test(doc2.lineAt(line.from - 1).text)) {
          let next = context.length > 1 ? context[context.length - 2] : null;
          let delTo, insert3 = "";
          if (next && next.item) {
            delTo = line.from + next.from;
            insert3 = next.marker(doc2, 1);
          } else {
            delTo = line.from + (next ? next.to : 0);
          }
          let changes3 = [{from: delTo, to: pos, insert: insert3}];
          if (inner.node.name == "OrderedList")
            renumberList(inner.item, doc2, changes3, -2);
          if (next && next.node.name == "OrderedList")
            renumberList(next.item, doc2, changes3);
          return {range: EditorSelection.cursor(delTo + insert3.length), changes: changes3};
        } else {
          let insert3 = "";
          for (let i = 0, e = context.length - 2; i <= e; i++) {
            insert3 += context[i].blank(i < e ? context[i + 1].from - insert3.length : null, i < e);
          }
          insert3 += state.lineBreak;
          return {range: EditorSelection.cursor(pos + insert3.length), changes: {from: line.from, insert: insert3}};
        }
      }
      if (inner.node.name == "Blockquote" && emptyLine && line.from) {
        let prevLine = doc2.lineAt(line.from - 1), quoted = />\s*$/.exec(prevLine.text);
        if (quoted && quoted.index == inner.from) {
          let changes3 = state.changes([
            {from: prevLine.from + quoted.index, to: prevLine.to},
            {from: line.from + inner.from, to: line.to}
          ]);
          return {range: range.map(changes3), changes: changes3};
        }
      }
      let changes2 = [];
      if (inner.node.name == "OrderedList")
        renumberList(inner.item, doc2, changes2);
      let continued = inner.item && inner.item.from < line.from;
      let insert2 = "";
      if (!continued || /^[\s\d.)\-+*>]*/.exec(line.text)[0].length >= inner.to) {
        for (let i = 0, e = context.length - 1; i <= e; i++) {
          insert2 += i == e && !continued ? context[i].marker(doc2, 1) : context[i].blank(i < e ? context[i + 1].from - insert2.length : null);
        }
      }
      let from = pos;
      while (from > line.from && /\s/.test(line.text.charAt(from - line.from - 1)))
        from--;
      insert2 = state.lineBreak + insert2;
      changes2.push({from, to: pos, insert: insert2});
      return {range: EditorSelection.cursor(from + insert2.length), changes: changes2};
    });
    if (dont)
      return false;
    dispatch(state.update(changes, {scrollIntoView: true, userEvent: "input"}));
    return true;
  };
  function isMark(node) {
    return node.name == "QuoteMark" || node.name == "ListMark";
  }
  function contextNodeForDelete(tree, pos) {
    let node = tree.resolveInner(pos, -1), scan = pos;
    if (isMark(node)) {
      scan = node.from;
      node = node.parent;
    }
    for (let prev; prev = node.childBefore(scan); ) {
      if (isMark(prev)) {
        scan = prev.from;
      } else if (prev.name == "OrderedList" || prev.name == "BulletList") {
        node = prev.lastChild;
        scan = node.to;
      } else {
        break;
      }
    }
    return node;
  }
  var deleteMarkupBackward = ({state, dispatch}) => {
    let tree = syntaxTree(state);
    let dont = null, changes = state.changeByRange((range) => {
      let pos = range.from, {doc: doc2} = state;
      if (range.empty && markdownLanguage.isActiveAt(state, range.from)) {
        let line = doc2.lineAt(pos);
        let context = getContext(contextNodeForDelete(tree, pos), doc2);
        if (context.length) {
          let inner = context[context.length - 1];
          let spaceEnd = inner.to - inner.spaceAfter.length + (inner.spaceAfter ? 1 : 0);
          if (pos - line.from > spaceEnd && !/\S/.test(line.text.slice(spaceEnd, pos - line.from)))
            return {
              range: EditorSelection.cursor(line.from + spaceEnd),
              changes: {from: line.from + spaceEnd, to: pos}
            };
          if (pos - line.from == spaceEnd) {
            let start = line.from + inner.from;
            if (inner.item && inner.node.from < inner.item.from && /\S/.test(line.text.slice(inner.from, inner.to)))
              return {range, changes: {from: start, to: line.from + inner.to, insert: inner.blank(inner.to - inner.from)}};
            if (start < pos)
              return {range: EditorSelection.cursor(start), changes: {from: start, to: pos}};
          }
        }
      }
      return dont = {range};
    });
    if (dont)
      return false;
    dispatch(state.update(changes, {scrollIntoView: true, userEvent: "delete"}));
    return true;
  };
  var markdownKeymap = [
    {key: "Enter", run: insertNewlineContinueMarkup},
    {key: "Backspace", run: deleteMarkupBackward}
  ];
  var htmlNoMatch = /* @__PURE__ */ html({matchClosingTags: false});
  function markdown(config = {}) {
    let {codeLanguages, defaultCodeLanguage, addKeymap = true, base: {parser: parser7} = commonmarkLanguage} = config;
    if (!(parser7 instanceof MarkdownParser))
      throw new RangeError("Base parser provided to `markdown` should be a Markdown parser");
    let extensions = config.extensions ? [config.extensions] : [];
    let support = [htmlNoMatch.support], defaultCode;
    if (defaultCodeLanguage instanceof LanguageSupport) {
      support.push(defaultCodeLanguage.support);
      defaultCode = defaultCodeLanguage.language;
    } else if (defaultCodeLanguage) {
      defaultCode = defaultCodeLanguage;
    }
    let codeParser = codeLanguages || defaultCode ? getCodeParser(codeLanguages, defaultCode) : void 0;
    extensions.push(parseCode({codeParser, htmlParser: htmlNoMatch.language.parser}));
    if (addKeymap)
      support.push(Prec.high(keymap.of(markdownKeymap)));
    return new LanguageSupport(mkLang(parser7.configure(extensions)), support);
  }

  // node_modules/@uiw/codemirror-themes/esm/index.js
  var createTheme = (_ref) => {
    var {
      theme: theme3,
      settings,
      styles
    } = _ref;
    var themeOptions = {
      "&": {
        backgroundColor: settings.background,
        color: settings.foreground
      },
      ".cm-gutters": {}
    };
    if (settings.fontFamily) {
      themeOptions["&.cm-editor .cm-scroller"] = {
        fontFamily: settings.fontFamily
      };
    }
    if (settings.gutterBackground) {
      themeOptions[".cm-gutters"].backgroundColor = settings.gutterBackground;
    }
    if (settings.gutterForeground) {
      themeOptions[".cm-gutters"].color = settings.gutterForeground;
    }
    if (settings.gutterBorder) {
      themeOptions[".cm-gutters"].borderRightColor = settings.gutterBorder;
    }
    if (settings.caret) {
      themeOptions[".cm-content"] = {
        caretColor: settings.caret
      };
      themeOptions[".cm-cursor, .cm-dropCursor"] = {
        borderLeftColor: settings.caret
      };
    }
    var activeLineGutterStyle = {};
    if (settings.gutterActiveForeground) {
      activeLineGutterStyle.color = settings.gutterActiveForeground;
    }
    if (settings.lineHighlight) {
      themeOptions[".cm-activeLine"] = {
        backgroundColor: settings.lineHighlight
      };
      activeLineGutterStyle.backgroundColor = settings.lineHighlight;
    }
    themeOptions[".cm-activeLineGutter"] = activeLineGutterStyle;
    if (settings.selection) {
      themeOptions["&.cm-focused .cm-selectionBackground, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"] = {
        backgroundColor: settings.selection
      };
    }
    if (settings.selectionMatch) {
      themeOptions["& .cm-selectionMatch"] = {
        backgroundColor: settings.selectionMatch
      };
    }
    var themeExtension = EditorView.theme(themeOptions, {
      dark: theme3 === "dark"
    });
    var highlightStyle = HighlightStyle.define(styles);
    var extension = [themeExtension, syntaxHighlighting(highlightStyle)];
    return extension;
  };

  // resources/js/themes/dark.js
  var darkTheme2 = createTheme({
    theme: "dark",
    settings: {
      background: "#292A30",
      foreground: "#CECFD0",
      caret: "#fff",
      selection: "#727377",
      selectionMatch: "#727377",
      lineHighlight: "#2F3239"
    },
    styles: [
      {tag: [tags.comment, tags.quote], color: "#7F8C98"},
      {tag: [tags.keyword], color: "#FF7AB2", fontWeight: "bold"},
      {tag: [tags.string, tags.meta], color: "#FF8170"},
      {tag: [tags.typeName], color: "#DABAFF"},
      {tag: [tags.definition(tags.variableName)], color: "#6BDFFF"},
      {tag: [tags.name], color: "#6BAA9F"},
      {tag: [tags.variableName], color: "#ACF2E4"},
      {tag: [tags.regexp, tags.link], color: "#FF8170"}
    ]
  });
  var dark_default = darkTheme2;

  // resources/js/themes/light.js
  var lightTheme = createTheme({
    theme: "light",
    settings: {
      background: "#fff",
      foreground: "#3D3D3D",
      selection: "#BBDFFF",
      selectionMatch: "#BBDFFF",
      gutterBackground: "#fff",
      gutterForeground: "#AFAFAF",
      lineHighlight: "#EDF4FF"
    },
    styles: [
      {tag: [tags.comment, tags.quote], color: "#707F8D"},
      {tag: [tags.typeName, tags.typeOperator], color: "#aa0d91"},
      {tag: [tags.keyword], color: "#aa0d91", fontWeight: "bold"},
      {tag: [tags.string, tags.meta], color: "#D23423"},
      {tag: [tags.name], color: "#032f62"},
      {tag: [tags.typeName], color: "#522BB2"},
      {tag: [tags.variableName], color: "#23575C"},
      {tag: [tags.definition(tags.variableName)], color: "#327A9E"},
      {tag: [tags.regexp, tags.link], color: "#0e0eff"}
    ]
  });
  var light_default = lightTheme;

  // resources/js/code-field.js
  var theme2 = new Compartment();
  var code_field_default = (Alpine) => {
    Alpine.data("filamentCodeField", ({
      state,
      language: language2,
      disabled,
      withLineNumbers,
      withAutocompletion
    }) => {
      return {
        state,
        codeMirror: null,
        parsers: {json, css, html, javascript, xml, markdown},
        init() {
          this.codeMirror = new EditorView({
            doc: this.parsedState(),
            extensions: this.buildExtensionsArray(),
            parent: this.$refs.codeBlock
          });
          window.addEventListener("dark-mode-toggled", (e) => {
            this.codeMirror.dispatch({
              effects: theme2.reconfigure(e.detail === "dark" ? dark_default : light_default)
            });
          });
        },
        parsedState() {
          if (language2 === "json") {
            return this.state ? this.state : "{\n\n}";
          }
          return this.state;
        },
        buildExtensionsArray() {
          const darkModeElement = document.querySelector("[dark-mode]");
          const lightMode = darkModeElement._x_dataStack[0].theme === "light";
          let extensions = [
            this.parsers[language2](),
            keymap.of([indentWithTab]),
            theme2.of(lightMode ? light_default : dark_default),
            EditorView.contentAttributes.of({contenteditable: !disabled}),
            EditorView.lineWrapping,
            EditorView.updateListener.of((v) => {
              if (v.docChanged) {
                this.state = v.state.doc.toString();
              }
            })
          ];
          if (withAutocompletion) {
            extensions.push(autocompletion());
          }
          if (withLineNumbers) {
            extensions.push(lineNumbers());
          }
          return extensions;
        }
      };
    });
  };

  // resources/js/plugin.js
  document.addEventListener("alpine:init", () => {
    window.Alpine.plugin(code_field_default);
  });
})();
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vbm9kZV9tb2R1bGVzL0Bjb2RlbWlycm9yL3N0YXRlL2Rpc3QvaW5kZXguanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLW1vZC9zcmMvc3R5bGUtbW9kLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy93M2Mta2V5bmFtZS9pbmRleC5lcy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGNvZGVtaXJyb3Ivdmlldy9kaXN0L2luZGV4LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AbGV6ZXIvY29tbW9uL2Rpc3QvaW5kZXguanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BsZXplci9oaWdobGlnaHQvZGlzdC9pbmRleC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGNvZGVtaXJyb3IvbGFuZ3VhZ2UvZGlzdC9pbmRleC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGNvZGVtaXJyb3IvY29tbWFuZHMvZGlzdC9pbmRleC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGNvZGVtaXJyb3IvYXV0b2NvbXBsZXRlL2Rpc3QvaW5kZXguanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BsZXplci9sci9kaXN0L2luZGV4LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AbGV6ZXIvanNvbi9kaXN0L2luZGV4LmVzLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AY29kZW1pcnJvci9sYW5nLWpzb24vZGlzdC9pbmRleC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGxlemVyL2Nzcy9kaXN0L2luZGV4LmVzLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AY29kZW1pcnJvci9sYW5nLWNzcy9kaXN0L2luZGV4LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AbGV6ZXIvaHRtbC9kaXN0L2luZGV4LmVzLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AbGV6ZXIvamF2YXNjcmlwdC9kaXN0L2luZGV4LmVzLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AY29kZW1pcnJvci9sYW5nLWphdmFzY3JpcHQvZGlzdC9pbmRleC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGNvZGVtaXJyb3IvbGFuZy1odG1sL2Rpc3QvaW5kZXguanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BsZXplci94bWwvZGlzdC9pbmRleC5lcy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGNvZGVtaXJyb3IvbGFuZy14bWwvZGlzdC9pbmRleC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGxlemVyL21hcmtkb3duL2Rpc3QvaW5kZXguanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0Bjb2RlbWlycm9yL2xhbmctbWFya2Rvd24vZGlzdC9pbmRleC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHVpdy9jb2RlbWlycm9yLXRoZW1lcy9zcmMvaW5kZXgudHN4IiwgIi4uL2pzL3RoZW1lcy9kYXJrLmpzIiwgIi4uL2pzL3RoZW1lcy9saWdodC5qcyIsICIuLi9qcy9jb2RlLWZpZWxkLmpzIiwgIi4uL2pzL3BsdWdpbi5qcyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLyoqXG5UaGUgZGF0YSBzdHJ1Y3R1cmUgZm9yIGRvY3VtZW50cy4gQG5vbmFic3RyYWN0XG4qL1xuY2xhc3MgVGV4dCB7XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgbGluZSBkZXNjcmlwdGlvbiBhcm91bmQgdGhlIGdpdmVuIHBvc2l0aW9uLlxuICAgICovXG4gICAgbGluZUF0KHBvcykge1xuICAgICAgICBpZiAocG9zIDwgMCB8fCBwb3MgPiB0aGlzLmxlbmd0aClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBJbnZhbGlkIHBvc2l0aW9uICR7cG9zfSBpbiBkb2N1bWVudCBvZiBsZW5ndGggJHt0aGlzLmxlbmd0aH1gKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubGluZUlubmVyKHBvcywgZmFsc2UsIDEsIDApO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIGRlc2NyaXB0aW9uIGZvciB0aGUgZ2l2ZW4gKDEtYmFzZWQpIGxpbmUgbnVtYmVyLlxuICAgICovXG4gICAgbGluZShuKSB7XG4gICAgICAgIGlmIChuIDwgMSB8fCBuID4gdGhpcy5saW5lcylcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBJbnZhbGlkIGxpbmUgbnVtYmVyICR7bn0gaW4gJHt0aGlzLmxpbmVzfS1saW5lIGRvY3VtZW50YCk7XG4gICAgICAgIHJldHVybiB0aGlzLmxpbmVJbm5lcihuLCB0cnVlLCAxLCAwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmVwbGFjZSBhIHJhbmdlIG9mIHRoZSB0ZXh0IHdpdGggdGhlIGdpdmVuIGNvbnRlbnQuXG4gICAgKi9cbiAgICByZXBsYWNlKGZyb20sIHRvLCB0ZXh0KSB7XG4gICAgICAgIGxldCBwYXJ0cyA9IFtdO1xuICAgICAgICB0aGlzLmRlY29tcG9zZSgwLCBmcm9tLCBwYXJ0cywgMiAvKiBPcGVuLlRvICovKTtcbiAgICAgICAgaWYgKHRleHQubGVuZ3RoKVxuICAgICAgICAgICAgdGV4dC5kZWNvbXBvc2UoMCwgdGV4dC5sZW5ndGgsIHBhcnRzLCAxIC8qIE9wZW4uRnJvbSAqLyB8IDIgLyogT3Blbi5UbyAqLyk7XG4gICAgICAgIHRoaXMuZGVjb21wb3NlKHRvLCB0aGlzLmxlbmd0aCwgcGFydHMsIDEgLyogT3Blbi5Gcm9tICovKTtcbiAgICAgICAgcmV0dXJuIFRleHROb2RlLmZyb20ocGFydHMsIHRoaXMubGVuZ3RoIC0gKHRvIC0gZnJvbSkgKyB0ZXh0Lmxlbmd0aCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEFwcGVuZCBhbm90aGVyIGRvY3VtZW50IHRvIHRoaXMgb25lLlxuICAgICovXG4gICAgYXBwZW5kKG90aGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcGxhY2UodGhpcy5sZW5ndGgsIHRoaXMubGVuZ3RoLCBvdGhlcik7XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHJpZXZlIHRoZSB0ZXh0IGJldHdlZW4gdGhlIGdpdmVuIHBvaW50cy5cbiAgICAqL1xuICAgIHNsaWNlKGZyb20sIHRvID0gdGhpcy5sZW5ndGgpIHtcbiAgICAgICAgbGV0IHBhcnRzID0gW107XG4gICAgICAgIHRoaXMuZGVjb21wb3NlKGZyb20sIHRvLCBwYXJ0cywgMCk7XG4gICAgICAgIHJldHVybiBUZXh0Tm9kZS5mcm9tKHBhcnRzLCB0byAtIGZyb20pO1xuICAgIH1cbiAgICAvKipcbiAgICBUZXN0IHdoZXRoZXIgdGhpcyB0ZXh0IGlzIGVxdWFsIHRvIGFub3RoZXIgaW5zdGFuY2UuXG4gICAgKi9cbiAgICBlcShvdGhlcikge1xuICAgICAgICBpZiAob3RoZXIgPT0gdGhpcylcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAob3RoZXIubGVuZ3RoICE9IHRoaXMubGVuZ3RoIHx8IG90aGVyLmxpbmVzICE9IHRoaXMubGluZXMpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCBzdGFydCA9IHRoaXMuc2NhbklkZW50aWNhbChvdGhlciwgMSksIGVuZCA9IHRoaXMubGVuZ3RoIC0gdGhpcy5zY2FuSWRlbnRpY2FsKG90aGVyLCAtMSk7XG4gICAgICAgIGxldCBhID0gbmV3IFJhd1RleHRDdXJzb3IodGhpcyksIGIgPSBuZXcgUmF3VGV4dEN1cnNvcihvdGhlcik7XG4gICAgICAgIGZvciAobGV0IHNraXAgPSBzdGFydCwgcG9zID0gc3RhcnQ7Oykge1xuICAgICAgICAgICAgYS5uZXh0KHNraXApO1xuICAgICAgICAgICAgYi5uZXh0KHNraXApO1xuICAgICAgICAgICAgc2tpcCA9IDA7XG4gICAgICAgICAgICBpZiAoYS5saW5lQnJlYWsgIT0gYi5saW5lQnJlYWsgfHwgYS5kb25lICE9IGIuZG9uZSB8fCBhLnZhbHVlICE9IGIudmFsdWUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgcG9zICs9IGEudmFsdWUubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGEuZG9uZSB8fCBwb3MgPj0gZW5kKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgIEl0ZXJhdGUgb3ZlciB0aGUgdGV4dC4gV2hlbiBgZGlyYCBpcyBgLTFgLCBpdGVyYXRpb24gaGFwcGVuc1xuICAgIGZyb20gZW5kIHRvIHN0YXJ0LiBUaGlzIHdpbGwgcmV0dXJuIGxpbmVzIGFuZCB0aGUgYnJlYWtzIGJldHdlZW5cbiAgICB0aGVtIGFzIHNlcGFyYXRlIHN0cmluZ3MuXG4gICAgKi9cbiAgICBpdGVyKGRpciA9IDEpIHsgcmV0dXJuIG5ldyBSYXdUZXh0Q3Vyc29yKHRoaXMsIGRpcik7IH1cbiAgICAvKipcbiAgICBJdGVyYXRlIG92ZXIgYSByYW5nZSBvZiB0aGUgdGV4dC4gV2hlbiBgZnJvbWAgPiBgdG9gLCB0aGVcbiAgICBpdGVyYXRvciB3aWxsIHJ1biBpbiByZXZlcnNlLlxuICAgICovXG4gICAgaXRlclJhbmdlKGZyb20sIHRvID0gdGhpcy5sZW5ndGgpIHsgcmV0dXJuIG5ldyBQYXJ0aWFsVGV4dEN1cnNvcih0aGlzLCBmcm9tLCB0byk7IH1cbiAgICAvKipcbiAgICBSZXR1cm4gYSBjdXJzb3IgdGhhdCBpdGVyYXRlcyBvdmVyIHRoZSBnaXZlbiByYW5nZSBvZiBsaW5lcyxcbiAgICBfd2l0aG91dF8gcmV0dXJuaW5nIHRoZSBsaW5lIGJyZWFrcyBiZXR3ZWVuLCBhbmQgeWllbGRpbmcgZW1wdHlcbiAgICBzdHJpbmdzIGZvciBlbXB0eSBsaW5lcy5cbiAgICBcbiAgICBXaGVuIGBmcm9tYCBhbmQgYHRvYCBhcmUgZ2l2ZW4sIHRoZXkgc2hvdWxkIGJlIDEtYmFzZWQgbGluZSBudW1iZXJzLlxuICAgICovXG4gICAgaXRlckxpbmVzKGZyb20sIHRvKSB7XG4gICAgICAgIGxldCBpbm5lcjtcbiAgICAgICAgaWYgKGZyb20gPT0gbnVsbCkge1xuICAgICAgICAgICAgaW5uZXIgPSB0aGlzLml0ZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0byA9PSBudWxsKVxuICAgICAgICAgICAgICAgIHRvID0gdGhpcy5saW5lcyArIDE7XG4gICAgICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLmxpbmUoZnJvbSkuZnJvbTtcbiAgICAgICAgICAgIGlubmVyID0gdGhpcy5pdGVyUmFuZ2Uoc3RhcnQsIE1hdGgubWF4KHN0YXJ0LCB0byA9PSB0aGlzLmxpbmVzICsgMSA/IHRoaXMubGVuZ3RoIDogdG8gPD0gMSA/IDAgOiB0aGlzLmxpbmUodG8gLSAxKS50bykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgTGluZUN1cnNvcihpbm5lcik7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgdG9TdHJpbmcoKSB7IHJldHVybiB0aGlzLnNsaWNlU3RyaW5nKDApOyB9XG4gICAgLyoqXG4gICAgQ29udmVydCB0aGUgZG9jdW1lbnQgdG8gYW4gYXJyYXkgb2YgbGluZXMgKHdoaWNoIGNhbiBiZVxuICAgIGRlc2VyaWFsaXplZCBhZ2FpbiB2aWEgW2BUZXh0Lm9mYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UZXh0Xm9mKSkuXG4gICAgKi9cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGxldCBsaW5lcyA9IFtdO1xuICAgICAgICB0aGlzLmZsYXR0ZW4obGluZXMpO1xuICAgICAgICByZXR1cm4gbGluZXM7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIGBUZXh0YCBpbnN0YW5jZSBmb3IgdGhlIGdpdmVuIGFycmF5IG9mIGxpbmVzLlxuICAgICovXG4gICAgc3RhdGljIG9mKHRleHQpIHtcbiAgICAgICAgaWYgKHRleHQubGVuZ3RoID09IDApXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkEgZG9jdW1lbnQgbXVzdCBoYXZlIGF0IGxlYXN0IG9uZSBsaW5lXCIpO1xuICAgICAgICBpZiAodGV4dC5sZW5ndGggPT0gMSAmJiAhdGV4dFswXSlcbiAgICAgICAgICAgIHJldHVybiBUZXh0LmVtcHR5O1xuICAgICAgICByZXR1cm4gdGV4dC5sZW5ndGggPD0gMzIgLyogVHJlZS5CcmFuY2ggKi8gPyBuZXcgVGV4dExlYWYodGV4dCkgOiBUZXh0Tm9kZS5mcm9tKFRleHRMZWFmLnNwbGl0KHRleHQsIFtdKSk7XG4gICAgfVxufVxuLy8gTGVhdmVzIHN0b3JlIGFuIGFycmF5IG9mIGxpbmUgc3RyaW5ncy4gVGhlcmUgYXJlIGFsd2F5cyBsaW5lIGJyZWFrc1xuLy8gYmV0d2VlbiB0aGVzZSBzdHJpbmdzLiBMZWF2ZXMgYXJlIGxpbWl0ZWQgaW4gc2l6ZSBhbmQgaGF2ZSB0byBiZVxuLy8gY29udGFpbmVkIGluIFRleHROb2RlIGluc3RhbmNlcyBmb3IgYmlnZ2VyIGRvY3VtZW50cy5cbmNsYXNzIFRleHRMZWFmIGV4dGVuZHMgVGV4dCB7XG4gICAgY29uc3RydWN0b3IodGV4dCwgbGVuZ3RoID0gdGV4dExlbmd0aCh0ZXh0KSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnRleHQgPSB0ZXh0O1xuICAgICAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aDtcbiAgICB9XG4gICAgZ2V0IGxpbmVzKCkgeyByZXR1cm4gdGhpcy50ZXh0Lmxlbmd0aDsgfVxuICAgIGdldCBjaGlsZHJlbigpIHsgcmV0dXJuIG51bGw7IH1cbiAgICBsaW5lSW5uZXIodGFyZ2V0LCBpc0xpbmUsIGxpbmUsIG9mZnNldCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDs7IGkrKykge1xuICAgICAgICAgICAgbGV0IHN0cmluZyA9IHRoaXMudGV4dFtpXSwgZW5kID0gb2Zmc2V0ICsgc3RyaW5nLmxlbmd0aDtcbiAgICAgICAgICAgIGlmICgoaXNMaW5lID8gbGluZSA6IGVuZCkgPj0gdGFyZ2V0KVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTGluZShvZmZzZXQsIGVuZCwgbGluZSwgc3RyaW5nKTtcbiAgICAgICAgICAgIG9mZnNldCA9IGVuZCArIDE7XG4gICAgICAgICAgICBsaW5lKys7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGVjb21wb3NlKGZyb20sIHRvLCB0YXJnZXQsIG9wZW4pIHtcbiAgICAgICAgbGV0IHRleHQgPSBmcm9tIDw9IDAgJiYgdG8gPj0gdGhpcy5sZW5ndGggPyB0aGlzXG4gICAgICAgICAgICA6IG5ldyBUZXh0TGVhZihzbGljZVRleHQodGhpcy50ZXh0LCBmcm9tLCB0byksIE1hdGgubWluKHRvLCB0aGlzLmxlbmd0aCkgLSBNYXRoLm1heCgwLCBmcm9tKSk7XG4gICAgICAgIGlmIChvcGVuICYgMSAvKiBPcGVuLkZyb20gKi8pIHtcbiAgICAgICAgICAgIGxldCBwcmV2ID0gdGFyZ2V0LnBvcCgpO1xuICAgICAgICAgICAgbGV0IGpvaW5lZCA9IGFwcGVuZFRleHQodGV4dC50ZXh0LCBwcmV2LnRleHQuc2xpY2UoKSwgMCwgdGV4dC5sZW5ndGgpO1xuICAgICAgICAgICAgaWYgKGpvaW5lZC5sZW5ndGggPD0gMzIgLyogVHJlZS5CcmFuY2ggKi8pIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQucHVzaChuZXcgVGV4dExlYWYoam9pbmVkLCBwcmV2Lmxlbmd0aCArIHRleHQubGVuZ3RoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgbWlkID0gam9pbmVkLmxlbmd0aCA+PiAxO1xuICAgICAgICAgICAgICAgIHRhcmdldC5wdXNoKG5ldyBUZXh0TGVhZihqb2luZWQuc2xpY2UoMCwgbWlkKSksIG5ldyBUZXh0TGVhZihqb2luZWQuc2xpY2UobWlkKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGFyZ2V0LnB1c2godGV4dCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVwbGFjZShmcm9tLCB0bywgdGV4dCkge1xuICAgICAgICBpZiAoISh0ZXh0IGluc3RhbmNlb2YgVGV4dExlYWYpKVxuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLnJlcGxhY2UoZnJvbSwgdG8sIHRleHQpO1xuICAgICAgICBsZXQgbGluZXMgPSBhcHBlbmRUZXh0KHRoaXMudGV4dCwgYXBwZW5kVGV4dCh0ZXh0LnRleHQsIHNsaWNlVGV4dCh0aGlzLnRleHQsIDAsIGZyb20pKSwgdG8pO1xuICAgICAgICBsZXQgbmV3TGVuID0gdGhpcy5sZW5ndGggKyB0ZXh0Lmxlbmd0aCAtICh0byAtIGZyb20pO1xuICAgICAgICBpZiAobGluZXMubGVuZ3RoIDw9IDMyIC8qIFRyZWUuQnJhbmNoICovKVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUZXh0TGVhZihsaW5lcywgbmV3TGVuKTtcbiAgICAgICAgcmV0dXJuIFRleHROb2RlLmZyb20oVGV4dExlYWYuc3BsaXQobGluZXMsIFtdKSwgbmV3TGVuKTtcbiAgICB9XG4gICAgc2xpY2VTdHJpbmcoZnJvbSwgdG8gPSB0aGlzLmxlbmd0aCwgbGluZVNlcCA9IFwiXFxuXCIpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFwiXCI7XG4gICAgICAgIGZvciAobGV0IHBvcyA9IDAsIGkgPSAwOyBwb3MgPD0gdG8gJiYgaSA8IHRoaXMudGV4dC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGxpbmUgPSB0aGlzLnRleHRbaV0sIGVuZCA9IHBvcyArIGxpbmUubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKHBvcyA+IGZyb20gJiYgaSlcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gbGluZVNlcDtcbiAgICAgICAgICAgIGlmIChmcm9tIDwgZW5kICYmIHRvID4gcG9zKVxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBsaW5lLnNsaWNlKE1hdGgubWF4KDAsIGZyb20gLSBwb3MpLCB0byAtIHBvcyk7XG4gICAgICAgICAgICBwb3MgPSBlbmQgKyAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGZsYXR0ZW4odGFyZ2V0KSB7XG4gICAgICAgIGZvciAobGV0IGxpbmUgb2YgdGhpcy50ZXh0KVxuICAgICAgICAgICAgdGFyZ2V0LnB1c2gobGluZSk7XG4gICAgfVxuICAgIHNjYW5JZGVudGljYWwoKSB7IHJldHVybiAwOyB9XG4gICAgc3RhdGljIHNwbGl0KHRleHQsIHRhcmdldCkge1xuICAgICAgICBsZXQgcGFydCA9IFtdLCBsZW4gPSAtMTtcbiAgICAgICAgZm9yIChsZXQgbGluZSBvZiB0ZXh0KSB7XG4gICAgICAgICAgICBwYXJ0LnB1c2gobGluZSk7XG4gICAgICAgICAgICBsZW4gKz0gbGluZS5sZW5ndGggKyAxO1xuICAgICAgICAgICAgaWYgKHBhcnQubGVuZ3RoID09IDMyIC8qIFRyZWUuQnJhbmNoICovKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0LnB1c2gobmV3IFRleHRMZWFmKHBhcnQsIGxlbikpO1xuICAgICAgICAgICAgICAgIHBhcnQgPSBbXTtcbiAgICAgICAgICAgICAgICBsZW4gPSAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobGVuID4gLTEpXG4gICAgICAgICAgICB0YXJnZXQucHVzaChuZXcgVGV4dExlYWYocGFydCwgbGVuKSk7XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxufVxuLy8gTm9kZXMgcHJvdmlkZSB0aGUgdHJlZSBzdHJ1Y3R1cmUgb2YgdGhlIGBUZXh0YCB0eXBlLiBUaGV5IHN0b3JlIGFcbi8vIG51bWJlciBvZiBvdGhlciBub2RlcyBvciBsZWF2ZXMsIHRha2luZyBjYXJlIHRvIGJhbGFuY2UgdGhlbXNlbHZlc1xuLy8gb24gY2hhbmdlcy4gVGhlcmUgYXJlIGltcGxpZWQgbGluZSBicmVha3MgX2JldHdlZW5fIHRoZSBjaGlsZHJlbiBvZlxuLy8gYSBub2RlIChidXQgbm90IGJlZm9yZSB0aGUgZmlyc3Qgb3IgYWZ0ZXIgdGhlIGxhc3QgY2hpbGQpLlxuY2xhc3MgVGV4dE5vZGUgZXh0ZW5kcyBUZXh0IHtcbiAgICBjb25zdHJ1Y3RvcihjaGlsZHJlbiwgbGVuZ3RoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBsZW5ndGg7XG4gICAgICAgIHRoaXMubGluZXMgPSAwO1xuICAgICAgICBmb3IgKGxldCBjaGlsZCBvZiBjaGlsZHJlbilcbiAgICAgICAgICAgIHRoaXMubGluZXMgKz0gY2hpbGQubGluZXM7XG4gICAgfVxuICAgIGxpbmVJbm5lcih0YXJnZXQsIGlzTGluZSwgbGluZSwgb2Zmc2V0KSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOzsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgY2hpbGQgPSB0aGlzLmNoaWxkcmVuW2ldLCBlbmQgPSBvZmZzZXQgKyBjaGlsZC5sZW5ndGgsIGVuZExpbmUgPSBsaW5lICsgY2hpbGQubGluZXMgLSAxO1xuICAgICAgICAgICAgaWYgKChpc0xpbmUgPyBlbmRMaW5lIDogZW5kKSA+PSB0YXJnZXQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkLmxpbmVJbm5lcih0YXJnZXQsIGlzTGluZSwgbGluZSwgb2Zmc2V0KTtcbiAgICAgICAgICAgIG9mZnNldCA9IGVuZCArIDE7XG4gICAgICAgICAgICBsaW5lID0gZW5kTGluZSArIDE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGVjb21wb3NlKGZyb20sIHRvLCB0YXJnZXQsIG9wZW4pIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIHBvcyA9IDA7IHBvcyA8PSB0byAmJiBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGNoaWxkID0gdGhpcy5jaGlsZHJlbltpXSwgZW5kID0gcG9zICsgY2hpbGQubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGZyb20gPD0gZW5kICYmIHRvID49IHBvcykge1xuICAgICAgICAgICAgICAgIGxldCBjaGlsZE9wZW4gPSBvcGVuICYgKChwb3MgPD0gZnJvbSA/IDEgLyogT3Blbi5Gcm9tICovIDogMCkgfCAoZW5kID49IHRvID8gMiAvKiBPcGVuLlRvICovIDogMCkpO1xuICAgICAgICAgICAgICAgIGlmIChwb3MgPj0gZnJvbSAmJiBlbmQgPD0gdG8gJiYgIWNoaWxkT3BlbilcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnB1c2goY2hpbGQpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQuZGVjb21wb3NlKGZyb20gLSBwb3MsIHRvIC0gcG9zLCB0YXJnZXQsIGNoaWxkT3Blbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwb3MgPSBlbmQgKyAxO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlcGxhY2UoZnJvbSwgdG8sIHRleHQpIHtcbiAgICAgICAgaWYgKHRleHQubGluZXMgPCB0aGlzLmxpbmVzKVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIHBvcyA9IDA7IGkgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNoaWxkID0gdGhpcy5jaGlsZHJlbltpXSwgZW5kID0gcG9zICsgY2hpbGQubGVuZ3RoO1xuICAgICAgICAgICAgICAgIC8vIEZhc3QgcGF0aDogaWYgdGhlIGNoYW5nZSBvbmx5IGFmZmVjdHMgb25lIGNoaWxkIGFuZCB0aGVcbiAgICAgICAgICAgICAgICAvLyBjaGlsZCdzIHNpemUgcmVtYWlucyBpbiB0aGUgYWNjZXB0YWJsZSByYW5nZSwgb25seSB1cGRhdGVcbiAgICAgICAgICAgICAgICAvLyB0aGF0IGNoaWxkXG4gICAgICAgICAgICAgICAgaWYgKGZyb20gPj0gcG9zICYmIHRvIDw9IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdXBkYXRlZCA9IGNoaWxkLnJlcGxhY2UoZnJvbSAtIHBvcywgdG8gLSBwb3MsIHRleHQpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgdG90YWxMaW5lcyA9IHRoaXMubGluZXMgLSBjaGlsZC5saW5lcyArIHVwZGF0ZWQubGluZXM7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1cGRhdGVkLmxpbmVzIDwgKHRvdGFsTGluZXMgPj4gKDUgLyogVHJlZS5CcmFuY2hTaGlmdCAqLyAtIDEpKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZC5saW5lcyA+ICh0b3RhbExpbmVzID4+ICg1IC8qIFRyZWUuQnJhbmNoU2hpZnQgKi8gKyAxKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb3B5ID0gdGhpcy5jaGlsZHJlbi5zbGljZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29weVtpXSA9IHVwZGF0ZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFRleHROb2RlKGNvcHksIHRoaXMubGVuZ3RoIC0gKHRvIC0gZnJvbSkgKyB0ZXh0Lmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLnJlcGxhY2UocG9zLCBlbmQsIHVwZGF0ZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwb3MgPSBlbmQgKyAxO1xuICAgICAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3VwZXIucmVwbGFjZShmcm9tLCB0bywgdGV4dCk7XG4gICAgfVxuICAgIHNsaWNlU3RyaW5nKGZyb20sIHRvID0gdGhpcy5sZW5ndGgsIGxpbmVTZXAgPSBcIlxcblwiKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBcIlwiO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgcG9zID0gMDsgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoICYmIHBvcyA8PSB0bzsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgY2hpbGQgPSB0aGlzLmNoaWxkcmVuW2ldLCBlbmQgPSBwb3MgKyBjaGlsZC5sZW5ndGg7XG4gICAgICAgICAgICBpZiAocG9zID4gZnJvbSAmJiBpKVxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBsaW5lU2VwO1xuICAgICAgICAgICAgaWYgKGZyb20gPCBlbmQgJiYgdG8gPiBwb3MpXG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IGNoaWxkLnNsaWNlU3RyaW5nKGZyb20gLSBwb3MsIHRvIC0gcG9zLCBsaW5lU2VwKTtcbiAgICAgICAgICAgIHBvcyA9IGVuZCArIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgZmxhdHRlbih0YXJnZXQpIHtcbiAgICAgICAgZm9yIChsZXQgY2hpbGQgb2YgdGhpcy5jaGlsZHJlbilcbiAgICAgICAgICAgIGNoaWxkLmZsYXR0ZW4odGFyZ2V0KTtcbiAgICB9XG4gICAgc2NhbklkZW50aWNhbChvdGhlciwgZGlyKSB7XG4gICAgICAgIGlmICghKG90aGVyIGluc3RhbmNlb2YgVGV4dE5vZGUpKVxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIGxldCBsZW5ndGggPSAwO1xuICAgICAgICBsZXQgW2lBLCBpQiwgZUEsIGVCXSA9IGRpciA+IDAgPyBbMCwgMCwgdGhpcy5jaGlsZHJlbi5sZW5ndGgsIG90aGVyLmNoaWxkcmVuLmxlbmd0aF1cbiAgICAgICAgICAgIDogW3RoaXMuY2hpbGRyZW4ubGVuZ3RoIC0gMSwgb3RoZXIuY2hpbGRyZW4ubGVuZ3RoIC0gMSwgLTEsIC0xXTtcbiAgICAgICAgZm9yICg7OyBpQSArPSBkaXIsIGlCICs9IGRpcikge1xuICAgICAgICAgICAgaWYgKGlBID09IGVBIHx8IGlCID09IGVCKVxuICAgICAgICAgICAgICAgIHJldHVybiBsZW5ndGg7XG4gICAgICAgICAgICBsZXQgY2hBID0gdGhpcy5jaGlsZHJlbltpQV0sIGNoQiA9IG90aGVyLmNoaWxkcmVuW2lCXTtcbiAgICAgICAgICAgIGlmIChjaEEgIT0gY2hCKVxuICAgICAgICAgICAgICAgIHJldHVybiBsZW5ndGggKyBjaEEuc2NhbklkZW50aWNhbChjaEIsIGRpcik7XG4gICAgICAgICAgICBsZW5ndGggKz0gY2hBLmxlbmd0aCArIDE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGZyb20oY2hpbGRyZW4sIGxlbmd0aCA9IGNoaWxkcmVuLnJlZHVjZSgobCwgY2gpID0+IGwgKyBjaC5sZW5ndGggKyAxLCAtMSkpIHtcbiAgICAgICAgbGV0IGxpbmVzID0gMDtcbiAgICAgICAgZm9yIChsZXQgY2ggb2YgY2hpbGRyZW4pXG4gICAgICAgICAgICBsaW5lcyArPSBjaC5saW5lcztcbiAgICAgICAgaWYgKGxpbmVzIDwgMzIgLyogVHJlZS5CcmFuY2ggKi8pIHtcbiAgICAgICAgICAgIGxldCBmbGF0ID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBjaCBvZiBjaGlsZHJlbilcbiAgICAgICAgICAgICAgICBjaC5mbGF0dGVuKGZsYXQpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBUZXh0TGVhZihmbGF0LCBsZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBjaHVuayA9IE1hdGgubWF4KDMyIC8qIFRyZWUuQnJhbmNoICovLCBsaW5lcyA+PiA1IC8qIFRyZWUuQnJhbmNoU2hpZnQgKi8pLCBtYXhDaHVuayA9IGNodW5rIDw8IDEsIG1pbkNodW5rID0gY2h1bmsgPj4gMTtcbiAgICAgICAgbGV0IGNodW5rZWQgPSBbXSwgY3VycmVudExpbmVzID0gMCwgY3VycmVudExlbiA9IC0xLCBjdXJyZW50Q2h1bmsgPSBbXTtcbiAgICAgICAgZnVuY3Rpb24gYWRkKGNoaWxkKSB7XG4gICAgICAgICAgICBsZXQgbGFzdDtcbiAgICAgICAgICAgIGlmIChjaGlsZC5saW5lcyA+IG1heENodW5rICYmIGNoaWxkIGluc3RhbmNlb2YgVGV4dE5vZGUpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBub2RlIG9mIGNoaWxkLmNoaWxkcmVuKVxuICAgICAgICAgICAgICAgICAgICBhZGQobm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGlsZC5saW5lcyA+IG1pbkNodW5rICYmIChjdXJyZW50TGluZXMgPiBtaW5DaHVuayB8fCAhY3VycmVudExpbmVzKSkge1xuICAgICAgICAgICAgICAgIGZsdXNoKCk7XG4gICAgICAgICAgICAgICAgY2h1bmtlZC5wdXNoKGNoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoaWxkIGluc3RhbmNlb2YgVGV4dExlYWYgJiYgY3VycmVudExpbmVzICYmXG4gICAgICAgICAgICAgICAgKGxhc3QgPSBjdXJyZW50Q2h1bmtbY3VycmVudENodW5rLmxlbmd0aCAtIDFdKSBpbnN0YW5jZW9mIFRleHRMZWFmICYmXG4gICAgICAgICAgICAgICAgY2hpbGQubGluZXMgKyBsYXN0LmxpbmVzIDw9IDMyIC8qIFRyZWUuQnJhbmNoICovKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudExpbmVzICs9IGNoaWxkLmxpbmVzO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRMZW4gKz0gY2hpbGQubGVuZ3RoICsgMTtcbiAgICAgICAgICAgICAgICBjdXJyZW50Q2h1bmtbY3VycmVudENodW5rLmxlbmd0aCAtIDFdID0gbmV3IFRleHRMZWFmKGxhc3QudGV4dC5jb25jYXQoY2hpbGQudGV4dCksIGxhc3QubGVuZ3RoICsgMSArIGNoaWxkLmxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudExpbmVzICsgY2hpbGQubGluZXMgPiBjaHVuaylcbiAgICAgICAgICAgICAgICAgICAgZmx1c2goKTtcbiAgICAgICAgICAgICAgICBjdXJyZW50TGluZXMgKz0gY2hpbGQubGluZXM7XG4gICAgICAgICAgICAgICAgY3VycmVudExlbiArPSBjaGlsZC5sZW5ndGggKyAxO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRDaHVuay5wdXNoKGNoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBmbHVzaCgpIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50TGluZXMgPT0gMClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBjaHVua2VkLnB1c2goY3VycmVudENodW5rLmxlbmd0aCA9PSAxID8gY3VycmVudENodW5rWzBdIDogVGV4dE5vZGUuZnJvbShjdXJyZW50Q2h1bmssIGN1cnJlbnRMZW4pKTtcbiAgICAgICAgICAgIGN1cnJlbnRMZW4gPSAtMTtcbiAgICAgICAgICAgIGN1cnJlbnRMaW5lcyA9IGN1cnJlbnRDaHVuay5sZW5ndGggPSAwO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIGNoaWxkcmVuKVxuICAgICAgICAgICAgYWRkKGNoaWxkKTtcbiAgICAgICAgZmx1c2goKTtcbiAgICAgICAgcmV0dXJuIGNodW5rZWQubGVuZ3RoID09IDEgPyBjaHVua2VkWzBdIDogbmV3IFRleHROb2RlKGNodW5rZWQsIGxlbmd0aCk7XG4gICAgfVxufVxuVGV4dC5lbXB0eSA9IC8qQF9fUFVSRV9fKi9uZXcgVGV4dExlYWYoW1wiXCJdLCAwKTtcbmZ1bmN0aW9uIHRleHRMZW5ndGgodGV4dCkge1xuICAgIGxldCBsZW5ndGggPSAtMTtcbiAgICBmb3IgKGxldCBsaW5lIG9mIHRleHQpXG4gICAgICAgIGxlbmd0aCArPSBsaW5lLmxlbmd0aCArIDE7XG4gICAgcmV0dXJuIGxlbmd0aDtcbn1cbmZ1bmN0aW9uIGFwcGVuZFRleHQodGV4dCwgdGFyZ2V0LCBmcm9tID0gMCwgdG8gPSAxZTkpIHtcbiAgICBmb3IgKGxldCBwb3MgPSAwLCBpID0gMCwgZmlyc3QgPSB0cnVlOyBpIDwgdGV4dC5sZW5ndGggJiYgcG9zIDw9IHRvOyBpKyspIHtcbiAgICAgICAgbGV0IGxpbmUgPSB0ZXh0W2ldLCBlbmQgPSBwb3MgKyBsaW5lLmxlbmd0aDtcbiAgICAgICAgaWYgKGVuZCA+PSBmcm9tKSB7XG4gICAgICAgICAgICBpZiAoZW5kID4gdG8pXG4gICAgICAgICAgICAgICAgbGluZSA9IGxpbmUuc2xpY2UoMCwgdG8gLSBwb3MpO1xuICAgICAgICAgICAgaWYgKHBvcyA8IGZyb20pXG4gICAgICAgICAgICAgICAgbGluZSA9IGxpbmUuc2xpY2UoZnJvbSAtIHBvcyk7XG4gICAgICAgICAgICBpZiAoZmlyc3QpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRbdGFyZ2V0Lmxlbmd0aCAtIDFdICs9IGxpbmU7XG4gICAgICAgICAgICAgICAgZmlyc3QgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0YXJnZXQucHVzaChsaW5lKTtcbiAgICAgICAgfVxuICAgICAgICBwb3MgPSBlbmQgKyAxO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xufVxuZnVuY3Rpb24gc2xpY2VUZXh0KHRleHQsIGZyb20sIHRvKSB7XG4gICAgcmV0dXJuIGFwcGVuZFRleHQodGV4dCwgW1wiXCJdLCBmcm9tLCB0byk7XG59XG5jbGFzcyBSYXdUZXh0Q3Vyc29yIHtcbiAgICBjb25zdHJ1Y3Rvcih0ZXh0LCBkaXIgPSAxKSB7XG4gICAgICAgIHRoaXMuZGlyID0gZGlyO1xuICAgICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5saW5lQnJlYWsgPSBmYWxzZTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IFwiXCI7XG4gICAgICAgIHRoaXMubm9kZXMgPSBbdGV4dF07XG4gICAgICAgIHRoaXMub2Zmc2V0cyA9IFtkaXIgPiAwID8gMSA6ICh0ZXh0IGluc3RhbmNlb2YgVGV4dExlYWYgPyB0ZXh0LnRleHQubGVuZ3RoIDogdGV4dC5jaGlsZHJlbi5sZW5ndGgpIDw8IDFdO1xuICAgIH1cbiAgICBuZXh0SW5uZXIoc2tpcCwgZGlyKSB7XG4gICAgICAgIHRoaXMuZG9uZSA9IHRoaXMubGluZUJyZWFrID0gZmFsc2U7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgIGxldCBsYXN0ID0gdGhpcy5ub2Rlcy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgbGV0IHRvcCA9IHRoaXMubm9kZXNbbGFzdF0sIG9mZnNldFZhbHVlID0gdGhpcy5vZmZzZXRzW2xhc3RdLCBvZmZzZXQgPSBvZmZzZXRWYWx1ZSA+PiAxO1xuICAgICAgICAgICAgbGV0IHNpemUgPSB0b3AgaW5zdGFuY2VvZiBUZXh0TGVhZiA/IHRvcC50ZXh0Lmxlbmd0aCA6IHRvcC5jaGlsZHJlbi5sZW5ndGg7XG4gICAgICAgICAgICBpZiAob2Zmc2V0ID09IChkaXIgPiAwID8gc2l6ZSA6IDApKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxhc3QgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkaXIgPiAwKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9mZnNldHNbbGFzdCAtIDFdKys7XG4gICAgICAgICAgICAgICAgdGhpcy5ub2Rlcy5wb3AoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9mZnNldHMucG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgob2Zmc2V0VmFsdWUgJiAxKSA9PSAoZGlyID4gMCA/IDAgOiAxKSkge1xuICAgICAgICAgICAgICAgIHRoaXMub2Zmc2V0c1tsYXN0XSArPSBkaXI7XG4gICAgICAgICAgICAgICAgaWYgKHNraXAgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmVCcmVhayA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBcIlxcblwiO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2tpcC0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodG9wIGluc3RhbmNlb2YgVGV4dExlYWYpIHtcbiAgICAgICAgICAgICAgICAvLyBNb3ZlIHRvIHRoZSBuZXh0IHN0cmluZ1xuICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gdG9wLnRleHRbb2Zmc2V0ICsgKGRpciA8IDAgPyAtMSA6IDApXTtcbiAgICAgICAgICAgICAgICB0aGlzLm9mZnNldHNbbGFzdF0gKz0gZGlyO1xuICAgICAgICAgICAgICAgIGlmIChuZXh0Lmxlbmd0aCA+IE1hdGgubWF4KDAsIHNraXApKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBza2lwID09IDAgPyBuZXh0IDogZGlyID4gMCA/IG5leHQuc2xpY2Uoc2tpcCkgOiBuZXh0LnNsaWNlKDAsIG5leHQubGVuZ3RoIC0gc2tpcCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBza2lwIC09IG5leHQubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IG5leHQgPSB0b3AuY2hpbGRyZW5bb2Zmc2V0ICsgKGRpciA8IDAgPyAtMSA6IDApXTtcbiAgICAgICAgICAgICAgICBpZiAoc2tpcCA+IG5leHQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHNraXAgLT0gbmV4dC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub2Zmc2V0c1tsYXN0XSArPSBkaXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGlyIDwgMClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2Zmc2V0c1tsYXN0XS0tO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGVzLnB1c2gobmV4dCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub2Zmc2V0cy5wdXNoKGRpciA+IDAgPyAxIDogKG5leHQgaW5zdGFuY2VvZiBUZXh0TGVhZiA/IG5leHQudGV4dC5sZW5ndGggOiBuZXh0LmNoaWxkcmVuLmxlbmd0aCkgPDwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIG5leHQoc2tpcCA9IDApIHtcbiAgICAgICAgaWYgKHNraXAgPCAwKSB7XG4gICAgICAgICAgICB0aGlzLm5leHRJbm5lcigtc2tpcCwgKC10aGlzLmRpcikpO1xuICAgICAgICAgICAgc2tpcCA9IHRoaXMudmFsdWUubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm5leHRJbm5lcihza2lwLCB0aGlzLmRpcik7XG4gICAgfVxufVxuY2xhc3MgUGFydGlhbFRleHRDdXJzb3Ige1xuICAgIGNvbnN0cnVjdG9yKHRleHQsIHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IFwiXCI7XG4gICAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmN1cnNvciA9IG5ldyBSYXdUZXh0Q3Vyc29yKHRleHQsIHN0YXJ0ID4gZW5kID8gLTEgOiAxKTtcbiAgICAgICAgdGhpcy5wb3MgPSBzdGFydCA+IGVuZCA/IHRleHQubGVuZ3RoIDogMDtcbiAgICAgICAgdGhpcy5mcm9tID0gTWF0aC5taW4oc3RhcnQsIGVuZCk7XG4gICAgICAgIHRoaXMudG8gPSBNYXRoLm1heChzdGFydCwgZW5kKTtcbiAgICB9XG4gICAgbmV4dElubmVyKHNraXAsIGRpcikge1xuICAgICAgICBpZiAoZGlyIDwgMCA/IHRoaXMucG9zIDw9IHRoaXMuZnJvbSA6IHRoaXMucG9zID49IHRoaXMudG8pIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHNraXAgKz0gTWF0aC5tYXgoMCwgZGlyIDwgMCA/IHRoaXMucG9zIC0gdGhpcy50byA6IHRoaXMuZnJvbSAtIHRoaXMucG9zKTtcbiAgICAgICAgbGV0IGxpbWl0ID0gZGlyIDwgMCA/IHRoaXMucG9zIC0gdGhpcy5mcm9tIDogdGhpcy50byAtIHRoaXMucG9zO1xuICAgICAgICBpZiAoc2tpcCA+IGxpbWl0KVxuICAgICAgICAgICAgc2tpcCA9IGxpbWl0O1xuICAgICAgICBsaW1pdCAtPSBza2lwO1xuICAgICAgICBsZXQgeyB2YWx1ZSB9ID0gdGhpcy5jdXJzb3IubmV4dChza2lwKTtcbiAgICAgICAgdGhpcy5wb3MgKz0gKHZhbHVlLmxlbmd0aCArIHNraXApICogZGlyO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWUubGVuZ3RoIDw9IGxpbWl0ID8gdmFsdWUgOiBkaXIgPCAwID8gdmFsdWUuc2xpY2UodmFsdWUubGVuZ3RoIC0gbGltaXQpIDogdmFsdWUuc2xpY2UoMCwgbGltaXQpO1xuICAgICAgICB0aGlzLmRvbmUgPSAhdGhpcy52YWx1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIG5leHQoc2tpcCA9IDApIHtcbiAgICAgICAgaWYgKHNraXAgPCAwKVxuICAgICAgICAgICAgc2tpcCA9IE1hdGgubWF4KHNraXAsIHRoaXMuZnJvbSAtIHRoaXMucG9zKTtcbiAgICAgICAgZWxzZSBpZiAoc2tpcCA+IDApXG4gICAgICAgICAgICBza2lwID0gTWF0aC5taW4oc2tpcCwgdGhpcy50byAtIHRoaXMucG9zKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubmV4dElubmVyKHNraXAsIHRoaXMuY3Vyc29yLmRpcik7XG4gICAgfVxuICAgIGdldCBsaW5lQnJlYWsoKSB7IHJldHVybiB0aGlzLmN1cnNvci5saW5lQnJlYWsgJiYgdGhpcy52YWx1ZSAhPSBcIlwiOyB9XG59XG5jbGFzcyBMaW5lQ3Vyc29yIHtcbiAgICBjb25zdHJ1Y3Rvcihpbm5lcikge1xuICAgICAgICB0aGlzLmlubmVyID0gaW5uZXI7XG4gICAgICAgIHRoaXMuYWZ0ZXJCcmVhayA9IHRydWU7XG4gICAgICAgIHRoaXMudmFsdWUgPSBcIlwiO1xuICAgICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICB9XG4gICAgbmV4dChza2lwID0gMCkge1xuICAgICAgICBsZXQgeyBkb25lLCBsaW5lQnJlYWssIHZhbHVlIH0gPSB0aGlzLmlubmVyLm5leHQoc2tpcCk7XG4gICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGluZUJyZWFrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hZnRlckJyZWFrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFmdGVyQnJlYWsgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMubmV4dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5hZnRlckJyZWFrID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGdldCBsaW5lQnJlYWsoKSB7IHJldHVybiBmYWxzZTsgfVxufVxuaWYgKHR5cGVvZiBTeW1ib2wgIT0gXCJ1bmRlZmluZWRcIikge1xuICAgIFRleHQucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLml0ZXIoKTsgfTtcbiAgICBSYXdUZXh0Q3Vyc29yLnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdID0gUGFydGlhbFRleHRDdXJzb3IucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl0gPVxuICAgICAgICBMaW5lQ3Vyc29yLnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfTtcbn1cbi8qKlxuVGhpcyB0eXBlIGRlc2NyaWJlcyBhIGxpbmUgaW4gdGhlIGRvY3VtZW50LiBJdCBpcyBjcmVhdGVkXG5vbi1kZW1hbmQgd2hlbiBsaW5lcyBhcmUgW3F1ZXJpZWRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVGV4dC5saW5lQXQpLlxuKi9cbmNsYXNzIExpbmUge1xuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIHBvc2l0aW9uIG9mIHRoZSBzdGFydCBvZiB0aGUgbGluZS5cbiAgICAqL1xuICAgIGZyb20sIFxuICAgIC8qKlxuICAgIFRoZSBwb3NpdGlvbiBhdCB0aGUgZW5kIG9mIHRoZSBsaW5lIChfYmVmb3JlXyB0aGUgbGluZSBicmVhayxcbiAgICBvciBhdCB0aGUgZW5kIG9mIGRvY3VtZW50IGZvciB0aGUgbGFzdCBsaW5lKS5cbiAgICAqL1xuICAgIHRvLCBcbiAgICAvKipcbiAgICBUaGlzIGxpbmUncyBsaW5lIG51bWJlciAoMS1iYXNlZCkuXG4gICAgKi9cbiAgICBudW1iZXIsIFxuICAgIC8qKlxuICAgIFRoZSBsaW5lJ3MgY29udGVudC5cbiAgICAqL1xuICAgIHRleHQpIHtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgICAgICB0aGlzLm51bWJlciA9IG51bWJlcjtcbiAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIGxlbmd0aCBvZiB0aGUgbGluZSAobm90IGluY2x1ZGluZyBhbnkgbGluZSBicmVhayBhZnRlciBpdCkuXG4gICAgKi9cbiAgICBnZXQgbGVuZ3RoKCkgeyByZXR1cm4gdGhpcy50byAtIHRoaXMuZnJvbTsgfVxufVxuXG4vLyBDb21wcmVzc2VkIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBHcmFwaGVtZV9DbHVzdGVyX0JyZWFrPUV4dGVuZFxuLy8gaW5mb3JtYXRpb24gZnJvbVxuLy8gaHR0cDovL3d3dy51bmljb2RlLm9yZy9QdWJsaWMvMTMuMC4wL3VjZC9hdXhpbGlhcnkvR3JhcGhlbWVCcmVha1Byb3BlcnR5LnR4dC5cbi8vIEVhY2ggcGFpciBvZiBlbGVtZW50cyByZXByZXNlbnRzIGEgcmFuZ2UsIGFzIGFuIG9mZmV0IGZyb20gdGhlXG4vLyBwcmV2aW91cyByYW5nZSBhbmQgYSBsZW5ndGguIE51bWJlcnMgYXJlIGluIGJhc2UtMzYsIHdpdGggdGhlIGVtcHR5XG4vLyBzdHJpbmcgYmVpbmcgYSBzaG9ydGhhbmQgZm9yIDEuXG5sZXQgZXh0ZW5kID0gLypAX19QVVJFX18qL1wibGMsMzQsN24sNyw3YiwxOSwsLCwyLCwyLCwsMjAsYiwxYyxsLGcsLDJ0LDcsMiw2LDIsMiwsNCx6LCx1LHIsMmosYiwxbSw5LDksLG8sNCwsOSwsMywsNSwxNywzLDNiLGYsLHcsMWosLCwsNCw4LDQsLDMsNyxhLDIsdCwsMW0sLCwsMiw0LDgsLDksLGEsMixxLCwyLDIsMWwsLDQsMiw0LDIsMiwzLDMsLHUsMiwzLCxiLDIsMWwsLDQsNSwsMiw0LCxrLDIsbSw2LCwsMW0sLCwyLCw0LDgsLDcsMyxhLDIsdSwsMW4sLCwsYywsOSwsMTQsLDMsLDFsLDMsNSwzLCw0LDcsMixiLDIsdCwsMW0sLDIsLDIsLDMsLDUsMiw3LDIsYiwyLHMsMiwxbCwyLCwsMiw0LDgsLDksLGEsMix0LCwyMCwsNCwsMiwzLCwsOCwsMjksLDIsNyxjLDgsMnEsLDIsOSxiLDYsMjIsMixyLCwsLCwsMWosZSwsNSwsMiw1LGIsLDEwLDksLDJ1LDQsLDYsLDIsMiwyLHAsMiw0LDMsZyw0LGQsLDIsMiw2LCxmLCxqaiwzLHFhLDMsdCwzLHQsMix1LDIsMXMsMiwsNyw4LCwyLGIsOSwsMTksMywzYiwyLHksLDNhLDMsNCwyLDksLDYsMyw2MywyLDIsLDFtLCwsNywsLCwsMiw4LDYsYSwyLCwxYyxoLDFyLDQsMWMsNywsLDUsLDE0LDksYywyLHcsNCwyLDIsLDMsMWssLCwyLDMsLCwzLDFtLDgsMiwyLDQ4LDMsLGQsLDcsNCwsNiwsMywyLDVpLDFtLCw1LGVrLCw1Zix4LDJkYSwzLDN4LCwybyx3LGZlLDYsMngsMixuOXcsNCwsYSx3LDIsMjgsMiw3aywsMywsNCwscCwyLDUsLDQ3LDIscSxpLGQsLDEyLDgscCxiLDFhLDMsMWMsLDIsNCwyLDIsMTMsLDF2LDYsMiwyLDIsMixjLCw4LCwxYiwsMWYsLCwzLDIsMiw1LDIsLCwxNiwyLDgsLDZtLCwyLCw0LCxmbjQsLGtoLGcsZyxnLGE2LDIsZ3QsLDZhLCw0NSw1LDFhZSwzLCwyLDUsNCwxNCwzLDQsLDRsLDIsZngsNCxhciwyLDQ5LGIsNHcsLDFpLGYsMWssMywxZCw0LDIsMiwxeCwzLDEwLDUsLDgsMXEsLGMsMiwxZyw5LGEsNCwyLCwybiwzLDIsLCwyLDYsLDRnLCwzLDgsbCwyLDFsLDIsLCwsLG0sLGUsNywzLDUsNWYsOCwyLDMsLCxuLCwyOSwsMiw2LCwsMiwsLDIsLDIsNmosLDIsNCw2LDIsLDIsciwyLDJkLDgsMiwsLDIsMnksLCwsMiw2LCwsMnQsMywyLDQsLDUsNzcsOSwsMiw2dCwsYSwyLCwsNCwsNDAsNCwyLDIsNCwsdyxhLDE0LDYsMiw0LDgsLDksNiwyLDMsMWEsZCwsMixiYSw3LCw2LCwsMmEsbSwyLDcsLDIsLDIsM2UsNiwzLCwsMiwsNywsLDIwLDIsMywsLCw5biwyLGYwYiw1LDFuLDcsdDQsLDFyLDQsMjksLGY1aywyLDQzcSwsLDMsNCw1LDgsOCwyLDcsdSw0LDQ0LDMsMWl6LDFqLDQsMWUsOCwsZSwsbSw1LCxmLDExcyw3LCxoLDIsNywsMiwsNSw3OSw3LGM1LDQsMTVzLDcsMzEsNywyNDAsNSxneDdrLDJvLDNrLDZvXCIuc3BsaXQoXCIsXCIpLm1hcChzID0+IHMgPyBwYXJzZUludChzLCAzNikgOiAxKTtcbi8vIENvbnZlcnQgb2Zmc2V0cyBpbnRvIGFic29sdXRlIHZhbHVlc1xuZm9yIChsZXQgaSA9IDE7IGkgPCBleHRlbmQubGVuZ3RoOyBpKyspXG4gICAgZXh0ZW5kW2ldICs9IGV4dGVuZFtpIC0gMV07XG5mdW5jdGlvbiBpc0V4dGVuZGluZ0NoYXIoY29kZSkge1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgZXh0ZW5kLmxlbmd0aDsgaSArPSAyKVxuICAgICAgICBpZiAoZXh0ZW5kW2ldID4gY29kZSlcbiAgICAgICAgICAgIHJldHVybiBleHRlbmRbaSAtIDFdIDw9IGNvZGU7XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gaXNSZWdpb25hbEluZGljYXRvcihjb2RlKSB7XG4gICAgcmV0dXJuIGNvZGUgPj0gMHgxRjFFNiAmJiBjb2RlIDw9IDB4MUYxRkY7XG59XG5jb25zdCBaV0ogPSAweDIwMGQ7XG4vKipcblJldHVybnMgYSBuZXh0IGdyYXBoZW1lIGNsdXN0ZXIgYnJlYWsgX2FmdGVyXyAobm90IGVxdWFsIHRvKVxuYHBvc2AsIGlmIGBmb3J3YXJkYCBpcyB0cnVlLCBvciBiZWZvcmUgb3RoZXJ3aXNlLiBSZXR1cm5zIGBwb3NgXG5pdHNlbGYgaWYgbm8gZnVydGhlciBjbHVzdGVyIGJyZWFrIGlzIGF2YWlsYWJsZSBpbiB0aGUgc3RyaW5nLlxuTW92ZXMgYWNyb3NzIHN1cnJvZ2F0ZSBwYWlycywgZXh0ZW5kaW5nIGNoYXJhY3RlcnMgKHdoZW5cbmBpbmNsdWRlRXh0ZW5kaW5nYCBpcyB0cnVlKSwgY2hhcmFjdGVycyBqb2luZWQgd2l0aCB6ZXJvLXdpZHRoXG5qb2luZXJzLCBhbmQgZmxhZyBlbW9qaS5cbiovXG5mdW5jdGlvbiBmaW5kQ2x1c3RlckJyZWFrKHN0ciwgcG9zLCBmb3J3YXJkID0gdHJ1ZSwgaW5jbHVkZUV4dGVuZGluZyA9IHRydWUpIHtcbiAgICByZXR1cm4gKGZvcndhcmQgPyBuZXh0Q2x1c3RlckJyZWFrIDogcHJldkNsdXN0ZXJCcmVhaykoc3RyLCBwb3MsIGluY2x1ZGVFeHRlbmRpbmcpO1xufVxuZnVuY3Rpb24gbmV4dENsdXN0ZXJCcmVhayhzdHIsIHBvcywgaW5jbHVkZUV4dGVuZGluZykge1xuICAgIGlmIChwb3MgPT0gc3RyLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIHBvcztcbiAgICAvLyBJZiBwb3MgaXMgaW4gdGhlIG1pZGRsZSBvZiBhIHN1cnJvZ2F0ZSBwYWlyLCBtb3ZlIHRvIGl0cyBzdGFydFxuICAgIGlmIChwb3MgJiYgc3Vycm9nYXRlTG93KHN0ci5jaGFyQ29kZUF0KHBvcykpICYmIHN1cnJvZ2F0ZUhpZ2goc3RyLmNoYXJDb2RlQXQocG9zIC0gMSkpKVxuICAgICAgICBwb3MtLTtcbiAgICBsZXQgcHJldiA9IGNvZGVQb2ludEF0KHN0ciwgcG9zKTtcbiAgICBwb3MgKz0gY29kZVBvaW50U2l6ZShwcmV2KTtcbiAgICB3aGlsZSAocG9zIDwgc3RyLmxlbmd0aCkge1xuICAgICAgICBsZXQgbmV4dCA9IGNvZGVQb2ludEF0KHN0ciwgcG9zKTtcbiAgICAgICAgaWYgKHByZXYgPT0gWldKIHx8IG5leHQgPT0gWldKIHx8IGluY2x1ZGVFeHRlbmRpbmcgJiYgaXNFeHRlbmRpbmdDaGFyKG5leHQpKSB7XG4gICAgICAgICAgICBwb3MgKz0gY29kZVBvaW50U2l6ZShuZXh0KTtcbiAgICAgICAgICAgIHByZXYgPSBuZXh0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzUmVnaW9uYWxJbmRpY2F0b3IobmV4dCkpIHtcbiAgICAgICAgICAgIGxldCBjb3VudEJlZm9yZSA9IDAsIGkgPSBwb3MgLSAyO1xuICAgICAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpc1JlZ2lvbmFsSW5kaWNhdG9yKGNvZGVQb2ludEF0KHN0ciwgaSkpKSB7XG4gICAgICAgICAgICAgICAgY291bnRCZWZvcmUrKztcbiAgICAgICAgICAgICAgICBpIC09IDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY291bnRCZWZvcmUgJSAyID09IDApXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcG9zICs9IDI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcG9zO1xufVxuZnVuY3Rpb24gcHJldkNsdXN0ZXJCcmVhayhzdHIsIHBvcywgaW5jbHVkZUV4dGVuZGluZykge1xuICAgIHdoaWxlIChwb3MgPiAwKSB7XG4gICAgICAgIGxldCBmb3VuZCA9IG5leHRDbHVzdGVyQnJlYWsoc3RyLCBwb3MgLSAyLCBpbmNsdWRlRXh0ZW5kaW5nKTtcbiAgICAgICAgaWYgKGZvdW5kIDwgcG9zKVxuICAgICAgICAgICAgcmV0dXJuIGZvdW5kO1xuICAgICAgICBwb3MtLTtcbiAgICB9XG4gICAgcmV0dXJuIDA7XG59XG5mdW5jdGlvbiBzdXJyb2dhdGVMb3coY2gpIHsgcmV0dXJuIGNoID49IDB4REMwMCAmJiBjaCA8IDB4RTAwMDsgfVxuZnVuY3Rpb24gc3Vycm9nYXRlSGlnaChjaCkgeyByZXR1cm4gY2ggPj0gMHhEODAwICYmIGNoIDwgMHhEQzAwOyB9XG4vKipcbkZpbmQgdGhlIGNvZGUgcG9pbnQgYXQgdGhlIGdpdmVuIHBvc2l0aW9uIGluIGEgc3RyaW5nIChsaWtlIHRoZVxuW2Bjb2RlUG9pbnRBdGBdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL1N0cmluZy9jb2RlUG9pbnRBdClcbnN0cmluZyBtZXRob2QpLlxuKi9cbmZ1bmN0aW9uIGNvZGVQb2ludEF0KHN0ciwgcG9zKSB7XG4gICAgbGV0IGNvZGUwID0gc3RyLmNoYXJDb2RlQXQocG9zKTtcbiAgICBpZiAoIXN1cnJvZ2F0ZUhpZ2goY29kZTApIHx8IHBvcyArIDEgPT0gc3RyLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIGNvZGUwO1xuICAgIGxldCBjb2RlMSA9IHN0ci5jaGFyQ29kZUF0KHBvcyArIDEpO1xuICAgIGlmICghc3Vycm9nYXRlTG93KGNvZGUxKSlcbiAgICAgICAgcmV0dXJuIGNvZGUwO1xuICAgIHJldHVybiAoKGNvZGUwIC0gMHhkODAwKSA8PCAxMCkgKyAoY29kZTEgLSAweGRjMDApICsgMHgxMDAwMDtcbn1cbi8qKlxuR2l2ZW4gYSBVbmljb2RlIGNvZGVwb2ludCwgcmV0dXJuIHRoZSBKYXZhU2NyaXB0IHN0cmluZyB0aGF0XG5yZXNwcmVzZW50cyBpdCAobGlrZVxuW2BTdHJpbmcuZnJvbUNvZGVQb2ludGBdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL1N0cmluZy9mcm9tQ29kZVBvaW50KSkuXG4qL1xuZnVuY3Rpb24gZnJvbUNvZGVQb2ludChjb2RlKSB7XG4gICAgaWYgKGNvZGUgPD0gMHhmZmZmKVxuICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShjb2RlKTtcbiAgICBjb2RlIC09IDB4MTAwMDA7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoKGNvZGUgPj4gMTApICsgMHhkODAwLCAoY29kZSAmIDEwMjMpICsgMHhkYzAwKTtcbn1cbi8qKlxuVGhlIGFtb3VudCBvZiBwb3NpdGlvbnMgYSBjaGFyYWN0ZXIgdGFrZXMgdXAgYSBKYXZhU2NyaXB0IHN0cmluZy5cbiovXG5mdW5jdGlvbiBjb2RlUG9pbnRTaXplKGNvZGUpIHsgcmV0dXJuIGNvZGUgPCAweDEwMDAwID8gMSA6IDI7IH1cblxuY29uc3QgRGVmYXVsdFNwbGl0ID0gL1xcclxcbj98XFxuLztcbi8qKlxuRGlzdGluZ3Vpc2hlcyBkaWZmZXJlbnQgd2F5cyBpbiB3aGljaCBwb3NpdGlvbnMgY2FuIGJlIG1hcHBlZC5cbiovXG52YXIgTWFwTW9kZSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKE1hcE1vZGUpIHtcbiAgICAvKipcbiAgICBNYXAgYSBwb3NpdGlvbiB0byBhIHZhbGlkIG5ldyBwb3NpdGlvbiwgZXZlbiB3aGVuIGl0cyBjb250ZXh0XG4gICAgd2FzIGRlbGV0ZWQuXG4gICAgKi9cbiAgICBNYXBNb2RlW01hcE1vZGVbXCJTaW1wbGVcIl0gPSAwXSA9IFwiU2ltcGxlXCI7XG4gICAgLyoqXG4gICAgUmV0dXJuIG51bGwgaWYgZGVsZXRpb24gaGFwcGVucyBhY3Jvc3MgdGhlIHBvc2l0aW9uLlxuICAgICovXG4gICAgTWFwTW9kZVtNYXBNb2RlW1wiVHJhY2tEZWxcIl0gPSAxXSA9IFwiVHJhY2tEZWxcIjtcbiAgICAvKipcbiAgICBSZXR1cm4gbnVsbCBpZiB0aGUgY2hhcmFjdGVyIF9iZWZvcmVfIHRoZSBwb3NpdGlvbiBpcyBkZWxldGVkLlxuICAgICovXG4gICAgTWFwTW9kZVtNYXBNb2RlW1wiVHJhY2tCZWZvcmVcIl0gPSAyXSA9IFwiVHJhY2tCZWZvcmVcIjtcbiAgICAvKipcbiAgICBSZXR1cm4gbnVsbCBpZiB0aGUgY2hhcmFjdGVyIF9hZnRlcl8gdGhlIHBvc2l0aW9uIGlzIGRlbGV0ZWQuXG4gICAgKi9cbiAgICBNYXBNb2RlW01hcE1vZGVbXCJUcmFja0FmdGVyXCJdID0gM10gPSBcIlRyYWNrQWZ0ZXJcIjtcbnJldHVybiBNYXBNb2RlfSkoTWFwTW9kZSB8fCAoTWFwTW9kZSA9IHt9KSk7XG4vKipcbkEgY2hhbmdlIGRlc2NyaXB0aW9uIGlzIGEgdmFyaWFudCBvZiBbY2hhbmdlIHNldF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5DaGFuZ2VTZXQpXG50aGF0IGRvZXNuJ3Qgc3RvcmUgdGhlIGluc2VydGVkIHRleHQuIEFzIHN1Y2gsIGl0IGNhbid0IGJlXG5hcHBsaWVkLCBidXQgaXMgY2hlYXBlciB0byBzdG9yZSBhbmQgbWFuaXB1bGF0ZS5cbiovXG5jbGFzcyBDaGFuZ2VEZXNjIHtcbiAgICAvLyBTZWN0aW9ucyBhcmUgZW5jb2RlZCBhcyBwYWlycyBvZiBpbnRlZ2Vycy4gVGhlIGZpcnN0IGlzIHRoZVxuICAgIC8vIGxlbmd0aCBpbiB0aGUgY3VycmVudCBkb2N1bWVudCwgYW5kIHRoZSBzZWNvbmQgaXMgLTEgZm9yXG4gICAgLy8gdW5hZmZlY3RlZCBzZWN0aW9ucywgYW5kIHRoZSBsZW5ndGggb2YgdGhlIHJlcGxhY2VtZW50IGNvbnRlbnRcbiAgICAvLyBvdGhlcndpc2UuIFNvIGFuIGluc2VydGlvbiB3b3VsZCBiZSAoMCwgbj4wKSwgYSBkZWxldGlvbiAobj4wLFxuICAgIC8vIDApLCBhbmQgYSByZXBsYWNlbWVudCB0d28gcG9zaXRpdmUgbnVtYmVycy5cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc2VjdGlvbnMpIHtcbiAgICAgICAgdGhpcy5zZWN0aW9ucyA9IHNlY3Rpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgbGVuZ3RoIG9mIHRoZSBkb2N1bWVudCBiZWZvcmUgdGhlIGNoYW5nZS5cbiAgICAqL1xuICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2VjdGlvbnMubGVuZ3RoOyBpICs9IDIpXG4gICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5zZWN0aW9uc1tpXTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIGxlbmd0aCBvZiB0aGUgZG9jdW1lbnQgYWZ0ZXIgdGhlIGNoYW5nZS5cbiAgICAqL1xuICAgIGdldCBuZXdMZW5ndGgoKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2VjdGlvbnMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgICAgICAgIGxldCBpbnMgPSB0aGlzLnNlY3Rpb25zW2kgKyAxXTtcbiAgICAgICAgICAgIHJlc3VsdCArPSBpbnMgPCAwID8gdGhpcy5zZWN0aW9uc1tpXSA6IGlucztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICBGYWxzZSB3aGVuIHRoZXJlIGFyZSBhY3R1YWwgY2hhbmdlcyBpbiB0aGlzIHNldC5cbiAgICAqL1xuICAgIGdldCBlbXB0eSgpIHsgcmV0dXJuIHRoaXMuc2VjdGlvbnMubGVuZ3RoID09IDAgfHwgdGhpcy5zZWN0aW9ucy5sZW5ndGggPT0gMiAmJiB0aGlzLnNlY3Rpb25zWzFdIDwgMDsgfVxuICAgIC8qKlxuICAgIEl0ZXJhdGUgb3ZlciB0aGUgdW5jaGFuZ2VkIHBhcnRzIGxlZnQgYnkgdGhlc2UgY2hhbmdlcy4gYHBvc0FgXG4gICAgcHJvdmlkZXMgdGhlIHBvc2l0aW9uIG9mIHRoZSByYW5nZSBpbiB0aGUgb2xkIGRvY3VtZW50LCBgcG9zQmBcbiAgICB0aGUgbmV3IHBvc2l0aW9uIGluIHRoZSBjaGFuZ2VkIGRvY3VtZW50LlxuICAgICovXG4gICAgaXRlckdhcHMoZikge1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgcG9zQSA9IDAsIHBvc0IgPSAwOyBpIDwgdGhpcy5zZWN0aW9ucy5sZW5ndGg7KSB7XG4gICAgICAgICAgICBsZXQgbGVuID0gdGhpcy5zZWN0aW9uc1tpKytdLCBpbnMgPSB0aGlzLnNlY3Rpb25zW2krK107XG4gICAgICAgICAgICBpZiAoaW5zIDwgMCkge1xuICAgICAgICAgICAgICAgIGYocG9zQSwgcG9zQiwgbGVuKTtcbiAgICAgICAgICAgICAgICBwb3NCICs9IGxlbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBvc0IgKz0gaW5zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcG9zQSArPSBsZW47XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgSXRlcmF0ZSBvdmVyIHRoZSByYW5nZXMgY2hhbmdlZCBieSB0aGVzZSBjaGFuZ2VzLiAoU2VlXG4gICAgW2BDaGFuZ2VTZXQuaXRlckNoYW5nZXNgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkNoYW5nZVNldC5pdGVyQ2hhbmdlcykgZm9yIGFcbiAgICB2YXJpYW50IHRoYXQgYWxzbyBwcm92aWRlcyB5b3Ugd2l0aCB0aGUgaW5zZXJ0ZWQgdGV4dC4pXG4gICAgYGZyb21BYC9gdG9BYCBwcm92aWRlcyB0aGUgZXh0ZW50IG9mIHRoZSBjaGFuZ2UgaW4gdGhlIHN0YXJ0aW5nXG4gICAgZG9jdW1lbnQsIGBmcm9tQmAvYHRvQmAgdGhlIGV4dGVudCBvZiB0aGUgcmVwbGFjZW1lbnQgaW4gdGhlXG4gICAgY2hhbmdlZCBkb2N1bWVudC5cbiAgICBcbiAgICBXaGVuIGBpbmRpdmlkdWFsYCBpcyB0cnVlLCBhZGphY2VudCBjaGFuZ2VzICh3aGljaCBhcmUga2VwdFxuICAgIHNlcGFyYXRlIGZvciBbcG9zaXRpb24gbWFwcGluZ10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5DaGFuZ2VEZXNjLm1hcFBvcykpIGFyZVxuICAgIHJlcG9ydGVkIHNlcGFyYXRlbHkuXG4gICAgKi9cbiAgICBpdGVyQ2hhbmdlZFJhbmdlcyhmLCBpbmRpdmlkdWFsID0gZmFsc2UpIHtcbiAgICAgICAgaXRlckNoYW5nZXModGhpcywgZiwgaW5kaXZpZHVhbCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCBhIGRlc2NyaXB0aW9uIG9mIHRoZSBpbnZlcnRlZCBmb3JtIG9mIHRoZXNlIGNoYW5nZXMuXG4gICAgKi9cbiAgICBnZXQgaW52ZXJ0ZWREZXNjKCkge1xuICAgICAgICBsZXQgc2VjdGlvbnMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNlY3Rpb25zLmxlbmd0aDspIHtcbiAgICAgICAgICAgIGxldCBsZW4gPSB0aGlzLnNlY3Rpb25zW2krK10sIGlucyA9IHRoaXMuc2VjdGlvbnNbaSsrXTtcbiAgICAgICAgICAgIGlmIChpbnMgPCAwKVxuICAgICAgICAgICAgICAgIHNlY3Rpb25zLnB1c2gobGVuLCBpbnMpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHNlY3Rpb25zLnB1c2goaW5zLCBsZW4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgQ2hhbmdlRGVzYyhzZWN0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgIENvbXB1dGUgdGhlIGNvbWJpbmVkIGVmZmVjdCBvZiBhcHBseWluZyBhbm90aGVyIHNldCBvZiBjaGFuZ2VzXG4gICAgYWZ0ZXIgdGhpcyBvbmUuIFRoZSBsZW5ndGggb2YgdGhlIGRvY3VtZW50IGFmdGVyIHRoaXMgc2V0IHNob3VsZFxuICAgIG1hdGNoIHRoZSBsZW5ndGggYmVmb3JlIGBvdGhlcmAuXG4gICAgKi9cbiAgICBjb21wb3NlRGVzYyhvdGhlcikgeyByZXR1cm4gdGhpcy5lbXB0eSA/IG90aGVyIDogb3RoZXIuZW1wdHkgPyB0aGlzIDogY29tcG9zZVNldHModGhpcywgb3RoZXIpOyB9XG4gICAgLyoqXG4gICAgTWFwIHRoaXMgZGVzY3JpcHRpb24sIHdoaWNoIHNob3VsZCBzdGFydCB3aXRoIHRoZSBzYW1lIGRvY3VtZW50XG4gICAgYXMgYG90aGVyYCwgb3ZlciBhbm90aGVyIHNldCBvZiBjaGFuZ2VzLCBzbyB0aGF0IGl0IGNhbiBiZVxuICAgIGFwcGxpZWQgYWZ0ZXIgaXQuIFdoZW4gYGJlZm9yZWAgaXMgdHJ1ZSwgbWFwIGFzIGlmIHRoZSBjaGFuZ2VzXG4gICAgaW4gYG90aGVyYCBoYXBwZW5lZCBiZWZvcmUgdGhlIG9uZXMgaW4gYHRoaXNgLlxuICAgICovXG4gICAgbWFwRGVzYyhvdGhlciwgYmVmb3JlID0gZmFsc2UpIHsgcmV0dXJuIG90aGVyLmVtcHR5ID8gdGhpcyA6IG1hcFNldCh0aGlzLCBvdGhlciwgYmVmb3JlKTsgfVxuICAgIG1hcFBvcyhwb3MsIGFzc29jID0gLTEsIG1vZGUgPSBNYXBNb2RlLlNpbXBsZSkge1xuICAgICAgICBsZXQgcG9zQSA9IDAsIHBvc0IgPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2VjdGlvbnMubGVuZ3RoOykge1xuICAgICAgICAgICAgbGV0IGxlbiA9IHRoaXMuc2VjdGlvbnNbaSsrXSwgaW5zID0gdGhpcy5zZWN0aW9uc1tpKytdLCBlbmRBID0gcG9zQSArIGxlbjtcbiAgICAgICAgICAgIGlmIChpbnMgPCAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVuZEEgPiBwb3MpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwb3NCICsgKHBvcyAtIHBvc0EpO1xuICAgICAgICAgICAgICAgIHBvc0IgKz0gbGVuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKG1vZGUgIT0gTWFwTW9kZS5TaW1wbGUgJiYgZW5kQSA+PSBwb3MgJiZcbiAgICAgICAgICAgICAgICAgICAgKG1vZGUgPT0gTWFwTW9kZS5UcmFja0RlbCAmJiBwb3NBIDwgcG9zICYmIGVuZEEgPiBwb3MgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGUgPT0gTWFwTW9kZS5UcmFja0JlZm9yZSAmJiBwb3NBIDwgcG9zIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlID09IE1hcE1vZGUuVHJhY2tBZnRlciAmJiBlbmRBID4gcG9zKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKGVuZEEgPiBwb3MgfHwgZW5kQSA9PSBwb3MgJiYgYXNzb2MgPCAwICYmICFsZW4pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwb3MgPT0gcG9zQSB8fCBhc3NvYyA8IDAgPyBwb3NCIDogcG9zQiArIGlucztcbiAgICAgICAgICAgICAgICBwb3NCICs9IGlucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvc0EgPSBlbmRBO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwb3MgPiBwb3NBKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoYFBvc2l0aW9uICR7cG9zfSBpcyBvdXQgb2YgcmFuZ2UgZm9yIGNoYW5nZXNldCBvZiBsZW5ndGggJHtwb3NBfWApO1xuICAgICAgICByZXR1cm4gcG9zQjtcbiAgICB9XG4gICAgLyoqXG4gICAgQ2hlY2sgd2hldGhlciB0aGVzZSBjaGFuZ2VzIHRvdWNoIGEgZ2l2ZW4gcmFuZ2UuIFdoZW4gb25lIG9mIHRoZVxuICAgIGNoYW5nZXMgZW50aXJlbHkgY292ZXJzIHRoZSByYW5nZSwgdGhlIHN0cmluZyBgXCJjb3ZlclwiYCBpc1xuICAgIHJldHVybmVkLlxuICAgICovXG4gICAgdG91Y2hlc1JhbmdlKGZyb20sIHRvID0gZnJvbSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgcG9zID0gMDsgaSA8IHRoaXMuc2VjdGlvbnMubGVuZ3RoICYmIHBvcyA8PSB0bzspIHtcbiAgICAgICAgICAgIGxldCBsZW4gPSB0aGlzLnNlY3Rpb25zW2krK10sIGlucyA9IHRoaXMuc2VjdGlvbnNbaSsrXSwgZW5kID0gcG9zICsgbGVuO1xuICAgICAgICAgICAgaWYgKGlucyA+PSAwICYmIHBvcyA8PSB0byAmJiBlbmQgPj0gZnJvbSlcbiAgICAgICAgICAgICAgICByZXR1cm4gcG9zIDwgZnJvbSAmJiBlbmQgPiB0byA/IFwiY292ZXJcIiA6IHRydWU7XG4gICAgICAgICAgICBwb3MgPSBlbmQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gXCJcIjtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNlY3Rpb25zLmxlbmd0aDspIHtcbiAgICAgICAgICAgIGxldCBsZW4gPSB0aGlzLnNlY3Rpb25zW2krK10sIGlucyA9IHRoaXMuc2VjdGlvbnNbaSsrXTtcbiAgICAgICAgICAgIHJlc3VsdCArPSAocmVzdWx0ID8gXCIgXCIgOiBcIlwiKSArIGxlbiArIChpbnMgPj0gMCA/IFwiOlwiICsgaW5zIDogXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgU2VyaWFsaXplIHRoaXMgY2hhbmdlIGRlc2MgdG8gYSBKU09OLXJlcHJlc2VudGFibGUgdmFsdWUuXG4gICAgKi9cbiAgICB0b0pTT04oKSB7IHJldHVybiB0aGlzLnNlY3Rpb25zOyB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgY2hhbmdlIGRlc2MgZnJvbSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbiAoYXMgcHJvZHVjZWRcbiAgICBieSBbYHRvSlNPTmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuQ2hhbmdlRGVzYy50b0pTT04pLlxuICAgICovXG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGpzb24pIHx8IGpzb24ubGVuZ3RoICUgMiB8fCBqc29uLnNvbWUoYSA9PiB0eXBlb2YgYSAhPSBcIm51bWJlclwiKSlcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCBKU09OIHJlcHJlc2VudGF0aW9uIG9mIENoYW5nZURlc2NcIik7XG4gICAgICAgIHJldHVybiBuZXcgQ2hhbmdlRGVzYyhqc29uKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKHNlY3Rpb25zKSB7IHJldHVybiBuZXcgQ2hhbmdlRGVzYyhzZWN0aW9ucyk7IH1cbn1cbi8qKlxuQSBjaGFuZ2Ugc2V0IHJlcHJlc2VudHMgYSBncm91cCBvZiBtb2RpZmljYXRpb25zIHRvIGEgZG9jdW1lbnQuIEl0XG5zdG9yZXMgdGhlIGRvY3VtZW50IGxlbmd0aCwgYW5kIGNhbiBvbmx5IGJlIGFwcGxpZWQgdG8gZG9jdW1lbnRzXG53aXRoIGV4YWN0bHkgdGhhdCBsZW5ndGguXG4qL1xuY2xhc3MgQ2hhbmdlU2V0IGV4dGVuZHMgQ2hhbmdlRGVzYyB7XG4gICAgY29uc3RydWN0b3Ioc2VjdGlvbnMsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgaW5zZXJ0ZWQpIHtcbiAgICAgICAgc3VwZXIoc2VjdGlvbnMpO1xuICAgICAgICB0aGlzLmluc2VydGVkID0gaW5zZXJ0ZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgIEFwcGx5IHRoZSBjaGFuZ2VzIHRvIGEgZG9jdW1lbnQsIHJldHVybmluZyB0aGUgbW9kaWZpZWRcbiAgICBkb2N1bWVudC5cbiAgICAqL1xuICAgIGFwcGx5KGRvYykge1xuICAgICAgICBpZiAodGhpcy5sZW5ndGggIT0gZG9jLmxlbmd0aClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiQXBwbHlpbmcgY2hhbmdlIHNldCB0byBhIGRvY3VtZW50IHdpdGggdGhlIHdyb25nIGxlbmd0aFwiKTtcbiAgICAgICAgaXRlckNoYW5nZXModGhpcywgKGZyb21BLCB0b0EsIGZyb21CLCBfdG9CLCB0ZXh0KSA9PiBkb2MgPSBkb2MucmVwbGFjZShmcm9tQiwgZnJvbUIgKyAodG9BIC0gZnJvbUEpLCB0ZXh0KSwgZmFsc2UpO1xuICAgICAgICByZXR1cm4gZG9jO1xuICAgIH1cbiAgICBtYXBEZXNjKG90aGVyLCBiZWZvcmUgPSBmYWxzZSkgeyByZXR1cm4gbWFwU2V0KHRoaXMsIG90aGVyLCBiZWZvcmUsIHRydWUpOyB9XG4gICAgLyoqXG4gICAgR2l2ZW4gdGhlIGRvY3VtZW50IGFzIGl0IGV4aXN0ZWQgX2JlZm9yZV8gdGhlIGNoYW5nZXMsIHJldHVybiBhXG4gICAgY2hhbmdlIHNldCB0aGF0IHJlcHJlc2VudHMgdGhlIGludmVyc2Ugb2YgdGhpcyBzZXQsIHdoaWNoIGNvdWxkXG4gICAgYmUgdXNlZCB0byBnbyBmcm9tIHRoZSBkb2N1bWVudCBjcmVhdGVkIGJ5IHRoZSBjaGFuZ2VzIGJhY2sgdG9cbiAgICB0aGUgZG9jdW1lbnQgYXMgaXQgZXhpc3RlZCBiZWZvcmUgdGhlIGNoYW5nZXMuXG4gICAgKi9cbiAgICBpbnZlcnQoZG9jKSB7XG4gICAgICAgIGxldCBzZWN0aW9ucyA9IHRoaXMuc2VjdGlvbnMuc2xpY2UoKSwgaW5zZXJ0ZWQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIHBvcyA9IDA7IGkgPCBzZWN0aW9ucy5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgICAgICAgbGV0IGxlbiA9IHNlY3Rpb25zW2ldLCBpbnMgPSBzZWN0aW9uc1tpICsgMV07XG4gICAgICAgICAgICBpZiAoaW5zID49IDApIHtcbiAgICAgICAgICAgICAgICBzZWN0aW9uc1tpXSA9IGlucztcbiAgICAgICAgICAgICAgICBzZWN0aW9uc1tpICsgMV0gPSBsZW47XG4gICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gaSA+PiAxO1xuICAgICAgICAgICAgICAgIHdoaWxlIChpbnNlcnRlZC5sZW5ndGggPCBpbmRleClcbiAgICAgICAgICAgICAgICAgICAgaW5zZXJ0ZWQucHVzaChUZXh0LmVtcHR5KTtcbiAgICAgICAgICAgICAgICBpbnNlcnRlZC5wdXNoKGxlbiA/IGRvYy5zbGljZShwb3MsIHBvcyArIGxlbikgOiBUZXh0LmVtcHR5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvcyArPSBsZW47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBDaGFuZ2VTZXQoc2VjdGlvbnMsIGluc2VydGVkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ29tYmluZSB0d28gc3Vic2VxdWVudCBjaGFuZ2Ugc2V0cyBpbnRvIGEgc2luZ2xlIHNldC4gYG90aGVyYFxuICAgIG11c3Qgc3RhcnQgaW4gdGhlIGRvY3VtZW50IHByb2R1Y2VkIGJ5IGB0aGlzYC4gSWYgYHRoaXNgIGdvZXNcbiAgICBgZG9jQWAgXHUyMTkyIGBkb2NCYCBhbmQgYG90aGVyYCByZXByZXNlbnRzIGBkb2NCYCBcdTIxOTIgYGRvY0NgLCB0aGVcbiAgICByZXR1cm5lZCB2YWx1ZSB3aWxsIHJlcHJlc2VudCB0aGUgY2hhbmdlIGBkb2NBYCBcdTIxOTIgYGRvY0NgLlxuICAgICovXG4gICAgY29tcG9zZShvdGhlcikgeyByZXR1cm4gdGhpcy5lbXB0eSA/IG90aGVyIDogb3RoZXIuZW1wdHkgPyB0aGlzIDogY29tcG9zZVNldHModGhpcywgb3RoZXIsIHRydWUpOyB9XG4gICAgLyoqXG4gICAgR2l2ZW4gYW5vdGhlciBjaGFuZ2Ugc2V0IHN0YXJ0aW5nIGluIHRoZSBzYW1lIGRvY3VtZW50LCBtYXBzIHRoaXNcbiAgICBjaGFuZ2Ugc2V0IG92ZXIgdGhlIG90aGVyLCBwcm9kdWNpbmcgYSBuZXcgY2hhbmdlIHNldCB0aGF0IGNhbiBiZVxuICAgIGFwcGxpZWQgdG8gdGhlIGRvY3VtZW50IHByb2R1Y2VkIGJ5IGFwcGx5aW5nIGBvdGhlcmAuIFdoZW5cbiAgICBgYmVmb3JlYCBpcyBgdHJ1ZWAsIG9yZGVyIGNoYW5nZXMgYXMgaWYgYHRoaXNgIGNvbWVzIGJlZm9yZVxuICAgIGBvdGhlcmAsIG90aGVyd2lzZSAodGhlIGRlZmF1bHQpIHRyZWF0IGBvdGhlcmAgYXMgY29taW5nIGZpcnN0LlxuICAgIFxuICAgIEdpdmVuIHR3byBjaGFuZ2VzIGBBYCBhbmQgYEJgLCBgQS5jb21wb3NlKEIubWFwKEEpKWAgYW5kXG4gICAgYEIuY29tcG9zZShBLm1hcChCLCB0cnVlKSlgIHdpbGwgcHJvZHVjZSB0aGUgc2FtZSBkb2N1bWVudC4gVGhpc1xuICAgIHByb3ZpZGVzIGEgYmFzaWMgZm9ybSBvZiBbb3BlcmF0aW9uYWxcbiAgICB0cmFuc2Zvcm1hdGlvbl0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvT3BlcmF0aW9uYWxfdHJhbnNmb3JtYXRpb24pLFxuICAgIGFuZCBjYW4gYmUgdXNlZCBmb3IgY29sbGFib3JhdGl2ZSBlZGl0aW5nLlxuICAgICovXG4gICAgbWFwKG90aGVyLCBiZWZvcmUgPSBmYWxzZSkgeyByZXR1cm4gb3RoZXIuZW1wdHkgPyB0aGlzIDogbWFwU2V0KHRoaXMsIG90aGVyLCBiZWZvcmUsIHRydWUpOyB9XG4gICAgLyoqXG4gICAgSXRlcmF0ZSBvdmVyIHRoZSBjaGFuZ2VkIHJhbmdlcyBpbiB0aGUgZG9jdW1lbnQsIGNhbGxpbmcgYGZgIGZvclxuICAgIGVhY2gsIHdpdGggdGhlIHJhbmdlIGluIHRoZSBvcmlnaW5hbCBkb2N1bWVudCAoYGZyb21BYC1gdG9BYClcbiAgICBhbmQgdGhlIHJhbmdlIHRoYXQgcmVwbGFjZXMgaXQgaW4gdGhlIG5ldyBkb2N1bWVudFxuICAgIChgZnJvbUJgLWB0b0JgKS5cbiAgICBcbiAgICBXaGVuIGBpbmRpdmlkdWFsYCBpcyB0cnVlLCBhZGphY2VudCBjaGFuZ2VzIGFyZSByZXBvcnRlZFxuICAgIHNlcGFyYXRlbHkuXG4gICAgKi9cbiAgICBpdGVyQ2hhbmdlcyhmLCBpbmRpdmlkdWFsID0gZmFsc2UpIHtcbiAgICAgICAgaXRlckNoYW5nZXModGhpcywgZiwgaW5kaXZpZHVhbCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCBhIFtjaGFuZ2UgZGVzY3JpcHRpb25dKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuQ2hhbmdlRGVzYykgZm9yIHRoaXMgY2hhbmdlXG4gICAgc2V0LlxuICAgICovXG4gICAgZ2V0IGRlc2MoKSB7IHJldHVybiBDaGFuZ2VEZXNjLmNyZWF0ZSh0aGlzLnNlY3Rpb25zKTsgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZmlsdGVyKHJhbmdlcykge1xuICAgICAgICBsZXQgcmVzdWx0U2VjdGlvbnMgPSBbXSwgcmVzdWx0SW5zZXJ0ZWQgPSBbXSwgZmlsdGVyZWRTZWN0aW9ucyA9IFtdO1xuICAgICAgICBsZXQgaXRlciA9IG5ldyBTZWN0aW9uSXRlcih0aGlzKTtcbiAgICAgICAgZG9uZTogZm9yIChsZXQgaSA9IDAsIHBvcyA9IDA7Oykge1xuICAgICAgICAgICAgbGV0IG5leHQgPSBpID09IHJhbmdlcy5sZW5ndGggPyAxZTkgOiByYW5nZXNbaSsrXTtcbiAgICAgICAgICAgIHdoaWxlIChwb3MgPCBuZXh0IHx8IHBvcyA9PSBuZXh0ICYmIGl0ZXIubGVuID09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlci5kb25lKVxuICAgICAgICAgICAgICAgICAgICBicmVhayBkb25lO1xuICAgICAgICAgICAgICAgIGxldCBsZW4gPSBNYXRoLm1pbihpdGVyLmxlbiwgbmV4dCAtIHBvcyk7XG4gICAgICAgICAgICAgICAgYWRkU2VjdGlvbihmaWx0ZXJlZFNlY3Rpb25zLCBsZW4sIC0xKTtcbiAgICAgICAgICAgICAgICBsZXQgaW5zID0gaXRlci5pbnMgPT0gLTEgPyAtMSA6IGl0ZXIub2ZmID09IDAgPyBpdGVyLmlucyA6IDA7XG4gICAgICAgICAgICAgICAgYWRkU2VjdGlvbihyZXN1bHRTZWN0aW9ucywgbGVuLCBpbnMpO1xuICAgICAgICAgICAgICAgIGlmIChpbnMgPiAwKVxuICAgICAgICAgICAgICAgICAgICBhZGRJbnNlcnQocmVzdWx0SW5zZXJ0ZWQsIHJlc3VsdFNlY3Rpb25zLCBpdGVyLnRleHQpO1xuICAgICAgICAgICAgICAgIGl0ZXIuZm9yd2FyZChsZW4pO1xuICAgICAgICAgICAgICAgIHBvcyArPSBsZW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgZW5kID0gcmFuZ2VzW2krK107XG4gICAgICAgICAgICB3aGlsZSAocG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZXIuZG9uZSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWsgZG9uZTtcbiAgICAgICAgICAgICAgICBsZXQgbGVuID0gTWF0aC5taW4oaXRlci5sZW4sIGVuZCAtIHBvcyk7XG4gICAgICAgICAgICAgICAgYWRkU2VjdGlvbihyZXN1bHRTZWN0aW9ucywgbGVuLCAtMSk7XG4gICAgICAgICAgICAgICAgYWRkU2VjdGlvbihmaWx0ZXJlZFNlY3Rpb25zLCBsZW4sIGl0ZXIuaW5zID09IC0xID8gLTEgOiBpdGVyLm9mZiA9PSAwID8gaXRlci5pbnMgOiAwKTtcbiAgICAgICAgICAgICAgICBpdGVyLmZvcndhcmQobGVuKTtcbiAgICAgICAgICAgICAgICBwb3MgKz0gbGVuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGNoYW5nZXM6IG5ldyBDaGFuZ2VTZXQocmVzdWx0U2VjdGlvbnMsIHJlc3VsdEluc2VydGVkKSxcbiAgICAgICAgICAgIGZpbHRlcmVkOiBDaGFuZ2VEZXNjLmNyZWF0ZShmaWx0ZXJlZFNlY3Rpb25zKSB9O1xuICAgIH1cbiAgICAvKipcbiAgICBTZXJpYWxpemUgdGhpcyBjaGFuZ2Ugc2V0IHRvIGEgSlNPTi1yZXByZXNlbnRhYmxlIHZhbHVlLlxuICAgICovXG4gICAgdG9KU09OKCkge1xuICAgICAgICBsZXQgcGFydHMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNlY3Rpb25zLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgICAgICAgICBsZXQgbGVuID0gdGhpcy5zZWN0aW9uc1tpXSwgaW5zID0gdGhpcy5zZWN0aW9uc1tpICsgMV07XG4gICAgICAgICAgICBpZiAoaW5zIDwgMClcbiAgICAgICAgICAgICAgICBwYXJ0cy5wdXNoKGxlbik7XG4gICAgICAgICAgICBlbHNlIGlmIChpbnMgPT0gMClcbiAgICAgICAgICAgICAgICBwYXJ0cy5wdXNoKFtsZW5dKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBwYXJ0cy5wdXNoKFtsZW5dLmNvbmNhdCh0aGlzLmluc2VydGVkW2kgPj4gMV0udG9KU09OKCkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFydHM7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIGNoYW5nZSBzZXQgZm9yIHRoZSBnaXZlbiBjaGFuZ2VzLCBmb3IgYSBkb2N1bWVudCBvZiB0aGVcbiAgICBnaXZlbiBsZW5ndGgsIHVzaW5nIGBsaW5lU2VwYCBhcyBsaW5lIHNlcGFyYXRvci5cbiAgICAqL1xuICAgIHN0YXRpYyBvZihjaGFuZ2VzLCBsZW5ndGgsIGxpbmVTZXApIHtcbiAgICAgICAgbGV0IHNlY3Rpb25zID0gW10sIGluc2VydGVkID0gW10sIHBvcyA9IDA7XG4gICAgICAgIGxldCB0b3RhbCA9IG51bGw7XG4gICAgICAgIGZ1bmN0aW9uIGZsdXNoKGZvcmNlID0gZmFsc2UpIHtcbiAgICAgICAgICAgIGlmICghZm9yY2UgJiYgIXNlY3Rpb25zLmxlbmd0aClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBpZiAocG9zIDwgbGVuZ3RoKVxuICAgICAgICAgICAgICAgIGFkZFNlY3Rpb24oc2VjdGlvbnMsIGxlbmd0aCAtIHBvcywgLTEpO1xuICAgICAgICAgICAgbGV0IHNldCA9IG5ldyBDaGFuZ2VTZXQoc2VjdGlvbnMsIGluc2VydGVkKTtcbiAgICAgICAgICAgIHRvdGFsID0gdG90YWwgPyB0b3RhbC5jb21wb3NlKHNldC5tYXAodG90YWwpKSA6IHNldDtcbiAgICAgICAgICAgIHNlY3Rpb25zID0gW107XG4gICAgICAgICAgICBpbnNlcnRlZCA9IFtdO1xuICAgICAgICAgICAgcG9zID0gMDtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBwcm9jZXNzKHNwZWMpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHNwZWMpKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgc3ViIG9mIHNwZWMpXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3Moc3ViKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNwZWMgaW5zdGFuY2VvZiBDaGFuZ2VTZXQpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3BlYy5sZW5ndGggIT0gbGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihgTWlzbWF0Y2hlZCBjaGFuZ2Ugc2V0IGxlbmd0aCAoZ290ICR7c3BlYy5sZW5ndGh9LCBleHBlY3RlZCAke2xlbmd0aH0pYCk7XG4gICAgICAgICAgICAgICAgZmx1c2goKTtcbiAgICAgICAgICAgICAgICB0b3RhbCA9IHRvdGFsID8gdG90YWwuY29tcG9zZShzcGVjLm1hcCh0b3RhbCkpIDogc3BlYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCB7IGZyb20sIHRvID0gZnJvbSwgaW5zZXJ0IH0gPSBzcGVjO1xuICAgICAgICAgICAgICAgIGlmIChmcm9tID4gdG8gfHwgZnJvbSA8IDAgfHwgdG8gPiBsZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBJbnZhbGlkIGNoYW5nZSByYW5nZSAke2Zyb219IHRvICR7dG99IChpbiBkb2Mgb2YgbGVuZ3RoICR7bGVuZ3RofSlgKTtcbiAgICAgICAgICAgICAgICBsZXQgaW5zVGV4dCA9ICFpbnNlcnQgPyBUZXh0LmVtcHR5IDogdHlwZW9mIGluc2VydCA9PSBcInN0cmluZ1wiID8gVGV4dC5vZihpbnNlcnQuc3BsaXQobGluZVNlcCB8fCBEZWZhdWx0U3BsaXQpKSA6IGluc2VydDtcbiAgICAgICAgICAgICAgICBsZXQgaW5zTGVuID0gaW5zVGV4dC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgaWYgKGZyb20gPT0gdG8gJiYgaW5zTGVuID09IDApXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBpZiAoZnJvbSA8IHBvcylcbiAgICAgICAgICAgICAgICAgICAgZmx1c2goKTtcbiAgICAgICAgICAgICAgICBpZiAoZnJvbSA+IHBvcylcbiAgICAgICAgICAgICAgICAgICAgYWRkU2VjdGlvbihzZWN0aW9ucywgZnJvbSAtIHBvcywgLTEpO1xuICAgICAgICAgICAgICAgIGFkZFNlY3Rpb24oc2VjdGlvbnMsIHRvIC0gZnJvbSwgaW5zTGVuKTtcbiAgICAgICAgICAgICAgICBhZGRJbnNlcnQoaW5zZXJ0ZWQsIHNlY3Rpb25zLCBpbnNUZXh0KTtcbiAgICAgICAgICAgICAgICBwb3MgPSB0bztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwcm9jZXNzKGNoYW5nZXMpO1xuICAgICAgICBmbHVzaCghdG90YWwpO1xuICAgICAgICByZXR1cm4gdG90YWw7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhbiBlbXB0eSBjaGFuZ2VzZXQgb2YgdGhlIGdpdmVuIGxlbmd0aC5cbiAgICAqL1xuICAgIHN0YXRpYyBlbXB0eShsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDaGFuZ2VTZXQobGVuZ3RoID8gW2xlbmd0aCwgLTFdIDogW10sIFtdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgY2hhbmdlc2V0IGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24gKGFzIHByb2R1Y2VkIGJ5XG4gICAgW2B0b0pTT05gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkNoYW5nZVNldC50b0pTT04pLlxuICAgICovXG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGpzb24pKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIEpTT04gcmVwcmVzZW50YXRpb24gb2YgQ2hhbmdlU2V0XCIpO1xuICAgICAgICBsZXQgc2VjdGlvbnMgPSBbXSwgaW5zZXJ0ZWQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBqc29uLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgcGFydCA9IGpzb25baV07XG4gICAgICAgICAgICBpZiAodHlwZW9mIHBhcnQgPT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgIHNlY3Rpb25zLnB1c2gocGFydCwgLTEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkocGFydCkgfHwgdHlwZW9mIHBhcnRbMF0gIT0gXCJudW1iZXJcIiB8fCBwYXJ0LnNvbWUoKGUsIGkpID0+IGkgJiYgdHlwZW9mIGUgIT0gXCJzdHJpbmdcIikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBDaGFuZ2VTZXRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwYXJ0Lmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgc2VjdGlvbnMucHVzaChwYXJ0WzBdLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHdoaWxlIChpbnNlcnRlZC5sZW5ndGggPCBpKVxuICAgICAgICAgICAgICAgICAgICBpbnNlcnRlZC5wdXNoKFRleHQuZW1wdHkpO1xuICAgICAgICAgICAgICAgIGluc2VydGVkW2ldID0gVGV4dC5vZihwYXJ0LnNsaWNlKDEpKTtcbiAgICAgICAgICAgICAgICBzZWN0aW9ucy5wdXNoKHBhcnRbMF0sIGluc2VydGVkW2ldLmxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBDaGFuZ2VTZXQoc2VjdGlvbnMsIGluc2VydGVkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlU2V0KHNlY3Rpb25zLCBpbnNlcnRlZCkge1xuICAgICAgICByZXR1cm4gbmV3IENoYW5nZVNldChzZWN0aW9ucywgaW5zZXJ0ZWQpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFkZFNlY3Rpb24oc2VjdGlvbnMsIGxlbiwgaW5zLCBmb3JjZUpvaW4gPSBmYWxzZSkge1xuICAgIGlmIChsZW4gPT0gMCAmJiBpbnMgPD0gMClcbiAgICAgICAgcmV0dXJuO1xuICAgIGxldCBsYXN0ID0gc2VjdGlvbnMubGVuZ3RoIC0gMjtcbiAgICBpZiAobGFzdCA+PSAwICYmIGlucyA8PSAwICYmIGlucyA9PSBzZWN0aW9uc1tsYXN0ICsgMV0pXG4gICAgICAgIHNlY3Rpb25zW2xhc3RdICs9IGxlbjtcbiAgICBlbHNlIGlmIChsZW4gPT0gMCAmJiBzZWN0aW9uc1tsYXN0XSA9PSAwKVxuICAgICAgICBzZWN0aW9uc1tsYXN0ICsgMV0gKz0gaW5zO1xuICAgIGVsc2UgaWYgKGZvcmNlSm9pbikge1xuICAgICAgICBzZWN0aW9uc1tsYXN0XSArPSBsZW47XG4gICAgICAgIHNlY3Rpb25zW2xhc3QgKyAxXSArPSBpbnM7XG4gICAgfVxuICAgIGVsc2VcbiAgICAgICAgc2VjdGlvbnMucHVzaChsZW4sIGlucyk7XG59XG5mdW5jdGlvbiBhZGRJbnNlcnQodmFsdWVzLCBzZWN0aW9ucywgdmFsdWUpIHtcbiAgICBpZiAodmFsdWUubGVuZ3RoID09IDApXG4gICAgICAgIHJldHVybjtcbiAgICBsZXQgaW5kZXggPSAoc2VjdGlvbnMubGVuZ3RoIC0gMikgPj4gMTtcbiAgICBpZiAoaW5kZXggPCB2YWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgIHZhbHVlc1t2YWx1ZXMubGVuZ3RoIC0gMV0gPSB2YWx1ZXNbdmFsdWVzLmxlbmd0aCAtIDFdLmFwcGVuZCh2YWx1ZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB3aGlsZSAodmFsdWVzLmxlbmd0aCA8IGluZGV4KVxuICAgICAgICAgICAgdmFsdWVzLnB1c2goVGV4dC5lbXB0eSk7XG4gICAgICAgIHZhbHVlcy5wdXNoKHZhbHVlKTtcbiAgICB9XG59XG5mdW5jdGlvbiBpdGVyQ2hhbmdlcyhkZXNjLCBmLCBpbmRpdmlkdWFsKSB7XG4gICAgbGV0IGluc2VydGVkID0gZGVzYy5pbnNlcnRlZDtcbiAgICBmb3IgKGxldCBwb3NBID0gMCwgcG9zQiA9IDAsIGkgPSAwOyBpIDwgZGVzYy5zZWN0aW9ucy5sZW5ndGg7KSB7XG4gICAgICAgIGxldCBsZW4gPSBkZXNjLnNlY3Rpb25zW2krK10sIGlucyA9IGRlc2Muc2VjdGlvbnNbaSsrXTtcbiAgICAgICAgaWYgKGlucyA8IDApIHtcbiAgICAgICAgICAgIHBvc0EgKz0gbGVuO1xuICAgICAgICAgICAgcG9zQiArPSBsZW47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgZW5kQSA9IHBvc0EsIGVuZEIgPSBwb3NCLCB0ZXh0ID0gVGV4dC5lbXB0eTtcbiAgICAgICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgICAgICBlbmRBICs9IGxlbjtcbiAgICAgICAgICAgICAgICBlbmRCICs9IGlucztcbiAgICAgICAgICAgICAgICBpZiAoaW5zICYmIGluc2VydGVkKVxuICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gdGV4dC5hcHBlbmQoaW5zZXJ0ZWRbKGkgLSAyKSA+PiAxXSk7XG4gICAgICAgICAgICAgICAgaWYgKGluZGl2aWR1YWwgfHwgaSA9PSBkZXNjLnNlY3Rpb25zLmxlbmd0aCB8fCBkZXNjLnNlY3Rpb25zW2kgKyAxXSA8IDApXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGxlbiA9IGRlc2Muc2VjdGlvbnNbaSsrXTtcbiAgICAgICAgICAgICAgICBpbnMgPSBkZXNjLnNlY3Rpb25zW2krK107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmKHBvc0EsIGVuZEEsIHBvc0IsIGVuZEIsIHRleHQpO1xuICAgICAgICAgICAgcG9zQSA9IGVuZEE7XG4gICAgICAgICAgICBwb3NCID0gZW5kQjtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIG1hcFNldChzZXRBLCBzZXRCLCBiZWZvcmUsIG1rU2V0ID0gZmFsc2UpIHtcbiAgICAvLyBQcm9kdWNlIGEgY29weSBvZiBzZXRBIHRoYXQgYXBwbGllcyB0byB0aGUgZG9jdW1lbnQgYWZ0ZXIgc2V0QlxuICAgIC8vIGhhcyBiZWVuIGFwcGxpZWQgKGFzc3VtaW5nIGJvdGggc3RhcnQgYXQgdGhlIHNhbWUgZG9jdW1lbnQpLlxuICAgIGxldCBzZWN0aW9ucyA9IFtdLCBpbnNlcnQgPSBta1NldCA/IFtdIDogbnVsbDtcbiAgICBsZXQgYSA9IG5ldyBTZWN0aW9uSXRlcihzZXRBKSwgYiA9IG5ldyBTZWN0aW9uSXRlcihzZXRCKTtcbiAgICAvLyBJdGVyYXRlIG92ZXIgYm90aCBzZXRzIGluIHBhcmFsbGVsLiBpbnNlcnRlZCB0cmFja3MsIGZvciBjaGFuZ2VzXG4gICAgLy8gaW4gQSB0aGF0IGhhdmUgdG8gYmUgcHJvY2Vzc2VkIHBpZWNlLWJ5LXBpZWNlLCB3aGV0aGVyIHRoZWlyXG4gICAgLy8gY29udGVudCBoYXMgYmVlbiBpbnNlcnRlZCBhbHJlYWR5LCBhbmQgcmVmZXJzIHRvIHRoZSBzZWN0aW9uXG4gICAgLy8gaW5kZXguXG4gICAgZm9yIChsZXQgaW5zZXJ0ZWQgPSAtMTs7KSB7XG4gICAgICAgIGlmIChhLmlucyA9PSAtMSAmJiBiLmlucyA9PSAtMSkge1xuICAgICAgICAgICAgLy8gTW92ZSBhY3Jvc3MgcmFuZ2VzIHNraXBwZWQgYnkgYm90aCBzZXRzLlxuICAgICAgICAgICAgbGV0IGxlbiA9IE1hdGgubWluKGEubGVuLCBiLmxlbik7XG4gICAgICAgICAgICBhZGRTZWN0aW9uKHNlY3Rpb25zLCBsZW4sIC0xKTtcbiAgICAgICAgICAgIGEuZm9yd2FyZChsZW4pO1xuICAgICAgICAgICAgYi5mb3J3YXJkKGxlbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYi5pbnMgPj0gMCAmJiAoYS5pbnMgPCAwIHx8IGluc2VydGVkID09IGEuaSB8fCBhLm9mZiA9PSAwICYmIChiLmxlbiA8IGEubGVuIHx8IGIubGVuID09IGEubGVuICYmICFiZWZvcmUpKSkge1xuICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBhIGNoYW5nZSBpbiBCIHRoYXQgY29tZXMgYmVmb3JlIHRoZSBuZXh0IGNoYW5nZSBpblxuICAgICAgICAgICAgLy8gQSAob3JkZXJlZCBieSBzdGFydCBwb3MsIHRoZW4gbGVuLCB0aGVuIGJlZm9yZSBmbGFnKSwgc2tpcFxuICAgICAgICAgICAgLy8gdGhhdCAoYW5kIHByb2Nlc3MgYW55IGNoYW5nZXMgaW4gQSBpdCBjb3ZlcnMpLlxuICAgICAgICAgICAgbGV0IGxlbiA9IGIubGVuO1xuICAgICAgICAgICAgYWRkU2VjdGlvbihzZWN0aW9ucywgYi5pbnMsIC0xKTtcbiAgICAgICAgICAgIHdoaWxlIChsZW4pIHtcbiAgICAgICAgICAgICAgICBsZXQgcGllY2UgPSBNYXRoLm1pbihhLmxlbiwgbGVuKTtcbiAgICAgICAgICAgICAgICBpZiAoYS5pbnMgPj0gMCAmJiBpbnNlcnRlZCA8IGEuaSAmJiBhLmxlbiA8PSBwaWVjZSkge1xuICAgICAgICAgICAgICAgICAgICBhZGRTZWN0aW9uKHNlY3Rpb25zLCAwLCBhLmlucyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnNlcnQpXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRJbnNlcnQoaW5zZXJ0LCBzZWN0aW9ucywgYS50ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgaW5zZXJ0ZWQgPSBhLmk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGEuZm9yd2FyZChwaWVjZSk7XG4gICAgICAgICAgICAgICAgbGVuIC09IHBpZWNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYi5uZXh0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYS5pbnMgPj0gMCkge1xuICAgICAgICAgICAgLy8gUHJvY2VzcyB0aGUgcGFydCBvZiBhIGNoYW5nZSBpbiBBIHVwIHRvIHRoZSBzdGFydCBvZiB0aGUgbmV4dFxuICAgICAgICAgICAgLy8gbm9uLWRlbGV0aW9uIGNoYW5nZSBpbiBCIChpZiBvdmVybGFwcGluZykuXG4gICAgICAgICAgICBsZXQgbGVuID0gMCwgbGVmdCA9IGEubGVuO1xuICAgICAgICAgICAgd2hpbGUgKGxlZnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoYi5pbnMgPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBpZWNlID0gTWF0aC5taW4obGVmdCwgYi5sZW4pO1xuICAgICAgICAgICAgICAgICAgICBsZW4gKz0gcGllY2U7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQgLT0gcGllY2U7XG4gICAgICAgICAgICAgICAgICAgIGIuZm9yd2FyZChwaWVjZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGIuaW5zID09IDAgJiYgYi5sZW4gPCBsZWZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQgLT0gYi5sZW47XG4gICAgICAgICAgICAgICAgICAgIGIubmV4dCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWRkU2VjdGlvbihzZWN0aW9ucywgbGVuLCBpbnNlcnRlZCA8IGEuaSA/IGEuaW5zIDogMCk7XG4gICAgICAgICAgICBpZiAoaW5zZXJ0ICYmIGluc2VydGVkIDwgYS5pKVxuICAgICAgICAgICAgICAgIGFkZEluc2VydChpbnNlcnQsIHNlY3Rpb25zLCBhLnRleHQpO1xuICAgICAgICAgICAgaW5zZXJ0ZWQgPSBhLmk7XG4gICAgICAgICAgICBhLmZvcndhcmQoYS5sZW4gLSBsZWZ0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChhLmRvbmUgJiYgYi5kb25lKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5zZXJ0ID8gQ2hhbmdlU2V0LmNyZWF0ZVNldChzZWN0aW9ucywgaW5zZXJ0KSA6IENoYW5nZURlc2MuY3JlYXRlKHNlY3Rpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc21hdGNoZWQgY2hhbmdlIHNldCBsZW5ndGhzXCIpO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gY29tcG9zZVNldHMoc2V0QSwgc2V0QiwgbWtTZXQgPSBmYWxzZSkge1xuICAgIGxldCBzZWN0aW9ucyA9IFtdO1xuICAgIGxldCBpbnNlcnQgPSBta1NldCA/IFtdIDogbnVsbDtcbiAgICBsZXQgYSA9IG5ldyBTZWN0aW9uSXRlcihzZXRBKSwgYiA9IG5ldyBTZWN0aW9uSXRlcihzZXRCKTtcbiAgICBmb3IgKGxldCBvcGVuID0gZmFsc2U7Oykge1xuICAgICAgICBpZiAoYS5kb25lICYmIGIuZG9uZSkge1xuICAgICAgICAgICAgcmV0dXJuIGluc2VydCA/IENoYW5nZVNldC5jcmVhdGVTZXQoc2VjdGlvbnMsIGluc2VydCkgOiBDaGFuZ2VEZXNjLmNyZWF0ZShzZWN0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYS5pbnMgPT0gMCkgeyAvLyBEZWxldGlvbiBpbiBBXG4gICAgICAgICAgICBhZGRTZWN0aW9uKHNlY3Rpb25zLCBhLmxlbiwgMCwgb3Blbik7XG4gICAgICAgICAgICBhLm5leHQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChiLmxlbiA9PSAwICYmICFiLmRvbmUpIHsgLy8gSW5zZXJ0aW9uIGluIEJcbiAgICAgICAgICAgIGFkZFNlY3Rpb24oc2VjdGlvbnMsIDAsIGIuaW5zLCBvcGVuKTtcbiAgICAgICAgICAgIGlmIChpbnNlcnQpXG4gICAgICAgICAgICAgICAgYWRkSW5zZXJ0KGluc2VydCwgc2VjdGlvbnMsIGIudGV4dCk7XG4gICAgICAgICAgICBiLm5leHQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChhLmRvbmUgfHwgYi5kb25lKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNtYXRjaGVkIGNoYW5nZSBzZXQgbGVuZ3Roc1wiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBsZW4gPSBNYXRoLm1pbihhLmxlbjIsIGIubGVuKSwgc2VjdGlvbkxlbiA9IHNlY3Rpb25zLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChhLmlucyA9PSAtMSkge1xuICAgICAgICAgICAgICAgIGxldCBpbnNCID0gYi5pbnMgPT0gLTEgPyAtMSA6IGIub2ZmID8gMCA6IGIuaW5zO1xuICAgICAgICAgICAgICAgIGFkZFNlY3Rpb24oc2VjdGlvbnMsIGxlbiwgaW5zQiwgb3Blbik7XG4gICAgICAgICAgICAgICAgaWYgKGluc2VydCAmJiBpbnNCKVxuICAgICAgICAgICAgICAgICAgICBhZGRJbnNlcnQoaW5zZXJ0LCBzZWN0aW9ucywgYi50ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGIuaW5zID09IC0xKSB7XG4gICAgICAgICAgICAgICAgYWRkU2VjdGlvbihzZWN0aW9ucywgYS5vZmYgPyAwIDogYS5sZW4sIGxlbiwgb3Blbik7XG4gICAgICAgICAgICAgICAgaWYgKGluc2VydClcbiAgICAgICAgICAgICAgICAgICAgYWRkSW5zZXJ0KGluc2VydCwgc2VjdGlvbnMsIGEudGV4dEJpdChsZW4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFkZFNlY3Rpb24oc2VjdGlvbnMsIGEub2ZmID8gMCA6IGEubGVuLCBiLm9mZiA/IDAgOiBiLmlucywgb3Blbik7XG4gICAgICAgICAgICAgICAgaWYgKGluc2VydCAmJiAhYi5vZmYpXG4gICAgICAgICAgICAgICAgICAgIGFkZEluc2VydChpbnNlcnQsIHNlY3Rpb25zLCBiLnRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3BlbiA9IChhLmlucyA+IGxlbiB8fCBiLmlucyA+PSAwICYmIGIubGVuID4gbGVuKSAmJiAob3BlbiB8fCBzZWN0aW9ucy5sZW5ndGggPiBzZWN0aW9uTGVuKTtcbiAgICAgICAgICAgIGEuZm9yd2FyZDIobGVuKTtcbiAgICAgICAgICAgIGIuZm9yd2FyZChsZW4pO1xuICAgICAgICB9XG4gICAgfVxufVxuY2xhc3MgU2VjdGlvbkl0ZXIge1xuICAgIGNvbnN0cnVjdG9yKHNldCkge1xuICAgICAgICB0aGlzLnNldCA9IHNldDtcbiAgICAgICAgdGhpcy5pID0gMDtcbiAgICAgICAgdGhpcy5uZXh0KCk7XG4gICAgfVxuICAgIG5leHQoKSB7XG4gICAgICAgIGxldCB7IHNlY3Rpb25zIH0gPSB0aGlzLnNldDtcbiAgICAgICAgaWYgKHRoaXMuaSA8IHNlY3Rpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5sZW4gPSBzZWN0aW9uc1t0aGlzLmkrK107XG4gICAgICAgICAgICB0aGlzLmlucyA9IHNlY3Rpb25zW3RoaXMuaSsrXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubGVuID0gMDtcbiAgICAgICAgICAgIHRoaXMuaW5zID0gLTI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vZmYgPSAwO1xuICAgIH1cbiAgICBnZXQgZG9uZSgpIHsgcmV0dXJuIHRoaXMuaW5zID09IC0yOyB9XG4gICAgZ2V0IGxlbjIoKSB7IHJldHVybiB0aGlzLmlucyA8IDAgPyB0aGlzLmxlbiA6IHRoaXMuaW5zOyB9XG4gICAgZ2V0IHRleHQoKSB7XG4gICAgICAgIGxldCB7IGluc2VydGVkIH0gPSB0aGlzLnNldCwgaW5kZXggPSAodGhpcy5pIC0gMikgPj4gMTtcbiAgICAgICAgcmV0dXJuIGluZGV4ID49IGluc2VydGVkLmxlbmd0aCA/IFRleHQuZW1wdHkgOiBpbnNlcnRlZFtpbmRleF07XG4gICAgfVxuICAgIHRleHRCaXQobGVuKSB7XG4gICAgICAgIGxldCB7IGluc2VydGVkIH0gPSB0aGlzLnNldCwgaW5kZXggPSAodGhpcy5pIC0gMikgPj4gMTtcbiAgICAgICAgcmV0dXJuIGluZGV4ID49IGluc2VydGVkLmxlbmd0aCAmJiAhbGVuID8gVGV4dC5lbXB0eVxuICAgICAgICAgICAgOiBpbnNlcnRlZFtpbmRleF0uc2xpY2UodGhpcy5vZmYsIGxlbiA9PSBudWxsID8gdW5kZWZpbmVkIDogdGhpcy5vZmYgKyBsZW4pO1xuICAgIH1cbiAgICBmb3J3YXJkKGxlbikge1xuICAgICAgICBpZiAobGVuID09IHRoaXMubGVuKVxuICAgICAgICAgICAgdGhpcy5uZXh0KCk7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sZW4gLT0gbGVuO1xuICAgICAgICAgICAgdGhpcy5vZmYgKz0gbGVuO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvcndhcmQyKGxlbikge1xuICAgICAgICBpZiAodGhpcy5pbnMgPT0gLTEpXG4gICAgICAgICAgICB0aGlzLmZvcndhcmQobGVuKTtcbiAgICAgICAgZWxzZSBpZiAobGVuID09IHRoaXMuaW5zKVxuICAgICAgICAgICAgdGhpcy5uZXh0KCk7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pbnMgLT0gbGVuO1xuICAgICAgICAgICAgdGhpcy5vZmYgKz0gbGVuO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbkEgc2luZ2xlIHNlbGVjdGlvbiByYW5nZS4gV2hlblxuW2BhbGxvd011bHRpcGxlU2VsZWN0aW9uc2BdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGVeYWxsb3dNdWx0aXBsZVNlbGVjdGlvbnMpXG5pcyBlbmFibGVkLCBhIFtzZWxlY3Rpb25dKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU2VsZWN0aW9uKSBtYXkgaG9sZFxubXVsdGlwbGUgcmFuZ2VzLiBCeSBkZWZhdWx0LCBzZWxlY3Rpb25zIGhvbGQgZXhhY3RseSBvbmUgcmFuZ2UuXG4qL1xuY2xhc3MgU2VsZWN0aW9uUmFuZ2Uge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBsb3dlciBib3VuZGFyeSBvZiB0aGUgcmFuZ2UuXG4gICAgKi9cbiAgICBmcm9tLCBcbiAgICAvKipcbiAgICBUaGUgdXBwZXIgYm91bmRhcnkgb2YgdGhlIHJhbmdlLlxuICAgICovXG4gICAgdG8sIGZsYWdzKSB7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICAgICAgdGhpcy5mbGFncyA9IGZsYWdzO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgYW5jaG9yIG9mIHRoZSByYW5nZVx1MjAxNHRoZSBzaWRlIHRoYXQgZG9lc24ndCBtb3ZlIHdoZW4geW91XG4gICAgZXh0ZW5kIGl0LlxuICAgICovXG4gICAgZ2V0IGFuY2hvcigpIHsgcmV0dXJuIHRoaXMuZmxhZ3MgJiAxNiAvKiBSYW5nZUZsYWcuSW52ZXJ0ZWQgKi8gPyB0aGlzLnRvIDogdGhpcy5mcm9tOyB9XG4gICAgLyoqXG4gICAgVGhlIGhlYWQgb2YgdGhlIHJhbmdlLCB3aGljaCBpcyBtb3ZlZCB3aGVuIHRoZSByYW5nZSBpc1xuICAgIFtleHRlbmRlZF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5TZWxlY3Rpb25SYW5nZS5leHRlbmQpLlxuICAgICovXG4gICAgZ2V0IGhlYWQoKSB7IHJldHVybiB0aGlzLmZsYWdzICYgMTYgLyogUmFuZ2VGbGFnLkludmVydGVkICovID8gdGhpcy5mcm9tIDogdGhpcy50bzsgfVxuICAgIC8qKlxuICAgIFRydWUgd2hlbiBgYW5jaG9yYCBhbmQgYGhlYWRgIGFyZSBhdCB0aGUgc2FtZSBwb3NpdGlvbi5cbiAgICAqL1xuICAgIGdldCBlbXB0eSgpIHsgcmV0dXJuIHRoaXMuZnJvbSA9PSB0aGlzLnRvOyB9XG4gICAgLyoqXG4gICAgSWYgdGhpcyBpcyBhIGN1cnNvciB0aGF0IGlzIGV4cGxpY2l0bHkgYXNzb2NpYXRlZCB3aXRoIHRoZVxuICAgIGNoYXJhY3RlciBvbiBvbmUgb2YgaXRzIHNpZGVzLCB0aGlzIHJldHVybnMgdGhlIHNpZGUuIC0xIG1lYW5zXG4gICAgdGhlIGNoYXJhY3RlciBiZWZvcmUgaXRzIHBvc2l0aW9uLCAxIHRoZSBjaGFyYWN0ZXIgYWZ0ZXIsIGFuZCAwXG4gICAgbWVhbnMgbm8gYXNzb2NpYXRpb24uXG4gICAgKi9cbiAgICBnZXQgYXNzb2MoKSB7IHJldHVybiB0aGlzLmZsYWdzICYgNCAvKiBSYW5nZUZsYWcuQXNzb2NCZWZvcmUgKi8gPyAtMSA6IHRoaXMuZmxhZ3MgJiA4IC8qIFJhbmdlRmxhZy5Bc3NvY0FmdGVyICovID8gMSA6IDA7IH1cbiAgICAvKipcbiAgICBUaGUgYmlkaXJlY3Rpb25hbCB0ZXh0IGxldmVsIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGN1cnNvciwgaWZcbiAgICBhbnkuXG4gICAgKi9cbiAgICBnZXQgYmlkaUxldmVsKCkge1xuICAgICAgICBsZXQgbGV2ZWwgPSB0aGlzLmZsYWdzICYgMyAvKiBSYW5nZUZsYWcuQmlkaUxldmVsTWFzayAqLztcbiAgICAgICAgcmV0dXJuIGxldmVsID09IDMgPyBudWxsIDogbGV2ZWw7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBnb2FsIGNvbHVtbiAoc3RvcmVkIHZlcnRpY2FsIG9mZnNldCkgYXNzb2NpYXRlZCB3aXRoIGFcbiAgICBjdXJzb3IuIFRoaXMgaXMgdXNlZCB0byBwcmVzZXJ2ZSB0aGUgdmVydGljYWwgcG9zaXRpb24gd2hlblxuICAgIFttb3ZpbmddKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3Lm1vdmVWZXJ0aWNhbGx5KSBhY3Jvc3NcbiAgICBsaW5lcyBvZiBkaWZmZXJlbnQgbGVuZ3RoLlxuICAgICovXG4gICAgZ2V0IGdvYWxDb2x1bW4oKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IHRoaXMuZmxhZ3MgPj4gNSAvKiBSYW5nZUZsYWcuR29hbENvbHVtbk9mZnNldCAqLztcbiAgICAgICAgcmV0dXJuIHZhbHVlID09IDMzNTU0NDMxIC8qIFJhbmdlRmxhZy5Ob0dvYWxDb2x1bW4gKi8gPyB1bmRlZmluZWQgOiB2YWx1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgTWFwIHRoaXMgcmFuZ2UgdGhyb3VnaCBhIGNoYW5nZSwgcHJvZHVjaW5nIGEgdmFsaWQgcmFuZ2UgaW4gdGhlXG4gICAgdXBkYXRlZCBkb2N1bWVudC5cbiAgICAqL1xuICAgIG1hcChjaGFuZ2UsIGFzc29jID0gLTEpIHtcbiAgICAgICAgbGV0IGZyb20sIHRvO1xuICAgICAgICBpZiAodGhpcy5lbXB0eSkge1xuICAgICAgICAgICAgZnJvbSA9IHRvID0gY2hhbmdlLm1hcFBvcyh0aGlzLmZyb20sIGFzc29jKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZyb20gPSBjaGFuZ2UubWFwUG9zKHRoaXMuZnJvbSwgMSk7XG4gICAgICAgICAgICB0byA9IGNoYW5nZS5tYXBQb3ModGhpcy50bywgLTEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmcm9tID09IHRoaXMuZnJvbSAmJiB0byA9PSB0aGlzLnRvID8gdGhpcyA6IG5ldyBTZWxlY3Rpb25SYW5nZShmcm9tLCB0bywgdGhpcy5mbGFncyk7XG4gICAgfVxuICAgIC8qKlxuICAgIEV4dGVuZCB0aGlzIHJhbmdlIHRvIGNvdmVyIGF0IGxlYXN0IGBmcm9tYCB0byBgdG9gLlxuICAgICovXG4gICAgZXh0ZW5kKGZyb20sIHRvID0gZnJvbSkge1xuICAgICAgICBpZiAoZnJvbSA8PSB0aGlzLmFuY2hvciAmJiB0byA+PSB0aGlzLmFuY2hvcilcbiAgICAgICAgICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24ucmFuZ2UoZnJvbSwgdG8pO1xuICAgICAgICBsZXQgaGVhZCA9IE1hdGguYWJzKGZyb20gLSB0aGlzLmFuY2hvcikgPiBNYXRoLmFicyh0byAtIHRoaXMuYW5jaG9yKSA/IGZyb20gOiB0bztcbiAgICAgICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5yYW5nZSh0aGlzLmFuY2hvciwgaGVhZCk7XG4gICAgfVxuICAgIC8qKlxuICAgIENvbXBhcmUgdGhpcyByYW5nZSB0byBhbm90aGVyIHJhbmdlLlxuICAgICovXG4gICAgZXEob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYW5jaG9yID09IG90aGVyLmFuY2hvciAmJiB0aGlzLmhlYWQgPT0gb3RoZXIuaGVhZDtcbiAgICB9XG4gICAgLyoqXG4gICAgUmV0dXJuIGEgSlNPTi1zZXJpYWxpemFibGUgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgcmFuZ2UuXG4gICAgKi9cbiAgICB0b0pTT04oKSB7IHJldHVybiB7IGFuY2hvcjogdGhpcy5hbmNob3IsIGhlYWQ6IHRoaXMuaGVhZCB9OyB9XG4gICAgLyoqXG4gICAgQ29udmVydCBhIEpTT04gcmVwcmVzZW50YXRpb24gb2YgYSByYW5nZSB0byBhIGBTZWxlY3Rpb25SYW5nZWBcbiAgICBpbnN0YW5jZS5cbiAgICAqL1xuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uKSB7XG4gICAgICAgIGlmICghanNvbiB8fCB0eXBlb2YganNvbi5hbmNob3IgIT0gXCJudW1iZXJcIiB8fCB0eXBlb2YganNvbi5oZWFkICE9IFwibnVtYmVyXCIpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgSlNPTiByZXByZXNlbnRhdGlvbiBmb3IgU2VsZWN0aW9uUmFuZ2VcIik7XG4gICAgICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24ucmFuZ2UoanNvbi5hbmNob3IsIGpzb24uaGVhZCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShmcm9tLCB0bywgZmxhZ3MpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTZWxlY3Rpb25SYW5nZShmcm9tLCB0bywgZmxhZ3MpO1xuICAgIH1cbn1cbi8qKlxuQW4gZWRpdG9yIHNlbGVjdGlvbiBob2xkcyBvbmUgb3IgbW9yZSBzZWxlY3Rpb24gcmFuZ2VzLlxuKi9cbmNsYXNzIEVkaXRvclNlbGVjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIHJhbmdlcyBpbiB0aGUgc2VsZWN0aW9uLCBzb3J0ZWQgYnkgcG9zaXRpb24uIFJhbmdlcyBjYW5ub3RcbiAgICBvdmVybGFwIChidXQgdGhleSBtYXkgdG91Y2gsIGlmIHRoZXkgYXJlbid0IGVtcHR5KS5cbiAgICAqL1xuICAgIHJhbmdlcywgXG4gICAgLyoqXG4gICAgVGhlIGluZGV4IG9mIHRoZSBfbWFpbl8gcmFuZ2UgaW4gdGhlIHNlbGVjdGlvbiAod2hpY2ggaXNcbiAgICB1c3VhbGx5IHRoZSByYW5nZSB0aGF0IHdhcyBhZGRlZCBsYXN0KS5cbiAgICAqL1xuICAgIG1haW5JbmRleCkge1xuICAgICAgICB0aGlzLnJhbmdlcyA9IHJhbmdlcztcbiAgICAgICAgdGhpcy5tYWluSW5kZXggPSBtYWluSW5kZXg7XG4gICAgfVxuICAgIC8qKlxuICAgIE1hcCBhIHNlbGVjdGlvbiB0aHJvdWdoIGEgY2hhbmdlLiBVc2VkIHRvIGFkanVzdCB0aGUgc2VsZWN0aW9uXG4gICAgcG9zaXRpb24gZm9yIGNoYW5nZXMuXG4gICAgKi9cbiAgICBtYXAoY2hhbmdlLCBhc3NvYyA9IC0xKSB7XG4gICAgICAgIGlmIChjaGFuZ2UuZW1wdHkpXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5jcmVhdGUodGhpcy5yYW5nZXMubWFwKHIgPT4gci5tYXAoY2hhbmdlLCBhc3NvYykpLCB0aGlzLm1haW5JbmRleCk7XG4gICAgfVxuICAgIC8qKlxuICAgIENvbXBhcmUgdGhpcyBzZWxlY3Rpb24gdG8gYW5vdGhlciBzZWxlY3Rpb24uXG4gICAgKi9cbiAgICBlcShvdGhlcikge1xuICAgICAgICBpZiAodGhpcy5yYW5nZXMubGVuZ3RoICE9IG90aGVyLnJhbmdlcy5sZW5ndGggfHxcbiAgICAgICAgICAgIHRoaXMubWFpbkluZGV4ICE9IG90aGVyLm1haW5JbmRleClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJhbmdlcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIGlmICghdGhpcy5yYW5nZXNbaV0uZXEob3RoZXIucmFuZ2VzW2ldKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIHByaW1hcnkgc2VsZWN0aW9uIHJhbmdlLiBVc3VhbGx5LCB5b3Ugc2hvdWxkIG1ha2Ugc3VyZVxuICAgIHlvdXIgY29kZSBhcHBsaWVzIHRvIF9hbGxfIHJhbmdlcywgYnkgdXNpbmcgbWV0aG9kcyBsaWtlXG4gICAgW2BjaGFuZ2VCeVJhbmdlYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZS5jaGFuZ2VCeVJhbmdlKS5cbiAgICAqL1xuICAgIGdldCBtYWluKCkgeyByZXR1cm4gdGhpcy5yYW5nZXNbdGhpcy5tYWluSW5kZXhdOyB9XG4gICAgLyoqXG4gICAgTWFrZSBzdXJlIHRoZSBzZWxlY3Rpb24gb25seSBoYXMgb25lIHJhbmdlLiBSZXR1cm5zIGEgc2VsZWN0aW9uXG4gICAgaG9sZGluZyBvbmx5IHRoZSBtYWluIHJhbmdlIGZyb20gdGhpcyBzZWxlY3Rpb24uXG4gICAgKi9cbiAgICBhc1NpbmdsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmFuZ2VzLmxlbmd0aCA9PSAxID8gdGhpcyA6IG5ldyBFZGl0b3JTZWxlY3Rpb24oW3RoaXMubWFpbl0sIDApO1xuICAgIH1cbiAgICAvKipcbiAgICBFeHRlbmQgdGhpcyBzZWxlY3Rpb24gd2l0aCBhbiBleHRyYSByYW5nZS5cbiAgICAqL1xuICAgIGFkZFJhbmdlKHJhbmdlLCBtYWluID0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLmNyZWF0ZShbcmFuZ2VdLmNvbmNhdCh0aGlzLnJhbmdlcyksIG1haW4gPyAwIDogdGhpcy5tYWluSW5kZXggKyAxKTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmVwbGFjZSBhIGdpdmVuIHJhbmdlIHdpdGggYW5vdGhlciByYW5nZSwgYW5kIHRoZW4gbm9ybWFsaXplIHRoZVxuICAgIHNlbGVjdGlvbiB0byBtZXJnZSBhbmQgc29ydCByYW5nZXMgaWYgbmVjZXNzYXJ5LlxuICAgICovXG4gICAgcmVwbGFjZVJhbmdlKHJhbmdlLCB3aGljaCA9IHRoaXMubWFpbkluZGV4KSB7XG4gICAgICAgIGxldCByYW5nZXMgPSB0aGlzLnJhbmdlcy5zbGljZSgpO1xuICAgICAgICByYW5nZXNbd2hpY2hdID0gcmFuZ2U7XG4gICAgICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24uY3JlYXRlKHJhbmdlcywgdGhpcy5tYWluSW5kZXgpO1xuICAgIH1cbiAgICAvKipcbiAgICBDb252ZXJ0IHRoaXMgc2VsZWN0aW9uIHRvIGFuIG9iamVjdCB0aGF0IGNhbiBiZSBzZXJpYWxpemVkIHRvXG4gICAgSlNPTi5cbiAgICAqL1xuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHsgcmFuZ2VzOiB0aGlzLnJhbmdlcy5tYXAociA9PiByLnRvSlNPTigpKSwgbWFpbjogdGhpcy5tYWluSW5kZXggfTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgc2VsZWN0aW9uIGZyb20gYSBKU09OIHJlcHJlc2VudGF0aW9uLlxuICAgICovXG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgaWYgKCFqc29uIHx8ICFBcnJheS5pc0FycmF5KGpzb24ucmFuZ2VzKSB8fCB0eXBlb2YganNvbi5tYWluICE9IFwibnVtYmVyXCIgfHwganNvbi5tYWluID49IGpzb24ucmFuZ2VzLmxlbmd0aClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCBKU09OIHJlcHJlc2VudGF0aW9uIGZvciBFZGl0b3JTZWxlY3Rpb25cIik7XG4gICAgICAgIHJldHVybiBuZXcgRWRpdG9yU2VsZWN0aW9uKGpzb24ucmFuZ2VzLm1hcCgocikgPT4gU2VsZWN0aW9uUmFuZ2UuZnJvbUpTT04ocikpLCBqc29uLm1haW4pO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBzZWxlY3Rpb24gaG9sZGluZyBhIHNpbmdsZSByYW5nZS5cbiAgICAqL1xuICAgIHN0YXRpYyBzaW5nbGUoYW5jaG9yLCBoZWFkID0gYW5jaG9yKSB7XG4gICAgICAgIHJldHVybiBuZXcgRWRpdG9yU2VsZWN0aW9uKFtFZGl0b3JTZWxlY3Rpb24ucmFuZ2UoYW5jaG9yLCBoZWFkKV0sIDApO1xuICAgIH1cbiAgICAvKipcbiAgICBTb3J0IGFuZCBtZXJnZSB0aGUgZ2l2ZW4gc2V0IG9mIHJhbmdlcywgY3JlYXRpbmcgYSB2YWxpZFxuICAgIHNlbGVjdGlvbi5cbiAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUocmFuZ2VzLCBtYWluSW5kZXggPSAwKSB7XG4gICAgICAgIGlmIChyYW5nZXMubGVuZ3RoID09IDApXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkEgc2VsZWN0aW9uIG5lZWRzIGF0IGxlYXN0IG9uZSByYW5nZVwiKTtcbiAgICAgICAgZm9yIChsZXQgcG9zID0gMCwgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCByYW5nZSA9IHJhbmdlc1tpXTtcbiAgICAgICAgICAgIGlmIChyYW5nZS5lbXB0eSA/IHJhbmdlLmZyb20gPD0gcG9zIDogcmFuZ2UuZnJvbSA8IHBvcylcbiAgICAgICAgICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLm5vcm1hbGl6ZWQocmFuZ2VzLnNsaWNlKCksIG1haW5JbmRleCk7XG4gICAgICAgICAgICBwb3MgPSByYW5nZS50bztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEVkaXRvclNlbGVjdGlvbihyYW5nZXMsIG1haW5JbmRleCk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIGN1cnNvciBzZWxlY3Rpb24gcmFuZ2UgYXQgdGhlIGdpdmVuIHBvc2l0aW9uLiBZb3UgY2FuXG4gICAgc2FmZWx5IGlnbm9yZSB0aGUgb3B0aW9uYWwgYXJndW1lbnRzIGluIG1vc3Qgc2l0dWF0aW9ucy5cbiAgICAqL1xuICAgIHN0YXRpYyBjdXJzb3IocG9zLCBhc3NvYyA9IDAsIGJpZGlMZXZlbCwgZ29hbENvbHVtbikge1xuICAgICAgICByZXR1cm4gU2VsZWN0aW9uUmFuZ2UuY3JlYXRlKHBvcywgcG9zLCAoYXNzb2MgPT0gMCA/IDAgOiBhc3NvYyA8IDAgPyA0IC8qIFJhbmdlRmxhZy5Bc3NvY0JlZm9yZSAqLyA6IDggLyogUmFuZ2VGbGFnLkFzc29jQWZ0ZXIgKi8pIHxcbiAgICAgICAgICAgIChiaWRpTGV2ZWwgPT0gbnVsbCA/IDMgOiBNYXRoLm1pbigyLCBiaWRpTGV2ZWwpKSB8XG4gICAgICAgICAgICAoKGdvYWxDb2x1bW4gIT09IG51bGwgJiYgZ29hbENvbHVtbiAhPT0gdm9pZCAwID8gZ29hbENvbHVtbiA6IDMzNTU0NDMxIC8qIFJhbmdlRmxhZy5Ob0dvYWxDb2x1bW4gKi8pIDw8IDUgLyogUmFuZ2VGbGFnLkdvYWxDb2x1bW5PZmZzZXQgKi8pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgc2VsZWN0aW9uIHJhbmdlLlxuICAgICovXG4gICAgc3RhdGljIHJhbmdlKGFuY2hvciwgaGVhZCwgZ29hbENvbHVtbikge1xuICAgICAgICBsZXQgZ29hbCA9IChnb2FsQ29sdW1uICE9PSBudWxsICYmIGdvYWxDb2x1bW4gIT09IHZvaWQgMCA/IGdvYWxDb2x1bW4gOiAzMzU1NDQzMSAvKiBSYW5nZUZsYWcuTm9Hb2FsQ29sdW1uICovKSA8PCA1IC8qIFJhbmdlRmxhZy5Hb2FsQ29sdW1uT2Zmc2V0ICovO1xuICAgICAgICByZXR1cm4gaGVhZCA8IGFuY2hvciA/IFNlbGVjdGlvblJhbmdlLmNyZWF0ZShoZWFkLCBhbmNob3IsIDE2IC8qIFJhbmdlRmxhZy5JbnZlcnRlZCAqLyB8IGdvYWwgfCA4IC8qIFJhbmdlRmxhZy5Bc3NvY0FmdGVyICovKVxuICAgICAgICAgICAgOiBTZWxlY3Rpb25SYW5nZS5jcmVhdGUoYW5jaG9yLCBoZWFkLCBnb2FsIHwgKGhlYWQgPiBhbmNob3IgPyA0IC8qIFJhbmdlRmxhZy5Bc3NvY0JlZm9yZSAqLyA6IDApKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgbm9ybWFsaXplZChyYW5nZXMsIG1haW5JbmRleCA9IDApIHtcbiAgICAgICAgbGV0IG1haW4gPSByYW5nZXNbbWFpbkluZGV4XTtcbiAgICAgICAgcmFuZ2VzLnNvcnQoKGEsIGIpID0+IGEuZnJvbSAtIGIuZnJvbSk7XG4gICAgICAgIG1haW5JbmRleCA9IHJhbmdlcy5pbmRleE9mKG1haW4pO1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHJhbmdlID0gcmFuZ2VzW2ldLCBwcmV2ID0gcmFuZ2VzW2kgLSAxXTtcbiAgICAgICAgICAgIGlmIChyYW5nZS5lbXB0eSA/IHJhbmdlLmZyb20gPD0gcHJldi50byA6IHJhbmdlLmZyb20gPCBwcmV2LnRvKSB7XG4gICAgICAgICAgICAgICAgbGV0IGZyb20gPSBwcmV2LmZyb20sIHRvID0gTWF0aC5tYXgocmFuZ2UudG8sIHByZXYudG8pO1xuICAgICAgICAgICAgICAgIGlmIChpIDw9IG1haW5JbmRleClcbiAgICAgICAgICAgICAgICAgICAgbWFpbkluZGV4LS07XG4gICAgICAgICAgICAgICAgcmFuZ2VzLnNwbGljZSgtLWksIDIsIHJhbmdlLmFuY2hvciA+IHJhbmdlLmhlYWQgPyBFZGl0b3JTZWxlY3Rpb24ucmFuZ2UodG8sIGZyb20pIDogRWRpdG9yU2VsZWN0aW9uLnJhbmdlKGZyb20sIHRvKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBFZGl0b3JTZWxlY3Rpb24ocmFuZ2VzLCBtYWluSW5kZXgpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNoZWNrU2VsZWN0aW9uKHNlbGVjdGlvbiwgZG9jTGVuZ3RoKSB7XG4gICAgZm9yIChsZXQgcmFuZ2Ugb2Ygc2VsZWN0aW9uLnJhbmdlcylcbiAgICAgICAgaWYgKHJhbmdlLnRvID4gZG9jTGVuZ3RoKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJTZWxlY3Rpb24gcG9pbnRzIG91dHNpZGUgb2YgZG9jdW1lbnRcIik7XG59XG5cbmxldCBuZXh0SUQgPSAwO1xuLyoqXG5BIGZhY2V0IGlzIGEgbGFiZWxlZCB2YWx1ZSB0aGF0IGlzIGFzc29jaWF0ZWQgd2l0aCBhbiBlZGl0b3JcbnN0YXRlLiBJdCB0YWtlcyBpbnB1dHMgZnJvbSBhbnkgbnVtYmVyIG9mIGV4dGVuc2lvbnMsIGFuZCBjb21iaW5lc1xudGhvc2UgaW50byBhIHNpbmdsZSBvdXRwdXQgdmFsdWUuXG5cbkV4YW1wbGVzIG9mIHVzZXMgb2YgZmFjZXRzIGFyZSB0aGUgW3RhYlxuc2l6ZV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZV50YWJTaXplKSwgW2VkaXRvclxuYXR0cmlidXRlc10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXdeZWRpdG9yQXR0cmlidXRlcyksIGFuZCBbdXBkYXRlXG5saXN0ZW5lcnNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3XnVwZGF0ZUxpc3RlbmVyKS5cbiovXG5jbGFzcyBGYWNldCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb21iaW5lLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbXBhcmVJbnB1dCwgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb21wYXJlLCBpc1N0YXRpYywgZW5hYmxlcykge1xuICAgICAgICB0aGlzLmNvbWJpbmUgPSBjb21iaW5lO1xuICAgICAgICB0aGlzLmNvbXBhcmVJbnB1dCA9IGNvbXBhcmVJbnB1dDtcbiAgICAgICAgdGhpcy5jb21wYXJlID0gY29tcGFyZTtcbiAgICAgICAgdGhpcy5pc1N0YXRpYyA9IGlzU3RhdGljO1xuICAgICAgICAvKipcbiAgICAgICAgQGludGVybmFsXG4gICAgICAgICovXG4gICAgICAgIHRoaXMuaWQgPSBuZXh0SUQrKztcbiAgICAgICAgdGhpcy5kZWZhdWx0ID0gY29tYmluZShbXSk7XG4gICAgICAgIHRoaXMuZXh0ZW5zaW9ucyA9IHR5cGVvZiBlbmFibGVzID09IFwiZnVuY3Rpb25cIiA/IGVuYWJsZXModGhpcykgOiBlbmFibGVzO1xuICAgIH1cbiAgICAvKipcbiAgICBEZWZpbmUgYSBuZXcgZmFjZXQuXG4gICAgKi9cbiAgICBzdGF0aWMgZGVmaW5lKGNvbmZpZyA9IHt9KSB7XG4gICAgICAgIHJldHVybiBuZXcgRmFjZXQoY29uZmlnLmNvbWJpbmUgfHwgKChhKSA9PiBhKSwgY29uZmlnLmNvbXBhcmVJbnB1dCB8fCAoKGEsIGIpID0+IGEgPT09IGIpLCBjb25maWcuY29tcGFyZSB8fCAoIWNvbmZpZy5jb21iaW5lID8gc2FtZUFycmF5IDogKGEsIGIpID0+IGEgPT09IGIpLCAhIWNvbmZpZy5zdGF0aWMsIGNvbmZpZy5lbmFibGVzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmV0dXJucyBhbiBleHRlbnNpb24gdGhhdCBhZGRzIHRoZSBnaXZlbiB2YWx1ZSB0byB0aGlzIGZhY2V0LlxuICAgICovXG4gICAgb2YodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGYWNldFByb3ZpZGVyKFtdLCB0aGlzLCAwIC8qIFByb3ZpZGVyLlN0YXRpYyAqLywgdmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYW4gZXh0ZW5zaW9uIHRoYXQgY29tcHV0ZXMgYSB2YWx1ZSBmb3IgdGhlIGZhY2V0IGZyb20gYVxuICAgIHN0YXRlLiBZb3UgbXVzdCB0YWtlIGNhcmUgdG8gZGVjbGFyZSB0aGUgcGFydHMgb2YgdGhlIHN0YXRlIHRoYXRcbiAgICB0aGlzIHZhbHVlIGRlcGVuZHMgb24sIHNpbmNlIHlvdXIgZnVuY3Rpb24gaXMgb25seSBjYWxsZWQgYWdhaW5cbiAgICBmb3IgYSBuZXcgc3RhdGUgd2hlbiBvbmUgb2YgdGhvc2UgcGFydHMgY2hhbmdlZC5cbiAgICBcbiAgICBJbiBjYXNlcyB3aGVyZSB5b3VyIHZhbHVlIGRlcGVuZHMgb25seSBvbiBhIHNpbmdsZSBmaWVsZCwgeW91J2xsXG4gICAgd2FudCB0byB1c2UgdGhlIFtgZnJvbWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRmFjZXQuZnJvbSkgbWV0aG9kIGluc3RlYWQuXG4gICAgKi9cbiAgICBjb21wdXRlKGRlcHMsIGdldCkge1xuICAgICAgICBpZiAodGhpcy5pc1N0YXRpYylcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbid0IGNvbXB1dGUgYSBzdGF0aWMgZmFjZXRcIik7XG4gICAgICAgIHJldHVybiBuZXcgRmFjZXRQcm92aWRlcihkZXBzLCB0aGlzLCAxIC8qIFByb3ZpZGVyLlNpbmdsZSAqLywgZ2V0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGFuIGV4dGVuc2lvbiB0aGF0IGNvbXB1dGVzIHplcm8gb3IgbW9yZSB2YWx1ZXMgZm9yIHRoaXNcbiAgICBmYWNldCBmcm9tIGEgc3RhdGUuXG4gICAgKi9cbiAgICBjb21wdXRlTihkZXBzLCBnZXQpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNTdGF0aWMpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBjb21wdXRlIGEgc3RhdGljIGZhY2V0XCIpO1xuICAgICAgICByZXR1cm4gbmV3IEZhY2V0UHJvdmlkZXIoZGVwcywgdGhpcywgMiAvKiBQcm92aWRlci5NdWx0aSAqLywgZ2V0KTtcbiAgICB9XG4gICAgZnJvbShmaWVsZCwgZ2V0KSB7XG4gICAgICAgIGlmICghZ2V0KVxuICAgICAgICAgICAgZ2V0ID0geCA9PiB4O1xuICAgICAgICByZXR1cm4gdGhpcy5jb21wdXRlKFtmaWVsZF0sIHN0YXRlID0+IGdldChzdGF0ZS5maWVsZChmaWVsZCkpKTtcbiAgICB9XG59XG5mdW5jdGlvbiBzYW1lQXJyYXkoYSwgYikge1xuICAgIHJldHVybiBhID09IGIgfHwgYS5sZW5ndGggPT0gYi5sZW5ndGggJiYgYS5ldmVyeSgoZSwgaSkgPT4gZSA9PT0gYltpXSk7XG59XG5jbGFzcyBGYWNldFByb3ZpZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihkZXBlbmRlbmNpZXMsIGZhY2V0LCB0eXBlLCB2YWx1ZSkge1xuICAgICAgICB0aGlzLmRlcGVuZGVuY2llcyA9IGRlcGVuZGVuY2llcztcbiAgICAgICAgdGhpcy5mYWNldCA9IGZhY2V0O1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMuaWQgPSBuZXh0SUQrKztcbiAgICB9XG4gICAgZHluYW1pY1Nsb3QoYWRkcmVzc2VzKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgbGV0IGdldHRlciA9IHRoaXMudmFsdWU7XG4gICAgICAgIGxldCBjb21wYXJlID0gdGhpcy5mYWNldC5jb21wYXJlSW5wdXQ7XG4gICAgICAgIGxldCBpZCA9IHRoaXMuaWQsIGlkeCA9IGFkZHJlc3Nlc1tpZF0gPj4gMSwgbXVsdGkgPSB0aGlzLnR5cGUgPT0gMiAvKiBQcm92aWRlci5NdWx0aSAqLztcbiAgICAgICAgbGV0IGRlcERvYyA9IGZhbHNlLCBkZXBTZWwgPSBmYWxzZSwgZGVwQWRkcnMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgZGVwIG9mIHRoaXMuZGVwZW5kZW5jaWVzKSB7XG4gICAgICAgICAgICBpZiAoZGVwID09IFwiZG9jXCIpXG4gICAgICAgICAgICAgICAgZGVwRG9jID0gdHJ1ZTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGRlcCA9PSBcInNlbGVjdGlvblwiKVxuICAgICAgICAgICAgICAgIGRlcFNlbCA9IHRydWU7XG4gICAgICAgICAgICBlbHNlIGlmICgoKChfYSA9IGFkZHJlc3Nlc1tkZXAuaWRdKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAxKSAmIDEpID09IDApXG4gICAgICAgICAgICAgICAgZGVwQWRkcnMucHVzaChhZGRyZXNzZXNbZGVwLmlkXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNyZWF0ZShzdGF0ZSkge1xuICAgICAgICAgICAgICAgIHN0YXRlLnZhbHVlc1tpZHhdID0gZ2V0dGVyKHN0YXRlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gMSAvKiBTbG90U3RhdHVzLkNoYW5nZWQgKi87XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdXBkYXRlKHN0YXRlLCB0cikge1xuICAgICAgICAgICAgICAgIGlmICgoZGVwRG9jICYmIHRyLmRvY0NoYW5nZWQpIHx8IChkZXBTZWwgJiYgKHRyLmRvY0NoYW5nZWQgfHwgdHIuc2VsZWN0aW9uKSkgfHwgZW5zdXJlQWxsKHN0YXRlLCBkZXBBZGRycykpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld1ZhbCA9IGdldHRlcihzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtdWx0aSA/ICFjb21wYXJlQXJyYXkobmV3VmFsLCBzdGF0ZS52YWx1ZXNbaWR4XSwgY29tcGFyZSkgOiAhY29tcGFyZShuZXdWYWwsIHN0YXRlLnZhbHVlc1tpZHhdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUudmFsdWVzW2lkeF0gPSBuZXdWYWw7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMSAvKiBTbG90U3RhdHVzLkNoYW5nZWQgKi87XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVjb25maWd1cmU6IChzdGF0ZSwgb2xkU3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgbmV3VmFsLCBvbGRBZGRyID0gb2xkU3RhdGUuY29uZmlnLmFkZHJlc3NbaWRdO1xuICAgICAgICAgICAgICAgIGlmIChvbGRBZGRyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9sZFZhbCA9IGdldEFkZHIob2xkU3RhdGUsIG9sZEFkZHIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kZXBlbmRlbmNpZXMuZXZlcnkoZGVwID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkZXAgaW5zdGFuY2VvZiBGYWNldCA/IG9sZFN0YXRlLmZhY2V0KGRlcCkgPT09IHN0YXRlLmZhY2V0KGRlcCkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlcCBpbnN0YW5jZW9mIFN0YXRlRmllbGQgPyBvbGRTdGF0ZS5maWVsZChkZXAsIGZhbHNlKSA9PSBzdGF0ZS5maWVsZChkZXAsIGZhbHNlKSA6IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH0pIHx8IChtdWx0aSA/IGNvbXBhcmVBcnJheShuZXdWYWwgPSBnZXR0ZXIoc3RhdGUpLCBvbGRWYWwsIGNvbXBhcmUpIDogY29tcGFyZShuZXdWYWwgPSBnZXR0ZXIoc3RhdGUpLCBvbGRWYWwpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUudmFsdWVzW2lkeF0gPSBvbGRWYWw7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3VmFsID0gZ2V0dGVyKHN0YXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3RhdGUudmFsdWVzW2lkeF0gPSBuZXdWYWw7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDEgLyogU2xvdFN0YXR1cy5DaGFuZ2VkICovO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNvbXBhcmVBcnJheShhLCBiLCBjb21wYXJlKSB7XG4gICAgaWYgKGEubGVuZ3RoICE9IGIubGVuZ3RoKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKVxuICAgICAgICBpZiAoIWNvbXBhcmUoYVtpXSwgYltpXSkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBlbnN1cmVBbGwoc3RhdGUsIGFkZHJzKSB7XG4gICAgbGV0IGNoYW5nZWQgPSBmYWxzZTtcbiAgICBmb3IgKGxldCBhZGRyIG9mIGFkZHJzKVxuICAgICAgICBpZiAoZW5zdXJlQWRkcihzdGF0ZSwgYWRkcikgJiAxIC8qIFNsb3RTdGF0dXMuQ2hhbmdlZCAqLylcbiAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgIHJldHVybiBjaGFuZ2VkO1xufVxuZnVuY3Rpb24gZHluYW1pY0ZhY2V0U2xvdChhZGRyZXNzZXMsIGZhY2V0LCBwcm92aWRlcnMpIHtcbiAgICBsZXQgcHJvdmlkZXJBZGRycyA9IHByb3ZpZGVycy5tYXAocCA9PiBhZGRyZXNzZXNbcC5pZF0pO1xuICAgIGxldCBwcm92aWRlclR5cGVzID0gcHJvdmlkZXJzLm1hcChwID0+IHAudHlwZSk7XG4gICAgbGV0IGR5bmFtaWMgPSBwcm92aWRlckFkZHJzLmZpbHRlcihwID0+ICEocCAmIDEpKTtcbiAgICBsZXQgaWR4ID0gYWRkcmVzc2VzW2ZhY2V0LmlkXSA+PiAxO1xuICAgIGZ1bmN0aW9uIGdldChzdGF0ZSkge1xuICAgICAgICBsZXQgdmFsdWVzID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvdmlkZXJBZGRycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHZhbHVlID0gZ2V0QWRkcihzdGF0ZSwgcHJvdmlkZXJBZGRyc1tpXSk7XG4gICAgICAgICAgICBpZiAocHJvdmlkZXJUeXBlc1tpXSA9PSAyIC8qIFByb3ZpZGVyLk11bHRpICovKVxuICAgICAgICAgICAgICAgIGZvciAobGV0IHZhbCBvZiB2YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzLnB1c2godmFsKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB2YWx1ZXMucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhY2V0LmNvbWJpbmUodmFsdWVzKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY3JlYXRlKHN0YXRlKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBhZGRyIG9mIHByb3ZpZGVyQWRkcnMpXG4gICAgICAgICAgICAgICAgZW5zdXJlQWRkcihzdGF0ZSwgYWRkcik7XG4gICAgICAgICAgICBzdGF0ZS52YWx1ZXNbaWR4XSA9IGdldChzdGF0ZSk7XG4gICAgICAgICAgICByZXR1cm4gMSAvKiBTbG90U3RhdHVzLkNoYW5nZWQgKi87XG4gICAgICAgIH0sXG4gICAgICAgIHVwZGF0ZShzdGF0ZSwgdHIpIHtcbiAgICAgICAgICAgIGlmICghZW5zdXJlQWxsKHN0YXRlLCBkeW5hbWljKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IGdldChzdGF0ZSk7XG4gICAgICAgICAgICBpZiAoZmFjZXQuY29tcGFyZSh2YWx1ZSwgc3RhdGUudmFsdWVzW2lkeF0pKVxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgc3RhdGUudmFsdWVzW2lkeF0gPSB2YWx1ZTtcbiAgICAgICAgICAgIHJldHVybiAxIC8qIFNsb3RTdGF0dXMuQ2hhbmdlZCAqLztcbiAgICAgICAgfSxcbiAgICAgICAgcmVjb25maWd1cmUoc3RhdGUsIG9sZFN0YXRlKSB7XG4gICAgICAgICAgICBsZXQgZGVwQ2hhbmdlZCA9IGVuc3VyZUFsbChzdGF0ZSwgcHJvdmlkZXJBZGRycyk7XG4gICAgICAgICAgICBsZXQgb2xkUHJvdmlkZXJzID0gb2xkU3RhdGUuY29uZmlnLmZhY2V0c1tmYWNldC5pZF0sIG9sZFZhbHVlID0gb2xkU3RhdGUuZmFjZXQoZmFjZXQpO1xuICAgICAgICAgICAgaWYgKG9sZFByb3ZpZGVycyAmJiAhZGVwQ2hhbmdlZCAmJiBzYW1lQXJyYXkocHJvdmlkZXJzLCBvbGRQcm92aWRlcnMpKSB7XG4gICAgICAgICAgICAgICAgc3RhdGUudmFsdWVzW2lkeF0gPSBvbGRWYWx1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IGdldChzdGF0ZSk7XG4gICAgICAgICAgICBpZiAoZmFjZXQuY29tcGFyZSh2YWx1ZSwgb2xkVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgc3RhdGUudmFsdWVzW2lkeF0gPSBvbGRWYWx1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0YXRlLnZhbHVlc1tpZHhdID0gdmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gMSAvKiBTbG90U3RhdHVzLkNoYW5nZWQgKi87XG4gICAgICAgIH1cbiAgICB9O1xufVxuY29uc3QgaW5pdEZpZWxkID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7IHN0YXRpYzogdHJ1ZSB9KTtcbi8qKlxuRmllbGRzIGNhbiBzdG9yZSBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIGluIGFuIGVkaXRvciBzdGF0ZSwgYW5kXG5rZWVwIGl0IGluIHN5bmMgd2l0aCB0aGUgcmVzdCBvZiB0aGUgc3RhdGUuXG4qL1xuY2xhc3MgU3RhdGVGaWVsZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBpZCwgY3JlYXRlRiwgdXBkYXRlRiwgY29tcGFyZUYsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc3BlYykge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMuY3JlYXRlRiA9IGNyZWF0ZUY7XG4gICAgICAgIHRoaXMudXBkYXRlRiA9IHVwZGF0ZUY7XG4gICAgICAgIHRoaXMuY29tcGFyZUYgPSBjb21wYXJlRjtcbiAgICAgICAgdGhpcy5zcGVjID0gc3BlYztcbiAgICAgICAgLyoqXG4gICAgICAgIEBpbnRlcm5hbFxuICAgICAgICAqL1xuICAgICAgICB0aGlzLnByb3ZpZGVzID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICBEZWZpbmUgYSBzdGF0ZSBmaWVsZC5cbiAgICAqL1xuICAgIHN0YXRpYyBkZWZpbmUoY29uZmlnKSB7XG4gICAgICAgIGxldCBmaWVsZCA9IG5ldyBTdGF0ZUZpZWxkKG5leHRJRCsrLCBjb25maWcuY3JlYXRlLCBjb25maWcudXBkYXRlLCBjb25maWcuY29tcGFyZSB8fCAoKGEsIGIpID0+IGEgPT09IGIpLCBjb25maWcpO1xuICAgICAgICBpZiAoY29uZmlnLnByb3ZpZGUpXG4gICAgICAgICAgICBmaWVsZC5wcm92aWRlcyA9IGNvbmZpZy5wcm92aWRlKGZpZWxkKTtcbiAgICAgICAgcmV0dXJuIGZpZWxkO1xuICAgIH1cbiAgICBjcmVhdGUoc3RhdGUpIHtcbiAgICAgICAgbGV0IGluaXQgPSBzdGF0ZS5mYWNldChpbml0RmllbGQpLmZpbmQoaSA9PiBpLmZpZWxkID09IHRoaXMpO1xuICAgICAgICByZXR1cm4gKChpbml0ID09PSBudWxsIHx8IGluaXQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGluaXQuY3JlYXRlKSB8fCB0aGlzLmNyZWF0ZUYpKHN0YXRlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzbG90KGFkZHJlc3Nlcykge1xuICAgICAgICBsZXQgaWR4ID0gYWRkcmVzc2VzW3RoaXMuaWRdID4+IDE7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjcmVhdGU6IChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHN0YXRlLnZhbHVlc1tpZHhdID0gdGhpcy5jcmVhdGUoc3RhdGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiAxIC8qIFNsb3RTdGF0dXMuQ2hhbmdlZCAqLztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1cGRhdGU6IChzdGF0ZSwgdHIpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgb2xkVmFsID0gc3RhdGUudmFsdWVzW2lkeF07XG4gICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gdGhpcy51cGRhdGVGKG9sZFZhbCwgdHIpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbXBhcmVGKG9sZFZhbCwgdmFsdWUpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgICAgICBzdGF0ZS52YWx1ZXNbaWR4XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHJldHVybiAxIC8qIFNsb3RTdGF0dXMuQ2hhbmdlZCAqLztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZWNvbmZpZ3VyZTogKHN0YXRlLCBvbGRTdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChvbGRTdGF0ZS5jb25maWcuYWRkcmVzc1t0aGlzLmlkXSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLnZhbHVlc1tpZHhdID0gb2xkU3RhdGUuZmllbGQodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdGF0ZS52YWx1ZXNbaWR4XSA9IHRoaXMuY3JlYXRlKHN0YXRlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gMSAvKiBTbG90U3RhdHVzLkNoYW5nZWQgKi87XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHVybnMgYW4gZXh0ZW5zaW9uIHRoYXQgZW5hYmxlcyB0aGlzIGZpZWxkIGFuZCBvdmVycmlkZXMgdGhlXG4gICAgd2F5IGl0IGlzIGluaXRpYWxpemVkLiBDYW4gYmUgdXNlZnVsIHdoZW4geW91IG5lZWQgdG8gcHJvdmlkZSBhXG4gICAgbm9uLWRlZmF1bHQgc3RhcnRpbmcgdmFsdWUgZm9yIHRoZSBmaWVsZC5cbiAgICAqL1xuICAgIGluaXQoY3JlYXRlKSB7XG4gICAgICAgIHJldHVybiBbdGhpcywgaW5pdEZpZWxkLm9mKHsgZmllbGQ6IHRoaXMsIGNyZWF0ZSB9KV07XG4gICAgfVxuICAgIC8qKlxuICAgIFN0YXRlIGZpZWxkIGluc3RhbmNlcyBjYW4gYmUgdXNlZCBhc1xuICAgIFtgRXh0ZW5zaW9uYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FeHRlbnNpb24pIHZhbHVlcyB0byBlbmFibGUgdGhlIGZpZWxkIGluIGFcbiAgICBnaXZlbiBzdGF0ZS5cbiAgICAqL1xuICAgIGdldCBleHRlbnNpb24oKSB7IHJldHVybiB0aGlzOyB9XG59XG5jb25zdCBQcmVjXyA9IHsgbG93ZXN0OiA0LCBsb3c6IDMsIGRlZmF1bHQ6IDIsIGhpZ2g6IDEsIGhpZ2hlc3Q6IDAgfTtcbmZ1bmN0aW9uIHByZWModmFsdWUpIHtcbiAgICByZXR1cm4gKGV4dCkgPT4gbmV3IFByZWNFeHRlbnNpb24oZXh0LCB2YWx1ZSk7XG59XG4vKipcbkJ5IGRlZmF1bHQgZXh0ZW5zaW9ucyBhcmUgcmVnaXN0ZXJlZCBpbiB0aGUgb3JkZXIgdGhleSBhcmUgZm91bmRcbmluIHRoZSBmbGF0dGVuZWQgZm9ybSBvZiBuZXN0ZWQgYXJyYXkgdGhhdCB3YXMgcHJvdmlkZWQuXG5JbmRpdmlkdWFsIGV4dGVuc2lvbiB2YWx1ZXMgY2FuIGJlIGFzc2lnbmVkIGEgcHJlY2VkZW5jZSB0b1xub3ZlcnJpZGUgdGhpcy4gRXh0ZW5zaW9ucyB0aGF0IGRvIG5vdCBoYXZlIGEgcHJlY2VkZW5jZSBzZXQgZ2V0XG50aGUgcHJlY2VkZW5jZSBvZiB0aGUgbmVhcmVzdCBwYXJlbnQgd2l0aCBhIHByZWNlZGVuY2UsIG9yXG5bYGRlZmF1bHRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlByZWMuZGVmYXVsdCkgaWYgdGhlcmUgaXMgbm8gc3VjaCBwYXJlbnQuIFRoZVxuZmluYWwgb3JkZXJpbmcgb2YgZXh0ZW5zaW9ucyBpcyBkZXRlcm1pbmVkIGJ5IGZpcnN0IHNvcnRpbmcgYnlcbnByZWNlZGVuY2UgYW5kIHRoZW4gYnkgb3JkZXIgd2l0aGluIGVhY2ggcHJlY2VkZW5jZS5cbiovXG5jb25zdCBQcmVjID0ge1xuICAgIC8qKlxuICAgIFRoZSBoaWdoZXN0IHByZWNlZGVuY2UgbGV2ZWwsIGZvciBleHRlbnNpb25zIHRoYXQgc2hvdWxkIGVuZCB1cFxuICAgIG5lYXIgdGhlIHN0YXJ0IG9mIHRoZSBwcmVjZWRlbmNlIG9yZGVyaW5nLlxuICAgICovXG4gICAgaGlnaGVzdDogLypAX19QVVJFX18qL3ByZWMoUHJlY18uaGlnaGVzdCksXG4gICAgLyoqXG4gICAgQSBoaWdoZXItdGhhbi1kZWZhdWx0IHByZWNlZGVuY2UsIGZvciBleHRlbnNpb25zIHRoYXQgc2hvdWxkXG4gICAgY29tZSBiZWZvcmUgdGhvc2Ugd2l0aCBkZWZhdWx0IHByZWNlZGVuY2UuXG4gICAgKi9cbiAgICBoaWdoOiAvKkBfX1BVUkVfXyovcHJlYyhQcmVjXy5oaWdoKSxcbiAgICAvKipcbiAgICBUaGUgZGVmYXVsdCBwcmVjZWRlbmNlLCB3aGljaCBpcyBhbHNvIHVzZWQgZm9yIGV4dGVuc2lvbnNcbiAgICB3aXRob3V0IGFuIGV4cGxpY2l0IHByZWNlZGVuY2UuXG4gICAgKi9cbiAgICBkZWZhdWx0OiAvKkBfX1BVUkVfXyovcHJlYyhQcmVjXy5kZWZhdWx0KSxcbiAgICAvKipcbiAgICBBIGxvd2VyLXRoYW4tZGVmYXVsdCBwcmVjZWRlbmNlLlxuICAgICovXG4gICAgbG93OiAvKkBfX1BVUkVfXyovcHJlYyhQcmVjXy5sb3cpLFxuICAgIC8qKlxuICAgIFRoZSBsb3dlc3QgcHJlY2VkZW5jZSBsZXZlbC4gTWVhbnQgZm9yIHRoaW5ncyB0aGF0IHNob3VsZCBlbmQgdXBcbiAgICBuZWFyIHRoZSBlbmQgb2YgdGhlIGV4dGVuc2lvbiBvcmRlci5cbiAgICAqL1xuICAgIGxvd2VzdDogLypAX19QVVJFX18qL3ByZWMoUHJlY18ubG93ZXN0KVxufTtcbmNsYXNzIFByZWNFeHRlbnNpb24ge1xuICAgIGNvbnN0cnVjdG9yKGlubmVyLCBwcmVjKSB7XG4gICAgICAgIHRoaXMuaW5uZXIgPSBpbm5lcjtcbiAgICAgICAgdGhpcy5wcmVjID0gcHJlYztcbiAgICB9XG59XG4vKipcbkV4dGVuc2lvbiBjb21wYXJ0bWVudHMgY2FuIGJlIHVzZWQgdG8gbWFrZSBhIGNvbmZpZ3VyYXRpb25cbmR5bmFtaWMuIEJ5IFt3cmFwcGluZ10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5Db21wYXJ0bWVudC5vZikgcGFydCBvZiB5b3VyXG5jb25maWd1cmF0aW9uIGluIGEgY29tcGFydG1lbnQsIHlvdSBjYW4gbGF0ZXJcbltyZXBsYWNlXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkNvbXBhcnRtZW50LnJlY29uZmlndXJlKSB0aGF0IHBhcnQgdGhyb3VnaCBhXG50cmFuc2FjdGlvbi5cbiovXG5jbGFzcyBDb21wYXJ0bWVudCB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGFuIGluc3RhbmNlIG9mIHRoaXMgY29tcGFydG1lbnQgdG8gYWRkIHRvIHlvdXIgW3N0YXRlXG4gICAgY29uZmlndXJhdGlvbl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZUNvbmZpZy5leHRlbnNpb25zKS5cbiAgICAqL1xuICAgIG9mKGV4dCkgeyByZXR1cm4gbmV3IENvbXBhcnRtZW50SW5zdGFuY2UodGhpcywgZXh0KTsgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhbiBbZWZmZWN0XShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uU3BlYy5lZmZlY3RzKSB0aGF0XG4gICAgcmVjb25maWd1cmVzIHRoaXMgY29tcGFydG1lbnQuXG4gICAgKi9cbiAgICByZWNvbmZpZ3VyZShjb250ZW50KSB7XG4gICAgICAgIHJldHVybiBDb21wYXJ0bWVudC5yZWNvbmZpZ3VyZS5vZih7IGNvbXBhcnRtZW50OiB0aGlzLCBleHRlbnNpb246IGNvbnRlbnQgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgY3VycmVudCBjb250ZW50IG9mIHRoZSBjb21wYXJ0bWVudCBpbiB0aGUgc3RhdGUsIG9yXG4gICAgYHVuZGVmaW5lZGAgaWYgaXQgaXNuJ3QgcHJlc2VudC5cbiAgICAqL1xuICAgIGdldChzdGF0ZSkge1xuICAgICAgICByZXR1cm4gc3RhdGUuY29uZmlnLmNvbXBhcnRtZW50cy5nZXQodGhpcyk7XG4gICAgfVxufVxuY2xhc3MgQ29tcGFydG1lbnRJbnN0YW5jZSB7XG4gICAgY29uc3RydWN0b3IoY29tcGFydG1lbnQsIGlubmVyKSB7XG4gICAgICAgIHRoaXMuY29tcGFydG1lbnQgPSBjb21wYXJ0bWVudDtcbiAgICAgICAgdGhpcy5pbm5lciA9IGlubmVyO1xuICAgIH1cbn1cbmNsYXNzIENvbmZpZ3VyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGJhc2UsIGNvbXBhcnRtZW50cywgZHluYW1pY1Nsb3RzLCBhZGRyZXNzLCBzdGF0aWNWYWx1ZXMsIGZhY2V0cykge1xuICAgICAgICB0aGlzLmJhc2UgPSBiYXNlO1xuICAgICAgICB0aGlzLmNvbXBhcnRtZW50cyA9IGNvbXBhcnRtZW50cztcbiAgICAgICAgdGhpcy5keW5hbWljU2xvdHMgPSBkeW5hbWljU2xvdHM7XG4gICAgICAgIHRoaXMuYWRkcmVzcyA9IGFkZHJlc3M7XG4gICAgICAgIHRoaXMuc3RhdGljVmFsdWVzID0gc3RhdGljVmFsdWVzO1xuICAgICAgICB0aGlzLmZhY2V0cyA9IGZhY2V0cztcbiAgICAgICAgdGhpcy5zdGF0dXNUZW1wbGF0ZSA9IFtdO1xuICAgICAgICB3aGlsZSAodGhpcy5zdGF0dXNUZW1wbGF0ZS5sZW5ndGggPCBkeW5hbWljU2xvdHMubGVuZ3RoKVxuICAgICAgICAgICAgdGhpcy5zdGF0dXNUZW1wbGF0ZS5wdXNoKDAgLyogU2xvdFN0YXR1cy5VbnJlc29sdmVkICovKTtcbiAgICB9XG4gICAgc3RhdGljRmFjZXQoZmFjZXQpIHtcbiAgICAgICAgbGV0IGFkZHIgPSB0aGlzLmFkZHJlc3NbZmFjZXQuaWRdO1xuICAgICAgICByZXR1cm4gYWRkciA9PSBudWxsID8gZmFjZXQuZGVmYXVsdCA6IHRoaXMuc3RhdGljVmFsdWVzW2FkZHIgPj4gMV07XG4gICAgfVxuICAgIHN0YXRpYyByZXNvbHZlKGJhc2UsIGNvbXBhcnRtZW50cywgb2xkU3RhdGUpIHtcbiAgICAgICAgbGV0IGZpZWxkcyA9IFtdO1xuICAgICAgICBsZXQgZmFjZXRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgbGV0IG5ld0NvbXBhcnRtZW50cyA9IG5ldyBNYXAoKTtcbiAgICAgICAgZm9yIChsZXQgZXh0IG9mIGZsYXR0ZW4oYmFzZSwgY29tcGFydG1lbnRzLCBuZXdDb21wYXJ0bWVudHMpKSB7XG4gICAgICAgICAgICBpZiAoZXh0IGluc3RhbmNlb2YgU3RhdGVGaWVsZClcbiAgICAgICAgICAgICAgICBmaWVsZHMucHVzaChleHQpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIChmYWNldHNbZXh0LmZhY2V0LmlkXSB8fCAoZmFjZXRzW2V4dC5mYWNldC5pZF0gPSBbXSkpLnB1c2goZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgYWRkcmVzcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIGxldCBzdGF0aWNWYWx1ZXMgPSBbXTtcbiAgICAgICAgbGV0IGR5bmFtaWNTbG90cyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBmaWVsZCBvZiBmaWVsZHMpIHtcbiAgICAgICAgICAgIGFkZHJlc3NbZmllbGQuaWRdID0gZHluYW1pY1Nsb3RzLmxlbmd0aCA8PCAxO1xuICAgICAgICAgICAgZHluYW1pY1Nsb3RzLnB1c2goYSA9PiBmaWVsZC5zbG90KGEpKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgb2xkRmFjZXRzID0gb2xkU3RhdGUgPT09IG51bGwgfHwgb2xkU3RhdGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9sZFN0YXRlLmNvbmZpZy5mYWNldHM7XG4gICAgICAgIGZvciAobGV0IGlkIGluIGZhY2V0cykge1xuICAgICAgICAgICAgbGV0IHByb3ZpZGVycyA9IGZhY2V0c1tpZF0sIGZhY2V0ID0gcHJvdmlkZXJzWzBdLmZhY2V0O1xuICAgICAgICAgICAgbGV0IG9sZFByb3ZpZGVycyA9IG9sZEZhY2V0cyAmJiBvbGRGYWNldHNbaWRdIHx8IFtdO1xuICAgICAgICAgICAgaWYgKHByb3ZpZGVycy5ldmVyeShwID0+IHAudHlwZSA9PSAwIC8qIFByb3ZpZGVyLlN0YXRpYyAqLykpIHtcbiAgICAgICAgICAgICAgICBhZGRyZXNzW2ZhY2V0LmlkXSA9IChzdGF0aWNWYWx1ZXMubGVuZ3RoIDw8IDEpIHwgMTtcbiAgICAgICAgICAgICAgICBpZiAoc2FtZUFycmF5KG9sZFByb3ZpZGVycywgcHJvdmlkZXJzKSkge1xuICAgICAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZXMucHVzaChvbGRTdGF0ZS5mYWNldChmYWNldCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gZmFjZXQuY29tYmluZShwcm92aWRlcnMubWFwKHAgPT4gcC52YWx1ZSkpO1xuICAgICAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZXMucHVzaChvbGRTdGF0ZSAmJiBmYWNldC5jb21wYXJlKHZhbHVlLCBvbGRTdGF0ZS5mYWNldChmYWNldCkpID8gb2xkU3RhdGUuZmFjZXQoZmFjZXQpIDogdmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHAgb2YgcHJvdmlkZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwLnR5cGUgPT0gMCAvKiBQcm92aWRlci5TdGF0aWMgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3NbcC5pZF0gPSAoc3RhdGljVmFsdWVzLmxlbmd0aCA8PCAxKSB8IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZXMucHVzaChwLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3NbcC5pZF0gPSBkeW5hbWljU2xvdHMubGVuZ3RoIDw8IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBkeW5hbWljU2xvdHMucHVzaChhID0+IHAuZHluYW1pY1Nsb3QoYSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFkZHJlc3NbZmFjZXQuaWRdID0gZHluYW1pY1Nsb3RzLmxlbmd0aCA8PCAxO1xuICAgICAgICAgICAgICAgIGR5bmFtaWNTbG90cy5wdXNoKGEgPT4gZHluYW1pY0ZhY2V0U2xvdChhLCBmYWNldCwgcHJvdmlkZXJzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGR5bmFtaWMgPSBkeW5hbWljU2xvdHMubWFwKGYgPT4gZihhZGRyZXNzKSk7XG4gICAgICAgIHJldHVybiBuZXcgQ29uZmlndXJhdGlvbihiYXNlLCBuZXdDb21wYXJ0bWVudHMsIGR5bmFtaWMsIGFkZHJlc3MsIHN0YXRpY1ZhbHVlcywgZmFjZXRzKTtcbiAgICB9XG59XG5mdW5jdGlvbiBmbGF0dGVuKGV4dGVuc2lvbiwgY29tcGFydG1lbnRzLCBuZXdDb21wYXJ0bWVudHMpIHtcbiAgICBsZXQgcmVzdWx0ID0gW1tdLCBbXSwgW10sIFtdLCBbXV07XG4gICAgbGV0IHNlZW4gPSBuZXcgTWFwKCk7XG4gICAgZnVuY3Rpb24gaW5uZXIoZXh0LCBwcmVjKSB7XG4gICAgICAgIGxldCBrbm93biA9IHNlZW4uZ2V0KGV4dCk7XG4gICAgICAgIGlmIChrbm93biAhPSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoa25vd24gPD0gcHJlYylcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBsZXQgZm91bmQgPSByZXN1bHRba25vd25dLmluZGV4T2YoZXh0KTtcbiAgICAgICAgICAgIGlmIChmb3VuZCA+IC0xKVxuICAgICAgICAgICAgICAgIHJlc3VsdFtrbm93bl0uc3BsaWNlKGZvdW5kLCAxKTtcbiAgICAgICAgICAgIGlmIChleHQgaW5zdGFuY2VvZiBDb21wYXJ0bWVudEluc3RhbmNlKVxuICAgICAgICAgICAgICAgIG5ld0NvbXBhcnRtZW50cy5kZWxldGUoZXh0LmNvbXBhcnRtZW50KTtcbiAgICAgICAgfVxuICAgICAgICBzZWVuLnNldChleHQsIHByZWMpO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShleHQpKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBlIG9mIGV4dClcbiAgICAgICAgICAgICAgICBpbm5lcihlLCBwcmVjKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChleHQgaW5zdGFuY2VvZiBDb21wYXJ0bWVudEluc3RhbmNlKSB7XG4gICAgICAgICAgICBpZiAobmV3Q29tcGFydG1lbnRzLmhhcyhleHQuY29tcGFydG1lbnQpKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBEdXBsaWNhdGUgdXNlIG9mIGNvbXBhcnRtZW50IGluIGV4dGVuc2lvbnNgKTtcbiAgICAgICAgICAgIGxldCBjb250ZW50ID0gY29tcGFydG1lbnRzLmdldChleHQuY29tcGFydG1lbnQpIHx8IGV4dC5pbm5lcjtcbiAgICAgICAgICAgIG5ld0NvbXBhcnRtZW50cy5zZXQoZXh0LmNvbXBhcnRtZW50LCBjb250ZW50KTtcbiAgICAgICAgICAgIGlubmVyKGNvbnRlbnQsIHByZWMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV4dCBpbnN0YW5jZW9mIFByZWNFeHRlbnNpb24pIHtcbiAgICAgICAgICAgIGlubmVyKGV4dC5pbm5lciwgZXh0LnByZWMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV4dCBpbnN0YW5jZW9mIFN0YXRlRmllbGQpIHtcbiAgICAgICAgICAgIHJlc3VsdFtwcmVjXS5wdXNoKGV4dCk7XG4gICAgICAgICAgICBpZiAoZXh0LnByb3ZpZGVzKVxuICAgICAgICAgICAgICAgIGlubmVyKGV4dC5wcm92aWRlcywgcHJlYyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXh0IGluc3RhbmNlb2YgRmFjZXRQcm92aWRlcikge1xuICAgICAgICAgICAgcmVzdWx0W3ByZWNdLnB1c2goZXh0KTtcbiAgICAgICAgICAgIGlmIChleHQuZmFjZXQuZXh0ZW5zaW9ucylcbiAgICAgICAgICAgICAgICBpbm5lcihleHQuZmFjZXQuZXh0ZW5zaW9ucywgUHJlY18uZGVmYXVsdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgY29udGVudCA9IGV4dC5leHRlbnNpb247XG4gICAgICAgICAgICBpZiAoIWNvbnRlbnQpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnJlY29nbml6ZWQgZXh0ZW5zaW9uIHZhbHVlIGluIGV4dGVuc2lvbiBzZXQgKCR7ZXh0fSkuIFRoaXMgc29tZXRpbWVzIGhhcHBlbnMgYmVjYXVzZSBtdWx0aXBsZSBpbnN0YW5jZXMgb2YgQGNvZGVtaXJyb3Ivc3RhdGUgYXJlIGxvYWRlZCwgYnJlYWtpbmcgaW5zdGFuY2VvZiBjaGVja3MuYCk7XG4gICAgICAgICAgICBpbm5lcihjb250ZW50LCBwcmVjKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpbm5lcihleHRlbnNpb24sIFByZWNfLmRlZmF1bHQpO1xuICAgIHJldHVybiByZXN1bHQucmVkdWNlKChhLCBiKSA9PiBhLmNvbmNhdChiKSk7XG59XG5mdW5jdGlvbiBlbnN1cmVBZGRyKHN0YXRlLCBhZGRyKSB7XG4gICAgaWYgKGFkZHIgJiAxKVxuICAgICAgICByZXR1cm4gMiAvKiBTbG90U3RhdHVzLkNvbXB1dGVkICovO1xuICAgIGxldCBpZHggPSBhZGRyID4+IDE7XG4gICAgbGV0IHN0YXR1cyA9IHN0YXRlLnN0YXR1c1tpZHhdO1xuICAgIGlmIChzdGF0dXMgPT0gNCAvKiBTbG90U3RhdHVzLkNvbXB1dGluZyAqLylcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ3ljbGljIGRlcGVuZGVuY3kgYmV0d2VlbiBmaWVsZHMgYW5kL29yIGZhY2V0c1wiKTtcbiAgICBpZiAoc3RhdHVzICYgMiAvKiBTbG90U3RhdHVzLkNvbXB1dGVkICovKVxuICAgICAgICByZXR1cm4gc3RhdHVzO1xuICAgIHN0YXRlLnN0YXR1c1tpZHhdID0gNCAvKiBTbG90U3RhdHVzLkNvbXB1dGluZyAqLztcbiAgICBsZXQgY2hhbmdlZCA9IHN0YXRlLmNvbXB1dGVTbG90KHN0YXRlLCBzdGF0ZS5jb25maWcuZHluYW1pY1Nsb3RzW2lkeF0pO1xuICAgIHJldHVybiBzdGF0ZS5zdGF0dXNbaWR4XSA9IDIgLyogU2xvdFN0YXR1cy5Db21wdXRlZCAqLyB8IGNoYW5nZWQ7XG59XG5mdW5jdGlvbiBnZXRBZGRyKHN0YXRlLCBhZGRyKSB7XG4gICAgcmV0dXJuIGFkZHIgJiAxID8gc3RhdGUuY29uZmlnLnN0YXRpY1ZhbHVlc1thZGRyID4+IDFdIDogc3RhdGUudmFsdWVzW2FkZHIgPj4gMV07XG59XG5cbmNvbnN0IGxhbmd1YWdlRGF0YSA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmNvbnN0IGFsbG93TXVsdGlwbGVTZWxlY3Rpb25zID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgY29tYmluZTogdmFsdWVzID0+IHZhbHVlcy5zb21lKHYgPT4gdiksXG4gICAgc3RhdGljOiB0cnVlXG59KTtcbmNvbnN0IGxpbmVTZXBhcmF0b3IgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21iaW5lOiB2YWx1ZXMgPT4gdmFsdWVzLmxlbmd0aCA/IHZhbHVlc1swXSA6IHVuZGVmaW5lZCxcbiAgICBzdGF0aWM6IHRydWVcbn0pO1xuY29uc3QgY2hhbmdlRmlsdGVyID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY29uc3QgdHJhbnNhY3Rpb25GaWx0ZXIgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG5jb25zdCB0cmFuc2FjdGlvbkV4dGVuZGVyID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY29uc3QgcmVhZE9ubHkgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21iaW5lOiB2YWx1ZXMgPT4gdmFsdWVzLmxlbmd0aCA/IHZhbHVlc1swXSA6IGZhbHNlXG59KTtcblxuLyoqXG5Bbm5vdGF0aW9ucyBhcmUgdGFnZ2VkIHZhbHVlcyB0aGF0IGFyZSB1c2VkIHRvIGFkZCBtZXRhZGF0YSB0b1xudHJhbnNhY3Rpb25zIGluIGFuIGV4dGVuc2libGUgd2F5LiBUaGV5IHNob3VsZCBiZSB1c2VkIHRvIG1vZGVsXG50aGluZ3MgdGhhdCBlZmZlY3QgdGhlIGVudGlyZSB0cmFuc2FjdGlvbiAoc3VjaCBhcyBpdHMgW3RpbWVcbnN0YW1wXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uXnRpbWUpIG9yIGluZm9ybWF0aW9uIGFib3V0IGl0c1xuW29yaWdpbl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvbl51c2VyRXZlbnQpKS4gRm9yIGVmZmVjdHMgdGhhdCBoYXBwZW5cbl9hbG9uZ3NpZGVfIHRoZSBvdGhlciBjaGFuZ2VzIG1hZGUgYnkgdGhlIHRyYW5zYWN0aW9uLCBbc3RhdGVcbmVmZmVjdHNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuU3RhdGVFZmZlY3QpIGFyZSBtb3JlIGFwcHJvcHJpYXRlLlxuKi9cbmNsYXNzIEFubm90YXRpb24ge1xuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIGFubm90YXRpb24gdHlwZS5cbiAgICAqL1xuICAgIHR5cGUsIFxuICAgIC8qKlxuICAgIFRoZSB2YWx1ZSBvZiB0aGlzIGFubm90YXRpb24uXG4gICAgKi9cbiAgICB2YWx1ZSkge1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgIERlZmluZSBhIG5ldyB0eXBlIG9mIGFubm90YXRpb24uXG4gICAgKi9cbiAgICBzdGF0aWMgZGVmaW5lKCkgeyByZXR1cm4gbmV3IEFubm90YXRpb25UeXBlKCk7IH1cbn1cbi8qKlxuTWFya2VyIHRoYXQgaWRlbnRpZmllcyBhIHR5cGUgb2YgW2Fubm90YXRpb25dKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuQW5ub3RhdGlvbikuXG4qL1xuY2xhc3MgQW5ub3RhdGlvblR5cGUge1xuICAgIC8qKlxuICAgIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGlzIGFubm90YXRpb24uXG4gICAgKi9cbiAgICBvZih2YWx1ZSkgeyByZXR1cm4gbmV3IEFubm90YXRpb24odGhpcywgdmFsdWUpOyB9XG59XG4vKipcblJlcHJlc2VudGF0aW9uIG9mIGEgdHlwZSBvZiBzdGF0ZSBlZmZlY3QuIERlZmluZWQgd2l0aFxuW2BTdGF0ZUVmZmVjdC5kZWZpbmVgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlN0YXRlRWZmZWN0XmRlZmluZSkuXG4qL1xuY2xhc3MgU3RhdGVFZmZlY3RUeXBlIHtcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8vIFRoZSBgYW55YCB0eXBlcyBpbiB0aGVzZSBmdW5jdGlvbiB0eXBlcyBhcmUgdGhlcmUgdG8gd29ya1xuICAgIC8vIGFyb3VuZCBUeXBlU2NyaXB0IGlzc3VlICMzNzYzMSwgd2hlcmUgdGhlIHR5cGUgZ3VhcmQgb25cbiAgICAvLyBgU3RhdGVFZmZlY3QuaXNgIG15c3RlcmlvdXNseSBzdG9wcyB3b3JraW5nIHdoZW4gdGhlc2UgcHJvcGVybHlcbiAgICAvLyBoYXZlIHR5cGUgYFZhbHVlYC5cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIG1hcCkge1xuICAgICAgICB0aGlzLm1hcCA9IG1hcDtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgW3N0YXRlIGVmZmVjdF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5TdGF0ZUVmZmVjdCkgaW5zdGFuY2Ugb2YgdGhpc1xuICAgIHR5cGUuXG4gICAgKi9cbiAgICBvZih2YWx1ZSkgeyByZXR1cm4gbmV3IFN0YXRlRWZmZWN0KHRoaXMsIHZhbHVlKTsgfVxufVxuLyoqXG5TdGF0ZSBlZmZlY3RzIGNhbiBiZSB1c2VkIHRvIHJlcHJlc2VudCBhZGRpdGlvbmFsIGVmZmVjdHNcbmFzc29jaWF0ZWQgd2l0aCBhIFt0cmFuc2FjdGlvbl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvbi5lZmZlY3RzKS4gVGhleVxuYXJlIG9mdGVuIHVzZWZ1bCB0byBtb2RlbCBjaGFuZ2VzIHRvIGN1c3RvbSBbc3RhdGVcbmZpZWxkc10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5TdGF0ZUZpZWxkKSwgd2hlbiB0aG9zZSBjaGFuZ2VzIGFyZW4ndCBpbXBsaWNpdCBpblxuZG9jdW1lbnQgb3Igc2VsZWN0aW9uIGNoYW5nZXMuXG4qL1xuY2xhc3MgU3RhdGVFZmZlY3Qge1xuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICB0eXBlLCBcbiAgICAvKipcbiAgICBUaGUgdmFsdWUgb2YgdGhpcyBlZmZlY3QuXG4gICAgKi9cbiAgICB2YWx1ZSkge1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgIE1hcCB0aGlzIGVmZmVjdCB0aHJvdWdoIGEgcG9zaXRpb24gbWFwcGluZy4gV2lsbCByZXR1cm5cbiAgICBgdW5kZWZpbmVkYCB3aGVuIHRoYXQgZW5kcyB1cCBkZWxldGluZyB0aGUgZWZmZWN0LlxuICAgICovXG4gICAgbWFwKG1hcHBpbmcpIHtcbiAgICAgICAgbGV0IG1hcHBlZCA9IHRoaXMudHlwZS5tYXAodGhpcy52YWx1ZSwgbWFwcGluZyk7XG4gICAgICAgIHJldHVybiBtYXBwZWQgPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IG1hcHBlZCA9PSB0aGlzLnZhbHVlID8gdGhpcyA6IG5ldyBTdGF0ZUVmZmVjdCh0aGlzLnR5cGUsIG1hcHBlZCk7XG4gICAgfVxuICAgIC8qKlxuICAgIFRlbGxzIHlvdSB3aGV0aGVyIHRoaXMgZWZmZWN0IG9iamVjdCBpcyBvZiBhIGdpdmVuXG4gICAgW3R5cGVdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuU3RhdGVFZmZlY3RUeXBlKS5cbiAgICAqL1xuICAgIGlzKHR5cGUpIHsgcmV0dXJuIHRoaXMudHlwZSA9PSB0eXBlOyB9XG4gICAgLyoqXG4gICAgRGVmaW5lIGEgbmV3IGVmZmVjdCB0eXBlLiBUaGUgdHlwZSBwYXJhbWV0ZXIgaW5kaWNhdGVzIHRoZSB0eXBlXG4gICAgb2YgdmFsdWVzIHRoYXQgaGlzIGVmZmVjdCBob2xkcy5cbiAgICAqL1xuICAgIHN0YXRpYyBkZWZpbmUoc3BlYyA9IHt9KSB7XG4gICAgICAgIHJldHVybiBuZXcgU3RhdGVFZmZlY3RUeXBlKHNwZWMubWFwIHx8ICh2ID0+IHYpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgTWFwIGFuIGFycmF5IG9mIGVmZmVjdHMgdGhyb3VnaCBhIGNoYW5nZSBzZXQuXG4gICAgKi9cbiAgICBzdGF0aWMgbWFwRWZmZWN0cyhlZmZlY3RzLCBtYXBwaW5nKSB7XG4gICAgICAgIGlmICghZWZmZWN0cy5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gZWZmZWN0cztcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBlZmZlY3Qgb2YgZWZmZWN0cykge1xuICAgICAgICAgICAgbGV0IG1hcHBlZCA9IGVmZmVjdC5tYXAobWFwcGluZyk7XG4gICAgICAgICAgICBpZiAobWFwcGVkKVxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKG1hcHBlZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59XG4vKipcblRoaXMgZWZmZWN0IGNhbiBiZSB1c2VkIHRvIHJlY29uZmlndXJlIHRoZSByb290IGV4dGVuc2lvbnMgb2ZcbnRoZSBlZGl0b3IuIERvaW5nIHRoaXMgd2lsbCBkaXNjYXJkIGFueSBleHRlbnNpb25zXG5bYXBwZW5kZWRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuU3RhdGVFZmZlY3ReYXBwZW5kQ29uZmlnKSwgYnV0IGRvZXMgbm90IHJlc2V0XG50aGUgY29udGVudCBvZiBbcmVjb25maWd1cmVkXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkNvbXBhcnRtZW50LnJlY29uZmlndXJlKVxuY29tcGFydG1lbnRzLlxuKi9cblN0YXRlRWZmZWN0LnJlY29uZmlndXJlID0gLypAX19QVVJFX18qL1N0YXRlRWZmZWN0LmRlZmluZSgpO1xuLyoqXG5BcHBlbmQgZXh0ZW5zaW9ucyB0byB0aGUgdG9wLWxldmVsIGNvbmZpZ3VyYXRpb24gb2YgdGhlIGVkaXRvci5cbiovXG5TdGF0ZUVmZmVjdC5hcHBlbmRDb25maWcgPSAvKkBfX1BVUkVfXyovU3RhdGVFZmZlY3QuZGVmaW5lKCk7XG4vKipcbkNoYW5nZXMgdG8gdGhlIGVkaXRvciBzdGF0ZSBhcmUgZ3JvdXBlZCBpbnRvIHRyYW5zYWN0aW9ucy5cblR5cGljYWxseSwgYSB1c2VyIGFjdGlvbiBjcmVhdGVzIGEgc2luZ2xlIHRyYW5zYWN0aW9uLCB3aGljaCBtYXlcbmNvbnRhaW4gYW55IG51bWJlciBvZiBkb2N1bWVudCBjaGFuZ2VzLCBtYXkgY2hhbmdlIHRoZSBzZWxlY3Rpb24sXG5vciBoYXZlIG90aGVyIGVmZmVjdHMuIENyZWF0ZSBhIHRyYW5zYWN0aW9uIGJ5IGNhbGxpbmdcbltgRWRpdG9yU3RhdGUudXBkYXRlYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZS51cGRhdGUpLCBvciBpbW1lZGlhdGVseVxuZGlzcGF0Y2ggb25lIGJ5IGNhbGxpbmdcbltgRWRpdG9yVmlldy5kaXNwYXRjaGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LmRpc3BhdGNoKS5cbiovXG5jbGFzcyBUcmFuc2FjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIHN0YXRlIGZyb20gd2hpY2ggdGhlIHRyYW5zYWN0aW9uIHN0YXJ0cy5cbiAgICAqL1xuICAgIHN0YXJ0U3RhdGUsIFxuICAgIC8qKlxuICAgIFRoZSBkb2N1bWVudCBjaGFuZ2VzIG1hZGUgYnkgdGhpcyB0cmFuc2FjdGlvbi5cbiAgICAqL1xuICAgIGNoYW5nZXMsIFxuICAgIC8qKlxuICAgIFRoZSBzZWxlY3Rpb24gc2V0IGJ5IHRoaXMgdHJhbnNhY3Rpb24sIG9yIHVuZGVmaW5lZCBpZiBpdFxuICAgIGRvZXNuJ3QgZXhwbGljaXRseSBzZXQgYSBzZWxlY3Rpb24uXG4gICAgKi9cbiAgICBzZWxlY3Rpb24sIFxuICAgIC8qKlxuICAgIFRoZSBlZmZlY3RzIGFkZGVkIHRvIHRoZSB0cmFuc2FjdGlvbi5cbiAgICAqL1xuICAgIGVmZmVjdHMsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgYW5ub3RhdGlvbnMsIFxuICAgIC8qKlxuICAgIFdoZXRoZXIgdGhlIHNlbGVjdGlvbiBzaG91bGQgYmUgc2Nyb2xsZWQgaW50byB2aWV3IGFmdGVyIHRoaXNcbiAgICB0cmFuc2FjdGlvbiBpcyBkaXNwYXRjaGVkLlxuICAgICovXG4gICAgc2Nyb2xsSW50b1ZpZXcpIHtcbiAgICAgICAgdGhpcy5zdGFydFN0YXRlID0gc3RhcnRTdGF0ZTtcbiAgICAgICAgdGhpcy5jaGFuZ2VzID0gY2hhbmdlcztcbiAgICAgICAgdGhpcy5zZWxlY3Rpb24gPSBzZWxlY3Rpb247XG4gICAgICAgIHRoaXMuZWZmZWN0cyA9IGVmZmVjdHM7XG4gICAgICAgIHRoaXMuYW5ub3RhdGlvbnMgPSBhbm5vdGF0aW9ucztcbiAgICAgICAgdGhpcy5zY3JvbGxJbnRvVmlldyA9IHNjcm9sbEludG9WaWV3O1xuICAgICAgICAvKipcbiAgICAgICAgQGludGVybmFsXG4gICAgICAgICovXG4gICAgICAgIHRoaXMuX2RvYyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICBAaW50ZXJuYWxcbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fc3RhdGUgPSBudWxsO1xuICAgICAgICBpZiAoc2VsZWN0aW9uKVxuICAgICAgICAgICAgY2hlY2tTZWxlY3Rpb24oc2VsZWN0aW9uLCBjaGFuZ2VzLm5ld0xlbmd0aCk7XG4gICAgICAgIGlmICghYW5ub3RhdGlvbnMuc29tZSgoYSkgPT4gYS50eXBlID09IFRyYW5zYWN0aW9uLnRpbWUpKVxuICAgICAgICAgICAgdGhpcy5hbm5vdGF0aW9ucyA9IGFubm90YXRpb25zLmNvbmNhdChUcmFuc2FjdGlvbi50aW1lLm9mKERhdGUubm93KCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKHN0YXJ0U3RhdGUsIGNoYW5nZXMsIHNlbGVjdGlvbiwgZWZmZWN0cywgYW5ub3RhdGlvbnMsIHNjcm9sbEludG9WaWV3KSB7XG4gICAgICAgIHJldHVybiBuZXcgVHJhbnNhY3Rpb24oc3RhcnRTdGF0ZSwgY2hhbmdlcywgc2VsZWN0aW9uLCBlZmZlY3RzLCBhbm5vdGF0aW9ucywgc2Nyb2xsSW50b1ZpZXcpO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgbmV3IGRvY3VtZW50IHByb2R1Y2VkIGJ5IHRoZSB0cmFuc2FjdGlvbi4gQ29udHJhcnkgdG9cbiAgICBbYC5zdGF0ZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb24uc3RhdGUpYC5kb2NgLCBhY2Nlc3NpbmcgdGhpcyB3b24ndFxuICAgIGZvcmNlIHRoZSBlbnRpcmUgbmV3IHN0YXRlIHRvIGJlIGNvbXB1dGVkIHJpZ2h0IGF3YXksIHNvIGl0IGlzXG4gICAgcmVjb21tZW5kZWQgdGhhdCBbdHJhbnNhY3Rpb25cbiAgICBmaWx0ZXJzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlXnRyYW5zYWN0aW9uRmlsdGVyKSB1c2UgdGhpcyBnZXR0ZXJcbiAgICB3aGVuIHRoZXkgbmVlZCB0byBsb29rIGF0IHRoZSBuZXcgZG9jdW1lbnQuXG4gICAgKi9cbiAgICBnZXQgbmV3RG9jKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZG9jIHx8ICh0aGlzLl9kb2MgPSB0aGlzLmNoYW5nZXMuYXBwbHkodGhpcy5zdGFydFN0YXRlLmRvYykpO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgbmV3IHNlbGVjdGlvbiBwcm9kdWNlZCBieSB0aGUgdHJhbnNhY3Rpb24uIElmXG4gICAgW2B0aGlzLnNlbGVjdGlvbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb24uc2VsZWN0aW9uKSBpcyB1bmRlZmluZWQsXG4gICAgdGhpcyB3aWxsIFttYXBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU2VsZWN0aW9uLm1hcCkgdGhlIHN0YXJ0IHN0YXRlJ3NcbiAgICBjdXJyZW50IHNlbGVjdGlvbiB0aHJvdWdoIHRoZSBjaGFuZ2VzIG1hZGUgYnkgdGhlIHRyYW5zYWN0aW9uLlxuICAgICovXG4gICAgZ2V0IG5ld1NlbGVjdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uIHx8IHRoaXMuc3RhcnRTdGF0ZS5zZWxlY3Rpb24ubWFwKHRoaXMuY2hhbmdlcyk7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBuZXcgc3RhdGUgY3JlYXRlZCBieSB0aGUgdHJhbnNhY3Rpb24uIENvbXB1dGVkIG9uIGRlbWFuZFxuICAgIChidXQgcmV0YWluZWQgZm9yIHN1YnNlcXVlbnQgYWNjZXNzKSwgc28gaXQgaXMgcmVjb21tZW5kZWQgbm90IHRvXG4gICAgYWNjZXNzIGl0IGluIFt0cmFuc2FjdGlvblxuICAgIGZpbHRlcnNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGVedHJhbnNhY3Rpb25GaWx0ZXIpIHdoZW4gcG9zc2libGUuXG4gICAgKi9cbiAgICBnZXQgc3RhdGUoKSB7XG4gICAgICAgIGlmICghdGhpcy5fc3RhdGUpXG4gICAgICAgICAgICB0aGlzLnN0YXJ0U3RhdGUuYXBwbHlUcmFuc2FjdGlvbih0aGlzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXRlO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIHZhbHVlIG9mIHRoZSBnaXZlbiBhbm5vdGF0aW9uIHR5cGUsIGlmIGFueS5cbiAgICAqL1xuICAgIGFubm90YXRpb24odHlwZSkge1xuICAgICAgICBmb3IgKGxldCBhbm4gb2YgdGhpcy5hbm5vdGF0aW9ucylcbiAgICAgICAgICAgIGlmIChhbm4udHlwZSA9PSB0eXBlKVxuICAgICAgICAgICAgICAgIHJldHVybiBhbm4udmFsdWU7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgIEluZGljYXRlcyB3aGV0aGVyIHRoZSB0cmFuc2FjdGlvbiBjaGFuZ2VkIHRoZSBkb2N1bWVudC5cbiAgICAqL1xuICAgIGdldCBkb2NDaGFuZ2VkKCkgeyByZXR1cm4gIXRoaXMuY2hhbmdlcy5lbXB0eTsgfVxuICAgIC8qKlxuICAgIEluZGljYXRlcyB3aGV0aGVyIHRoaXMgdHJhbnNhY3Rpb24gcmVjb25maWd1cmVzIHRoZSBzdGF0ZVxuICAgICh0aHJvdWdoIGEgW2NvbmZpZ3VyYXRpb24gY29tcGFydG1lbnRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuQ29tcGFydG1lbnQpIG9yXG4gICAgd2l0aCBhIHRvcC1sZXZlbCBjb25maWd1cmF0aW9uXG4gICAgW2VmZmVjdF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5TdGF0ZUVmZmVjdF5yZWNvbmZpZ3VyZSkuXG4gICAgKi9cbiAgICBnZXQgcmVjb25maWd1cmVkKCkgeyByZXR1cm4gdGhpcy5zdGFydFN0YXRlLmNvbmZpZyAhPSB0aGlzLnN0YXRlLmNvbmZpZzsgfVxuICAgIC8qKlxuICAgIFJldHVybnMgdHJ1ZSBpZiB0aGUgdHJhbnNhY3Rpb24gaGFzIGEgW3VzZXJcbiAgICBldmVudF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvbl51c2VyRXZlbnQpIGFubm90YXRpb24gdGhhdCBpcyBlcXVhbCB0b1xuICAgIG9yIG1vcmUgc3BlY2lmaWMgdGhhbiBgZXZlbnRgLiBGb3IgZXhhbXBsZSwgaWYgdGhlIHRyYW5zYWN0aW9uXG4gICAgaGFzIGBcInNlbGVjdC5wb2ludGVyXCJgIGFzIHVzZXIgZXZlbnQsIGBcInNlbGVjdFwiYCBhbmRcbiAgICBgXCJzZWxlY3QucG9pbnRlclwiYCB3aWxsIG1hdGNoIGl0LlxuICAgICovXG4gICAgaXNVc2VyRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLmFubm90YXRpb24oVHJhbnNhY3Rpb24udXNlckV2ZW50KTtcbiAgICAgICAgcmV0dXJuICEhKGUgJiYgKGUgPT0gZXZlbnQgfHwgZS5sZW5ndGggPiBldmVudC5sZW5ndGggJiYgZS5zbGljZSgwLCBldmVudC5sZW5ndGgpID09IGV2ZW50ICYmIGVbZXZlbnQubGVuZ3RoXSA9PSBcIi5cIikpO1xuICAgIH1cbn1cbi8qKlxuQW5ub3RhdGlvbiB1c2VkIHRvIHN0b3JlIHRyYW5zYWN0aW9uIHRpbWVzdGFtcHMuIEF1dG9tYXRpY2FsbHlcbmFkZGVkIHRvIGV2ZXJ5IHRyYW5zYWN0aW9uLCBob2xkaW5nIGBEYXRlLm5vdygpYC5cbiovXG5UcmFuc2FjdGlvbi50aW1lID0gLypAX19QVVJFX18qL0Fubm90YXRpb24uZGVmaW5lKCk7XG4vKipcbkFubm90YXRpb24gdXNlZCB0byBhc3NvY2lhdGUgYSB0cmFuc2FjdGlvbiB3aXRoIGEgdXNlciBpbnRlcmZhY2VcbmV2ZW50LiBIb2xkcyBhIHN0cmluZyBpZGVudGlmeWluZyB0aGUgZXZlbnQsIHVzaW5nIGFcbmRvdC1zZXBhcmF0ZWQgZm9ybWF0IHRvIHN1cHBvcnQgYXR0YWNoaW5nIG1vcmUgc3BlY2lmaWNcbmluZm9ybWF0aW9uLiBUaGUgZXZlbnRzIHVzZWQgYnkgdGhlIGNvcmUgbGlicmFyaWVzIGFyZTpcblxuIC0gYFwiaW5wdXRcImAgd2hlbiBjb250ZW50IGlzIGVudGVyZWRcbiAgIC0gYFwiaW5wdXQudHlwZVwiYCBmb3IgdHlwZWQgaW5wdXRcbiAgICAgLSBgXCJpbnB1dC50eXBlLmNvbXBvc2VcImAgZm9yIGNvbXBvc2l0aW9uXG4gICAtIGBcImlucHV0LnBhc3RlXCJgIGZvciBwYXN0ZWQgaW5wdXRcbiAgIC0gYFwiaW5wdXQuZHJvcFwiYCB3aGVuIGFkZGluZyBjb250ZW50IHdpdGggZHJhZy1hbmQtZHJvcFxuICAgLSBgXCJpbnB1dC5jb21wbGV0ZVwiYCB3aGVuIGF1dG9jb21wbGV0aW5nXG4gLSBgXCJkZWxldGVcImAgd2hlbiB0aGUgdXNlciBkZWxldGVzIGNvbnRlbnRcbiAgIC0gYFwiZGVsZXRlLnNlbGVjdGlvblwiYCB3aGVuIGRlbGV0aW5nIHRoZSBzZWxlY3Rpb25cbiAgIC0gYFwiZGVsZXRlLmZvcndhcmRcImAgd2hlbiBkZWxldGluZyBmb3J3YXJkIGZyb20gdGhlIHNlbGVjdGlvblxuICAgLSBgXCJkZWxldGUuYmFja3dhcmRcImAgd2hlbiBkZWxldGluZyBiYWNrd2FyZCBmcm9tIHRoZSBzZWxlY3Rpb25cbiAgIC0gYFwiZGVsZXRlLmN1dFwiYCB3aGVuIGN1dHRpbmcgdG8gdGhlIGNsaXBib2FyZFxuIC0gYFwibW92ZVwiYCB3aGVuIGNvbnRlbnQgaXMgbW92ZWRcbiAgIC0gYFwibW92ZS5kcm9wXCJgIHdoZW4gY29udGVudCBpcyBtb3ZlZCB3aXRoaW4gdGhlIGVkaXRvciB0aHJvdWdoIGRyYWctYW5kLWRyb3BcbiAtIGBcInNlbGVjdFwiYCB3aGVuIGV4cGxpY2l0bHkgY2hhbmdpbmcgdGhlIHNlbGVjdGlvblxuICAgLSBgXCJzZWxlY3QucG9pbnRlclwiYCB3aGVuIHNlbGVjdGluZyB3aXRoIGEgbW91c2Ugb3Igb3RoZXIgcG9pbnRpbmcgZGV2aWNlXG4gLSBgXCJ1bmRvXCJgIGFuZCBgXCJyZWRvXCJgIGZvciBoaXN0b3J5IGFjdGlvbnNcblxuVXNlIFtgaXNVc2VyRXZlbnRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uLmlzVXNlckV2ZW50KSB0byBjaGVja1xud2hldGhlciB0aGUgYW5ub3RhdGlvbiBtYXRjaGVzIGEgZ2l2ZW4gZXZlbnQuXG4qL1xuVHJhbnNhY3Rpb24udXNlckV2ZW50ID0gLypAX19QVVJFX18qL0Fubm90YXRpb24uZGVmaW5lKCk7XG4vKipcbkFubm90YXRpb24gaW5kaWNhdGluZyB3aGV0aGVyIGEgdHJhbnNhY3Rpb24gc2hvdWxkIGJlIGFkZGVkIHRvXG50aGUgdW5kbyBoaXN0b3J5IG9yIG5vdC5cbiovXG5UcmFuc2FjdGlvbi5hZGRUb0hpc3RvcnkgPSAvKkBfX1BVUkVfXyovQW5ub3RhdGlvbi5kZWZpbmUoKTtcbi8qKlxuQW5ub3RhdGlvbiBpbmRpY2F0aW5nICh3aGVuIHByZXNlbnQgYW5kIHRydWUpIHRoYXQgYSB0cmFuc2FjdGlvblxucmVwcmVzZW50cyBhIGNoYW5nZSBtYWRlIGJ5IHNvbWUgb3RoZXIgYWN0b3IsIG5vdCB0aGUgdXNlci4gVGhpc1xuaXMgdXNlZCwgZm9yIGV4YW1wbGUsIHRvIHRhZyBvdGhlciBwZW9wbGUncyBjaGFuZ2VzIGluXG5jb2xsYWJvcmF0aXZlIGVkaXRpbmcuXG4qL1xuVHJhbnNhY3Rpb24ucmVtb3RlID0gLypAX19QVVJFX18qL0Fubm90YXRpb24uZGVmaW5lKCk7XG5mdW5jdGlvbiBqb2luUmFuZ2VzKGEsIGIpIHtcbiAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgZm9yIChsZXQgaUEgPSAwLCBpQiA9IDA7Oykge1xuICAgICAgICBsZXQgZnJvbSwgdG87XG4gICAgICAgIGlmIChpQSA8IGEubGVuZ3RoICYmIChpQiA9PSBiLmxlbmd0aCB8fCBiW2lCXSA+PSBhW2lBXSkpIHtcbiAgICAgICAgICAgIGZyb20gPSBhW2lBKytdO1xuICAgICAgICAgICAgdG8gPSBhW2lBKytdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlCIDwgYi5sZW5ndGgpIHtcbiAgICAgICAgICAgIGZyb20gPSBiW2lCKytdO1xuICAgICAgICAgICAgdG8gPSBiW2lCKytdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIGlmICghcmVzdWx0Lmxlbmd0aCB8fCByZXN1bHRbcmVzdWx0Lmxlbmd0aCAtIDFdIDwgZnJvbSlcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGZyb20sIHRvKTtcbiAgICAgICAgZWxzZSBpZiAocmVzdWx0W3Jlc3VsdC5sZW5ndGggLSAxXSA8IHRvKVxuICAgICAgICAgICAgcmVzdWx0W3Jlc3VsdC5sZW5ndGggLSAxXSA9IHRvO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1lcmdlVHJhbnNhY3Rpb24oYSwgYiwgc2VxdWVudGlhbCkge1xuICAgIHZhciBfYTtcbiAgICBsZXQgbWFwRm9yQSwgbWFwRm9yQiwgY2hhbmdlcztcbiAgICBpZiAoc2VxdWVudGlhbCkge1xuICAgICAgICBtYXBGb3JBID0gYi5jaGFuZ2VzO1xuICAgICAgICBtYXBGb3JCID0gQ2hhbmdlU2V0LmVtcHR5KGIuY2hhbmdlcy5sZW5ndGgpO1xuICAgICAgICBjaGFuZ2VzID0gYS5jaGFuZ2VzLmNvbXBvc2UoYi5jaGFuZ2VzKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG1hcEZvckEgPSBiLmNoYW5nZXMubWFwKGEuY2hhbmdlcyk7XG4gICAgICAgIG1hcEZvckIgPSBhLmNoYW5nZXMubWFwRGVzYyhiLmNoYW5nZXMsIHRydWUpO1xuICAgICAgICBjaGFuZ2VzID0gYS5jaGFuZ2VzLmNvbXBvc2UobWFwRm9yQSk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGNoYW5nZXMsXG4gICAgICAgIHNlbGVjdGlvbjogYi5zZWxlY3Rpb24gPyBiLnNlbGVjdGlvbi5tYXAobWFwRm9yQikgOiAoX2EgPSBhLnNlbGVjdGlvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1hcChtYXBGb3JBKSxcbiAgICAgICAgZWZmZWN0czogU3RhdGVFZmZlY3QubWFwRWZmZWN0cyhhLmVmZmVjdHMsIG1hcEZvckEpLmNvbmNhdChTdGF0ZUVmZmVjdC5tYXBFZmZlY3RzKGIuZWZmZWN0cywgbWFwRm9yQikpLFxuICAgICAgICBhbm5vdGF0aW9uczogYS5hbm5vdGF0aW9ucy5sZW5ndGggPyBhLmFubm90YXRpb25zLmNvbmNhdChiLmFubm90YXRpb25zKSA6IGIuYW5ub3RhdGlvbnMsXG4gICAgICAgIHNjcm9sbEludG9WaWV3OiBhLnNjcm9sbEludG9WaWV3IHx8IGIuc2Nyb2xsSW50b1ZpZXdcbiAgICB9O1xufVxuZnVuY3Rpb24gcmVzb2x2ZVRyYW5zYWN0aW9uSW5uZXIoc3RhdGUsIHNwZWMsIGRvY1NpemUpIHtcbiAgICBsZXQgc2VsID0gc3BlYy5zZWxlY3Rpb24sIGFubm90YXRpb25zID0gYXNBcnJheShzcGVjLmFubm90YXRpb25zKTtcbiAgICBpZiAoc3BlYy51c2VyRXZlbnQpXG4gICAgICAgIGFubm90YXRpb25zID0gYW5ub3RhdGlvbnMuY29uY2F0KFRyYW5zYWN0aW9uLnVzZXJFdmVudC5vZihzcGVjLnVzZXJFdmVudCkpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNoYW5nZXM6IHNwZWMuY2hhbmdlcyBpbnN0YW5jZW9mIENoYW5nZVNldCA/IHNwZWMuY2hhbmdlc1xuICAgICAgICAgICAgOiBDaGFuZ2VTZXQub2Yoc3BlYy5jaGFuZ2VzIHx8IFtdLCBkb2NTaXplLCBzdGF0ZS5mYWNldChsaW5lU2VwYXJhdG9yKSksXG4gICAgICAgIHNlbGVjdGlvbjogc2VsICYmIChzZWwgaW5zdGFuY2VvZiBFZGl0b3JTZWxlY3Rpb24gPyBzZWwgOiBFZGl0b3JTZWxlY3Rpb24uc2luZ2xlKHNlbC5hbmNob3IsIHNlbC5oZWFkKSksXG4gICAgICAgIGVmZmVjdHM6IGFzQXJyYXkoc3BlYy5lZmZlY3RzKSxcbiAgICAgICAgYW5ub3RhdGlvbnMsXG4gICAgICAgIHNjcm9sbEludG9WaWV3OiAhIXNwZWMuc2Nyb2xsSW50b1ZpZXdcbiAgICB9O1xufVxuZnVuY3Rpb24gcmVzb2x2ZVRyYW5zYWN0aW9uKHN0YXRlLCBzcGVjcywgZmlsdGVyKSB7XG4gICAgbGV0IHMgPSByZXNvbHZlVHJhbnNhY3Rpb25Jbm5lcihzdGF0ZSwgc3BlY3MubGVuZ3RoID8gc3BlY3NbMF0gOiB7fSwgc3RhdGUuZG9jLmxlbmd0aCk7XG4gICAgaWYgKHNwZWNzLmxlbmd0aCAmJiBzcGVjc1swXS5maWx0ZXIgPT09IGZhbHNlKVxuICAgICAgICBmaWx0ZXIgPSBmYWxzZTtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNwZWNzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChzcGVjc1tpXS5maWx0ZXIgPT09IGZhbHNlKVxuICAgICAgICAgICAgZmlsdGVyID0gZmFsc2U7XG4gICAgICAgIGxldCBzZXEgPSAhIXNwZWNzW2ldLnNlcXVlbnRpYWw7XG4gICAgICAgIHMgPSBtZXJnZVRyYW5zYWN0aW9uKHMsIHJlc29sdmVUcmFuc2FjdGlvbklubmVyKHN0YXRlLCBzcGVjc1tpXSwgc2VxID8gcy5jaGFuZ2VzLm5ld0xlbmd0aCA6IHN0YXRlLmRvYy5sZW5ndGgpLCBzZXEpO1xuICAgIH1cbiAgICBsZXQgdHIgPSBUcmFuc2FjdGlvbi5jcmVhdGUoc3RhdGUsIHMuY2hhbmdlcywgcy5zZWxlY3Rpb24sIHMuZWZmZWN0cywgcy5hbm5vdGF0aW9ucywgcy5zY3JvbGxJbnRvVmlldyk7XG4gICAgcmV0dXJuIGV4dGVuZFRyYW5zYWN0aW9uKGZpbHRlciA/IGZpbHRlclRyYW5zYWN0aW9uKHRyKSA6IHRyKTtcbn1cbi8vIEZpbmlzaCBhIHRyYW5zYWN0aW9uIGJ5IGFwcGx5aW5nIGZpbHRlcnMgaWYgbmVjZXNzYXJ5LlxuZnVuY3Rpb24gZmlsdGVyVHJhbnNhY3Rpb24odHIpIHtcbiAgICBsZXQgc3RhdGUgPSB0ci5zdGFydFN0YXRlO1xuICAgIC8vIENoYW5nZSBmaWx0ZXJzXG4gICAgbGV0IHJlc3VsdCA9IHRydWU7XG4gICAgZm9yIChsZXQgZmlsdGVyIG9mIHN0YXRlLmZhY2V0KGNoYW5nZUZpbHRlcikpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gZmlsdGVyKHRyKTtcbiAgICAgICAgaWYgKHZhbHVlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gZmFsc2U7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpXG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgPT09IHRydWUgPyB2YWx1ZSA6IGpvaW5SYW5nZXMocmVzdWx0LCB2YWx1ZSk7XG4gICAgfVxuICAgIGlmIChyZXN1bHQgIT09IHRydWUpIHtcbiAgICAgICAgbGV0IGNoYW5nZXMsIGJhY2s7XG4gICAgICAgIGlmIChyZXN1bHQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBiYWNrID0gdHIuY2hhbmdlcy5pbnZlcnRlZERlc2M7XG4gICAgICAgICAgICBjaGFuZ2VzID0gQ2hhbmdlU2V0LmVtcHR5KHN0YXRlLmRvYy5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IGZpbHRlcmVkID0gdHIuY2hhbmdlcy5maWx0ZXIocmVzdWx0KTtcbiAgICAgICAgICAgIGNoYW5nZXMgPSBmaWx0ZXJlZC5jaGFuZ2VzO1xuICAgICAgICAgICAgYmFjayA9IGZpbHRlcmVkLmZpbHRlcmVkLm1hcERlc2MoZmlsdGVyZWQuY2hhbmdlcykuaW52ZXJ0ZWREZXNjO1xuICAgICAgICB9XG4gICAgICAgIHRyID0gVHJhbnNhY3Rpb24uY3JlYXRlKHN0YXRlLCBjaGFuZ2VzLCB0ci5zZWxlY3Rpb24gJiYgdHIuc2VsZWN0aW9uLm1hcChiYWNrKSwgU3RhdGVFZmZlY3QubWFwRWZmZWN0cyh0ci5lZmZlY3RzLCBiYWNrKSwgdHIuYW5ub3RhdGlvbnMsIHRyLnNjcm9sbEludG9WaWV3KTtcbiAgICB9XG4gICAgLy8gVHJhbnNhY3Rpb24gZmlsdGVyc1xuICAgIGxldCBmaWx0ZXJzID0gc3RhdGUuZmFjZXQodHJhbnNhY3Rpb25GaWx0ZXIpO1xuICAgIGZvciAobGV0IGkgPSBmaWx0ZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGxldCBmaWx0ZXJlZCA9IGZpbHRlcnNbaV0odHIpO1xuICAgICAgICBpZiAoZmlsdGVyZWQgaW5zdGFuY2VvZiBUcmFuc2FjdGlvbilcbiAgICAgICAgICAgIHRyID0gZmlsdGVyZWQ7XG4gICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZmlsdGVyZWQpICYmIGZpbHRlcmVkLmxlbmd0aCA9PSAxICYmIGZpbHRlcmVkWzBdIGluc3RhbmNlb2YgVHJhbnNhY3Rpb24pXG4gICAgICAgICAgICB0ciA9IGZpbHRlcmVkWzBdO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0ciA9IHJlc29sdmVUcmFuc2FjdGlvbihzdGF0ZSwgYXNBcnJheShmaWx0ZXJlZCksIGZhbHNlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRyO1xufVxuZnVuY3Rpb24gZXh0ZW5kVHJhbnNhY3Rpb24odHIpIHtcbiAgICBsZXQgc3RhdGUgPSB0ci5zdGFydFN0YXRlLCBleHRlbmRlcnMgPSBzdGF0ZS5mYWNldCh0cmFuc2FjdGlvbkV4dGVuZGVyKSwgc3BlYyA9IHRyO1xuICAgIGZvciAobGV0IGkgPSBleHRlbmRlcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgbGV0IGV4dGVuc2lvbiA9IGV4dGVuZGVyc1tpXSh0cik7XG4gICAgICAgIGlmIChleHRlbnNpb24gJiYgT2JqZWN0LmtleXMoZXh0ZW5zaW9uKS5sZW5ndGgpXG4gICAgICAgICAgICBzcGVjID0gbWVyZ2VUcmFuc2FjdGlvbihzcGVjLCByZXNvbHZlVHJhbnNhY3Rpb25Jbm5lcihzdGF0ZSwgZXh0ZW5zaW9uLCB0ci5jaGFuZ2VzLm5ld0xlbmd0aCksIHRydWUpO1xuICAgIH1cbiAgICByZXR1cm4gc3BlYyA9PSB0ciA/IHRyIDogVHJhbnNhY3Rpb24uY3JlYXRlKHN0YXRlLCB0ci5jaGFuZ2VzLCB0ci5zZWxlY3Rpb24sIHNwZWMuZWZmZWN0cywgc3BlYy5hbm5vdGF0aW9ucywgc3BlYy5zY3JvbGxJbnRvVmlldyk7XG59XG5jb25zdCBub25lID0gW107XG5mdW5jdGlvbiBhc0FycmF5KHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09IG51bGwgPyBub25lIDogQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFt2YWx1ZV07XG59XG5cbi8qKlxuVGhlIGNhdGVnb3JpZXMgcHJvZHVjZWQgYnkgYSBbY2hhcmFjdGVyXG5jYXRlZ29yaXplcl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZS5jaGFyQ2F0ZWdvcml6ZXIpLiBUaGVzZSBhcmUgdXNlZFxuZG8gdGhpbmdzIGxpa2Ugc2VsZWN0aW5nIGJ5IHdvcmQuXG4qL1xudmFyIENoYXJDYXRlZ29yeSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKENoYXJDYXRlZ29yeSkge1xuICAgIC8qKlxuICAgIFdvcmQgY2hhcmFjdGVycy5cbiAgICAqL1xuICAgIENoYXJDYXRlZ29yeVtDaGFyQ2F0ZWdvcnlbXCJXb3JkXCJdID0gMF0gPSBcIldvcmRcIjtcbiAgICAvKipcbiAgICBXaGl0ZXNwYWNlLlxuICAgICovXG4gICAgQ2hhckNhdGVnb3J5W0NoYXJDYXRlZ29yeVtcIlNwYWNlXCJdID0gMV0gPSBcIlNwYWNlXCI7XG4gICAgLyoqXG4gICAgQW55dGhpbmcgZWxzZS5cbiAgICAqL1xuICAgIENoYXJDYXRlZ29yeVtDaGFyQ2F0ZWdvcnlbXCJPdGhlclwiXSA9IDJdID0gXCJPdGhlclwiO1xucmV0dXJuIENoYXJDYXRlZ29yeX0pKENoYXJDYXRlZ29yeSB8fCAoQ2hhckNhdGVnb3J5ID0ge30pKTtcbmNvbnN0IG5vbkFTQ0lJU2luZ2xlQ2FzZVdvcmRDaGFyID0gL1tcXHUwMGRmXFx1MDU4N1xcdTA1OTAtXFx1MDVmNFxcdTA2MDAtXFx1MDZmZlxcdTMwNDAtXFx1MzA5ZlxcdTMwYTAtXFx1MzBmZlxcdTM0MDAtXFx1NGRiNVxcdTRlMDAtXFx1OWZjY1xcdWFjMDAtXFx1ZDdhZl0vO1xubGV0IHdvcmRDaGFyO1xudHJ5IHtcbiAgICB3b3JkQ2hhciA9IC8qQF9fUFVSRV9fKi9uZXcgUmVnRXhwKFwiW1xcXFxwe0FscGhhYmV0aWN9XFxcXHB7TnVtYmVyfV9dXCIsIFwidVwiKTtcbn1cbmNhdGNoIChfKSB7IH1cbmZ1bmN0aW9uIGhhc1dvcmRDaGFyKHN0cikge1xuICAgIGlmICh3b3JkQ2hhcilcbiAgICAgICAgcmV0dXJuIHdvcmRDaGFyLnRlc3Qoc3RyKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgY2ggPSBzdHJbaV07XG4gICAgICAgIGlmICgvXFx3Ly50ZXN0KGNoKSB8fCBjaCA+IFwiXFx4ODBcIiAmJiAoY2gudG9VcHBlckNhc2UoKSAhPSBjaC50b0xvd2VyQ2FzZSgpIHx8IG5vbkFTQ0lJU2luZ2xlQ2FzZVdvcmRDaGFyLnRlc3QoY2gpKSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBtYWtlQ2F0ZWdvcml6ZXIod29yZENoYXJzKSB7XG4gICAgcmV0dXJuIChjaGFyKSA9PiB7XG4gICAgICAgIGlmICghL1xcUy8udGVzdChjaGFyKSlcbiAgICAgICAgICAgIHJldHVybiBDaGFyQ2F0ZWdvcnkuU3BhY2U7XG4gICAgICAgIGlmIChoYXNXb3JkQ2hhcihjaGFyKSlcbiAgICAgICAgICAgIHJldHVybiBDaGFyQ2F0ZWdvcnkuV29yZDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3b3JkQ2hhcnMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBpZiAoY2hhci5pbmRleE9mKHdvcmRDaGFyc1tpXSkgPiAtMSlcbiAgICAgICAgICAgICAgICByZXR1cm4gQ2hhckNhdGVnb3J5LldvcmQ7XG4gICAgICAgIHJldHVybiBDaGFyQ2F0ZWdvcnkuT3RoZXI7XG4gICAgfTtcbn1cblxuLyoqXG5UaGUgZWRpdG9yIHN0YXRlIGNsYXNzIGlzIGEgcGVyc2lzdGVudCAoaW1tdXRhYmxlKSBkYXRhIHN0cnVjdHVyZS5cblRvIHVwZGF0ZSBhIHN0YXRlLCB5b3UgW2NyZWF0ZV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZS51cGRhdGUpIGFcblt0cmFuc2FjdGlvbl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvbiksIHdoaWNoIHByb2R1Y2VzIGEgX25ld18gc3RhdGVcbmluc3RhbmNlLCB3aXRob3V0IG1vZGlmeWluZyB0aGUgb3JpZ2luYWwgb2JqZWN0LlxuXG5BcyBzdWNoLCBfbmV2ZXJfIG11dGF0ZSBwcm9wZXJ0aWVzIG9mIGEgc3RhdGUgZGlyZWN0bHkuIFRoYXQnbGxcbmp1c3QgYnJlYWsgdGhpbmdzLlxuKi9cbmNsYXNzIEVkaXRvclN0YXRlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbmZpZywgXG4gICAgLyoqXG4gICAgVGhlIGN1cnJlbnQgZG9jdW1lbnQuXG4gICAgKi9cbiAgICBkb2MsIFxuICAgIC8qKlxuICAgIFRoZSBjdXJyZW50IHNlbGVjdGlvbi5cbiAgICAqL1xuICAgIHNlbGVjdGlvbiwgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICB2YWx1ZXMsIGNvbXB1dGVTbG90LCB0cikge1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy5kb2MgPSBkb2M7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uID0gc2VsZWN0aW9uO1xuICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlcztcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBjb25maWcuc3RhdHVzVGVtcGxhdGUuc2xpY2UoKTtcbiAgICAgICAgdGhpcy5jb21wdXRlU2xvdCA9IGNvbXB1dGVTbG90O1xuICAgICAgICAvLyBGaWxsIGluIHRoZSBjb21wdXRlZCBzdGF0ZSBpbW1lZGlhdGVseSwgc28gdGhhdCBmdXJ0aGVyIHF1ZXJpZXNcbiAgICAgICAgLy8gZm9yIGl0IG1hZGUgZHVyaW5nIHRoZSB1cGRhdGUgcmV0dXJuIHRoaXMgc3RhdGVcbiAgICAgICAgaWYgKHRyKVxuICAgICAgICAgICAgdHIuX3N0YXRlID0gdGhpcztcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbmZpZy5keW5hbWljU2xvdHMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBlbnN1cmVBZGRyKHRoaXMsIGkgPDwgMSk7XG4gICAgICAgIHRoaXMuY29tcHV0ZVNsb3QgPSBudWxsO1xuICAgIH1cbiAgICBmaWVsZChmaWVsZCwgcmVxdWlyZSA9IHRydWUpIHtcbiAgICAgICAgbGV0IGFkZHIgPSB0aGlzLmNvbmZpZy5hZGRyZXNzW2ZpZWxkLmlkXTtcbiAgICAgICAgaWYgKGFkZHIgPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHJlcXVpcmUpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJGaWVsZCBpcyBub3QgcHJlc2VudCBpbiB0aGlzIHN0YXRlXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBlbnN1cmVBZGRyKHRoaXMsIGFkZHIpO1xuICAgICAgICByZXR1cm4gZ2V0QWRkcih0aGlzLCBhZGRyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgW3RyYW5zYWN0aW9uXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uKSB0aGF0IHVwZGF0ZXMgdGhpc1xuICAgIHN0YXRlLiBBbnkgbnVtYmVyIG9mIFt0cmFuc2FjdGlvbiBzcGVjc10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvblNwZWMpXG4gICAgY2FuIGJlIHBhc3NlZC4gVW5sZXNzXG4gICAgW2BzZXF1ZW50aWFsYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvblNwZWMuc2VxdWVudGlhbCkgaXMgc2V0LCB0aGVcbiAgICBbY2hhbmdlc10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvblNwZWMuY2hhbmdlcykgKGlmIGFueSkgb2YgZWFjaCBzcGVjXG4gICAgYXJlIGFzc3VtZWQgdG8gc3RhcnQgaW4gdGhlIF9jdXJyZW50XyBkb2N1bWVudCAobm90IHRoZSBkb2N1bWVudFxuICAgIHByb2R1Y2VkIGJ5IHByZXZpb3VzIHNwZWNzKSwgYW5kIGl0c1xuICAgIFtzZWxlY3Rpb25dKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb25TcGVjLnNlbGVjdGlvbikgYW5kXG4gICAgW2VmZmVjdHNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb25TcGVjLmVmZmVjdHMpIGFyZSBhc3N1bWVkIHRvIHJlZmVyXG4gICAgdG8gdGhlIGRvY3VtZW50IGNyZWF0ZWQgYnkgaXRzIF9vd25fIGNoYW5nZXMuIFRoZSByZXN1bHRpbmdcbiAgICB0cmFuc2FjdGlvbiBjb250YWlucyB0aGUgY29tYmluZWQgZWZmZWN0IG9mIGFsbCB0aGUgZGlmZmVyZW50XG4gICAgc3BlY3MuIEZvciBbc2VsZWN0aW9uXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uU3BlYy5zZWxlY3Rpb24pLCBsYXRlclxuICAgIHNwZWNzIHRha2UgcHJlY2VkZW5jZSBvdmVyIGVhcmxpZXIgb25lcy5cbiAgICAqL1xuICAgIHVwZGF0ZSguLi5zcGVjcykge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZVRyYW5zYWN0aW9uKHRoaXMsIHNwZWNzLCB0cnVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBhcHBseVRyYW5zYWN0aW9uKHRyKSB7XG4gICAgICAgIGxldCBjb25mID0gdGhpcy5jb25maWcsIHsgYmFzZSwgY29tcGFydG1lbnRzIH0gPSBjb25mO1xuICAgICAgICBmb3IgKGxldCBlZmZlY3Qgb2YgdHIuZWZmZWN0cykge1xuICAgICAgICAgICAgaWYgKGVmZmVjdC5pcyhDb21wYXJ0bWVudC5yZWNvbmZpZ3VyZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29uZikge1xuICAgICAgICAgICAgICAgICAgICBjb21wYXJ0bWVudHMgPSBuZXcgTWFwO1xuICAgICAgICAgICAgICAgICAgICBjb25mLmNvbXBhcnRtZW50cy5mb3JFYWNoKCh2YWwsIGtleSkgPT4gY29tcGFydG1lbnRzLnNldChrZXksIHZhbCkpO1xuICAgICAgICAgICAgICAgICAgICBjb25mID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29tcGFydG1lbnRzLnNldChlZmZlY3QudmFsdWUuY29tcGFydG1lbnQsIGVmZmVjdC52YWx1ZS5leHRlbnNpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZWZmZWN0LmlzKFN0YXRlRWZmZWN0LnJlY29uZmlndXJlKSkge1xuICAgICAgICAgICAgICAgIGNvbmYgPSBudWxsO1xuICAgICAgICAgICAgICAgIGJhc2UgPSBlZmZlY3QudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlZmZlY3QuaXMoU3RhdGVFZmZlY3QuYXBwZW5kQ29uZmlnKSkge1xuICAgICAgICAgICAgICAgIGNvbmYgPSBudWxsO1xuICAgICAgICAgICAgICAgIGJhc2UgPSBhc0FycmF5KGJhc2UpLmNvbmNhdChlZmZlY3QudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBzdGFydFZhbHVlcztcbiAgICAgICAgaWYgKCFjb25mKSB7XG4gICAgICAgICAgICBjb25mID0gQ29uZmlndXJhdGlvbi5yZXNvbHZlKGJhc2UsIGNvbXBhcnRtZW50cywgdGhpcyk7XG4gICAgICAgICAgICBsZXQgaW50ZXJtZWRpYXRlU3RhdGUgPSBuZXcgRWRpdG9yU3RhdGUoY29uZiwgdGhpcy5kb2MsIHRoaXMuc2VsZWN0aW9uLCBjb25mLmR5bmFtaWNTbG90cy5tYXAoKCkgPT4gbnVsbCksIChzdGF0ZSwgc2xvdCkgPT4gc2xvdC5yZWNvbmZpZ3VyZShzdGF0ZSwgdGhpcyksIG51bGwpO1xuICAgICAgICAgICAgc3RhcnRWYWx1ZXMgPSBpbnRlcm1lZGlhdGVTdGF0ZS52YWx1ZXM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdGFydFZhbHVlcyA9IHRyLnN0YXJ0U3RhdGUudmFsdWVzLnNsaWNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgbmV3IEVkaXRvclN0YXRlKGNvbmYsIHRyLm5ld0RvYywgdHIubmV3U2VsZWN0aW9uLCBzdGFydFZhbHVlcywgKHN0YXRlLCBzbG90KSA9PiBzbG90LnVwZGF0ZShzdGF0ZSwgdHIpLCB0cik7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIFt0cmFuc2FjdGlvbiBzcGVjXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uU3BlYykgdGhhdFxuICAgIHJlcGxhY2VzIGV2ZXJ5IHNlbGVjdGlvbiByYW5nZSB3aXRoIHRoZSBnaXZlbiBjb250ZW50LlxuICAgICovXG4gICAgcmVwbGFjZVNlbGVjdGlvbih0ZXh0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGV4dCA9PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgdGV4dCA9IHRoaXMudG9UZXh0KHRleHQpO1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2VCeVJhbmdlKHJhbmdlID0+ICh7IGNoYW5nZXM6IHsgZnJvbTogcmFuZ2UuZnJvbSwgdG86IHJhbmdlLnRvLCBpbnNlcnQ6IHRleHQgfSxcbiAgICAgICAgICAgIHJhbmdlOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHJhbmdlLmZyb20gKyB0ZXh0Lmxlbmd0aCkgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBzZXQgb2YgY2hhbmdlcyBhbmQgYSBuZXcgc2VsZWN0aW9uIGJ5IHJ1bm5pbmcgdGhlIGdpdmVuXG4gICAgZnVuY3Rpb24gZm9yIGVhY2ggcmFuZ2UgaW4gdGhlIGFjdGl2ZSBzZWxlY3Rpb24uIFRoZSBmdW5jdGlvblxuICAgIGNhbiByZXR1cm4gYW4gb3B0aW9uYWwgc2V0IG9mIGNoYW5nZXMgKGluIHRoZSBjb29yZGluYXRlIHNwYWNlXG4gICAgb2YgdGhlIHN0YXJ0IGRvY3VtZW50KSwgcGx1cyBhbiB1cGRhdGVkIHJhbmdlIChpbiB0aGUgY29vcmRpbmF0ZVxuICAgIHNwYWNlIG9mIHRoZSBkb2N1bWVudCBwcm9kdWNlZCBieSB0aGUgY2FsbCdzIG93biBjaGFuZ2VzKS4gVGhpc1xuICAgIG1ldGhvZCB3aWxsIG1lcmdlIGFsbCB0aGUgY2hhbmdlcyBhbmQgcmFuZ2VzIGludG8gYSBzaW5nbGVcbiAgICBjaGFuZ2VzZXQgYW5kIHNlbGVjdGlvbiwgYW5kIHJldHVybiBpdCBhcyBhIFt0cmFuc2FjdGlvblxuICAgIHNwZWNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb25TcGVjKSwgd2hpY2ggY2FuIGJlIHBhc3NlZCB0b1xuICAgIFtgdXBkYXRlYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZS51cGRhdGUpLlxuICAgICovXG4gICAgY2hhbmdlQnlSYW5nZShmKSB7XG4gICAgICAgIGxldCBzZWwgPSB0aGlzLnNlbGVjdGlvbjtcbiAgICAgICAgbGV0IHJlc3VsdDEgPSBmKHNlbC5yYW5nZXNbMF0pO1xuICAgICAgICBsZXQgY2hhbmdlcyA9IHRoaXMuY2hhbmdlcyhyZXN1bHQxLmNoYW5nZXMpLCByYW5nZXMgPSBbcmVzdWx0MS5yYW5nZV07XG4gICAgICAgIGxldCBlZmZlY3RzID0gYXNBcnJheShyZXN1bHQxLmVmZmVjdHMpO1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNlbC5yYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBmKHNlbC5yYW5nZXNbaV0pO1xuICAgICAgICAgICAgbGV0IG5ld0NoYW5nZXMgPSB0aGlzLmNoYW5nZXMocmVzdWx0LmNoYW5nZXMpLCBuZXdNYXBwZWQgPSBuZXdDaGFuZ2VzLm1hcChjaGFuZ2VzKTtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgaTsgaisrKVxuICAgICAgICAgICAgICAgIHJhbmdlc1tqXSA9IHJhbmdlc1tqXS5tYXAobmV3TWFwcGVkKTtcbiAgICAgICAgICAgIGxldCBtYXBCeSA9IGNoYW5nZXMubWFwRGVzYyhuZXdDaGFuZ2VzLCB0cnVlKTtcbiAgICAgICAgICAgIHJhbmdlcy5wdXNoKHJlc3VsdC5yYW5nZS5tYXAobWFwQnkpKTtcbiAgICAgICAgICAgIGNoYW5nZXMgPSBjaGFuZ2VzLmNvbXBvc2UobmV3TWFwcGVkKTtcbiAgICAgICAgICAgIGVmZmVjdHMgPSBTdGF0ZUVmZmVjdC5tYXBFZmZlY3RzKGVmZmVjdHMsIG5ld01hcHBlZCkuY29uY2F0KFN0YXRlRWZmZWN0Lm1hcEVmZmVjdHMoYXNBcnJheShyZXN1bHQuZWZmZWN0cyksIG1hcEJ5KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNoYW5nZXMsXG4gICAgICAgICAgICBzZWxlY3Rpb246IEVkaXRvclNlbGVjdGlvbi5jcmVhdGUocmFuZ2VzLCBzZWwubWFpbkluZGV4KSxcbiAgICAgICAgICAgIGVmZmVjdHNcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgW2NoYW5nZSBzZXRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuQ2hhbmdlU2V0KSBmcm9tIHRoZSBnaXZlbiBjaGFuZ2VcbiAgICBkZXNjcmlwdGlvbiwgdGFraW5nIHRoZSBzdGF0ZSdzIGRvY3VtZW50IGxlbmd0aCBhbmQgbGluZVxuICAgIHNlcGFyYXRvciBpbnRvIGFjY291bnQuXG4gICAgKi9cbiAgICBjaGFuZ2VzKHNwZWMgPSBbXSkge1xuICAgICAgICBpZiAoc3BlYyBpbnN0YW5jZW9mIENoYW5nZVNldClcbiAgICAgICAgICAgIHJldHVybiBzcGVjO1xuICAgICAgICByZXR1cm4gQ2hhbmdlU2V0Lm9mKHNwZWMsIHRoaXMuZG9jLmxlbmd0aCwgdGhpcy5mYWNldChFZGl0b3JTdGF0ZS5saW5lU2VwYXJhdG9yKSk7XG4gICAgfVxuICAgIC8qKlxuICAgIFVzaW5nIHRoZSBzdGF0ZSdzIFtsaW5lXG4gICAgc2VwYXJhdG9yXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlXmxpbmVTZXBhcmF0b3IpLCBjcmVhdGUgYVxuICAgIFtgVGV4dGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVGV4dCkgaW5zdGFuY2UgZnJvbSB0aGUgZ2l2ZW4gc3RyaW5nLlxuICAgICovXG4gICAgdG9UZXh0KHN0cmluZykge1xuICAgICAgICByZXR1cm4gVGV4dC5vZihzdHJpbmcuc3BsaXQodGhpcy5mYWNldChFZGl0b3JTdGF0ZS5saW5lU2VwYXJhdG9yKSB8fCBEZWZhdWx0U3BsaXQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmV0dXJuIHRoZSBnaXZlbiByYW5nZSBvZiB0aGUgZG9jdW1lbnQgYXMgYSBzdHJpbmcuXG4gICAgKi9cbiAgICBzbGljZURvYyhmcm9tID0gMCwgdG8gPSB0aGlzLmRvYy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jLnNsaWNlU3RyaW5nKGZyb20sIHRvLCB0aGlzLmxpbmVCcmVhayk7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgdmFsdWUgb2YgYSBzdGF0ZSBbZmFjZXRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRmFjZXQpLlxuICAgICovXG4gICAgZmFjZXQoZmFjZXQpIHtcbiAgICAgICAgbGV0IGFkZHIgPSB0aGlzLmNvbmZpZy5hZGRyZXNzW2ZhY2V0LmlkXTtcbiAgICAgICAgaWYgKGFkZHIgPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBmYWNldC5kZWZhdWx0O1xuICAgICAgICBlbnN1cmVBZGRyKHRoaXMsIGFkZHIpO1xuICAgICAgICByZXR1cm4gZ2V0QWRkcih0aGlzLCBhZGRyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ29udmVydCB0aGlzIHN0YXRlIHRvIGEgSlNPTi1zZXJpYWxpemFibGUgb2JqZWN0LiBXaGVuIGN1c3RvbVxuICAgIGZpZWxkcyBzaG91bGQgYmUgc2VyaWFsaXplZCwgeW91IGNhbiBwYXNzIHRoZW0gaW4gYXMgYW4gb2JqZWN0XG4gICAgbWFwcGluZyBwcm9wZXJ0eSBuYW1lcyAoaW4gdGhlIHJlc3VsdGluZyBvYmplY3QsIHdoaWNoIHNob3VsZFxuICAgIG5vdCB1c2UgYGRvY2Agb3IgYHNlbGVjdGlvbmApIHRvIGZpZWxkcy5cbiAgICAqL1xuICAgIHRvSlNPTihmaWVsZHMpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IHtcbiAgICAgICAgICAgIGRvYzogdGhpcy5zbGljZURvYygpLFxuICAgICAgICAgICAgc2VsZWN0aW9uOiB0aGlzLnNlbGVjdGlvbi50b0pTT04oKVxuICAgICAgICB9O1xuICAgICAgICBpZiAoZmllbGRzKVxuICAgICAgICAgICAgZm9yIChsZXQgcHJvcCBpbiBmaWVsZHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBmaWVsZHNbcHJvcF07XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgU3RhdGVGaWVsZCAmJiB0aGlzLmNvbmZpZy5hZGRyZXNzW3ZhbHVlLmlkXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICByZXN1bHRbcHJvcF0gPSB2YWx1ZS5zcGVjLnRvSlNPTih0aGlzLmZpZWxkKGZpZWxkc1twcm9wXSksIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICBEZXNlcmlhbGl6ZSBhIHN0YXRlIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24uIFdoZW4gY3VzdG9tXG4gICAgZmllbGRzIHNob3VsZCBiZSBkZXNlcmlhbGl6ZWQsIHBhc3MgdGhlIHNhbWUgb2JqZWN0IHlvdSBwYXNzZWRcbiAgICB0byBbYHRvSlNPTmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUudG9KU09OKSB3aGVuIHNlcmlhbGl6aW5nIGFzXG4gICAgdGhpcmQgYXJndW1lbnQuXG4gICAgKi9cbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbiwgY29uZmlnID0ge30sIGZpZWxkcykge1xuICAgICAgICBpZiAoIWpzb24gfHwgdHlwZW9mIGpzb24uZG9jICE9IFwic3RyaW5nXCIpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgSlNPTiByZXByZXNlbnRhdGlvbiBmb3IgRWRpdG9yU3RhdGVcIik7XG4gICAgICAgIGxldCBmaWVsZEluaXQgPSBbXTtcbiAgICAgICAgaWYgKGZpZWxkcylcbiAgICAgICAgICAgIGZvciAobGV0IHByb3AgaW4gZmllbGRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChqc29uLCBwcm9wKSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZmllbGQgPSBmaWVsZHNbcHJvcF0sIHZhbHVlID0ganNvbltwcm9wXTtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRJbml0LnB1c2goZmllbGQuaW5pdChzdGF0ZSA9PiBmaWVsZC5zcGVjLmZyb21KU09OKHZhbHVlLCBzdGF0ZSkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiBFZGl0b3JTdGF0ZS5jcmVhdGUoe1xuICAgICAgICAgICAgZG9jOiBqc29uLmRvYyxcbiAgICAgICAgICAgIHNlbGVjdGlvbjogRWRpdG9yU2VsZWN0aW9uLmZyb21KU09OKGpzb24uc2VsZWN0aW9uKSxcbiAgICAgICAgICAgIGV4dGVuc2lvbnM6IGNvbmZpZy5leHRlbnNpb25zID8gZmllbGRJbml0LmNvbmNhdChbY29uZmlnLmV4dGVuc2lvbnNdKSA6IGZpZWxkSW5pdFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgbmV3IHN0YXRlLiBZb3UnbGwgdXN1YWxseSBvbmx5IG5lZWQgdGhpcyB3aGVuXG4gICAgaW5pdGlhbGl6aW5nIGFuIGVkaXRvclx1MjAxNHVwZGF0ZWQgc3RhdGVzIGFyZSBjcmVhdGVkIGJ5IGFwcGx5aW5nXG4gICAgdHJhbnNhY3Rpb25zLlxuICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShjb25maWcgPSB7fSkge1xuICAgICAgICBsZXQgY29uZmlndXJhdGlvbiA9IENvbmZpZ3VyYXRpb24ucmVzb2x2ZShjb25maWcuZXh0ZW5zaW9ucyB8fCBbXSwgbmV3IE1hcCk7XG4gICAgICAgIGxldCBkb2MgPSBjb25maWcuZG9jIGluc3RhbmNlb2YgVGV4dCA/IGNvbmZpZy5kb2NcbiAgICAgICAgICAgIDogVGV4dC5vZigoY29uZmlnLmRvYyB8fCBcIlwiKS5zcGxpdChjb25maWd1cmF0aW9uLnN0YXRpY0ZhY2V0KEVkaXRvclN0YXRlLmxpbmVTZXBhcmF0b3IpIHx8IERlZmF1bHRTcGxpdCkpO1xuICAgICAgICBsZXQgc2VsZWN0aW9uID0gIWNvbmZpZy5zZWxlY3Rpb24gPyBFZGl0b3JTZWxlY3Rpb24uc2luZ2xlKDApXG4gICAgICAgICAgICA6IGNvbmZpZy5zZWxlY3Rpb24gaW5zdGFuY2VvZiBFZGl0b3JTZWxlY3Rpb24gPyBjb25maWcuc2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgOiBFZGl0b3JTZWxlY3Rpb24uc2luZ2xlKGNvbmZpZy5zZWxlY3Rpb24uYW5jaG9yLCBjb25maWcuc2VsZWN0aW9uLmhlYWQpO1xuICAgICAgICBjaGVja1NlbGVjdGlvbihzZWxlY3Rpb24sIGRvYy5sZW5ndGgpO1xuICAgICAgICBpZiAoIWNvbmZpZ3VyYXRpb24uc3RhdGljRmFjZXQoYWxsb3dNdWx0aXBsZVNlbGVjdGlvbnMpKVxuICAgICAgICAgICAgc2VsZWN0aW9uID0gc2VsZWN0aW9uLmFzU2luZ2xlKCk7XG4gICAgICAgIHJldHVybiBuZXcgRWRpdG9yU3RhdGUoY29uZmlndXJhdGlvbiwgZG9jLCBzZWxlY3Rpb24sIGNvbmZpZ3VyYXRpb24uZHluYW1pY1Nsb3RzLm1hcCgoKSA9PiBudWxsKSwgKHN0YXRlLCBzbG90KSA9PiBzbG90LmNyZWF0ZShzdGF0ZSksIG51bGwpO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgc2l6ZSAoaW4gY29sdW1ucykgb2YgYSB0YWIgaW4gdGhlIGRvY3VtZW50LCBkZXRlcm1pbmVkIGJ5XG4gICAgdGhlIFtgdGFiU2l6ZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGVedGFiU2l6ZSkgZmFjZXQuXG4gICAgKi9cbiAgICBnZXQgdGFiU2l6ZSgpIHsgcmV0dXJuIHRoaXMuZmFjZXQoRWRpdG9yU3RhdGUudGFiU2l6ZSk7IH1cbiAgICAvKipcbiAgICBHZXQgdGhlIHByb3BlciBbbGluZS1icmVha10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZV5saW5lU2VwYXJhdG9yKVxuICAgIHN0cmluZyBmb3IgdGhpcyBzdGF0ZS5cbiAgICAqL1xuICAgIGdldCBsaW5lQnJlYWsoKSB7IHJldHVybiB0aGlzLmZhY2V0KEVkaXRvclN0YXRlLmxpbmVTZXBhcmF0b3IpIHx8IFwiXFxuXCI7IH1cbiAgICAvKipcbiAgICBSZXR1cm5zIHRydWUgd2hlbiB0aGUgZWRpdG9yIGlzXG4gICAgW2NvbmZpZ3VyZWRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGVecmVhZE9ubHkpIHRvIGJlIHJlYWQtb25seS5cbiAgICAqL1xuICAgIGdldCByZWFkT25seSgpIHsgcmV0dXJuIHRoaXMuZmFjZXQocmVhZE9ubHkpOyB9XG4gICAgLyoqXG4gICAgTG9vayB1cCBhIHRyYW5zbGF0aW9uIGZvciB0aGUgZ2l2ZW4gcGhyYXNlICh2aWEgdGhlXG4gICAgW2BwaHJhc2VzYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZV5waHJhc2VzKSBmYWNldCksIG9yIHJldHVybiB0aGVcbiAgICBvcmlnaW5hbCBzdHJpbmcgaWYgbm8gdHJhbnNsYXRpb24gaXMgZm91bmQuXG4gICAgXG4gICAgSWYgYWRkaXRpb25hbCBhcmd1bWVudHMgYXJlIHBhc3NlZCwgdGhleSB3aWxsIGJlIGluc2VydGVkIGluXG4gICAgcGxhY2Ugb2YgbWFya2VycyBsaWtlIGAkMWAgKGZvciB0aGUgZmlyc3QgdmFsdWUpIGFuZCBgJDJgLCBldGMuXG4gICAgQSBzaW5nbGUgYCRgIGlzIGVxdWl2YWxlbnQgdG8gYCQxYCwgYW5kIGAkJGAgd2lsbCBwcm9kdWNlIGFcbiAgICBsaXRlcmFsIGRvbGxhciBzaWduLlxuICAgICovXG4gICAgcGhyYXNlKHBocmFzZSwgLi4uaW5zZXJ0KSB7XG4gICAgICAgIGZvciAobGV0IG1hcCBvZiB0aGlzLmZhY2V0KEVkaXRvclN0YXRlLnBocmFzZXMpKVxuICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtYXAsIHBocmFzZSkpIHtcbiAgICAgICAgICAgICAgICBwaHJhc2UgPSBtYXBbcGhyYXNlXTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgaWYgKGluc2VydC5sZW5ndGgpXG4gICAgICAgICAgICBwaHJhc2UgPSBwaHJhc2UucmVwbGFjZSgvXFwkKFxcJHxcXGQqKS9nLCAobSwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpID09IFwiJFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCIkXCI7XG4gICAgICAgICAgICAgICAgbGV0IG4gPSArKGkgfHwgMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICFuIHx8IG4gPiBpbnNlcnQubGVuZ3RoID8gbSA6IGluc2VydFtuIC0gMV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHBocmFzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgRmluZCB0aGUgdmFsdWVzIGZvciBhIGdpdmVuIGxhbmd1YWdlIGRhdGEgZmllbGQsIHByb3ZpZGVkIGJ5IHRoZVxuICAgIHRoZSBbYGxhbmd1YWdlRGF0YWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGVebGFuZ3VhZ2VEYXRhKSBmYWNldC5cbiAgICBcbiAgICBFeGFtcGxlcyBvZiBsYW5ndWFnZSBkYXRhIGZpZWxkcyBhcmUuLi5cbiAgICBcbiAgICAtIFtgXCJjb21tZW50VG9rZW5zXCJgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLkNvbW1lbnRUb2tlbnMpIGZvciBzcGVjaWZ5aW5nXG4gICAgICBjb21tZW50IHN5bnRheC5cbiAgICAtIFtgXCJhdXRvY29tcGxldGVcImBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jYXV0b2NvbXBsZXRlLmF1dG9jb21wbGV0aW9uXmNvbmZpZy5vdmVycmlkZSlcbiAgICAgIGZvciBwcm92aWRpbmcgbGFuZ3VhZ2Utc3BlY2lmaWMgY29tcGxldGlvbiBzb3VyY2VzLlxuICAgIC0gW2BcIndvcmRDaGFyc1wiYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZS5jaGFyQ2F0ZWdvcml6ZXIpIGZvciBhZGRpbmdcbiAgICAgIGNoYXJhY3RlcnMgdGhhdCBzaG91bGQgYmUgY29uc2lkZXJlZCBwYXJ0IG9mIHdvcmRzIGluIHRoaXNcbiAgICAgIGxhbmd1YWdlLlxuICAgIC0gW2BcImNsb3NlQnJhY2tldHNcImBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jYXV0b2NvbXBsZXRlLkNsb3NlQnJhY2tldENvbmZpZykgY29udHJvbHNcbiAgICAgIGJyYWNrZXQgY2xvc2luZyBiZWhhdmlvci5cbiAgICAqL1xuICAgIGxhbmd1YWdlRGF0YUF0KG5hbWUsIHBvcywgc2lkZSA9IC0xKSB7XG4gICAgICAgIGxldCB2YWx1ZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgcHJvdmlkZXIgb2YgdGhpcy5mYWNldChsYW5ndWFnZURhdGEpKSB7XG4gICAgICAgICAgICBmb3IgKGxldCByZXN1bHQgb2YgcHJvdmlkZXIodGhpcywgcG9zLCBzaWRlKSkge1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocmVzdWx0LCBuYW1lKSlcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzLnB1c2gocmVzdWx0W25hbWVdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm4gYSBmdW5jdGlvbiB0aGF0IGNhbiBjYXRlZ29yaXplIHN0cmluZ3MgKGV4cGVjdGVkIHRvXG4gICAgcmVwcmVzZW50IGEgc2luZ2xlIFtncmFwaGVtZSBjbHVzdGVyXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLmZpbmRDbHVzdGVyQnJlYWspKVxuICAgIGludG8gb25lIG9mOlxuICAgIFxuICAgICAtIFdvcmQgKGNvbnRhaW5zIGFuIGFscGhhbnVtZXJpYyBjaGFyYWN0ZXIgb3IgYSBjaGFyYWN0ZXJcbiAgICAgICBleHBsaWNpdGx5IGxpc3RlZCBpbiB0aGUgbG9jYWwgbGFuZ3VhZ2UncyBgXCJ3b3JkQ2hhcnNcImBcbiAgICAgICBsYW5ndWFnZSBkYXRhLCB3aGljaCBzaG91bGQgYmUgYSBzdHJpbmcpXG4gICAgIC0gU3BhY2UgKGNvbnRhaW5zIG9ubHkgd2hpdGVzcGFjZSlcbiAgICAgLSBPdGhlciAoYW55dGhpbmcgZWxzZSlcbiAgICAqL1xuICAgIGNoYXJDYXRlZ29yaXplcihhdCkge1xuICAgICAgICByZXR1cm4gbWFrZUNhdGVnb3JpemVyKHRoaXMubGFuZ3VhZ2VEYXRhQXQoXCJ3b3JkQ2hhcnNcIiwgYXQpLmpvaW4oXCJcIikpO1xuICAgIH1cbiAgICAvKipcbiAgICBGaW5kIHRoZSB3b3JkIGF0IHRoZSBnaXZlbiBwb3NpdGlvbiwgbWVhbmluZyB0aGUgcmFuZ2VcbiAgICBjb250YWluaW5nIGFsbCBbd29yZF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5DaGFyQ2F0ZWdvcnkuV29yZCkgY2hhcmFjdGVyc1xuICAgIGFyb3VuZCBpdC4gSWYgbm8gd29yZCBjaGFyYWN0ZXJzIGFyZSBhZGphY2VudCB0byB0aGUgcG9zaXRpb24sXG4gICAgdGhpcyByZXR1cm5zIG51bGwuXG4gICAgKi9cbiAgICB3b3JkQXQocG9zKSB7XG4gICAgICAgIGxldCB7IHRleHQsIGZyb20sIGxlbmd0aCB9ID0gdGhpcy5kb2MubGluZUF0KHBvcyk7XG4gICAgICAgIGxldCBjYXQgPSB0aGlzLmNoYXJDYXRlZ29yaXplcihwb3MpO1xuICAgICAgICBsZXQgc3RhcnQgPSBwb3MgLSBmcm9tLCBlbmQgPSBwb3MgLSBmcm9tO1xuICAgICAgICB3aGlsZSAoc3RhcnQgPiAwKSB7XG4gICAgICAgICAgICBsZXQgcHJldiA9IGZpbmRDbHVzdGVyQnJlYWsodGV4dCwgc3RhcnQsIGZhbHNlKTtcbiAgICAgICAgICAgIGlmIChjYXQodGV4dC5zbGljZShwcmV2LCBzdGFydCkpICE9IENoYXJDYXRlZ29yeS5Xb3JkKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgc3RhcnQgPSBwcmV2O1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChlbmQgPCBsZW5ndGgpIHtcbiAgICAgICAgICAgIGxldCBuZXh0ID0gZmluZENsdXN0ZXJCcmVhayh0ZXh0LCBlbmQpO1xuICAgICAgICAgICAgaWYgKGNhdCh0ZXh0LnNsaWNlKGVuZCwgbmV4dCkpICE9IENoYXJDYXRlZ29yeS5Xb3JkKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZW5kID0gbmV4dDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RhcnQgPT0gZW5kID8gbnVsbCA6IEVkaXRvclNlbGVjdGlvbi5yYW5nZShzdGFydCArIGZyb20sIGVuZCArIGZyb20pO1xuICAgIH1cbn1cbi8qKlxuQSBmYWNldCB0aGF0LCB3aGVuIGVuYWJsZWQsIGNhdXNlcyB0aGUgZWRpdG9yIHRvIGFsbG93IG11bHRpcGxlXG5yYW5nZXMgdG8gYmUgc2VsZWN0ZWQuIEJlIGNhcmVmdWwgdGhvdWdoLCBiZWNhdXNlIGJ5IGRlZmF1bHQgdGhlXG5lZGl0b3IgcmVsaWVzIG9uIHRoZSBuYXRpdmUgRE9NIHNlbGVjdGlvbiwgd2hpY2ggY2Fubm90IGhhbmRsZVxubXVsdGlwbGUgc2VsZWN0aW9ucy4gQW4gZXh0ZW5zaW9uIGxpa2VcbltgZHJhd1NlbGVjdGlvbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5kcmF3U2VsZWN0aW9uKSBjYW4gYmUgdXNlZCB0byBtYWtlXG5zZWNvbmRhcnkgc2VsZWN0aW9ucyB2aXNpYmxlIHRvIHRoZSB1c2VyLlxuKi9cbkVkaXRvclN0YXRlLmFsbG93TXVsdGlwbGVTZWxlY3Rpb25zID0gYWxsb3dNdWx0aXBsZVNlbGVjdGlvbnM7XG4vKipcbkNvbmZpZ3VyZXMgdGhlIHRhYiBzaXplIHRvIHVzZSBpbiB0aGlzIHN0YXRlLiBUaGUgZmlyc3RcbihoaWdoZXN0LXByZWNlZGVuY2UpIHZhbHVlIG9mIHRoZSBmYWNldCBpcyB1c2VkLiBJZiBubyB2YWx1ZSBpc1xuZ2l2ZW4sIHRoaXMgZGVmYXVsdHMgdG8gNC5cbiovXG5FZGl0b3JTdGF0ZS50YWJTaXplID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgY29tYmluZTogdmFsdWVzID0+IHZhbHVlcy5sZW5ndGggPyB2YWx1ZXNbMF0gOiA0XG59KTtcbi8qKlxuVGhlIGxpbmUgc2VwYXJhdG9yIHRvIHVzZS4gQnkgZGVmYXVsdCwgYW55IG9mIGBcIlxcblwiYCwgYFwiXFxyXFxuXCJgXG5hbmQgYFwiXFxyXCJgIGlzIHRyZWF0ZWQgYXMgYSBzZXBhcmF0b3Igd2hlbiBzcGxpdHRpbmcgbGluZXMsIGFuZFxubGluZXMgYXJlIGpvaW5lZCB3aXRoIGBcIlxcblwiYC5cblxuV2hlbiB5b3UgY29uZmlndXJlIGEgdmFsdWUgaGVyZSwgb25seSB0aGF0IHByZWNpc2Ugc2VwYXJhdG9yXG53aWxsIGJlIHVzZWQsIGFsbG93aW5nIHlvdSB0byByb3VuZC10cmlwIGRvY3VtZW50cyB0aHJvdWdoIHRoZVxuZWRpdG9yIHdpdGhvdXQgbm9ybWFsaXppbmcgbGluZSBzZXBhcmF0b3JzLlxuKi9cbkVkaXRvclN0YXRlLmxpbmVTZXBhcmF0b3IgPSBsaW5lU2VwYXJhdG9yO1xuLyoqXG5UaGlzIGZhY2V0IGNvbnRyb2xzIHRoZSB2YWx1ZSBvZiB0aGVcbltgcmVhZE9ubHlgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlLnJlYWRPbmx5KSBnZXR0ZXIsIHdoaWNoIGlzXG5jb25zdWx0ZWQgYnkgY29tbWFuZHMgYW5kIGV4dGVuc2lvbnMgdGhhdCBpbXBsZW1lbnQgZWRpdGluZ1xuZnVuY3Rpb25hbGl0eSB0byBkZXRlcm1pbmUgd2hldGhlciB0aGV5IHNob3VsZCBhcHBseS4gSXRcbmRlZmF1bHRzIHRvIGZhbHNlLCBidXQgd2hlbiBpdHMgaGlnaGVzdC1wcmVjZWRlbmNlIHZhbHVlIGlzXG5gdHJ1ZWAsIHN1Y2ggZnVuY3Rpb25hbGl0eSBkaXNhYmxlcyBpdHNlbGYuXG5cbk5vdCB0byBiZSBjb25mdXNlZCB3aXRoXG5bYEVkaXRvclZpZXcuZWRpdGFibGVgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlld15lZGl0YWJsZSksIHdoaWNoXG5jb250cm9scyB3aGV0aGVyIHRoZSBlZGl0b3IncyBET00gaXMgc2V0IHRvIGJlIGVkaXRhYmxlIChhbmRcbnRodXMgZm9jdXNhYmxlKS5cbiovXG5FZGl0b3JTdGF0ZS5yZWFkT25seSA9IHJlYWRPbmx5O1xuLyoqXG5SZWdpc3RlcnMgdHJhbnNsYXRpb24gcGhyYXNlcy4gVGhlXG5bYHBocmFzZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUucGhyYXNlKSBtZXRob2Qgd2lsbCBsb29rIHRocm91Z2hcbmFsbCBvYmplY3RzIHJlZ2lzdGVyZWQgd2l0aCB0aGlzIGZhY2V0IHRvIGZpbmQgdHJhbnNsYXRpb25zIGZvclxuaXRzIGFyZ3VtZW50LlxuKi9cbkVkaXRvclN0YXRlLnBocmFzZXMgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21wYXJlKGEsIGIpIHtcbiAgICAgICAgbGV0IGtBID0gT2JqZWN0LmtleXMoYSksIGtCID0gT2JqZWN0LmtleXMoYik7XG4gICAgICAgIHJldHVybiBrQS5sZW5ndGggPT0ga0IubGVuZ3RoICYmIGtBLmV2ZXJ5KGsgPT4gYVtrXSA9PSBiW2tdKTtcbiAgICB9XG59KTtcbi8qKlxuQSBmYWNldCB1c2VkIHRvIHJlZ2lzdGVyIFtsYW5ndWFnZVxuZGF0YV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZS5sYW5ndWFnZURhdGFBdCkgcHJvdmlkZXJzLlxuKi9cbkVkaXRvclN0YXRlLmxhbmd1YWdlRGF0YSA9IGxhbmd1YWdlRGF0YTtcbi8qKlxuRmFjZXQgdXNlZCB0byByZWdpc3RlciBjaGFuZ2UgZmlsdGVycywgd2hpY2ggYXJlIGNhbGxlZCBmb3IgZWFjaFxudHJhbnNhY3Rpb24gKHVubGVzcyBleHBsaWNpdGx5XG5bZGlzYWJsZWRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb25TcGVjLmZpbHRlcikpLCBhbmQgY2FuIHN1cHByZXNzXG5wYXJ0IG9mIHRoZSB0cmFuc2FjdGlvbidzIGNoYW5nZXMuXG5cblN1Y2ggYSBmdW5jdGlvbiBjYW4gcmV0dXJuIGB0cnVlYCB0byBpbmRpY2F0ZSB0aGF0IGl0IGRvZXNuJ3RcbndhbnQgdG8gZG8gYW55dGhpbmcsIGBmYWxzZWAgdG8gY29tcGxldGVseSBzdG9wIHRoZSBjaGFuZ2VzIGluXG50aGUgdHJhbnNhY3Rpb24sIG9yIGEgc2V0IG9mIHJhbmdlcyBpbiB3aGljaCBjaGFuZ2VzIHNob3VsZCBiZVxuc3VwcHJlc3NlZC4gU3VjaCByYW5nZXMgYXJlIHJlcHJlc2VudGVkIGFzIGFuIGFycmF5IG9mIG51bWJlcnMsXG53aXRoIGVhY2ggcGFpciBvZiB0d28gbnVtYmVycyBpbmRpY2F0aW5nIHRoZSBzdGFydCBhbmQgZW5kIG9mIGFcbnJhbmdlLiBTbyBmb3IgZXhhbXBsZSBgWzEwLCAyMCwgMTAwLCAxMTBdYCBzdXBwcmVzc2VzIGNoYW5nZXNcbmJldHdlZW4gMTAgYW5kIDIwLCBhbmQgYmV0d2VlbiAxMDAgYW5kIDExMC5cbiovXG5FZGl0b3JTdGF0ZS5jaGFuZ2VGaWx0ZXIgPSBjaGFuZ2VGaWx0ZXI7XG4vKipcbkZhY2V0IHVzZWQgdG8gcmVnaXN0ZXIgYSBob29rIHRoYXQgZ2V0cyBhIGNoYW5jZSB0byB1cGRhdGUgb3JcbnJlcGxhY2UgdHJhbnNhY3Rpb24gc3BlY3MgYmVmb3JlIHRoZXkgYXJlIGFwcGxpZWQuIFRoaXMgd2lsbFxub25seSBiZSBhcHBsaWVkIGZvciB0cmFuc2FjdGlvbnMgdGhhdCBkb24ndCBoYXZlXG5bYGZpbHRlcmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb25TcGVjLmZpbHRlcikgc2V0IHRvIGBmYWxzZWAuIFlvdVxuY2FuIGVpdGhlciByZXR1cm4gYSBzaW5nbGUgdHJhbnNhY3Rpb24gc3BlYyAocG9zc2libHkgdGhlIGlucHV0XG50cmFuc2FjdGlvbiksIG9yIGFuIGFycmF5IG9mIHNwZWNzICh3aGljaCB3aWxsIGJlIGNvbWJpbmVkIGluXG50aGUgc2FtZSB3YXkgYXMgdGhlIGFyZ3VtZW50cyB0b1xuW2BFZGl0b3JTdGF0ZS51cGRhdGVgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlLnVwZGF0ZSkpLlxuXG5XaGVuIHBvc3NpYmxlLCBpdCBpcyByZWNvbW1lbmRlZCB0byBhdm9pZCBhY2Nlc3NpbmdcbltgVHJhbnNhY3Rpb24uc3RhdGVgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uLnN0YXRlKSBpbiBhIGZpbHRlcixcbnNpbmNlIGl0IHdpbGwgZm9yY2UgY3JlYXRpb24gb2YgYSBzdGF0ZSB0aGF0IHdpbGwgdGhlbiBiZVxuZGlzY2FyZGVkIGFnYWluLCBpZiB0aGUgdHJhbnNhY3Rpb24gaXMgYWN0dWFsbHkgZmlsdGVyZWQuXG5cbihUaGlzIGZ1bmN0aW9uYWxpdHkgc2hvdWxkIGJlIHVzZWQgd2l0aCBjYXJlLiBJbmRpc2NyaW1pbmF0ZWx5XG5tb2RpZnlpbmcgdHJhbnNhY3Rpb24gaXMgbGlrZWx5IHRvIGJyZWFrIHNvbWV0aGluZyBvciBkZWdyYWRlXG50aGUgdXNlciBleHBlcmllbmNlLilcbiovXG5FZGl0b3JTdGF0ZS50cmFuc2FjdGlvbkZpbHRlciA9IHRyYW5zYWN0aW9uRmlsdGVyO1xuLyoqXG5UaGlzIGlzIGEgbW9yZSBsaW1pdGVkIGZvcm0gb2ZcbltgdHJhbnNhY3Rpb25GaWx0ZXJgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlXnRyYW5zYWN0aW9uRmlsdGVyKSxcbndoaWNoIGNhbiBvbmx5IGFkZFxuW2Fubm90YXRpb25zXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uU3BlYy5hbm5vdGF0aW9ucykgYW5kXG5bZWZmZWN0c10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvblNwZWMuZWZmZWN0cykuIF9CdXRfLCB0aGlzIHR5cGVcbm9mIGZpbHRlciBydW5zIGV2ZW4gaWYgdGhlIHRyYW5zYWN0aW9uIGhhcyBkaXNhYmxlZCByZWd1bGFyXG5bZmlsdGVyaW5nXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uU3BlYy5maWx0ZXIpLCBtYWtpbmcgaXQgc3VpdGFibGVcbmZvciBlZmZlY3RzIHRoYXQgZG9uJ3QgbmVlZCB0byB0b3VjaCB0aGUgY2hhbmdlcyBvciBzZWxlY3Rpb24sXG5idXQgZG8gd2FudCB0byBwcm9jZXNzIGV2ZXJ5IHRyYW5zYWN0aW9uLlxuXG5FeHRlbmRlcnMgcnVuIF9hZnRlcl8gZmlsdGVycywgd2hlbiBib3RoIGFyZSBwcmVzZW50LlxuKi9cbkVkaXRvclN0YXRlLnRyYW5zYWN0aW9uRXh0ZW5kZXIgPSB0cmFuc2FjdGlvbkV4dGVuZGVyO1xuQ29tcGFydG1lbnQucmVjb25maWd1cmUgPSAvKkBfX1BVUkVfXyovU3RhdGVFZmZlY3QuZGVmaW5lKCk7XG5cbi8qKlxuVXRpbGl0eSBmdW5jdGlvbiBmb3IgY29tYmluaW5nIGJlaGF2aW9ycyB0byBmaWxsIGluIGEgY29uZmlnXG5vYmplY3QgZnJvbSBhbiBhcnJheSBvZiBwcm92aWRlZCBjb25maWdzLiBgZGVmYXVsdHNgIHNob3VsZCBob2xkXG5kZWZhdWx0IHZhbHVlcyBmb3IgYWxsIG9wdGlvbmFsIGZpZWxkcyBpbiBgQ29uZmlnYC5cblxuVGhlIGZ1bmN0aW9uIHdpbGwsIGJ5IGRlZmF1bHQsIGVycm9yXG53aGVuIGEgZmllbGQgZ2V0cyB0d28gdmFsdWVzIHRoYXQgYXJlbid0IGA9PT1gLWVxdWFsLCBidXQgeW91IGNhblxucHJvdmlkZSBjb21iaW5lIGZ1bmN0aW9ucyBwZXIgZmllbGQgdG8gZG8gc29tZXRoaW5nIGVsc2UuXG4qL1xuZnVuY3Rpb24gY29tYmluZUNvbmZpZyhjb25maWdzLCBkZWZhdWx0cywgLy8gU2hvdWxkIGhvbGQgb25seSB0aGUgb3B0aW9uYWwgcHJvcGVydGllcyBvZiBDb25maWcsIGJ1dCBJIGhhdmVuJ3QgbWFuYWdlZCB0byBleHByZXNzIHRoYXRcbmNvbWJpbmUgPSB7fSkge1xuICAgIGxldCByZXN1bHQgPSB7fTtcbiAgICBmb3IgKGxldCBjb25maWcgb2YgY29uZmlncylcbiAgICAgICAgZm9yIChsZXQga2V5IG9mIE9iamVjdC5rZXlzKGNvbmZpZykpIHtcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IGNvbmZpZ1trZXldLCBjdXJyZW50ID0gcmVzdWx0W2tleV07XG4gICAgICAgICAgICBpZiAoY3VycmVudCA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gICAgICAgICAgICBlbHNlIGlmIChjdXJyZW50ID09PSB2YWx1ZSB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSA7IC8vIE5vIGNvbmZsaWN0XG4gICAgICAgICAgICBlbHNlIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChjb21iaW5lLCBrZXkpKVxuICAgICAgICAgICAgICAgIHJlc3VsdFtrZXldID0gY29tYmluZVtrZXldKGN1cnJlbnQsIHZhbHVlKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb25maWcgbWVyZ2UgY29uZmxpY3QgZm9yIGZpZWxkIFwiICsga2V5KTtcbiAgICAgICAgfVxuICAgIGZvciAobGV0IGtleSBpbiBkZWZhdWx0cylcbiAgICAgICAgaWYgKHJlc3VsdFtrZXldID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXN1bHRba2V5XSA9IGRlZmF1bHRzW2tleV07XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG5FYWNoIHJhbmdlIGlzIGFzc29jaWF0ZWQgd2l0aCBhIHZhbHVlLCB3aGljaCBtdXN0IGluaGVyaXQgZnJvbVxudGhpcyBjbGFzcy5cbiovXG5jbGFzcyBSYW5nZVZhbHVlIHtcbiAgICAvKipcbiAgICBDb21wYXJlIHRoaXMgdmFsdWUgd2l0aCBhbm90aGVyIHZhbHVlLiBVc2VkIHdoZW4gY29tcGFyaW5nXG4gICAgcmFuZ2VzZXRzLiBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBjb21wYXJlcyBieSBpZGVudGl0eS5cbiAgICBVbmxlc3MgeW91IGFyZSBvbmx5IGNyZWF0aW5nIGEgZml4ZWQgbnVtYmVyIG9mIHVuaXF1ZSBpbnN0YW5jZXNcbiAgICBvZiB5b3VyIHZhbHVlIHR5cGUsIGl0IGlzIGEgZ29vZCBpZGVhIHRvIGltcGxlbWVudCB0aGlzXG4gICAgcHJvcGVybHkuXG4gICAgKi9cbiAgICBlcShvdGhlcikgeyByZXR1cm4gdGhpcyA9PSBvdGhlcjsgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIFtyYW5nZV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5SYW5nZSkgd2l0aCB0aGlzIHZhbHVlLlxuICAgICovXG4gICAgcmFuZ2UoZnJvbSwgdG8gPSBmcm9tKSB7IHJldHVybiBSYW5nZS5jcmVhdGUoZnJvbSwgdG8sIHRoaXMpOyB9XG59XG5SYW5nZVZhbHVlLnByb3RvdHlwZS5zdGFydFNpZGUgPSBSYW5nZVZhbHVlLnByb3RvdHlwZS5lbmRTaWRlID0gMDtcblJhbmdlVmFsdWUucHJvdG90eXBlLnBvaW50ID0gZmFsc2U7XG5SYW5nZVZhbHVlLnByb3RvdHlwZS5tYXBNb2RlID0gTWFwTW9kZS5UcmFja0RlbDtcbi8qKlxuQSByYW5nZSBhc3NvY2lhdGVzIGEgdmFsdWUgd2l0aCBhIHJhbmdlIG9mIHBvc2l0aW9ucy5cbiovXG5jbGFzcyBSYW5nZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIHJhbmdlJ3Mgc3RhcnQgcG9zaXRpb24uXG4gICAgKi9cbiAgICBmcm9tLCBcbiAgICAvKipcbiAgICBJdHMgZW5kIHBvc2l0aW9uLlxuICAgICovXG4gICAgdG8sIFxuICAgIC8qKlxuICAgIFRoZSB2YWx1ZSBhc3NvY2lhdGVkIHdpdGggdGhpcyByYW5nZS5cbiAgICAqL1xuICAgIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoZnJvbSwgdG8sIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmFuZ2UoZnJvbSwgdG8sIHZhbHVlKTtcbiAgICB9XG59XG5mdW5jdGlvbiBjbXBSYW5nZShhLCBiKSB7XG4gICAgcmV0dXJuIGEuZnJvbSAtIGIuZnJvbSB8fCBhLnZhbHVlLnN0YXJ0U2lkZSAtIGIudmFsdWUuc3RhcnRTaWRlO1xufVxuY2xhc3MgQ2h1bmsge1xuICAgIGNvbnN0cnVjdG9yKGZyb20sIHRvLCB2YWx1ZSwgXG4gICAgLy8gQ2h1bmtzIGFyZSBtYXJrZWQgd2l0aCB0aGUgbGFyZ2VzdCBwb2ludCB0aGF0IG9jY3Vyc1xuICAgIC8vIGluIHRoZW0gKG9yIC0xIGZvciBubyBwb2ludHMpLCBzbyB0aGF0IHNjYW5zIHRoYXQgYXJlXG4gICAgLy8gb25seSBpbnRlcmVzdGVkIGluIHBvaW50cyAoc3VjaCBhcyB0aGVcbiAgICAvLyBoZWlnaHRtYXAtcmVsYXRlZCBsb2dpYykgY2FuIHNraXAgcmFuZ2Utb25seSBjaHVua3MuXG4gICAgbWF4UG9pbnQpIHtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMubWF4UG9pbnQgPSBtYXhQb2ludDtcbiAgICB9XG4gICAgZ2V0IGxlbmd0aCgpIHsgcmV0dXJuIHRoaXMudG9bdGhpcy50by5sZW5ndGggLSAxXTsgfVxuICAgIC8vIEZpbmQgdGhlIGluZGV4IG9mIHRoZSBnaXZlbiBwb3NpdGlvbiBhbmQgc2lkZS4gVXNlIHRoZSByYW5nZXMnXG4gICAgLy8gYGZyb21gIHBvcyB3aGVuIGBlbmQgPT0gZmFsc2VgLCBgdG9gIHdoZW4gYGVuZCA9PSB0cnVlYC5cbiAgICBmaW5kSW5kZXgocG9zLCBzaWRlLCBlbmQsIHN0YXJ0QXQgPSAwKSB7XG4gICAgICAgIGxldCBhcnIgPSBlbmQgPyB0aGlzLnRvIDogdGhpcy5mcm9tO1xuICAgICAgICBmb3IgKGxldCBsbyA9IHN0YXJ0QXQsIGhpID0gYXJyLmxlbmd0aDs7KSB7XG4gICAgICAgICAgICBpZiAobG8gPT0gaGkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxvO1xuICAgICAgICAgICAgbGV0IG1pZCA9IChsbyArIGhpKSA+PiAxO1xuICAgICAgICAgICAgbGV0IGRpZmYgPSBhcnJbbWlkXSAtIHBvcyB8fCAoZW5kID8gdGhpcy52YWx1ZVttaWRdLmVuZFNpZGUgOiB0aGlzLnZhbHVlW21pZF0uc3RhcnRTaWRlKSAtIHNpZGU7XG4gICAgICAgICAgICBpZiAobWlkID09IGxvKVxuICAgICAgICAgICAgICAgIHJldHVybiBkaWZmID49IDAgPyBsbyA6IGhpO1xuICAgICAgICAgICAgaWYgKGRpZmYgPj0gMClcbiAgICAgICAgICAgICAgICBoaSA9IG1pZDtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBsbyA9IG1pZCArIDE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYmV0d2VlbihvZmZzZXQsIGZyb20sIHRvLCBmKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLmZpbmRJbmRleChmcm9tLCAtMTAwMDAwMDAwMCAvKiBDLkZhciAqLywgdHJ1ZSksIGUgPSB0aGlzLmZpbmRJbmRleCh0bywgMTAwMDAwMDAwMCAvKiBDLkZhciAqLywgZmFsc2UsIGkpOyBpIDwgZTsgaSsrKVxuICAgICAgICAgICAgaWYgKGYodGhpcy5mcm9tW2ldICsgb2Zmc2V0LCB0aGlzLnRvW2ldICsgb2Zmc2V0LCB0aGlzLnZhbHVlW2ldKSA9PT0gZmFsc2UpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBtYXAob2Zmc2V0LCBjaGFuZ2VzKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IFtdLCBmcm9tID0gW10sIHRvID0gW10sIG5ld1BvcyA9IC0xLCBtYXhQb2ludCA9IC0xO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCB2YWwgPSB0aGlzLnZhbHVlW2ldLCBjdXJGcm9tID0gdGhpcy5mcm9tW2ldICsgb2Zmc2V0LCBjdXJUbyA9IHRoaXMudG9baV0gKyBvZmZzZXQsIG5ld0Zyb20sIG5ld1RvO1xuICAgICAgICAgICAgaWYgKGN1ckZyb20gPT0gY3VyVG8pIHtcbiAgICAgICAgICAgICAgICBsZXQgbWFwcGVkID0gY2hhbmdlcy5tYXBQb3MoY3VyRnJvbSwgdmFsLnN0YXJ0U2lkZSwgdmFsLm1hcE1vZGUpO1xuICAgICAgICAgICAgICAgIGlmIChtYXBwZWQgPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgbmV3RnJvbSA9IG5ld1RvID0gbWFwcGVkO1xuICAgICAgICAgICAgICAgIGlmICh2YWwuc3RhcnRTaWRlICE9IHZhbC5lbmRTaWRlKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1RvID0gY2hhbmdlcy5tYXBQb3MoY3VyRnJvbSwgdmFsLmVuZFNpZGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV3VG8gPCBuZXdGcm9tKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3RnJvbSA9IGNoYW5nZXMubWFwUG9zKGN1ckZyb20sIHZhbC5zdGFydFNpZGUpO1xuICAgICAgICAgICAgICAgIG5ld1RvID0gY2hhbmdlcy5tYXBQb3MoY3VyVG8sIHZhbC5lbmRTaWRlKTtcbiAgICAgICAgICAgICAgICBpZiAobmV3RnJvbSA+IG5ld1RvIHx8IG5ld0Zyb20gPT0gbmV3VG8gJiYgdmFsLnN0YXJ0U2lkZSA+IDAgJiYgdmFsLmVuZFNpZGUgPD0gMClcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKG5ld1RvIC0gbmV3RnJvbSB8fCB2YWwuZW5kU2lkZSAtIHZhbC5zdGFydFNpZGUpIDwgMClcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGlmIChuZXdQb3MgPCAwKVxuICAgICAgICAgICAgICAgIG5ld1BvcyA9IG5ld0Zyb207XG4gICAgICAgICAgICBpZiAodmFsLnBvaW50KVxuICAgICAgICAgICAgICAgIG1heFBvaW50ID0gTWF0aC5tYXgobWF4UG9pbnQsIG5ld1RvIC0gbmV3RnJvbSk7XG4gICAgICAgICAgICB2YWx1ZS5wdXNoKHZhbCk7XG4gICAgICAgICAgICBmcm9tLnB1c2gobmV3RnJvbSAtIG5ld1Bvcyk7XG4gICAgICAgICAgICB0by5wdXNoKG5ld1RvIC0gbmV3UG9zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBtYXBwZWQ6IHZhbHVlLmxlbmd0aCA/IG5ldyBDaHVuayhmcm9tLCB0bywgdmFsdWUsIG1heFBvaW50KSA6IG51bGwsIHBvczogbmV3UG9zIH07XG4gICAgfVxufVxuLyoqXG5BIHJhbmdlIHNldCBzdG9yZXMgYSBjb2xsZWN0aW9uIG9mIFtyYW5nZXNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuUmFuZ2UpIGluIGFcbndheSB0aGF0IG1ha2VzIHRoZW0gZWZmaWNpZW50IHRvIFttYXBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuUmFuZ2VTZXQubWFwKSBhbmRcblt1cGRhdGVdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuUmFuZ2VTZXQudXBkYXRlKS4gVGhpcyBpcyBhbiBpbW11dGFibGUgZGF0YVxuc3RydWN0dXJlLlxuKi9cbmNsYXNzIFJhbmdlU2V0IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNodW5rUG9zLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNodW5rLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIG5leHRMYXllciwgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBtYXhQb2ludCkge1xuICAgICAgICB0aGlzLmNodW5rUG9zID0gY2h1bmtQb3M7XG4gICAgICAgIHRoaXMuY2h1bmsgPSBjaHVuaztcbiAgICAgICAgdGhpcy5uZXh0TGF5ZXIgPSBuZXh0TGF5ZXI7XG4gICAgICAgIHRoaXMubWF4UG9pbnQgPSBtYXhQb2ludDtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKGNodW5rUG9zLCBjaHVuaywgbmV4dExheWVyLCBtYXhQb2ludCkge1xuICAgICAgICByZXR1cm4gbmV3IFJhbmdlU2V0KGNodW5rUG9zLCBjaHVuaywgbmV4dExheWVyLCBtYXhQb2ludCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZ2V0IGxlbmd0aCgpIHtcbiAgICAgICAgbGV0IGxhc3QgPSB0aGlzLmNodW5rLmxlbmd0aCAtIDE7XG4gICAgICAgIHJldHVybiBsYXN0IDwgMCA/IDAgOiBNYXRoLm1heCh0aGlzLmNodW5rRW5kKGxhc3QpLCB0aGlzLm5leHRMYXllci5sZW5ndGgpO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgbnVtYmVyIG9mIHJhbmdlcyBpbiB0aGUgc2V0LlxuICAgICovXG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRW1wdHkpXG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgbGV0IHNpemUgPSB0aGlzLm5leHRMYXllci5zaXplO1xuICAgICAgICBmb3IgKGxldCBjaHVuayBvZiB0aGlzLmNodW5rKVxuICAgICAgICAgICAgc2l6ZSArPSBjaHVuay52YWx1ZS5sZW5ndGg7XG4gICAgICAgIHJldHVybiBzaXplO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNodW5rRW5kKGluZGV4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNodW5rUG9zW2luZGV4XSArIHRoaXMuY2h1bmtbaW5kZXhdLmxlbmd0aDtcbiAgICB9XG4gICAgLyoqXG4gICAgVXBkYXRlIHRoZSByYW5nZSBzZXQsIG9wdGlvbmFsbHkgYWRkaW5nIG5ldyByYW5nZXMgb3IgZmlsdGVyaW5nXG4gICAgb3V0IGV4aXN0aW5nIG9uZXMuXG4gICAgXG4gICAgKE5vdGU6IFRoZSB0eXBlIHBhcmFtZXRlciBpcyBqdXN0IHRoZXJlIGFzIGEga2x1ZGdlIHRvIHdvcmtcbiAgICBhcm91bmQgVHlwZVNjcmlwdCB2YXJpYW5jZSBpc3N1ZXMgdGhhdCBwcmV2ZW50ZWQgYFJhbmdlU2V0PFg+YFxuICAgIGZyb20gYmVpbmcgYSBzdWJ0eXBlIG9mIGBSYW5nZVNldDxZPmAgd2hlbiBgWGAgaXMgYSBzdWJ0eXBlIG9mXG4gICAgYFlgLilcbiAgICAqL1xuICAgIHVwZGF0ZSh1cGRhdGVTcGVjKSB7XG4gICAgICAgIGxldCB7IGFkZCA9IFtdLCBzb3J0ID0gZmFsc2UsIGZpbHRlckZyb20gPSAwLCBmaWx0ZXJUbyA9IHRoaXMubGVuZ3RoIH0gPSB1cGRhdGVTcGVjO1xuICAgICAgICBsZXQgZmlsdGVyID0gdXBkYXRlU3BlYy5maWx0ZXI7XG4gICAgICAgIGlmIChhZGQubGVuZ3RoID09IDAgJiYgIWZpbHRlcilcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICBpZiAoc29ydClcbiAgICAgICAgICAgIGFkZCA9IGFkZC5zbGljZSgpLnNvcnQoY21wUmFuZ2UpO1xuICAgICAgICBpZiAodGhpcy5pc0VtcHR5KVxuICAgICAgICAgICAgcmV0dXJuIGFkZC5sZW5ndGggPyBSYW5nZVNldC5vZihhZGQpIDogdGhpcztcbiAgICAgICAgbGV0IGN1ciA9IG5ldyBMYXllckN1cnNvcih0aGlzLCBudWxsLCAtMSkuZ290bygwKSwgaSA9IDAsIHNwaWxsID0gW107XG4gICAgICAgIGxldCBidWlsZGVyID0gbmV3IFJhbmdlU2V0QnVpbGRlcigpO1xuICAgICAgICB3aGlsZSAoY3VyLnZhbHVlIHx8IGkgPCBhZGQubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoaSA8IGFkZC5sZW5ndGggJiYgKGN1ci5mcm9tIC0gYWRkW2ldLmZyb20gfHwgY3VyLnN0YXJ0U2lkZSAtIGFkZFtpXS52YWx1ZS5zdGFydFNpZGUpID49IDApIHtcbiAgICAgICAgICAgICAgICBsZXQgcmFuZ2UgPSBhZGRbaSsrXTtcbiAgICAgICAgICAgICAgICBpZiAoIWJ1aWxkZXIuYWRkSW5uZXIocmFuZ2UuZnJvbSwgcmFuZ2UudG8sIHJhbmdlLnZhbHVlKSlcbiAgICAgICAgICAgICAgICAgICAgc3BpbGwucHVzaChyYW5nZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjdXIucmFuZ2VJbmRleCA9PSAxICYmIGN1ci5jaHVua0luZGV4IDwgdGhpcy5jaHVuay5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICAoaSA9PSBhZGQubGVuZ3RoIHx8IHRoaXMuY2h1bmtFbmQoY3VyLmNodW5rSW5kZXgpIDwgYWRkW2ldLmZyb20pICYmXG4gICAgICAgICAgICAgICAgKCFmaWx0ZXIgfHwgZmlsdGVyRnJvbSA+IHRoaXMuY2h1bmtFbmQoY3VyLmNodW5rSW5kZXgpIHx8IGZpbHRlclRvIDwgdGhpcy5jaHVua1Bvc1tjdXIuY2h1bmtJbmRleF0pICYmXG4gICAgICAgICAgICAgICAgYnVpbGRlci5hZGRDaHVuayh0aGlzLmNodW5rUG9zW2N1ci5jaHVua0luZGV4XSwgdGhpcy5jaHVua1tjdXIuY2h1bmtJbmRleF0pKSB7XG4gICAgICAgICAgICAgICAgY3VyLm5leHRDaHVuaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCFmaWx0ZXIgfHwgZmlsdGVyRnJvbSA+IGN1ci50byB8fCBmaWx0ZXJUbyA8IGN1ci5mcm9tIHx8IGZpbHRlcihjdXIuZnJvbSwgY3VyLnRvLCBjdXIudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYnVpbGRlci5hZGRJbm5lcihjdXIuZnJvbSwgY3VyLnRvLCBjdXIudmFsdWUpKVxuICAgICAgICAgICAgICAgICAgICAgICAgc3BpbGwucHVzaChSYW5nZS5jcmVhdGUoY3VyLmZyb20sIGN1ci50bywgY3VyLnZhbHVlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN1ci5uZXh0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJ1aWxkZXIuZmluaXNoSW5uZXIodGhpcy5uZXh0TGF5ZXIuaXNFbXB0eSAmJiAhc3BpbGwubGVuZ3RoID8gUmFuZ2VTZXQuZW1wdHlcbiAgICAgICAgICAgIDogdGhpcy5uZXh0TGF5ZXIudXBkYXRlKHsgYWRkOiBzcGlsbCwgZmlsdGVyLCBmaWx0ZXJGcm9tLCBmaWx0ZXJUbyB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgIE1hcCB0aGlzIHJhbmdlIHNldCB0aHJvdWdoIGEgc2V0IG9mIGNoYW5nZXMsIHJldHVybiB0aGUgbmV3IHNldC5cbiAgICAqL1xuICAgIG1hcChjaGFuZ2VzKSB7XG4gICAgICAgIGlmIChjaGFuZ2VzLmVtcHR5IHx8IHRoaXMuaXNFbXB0eSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICBsZXQgY2h1bmtzID0gW10sIGNodW5rUG9zID0gW10sIG1heFBvaW50ID0gLTE7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jaHVuay5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHN0YXJ0ID0gdGhpcy5jaHVua1Bvc1tpXSwgY2h1bmsgPSB0aGlzLmNodW5rW2ldO1xuICAgICAgICAgICAgbGV0IHRvdWNoID0gY2hhbmdlcy50b3VjaGVzUmFuZ2Uoc3RhcnQsIHN0YXJ0ICsgY2h1bmsubGVuZ3RoKTtcbiAgICAgICAgICAgIGlmICh0b3VjaCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBtYXhQb2ludCA9IE1hdGgubWF4KG1heFBvaW50LCBjaHVuay5tYXhQb2ludCk7XG4gICAgICAgICAgICAgICAgY2h1bmtzLnB1c2goY2h1bmspO1xuICAgICAgICAgICAgICAgIGNodW5rUG9zLnB1c2goY2hhbmdlcy5tYXBQb3Moc3RhcnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRvdWNoID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHsgbWFwcGVkLCBwb3MgfSA9IGNodW5rLm1hcChzdGFydCwgY2hhbmdlcyk7XG4gICAgICAgICAgICAgICAgaWYgKG1hcHBlZCkge1xuICAgICAgICAgICAgICAgICAgICBtYXhQb2ludCA9IE1hdGgubWF4KG1heFBvaW50LCBtYXBwZWQubWF4UG9pbnQpO1xuICAgICAgICAgICAgICAgICAgICBjaHVua3MucHVzaChtYXBwZWQpO1xuICAgICAgICAgICAgICAgICAgICBjaHVua1Bvcy5wdXNoKHBvcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBuZXh0ID0gdGhpcy5uZXh0TGF5ZXIubWFwKGNoYW5nZXMpO1xuICAgICAgICByZXR1cm4gY2h1bmtzLmxlbmd0aCA9PSAwID8gbmV4dCA6IG5ldyBSYW5nZVNldChjaHVua1BvcywgY2h1bmtzLCBuZXh0IHx8IFJhbmdlU2V0LmVtcHR5LCBtYXhQb2ludCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEl0ZXJhdGUgb3ZlciB0aGUgcmFuZ2VzIHRoYXQgdG91Y2ggdGhlIHJlZ2lvbiBgZnJvbWAgdG8gYHRvYCxcbiAgICBjYWxsaW5nIGBmYCBmb3IgZWFjaC4gVGhlcmUgaXMgbm8gZ3VhcmFudGVlIHRoYXQgdGhlIHJhbmdlcyB3aWxsXG4gICAgYmUgcmVwb3J0ZWQgaW4gYW55IHNwZWNpZmljIG9yZGVyLiBXaGVuIHRoZSBjYWxsYmFjayByZXR1cm5zXG4gICAgYGZhbHNlYCwgaXRlcmF0aW9uIHN0b3BzLlxuICAgICovXG4gICAgYmV0d2Vlbihmcm9tLCB0bywgZikge1xuICAgICAgICBpZiAodGhpcy5pc0VtcHR5KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY2h1bmsubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBzdGFydCA9IHRoaXMuY2h1bmtQb3NbaV0sIGNodW5rID0gdGhpcy5jaHVua1tpXTtcbiAgICAgICAgICAgIGlmICh0byA+PSBzdGFydCAmJiBmcm9tIDw9IHN0YXJ0ICsgY2h1bmsubGVuZ3RoICYmXG4gICAgICAgICAgICAgICAgY2h1bmsuYmV0d2VlbihzdGFydCwgZnJvbSAtIHN0YXJ0LCB0byAtIHN0YXJ0LCBmKSA9PT0gZmFsc2UpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmV4dExheWVyLmJldHdlZW4oZnJvbSwgdG8sIGYpO1xuICAgIH1cbiAgICAvKipcbiAgICBJdGVyYXRlIG92ZXIgdGhlIHJhbmdlcyBpbiB0aGlzIHNldCwgaW4gb3JkZXIsIGluY2x1ZGluZyBhbGxcbiAgICByYW5nZXMgdGhhdCBlbmQgYXQgb3IgYWZ0ZXIgYGZyb21gLlxuICAgICovXG4gICAgaXRlcihmcm9tID0gMCkge1xuICAgICAgICByZXR1cm4gSGVhcEN1cnNvci5mcm9tKFt0aGlzXSkuZ290byhmcm9tKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBnZXQgaXNFbXB0eSgpIHsgcmV0dXJuIHRoaXMubmV4dExheWVyID09IHRoaXM7IH1cbiAgICAvKipcbiAgICBJdGVyYXRlIG92ZXIgdGhlIHJhbmdlcyBpbiBhIGNvbGxlY3Rpb24gb2Ygc2V0cywgaW4gb3JkZXIsXG4gICAgc3RhcnRpbmcgZnJvbSBgZnJvbWAuXG4gICAgKi9cbiAgICBzdGF0aWMgaXRlcihzZXRzLCBmcm9tID0gMCkge1xuICAgICAgICByZXR1cm4gSGVhcEN1cnNvci5mcm9tKHNldHMpLmdvdG8oZnJvbSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEl0ZXJhdGUgb3ZlciB0d28gZ3JvdXBzIG9mIHNldHMsIGNhbGxpbmcgbWV0aG9kcyBvbiBgY29tcGFyYXRvcmBcbiAgICB0byBub3RpZnkgaXQgb2YgcG9zc2libGUgZGlmZmVyZW5jZXMuXG4gICAgKi9cbiAgICBzdGF0aWMgY29tcGFyZShvbGRTZXRzLCBuZXdTZXRzLCBcbiAgICAvKipcbiAgICBUaGlzIGluZGljYXRlcyBob3cgdGhlIHVuZGVybHlpbmcgZGF0YSBjaGFuZ2VkIGJldHdlZW4gdGhlc2VcbiAgICByYW5nZXMsIGFuZCBpcyBuZWVkZWQgdG8gc3luY2hyb25pemUgdGhlIGl0ZXJhdGlvbi4gYGZyb21gIGFuZFxuICAgIGB0b2AgYXJlIGNvb3JkaW5hdGVzIGluIHRoZSBfbmV3XyBzcGFjZSwgYWZ0ZXIgdGhlc2UgY2hhbmdlcy5cbiAgICAqL1xuICAgIHRleHREaWZmLCBjb21wYXJhdG9yLCBcbiAgICAvKipcbiAgICBDYW4gYmUgdXNlZCB0byBpZ25vcmUgYWxsIG5vbi1wb2ludCByYW5nZXMsIGFuZCBwb2ludHMgYmVsb3dcbiAgICB0aGUgZ2l2ZW4gc2l6ZS4gV2hlbiAtMSwgYWxsIHJhbmdlcyBhcmUgY29tcGFyZWQuXG4gICAgKi9cbiAgICBtaW5Qb2ludFNpemUgPSAtMSkge1xuICAgICAgICBsZXQgYSA9IG9sZFNldHMuZmlsdGVyKHNldCA9PiBzZXQubWF4UG9pbnQgPiAwIHx8ICFzZXQuaXNFbXB0eSAmJiBzZXQubWF4UG9pbnQgPj0gbWluUG9pbnRTaXplKTtcbiAgICAgICAgbGV0IGIgPSBuZXdTZXRzLmZpbHRlcihzZXQgPT4gc2V0Lm1heFBvaW50ID4gMCB8fCAhc2V0LmlzRW1wdHkgJiYgc2V0Lm1heFBvaW50ID49IG1pblBvaW50U2l6ZSk7XG4gICAgICAgIGxldCBzaGFyZWRDaHVua3MgPSBmaW5kU2hhcmVkQ2h1bmtzKGEsIGIsIHRleHREaWZmKTtcbiAgICAgICAgbGV0IHNpZGVBID0gbmV3IFNwYW5DdXJzb3IoYSwgc2hhcmVkQ2h1bmtzLCBtaW5Qb2ludFNpemUpO1xuICAgICAgICBsZXQgc2lkZUIgPSBuZXcgU3BhbkN1cnNvcihiLCBzaGFyZWRDaHVua3MsIG1pblBvaW50U2l6ZSk7XG4gICAgICAgIHRleHREaWZmLml0ZXJHYXBzKChmcm9tQSwgZnJvbUIsIGxlbmd0aCkgPT4gY29tcGFyZShzaWRlQSwgZnJvbUEsIHNpZGVCLCBmcm9tQiwgbGVuZ3RoLCBjb21wYXJhdG9yKSk7XG4gICAgICAgIGlmICh0ZXh0RGlmZi5lbXB0eSAmJiB0ZXh0RGlmZi5sZW5ndGggPT0gMClcbiAgICAgICAgICAgIGNvbXBhcmUoc2lkZUEsIDAsIHNpZGVCLCAwLCAwLCBjb21wYXJhdG9yKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ29tcGFyZSB0aGUgY29udGVudHMgb2YgdHdvIGdyb3VwcyBvZiByYW5nZSBzZXRzLCByZXR1cm5pbmcgdHJ1ZVxuICAgIGlmIHRoZXkgYXJlIGVxdWl2YWxlbnQgaW4gdGhlIGdpdmVuIHJhbmdlLlxuICAgICovXG4gICAgc3RhdGljIGVxKG9sZFNldHMsIG5ld1NldHMsIGZyb20gPSAwLCB0bykge1xuICAgICAgICBpZiAodG8gPT0gbnVsbClcbiAgICAgICAgICAgIHRvID0gMTAwMDAwMDAwMCAvKiBDLkZhciAqLyAtIDE7XG4gICAgICAgIGxldCBhID0gb2xkU2V0cy5maWx0ZXIoc2V0ID0+ICFzZXQuaXNFbXB0eSAmJiBuZXdTZXRzLmluZGV4T2Yoc2V0KSA8IDApO1xuICAgICAgICBsZXQgYiA9IG5ld1NldHMuZmlsdGVyKHNldCA9PiAhc2V0LmlzRW1wdHkgJiYgb2xkU2V0cy5pbmRleE9mKHNldCkgPCAwKTtcbiAgICAgICAgaWYgKGEubGVuZ3RoICE9IGIubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoIWEubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIGxldCBzaGFyZWRDaHVua3MgPSBmaW5kU2hhcmVkQ2h1bmtzKGEsIGIpO1xuICAgICAgICBsZXQgc2lkZUEgPSBuZXcgU3BhbkN1cnNvcihhLCBzaGFyZWRDaHVua3MsIDApLmdvdG8oZnJvbSksIHNpZGVCID0gbmV3IFNwYW5DdXJzb3IoYiwgc2hhcmVkQ2h1bmtzLCAwKS5nb3RvKGZyb20pO1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBpZiAoc2lkZUEudG8gIT0gc2lkZUIudG8gfHxcbiAgICAgICAgICAgICAgICAhc2FtZVZhbHVlcyhzaWRlQS5hY3RpdmUsIHNpZGVCLmFjdGl2ZSkgfHxcbiAgICAgICAgICAgICAgICBzaWRlQS5wb2ludCAmJiAoIXNpZGVCLnBvaW50IHx8ICFzaWRlQS5wb2ludC5lcShzaWRlQi5wb2ludCkpKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGlmIChzaWRlQS50byA+IHRvKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgc2lkZUEubmV4dCgpO1xuICAgICAgICAgICAgc2lkZUIubmV4dCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgIEl0ZXJhdGUgb3ZlciBhIGdyb3VwIG9mIHJhbmdlIHNldHMgYXQgdGhlIHNhbWUgdGltZSwgbm90aWZ5aW5nXG4gICAgdGhlIGl0ZXJhdG9yIGFib3V0IHRoZSByYW5nZXMgY292ZXJpbmcgZXZlcnkgZ2l2ZW4gcGllY2Ugb2ZcbiAgICBjb250ZW50LiBSZXR1cm5zIHRoZSBvcGVuIGNvdW50IChzZWVcbiAgICBbYFNwYW5JdGVyYXRvci5zcGFuYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5TcGFuSXRlcmF0b3Iuc3BhbikpIGF0IHRoZSBlbmRcbiAgICBvZiB0aGUgaXRlcmF0aW9uLlxuICAgICovXG4gICAgc3RhdGljIHNwYW5zKHNldHMsIGZyb20sIHRvLCBpdGVyYXRvciwgXG4gICAgLyoqXG4gICAgV2hlbiBnaXZlbiBhbmQgZ3JlYXRlciB0aGFuIC0xLCBvbmx5IHBvaW50cyBvZiBhdCBsZWFzdCB0aGlzXG4gICAgc2l6ZSBhcmUgdGFrZW4gaW50byBhY2NvdW50LlxuICAgICovXG4gICAgbWluUG9pbnRTaXplID0gLTEpIHtcbiAgICAgICAgbGV0IGN1cnNvciA9IG5ldyBTcGFuQ3Vyc29yKHNldHMsIG51bGwsIG1pblBvaW50U2l6ZSkuZ290byhmcm9tKSwgcG9zID0gZnJvbTtcbiAgICAgICAgbGV0IG9wZW4gPSBjdXJzb3Iub3BlblN0YXJ0O1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBsZXQgY3VyVG8gPSBNYXRoLm1pbihjdXJzb3IudG8sIHRvKTtcbiAgICAgICAgICAgIGlmIChjdXJzb3IucG9pbnQpIHtcbiAgICAgICAgICAgICAgICBpdGVyYXRvci5wb2ludChwb3MsIGN1clRvLCBjdXJzb3IucG9pbnQsIGN1cnNvci5hY3RpdmVGb3JQb2ludChjdXJzb3IudG8pLCBvcGVuLCBjdXJzb3IucG9pbnRSYW5rKTtcbiAgICAgICAgICAgICAgICBvcGVuID0gY3Vyc29yLm9wZW5FbmQoY3VyVG8pICsgKGN1cnNvci50byA+IGN1clRvID8gMSA6IDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY3VyVG8gPiBwb3MpIHtcbiAgICAgICAgICAgICAgICBpdGVyYXRvci5zcGFuKHBvcywgY3VyVG8sIGN1cnNvci5hY3RpdmUsIG9wZW4pO1xuICAgICAgICAgICAgICAgIG9wZW4gPSBjdXJzb3Iub3BlbkVuZChjdXJUbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3Vyc29yLnRvID4gdG8pXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBwb3MgPSBjdXJzb3IudG87XG4gICAgICAgICAgICBjdXJzb3IubmV4dCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvcGVuO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSByYW5nZSBzZXQgZm9yIHRoZSBnaXZlbiByYW5nZSBvciBhcnJheSBvZiByYW5nZXMuIEJ5XG4gICAgZGVmYXVsdCwgdGhpcyBleHBlY3RzIHRoZSByYW5nZXMgdG8gYmUgX3NvcnRlZF8gKGJ5IHN0YXJ0XG4gICAgcG9zaXRpb24gYW5kLCBpZiB0d28gc3RhcnQgYXQgdGhlIHNhbWUgcG9zaXRpb24sXG4gICAgYHZhbHVlLnN0YXJ0U2lkZWApLiBZb3UgY2FuIHBhc3MgYHRydWVgIGFzIHNlY29uZCBhcmd1bWVudCB0b1xuICAgIGNhdXNlIHRoZSBtZXRob2QgdG8gc29ydCB0aGVtLlxuICAgICovXG4gICAgc3RhdGljIG9mKHJhbmdlcywgc29ydCA9IGZhbHNlKSB7XG4gICAgICAgIGxldCBidWlsZCA9IG5ldyBSYW5nZVNldEJ1aWxkZXIoKTtcbiAgICAgICAgZm9yIChsZXQgcmFuZ2Ugb2YgcmFuZ2VzIGluc3RhbmNlb2YgUmFuZ2UgPyBbcmFuZ2VzXSA6IHNvcnQgPyBsYXp5U29ydChyYW5nZXMpIDogcmFuZ2VzKVxuICAgICAgICAgICAgYnVpbGQuYWRkKHJhbmdlLmZyb20sIHJhbmdlLnRvLCByYW5nZS52YWx1ZSk7XG4gICAgICAgIHJldHVybiBidWlsZC5maW5pc2goKTtcbiAgICB9XG59XG4vKipcblRoZSBlbXB0eSBzZXQgb2YgcmFuZ2VzLlxuKi9cblJhbmdlU2V0LmVtcHR5ID0gLypAX19QVVJFX18qL25ldyBSYW5nZVNldChbXSwgW10sIG51bGwsIC0xKTtcbmZ1bmN0aW9uIGxhenlTb3J0KHJhbmdlcykge1xuICAgIGlmIChyYW5nZXMubGVuZ3RoID4gMSlcbiAgICAgICAgZm9yIChsZXQgcHJldiA9IHJhbmdlc1swXSwgaSA9IDE7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBjdXIgPSByYW5nZXNbaV07XG4gICAgICAgICAgICBpZiAoY21wUmFuZ2UocHJldiwgY3VyKSA+IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJhbmdlcy5zbGljZSgpLnNvcnQoY21wUmFuZ2UpO1xuICAgICAgICAgICAgcHJldiA9IGN1cjtcbiAgICAgICAgfVxuICAgIHJldHVybiByYW5nZXM7XG59XG5SYW5nZVNldC5lbXB0eS5uZXh0TGF5ZXIgPSBSYW5nZVNldC5lbXB0eTtcbi8qKlxuQSByYW5nZSBzZXQgYnVpbGRlciBpcyBhIGRhdGEgc3RydWN0dXJlIHRoYXQgaGVscHMgYnVpbGQgdXAgYVxuW3JhbmdlIHNldF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5SYW5nZVNldCkgZGlyZWN0bHksIHdpdGhvdXQgZmlyc3QgYWxsb2NhdGluZ1xuYW4gYXJyYXkgb2YgW2BSYW5nZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuUmFuZ2UpIG9iamVjdHMuXG4qL1xuY2xhc3MgUmFuZ2VTZXRCdWlsZGVyIHtcbiAgICAvKipcbiAgICBDcmVhdGUgYW4gZW1wdHkgYnVpbGRlci5cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmNodW5rcyA9IFtdO1xuICAgICAgICB0aGlzLmNodW5rUG9zID0gW107XG4gICAgICAgIHRoaXMuY2h1bmtTdGFydCA9IC0xO1xuICAgICAgICB0aGlzLmxhc3QgPSBudWxsO1xuICAgICAgICB0aGlzLmxhc3RGcm9tID0gLTEwMDAwMDAwMDAgLyogQy5GYXIgKi87XG4gICAgICAgIHRoaXMubGFzdFRvID0gLTEwMDAwMDAwMDAgLyogQy5GYXIgKi87XG4gICAgICAgIHRoaXMuZnJvbSA9IFtdO1xuICAgICAgICB0aGlzLnRvID0gW107XG4gICAgICAgIHRoaXMudmFsdWUgPSBbXTtcbiAgICAgICAgdGhpcy5tYXhQb2ludCA9IC0xO1xuICAgICAgICB0aGlzLnNldE1heFBvaW50ID0gLTE7XG4gICAgICAgIHRoaXMubmV4dExheWVyID0gbnVsbDtcbiAgICB9XG4gICAgZmluaXNoQ2h1bmsobmV3QXJyYXlzKSB7XG4gICAgICAgIHRoaXMuY2h1bmtzLnB1c2gobmV3IENodW5rKHRoaXMuZnJvbSwgdGhpcy50bywgdGhpcy52YWx1ZSwgdGhpcy5tYXhQb2ludCkpO1xuICAgICAgICB0aGlzLmNodW5rUG9zLnB1c2godGhpcy5jaHVua1N0YXJ0KTtcbiAgICAgICAgdGhpcy5jaHVua1N0YXJ0ID0gLTE7XG4gICAgICAgIHRoaXMuc2V0TWF4UG9pbnQgPSBNYXRoLm1heCh0aGlzLnNldE1heFBvaW50LCB0aGlzLm1heFBvaW50KTtcbiAgICAgICAgdGhpcy5tYXhQb2ludCA9IC0xO1xuICAgICAgICBpZiAobmV3QXJyYXlzKSB7XG4gICAgICAgICAgICB0aGlzLmZyb20gPSBbXTtcbiAgICAgICAgICAgIHRoaXMudG8gPSBbXTtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBbXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBBZGQgYSByYW5nZS4gUmFuZ2VzIHNob3VsZCBiZSBhZGRlZCBpbiBzb3J0ZWQgKGJ5IGBmcm9tYCBhbmRcbiAgICBgdmFsdWUuc3RhcnRTaWRlYCkgb3JkZXIuXG4gICAgKi9cbiAgICBhZGQoZnJvbSwgdG8sIHZhbHVlKSB7XG4gICAgICAgIGlmICghdGhpcy5hZGRJbm5lcihmcm9tLCB0bywgdmFsdWUpKVxuICAgICAgICAgICAgKHRoaXMubmV4dExheWVyIHx8ICh0aGlzLm5leHRMYXllciA9IG5ldyBSYW5nZVNldEJ1aWxkZXIpKS5hZGQoZnJvbSwgdG8sIHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBhZGRJbm5lcihmcm9tLCB0bywgdmFsdWUpIHtcbiAgICAgICAgbGV0IGRpZmYgPSBmcm9tIC0gdGhpcy5sYXN0VG8gfHwgdmFsdWUuc3RhcnRTaWRlIC0gdGhpcy5sYXN0LmVuZFNpZGU7XG4gICAgICAgIGlmIChkaWZmIDw9IDAgJiYgKGZyb20gLSB0aGlzLmxhc3RGcm9tIHx8IHZhbHVlLnN0YXJ0U2lkZSAtIHRoaXMubGFzdC5zdGFydFNpZGUpIDwgMClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJhbmdlcyBtdXN0IGJlIGFkZGVkIHNvcnRlZCBieSBgZnJvbWAgcG9zaXRpb24gYW5kIGBzdGFydFNpZGVgXCIpO1xuICAgICAgICBpZiAoZGlmZiA8IDApXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLmZyb20ubGVuZ3RoID09IDI1MCAvKiBDLkNodW5rU2l6ZSAqLylcbiAgICAgICAgICAgIHRoaXMuZmluaXNoQ2h1bmsodHJ1ZSk7XG4gICAgICAgIGlmICh0aGlzLmNodW5rU3RhcnQgPCAwKVxuICAgICAgICAgICAgdGhpcy5jaHVua1N0YXJ0ID0gZnJvbTtcbiAgICAgICAgdGhpcy5mcm9tLnB1c2goZnJvbSAtIHRoaXMuY2h1bmtTdGFydCk7XG4gICAgICAgIHRoaXMudG8ucHVzaCh0byAtIHRoaXMuY2h1bmtTdGFydCk7XG4gICAgICAgIHRoaXMubGFzdCA9IHZhbHVlO1xuICAgICAgICB0aGlzLmxhc3RGcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy5sYXN0VG8gPSB0bztcbiAgICAgICAgdGhpcy52YWx1ZS5wdXNoKHZhbHVlKTtcbiAgICAgICAgaWYgKHZhbHVlLnBvaW50KVxuICAgICAgICAgICAgdGhpcy5tYXhQb2ludCA9IE1hdGgubWF4KHRoaXMubWF4UG9pbnQsIHRvIC0gZnJvbSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGFkZENodW5rKGZyb20sIGNodW5rKSB7XG4gICAgICAgIGlmICgoZnJvbSAtIHRoaXMubGFzdFRvIHx8IGNodW5rLnZhbHVlWzBdLnN0YXJ0U2lkZSAtIHRoaXMubGFzdC5lbmRTaWRlKSA8IDApXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLmZyb20ubGVuZ3RoKVxuICAgICAgICAgICAgdGhpcy5maW5pc2hDaHVuayh0cnVlKTtcbiAgICAgICAgdGhpcy5zZXRNYXhQb2ludCA9IE1hdGgubWF4KHRoaXMuc2V0TWF4UG9pbnQsIGNodW5rLm1heFBvaW50KTtcbiAgICAgICAgdGhpcy5jaHVua3MucHVzaChjaHVuayk7XG4gICAgICAgIHRoaXMuY2h1bmtQb3MucHVzaChmcm9tKTtcbiAgICAgICAgbGV0IGxhc3QgPSBjaHVuay52YWx1ZS5sZW5ndGggLSAxO1xuICAgICAgICB0aGlzLmxhc3QgPSBjaHVuay52YWx1ZVtsYXN0XTtcbiAgICAgICAgdGhpcy5sYXN0RnJvbSA9IGNodW5rLmZyb21bbGFzdF0gKyBmcm9tO1xuICAgICAgICB0aGlzLmxhc3RUbyA9IGNodW5rLnRvW2xhc3RdICsgZnJvbTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgIEZpbmlzaCB0aGUgcmFuZ2Ugc2V0LiBSZXR1cm5zIHRoZSBuZXcgc2V0LiBUaGUgYnVpbGRlciBjYW4ndCBiZVxuICAgIHVzZWQgYW55bW9yZSBhZnRlciB0aGlzIGhhcyBiZWVuIGNhbGxlZC5cbiAgICAqL1xuICAgIGZpbmlzaCgpIHsgcmV0dXJuIHRoaXMuZmluaXNoSW5uZXIoUmFuZ2VTZXQuZW1wdHkpOyB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBmaW5pc2hJbm5lcihuZXh0KSB7XG4gICAgICAgIGlmICh0aGlzLmZyb20ubGVuZ3RoKVxuICAgICAgICAgICAgdGhpcy5maW5pc2hDaHVuayhmYWxzZSk7XG4gICAgICAgIGlmICh0aGlzLmNodW5rcy5sZW5ndGggPT0gMClcbiAgICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICBsZXQgcmVzdWx0ID0gUmFuZ2VTZXQuY3JlYXRlKHRoaXMuY2h1bmtQb3MsIHRoaXMuY2h1bmtzLCB0aGlzLm5leHRMYXllciA/IHRoaXMubmV4dExheWVyLmZpbmlzaElubmVyKG5leHQpIDogbmV4dCwgdGhpcy5zZXRNYXhQb2ludCk7XG4gICAgICAgIHRoaXMuZnJvbSA9IG51bGw7IC8vIE1ha2Ugc3VyZSBmdXJ0aGVyIGBhZGRgIGNhbGxzIHByb2R1Y2UgZXJyb3JzXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuZnVuY3Rpb24gZmluZFNoYXJlZENodW5rcyhhLCBiLCB0ZXh0RGlmZikge1xuICAgIGxldCBpbkEgPSBuZXcgTWFwKCk7XG4gICAgZm9yIChsZXQgc2V0IG9mIGEpXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2V0LmNodW5rLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgaWYgKHNldC5jaHVua1tpXS5tYXhQb2ludCA8PSAwKVxuICAgICAgICAgICAgICAgIGluQS5zZXQoc2V0LmNodW5rW2ldLCBzZXQuY2h1bmtQb3NbaV0pO1xuICAgIGxldCBzaGFyZWQgPSBuZXcgU2V0KCk7XG4gICAgZm9yIChsZXQgc2V0IG9mIGIpXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2V0LmNodW5rLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQga25vd24gPSBpbkEuZ2V0KHNldC5jaHVua1tpXSk7XG4gICAgICAgICAgICBpZiAoa25vd24gIT0gbnVsbCAmJiAodGV4dERpZmYgPyB0ZXh0RGlmZi5tYXBQb3Moa25vd24pIDoga25vd24pID09IHNldC5jaHVua1Bvc1tpXSAmJlxuICAgICAgICAgICAgICAgICEodGV4dERpZmYgPT09IG51bGwgfHwgdGV4dERpZmYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRleHREaWZmLnRvdWNoZXNSYW5nZShrbm93biwga25vd24gKyBzZXQuY2h1bmtbaV0ubGVuZ3RoKSkpXG4gICAgICAgICAgICAgICAgc2hhcmVkLmFkZChzZXQuY2h1bmtbaV0pO1xuICAgICAgICB9XG4gICAgcmV0dXJuIHNoYXJlZDtcbn1cbmNsYXNzIExheWVyQ3Vyc29yIHtcbiAgICBjb25zdHJ1Y3RvcihsYXllciwgc2tpcCwgbWluUG9pbnQsIHJhbmsgPSAwKSB7XG4gICAgICAgIHRoaXMubGF5ZXIgPSBsYXllcjtcbiAgICAgICAgdGhpcy5za2lwID0gc2tpcDtcbiAgICAgICAgdGhpcy5taW5Qb2ludCA9IG1pblBvaW50O1xuICAgICAgICB0aGlzLnJhbmsgPSByYW5rO1xuICAgIH1cbiAgICBnZXQgc3RhcnRTaWRlKCkgeyByZXR1cm4gdGhpcy52YWx1ZSA/IHRoaXMudmFsdWUuc3RhcnRTaWRlIDogMDsgfVxuICAgIGdldCBlbmRTaWRlKCkgeyByZXR1cm4gdGhpcy52YWx1ZSA/IHRoaXMudmFsdWUuZW5kU2lkZSA6IDA7IH1cbiAgICBnb3RvKHBvcywgc2lkZSA9IC0xMDAwMDAwMDAwIC8qIEMuRmFyICovKSB7XG4gICAgICAgIHRoaXMuY2h1bmtJbmRleCA9IHRoaXMucmFuZ2VJbmRleCA9IDA7XG4gICAgICAgIHRoaXMuZ290b0lubmVyKHBvcywgc2lkZSwgZmFsc2UpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZ290b0lubmVyKHBvcywgc2lkZSwgZm9yd2FyZCkge1xuICAgICAgICB3aGlsZSAodGhpcy5jaHVua0luZGV4IDwgdGhpcy5sYXllci5jaHVuay5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxldCBuZXh0ID0gdGhpcy5sYXllci5jaHVua1t0aGlzLmNodW5rSW5kZXhdO1xuICAgICAgICAgICAgaWYgKCEodGhpcy5za2lwICYmIHRoaXMuc2tpcC5oYXMobmV4dCkgfHxcbiAgICAgICAgICAgICAgICB0aGlzLmxheWVyLmNodW5rRW5kKHRoaXMuY2h1bmtJbmRleCkgPCBwb3MgfHxcbiAgICAgICAgICAgICAgICBuZXh0Lm1heFBvaW50IDwgdGhpcy5taW5Qb2ludCkpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB0aGlzLmNodW5rSW5kZXgrKztcbiAgICAgICAgICAgIGZvcndhcmQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jaHVua0luZGV4IDwgdGhpcy5sYXllci5jaHVuay5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxldCByYW5nZUluZGV4ID0gdGhpcy5sYXllci5jaHVua1t0aGlzLmNodW5rSW5kZXhdLmZpbmRJbmRleChwb3MgLSB0aGlzLmxheWVyLmNodW5rUG9zW3RoaXMuY2h1bmtJbmRleF0sIHNpZGUsIHRydWUpO1xuICAgICAgICAgICAgaWYgKCFmb3J3YXJkIHx8IHRoaXMucmFuZ2VJbmRleCA8IHJhbmdlSW5kZXgpXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRSYW5nZUluZGV4KHJhbmdlSW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmV4dCgpO1xuICAgIH1cbiAgICBmb3J3YXJkKHBvcywgc2lkZSkge1xuICAgICAgICBpZiAoKHRoaXMudG8gLSBwb3MgfHwgdGhpcy5lbmRTaWRlIC0gc2lkZSkgPCAwKVxuICAgICAgICAgICAgdGhpcy5nb3RvSW5uZXIocG9zLCBzaWRlLCB0cnVlKTtcbiAgICB9XG4gICAgbmV4dCgpIHtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgaWYgKHRoaXMuY2h1bmtJbmRleCA9PSB0aGlzLmxheWVyLmNodW5rLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZnJvbSA9IHRoaXMudG8gPSAxMDAwMDAwMDAwIC8qIEMuRmFyICovO1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGNodW5rUG9zID0gdGhpcy5sYXllci5jaHVua1Bvc1t0aGlzLmNodW5rSW5kZXhdLCBjaHVuayA9IHRoaXMubGF5ZXIuY2h1bmtbdGhpcy5jaHVua0luZGV4XTtcbiAgICAgICAgICAgICAgICBsZXQgZnJvbSA9IGNodW5rUG9zICsgY2h1bmsuZnJvbVt0aGlzLnJhbmdlSW5kZXhdO1xuICAgICAgICAgICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgICAgICAgICAgdGhpcy50byA9IGNodW5rUG9zICsgY2h1bmsudG9bdGhpcy5yYW5nZUluZGV4XTtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gY2h1bmsudmFsdWVbdGhpcy5yYW5nZUluZGV4XTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFJhbmdlSW5kZXgodGhpcy5yYW5nZUluZGV4ICsgMSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubWluUG9pbnQgPCAwIHx8IHRoaXMudmFsdWUucG9pbnQgJiYgdGhpcy50byAtIHRoaXMuZnJvbSA+PSB0aGlzLm1pblBvaW50KVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRSYW5nZUluZGV4KGluZGV4KSB7XG4gICAgICAgIGlmIChpbmRleCA9PSB0aGlzLmxheWVyLmNodW5rW3RoaXMuY2h1bmtJbmRleF0udmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmNodW5rSW5kZXgrKztcbiAgICAgICAgICAgIGlmICh0aGlzLnNraXApIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAodGhpcy5jaHVua0luZGV4IDwgdGhpcy5sYXllci5jaHVuay5sZW5ndGggJiYgdGhpcy5za2lwLmhhcyh0aGlzLmxheWVyLmNodW5rW3RoaXMuY2h1bmtJbmRleF0pKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNodW5rSW5kZXgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmFuZ2VJbmRleCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJhbmdlSW5kZXggPSBpbmRleDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBuZXh0Q2h1bmsoKSB7XG4gICAgICAgIHRoaXMuY2h1bmtJbmRleCsrO1xuICAgICAgICB0aGlzLnJhbmdlSW5kZXggPSAwO1xuICAgICAgICB0aGlzLm5leHQoKTtcbiAgICB9XG4gICAgY29tcGFyZShvdGhlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5mcm9tIC0gb3RoZXIuZnJvbSB8fCB0aGlzLnN0YXJ0U2lkZSAtIG90aGVyLnN0YXJ0U2lkZSB8fCB0aGlzLnJhbmsgLSBvdGhlci5yYW5rIHx8XG4gICAgICAgICAgICB0aGlzLnRvIC0gb3RoZXIudG8gfHwgdGhpcy5lbmRTaWRlIC0gb3RoZXIuZW5kU2lkZTtcbiAgICB9XG59XG5jbGFzcyBIZWFwQ3Vyc29yIHtcbiAgICBjb25zdHJ1Y3RvcihoZWFwKSB7XG4gICAgICAgIHRoaXMuaGVhcCA9IGhlYXA7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tKHNldHMsIHNraXAgPSBudWxsLCBtaW5Qb2ludCA9IC0xKSB7XG4gICAgICAgIGxldCBoZWFwID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgY3VyID0gc2V0c1tpXTsgIWN1ci5pc0VtcHR5OyBjdXIgPSBjdXIubmV4dExheWVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGN1ci5tYXhQb2ludCA+PSBtaW5Qb2ludClcbiAgICAgICAgICAgICAgICAgICAgaGVhcC5wdXNoKG5ldyBMYXllckN1cnNvcihjdXIsIHNraXAsIG1pblBvaW50LCBpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhlYXAubGVuZ3RoID09IDEgPyBoZWFwWzBdIDogbmV3IEhlYXBDdXJzb3IoaGVhcCk7XG4gICAgfVxuICAgIGdldCBzdGFydFNpZGUoKSB7IHJldHVybiB0aGlzLnZhbHVlID8gdGhpcy52YWx1ZS5zdGFydFNpZGUgOiAwOyB9XG4gICAgZ290byhwb3MsIHNpZGUgPSAtMTAwMDAwMDAwMCAvKiBDLkZhciAqLykge1xuICAgICAgICBmb3IgKGxldCBjdXIgb2YgdGhpcy5oZWFwKVxuICAgICAgICAgICAgY3VyLmdvdG8ocG9zLCBzaWRlKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuaGVhcC5sZW5ndGggPj4gMTsgaSA+PSAwOyBpLS0pXG4gICAgICAgICAgICBoZWFwQnViYmxlKHRoaXMuaGVhcCwgaSk7XG4gICAgICAgIHRoaXMubmV4dCgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZm9yd2FyZChwb3MsIHNpZGUpIHtcbiAgICAgICAgZm9yIChsZXQgY3VyIG9mIHRoaXMuaGVhcClcbiAgICAgICAgICAgIGN1ci5mb3J3YXJkKHBvcywgc2lkZSk7XG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLmhlYXAubGVuZ3RoID4+IDE7IGkgPj0gMDsgaS0tKVxuICAgICAgICAgICAgaGVhcEJ1YmJsZSh0aGlzLmhlYXAsIGkpO1xuICAgICAgICBpZiAoKHRoaXMudG8gLSBwb3MgfHwgdGhpcy52YWx1ZS5lbmRTaWRlIC0gc2lkZSkgPCAwKVxuICAgICAgICAgICAgdGhpcy5uZXh0KCk7XG4gICAgfVxuICAgIG5leHQoKSB7XG4gICAgICAgIGlmICh0aGlzLmhlYXAubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbSA9IHRoaXMudG8gPSAxMDAwMDAwMDAwIC8qIEMuRmFyICovO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnJhbmsgPSAtMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCB0b3AgPSB0aGlzLmhlYXBbMF07XG4gICAgICAgICAgICB0aGlzLmZyb20gPSB0b3AuZnJvbTtcbiAgICAgICAgICAgIHRoaXMudG8gPSB0b3AudG87XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdG9wLnZhbHVlO1xuICAgICAgICAgICAgdGhpcy5yYW5rID0gdG9wLnJhbms7XG4gICAgICAgICAgICBpZiAodG9wLnZhbHVlKVxuICAgICAgICAgICAgICAgIHRvcC5uZXh0KCk7XG4gICAgICAgICAgICBoZWFwQnViYmxlKHRoaXMuaGVhcCwgMCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBoZWFwQnViYmxlKGhlYXAsIGluZGV4KSB7XG4gICAgZm9yIChsZXQgY3VyID0gaGVhcFtpbmRleF07Oykge1xuICAgICAgICBsZXQgY2hpbGRJbmRleCA9IChpbmRleCA8PCAxKSArIDE7XG4gICAgICAgIGlmIChjaGlsZEluZGV4ID49IGhlYXAubGVuZ3RoKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGxldCBjaGlsZCA9IGhlYXBbY2hpbGRJbmRleF07XG4gICAgICAgIGlmIChjaGlsZEluZGV4ICsgMSA8IGhlYXAubGVuZ3RoICYmIGNoaWxkLmNvbXBhcmUoaGVhcFtjaGlsZEluZGV4ICsgMV0pID49IDApIHtcbiAgICAgICAgICAgIGNoaWxkID0gaGVhcFtjaGlsZEluZGV4ICsgMV07XG4gICAgICAgICAgICBjaGlsZEluZGV4Kys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN1ci5jb21wYXJlKGNoaWxkKSA8IDApXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgaGVhcFtjaGlsZEluZGV4XSA9IGN1cjtcbiAgICAgICAgaGVhcFtpbmRleF0gPSBjaGlsZDtcbiAgICAgICAgaW5kZXggPSBjaGlsZEluZGV4O1xuICAgIH1cbn1cbmNsYXNzIFNwYW5DdXJzb3Ige1xuICAgIGNvbnN0cnVjdG9yKHNldHMsIHNraXAsIG1pblBvaW50KSB7XG4gICAgICAgIHRoaXMubWluUG9pbnQgPSBtaW5Qb2ludDtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSBbXTtcbiAgICAgICAgdGhpcy5hY3RpdmVUbyA9IFtdO1xuICAgICAgICB0aGlzLmFjdGl2ZVJhbmsgPSBbXTtcbiAgICAgICAgdGhpcy5taW5BY3RpdmUgPSAtMTtcbiAgICAgICAgLy8gQSBjdXJyZW50bHkgYWN0aXZlIHBvaW50IHJhbmdlLCBpZiBhbnlcbiAgICAgICAgdGhpcy5wb2ludCA9IG51bGw7XG4gICAgICAgIHRoaXMucG9pbnRGcm9tID0gMDtcbiAgICAgICAgdGhpcy5wb2ludFJhbmsgPSAwO1xuICAgICAgICB0aGlzLnRvID0gLTEwMDAwMDAwMDAgLyogQy5GYXIgKi87XG4gICAgICAgIHRoaXMuZW5kU2lkZSA9IDA7XG4gICAgICAgIHRoaXMub3BlblN0YXJ0ID0gLTE7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gSGVhcEN1cnNvci5mcm9tKHNldHMsIHNraXAsIG1pblBvaW50KTtcbiAgICB9XG4gICAgZ290byhwb3MsIHNpZGUgPSAtMTAwMDAwMDAwMCAvKiBDLkZhciAqLykge1xuICAgICAgICB0aGlzLmN1cnNvci5nb3RvKHBvcywgc2lkZSk7XG4gICAgICAgIHRoaXMuYWN0aXZlLmxlbmd0aCA9IHRoaXMuYWN0aXZlVG8ubGVuZ3RoID0gdGhpcy5hY3RpdmVSYW5rLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMubWluQWN0aXZlID0gLTE7XG4gICAgICAgIHRoaXMudG8gPSBwb3M7XG4gICAgICAgIHRoaXMuZW5kU2lkZSA9IHNpZGU7XG4gICAgICAgIHRoaXMub3BlblN0YXJ0ID0gLTE7XG4gICAgICAgIHRoaXMubmV4dCgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZm9yd2FyZChwb3MsIHNpZGUpIHtcbiAgICAgICAgd2hpbGUgKHRoaXMubWluQWN0aXZlID4gLTEgJiYgKHRoaXMuYWN0aXZlVG9bdGhpcy5taW5BY3RpdmVdIC0gcG9zIHx8IHRoaXMuYWN0aXZlW3RoaXMubWluQWN0aXZlXS5lbmRTaWRlIC0gc2lkZSkgPCAwKVxuICAgICAgICAgICAgdGhpcy5yZW1vdmVBY3RpdmUodGhpcy5taW5BY3RpdmUpO1xuICAgICAgICB0aGlzLmN1cnNvci5mb3J3YXJkKHBvcywgc2lkZSk7XG4gICAgfVxuICAgIHJlbW92ZUFjdGl2ZShpbmRleCkge1xuICAgICAgICByZW1vdmUodGhpcy5hY3RpdmUsIGluZGV4KTtcbiAgICAgICAgcmVtb3ZlKHRoaXMuYWN0aXZlVG8sIGluZGV4KTtcbiAgICAgICAgcmVtb3ZlKHRoaXMuYWN0aXZlUmFuaywgaW5kZXgpO1xuICAgICAgICB0aGlzLm1pbkFjdGl2ZSA9IGZpbmRNaW5JbmRleCh0aGlzLmFjdGl2ZSwgdGhpcy5hY3RpdmVUbyk7XG4gICAgfVxuICAgIGFkZEFjdGl2ZSh0cmFja09wZW4pIHtcbiAgICAgICAgbGV0IGkgPSAwLCB7IHZhbHVlLCB0bywgcmFuayB9ID0gdGhpcy5jdXJzb3I7XG4gICAgICAgIHdoaWxlIChpIDwgdGhpcy5hY3RpdmVSYW5rLmxlbmd0aCAmJiB0aGlzLmFjdGl2ZVJhbmtbaV0gPD0gcmFuaylcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgaW5zZXJ0KHRoaXMuYWN0aXZlLCBpLCB2YWx1ZSk7XG4gICAgICAgIGluc2VydCh0aGlzLmFjdGl2ZVRvLCBpLCB0byk7XG4gICAgICAgIGluc2VydCh0aGlzLmFjdGl2ZVJhbmssIGksIHJhbmspO1xuICAgICAgICBpZiAodHJhY2tPcGVuKVxuICAgICAgICAgICAgaW5zZXJ0KHRyYWNrT3BlbiwgaSwgdGhpcy5jdXJzb3IuZnJvbSk7XG4gICAgICAgIHRoaXMubWluQWN0aXZlID0gZmluZE1pbkluZGV4KHRoaXMuYWN0aXZlLCB0aGlzLmFjdGl2ZVRvKTtcbiAgICB9XG4gICAgLy8gQWZ0ZXIgY2FsbGluZyB0aGlzLCBpZiBgdGhpcy5wb2ludGAgIT0gbnVsbCwgdGhlIG5leHQgcmFuZ2UgaXMgYVxuICAgIC8vIHBvaW50LiBPdGhlcndpc2UsIGl0J3MgYSByZWd1bGFyIHJhbmdlLCBjb3ZlcmVkIGJ5IGB0aGlzLmFjdGl2ZWAuXG4gICAgbmV4dCgpIHtcbiAgICAgICAgbGV0IGZyb20gPSB0aGlzLnRvLCB3YXNQb2ludCA9IHRoaXMucG9pbnQ7XG4gICAgICAgIHRoaXMucG9pbnQgPSBudWxsO1xuICAgICAgICBsZXQgdHJhY2tPcGVuID0gdGhpcy5vcGVuU3RhcnQgPCAwID8gW10gOiBudWxsLCB0cmFja0V4dHJhID0gMDtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgbGV0IGEgPSB0aGlzLm1pbkFjdGl2ZTtcbiAgICAgICAgICAgIGlmIChhID4gLTEgJiYgKHRoaXMuYWN0aXZlVG9bYV0gLSB0aGlzLmN1cnNvci5mcm9tIHx8IHRoaXMuYWN0aXZlW2FdLmVuZFNpZGUgLSB0aGlzLmN1cnNvci5zdGFydFNpZGUpIDwgMCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZVRvW2FdID4gZnJvbSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvID0gdGhpcy5hY3RpdmVUb1thXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmRTaWRlID0gdGhpcy5hY3RpdmVbYV0uZW5kU2lkZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQWN0aXZlKGEpO1xuICAgICAgICAgICAgICAgIGlmICh0cmFja09wZW4pXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZSh0cmFja09wZW4sIGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIXRoaXMuY3Vyc29yLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50byA9IHRoaXMuZW5kU2lkZSA9IDEwMDAwMDAwMDAgLyogQy5GYXIgKi87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmN1cnNvci5mcm9tID4gZnJvbSkge1xuICAgICAgICAgICAgICAgIHRoaXMudG8gPSB0aGlzLmN1cnNvci5mcm9tO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5kU2lkZSA9IHRoaXMuY3Vyc29yLnN0YXJ0U2lkZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBuZXh0VmFsID0gdGhpcy5jdXJzb3IudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKCFuZXh0VmFsLnBvaW50KSB7IC8vIE9wZW5pbmcgYSByYW5nZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEFjdGl2ZSh0cmFja09wZW4pO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJzb3IuZnJvbSA8IGZyb20gJiYgdGhpcy5jdXJzb3IudG8gPiBmcm9tKVxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2tFeHRyYSsrO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnNvci5uZXh0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHdhc1BvaW50ICYmIHRoaXMuY3Vyc29yLnRvID09IHRoaXMudG8gJiYgdGhpcy5jdXJzb3IuZnJvbSA8IHRoaXMuY3Vyc29yLnRvKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElnbm9yZSBhbnkgbm9uLWVtcHR5IHBvaW50cyB0aGF0IGVuZCBwcmVjaXNlbHkgYXQgdGhlIGVuZCBvZiB0aGUgcHJldiBwb2ludFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnNvci5uZXh0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBOZXcgcG9pbnRcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb2ludCA9IG5leHRWYWw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9pbnRGcm9tID0gdGhpcy5jdXJzb3IuZnJvbTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb2ludFJhbmsgPSB0aGlzLmN1cnNvci5yYW5rO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvID0gdGhpcy5jdXJzb3IudG87XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kU2lkZSA9IG5leHRWYWwuZW5kU2lkZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY3Vyc29yLmZyb20gPCBmcm9tKVxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2tFeHRyYSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3Vyc29yLm5leHQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3J3YXJkKHRoaXMudG8sIHRoaXMuZW5kU2lkZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhY2tPcGVuKSB7XG4gICAgICAgICAgICBsZXQgb3BlblN0YXJ0ID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChvcGVuU3RhcnQgPCB0cmFja09wZW4ubGVuZ3RoICYmIHRyYWNrT3BlbltvcGVuU3RhcnRdIDwgZnJvbSlcbiAgICAgICAgICAgICAgICBvcGVuU3RhcnQrKztcbiAgICAgICAgICAgIHRoaXMub3BlblN0YXJ0ID0gb3BlblN0YXJ0ICsgdHJhY2tFeHRyYTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhY3RpdmVGb3JQb2ludCh0bykge1xuICAgICAgICBpZiAoIXRoaXMuYWN0aXZlLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFjdGl2ZTtcbiAgICAgICAgbGV0IGFjdGl2ZSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5hY3RpdmUubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZVJhbmtbaV0gPCB0aGlzLnBvaW50UmFuaylcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZVRvW2ldID4gdG8gfHwgdGhpcy5hY3RpdmVUb1tpXSA9PSB0byAmJiB0aGlzLmFjdGl2ZVtpXS5lbmRTaWRlID49IHRoaXMucG9pbnQuZW5kU2lkZSlcbiAgICAgICAgICAgICAgICBhY3RpdmUucHVzaCh0aGlzLmFjdGl2ZVtpXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFjdGl2ZS5yZXZlcnNlKCk7XG4gICAgfVxuICAgIG9wZW5FbmQodG8pIHtcbiAgICAgICAgbGV0IG9wZW4gPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5hY3RpdmVUby5sZW5ndGggLSAxOyBpID49IDAgJiYgdGhpcy5hY3RpdmVUb1tpXSA+IHRvOyBpLS0pXG4gICAgICAgICAgICBvcGVuKys7XG4gICAgICAgIHJldHVybiBvcGVuO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNvbXBhcmUoYSwgc3RhcnRBLCBiLCBzdGFydEIsIGxlbmd0aCwgY29tcGFyYXRvcikge1xuICAgIGEuZ290byhzdGFydEEpO1xuICAgIGIuZ290byhzdGFydEIpO1xuICAgIGxldCBlbmRCID0gc3RhcnRCICsgbGVuZ3RoO1xuICAgIGxldCBwb3MgPSBzdGFydEIsIGRQb3MgPSBzdGFydEIgLSBzdGFydEE7XG4gICAgZm9yICg7Oykge1xuICAgICAgICBsZXQgZGlmZiA9IChhLnRvICsgZFBvcykgLSBiLnRvIHx8IGEuZW5kU2lkZSAtIGIuZW5kU2lkZTtcbiAgICAgICAgbGV0IGVuZCA9IGRpZmYgPCAwID8gYS50byArIGRQb3MgOiBiLnRvLCBjbGlwRW5kID0gTWF0aC5taW4oZW5kLCBlbmRCKTtcbiAgICAgICAgaWYgKGEucG9pbnQgfHwgYi5wb2ludCkge1xuICAgICAgICAgICAgaWYgKCEoYS5wb2ludCAmJiBiLnBvaW50ICYmIChhLnBvaW50ID09IGIucG9pbnQgfHwgYS5wb2ludC5lcShiLnBvaW50KSkgJiZcbiAgICAgICAgICAgICAgICBzYW1lVmFsdWVzKGEuYWN0aXZlRm9yUG9pbnQoYS50byArIGRQb3MpLCBiLmFjdGl2ZUZvclBvaW50KGIudG8pKSkpXG4gICAgICAgICAgICAgICAgY29tcGFyYXRvci5jb21wYXJlUG9pbnQocG9zLCBjbGlwRW5kLCBhLnBvaW50LCBiLnBvaW50KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChjbGlwRW5kID4gcG9zICYmICFzYW1lVmFsdWVzKGEuYWN0aXZlLCBiLmFjdGl2ZSkpXG4gICAgICAgICAgICAgICAgY29tcGFyYXRvci5jb21wYXJlUmFuZ2UocG9zLCBjbGlwRW5kLCBhLmFjdGl2ZSwgYi5hY3RpdmUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbmQgPiBlbmRCKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIHBvcyA9IGVuZDtcbiAgICAgICAgaWYgKGRpZmYgPD0gMClcbiAgICAgICAgICAgIGEubmV4dCgpO1xuICAgICAgICBpZiAoZGlmZiA+PSAwKVxuICAgICAgICAgICAgYi5uZXh0KCk7XG4gICAgfVxufVxuZnVuY3Rpb24gc2FtZVZhbHVlcyhhLCBiKSB7XG4gICAgaWYgKGEubGVuZ3RoICE9IGIubGVuZ3RoKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKVxuICAgICAgICBpZiAoYVtpXSAhPSBiW2ldICYmICFhW2ldLmVxKGJbaV0pKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gcmVtb3ZlKGFycmF5LCBpbmRleCkge1xuICAgIGZvciAobGV0IGkgPSBpbmRleCwgZSA9IGFycmF5Lmxlbmd0aCAtIDE7IGkgPCBlOyBpKyspXG4gICAgICAgIGFycmF5W2ldID0gYXJyYXlbaSArIDFdO1xuICAgIGFycmF5LnBvcCgpO1xufVxuZnVuY3Rpb24gaW5zZXJ0KGFycmF5LCBpbmRleCwgdmFsdWUpIHtcbiAgICBmb3IgKGxldCBpID0gYXJyYXkubGVuZ3RoIC0gMTsgaSA+PSBpbmRleDsgaS0tKVxuICAgICAgICBhcnJheVtpICsgMV0gPSBhcnJheVtpXTtcbiAgICBhcnJheVtpbmRleF0gPSB2YWx1ZTtcbn1cbmZ1bmN0aW9uIGZpbmRNaW5JbmRleCh2YWx1ZSwgYXJyYXkpIHtcbiAgICBsZXQgZm91bmQgPSAtMSwgZm91bmRQb3MgPSAxMDAwMDAwMDAwIC8qIEMuRmFyICovO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspXG4gICAgICAgIGlmICgoYXJyYXlbaV0gLSBmb3VuZFBvcyB8fCB2YWx1ZVtpXS5lbmRTaWRlIC0gdmFsdWVbZm91bmRdLmVuZFNpZGUpIDwgMCkge1xuICAgICAgICAgICAgZm91bmQgPSBpO1xuICAgICAgICAgICAgZm91bmRQb3MgPSBhcnJheVtpXTtcbiAgICAgICAgfVxuICAgIHJldHVybiBmb3VuZDtcbn1cblxuLyoqXG5Db3VudCB0aGUgY29sdW1uIHBvc2l0aW9uIGF0IHRoZSBnaXZlbiBvZmZzZXQgaW50byB0aGUgc3RyaW5nLFxudGFraW5nIGV4dGVuZGluZyBjaGFyYWN0ZXJzIGFuZCB0YWIgc2l6ZSBpbnRvIGFjY291bnQuXG4qL1xuZnVuY3Rpb24gY291bnRDb2x1bW4oc3RyaW5nLCB0YWJTaXplLCB0byA9IHN0cmluZy5sZW5ndGgpIHtcbiAgICBsZXQgbiA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0bzspIHtcbiAgICAgICAgaWYgKHN0cmluZy5jaGFyQ29kZUF0KGkpID09IDkpIHtcbiAgICAgICAgICAgIG4gKz0gdGFiU2l6ZSAtIChuICUgdGFiU2l6ZSk7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBuKys7XG4gICAgICAgICAgICBpID0gZmluZENsdXN0ZXJCcmVhayhzdHJpbmcsIGkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuO1xufVxuLyoqXG5GaW5kIHRoZSBvZmZzZXQgdGhhdCBjb3JyZXNwb25kcyB0byB0aGUgZ2l2ZW4gY29sdW1uIHBvc2l0aW9uIGluIGFcbnN0cmluZywgdGFraW5nIGV4dGVuZGluZyBjaGFyYWN0ZXJzIGFuZCB0YWIgc2l6ZSBpbnRvIGFjY291bnQuIEJ5XG5kZWZhdWx0LCB0aGUgc3RyaW5nIGxlbmd0aCBpcyByZXR1cm5lZCB3aGVuIGl0IGlzIHRvbyBzaG9ydCB0b1xucmVhY2ggdGhlIGNvbHVtbi4gUGFzcyBgc3RyaWN0YCB0cnVlIHRvIG1ha2UgaXQgcmV0dXJuIC0xIGluIHRoYXRcbnNpdHVhdGlvbi5cbiovXG5mdW5jdGlvbiBmaW5kQ29sdW1uKHN0cmluZywgY29sLCB0YWJTaXplLCBzdHJpY3QpIHtcbiAgICBmb3IgKGxldCBpID0gMCwgbiA9IDA7Oykge1xuICAgICAgICBpZiAobiA+PSBjb2wpXG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgaWYgKGkgPT0gc3RyaW5nLmxlbmd0aClcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBuICs9IHN0cmluZy5jaGFyQ29kZUF0KGkpID09IDkgPyB0YWJTaXplIC0gKG4gJSB0YWJTaXplKSA6IDE7XG4gICAgICAgIGkgPSBmaW5kQ2x1c3RlckJyZWFrKHN0cmluZywgaSk7XG4gICAgfVxuICAgIHJldHVybiBzdHJpY3QgPT09IHRydWUgPyAtMSA6IHN0cmluZy5sZW5ndGg7XG59XG5cbmV4cG9ydCB7IEFubm90YXRpb24sIEFubm90YXRpb25UeXBlLCBDaGFuZ2VEZXNjLCBDaGFuZ2VTZXQsIENoYXJDYXRlZ29yeSwgQ29tcGFydG1lbnQsIEVkaXRvclNlbGVjdGlvbiwgRWRpdG9yU3RhdGUsIEZhY2V0LCBMaW5lLCBNYXBNb2RlLCBQcmVjLCBSYW5nZSwgUmFuZ2VTZXQsIFJhbmdlU2V0QnVpbGRlciwgUmFuZ2VWYWx1ZSwgU2VsZWN0aW9uUmFuZ2UsIFN0YXRlRWZmZWN0LCBTdGF0ZUVmZmVjdFR5cGUsIFN0YXRlRmllbGQsIFRleHQsIFRyYW5zYWN0aW9uLCBjb2RlUG9pbnRBdCwgY29kZVBvaW50U2l6ZSwgY29tYmluZUNvbmZpZywgY291bnRDb2x1bW4sIGZpbmRDbHVzdGVyQnJlYWssIGZpbmRDb2x1bW4sIGZyb21Db2RlUG9pbnQgfTtcbiIsICJjb25zdCBDID0gXCJcXHUwMzdjXCJcbmNvbnN0IENPVU5UID0gdHlwZW9mIFN5bWJvbCA9PSBcInVuZGVmaW5lZFwiID8gXCJfX1wiICsgQyA6IFN5bWJvbC5mb3IoQylcbmNvbnN0IFNFVCA9IHR5cGVvZiBTeW1ib2wgPT0gXCJ1bmRlZmluZWRcIiA/IFwiX19zdHlsZVNldFwiICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMWU4KSA6IFN5bWJvbChcInN0eWxlU2V0XCIpXG5jb25zdCB0b3AgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsVGhpcyA6IHR5cGVvZiB3aW5kb3cgIT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9XG5cbi8vIDo6IC0gU3R5bGUgbW9kdWxlcyBlbmNhcHN1bGF0ZSBhIHNldCBvZiBDU1MgcnVsZXMgZGVmaW5lZCBmcm9tXG4vLyBKYXZhU2NyaXB0LiBUaGVpciBkZWZpbml0aW9ucyBhcmUgb25seSBhdmFpbGFibGUgaW4gYSBnaXZlbiBET01cbi8vIHJvb3QgYWZ0ZXIgaXQgaGFzIGJlZW4gX21vdW50ZWRfIHRoZXJlIHdpdGggYFN0eWxlTW9kdWxlLm1vdW50YC5cbi8vXG4vLyBTdHlsZSBtb2R1bGVzIHNob3VsZCBiZSBjcmVhdGVkIG9uY2UgYW5kIHN0b3JlZCBzb21ld2hlcmUsIGFzXG4vLyBvcHBvc2VkIHRvIHJlLWNyZWF0aW5nIHRoZW0gZXZlcnkgdGltZSB5b3UgbmVlZCB0aGVtLiBUaGUgYW1vdW50IG9mXG4vLyBDU1MgcnVsZXMgZ2VuZXJhdGVkIGZvciBhIGdpdmVuIERPTSByb290IGlzIGJvdW5kZWQgYnkgdGhlIGFtb3VudFxuLy8gb2Ygc3R5bGUgbW9kdWxlcyB0aGF0IHdlcmUgdXNlZC4gU28gdG8gYXZvaWQgbGVha2luZyBydWxlcywgZG9uJ3Rcbi8vIGNyZWF0ZSB0aGVzZSBkeW5hbWljYWxseSwgYnV0IHRyZWF0IHRoZW0gYXMgb25lLXRpbWUgYWxsb2NhdGlvbnMuXG5leHBvcnQgY2xhc3MgU3R5bGVNb2R1bGUge1xuICAvLyA6OiAoT2JqZWN0PFN0eWxlPiwgP3tmaW5pc2g6ID8oc3RyaW5nKSBcdTIxOTIgc3RyaW5nfSlcbiAgLy8gQ3JlYXRlIGEgc3R5bGUgbW9kdWxlIGZyb20gdGhlIGdpdmVuIHNwZWMuXG4gIC8vXG4gIC8vIFdoZW4gYGZpbmlzaGAgaXMgZ2l2ZW4sIGl0IGlzIGNhbGxlZCBvbiByZWd1bGFyIChub24tYEBgKVxuICAvLyBzZWxlY3RvcnMgKGFmdGVyIGAmYCBleHBhbnNpb24pIHRvIGNvbXB1dGUgdGhlIGZpbmFsIHNlbGVjdG9yLlxuICBjb25zdHJ1Y3RvcihzcGVjLCBvcHRpb25zKSB7XG4gICAgdGhpcy5ydWxlcyA9IFtdXG4gICAgbGV0IHtmaW5pc2h9ID0gb3B0aW9ucyB8fCB7fVxuXG4gICAgZnVuY3Rpb24gc3BsaXRTZWxlY3RvcihzZWxlY3Rvcikge1xuICAgICAgcmV0dXJuIC9eQC8udGVzdChzZWxlY3RvcikgPyBbc2VsZWN0b3JdIDogc2VsZWN0b3Iuc3BsaXQoLyxcXHMqLylcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW5kZXIoc2VsZWN0b3JzLCBzcGVjLCB0YXJnZXQsIGlzS2V5ZnJhbWVzKSB7XG4gICAgICBsZXQgbG9jYWwgPSBbXSwgaXNBdCA9IC9eQChcXHcrKVxcYi8uZXhlYyhzZWxlY3RvcnNbMF0pLCBrZXlmcmFtZXMgPSBpc0F0ICYmIGlzQXRbMV0gPT0gXCJrZXlmcmFtZXNcIlxuICAgICAgaWYgKGlzQXQgJiYgc3BlYyA9PSBudWxsKSByZXR1cm4gdGFyZ2V0LnB1c2goc2VsZWN0b3JzWzBdICsgXCI7XCIpXG4gICAgICBmb3IgKGxldCBwcm9wIGluIHNwZWMpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gc3BlY1twcm9wXVxuICAgICAgICBpZiAoLyYvLnRlc3QocHJvcCkpIHtcbiAgICAgICAgICByZW5kZXIocHJvcC5zcGxpdCgvLFxccyovKS5tYXAocGFydCA9PiBzZWxlY3RvcnMubWFwKHNlbCA9PiBwYXJ0LnJlcGxhY2UoLyYvLCBzZWwpKSkucmVkdWNlKChhLCBiKSA9PiBhLmNvbmNhdChiKSksXG4gICAgICAgICAgICAgICAgIHZhbHVlLCB0YXJnZXQpXG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICBpZiAoIWlzQXQpIHRocm93IG5ldyBSYW5nZUVycm9yKFwiVGhlIHZhbHVlIG9mIGEgcHJvcGVydHkgKFwiICsgcHJvcCArIFwiKSBzaG91bGQgYmUgYSBwcmltaXRpdmUgdmFsdWUuXCIpXG4gICAgICAgICAgcmVuZGVyKHNwbGl0U2VsZWN0b3IocHJvcCksIHZhbHVlLCBsb2NhbCwga2V5ZnJhbWVzKVxuICAgICAgICB9IGVsc2UgaWYgKHZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgICBsb2NhbC5wdXNoKHByb3AucmVwbGFjZSgvXy4qLywgXCJcIikucmVwbGFjZSgvW0EtWl0vZywgbCA9PiBcIi1cIiArIGwudG9Mb3dlckNhc2UoKSkgKyBcIjogXCIgKyB2YWx1ZSArIFwiO1wiKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobG9jYWwubGVuZ3RoIHx8IGtleWZyYW1lcykge1xuICAgICAgICB0YXJnZXQucHVzaCgoZmluaXNoICYmICFpc0F0ICYmICFpc0tleWZyYW1lcyA/IHNlbGVjdG9ycy5tYXAoZmluaXNoKSA6IHNlbGVjdG9ycykuam9pbihcIiwgXCIpICtcbiAgICAgICAgICAgICAgICAgICAgXCIge1wiICsgbG9jYWwuam9pbihcIiBcIikgKyBcIn1cIilcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGxldCBwcm9wIGluIHNwZWMpIHJlbmRlcihzcGxpdFNlbGVjdG9yKHByb3ApLCBzcGVjW3Byb3BdLCB0aGlzLnJ1bGVzKVxuICB9XG5cbiAgLy8gOjogKCkgXHUyMTkyIHN0cmluZ1xuICAvLyBSZXR1cm5zIGEgc3RyaW5nIGNvbnRhaW5pbmcgdGhlIG1vZHVsZSdzIENTUyBydWxlcy5cbiAgZ2V0UnVsZXMoKSB7IHJldHVybiB0aGlzLnJ1bGVzLmpvaW4oXCJcXG5cIikgfVxuXG4gIC8vIDo6ICgpIFx1MjE5MiBzdHJpbmdcbiAgLy8gR2VuZXJhdGUgYSBuZXcgdW5pcXVlIENTUyBjbGFzcyBuYW1lLlxuICBzdGF0aWMgbmV3TmFtZSgpIHtcbiAgICBsZXQgaWQgPSB0b3BbQ09VTlRdIHx8IDFcbiAgICB0b3BbQ09VTlRdID0gaWQgKyAxXG4gICAgcmV0dXJuIEMgKyBpZC50b1N0cmluZygzNilcbiAgfVxuXG4gIC8vIDo6ICh1bmlvbjxEb2N1bWVudCwgU2hhZG93Um9vdD4sIHVuaW9uPFtTdHlsZU1vZHVsZV0sIFN0eWxlTW9kdWxlPilcbiAgLy9cbiAgLy8gTW91bnQgdGhlIGdpdmVuIHNldCBvZiBtb2R1bGVzIGluIHRoZSBnaXZlbiBET00gcm9vdCwgd2hpY2ggZW5zdXJlc1xuICAvLyB0aGF0IHRoZSBDU1MgcnVsZXMgZGVmaW5lZCBieSB0aGUgbW9kdWxlIGFyZSBhdmFpbGFibGUgaW4gdGhhdFxuICAvLyBjb250ZXh0LlxuICAvL1xuICAvLyBSdWxlcyBhcmUgb25seSBhZGRlZCB0byB0aGUgZG9jdW1lbnQgb25jZSBwZXIgcm9vdC5cbiAgLy9cbiAgLy8gUnVsZSBvcmRlciB3aWxsIGZvbGxvdyB0aGUgb3JkZXIgb2YgdGhlIG1vZHVsZXMsIHNvIHRoYXQgcnVsZXMgZnJvbVxuICAvLyBtb2R1bGVzIGxhdGVyIGluIHRoZSBhcnJheSB0YWtlIHByZWNlZGVuY2Ugb2YgdGhvc2UgZnJvbSBlYXJsaWVyXG4gIC8vIG1vZHVsZXMuIElmIHlvdSBjYWxsIHRoaXMgZnVuY3Rpb24gbXVsdGlwbGUgdGltZXMgZm9yIHRoZSBzYW1lIHJvb3RcbiAgLy8gaW4gYSB3YXkgdGhhdCBjaGFuZ2VzIHRoZSBvcmRlciBvZiBhbHJlYWR5IG1vdW50ZWQgbW9kdWxlcywgdGhlIG9sZFxuICAvLyBvcmRlciB3aWxsIGJlIGNoYW5nZWQuXG4gIHN0YXRpYyBtb3VudChyb290LCBtb2R1bGVzKSB7XG4gICAgKHJvb3RbU0VUXSB8fCBuZXcgU3R5bGVTZXQocm9vdCkpLm1vdW50KEFycmF5LmlzQXJyYXkobW9kdWxlcykgPyBtb2R1bGVzIDogW21vZHVsZXNdKVxuICB9XG59XG5cbmxldCBhZG9wdGVkU2V0ID0gbnVsbFxuXG5jbGFzcyBTdHlsZVNldCB7XG4gIGNvbnN0cnVjdG9yKHJvb3QpIHtcbiAgICBpZiAoIXJvb3QuaGVhZCAmJiByb290LmFkb3B0ZWRTdHlsZVNoZWV0cyAmJiB0eXBlb2YgQ1NTU3R5bGVTaGVldCAhPSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBpZiAoYWRvcHRlZFNldCkge1xuICAgICAgICByb290LmFkb3B0ZWRTdHlsZVNoZWV0cyA9IFthZG9wdGVkU2V0LnNoZWV0XS5jb25jYXQocm9vdC5hZG9wdGVkU3R5bGVTaGVldHMpXG4gICAgICAgIHJldHVybiByb290W1NFVF0gPSBhZG9wdGVkU2V0XG4gICAgICB9XG4gICAgICB0aGlzLnNoZWV0ID0gbmV3IENTU1N0eWxlU2hlZXRcbiAgICAgIHJvb3QuYWRvcHRlZFN0eWxlU2hlZXRzID0gW3RoaXMuc2hlZXRdLmNvbmNhdChyb290LmFkb3B0ZWRTdHlsZVNoZWV0cylcbiAgICAgIGFkb3B0ZWRTZXQgPSB0aGlzXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3R5bGVUYWcgPSAocm9vdC5vd25lckRvY3VtZW50IHx8IHJvb3QpLmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKVxuICAgICAgbGV0IHRhcmdldCA9IHJvb3QuaGVhZCB8fCByb290XG4gICAgICB0YXJnZXQuaW5zZXJ0QmVmb3JlKHRoaXMuc3R5bGVUYWcsIHRhcmdldC5maXJzdENoaWxkKVxuICAgIH1cbiAgICB0aGlzLm1vZHVsZXMgPSBbXVxuICAgIHJvb3RbU0VUXSA9IHRoaXNcbiAgfVxuXG4gIG1vdW50KG1vZHVsZXMpIHtcbiAgICBsZXQgc2hlZXQgPSB0aGlzLnNoZWV0XG4gICAgbGV0IHBvcyA9IDAgLyogQ3VycmVudCBydWxlIG9mZnNldCAqLywgaiA9IDAgLyogSW5kZXggaW50byB0aGlzLm1vZHVsZXMgKi9cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1vZHVsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBtb2QgPSBtb2R1bGVzW2ldLCBpbmRleCA9IHRoaXMubW9kdWxlcy5pbmRleE9mKG1vZClcbiAgICAgIGlmIChpbmRleCA8IGogJiYgaW5kZXggPiAtMSkgeyAvLyBPcmRlcmluZyBjb25mbGljdFxuICAgICAgICB0aGlzLm1vZHVsZXMuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICBqLS1cbiAgICAgICAgaW5kZXggPSAtMVxuICAgICAgfVxuICAgICAgaWYgKGluZGV4ID09IC0xKSB7XG4gICAgICAgIHRoaXMubW9kdWxlcy5zcGxpY2UoaisrLCAwLCBtb2QpXG4gICAgICAgIGlmIChzaGVldCkgZm9yIChsZXQgayA9IDA7IGsgPCBtb2QucnVsZXMubGVuZ3RoOyBrKyspXG4gICAgICAgICAgc2hlZXQuaW5zZXJ0UnVsZShtb2QucnVsZXNba10sIHBvcysrKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2hpbGUgKGogPCBpbmRleCkgcG9zICs9IHRoaXMubW9kdWxlc1tqKytdLnJ1bGVzLmxlbmd0aFxuICAgICAgICBwb3MgKz0gbW9kLnJ1bGVzLmxlbmd0aFxuICAgICAgICBqKytcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXNoZWV0KSB7XG4gICAgICBsZXQgdGV4dCA9IFwiXCJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tb2R1bGVzLmxlbmd0aDsgaSsrKVxuICAgICAgICB0ZXh0ICs9IHRoaXMubW9kdWxlc1tpXS5nZXRSdWxlcygpICsgXCJcXG5cIlxuICAgICAgdGhpcy5zdHlsZVRhZy50ZXh0Q29udGVudCA9IHRleHRcbiAgICB9XG4gIH1cbn1cblxuLy8gU3R5bGU6Ok9iamVjdDx1bmlvbjxTdHlsZSxzdHJpbmc+PlxuLy9cbi8vIEEgc3R5bGUgaXMgYW4gb2JqZWN0IHRoYXQsIGluIHRoZSBzaW1wbGUgY2FzZSwgbWFwcyBDU1MgcHJvcGVydHlcbi8vIG5hbWVzIHRvIHN0cmluZ3MgaG9sZGluZyB0aGVpciB2YWx1ZXMsIGFzIGluIGB7Y29sb3I6IFwicmVkXCIsXG4vLyBmb250V2VpZ2h0OiBcImJvbGRcIn1gLiBUaGUgcHJvcGVydHkgbmFtZXMgY2FuIGJlIGdpdmVuIGluXG4vLyBjYW1lbC1jYXNlXHUyMDE0dGhlIGxpYnJhcnkgd2lsbCBpbnNlcnQgYSBkYXNoIGJlZm9yZSBjYXBpdGFsIGxldHRlcnNcbi8vIHdoZW4gY29udmVydGluZyB0aGVtIHRvIENTUy5cbi8vXG4vLyBJZiB5b3UgaW5jbHVkZSBhbiB1bmRlcnNjb3JlIGluIGEgcHJvcGVydHkgbmFtZSwgaXQgYW5kIGV2ZXJ5dGhpbmdcbi8vIGFmdGVyIGl0IHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBvdXRwdXQsIHdoaWNoIGNhbiBiZSB1c2VmdWwgd2hlblxuLy8gcHJvdmlkaW5nIGEgcHJvcGVydHkgbXVsdGlwbGUgdGltZXMsIGZvciBicm93c2VyIGNvbXBhdGliaWxpdHlcbi8vIHJlYXNvbnMuXG4vL1xuLy8gQSBwcm9wZXJ0eSBpbiBhIHN0eWxlIG9iamVjdCBjYW4gYWxzbyBiZSBhIHN1Yi1zZWxlY3Rvciwgd2hpY2hcbi8vIGV4dGVuZHMgdGhlIGN1cnJlbnQgY29udGV4dCB0byBhZGQgYSBwc2V1ZG8tc2VsZWN0b3Igb3IgYSBjaGlsZFxuLy8gc2VsZWN0b3IuIFN1Y2ggYSBwcm9wZXJ0eSBzaG91bGQgY29udGFpbiBhIGAmYCBjaGFyYWN0ZXIsIHdoaWNoXG4vLyB3aWxsIGJlIHJlcGxhY2VkIGJ5IHRoZSBjdXJyZW50IHNlbGVjdG9yLiBGb3IgZXhhbXBsZSBge1wiJjpiZWZvcmVcIjpcbi8vIHtjb250ZW50OiAnXCJoaVwiJ319YC4gU3ViLXNlbGVjdG9ycyBhbmQgcmVndWxhciBwcm9wZXJ0aWVzIGNhblxuLy8gZnJlZWx5IGJlIG1peGVkIGluIGEgZ2l2ZW4gb2JqZWN0LiBBbnkgcHJvcGVydHkgY29udGFpbmluZyBhIGAmYCBpc1xuLy8gYXNzdW1lZCB0byBiZSBhIHN1Yi1zZWxlY3Rvci5cbi8vXG4vLyBGaW5hbGx5LCBhIHByb3BlcnR5IGNhbiBzcGVjaWZ5IGFuIEAtYmxvY2sgdG8gYmUgd3JhcHBlZCBhcm91bmQgdGhlXG4vLyBzdHlsZXMgZGVmaW5lZCBpbnNpZGUgdGhlIG9iamVjdCB0aGF0J3MgdGhlIHByb3BlcnR5J3MgdmFsdWUuIEZvclxuLy8gZXhhbXBsZSB0byBjcmVhdGUgYSBtZWRpYSBxdWVyeSB5b3UgY2FuIGRvIGB7XCJAbWVkaWEgc2NyZWVuIGFuZFxuLy8gKG1pbi13aWR0aDogNDAwcHgpXCI6IHsuLi59fWAuXG4iLCAiZXhwb3J0IHZhciBiYXNlID0ge1xuICA4OiBcIkJhY2tzcGFjZVwiLFxuICA5OiBcIlRhYlwiLFxuICAxMDogXCJFbnRlclwiLFxuICAxMjogXCJOdW1Mb2NrXCIsXG4gIDEzOiBcIkVudGVyXCIsXG4gIDE2OiBcIlNoaWZ0XCIsXG4gIDE3OiBcIkNvbnRyb2xcIixcbiAgMTg6IFwiQWx0XCIsXG4gIDIwOiBcIkNhcHNMb2NrXCIsXG4gIDI3OiBcIkVzY2FwZVwiLFxuICAzMjogXCIgXCIsXG4gIDMzOiBcIlBhZ2VVcFwiLFxuICAzNDogXCJQYWdlRG93blwiLFxuICAzNTogXCJFbmRcIixcbiAgMzY6IFwiSG9tZVwiLFxuICAzNzogXCJBcnJvd0xlZnRcIixcbiAgMzg6IFwiQXJyb3dVcFwiLFxuICAzOTogXCJBcnJvd1JpZ2h0XCIsXG4gIDQwOiBcIkFycm93RG93blwiLFxuICA0NDogXCJQcmludFNjcmVlblwiLFxuICA0NTogXCJJbnNlcnRcIixcbiAgNDY6IFwiRGVsZXRlXCIsXG4gIDU5OiBcIjtcIixcbiAgNjE6IFwiPVwiLFxuICA5MTogXCJNZXRhXCIsXG4gIDkyOiBcIk1ldGFcIixcbiAgMTA2OiBcIipcIixcbiAgMTA3OiBcIitcIixcbiAgMTA4OiBcIixcIixcbiAgMTA5OiBcIi1cIixcbiAgMTEwOiBcIi5cIixcbiAgMTExOiBcIi9cIixcbiAgMTQ0OiBcIk51bUxvY2tcIixcbiAgMTQ1OiBcIlNjcm9sbExvY2tcIixcbiAgMTYwOiBcIlNoaWZ0XCIsXG4gIDE2MTogXCJTaGlmdFwiLFxuICAxNjI6IFwiQ29udHJvbFwiLFxuICAxNjM6IFwiQ29udHJvbFwiLFxuICAxNjQ6IFwiQWx0XCIsXG4gIDE2NTogXCJBbHRcIixcbiAgMTczOiBcIi1cIixcbiAgMTg2OiBcIjtcIixcbiAgMTg3OiBcIj1cIixcbiAgMTg4OiBcIixcIixcbiAgMTg5OiBcIi1cIixcbiAgMTkwOiBcIi5cIixcbiAgMTkxOiBcIi9cIixcbiAgMTkyOiBcImBcIixcbiAgMjE5OiBcIltcIixcbiAgMjIwOiBcIlxcXFxcIixcbiAgMjIxOiBcIl1cIixcbiAgMjIyOiBcIidcIlxufVxuXG5leHBvcnQgdmFyIHNoaWZ0ID0ge1xuICA0ODogXCIpXCIsXG4gIDQ5OiBcIiFcIixcbiAgNTA6IFwiQFwiLFxuICA1MTogXCIjXCIsXG4gIDUyOiBcIiRcIixcbiAgNTM6IFwiJVwiLFxuICA1NDogXCJeXCIsXG4gIDU1OiBcIiZcIixcbiAgNTY6IFwiKlwiLFxuICA1NzogXCIoXCIsXG4gIDU5OiBcIjpcIixcbiAgNjE6IFwiK1wiLFxuICAxNzM6IFwiX1wiLFxuICAxODY6IFwiOlwiLFxuICAxODc6IFwiK1wiLFxuICAxODg6IFwiPFwiLFxuICAxODk6IFwiX1wiLFxuICAxOTA6IFwiPlwiLFxuICAxOTE6IFwiP1wiLFxuICAxOTI6IFwiflwiLFxuICAyMTk6IFwie1wiLFxuICAyMjA6IFwifFwiLFxuICAyMjE6IFwifVwiLFxuICAyMjI6IFwiXFxcIlwiXG59XG5cbnZhciBjaHJvbWUgPSB0eXBlb2YgbmF2aWdhdG9yICE9IFwidW5kZWZpbmVkXCIgJiYgL0Nocm9tZVxcLyhcXGQrKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KVxudmFyIGdlY2tvID0gdHlwZW9mIG5hdmlnYXRvciAhPSBcInVuZGVmaW5lZFwiICYmIC9HZWNrb1xcL1xcZCsvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudClcbnZhciBtYWMgPSB0eXBlb2YgbmF2aWdhdG9yICE9IFwidW5kZWZpbmVkXCIgJiYgL01hYy8udGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pXG52YXIgaWUgPSB0eXBlb2YgbmF2aWdhdG9yICE9IFwidW5kZWZpbmVkXCIgJiYgL01TSUUgXFxkfFRyaWRlbnRcXC8oPzpbNy05XXxcXGR7Mix9KVxcLi4qcnY6KFxcZCspLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQpXG52YXIgYnJva2VuTW9kaWZpZXJOYW1lcyA9IG1hYyB8fCBjaHJvbWUgJiYgK2Nocm9tZVsxXSA8IDU3XG5cbi8vIEZpbGwgaW4gdGhlIGRpZ2l0IGtleXNcbmZvciAodmFyIGkgPSAwOyBpIDwgMTA7IGkrKykgYmFzZVs0OCArIGldID0gYmFzZVs5NiArIGldID0gU3RyaW5nKGkpXG5cbi8vIFRoZSBmdW5jdGlvbiBrZXlzXG5mb3IgKHZhciBpID0gMTsgaSA8PSAyNDsgaSsrKSBiYXNlW2kgKyAxMTFdID0gXCJGXCIgKyBpXG5cbi8vIEFuZCB0aGUgYWxwaGFiZXRpYyBrZXlzXG5mb3IgKHZhciBpID0gNjU7IGkgPD0gOTA7IGkrKykge1xuICBiYXNlW2ldID0gU3RyaW5nLmZyb21DaGFyQ29kZShpICsgMzIpXG4gIHNoaWZ0W2ldID0gU3RyaW5nLmZyb21DaGFyQ29kZShpKVxufVxuXG4vLyBGb3IgZWFjaCBjb2RlIHRoYXQgZG9lc24ndCBoYXZlIGEgc2hpZnQtZXF1aXZhbGVudCwgY29weSB0aGUgYmFzZSBuYW1lXG5mb3IgKHZhciBjb2RlIGluIGJhc2UpIGlmICghc2hpZnQuaGFzT3duUHJvcGVydHkoY29kZSkpIHNoaWZ0W2NvZGVdID0gYmFzZVtjb2RlXVxuXG5leHBvcnQgZnVuY3Rpb24ga2V5TmFtZShldmVudCkge1xuICB2YXIgaWdub3JlS2V5ID0gYnJva2VuTW9kaWZpZXJOYW1lcyAmJiAoZXZlbnQuY3RybEtleSB8fCBldmVudC5hbHRLZXkgfHwgZXZlbnQubWV0YUtleSkgfHxcbiAgICBpZSAmJiBldmVudC5zaGlmdEtleSAmJiBldmVudC5rZXkgJiYgZXZlbnQua2V5Lmxlbmd0aCA9PSAxIHx8XG4gICAgZXZlbnQua2V5ID09IFwiVW5pZGVudGlmaWVkXCJcbiAgdmFyIG5hbWUgPSAoIWlnbm9yZUtleSAmJiBldmVudC5rZXkpIHx8XG4gICAgKGV2ZW50LnNoaWZ0S2V5ID8gc2hpZnQgOiBiYXNlKVtldmVudC5rZXlDb2RlXSB8fFxuICAgIGV2ZW50LmtleSB8fCBcIlVuaWRlbnRpZmllZFwiXG4gIC8vIEVkZ2Ugc29tZXRpbWVzIHByb2R1Y2VzIHdyb25nIG5hbWVzIChJc3N1ZSAjMylcbiAgaWYgKG5hbWUgPT0gXCJFc2NcIikgbmFtZSA9IFwiRXNjYXBlXCJcbiAgaWYgKG5hbWUgPT0gXCJEZWxcIikgbmFtZSA9IFwiRGVsZXRlXCJcbiAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubWljcm9zb2Z0LmNvbS9lbi11cy9taWNyb3NvZnQtZWRnZS9wbGF0Zm9ybS9pc3N1ZXMvODg2MDU3MS9cbiAgaWYgKG5hbWUgPT0gXCJMZWZ0XCIpIG5hbWUgPSBcIkFycm93TGVmdFwiXG4gIGlmIChuYW1lID09IFwiVXBcIikgbmFtZSA9IFwiQXJyb3dVcFwiXG4gIGlmIChuYW1lID09IFwiUmlnaHRcIikgbmFtZSA9IFwiQXJyb3dSaWdodFwiXG4gIGlmIChuYW1lID09IFwiRG93blwiKSBuYW1lID0gXCJBcnJvd0Rvd25cIlxuICByZXR1cm4gbmFtZVxufVxuIiwgImltcG9ydCB7IFRleHQsIFJhbmdlU2V0LCBNYXBNb2RlLCBSYW5nZVZhbHVlLCBGYWNldCwgU3RhdGVFZmZlY3QsIENoYW5nZVNldCwgZmluZENsdXN0ZXJCcmVhaywgRWRpdG9yU2VsZWN0aW9uLCBFZGl0b3JTdGF0ZSwgZmluZENvbHVtbiwgQ2hhckNhdGVnb3J5LCBUcmFuc2FjdGlvbiwgUHJlYywgY29kZVBvaW50QXQsIGNvZGVQb2ludFNpemUsIGNvbWJpbmVDb25maWcsIFN0YXRlRmllbGQsIFJhbmdlU2V0QnVpbGRlciwgY291bnRDb2x1bW4gfSBmcm9tICdAY29kZW1pcnJvci9zdGF0ZSc7XG5pbXBvcnQgeyBTdHlsZU1vZHVsZSB9IGZyb20gJ3N0eWxlLW1vZCc7XG5pbXBvcnQgeyBrZXlOYW1lLCBiYXNlLCBzaGlmdCB9IGZyb20gJ3czYy1rZXluYW1lJztcblxuZnVuY3Rpb24gZ2V0U2VsZWN0aW9uKHJvb3QpIHtcbiAgICBsZXQgdGFyZ2V0O1xuICAgIC8vIEJyb3dzZXJzIGRpZmZlciBvbiB3aGV0aGVyIHNoYWRvdyByb290cyBoYXZlIGEgZ2V0U2VsZWN0aW9uXG4gICAgLy8gbWV0aG9kLiBJZiBpdCBleGlzdHMsIHVzZSB0aGF0LCBvdGhlcndpc2UsIGNhbGwgaXQgb24gdGhlXG4gICAgLy8gZG9jdW1lbnQuXG4gICAgaWYgKHJvb3Qubm9kZVR5cGUgPT0gMTEpIHsgLy8gU2hhZG93IHJvb3RcbiAgICAgICAgdGFyZ2V0ID0gcm9vdC5nZXRTZWxlY3Rpb24gPyByb290IDogcm9vdC5vd25lckRvY3VtZW50O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGFyZ2V0ID0gcm9vdDtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldC5nZXRTZWxlY3Rpb24oKTtcbn1cbmZ1bmN0aW9uIGNvbnRhaW5zKGRvbSwgbm9kZSkge1xuICAgIHJldHVybiBub2RlID8gZG9tID09IG5vZGUgfHwgZG9tLmNvbnRhaW5zKG5vZGUubm9kZVR5cGUgIT0gMSA/IG5vZGUucGFyZW50Tm9kZSA6IG5vZGUpIDogZmFsc2U7XG59XG5mdW5jdGlvbiBkZWVwQWN0aXZlRWxlbWVudChkb2MpIHtcbiAgICBsZXQgZWx0ID0gZG9jLmFjdGl2ZUVsZW1lbnQ7XG4gICAgd2hpbGUgKGVsdCAmJiBlbHQuc2hhZG93Um9vdClcbiAgICAgICAgZWx0ID0gZWx0LnNoYWRvd1Jvb3QuYWN0aXZlRWxlbWVudDtcbiAgICByZXR1cm4gZWx0O1xufVxuZnVuY3Rpb24gaGFzU2VsZWN0aW9uKGRvbSwgc2VsZWN0aW9uKSB7XG4gICAgaWYgKCFzZWxlY3Rpb24uYW5jaG9yTm9kZSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICAgIC8vIEZpcmVmb3ggd2lsbCByYWlzZSAncGVybWlzc2lvbiBkZW5pZWQnIGVycm9ycyB3aGVuIGFjY2Vzc2luZ1xuICAgICAgICAvLyBwcm9wZXJ0aWVzIG9mIGBzZWwuYW5jaG9yTm9kZWAgd2hlbiBpdCdzIGluIGEgZ2VuZXJhdGVkIENTU1xuICAgICAgICAvLyBlbGVtZW50LlxuICAgICAgICByZXR1cm4gY29udGFpbnMoZG9tLCBzZWxlY3Rpb24uYW5jaG9yTm9kZSk7XG4gICAgfVxuICAgIGNhdGNoIChfKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5mdW5jdGlvbiBjbGllbnRSZWN0c0Zvcihkb20pIHtcbiAgICBpZiAoZG9tLm5vZGVUeXBlID09IDMpXG4gICAgICAgIHJldHVybiB0ZXh0UmFuZ2UoZG9tLCAwLCBkb20ubm9kZVZhbHVlLmxlbmd0aCkuZ2V0Q2xpZW50UmVjdHMoKTtcbiAgICBlbHNlIGlmIChkb20ubm9kZVR5cGUgPT0gMSlcbiAgICAgICAgcmV0dXJuIGRvbS5nZXRDbGllbnRSZWN0cygpO1xuICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIFtdO1xufVxuLy8gU2NhbnMgZm9yd2FyZCBhbmQgYmFja3dhcmQgdGhyb3VnaCBET00gcG9zaXRpb25zIGVxdWl2YWxlbnQgdG8gdGhlXG4vLyBnaXZlbiBvbmUgdG8gc2VlIGlmIHRoZSB0d28gYXJlIGluIHRoZSBzYW1lIHBsYWNlIChpLmUuIGFmdGVyIGFcbi8vIHRleHQgbm9kZSB2cyBhdCB0aGUgZW5kIG9mIHRoYXQgdGV4dCBub2RlKVxuZnVuY3Rpb24gaXNFcXVpdmFsZW50UG9zaXRpb24obm9kZSwgb2ZmLCB0YXJnZXROb2RlLCB0YXJnZXRPZmYpIHtcbiAgICByZXR1cm4gdGFyZ2V0Tm9kZSA/IChzY2FuRm9yKG5vZGUsIG9mZiwgdGFyZ2V0Tm9kZSwgdGFyZ2V0T2ZmLCAtMSkgfHxcbiAgICAgICAgc2NhbkZvcihub2RlLCBvZmYsIHRhcmdldE5vZGUsIHRhcmdldE9mZiwgMSkpIDogZmFsc2U7XG59XG5mdW5jdGlvbiBkb21JbmRleChub2RlKSB7XG4gICAgZm9yICh2YXIgaW5kZXggPSAwOzsgaW5kZXgrKykge1xuICAgICAgICBub2RlID0gbm9kZS5wcmV2aW91c1NpYmxpbmc7XG4gICAgICAgIGlmICghbm9kZSlcbiAgICAgICAgICAgIHJldHVybiBpbmRleDtcbiAgICB9XG59XG5mdW5jdGlvbiBzY2FuRm9yKG5vZGUsIG9mZiwgdGFyZ2V0Tm9kZSwgdGFyZ2V0T2ZmLCBkaXIpIHtcbiAgICBmb3IgKDs7KSB7XG4gICAgICAgIGlmIChub2RlID09IHRhcmdldE5vZGUgJiYgb2ZmID09IHRhcmdldE9mZilcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAob2ZmID09IChkaXIgPCAwID8gMCA6IG1heE9mZnNldChub2RlKSkpIHtcbiAgICAgICAgICAgIGlmIChub2RlLm5vZGVOYW1lID09IFwiRElWXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgbGV0IHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIGlmICghcGFyZW50IHx8IHBhcmVudC5ub2RlVHlwZSAhPSAxKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIG9mZiA9IGRvbUluZGV4KG5vZGUpICsgKGRpciA8IDAgPyAwIDogMSk7XG4gICAgICAgICAgICBub2RlID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSkge1xuICAgICAgICAgICAgbm9kZSA9IG5vZGUuY2hpbGROb2Rlc1tvZmYgKyAoZGlyIDwgMCA/IC0xIDogMCldO1xuICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSAmJiBub2RlLmNvbnRlbnRFZGl0YWJsZSA9PSBcImZhbHNlXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgb2ZmID0gZGlyIDwgMCA/IG1heE9mZnNldChub2RlKSA6IDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBtYXhPZmZzZXQobm9kZSkge1xuICAgIHJldHVybiBub2RlLm5vZGVUeXBlID09IDMgPyBub2RlLm5vZGVWYWx1ZS5sZW5ndGggOiBub2RlLmNoaWxkTm9kZXMubGVuZ3RoO1xufVxuY29uc3QgUmVjdDAgPSB7IGxlZnQ6IDAsIHJpZ2h0OiAwLCB0b3A6IDAsIGJvdHRvbTogMCB9O1xuZnVuY3Rpb24gZmxhdHRlblJlY3QocmVjdCwgbGVmdCkge1xuICAgIGxldCB4ID0gbGVmdCA/IHJlY3QubGVmdCA6IHJlY3QucmlnaHQ7XG4gICAgcmV0dXJuIHsgbGVmdDogeCwgcmlnaHQ6IHgsIHRvcDogcmVjdC50b3AsIGJvdHRvbTogcmVjdC5ib3R0b20gfTtcbn1cbmZ1bmN0aW9uIHdpbmRvd1JlY3Qod2luKSB7XG4gICAgcmV0dXJuIHsgbGVmdDogMCwgcmlnaHQ6IHdpbi5pbm5lcldpZHRoLFxuICAgICAgICB0b3A6IDAsIGJvdHRvbTogd2luLmlubmVySGVpZ2h0IH07XG59XG5mdW5jdGlvbiBzY3JvbGxSZWN0SW50b1ZpZXcoZG9tLCByZWN0LCBzaWRlLCB4LCB5LCB4TWFyZ2luLCB5TWFyZ2luLCBsdHIpIHtcbiAgICBsZXQgZG9jID0gZG9tLm93bmVyRG9jdW1lbnQsIHdpbiA9IGRvYy5kZWZhdWx0VmlldyB8fCB3aW5kb3c7XG4gICAgZm9yIChsZXQgY3VyID0gZG9tOyBjdXI7KSB7XG4gICAgICAgIGlmIChjdXIubm9kZVR5cGUgPT0gMSkgeyAvLyBFbGVtZW50XG4gICAgICAgICAgICBsZXQgYm91bmRpbmcsIHRvcCA9IGN1ciA9PSBkb2MuYm9keTtcbiAgICAgICAgICAgIGlmICh0b3ApIHtcbiAgICAgICAgICAgICAgICBib3VuZGluZyA9IHdpbmRvd1JlY3Qod2luKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChjdXIuc2Nyb2xsSGVpZ2h0IDw9IGN1ci5jbGllbnRIZWlnaHQgJiYgY3VyLnNjcm9sbFdpZHRoIDw9IGN1ci5jbGllbnRXaWR0aCkge1xuICAgICAgICAgICAgICAgICAgICBjdXIgPSBjdXIuYXNzaWduZWRTbG90IHx8IGN1ci5wYXJlbnROb2RlO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IHJlY3QgPSBjdXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHNjcm9sbGJhciB3aWR0aCBpc24ndCBpbmNsdWRlZCBpbiB0aGUgcmVjdGFuZ2xlXG4gICAgICAgICAgICAgICAgYm91bmRpbmcgPSB7IGxlZnQ6IHJlY3QubGVmdCwgcmlnaHQ6IHJlY3QubGVmdCArIGN1ci5jbGllbnRXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgdG9wOiByZWN0LnRvcCwgYm90dG9tOiByZWN0LnRvcCArIGN1ci5jbGllbnRIZWlnaHQgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBtb3ZlWCA9IDAsIG1vdmVZID0gMDtcbiAgICAgICAgICAgIGlmICh5ID09IFwibmVhcmVzdFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlY3QudG9wIDwgYm91bmRpbmcudG9wKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vdmVZID0gLShib3VuZGluZy50b3AgLSByZWN0LnRvcCArIHlNYXJnaW4pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2lkZSA+IDAgJiYgcmVjdC5ib3R0b20gPiBib3VuZGluZy5ib3R0b20gKyBtb3ZlWSlcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVZID0gcmVjdC5ib3R0b20gLSBib3VuZGluZy5ib3R0b20gKyBtb3ZlWSArIHlNYXJnaW47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlY3QuYm90dG9tID4gYm91bmRpbmcuYm90dG9tKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vdmVZID0gcmVjdC5ib3R0b20gLSBib3VuZGluZy5ib3R0b20gKyB5TWFyZ2luO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2lkZSA8IDAgJiYgKHJlY3QudG9wIC0gbW92ZVkpIDwgYm91bmRpbmcudG9wKVxuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZVkgPSAtKGJvdW5kaW5nLnRvcCArIG1vdmVZIC0gcmVjdC50b3AgKyB5TWFyZ2luKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgcmVjdEhlaWdodCA9IHJlY3QuYm90dG9tIC0gcmVjdC50b3AsIGJvdW5kaW5nSGVpZ2h0ID0gYm91bmRpbmcuYm90dG9tIC0gYm91bmRpbmcudG9wO1xuICAgICAgICAgICAgICAgIGxldCB0YXJnZXRUb3AgPSB5ID09IFwiY2VudGVyXCIgJiYgcmVjdEhlaWdodCA8PSBib3VuZGluZ0hlaWdodCA/IHJlY3QudG9wICsgcmVjdEhlaWdodCAvIDIgLSBib3VuZGluZ0hlaWdodCAvIDIgOlxuICAgICAgICAgICAgICAgICAgICB5ID09IFwic3RhcnRcIiB8fCB5ID09IFwiY2VudGVyXCIgJiYgc2lkZSA8IDAgPyByZWN0LnRvcCAtIHlNYXJnaW4gOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjdC5ib3R0b20gLSBib3VuZGluZ0hlaWdodCArIHlNYXJnaW47XG4gICAgICAgICAgICAgICAgbW92ZVkgPSB0YXJnZXRUb3AgLSBib3VuZGluZy50b3A7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoeCA9PSBcIm5lYXJlc3RcIikge1xuICAgICAgICAgICAgICAgIGlmIChyZWN0LmxlZnQgPCBib3VuZGluZy5sZWZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIG1vdmVYID0gLShib3VuZGluZy5sZWZ0IC0gcmVjdC5sZWZ0ICsgeE1hcmdpbik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaWRlID4gMCAmJiByZWN0LnJpZ2h0ID4gYm91bmRpbmcucmlnaHQgKyBtb3ZlWClcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVYID0gcmVjdC5yaWdodCAtIGJvdW5kaW5nLnJpZ2h0ICsgbW92ZVggKyB4TWFyZ2luO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZWN0LnJpZ2h0ID4gYm91bmRpbmcucmlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgbW92ZVggPSByZWN0LnJpZ2h0IC0gYm91bmRpbmcucmlnaHQgKyB4TWFyZ2luO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2lkZSA8IDAgJiYgcmVjdC5sZWZ0IDwgYm91bmRpbmcubGVmdCArIG1vdmVYKVxuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZVggPSAtKGJvdW5kaW5nLmxlZnQgKyBtb3ZlWCAtIHJlY3QubGVmdCArIHhNYXJnaW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCB0YXJnZXRMZWZ0ID0geCA9PSBcImNlbnRlclwiID8gcmVjdC5sZWZ0ICsgKHJlY3QucmlnaHQgLSByZWN0LmxlZnQpIC8gMiAtIChib3VuZGluZy5yaWdodCAtIGJvdW5kaW5nLmxlZnQpIC8gMiA6XG4gICAgICAgICAgICAgICAgICAgICh4ID09IFwic3RhcnRcIikgPT0gbHRyID8gcmVjdC5sZWZ0IC0geE1hcmdpbiA6XG4gICAgICAgICAgICAgICAgICAgICAgICByZWN0LnJpZ2h0IC0gKGJvdW5kaW5nLnJpZ2h0IC0gYm91bmRpbmcubGVmdCkgKyB4TWFyZ2luO1xuICAgICAgICAgICAgICAgIG1vdmVYID0gdGFyZ2V0TGVmdCAtIGJvdW5kaW5nLmxlZnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobW92ZVggfHwgbW92ZVkpIHtcbiAgICAgICAgICAgICAgICBpZiAodG9wKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbi5zY3JvbGxCeShtb3ZlWCwgbW92ZVkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1vdmVkWCA9IDAsIG1vdmVkWSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb3ZlWSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0YXJ0ID0gY3VyLnNjcm9sbFRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ci5zY3JvbGxUb3AgKz0gbW92ZVk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb3ZlZFkgPSBjdXIuc2Nyb2xsVG9wIC0gc3RhcnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vdmVYKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3RhcnQgPSBjdXIuc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ci5zY3JvbGxMZWZ0ICs9IG1vdmVYO1xuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZWRYID0gY3VyLnNjcm9sbExlZnQgLSBzdGFydDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZWN0ID0geyBsZWZ0OiByZWN0LmxlZnQgLSBtb3ZlZFgsIHRvcDogcmVjdC50b3AgLSBtb3ZlZFksXG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodDogcmVjdC5yaWdodCAtIG1vdmVkWCwgYm90dG9tOiByZWN0LmJvdHRvbSAtIG1vdmVkWSB9O1xuICAgICAgICAgICAgICAgICAgICBpZiAobW92ZWRYICYmIE1hdGguYWJzKG1vdmVkWCAtIG1vdmVYKSA8IDEpXG4gICAgICAgICAgICAgICAgICAgICAgICB4ID0gXCJuZWFyZXN0XCI7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb3ZlZFkgJiYgTWF0aC5hYnMobW92ZWRZIC0gbW92ZVkpIDwgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHkgPSBcIm5lYXJlc3RcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodG9wKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY3VyID0gY3VyLmFzc2lnbmVkU2xvdCB8fCBjdXIucGFyZW50Tm9kZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjdXIubm9kZVR5cGUgPT0gMTEpIHsgLy8gQSBzaGFkb3cgcm9vdFxuICAgICAgICAgICAgY3VyID0gY3VyLmhvc3Q7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbn1cbmNsYXNzIERPTVNlbGVjdGlvblN0YXRlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5hbmNob3JOb2RlID0gbnVsbDtcbiAgICAgICAgdGhpcy5hbmNob3JPZmZzZXQgPSAwO1xuICAgICAgICB0aGlzLmZvY3VzTm9kZSA9IG51bGw7XG4gICAgICAgIHRoaXMuZm9jdXNPZmZzZXQgPSAwO1xuICAgIH1cbiAgICBlcShkb21TZWwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYW5jaG9yTm9kZSA9PSBkb21TZWwuYW5jaG9yTm9kZSAmJiB0aGlzLmFuY2hvck9mZnNldCA9PSBkb21TZWwuYW5jaG9yT2Zmc2V0ICYmXG4gICAgICAgICAgICB0aGlzLmZvY3VzTm9kZSA9PSBkb21TZWwuZm9jdXNOb2RlICYmIHRoaXMuZm9jdXNPZmZzZXQgPT0gZG9tU2VsLmZvY3VzT2Zmc2V0O1xuICAgIH1cbiAgICBzZXRSYW5nZShyYW5nZSkge1xuICAgICAgICB0aGlzLnNldChyYW5nZS5hbmNob3JOb2RlLCByYW5nZS5hbmNob3JPZmZzZXQsIHJhbmdlLmZvY3VzTm9kZSwgcmFuZ2UuZm9jdXNPZmZzZXQpO1xuICAgIH1cbiAgICBzZXQoYW5jaG9yTm9kZSwgYW5jaG9yT2Zmc2V0LCBmb2N1c05vZGUsIGZvY3VzT2Zmc2V0KSB7XG4gICAgICAgIHRoaXMuYW5jaG9yTm9kZSA9IGFuY2hvck5vZGU7XG4gICAgICAgIHRoaXMuYW5jaG9yT2Zmc2V0ID0gYW5jaG9yT2Zmc2V0O1xuICAgICAgICB0aGlzLmZvY3VzTm9kZSA9IGZvY3VzTm9kZTtcbiAgICAgICAgdGhpcy5mb2N1c09mZnNldCA9IGZvY3VzT2Zmc2V0O1xuICAgIH1cbn1cbmxldCBwcmV2ZW50U2Nyb2xsU3VwcG9ydGVkID0gbnVsbDtcbi8vIEZlYXR1cmUtZGV0ZWN0cyBzdXBwb3J0IGZvciAuZm9jdXMoe3ByZXZlbnRTY3JvbGw6IHRydWV9KSwgYW5kIHVzZXNcbi8vIGEgZmFsbGJhY2sga2x1ZGdlIHdoZW4gbm90IHN1cHBvcnRlZC5cbmZ1bmN0aW9uIGZvY3VzUHJldmVudFNjcm9sbChkb20pIHtcbiAgICBpZiAoZG9tLnNldEFjdGl2ZSlcbiAgICAgICAgcmV0dXJuIGRvbS5zZXRBY3RpdmUoKTsgLy8gaW4gSUVcbiAgICBpZiAocHJldmVudFNjcm9sbFN1cHBvcnRlZClcbiAgICAgICAgcmV0dXJuIGRvbS5mb2N1cyhwcmV2ZW50U2Nyb2xsU3VwcG9ydGVkKTtcbiAgICBsZXQgc3RhY2sgPSBbXTtcbiAgICBmb3IgKGxldCBjdXIgPSBkb207IGN1cjsgY3VyID0gY3VyLnBhcmVudE5vZGUpIHtcbiAgICAgICAgc3RhY2sucHVzaChjdXIsIGN1ci5zY3JvbGxUb3AsIGN1ci5zY3JvbGxMZWZ0KTtcbiAgICAgICAgaWYgKGN1ciA9PSBjdXIub3duZXJEb2N1bWVudClcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBkb20uZm9jdXMocHJldmVudFNjcm9sbFN1cHBvcnRlZCA9PSBudWxsID8ge1xuICAgICAgICBnZXQgcHJldmVudFNjcm9sbCgpIHtcbiAgICAgICAgICAgIHByZXZlbnRTY3JvbGxTdXBwb3J0ZWQgPSB7IHByZXZlbnRTY3JvbGw6IHRydWUgfTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfSA6IHVuZGVmaW5lZCk7XG4gICAgaWYgKCFwcmV2ZW50U2Nyb2xsU3VwcG9ydGVkKSB7XG4gICAgICAgIHByZXZlbnRTY3JvbGxTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGFjay5sZW5ndGg7KSB7XG4gICAgICAgICAgICBsZXQgZWx0ID0gc3RhY2tbaSsrXSwgdG9wID0gc3RhY2tbaSsrXSwgbGVmdCA9IHN0YWNrW2krK107XG4gICAgICAgICAgICBpZiAoZWx0LnNjcm9sbFRvcCAhPSB0b3ApXG4gICAgICAgICAgICAgICAgZWx0LnNjcm9sbFRvcCA9IHRvcDtcbiAgICAgICAgICAgIGlmIChlbHQuc2Nyb2xsTGVmdCAhPSBsZWZ0KVxuICAgICAgICAgICAgICAgIGVsdC5zY3JvbGxMZWZ0ID0gbGVmdDtcbiAgICAgICAgfVxuICAgIH1cbn1cbmxldCBzY3JhdGNoUmFuZ2U7XG5mdW5jdGlvbiB0ZXh0UmFuZ2Uobm9kZSwgZnJvbSwgdG8gPSBmcm9tKSB7XG4gICAgbGV0IHJhbmdlID0gc2NyYXRjaFJhbmdlIHx8IChzY3JhdGNoUmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpKTtcbiAgICByYW5nZS5zZXRFbmQobm9kZSwgdG8pO1xuICAgIHJhbmdlLnNldFN0YXJ0KG5vZGUsIGZyb20pO1xuICAgIHJldHVybiByYW5nZTtcbn1cbmZ1bmN0aW9uIGRpc3BhdGNoS2V5KGVsdCwgbmFtZSwgY29kZSkge1xuICAgIGxldCBvcHRpb25zID0geyBrZXk6IG5hbWUsIGNvZGU6IG5hbWUsIGtleUNvZGU6IGNvZGUsIHdoaWNoOiBjb2RlLCBjYW5jZWxhYmxlOiB0cnVlIH07XG4gICAgbGV0IGRvd24gPSBuZXcgS2V5Ym9hcmRFdmVudChcImtleWRvd25cIiwgb3B0aW9ucyk7XG4gICAgZG93bi5zeW50aGV0aWMgPSB0cnVlO1xuICAgIGVsdC5kaXNwYXRjaEV2ZW50KGRvd24pO1xuICAgIGxldCB1cCA9IG5ldyBLZXlib2FyZEV2ZW50KFwia2V5dXBcIiwgb3B0aW9ucyk7XG4gICAgdXAuc3ludGhldGljID0gdHJ1ZTtcbiAgICBlbHQuZGlzcGF0Y2hFdmVudCh1cCk7XG4gICAgcmV0dXJuIGRvd24uZGVmYXVsdFByZXZlbnRlZCB8fCB1cC5kZWZhdWx0UHJldmVudGVkO1xufVxuZnVuY3Rpb24gZ2V0Um9vdChub2RlKSB7XG4gICAgd2hpbGUgKG5vZGUpIHtcbiAgICAgICAgaWYgKG5vZGUgJiYgKG5vZGUubm9kZVR5cGUgPT0gOSB8fCBub2RlLm5vZGVUeXBlID09IDExICYmIG5vZGUuaG9zdCkpXG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgbm9kZSA9IG5vZGUuYXNzaWduZWRTbG90IHx8IG5vZGUucGFyZW50Tm9kZTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBjbGVhckF0dHJpYnV0ZXMobm9kZSkge1xuICAgIHdoaWxlIChub2RlLmF0dHJpYnV0ZXMubGVuZ3RoKVxuICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZU5vZGUobm9kZS5hdHRyaWJ1dGVzWzBdKTtcbn1cbmZ1bmN0aW9uIGF0RWxlbWVudFN0YXJ0KGRvYywgc2VsZWN0aW9uKSB7XG4gICAgbGV0IG5vZGUgPSBzZWxlY3Rpb24uZm9jdXNOb2RlLCBvZmZzZXQgPSBzZWxlY3Rpb24uZm9jdXNPZmZzZXQ7XG4gICAgaWYgKCFub2RlIHx8IHNlbGVjdGlvbi5hbmNob3JOb2RlICE9IG5vZGUgfHwgc2VsZWN0aW9uLmFuY2hvck9mZnNldCAhPSBvZmZzZXQpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBmb3IgKDs7KSB7XG4gICAgICAgIGlmIChvZmZzZXQpIHtcbiAgICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlICE9IDEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgbGV0IHByZXYgPSBub2RlLmNoaWxkTm9kZXNbb2Zmc2V0IC0gMV07XG4gICAgICAgICAgICBpZiAocHJldi5jb250ZW50RWRpdGFibGUgPT0gXCJmYWxzZVwiKVxuICAgICAgICAgICAgICAgIG9mZnNldC0tO1xuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbm9kZSA9IHByZXY7XG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gbWF4T2Zmc2V0KG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG5vZGUgPT0gZG9jKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9mZnNldCA9IGRvbUluZGV4KG5vZGUpO1xuICAgICAgICAgICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY2xhc3MgRE9NUG9zIHtcbiAgICBjb25zdHJ1Y3Rvcihub2RlLCBvZmZzZXQsIHByZWNpc2UgPSB0cnVlKSB7XG4gICAgICAgIHRoaXMubm9kZSA9IG5vZGU7XG4gICAgICAgIHRoaXMub2Zmc2V0ID0gb2Zmc2V0O1xuICAgICAgICB0aGlzLnByZWNpc2UgPSBwcmVjaXNlO1xuICAgIH1cbiAgICBzdGF0aWMgYmVmb3JlKGRvbSwgcHJlY2lzZSkgeyByZXR1cm4gbmV3IERPTVBvcyhkb20ucGFyZW50Tm9kZSwgZG9tSW5kZXgoZG9tKSwgcHJlY2lzZSk7IH1cbiAgICBzdGF0aWMgYWZ0ZXIoZG9tLCBwcmVjaXNlKSB7IHJldHVybiBuZXcgRE9NUG9zKGRvbS5wYXJlbnROb2RlLCBkb21JbmRleChkb20pICsgMSwgcHJlY2lzZSk7IH1cbn1cbmNvbnN0IG5vQ2hpbGRyZW4gPSBbXTtcbmNsYXNzIENvbnRlbnRWaWV3IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBudWxsO1xuICAgICAgICB0aGlzLmRvbSA9IG51bGw7XG4gICAgICAgIHRoaXMuZGlydHkgPSAyIC8qIERpcnR5Lk5vZGUgKi87XG4gICAgfVxuICAgIGdldCBlZGl0b3JWaWV3KCkge1xuICAgICAgICBpZiAoIXRoaXMucGFyZW50KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQWNjZXNzaW5nIHZpZXcgaW4gb3JwaGFuIGNvbnRlbnQgdmlld1wiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmVkaXRvclZpZXc7XG4gICAgfVxuICAgIGdldCBvdmVycmlkZURPTVRleHQoKSB7IHJldHVybiBudWxsOyB9XG4gICAgZ2V0IHBvc0F0U3RhcnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudCA/IHRoaXMucGFyZW50LnBvc0JlZm9yZSh0aGlzKSA6IDA7XG4gICAgfVxuICAgIGdldCBwb3NBdEVuZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zQXRTdGFydCArIHRoaXMubGVuZ3RoO1xuICAgIH1cbiAgICBwb3NCZWZvcmUodmlldykge1xuICAgICAgICBsZXQgcG9zID0gdGhpcy5wb3NBdFN0YXJ0O1xuICAgICAgICBmb3IgKGxldCBjaGlsZCBvZiB0aGlzLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICBpZiAoY2hpbGQgPT0gdmlldylcbiAgICAgICAgICAgICAgICByZXR1cm4gcG9zO1xuICAgICAgICAgICAgcG9zICs9IGNoaWxkLmxlbmd0aCArIGNoaWxkLmJyZWFrQWZ0ZXI7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIGNoaWxkIGluIHBvc0JlZm9yZVwiKTtcbiAgICB9XG4gICAgcG9zQWZ0ZXIodmlldykge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3NCZWZvcmUodmlldykgKyB2aWV3Lmxlbmd0aDtcbiAgICB9XG4gICAgLy8gV2lsbCByZXR1cm4gYSByZWN0YW5nbGUgZGlyZWN0bHkgYmVmb3JlICh3aGVuIHNpZGUgPCAwKSwgYWZ0ZXJcbiAgICAvLyAoc2lkZSA+IDApIG9yIGRpcmVjdGx5IG9uICh3aGVuIHRoZSBicm93c2VyIHN1cHBvcnRzIGl0KSB0aGVcbiAgICAvLyBnaXZlbiBwb3NpdGlvbi5cbiAgICBjb29yZHNBdChfcG9zLCBfc2lkZSkgeyByZXR1cm4gbnVsbDsgfVxuICAgIHN5bmModHJhY2spIHtcbiAgICAgICAgaWYgKHRoaXMuZGlydHkgJiAyIC8qIERpcnR5Lk5vZGUgKi8pIHtcbiAgICAgICAgICAgIGxldCBwYXJlbnQgPSB0aGlzLmRvbTtcbiAgICAgICAgICAgIGxldCBwcmV2ID0gbnVsbCwgbmV4dDtcbiAgICAgICAgICAgIGZvciAobGV0IGNoaWxkIG9mIHRoaXMuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGQuZGlydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGlsZC5kb20gJiYgKG5leHQgPSBwcmV2ID8gcHJldi5uZXh0U2libGluZyA6IHBhcmVudC5maXJzdENoaWxkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbnRlbnRWaWV3ID0gQ29udGVudFZpZXcuZ2V0KG5leHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb250ZW50VmlldyB8fCAhY29udGVudFZpZXcucGFyZW50ICYmIGNvbnRlbnRWaWV3LmNhblJldXNlRE9NKGNoaWxkKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZC5yZXVzZURPTShuZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjaGlsZC5zeW5jKHRyYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQuZGlydHkgPSAwIC8qIERpcnR5Lk5vdCAqLztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV4dCA9IHByZXYgPyBwcmV2Lm5leHRTaWJsaW5nIDogcGFyZW50LmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgaWYgKHRyYWNrICYmICF0cmFjay53cml0dGVuICYmIHRyYWNrLm5vZGUgPT0gcGFyZW50ICYmIG5leHQgIT0gY2hpbGQuZG9tKVxuICAgICAgICAgICAgICAgICAgICB0cmFjay53cml0dGVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGQuZG9tLnBhcmVudE5vZGUgPT0gcGFyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChuZXh0ICYmIG5leHQgIT0gY2hpbGQuZG9tKVxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCA9IHJtJDEobmV4dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGNoaWxkLmRvbSwgbmV4dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHByZXYgPSBjaGlsZC5kb207XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXh0ID0gcHJldiA/IHByZXYubmV4dFNpYmxpbmcgOiBwYXJlbnQuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgIGlmIChuZXh0ICYmIHRyYWNrICYmIHRyYWNrLm5vZGUgPT0gcGFyZW50KVxuICAgICAgICAgICAgICAgIHRyYWNrLndyaXR0ZW4gPSB0cnVlO1xuICAgICAgICAgICAgd2hpbGUgKG5leHQpXG4gICAgICAgICAgICAgICAgbmV4dCA9IHJtJDEobmV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5kaXJ0eSAmIDEgLyogRGlydHkuQ2hpbGQgKi8pIHtcbiAgICAgICAgICAgIGZvciAobGV0IGNoaWxkIG9mIHRoaXMuY2hpbGRyZW4pXG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkLmRpcnR5KSB7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkLnN5bmModHJhY2spO1xuICAgICAgICAgICAgICAgICAgICBjaGlsZC5kaXJ0eSA9IDAgLyogRGlydHkuTm90ICovO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXVzZURPTShfZG9tKSB7IH1cbiAgICBsb2NhbFBvc0Zyb21ET00obm9kZSwgb2Zmc2V0KSB7XG4gICAgICAgIGxldCBhZnRlcjtcbiAgICAgICAgaWYgKG5vZGUgPT0gdGhpcy5kb20pIHtcbiAgICAgICAgICAgIGFmdGVyID0gdGhpcy5kb20uY2hpbGROb2Rlc1tvZmZzZXRdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IGJpYXMgPSBtYXhPZmZzZXQobm9kZSkgPT0gMCA/IDAgOiBvZmZzZXQgPT0gMCA/IC0xIDogMTtcbiAgICAgICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgICAgICBsZXQgcGFyZW50ID0gbm9kZS5wYXJlbnROb2RlO1xuICAgICAgICAgICAgICAgIGlmIChwYXJlbnQgPT0gdGhpcy5kb20pXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGlmIChiaWFzID09IDAgJiYgcGFyZW50LmZpcnN0Q2hpbGQgIT0gcGFyZW50Lmxhc3RDaGlsZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZSA9PSBwYXJlbnQuZmlyc3RDaGlsZClcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpYXMgPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgYmlhcyA9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5vZGUgPSBwYXJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYmlhcyA8IDApXG4gICAgICAgICAgICAgICAgYWZ0ZXIgPSBub2RlO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGFmdGVyID0gbm9kZS5uZXh0U2libGluZztcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWZ0ZXIgPT0gdGhpcy5kb20uZmlyc3RDaGlsZClcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB3aGlsZSAoYWZ0ZXIgJiYgIUNvbnRlbnRWaWV3LmdldChhZnRlcikpXG4gICAgICAgICAgICBhZnRlciA9IGFmdGVyLm5leHRTaWJsaW5nO1xuICAgICAgICBpZiAoIWFmdGVyKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgcG9zID0gMDs7IGkrKykge1xuICAgICAgICAgICAgbGV0IGNoaWxkID0gdGhpcy5jaGlsZHJlbltpXTtcbiAgICAgICAgICAgIGlmIChjaGlsZC5kb20gPT0gYWZ0ZXIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBvcztcbiAgICAgICAgICAgIHBvcyArPSBjaGlsZC5sZW5ndGggKyBjaGlsZC5icmVha0FmdGVyO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRvbUJvdW5kc0Fyb3VuZChmcm9tLCB0bywgb2Zmc2V0ID0gMCkge1xuICAgICAgICBsZXQgZnJvbUkgPSAtMSwgZnJvbVN0YXJ0ID0gLTEsIHRvSSA9IC0xLCB0b0VuZCA9IC0xO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgcG9zID0gb2Zmc2V0LCBwcmV2RW5kID0gb2Zmc2V0OyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGNoaWxkID0gdGhpcy5jaGlsZHJlbltpXSwgZW5kID0gcG9zICsgY2hpbGQubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKHBvcyA8IGZyb20gJiYgZW5kID4gdG8pXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkLmRvbUJvdW5kc0Fyb3VuZChmcm9tLCB0bywgcG9zKTtcbiAgICAgICAgICAgIGlmIChlbmQgPj0gZnJvbSAmJiBmcm9tSSA9PSAtMSkge1xuICAgICAgICAgICAgICAgIGZyb21JID0gaTtcbiAgICAgICAgICAgICAgICBmcm9tU3RhcnQgPSBwb3M7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocG9zID4gdG8gJiYgY2hpbGQuZG9tLnBhcmVudE5vZGUgPT0gdGhpcy5kb20pIHtcbiAgICAgICAgICAgICAgICB0b0kgPSBpO1xuICAgICAgICAgICAgICAgIHRvRW5kID0gcHJldkVuZDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByZXZFbmQgPSBlbmQ7XG4gICAgICAgICAgICBwb3MgPSBlbmQgKyBjaGlsZC5icmVha0FmdGVyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGZyb206IGZyb21TdGFydCwgdG86IHRvRW5kIDwgMCA/IG9mZnNldCArIHRoaXMubGVuZ3RoIDogdG9FbmQsXG4gICAgICAgICAgICBzdGFydERPTTogKGZyb21JID8gdGhpcy5jaGlsZHJlbltmcm9tSSAtIDFdLmRvbS5uZXh0U2libGluZyA6IG51bGwpIHx8IHRoaXMuZG9tLmZpcnN0Q2hpbGQsXG4gICAgICAgICAgICBlbmRET006IHRvSSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoICYmIHRvSSA+PSAwID8gdGhpcy5jaGlsZHJlblt0b0ldLmRvbSA6IG51bGwgfTtcbiAgICB9XG4gICAgbWFya0RpcnR5KGFuZFBhcmVudCA9IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuZGlydHkgfD0gMiAvKiBEaXJ0eS5Ob2RlICovO1xuICAgICAgICB0aGlzLm1hcmtQYXJlbnRzRGlydHkoYW5kUGFyZW50KTtcbiAgICB9XG4gICAgbWFya1BhcmVudHNEaXJ0eShjaGlsZExpc3QpIHtcbiAgICAgICAgZm9yIChsZXQgcGFyZW50ID0gdGhpcy5wYXJlbnQ7IHBhcmVudDsgcGFyZW50ID0gcGFyZW50LnBhcmVudCkge1xuICAgICAgICAgICAgaWYgKGNoaWxkTGlzdClcbiAgICAgICAgICAgICAgICBwYXJlbnQuZGlydHkgfD0gMiAvKiBEaXJ0eS5Ob2RlICovO1xuICAgICAgICAgICAgaWYgKHBhcmVudC5kaXJ0eSAmIDEgLyogRGlydHkuQ2hpbGQgKi8pXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgcGFyZW50LmRpcnR5IHw9IDEgLyogRGlydHkuQ2hpbGQgKi87XG4gICAgICAgICAgICBjaGlsZExpc3QgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRQYXJlbnQocGFyZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnBhcmVudCAhPSBwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMuZGlydHkpXG4gICAgICAgICAgICAgICAgdGhpcy5tYXJrUGFyZW50c0RpcnR5KHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldERPTShkb20pIHtcbiAgICAgICAgaWYgKHRoaXMuZG9tKVxuICAgICAgICAgICAgdGhpcy5kb20uY21WaWV3ID0gbnVsbDtcbiAgICAgICAgdGhpcy5kb20gPSBkb207XG4gICAgICAgIGRvbS5jbVZpZXcgPSB0aGlzO1xuICAgIH1cbiAgICBnZXQgcm9vdFZpZXcoKSB7XG4gICAgICAgIGZvciAobGV0IHYgPSB0aGlzOzspIHtcbiAgICAgICAgICAgIGxldCBwYXJlbnQgPSB2LnBhcmVudDtcbiAgICAgICAgICAgIGlmICghcGFyZW50KVxuICAgICAgICAgICAgICAgIHJldHVybiB2O1xuICAgICAgICAgICAgdiA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXBsYWNlQ2hpbGRyZW4oZnJvbSwgdG8sIGNoaWxkcmVuID0gbm9DaGlsZHJlbikge1xuICAgICAgICB0aGlzLm1hcmtEaXJ0eSgpO1xuICAgICAgICBmb3IgKGxldCBpID0gZnJvbTsgaSA8IHRvOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBjaGlsZCA9IHRoaXMuY2hpbGRyZW5baV07XG4gICAgICAgICAgICBpZiAoY2hpbGQucGFyZW50ID09IHRoaXMpXG4gICAgICAgICAgICAgICAgY2hpbGQuZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2hpbGRyZW4uc3BsaWNlKGZyb20sIHRvIC0gZnJvbSwgLi4uY2hpbGRyZW4pO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgY2hpbGRyZW5baV0uc2V0UGFyZW50KHRoaXMpO1xuICAgIH1cbiAgICBpZ25vcmVNdXRhdGlvbihfcmVjKSB7IHJldHVybiBmYWxzZTsgfVxuICAgIGlnbm9yZUV2ZW50KF9ldmVudCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICBjaGlsZEN1cnNvcihwb3MgPSB0aGlzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gbmV3IENoaWxkQ3Vyc29yKHRoaXMuY2hpbGRyZW4sIHBvcywgdGhpcy5jaGlsZHJlbi5sZW5ndGgpO1xuICAgIH1cbiAgICBjaGlsZFBvcyhwb3MsIGJpYXMgPSAxKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoaWxkQ3Vyc29yKCkuZmluZFBvcyhwb3MsIGJpYXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgbGV0IG5hbWUgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWUucmVwbGFjZShcIlZpZXdcIiwgXCJcIik7XG4gICAgICAgIHJldHVybiBuYW1lICsgKHRoaXMuY2hpbGRyZW4ubGVuZ3RoID8gXCIoXCIgKyB0aGlzLmNoaWxkcmVuLmpvaW4oKSArIFwiKVwiIDpcbiAgICAgICAgICAgIHRoaXMubGVuZ3RoID8gXCJbXCIgKyAobmFtZSA9PSBcIlRleHRcIiA/IHRoaXMudGV4dCA6IHRoaXMubGVuZ3RoKSArIFwiXVwiIDogXCJcIikgK1xuICAgICAgICAgICAgKHRoaXMuYnJlYWtBZnRlciA/IFwiI1wiIDogXCJcIik7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQobm9kZSkgeyByZXR1cm4gbm9kZS5jbVZpZXc7IH1cbiAgICBnZXQgaXNFZGl0YWJsZSgpIHsgcmV0dXJuIHRydWU7IH1cbiAgICBtZXJnZShmcm9tLCB0bywgc291cmNlLCBoYXNTdGFydCwgb3BlblN0YXJ0LCBvcGVuRW5kKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgYmVjb21lKG90aGVyKSB7IHJldHVybiBmYWxzZTsgfVxuICAgIGNhblJldXNlRE9NKG90aGVyKSB7IHJldHVybiBvdGhlci5jb25zdHJ1Y3RvciA9PSB0aGlzLmNvbnN0cnVjdG9yOyB9XG4gICAgLy8gV2hlbiB0aGlzIGlzIGEgemVyby1sZW5ndGggdmlldyB3aXRoIGEgc2lkZSwgdGhpcyBzaG91bGQgcmV0dXJuIGFcbiAgICAvLyBudW1iZXIgPD0gMCB0byBpbmRpY2F0ZSBpdCBpcyBiZWZvcmUgaXRzIHBvc2l0aW9uLCBvciBhXG4gICAgLy8gbnVtYmVyID4gMCB3aGVuIGFmdGVyIGl0cyBwb3NpdGlvbi5cbiAgICBnZXRTaWRlKCkgeyByZXR1cm4gMDsgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMucGFyZW50ID0gbnVsbDtcbiAgICB9XG59XG5Db250ZW50Vmlldy5wcm90b3R5cGUuYnJlYWtBZnRlciA9IDA7XG4vLyBSZW1vdmUgYSBET00gbm9kZSBhbmQgcmV0dXJuIGl0cyBuZXh0IHNpYmxpbmcuXG5mdW5jdGlvbiBybSQxKGRvbSkge1xuICAgIGxldCBuZXh0ID0gZG9tLm5leHRTaWJsaW5nO1xuICAgIGRvbS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGRvbSk7XG4gICAgcmV0dXJuIG5leHQ7XG59XG5jbGFzcyBDaGlsZEN1cnNvciB7XG4gICAgY29uc3RydWN0b3IoY2hpbGRyZW4sIHBvcywgaSkge1xuICAgICAgICB0aGlzLmNoaWxkcmVuID0gY2hpbGRyZW47XG4gICAgICAgIHRoaXMucG9zID0gcG9zO1xuICAgICAgICB0aGlzLmkgPSBpO1xuICAgICAgICB0aGlzLm9mZiA9IDA7XG4gICAgfVxuICAgIGZpbmRQb3MocG9zLCBiaWFzID0gMSkge1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBpZiAocG9zID4gdGhpcy5wb3MgfHwgcG9zID09IHRoaXMucG9zICYmXG4gICAgICAgICAgICAgICAgKGJpYXMgPiAwIHx8IHRoaXMuaSA9PSAwIHx8IHRoaXMuY2hpbGRyZW5bdGhpcy5pIC0gMV0uYnJlYWtBZnRlcikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9mZiA9IHBvcyAtIHRoaXMucG9zO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IG5leHQgPSB0aGlzLmNoaWxkcmVuWy0tdGhpcy5pXTtcbiAgICAgICAgICAgIHRoaXMucG9zIC09IG5leHQubGVuZ3RoICsgbmV4dC5icmVha0FmdGVyO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gcmVwbGFjZVJhbmdlKHBhcmVudCwgZnJvbUksIGZyb21PZmYsIHRvSSwgdG9PZmYsIGluc2VydCwgYnJlYWtBdFN0YXJ0LCBvcGVuU3RhcnQsIG9wZW5FbmQpIHtcbiAgICBsZXQgeyBjaGlsZHJlbiB9ID0gcGFyZW50O1xuICAgIGxldCBiZWZvcmUgPSBjaGlsZHJlbi5sZW5ndGggPyBjaGlsZHJlbltmcm9tSV0gOiBudWxsO1xuICAgIGxldCBsYXN0ID0gaW5zZXJ0Lmxlbmd0aCA/IGluc2VydFtpbnNlcnQubGVuZ3RoIC0gMV0gOiBudWxsO1xuICAgIGxldCBicmVha0F0RW5kID0gbGFzdCA/IGxhc3QuYnJlYWtBZnRlciA6IGJyZWFrQXRTdGFydDtcbiAgICAvLyBDaGFuZ2Ugd2l0aGluIGEgc2luZ2xlIGNoaWxkXG4gICAgaWYgKGZyb21JID09IHRvSSAmJiBiZWZvcmUgJiYgIWJyZWFrQXRTdGFydCAmJiAhYnJlYWtBdEVuZCAmJiBpbnNlcnQubGVuZ3RoIDwgMiAmJlxuICAgICAgICBiZWZvcmUubWVyZ2UoZnJvbU9mZiwgdG9PZmYsIGluc2VydC5sZW5ndGggPyBsYXN0IDogbnVsbCwgZnJvbU9mZiA9PSAwLCBvcGVuU3RhcnQsIG9wZW5FbmQpKVxuICAgICAgICByZXR1cm47XG4gICAgaWYgKHRvSSA8IGNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICBsZXQgYWZ0ZXIgPSBjaGlsZHJlblt0b0ldO1xuICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIGVuZCBvZiB0aGUgY2hpbGQgYWZ0ZXIgdGhlIHVwZGF0ZSBpcyBwcmVzZXJ2ZWQgaW4gYGFmdGVyYFxuICAgICAgICBpZiAoYWZ0ZXIgJiYgdG9PZmYgPCBhZnRlci5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIElmIHdlJ3JlIHNwbGl0dGluZyBhIGNoaWxkLCBzZXBhcmF0ZSBwYXJ0IG9mIGl0IHRvIGF2b2lkIHRoYXRcbiAgICAgICAgICAgIC8vIGJlaW5nIG1hbmdsZWQgd2hlbiB1cGRhdGluZyB0aGUgY2hpbGQgYmVmb3JlIHRoZSB1cGRhdGUuXG4gICAgICAgICAgICBpZiAoZnJvbUkgPT0gdG9JKSB7XG4gICAgICAgICAgICAgICAgYWZ0ZXIgPSBhZnRlci5zcGxpdCh0b09mZik7XG4gICAgICAgICAgICAgICAgdG9PZmYgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgdGhlIGVsZW1lbnQgYWZ0ZXIgdGhlIHJlcGxhY2VtZW50IHNob3VsZCBiZSBtZXJnZWQgd2l0aFxuICAgICAgICAgICAgLy8gdGhlIGxhc3QgcmVwbGFjaW5nIGVsZW1lbnQsIHVwZGF0ZSBgY29udGVudGBcbiAgICAgICAgICAgIGlmICghYnJlYWtBdEVuZCAmJiBsYXN0ICYmIGFmdGVyLm1lcmdlKDAsIHRvT2ZmLCBsYXN0LCB0cnVlLCAwLCBvcGVuRW5kKSkge1xuICAgICAgICAgICAgICAgIGluc2VydFtpbnNlcnQubGVuZ3RoIC0gMV0gPSBhZnRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgc3RhcnQgb2YgdGhlIGFmdGVyIGVsZW1lbnQsIGlmIG5lY2Vzc2FyeSwgYW5kXG4gICAgICAgICAgICAgICAgLy8gYWRkIGl0IHRvIGBjb250ZW50YC5cbiAgICAgICAgICAgICAgICBpZiAodG9PZmYpXG4gICAgICAgICAgICAgICAgICAgIGFmdGVyLm1lcmdlKDAsIHRvT2ZmLCBudWxsLCBmYWxzZSwgMCwgb3BlbkVuZCk7XG4gICAgICAgICAgICAgICAgaW5zZXJ0LnB1c2goYWZ0ZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGFmdGVyID09PSBudWxsIHx8IGFmdGVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhZnRlci5icmVha0FmdGVyKSB7XG4gICAgICAgICAgICAvLyBUaGUgZWxlbWVudCBhdCBgdG9JYCBpcyBlbnRpcmVseSBjb3ZlcmVkIGJ5IHRoaXMgcmFuZ2UuXG4gICAgICAgICAgICAvLyBQcmVzZXJ2ZSBpdHMgbGluZSBicmVhaywgaWYgYW55LlxuICAgICAgICAgICAgaWYgKGxhc3QpXG4gICAgICAgICAgICAgICAgbGFzdC5icmVha0FmdGVyID0gMTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBicmVha0F0U3RhcnQgPSAxO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNpbmNlIHdlJ3ZlIGhhbmRsZWQgdGhlIG5leHQgZWxlbWVudCBmcm9tIHRoZSBjdXJyZW50IGVsZW1lbnRzXG4gICAgICAgIC8vIG5vdywgbWFrZSBzdXJlIGB0b0lgIHBvaW50cyBhZnRlciB0aGF0LlxuICAgICAgICB0b0krKztcbiAgICB9XG4gICAgaWYgKGJlZm9yZSkge1xuICAgICAgICBiZWZvcmUuYnJlYWtBZnRlciA9IGJyZWFrQXRTdGFydDtcbiAgICAgICAgaWYgKGZyb21PZmYgPiAwKSB7XG4gICAgICAgICAgICBpZiAoIWJyZWFrQXRTdGFydCAmJiBpbnNlcnQubGVuZ3RoICYmIGJlZm9yZS5tZXJnZShmcm9tT2ZmLCBiZWZvcmUubGVuZ3RoLCBpbnNlcnRbMF0sIGZhbHNlLCBvcGVuU3RhcnQsIDApKSB7XG4gICAgICAgICAgICAgICAgYmVmb3JlLmJyZWFrQWZ0ZXIgPSBpbnNlcnQuc2hpZnQoKS5icmVha0FmdGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZnJvbU9mZiA8IGJlZm9yZS5sZW5ndGggfHwgYmVmb3JlLmNoaWxkcmVuLmxlbmd0aCAmJiBiZWZvcmUuY2hpbGRyZW5bYmVmb3JlLmNoaWxkcmVuLmxlbmd0aCAtIDFdLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgYmVmb3JlLm1lcmdlKGZyb21PZmYsIGJlZm9yZS5sZW5ndGgsIG51bGwsIGZhbHNlLCBvcGVuU3RhcnQsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnJvbUkrKztcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBUcnkgdG8gbWVyZ2Ugd2lkZ2V0cyBvbiB0aGUgYm91bmRhcmllcyBvZiB0aGUgcmVwbGFjZW1lbnRcbiAgICB3aGlsZSAoZnJvbUkgPCB0b0kgJiYgaW5zZXJ0Lmxlbmd0aCkge1xuICAgICAgICBpZiAoY2hpbGRyZW5bdG9JIC0gMV0uYmVjb21lKGluc2VydFtpbnNlcnQubGVuZ3RoIC0gMV0pKSB7XG4gICAgICAgICAgICB0b0ktLTtcbiAgICAgICAgICAgIGluc2VydC5wb3AoKTtcbiAgICAgICAgICAgIG9wZW5FbmQgPSBpbnNlcnQubGVuZ3RoID8gMCA6IG9wZW5TdGFydDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjaGlsZHJlbltmcm9tSV0uYmVjb21lKGluc2VydFswXSkpIHtcbiAgICAgICAgICAgIGZyb21JKys7XG4gICAgICAgICAgICBpbnNlcnQuc2hpZnQoKTtcbiAgICAgICAgICAgIG9wZW5TdGFydCA9IGluc2VydC5sZW5ndGggPyAwIDogb3BlbkVuZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICghaW5zZXJ0Lmxlbmd0aCAmJiBmcm9tSSAmJiB0b0kgPCBjaGlsZHJlbi5sZW5ndGggJiYgIWNoaWxkcmVuW2Zyb21JIC0gMV0uYnJlYWtBZnRlciAmJlxuICAgICAgICBjaGlsZHJlblt0b0ldLm1lcmdlKDAsIDAsIGNoaWxkcmVuW2Zyb21JIC0gMV0sIGZhbHNlLCBvcGVuU3RhcnQsIG9wZW5FbmQpKVxuICAgICAgICBmcm9tSS0tO1xuICAgIGlmIChmcm9tSSA8IHRvSSB8fCBpbnNlcnQubGVuZ3RoKVxuICAgICAgICBwYXJlbnQucmVwbGFjZUNoaWxkcmVuKGZyb21JLCB0b0ksIGluc2VydCk7XG59XG5mdW5jdGlvbiBtZXJnZUNoaWxkcmVuSW50byhwYXJlbnQsIGZyb20sIHRvLCBpbnNlcnQsIG9wZW5TdGFydCwgb3BlbkVuZCkge1xuICAgIGxldCBjdXIgPSBwYXJlbnQuY2hpbGRDdXJzb3IoKTtcbiAgICBsZXQgeyBpOiB0b0ksIG9mZjogdG9PZmYgfSA9IGN1ci5maW5kUG9zKHRvLCAxKTtcbiAgICBsZXQgeyBpOiBmcm9tSSwgb2ZmOiBmcm9tT2ZmIH0gPSBjdXIuZmluZFBvcyhmcm9tLCAtMSk7XG4gICAgbGV0IGRMZW4gPSBmcm9tIC0gdG87XG4gICAgZm9yIChsZXQgdmlldyBvZiBpbnNlcnQpXG4gICAgICAgIGRMZW4gKz0gdmlldy5sZW5ndGg7XG4gICAgcGFyZW50Lmxlbmd0aCArPSBkTGVuO1xuICAgIHJlcGxhY2VSYW5nZShwYXJlbnQsIGZyb21JLCBmcm9tT2ZmLCB0b0ksIHRvT2ZmLCBpbnNlcnQsIDAsIG9wZW5TdGFydCwgb3BlbkVuZCk7XG59XG5cbmxldCBuYXYgPSB0eXBlb2YgbmF2aWdhdG9yICE9IFwidW5kZWZpbmVkXCIgPyBuYXZpZ2F0b3IgOiB7IHVzZXJBZ2VudDogXCJcIiwgdmVuZG9yOiBcIlwiLCBwbGF0Zm9ybTogXCJcIiB9O1xubGV0IGRvYyA9IHR5cGVvZiBkb2N1bWVudCAhPSBcInVuZGVmaW5lZFwiID8gZG9jdW1lbnQgOiB7IGRvY3VtZW50RWxlbWVudDogeyBzdHlsZToge30gfSB9O1xuY29uc3QgaWVfZWRnZSA9IC8qQF9fUFVSRV9fKi8vRWRnZVxcLyhcXGQrKS8uZXhlYyhuYXYudXNlckFnZW50KTtcbmNvbnN0IGllX3VwdG8xMCA9IC8qQF9fUFVSRV9fKi8vTVNJRSBcXGQvLnRlc3QobmF2LnVzZXJBZ2VudCk7XG5jb25zdCBpZV8xMXVwID0gLypAX19QVVJFX18qLy9UcmlkZW50XFwvKD86WzctOV18XFxkezIsfSlcXC4uKnJ2OihcXGQrKS8uZXhlYyhuYXYudXNlckFnZW50KTtcbmNvbnN0IGllID0gISEoaWVfdXB0bzEwIHx8IGllXzExdXAgfHwgaWVfZWRnZSk7XG5jb25zdCBnZWNrbyA9ICFpZSAmJiAvKkBfX1BVUkVfXyovL2dlY2tvXFwvKFxcZCspL2kudGVzdChuYXYudXNlckFnZW50KTtcbmNvbnN0IGNocm9tZSA9ICFpZSAmJiAvKkBfX1BVUkVfXyovL0Nocm9tZVxcLyhcXGQrKS8uZXhlYyhuYXYudXNlckFnZW50KTtcbmNvbnN0IHdlYmtpdCA9IFwid2Via2l0Rm9udFNtb290aGluZ1wiIGluIGRvYy5kb2N1bWVudEVsZW1lbnQuc3R5bGU7XG5jb25zdCBzYWZhcmkgPSAhaWUgJiYgLypAX19QVVJFX18qLy9BcHBsZSBDb21wdXRlci8udGVzdChuYXYudmVuZG9yKTtcbmNvbnN0IGlvcyA9IHNhZmFyaSAmJiAoLypAX19QVVJFX18qLy9Nb2JpbGVcXC9cXHcrLy50ZXN0KG5hdi51c2VyQWdlbnQpIHx8IG5hdi5tYXhUb3VjaFBvaW50cyA+IDIpO1xudmFyIGJyb3dzZXIgPSB7XG4gICAgbWFjOiBpb3MgfHwgLypAX19QVVJFX18qLy9NYWMvLnRlc3QobmF2LnBsYXRmb3JtKSxcbiAgICB3aW5kb3dzOiAvKkBfX1BVUkVfXyovL1dpbi8udGVzdChuYXYucGxhdGZvcm0pLFxuICAgIGxpbnV4OiAvKkBfX1BVUkVfXyovL0xpbnV4fFgxMS8udGVzdChuYXYucGxhdGZvcm0pLFxuICAgIGllLFxuICAgIGllX3ZlcnNpb246IGllX3VwdG8xMCA/IGRvYy5kb2N1bWVudE1vZGUgfHwgNiA6IGllXzExdXAgPyAraWVfMTF1cFsxXSA6IGllX2VkZ2UgPyAraWVfZWRnZVsxXSA6IDAsXG4gICAgZ2Vja28sXG4gICAgZ2Vja29fdmVyc2lvbjogZ2Vja28gPyArKC8qQF9fUFVSRV9fKi8vRmlyZWZveFxcLyhcXGQrKS8uZXhlYyhuYXYudXNlckFnZW50KSB8fCBbMCwgMF0pWzFdIDogMCxcbiAgICBjaHJvbWU6ICEhY2hyb21lLFxuICAgIGNocm9tZV92ZXJzaW9uOiBjaHJvbWUgPyArY2hyb21lWzFdIDogMCxcbiAgICBpb3MsXG4gICAgYW5kcm9pZDogLypAX19QVVJFX18qLy9BbmRyb2lkXFxiLy50ZXN0KG5hdi51c2VyQWdlbnQpLFxuICAgIHdlYmtpdCxcbiAgICBzYWZhcmksXG4gICAgd2Via2l0X3ZlcnNpb246IHdlYmtpdCA/ICsoLypAX19QVVJFX18qLy9cXGJBcHBsZVdlYktpdFxcLyhcXGQrKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KSB8fCBbMCwgMF0pWzFdIDogMCxcbiAgICB0YWJTaXplOiBkb2MuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnRhYlNpemUgIT0gbnVsbCA/IFwidGFiLXNpemVcIiA6IFwiLW1vei10YWItc2l6ZVwiXG59O1xuXG5jb25zdCBNYXhKb2luTGVuID0gMjU2O1xuY2xhc3MgVGV4dFZpZXcgZXh0ZW5kcyBDb250ZW50VmlldyB7XG4gICAgY29uc3RydWN0b3IodGV4dCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnRleHQgPSB0ZXh0O1xuICAgIH1cbiAgICBnZXQgbGVuZ3RoKCkgeyByZXR1cm4gdGhpcy50ZXh0Lmxlbmd0aDsgfVxuICAgIGNyZWF0ZURPTSh0ZXh0RE9NKSB7XG4gICAgICAgIHRoaXMuc2V0RE9NKHRleHRET00gfHwgZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGhpcy50ZXh0KSk7XG4gICAgfVxuICAgIHN5bmModHJhY2spIHtcbiAgICAgICAgaWYgKCF0aGlzLmRvbSlcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlRE9NKCk7XG4gICAgICAgIGlmICh0aGlzLmRvbS5ub2RlVmFsdWUgIT0gdGhpcy50ZXh0KSB7XG4gICAgICAgICAgICBpZiAodHJhY2sgJiYgdHJhY2subm9kZSA9PSB0aGlzLmRvbSlcbiAgICAgICAgICAgICAgICB0cmFjay53cml0dGVuID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZG9tLm5vZGVWYWx1ZSA9IHRoaXMudGV4dDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXVzZURPTShkb20pIHtcbiAgICAgICAgaWYgKGRvbS5ub2RlVHlwZSA9PSAzKVxuICAgICAgICAgICAgdGhpcy5jcmVhdGVET00oZG9tKTtcbiAgICB9XG4gICAgbWVyZ2UoZnJvbSwgdG8sIHNvdXJjZSkge1xuICAgICAgICBpZiAoc291cmNlICYmICghKHNvdXJjZSBpbnN0YW5jZW9mIFRleHRWaWV3KSB8fCB0aGlzLmxlbmd0aCAtICh0byAtIGZyb20pICsgc291cmNlLmxlbmd0aCA+IE1heEpvaW5MZW4pKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB0aGlzLnRleHQgPSB0aGlzLnRleHQuc2xpY2UoMCwgZnJvbSkgKyAoc291cmNlID8gc291cmNlLnRleHQgOiBcIlwiKSArIHRoaXMudGV4dC5zbGljZSh0byk7XG4gICAgICAgIHRoaXMubWFya0RpcnR5KCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBzcGxpdChmcm9tKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBuZXcgVGV4dFZpZXcodGhpcy50ZXh0LnNsaWNlKGZyb20pKTtcbiAgICAgICAgdGhpcy50ZXh0ID0gdGhpcy50ZXh0LnNsaWNlKDAsIGZyb20pO1xuICAgICAgICB0aGlzLm1hcmtEaXJ0eSgpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBsb2NhbFBvc0Zyb21ET00obm9kZSwgb2Zmc2V0KSB7XG4gICAgICAgIHJldHVybiBub2RlID09IHRoaXMuZG9tID8gb2Zmc2V0IDogb2Zmc2V0ID8gdGhpcy50ZXh0Lmxlbmd0aCA6IDA7XG4gICAgfVxuICAgIGRvbUF0UG9zKHBvcykgeyByZXR1cm4gbmV3IERPTVBvcyh0aGlzLmRvbSwgcG9zKTsgfVxuICAgIGRvbUJvdW5kc0Fyb3VuZChfZnJvbSwgX3RvLCBvZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIHsgZnJvbTogb2Zmc2V0LCB0bzogb2Zmc2V0ICsgdGhpcy5sZW5ndGgsIHN0YXJ0RE9NOiB0aGlzLmRvbSwgZW5kRE9NOiB0aGlzLmRvbS5uZXh0U2libGluZyB9O1xuICAgIH1cbiAgICBjb29yZHNBdChwb3MsIHNpZGUpIHtcbiAgICAgICAgcmV0dXJuIHRleHRDb29yZHModGhpcy5kb20sIHBvcywgc2lkZSk7XG4gICAgfVxufVxuY2xhc3MgTWFya1ZpZXcgZXh0ZW5kcyBDb250ZW50VmlldyB7XG4gICAgY29uc3RydWN0b3IobWFyaywgY2hpbGRyZW4gPSBbXSwgbGVuZ3RoID0gMCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLm1hcmsgPSBtYXJrO1xuICAgICAgICB0aGlzLmNoaWxkcmVuID0gY2hpbGRyZW47XG4gICAgICAgIHRoaXMubGVuZ3RoID0gbGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBjaCBvZiBjaGlsZHJlbilcbiAgICAgICAgICAgIGNoLnNldFBhcmVudCh0aGlzKTtcbiAgICB9XG4gICAgc2V0QXR0cnMoZG9tKSB7XG4gICAgICAgIGNsZWFyQXR0cmlidXRlcyhkb20pO1xuICAgICAgICBpZiAodGhpcy5tYXJrLmNsYXNzKVxuICAgICAgICAgICAgZG9tLmNsYXNzTmFtZSA9IHRoaXMubWFyay5jbGFzcztcbiAgICAgICAgaWYgKHRoaXMubWFyay5hdHRycylcbiAgICAgICAgICAgIGZvciAobGV0IG5hbWUgaW4gdGhpcy5tYXJrLmF0dHJzKVxuICAgICAgICAgICAgICAgIGRvbS5zZXRBdHRyaWJ1dGUobmFtZSwgdGhpcy5tYXJrLmF0dHJzW25hbWVdKTtcbiAgICAgICAgcmV0dXJuIGRvbTtcbiAgICB9XG4gICAgcmV1c2VET00obm9kZSkge1xuICAgICAgICBpZiAobm9kZS5ub2RlTmFtZSA9PSB0aGlzLm1hcmsudGFnTmFtZS50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICAgICAgICB0aGlzLnNldERPTShub2RlKTtcbiAgICAgICAgICAgIHRoaXMuZGlydHkgfD0gNCAvKiBEaXJ0eS5BdHRycyAqLyB8IDIgLyogRGlydHkuTm9kZSAqLztcbiAgICAgICAgfVxuICAgIH1cbiAgICBzeW5jKHRyYWNrKSB7XG4gICAgICAgIGlmICghdGhpcy5kb20pXG4gICAgICAgICAgICB0aGlzLnNldERPTSh0aGlzLnNldEF0dHJzKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGhpcy5tYXJrLnRhZ05hbWUpKSk7XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZGlydHkgJiA0IC8qIERpcnR5LkF0dHJzICovKVxuICAgICAgICAgICAgdGhpcy5zZXRBdHRycyh0aGlzLmRvbSk7XG4gICAgICAgIHN1cGVyLnN5bmModHJhY2spO1xuICAgIH1cbiAgICBtZXJnZShmcm9tLCB0bywgc291cmNlLCBfaGFzU3RhcnQsIG9wZW5TdGFydCwgb3BlbkVuZCkge1xuICAgICAgICBpZiAoc291cmNlICYmICghKHNvdXJjZSBpbnN0YW5jZW9mIE1hcmtWaWV3ICYmIHNvdXJjZS5tYXJrLmVxKHRoaXMubWFyaykpIHx8XG4gICAgICAgICAgICAoZnJvbSAmJiBvcGVuU3RhcnQgPD0gMCkgfHwgKHRvIDwgdGhpcy5sZW5ndGggJiYgb3BlbkVuZCA8PSAwKSkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIG1lcmdlQ2hpbGRyZW5JbnRvKHRoaXMsIGZyb20sIHRvLCBzb3VyY2UgPyBzb3VyY2UuY2hpbGRyZW4gOiBbXSwgb3BlblN0YXJ0IC0gMSwgb3BlbkVuZCAtIDEpO1xuICAgICAgICB0aGlzLm1hcmtEaXJ0eSgpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgc3BsaXQoZnJvbSkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gW10sIG9mZiA9IDAsIGRldGFjaEZyb20gPSAtMSwgaSA9IDA7XG4gICAgICAgIGZvciAobGV0IGVsdCBvZiB0aGlzLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICBsZXQgZW5kID0gb2ZmICsgZWx0Lmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChlbmQgPiBmcm9tKVxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKG9mZiA8IGZyb20gPyBlbHQuc3BsaXQoZnJvbSAtIG9mZikgOiBlbHQpO1xuICAgICAgICAgICAgaWYgKGRldGFjaEZyb20gPCAwICYmIG9mZiA+PSBmcm9tKVxuICAgICAgICAgICAgICAgIGRldGFjaEZyb20gPSBpO1xuICAgICAgICAgICAgb2ZmID0gZW5kO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgICAgIGxldCBsZW5ndGggPSB0aGlzLmxlbmd0aCAtIGZyb207XG4gICAgICAgIHRoaXMubGVuZ3RoID0gZnJvbTtcbiAgICAgICAgaWYgKGRldGFjaEZyb20gPiAtMSkge1xuICAgICAgICAgICAgdGhpcy5jaGlsZHJlbi5sZW5ndGggPSBkZXRhY2hGcm9tO1xuICAgICAgICAgICAgdGhpcy5tYXJrRGlydHkoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IE1hcmtWaWV3KHRoaXMubWFyaywgcmVzdWx0LCBsZW5ndGgpO1xuICAgIH1cbiAgICBkb21BdFBvcyhwb3MpIHtcbiAgICAgICAgcmV0dXJuIGlubGluZURPTUF0UG9zKHRoaXMsIHBvcyk7XG4gICAgfVxuICAgIGNvb3Jkc0F0KHBvcywgc2lkZSkge1xuICAgICAgICByZXR1cm4gY29vcmRzSW5DaGlsZHJlbih0aGlzLCBwb3MsIHNpZGUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHRleHRDb29yZHModGV4dCwgcG9zLCBzaWRlKSB7XG4gICAgbGV0IGxlbmd0aCA9IHRleHQubm9kZVZhbHVlLmxlbmd0aDtcbiAgICBpZiAocG9zID4gbGVuZ3RoKVxuICAgICAgICBwb3MgPSBsZW5ndGg7XG4gICAgbGV0IGZyb20gPSBwb3MsIHRvID0gcG9zLCBmbGF0dGVuID0gMDtcbiAgICBpZiAocG9zID09IDAgJiYgc2lkZSA8IDAgfHwgcG9zID09IGxlbmd0aCAmJiBzaWRlID49IDApIHtcbiAgICAgICAgaWYgKCEoYnJvd3Nlci5jaHJvbWUgfHwgYnJvd3Nlci5nZWNrbykpIHsgLy8gVGhlc2UgYnJvd3NlcnMgcmVsaWFibHkgcmV0dXJuIHZhbGlkIHJlY3RhbmdsZXMgZm9yIGVtcHR5IHJhbmdlc1xuICAgICAgICAgICAgaWYgKHBvcykge1xuICAgICAgICAgICAgICAgIGZyb20tLTtcbiAgICAgICAgICAgICAgICBmbGF0dGVuID0gMTtcbiAgICAgICAgICAgIH0gLy8gRklYTUUgdGhpcyBpcyB3cm9uZyBpbiBSVEwgdGV4dFxuICAgICAgICAgICAgZWxzZSBpZiAodG8gPCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0bysrO1xuICAgICAgICAgICAgICAgIGZsYXR0ZW4gPSAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKHNpZGUgPCAwKVxuICAgICAgICAgICAgZnJvbS0tO1xuICAgICAgICBlbHNlIGlmICh0byA8IGxlbmd0aClcbiAgICAgICAgICAgIHRvKys7XG4gICAgfVxuICAgIGxldCByZWN0cyA9IHRleHRSYW5nZSh0ZXh0LCBmcm9tLCB0bykuZ2V0Q2xpZW50UmVjdHMoKTtcbiAgICBpZiAoIXJlY3RzLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIFJlY3QwO1xuICAgIGxldCByZWN0ID0gcmVjdHNbKGZsYXR0ZW4gPyBmbGF0dGVuIDwgMCA6IHNpZGUgPj0gMCkgPyAwIDogcmVjdHMubGVuZ3RoIC0gMV07XG4gICAgaWYgKGJyb3dzZXIuc2FmYXJpICYmICFmbGF0dGVuICYmIHJlY3Qud2lkdGggPT0gMClcbiAgICAgICAgcmVjdCA9IEFycmF5LnByb3RvdHlwZS5maW5kLmNhbGwocmVjdHMsIHIgPT4gci53aWR0aCkgfHwgcmVjdDtcbiAgICByZXR1cm4gZmxhdHRlbiA/IGZsYXR0ZW5SZWN0KHJlY3QsIGZsYXR0ZW4gPCAwKSA6IHJlY3QgfHwgbnVsbDtcbn1cbi8vIEFsc28gdXNlZCBmb3IgY29sbGFwc2VkIHJhbmdlcyB0aGF0IGRvbid0IGhhdmUgYSBwbGFjZWhvbGRlciB3aWRnZXQhXG5jbGFzcyBXaWRnZXRWaWV3IGV4dGVuZHMgQ29udGVudFZpZXcge1xuICAgIGNvbnN0cnVjdG9yKHdpZGdldCwgbGVuZ3RoLCBzaWRlKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMud2lkZ2V0ID0gd2lkZ2V0O1xuICAgICAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aDtcbiAgICAgICAgdGhpcy5zaWRlID0gc2lkZTtcbiAgICAgICAgdGhpcy5wcmV2V2lkZ2V0ID0gbnVsbDtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZSh3aWRnZXQsIGxlbmd0aCwgc2lkZSkge1xuICAgICAgICByZXR1cm4gbmV3ICh3aWRnZXQuY3VzdG9tVmlldyB8fCBXaWRnZXRWaWV3KSh3aWRnZXQsIGxlbmd0aCwgc2lkZSk7XG4gICAgfVxuICAgIHNwbGl0KGZyb20pIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFdpZGdldFZpZXcuY3JlYXRlKHRoaXMud2lkZ2V0LCB0aGlzLmxlbmd0aCAtIGZyb20sIHRoaXMuc2lkZSk7XG4gICAgICAgIHRoaXMubGVuZ3RoIC09IGZyb207XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIHN5bmMoKSB7XG4gICAgICAgIGlmICghdGhpcy5kb20gfHwgIXRoaXMud2lkZ2V0LnVwZGF0ZURPTSh0aGlzLmRvbSkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRvbSAmJiB0aGlzLnByZXZXaWRnZXQpXG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2V2lkZ2V0LmRlc3Ryb3kodGhpcy5kb20pO1xuICAgICAgICAgICAgdGhpcy5wcmV2V2lkZ2V0ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuc2V0RE9NKHRoaXMud2lkZ2V0LnRvRE9NKHRoaXMuZWRpdG9yVmlldykpO1xuICAgICAgICAgICAgdGhpcy5kb20uY29udGVudEVkaXRhYmxlID0gXCJmYWxzZVwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFNpZGUoKSB7IHJldHVybiB0aGlzLnNpZGU7IH1cbiAgICBtZXJnZShmcm9tLCB0bywgc291cmNlLCBoYXNTdGFydCwgb3BlblN0YXJ0LCBvcGVuRW5kKSB7XG4gICAgICAgIGlmIChzb3VyY2UgJiYgKCEoc291cmNlIGluc3RhbmNlb2YgV2lkZ2V0VmlldykgfHwgIXRoaXMud2lkZ2V0LmNvbXBhcmUoc291cmNlLndpZGdldCkgfHxcbiAgICAgICAgICAgIGZyb20gPiAwICYmIG9wZW5TdGFydCA8PSAwIHx8IHRvIDwgdGhpcy5sZW5ndGggJiYgb3BlbkVuZCA8PSAwKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBmcm9tICsgKHNvdXJjZSA/IHNvdXJjZS5sZW5ndGggOiAwKSArICh0aGlzLmxlbmd0aCAtIHRvKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGJlY29tZShvdGhlcikge1xuICAgICAgICBpZiAob3RoZXIubGVuZ3RoID09IHRoaXMubGVuZ3RoICYmIG90aGVyIGluc3RhbmNlb2YgV2lkZ2V0VmlldyAmJiBvdGhlci5zaWRlID09IHRoaXMuc2lkZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMud2lkZ2V0LmNvbnN0cnVjdG9yID09IG90aGVyLndpZGdldC5jb25zdHJ1Y3Rvcikge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy53aWRnZXQuZXEob3RoZXIud2lkZ2V0KSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXJrRGlydHkodHJ1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZG9tICYmICF0aGlzLnByZXZXaWRnZXQpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJldldpZGdldCA9IHRoaXMud2lkZ2V0O1xuICAgICAgICAgICAgICAgIHRoaXMud2lkZ2V0ID0gb3RoZXIud2lkZ2V0O1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWdub3JlTXV0YXRpb24oKSB7IHJldHVybiB0cnVlOyB9XG4gICAgaWdub3JlRXZlbnQoZXZlbnQpIHsgcmV0dXJuIHRoaXMud2lkZ2V0Lmlnbm9yZUV2ZW50KGV2ZW50KTsgfVxuICAgIGdldCBvdmVycmlkZURPTVRleHQoKSB7XG4gICAgICAgIGlmICh0aGlzLmxlbmd0aCA9PSAwKVxuICAgICAgICAgICAgcmV0dXJuIFRleHQuZW1wdHk7XG4gICAgICAgIGxldCB0b3AgPSB0aGlzO1xuICAgICAgICB3aGlsZSAodG9wLnBhcmVudClcbiAgICAgICAgICAgIHRvcCA9IHRvcC5wYXJlbnQ7XG4gICAgICAgIGxldCB2aWV3ID0gdG9wLmVkaXRvclZpZXcsIHRleHQgPSB2aWV3ICYmIHZpZXcuc3RhdGUuZG9jLCBzdGFydCA9IHRoaXMucG9zQXRTdGFydDtcbiAgICAgICAgcmV0dXJuIHRleHQgPyB0ZXh0LnNsaWNlKHN0YXJ0LCBzdGFydCArIHRoaXMubGVuZ3RoKSA6IFRleHQuZW1wdHk7XG4gICAgfVxuICAgIGRvbUF0UG9zKHBvcykge1xuICAgICAgICByZXR1cm4gcG9zID09IDAgPyBET01Qb3MuYmVmb3JlKHRoaXMuZG9tKSA6IERPTVBvcy5hZnRlcih0aGlzLmRvbSwgcG9zID09IHRoaXMubGVuZ3RoKTtcbiAgICB9XG4gICAgZG9tQm91bmRzQXJvdW5kKCkgeyByZXR1cm4gbnVsbDsgfVxuICAgIGNvb3Jkc0F0KHBvcywgc2lkZSkge1xuICAgICAgICBsZXQgcmVjdHMgPSB0aGlzLmRvbS5nZXRDbGllbnRSZWN0cygpLCByZWN0ID0gbnVsbDtcbiAgICAgICAgaWYgKCFyZWN0cy5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gUmVjdDA7XG4gICAgICAgIGZvciAobGV0IGkgPSBwb3MgPiAwID8gcmVjdHMubGVuZ3RoIC0gMSA6IDA7OyBpICs9IChwb3MgPiAwID8gLTEgOiAxKSkge1xuICAgICAgICAgICAgcmVjdCA9IHJlY3RzW2ldO1xuICAgICAgICAgICAgaWYgKHBvcyA+IDAgPyBpID09IDAgOiBpID09IHJlY3RzLmxlbmd0aCAtIDEgfHwgcmVjdC50b3AgPCByZWN0LmJvdHRvbSlcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5sZW5ndGggPyByZWN0IDogZmxhdHRlblJlY3QocmVjdCwgdGhpcy5zaWRlID4gMCk7XG4gICAgfVxuICAgIGdldCBpc0VkaXRhYmxlKCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBzdXBlci5kZXN0cm95KCk7XG4gICAgICAgIGlmICh0aGlzLmRvbSlcbiAgICAgICAgICAgIHRoaXMud2lkZ2V0LmRlc3Ryb3kodGhpcy5kb20pO1xuICAgIH1cbn1cbmNsYXNzIENvbXBvc2l0aW9uVmlldyBleHRlbmRzIFdpZGdldFZpZXcge1xuICAgIGRvbUF0UG9zKHBvcykge1xuICAgICAgICBsZXQgeyB0b3BWaWV3LCB0ZXh0IH0gPSB0aGlzLndpZGdldDtcbiAgICAgICAgaWYgKCF0b3BWaWV3KVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBET01Qb3ModGV4dCwgTWF0aC5taW4ocG9zLCB0ZXh0Lm5vZGVWYWx1ZS5sZW5ndGgpKTtcbiAgICAgICAgcmV0dXJuIHNjYW5Db21wb3NpdGlvblRyZWUocG9zLCAwLCB0b3BWaWV3LCB0ZXh0LCAodiwgcCkgPT4gdi5kb21BdFBvcyhwKSwgcCA9PiBuZXcgRE9NUG9zKHRleHQsIE1hdGgubWluKHAsIHRleHQubm9kZVZhbHVlLmxlbmd0aCkpKTtcbiAgICB9XG4gICAgc3luYygpIHsgdGhpcy5zZXRET00odGhpcy53aWRnZXQudG9ET00oKSk7IH1cbiAgICBsb2NhbFBvc0Zyb21ET00obm9kZSwgb2Zmc2V0KSB7XG4gICAgICAgIGxldCB7IHRvcFZpZXcsIHRleHQgfSA9IHRoaXMud2lkZ2V0O1xuICAgICAgICBpZiAoIXRvcFZpZXcpXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5taW4ob2Zmc2V0LCB0aGlzLmxlbmd0aCk7XG4gICAgICAgIHJldHVybiBwb3NGcm9tRE9NSW5Db21wb3NpdGlvblRyZWUobm9kZSwgb2Zmc2V0LCB0b3BWaWV3LCB0ZXh0KTtcbiAgICB9XG4gICAgaWdub3JlTXV0YXRpb24oKSB7IHJldHVybiBmYWxzZTsgfVxuICAgIGdldCBvdmVycmlkZURPTVRleHQoKSB7IHJldHVybiBudWxsOyB9XG4gICAgY29vcmRzQXQocG9zLCBzaWRlKSB7XG4gICAgICAgIGxldCB7IHRvcFZpZXcsIHRleHQgfSA9IHRoaXMud2lkZ2V0O1xuICAgICAgICBpZiAoIXRvcFZpZXcpXG4gICAgICAgICAgICByZXR1cm4gdGV4dENvb3Jkcyh0ZXh0LCBwb3MsIHNpZGUpO1xuICAgICAgICByZXR1cm4gc2NhbkNvbXBvc2l0aW9uVHJlZShwb3MsIHNpZGUsIHRvcFZpZXcsIHRleHQsICh2LCBwb3MsIHNpZGUpID0+IHYuY29vcmRzQXQocG9zLCBzaWRlKSwgKHBvcywgc2lkZSkgPT4gdGV4dENvb3Jkcyh0ZXh0LCBwb3MsIHNpZGUpKTtcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBzdXBlci5kZXN0cm95KCk7XG4gICAgICAgIChfYSA9IHRoaXMud2lkZ2V0LnRvcFZpZXcpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kZXN0cm95KCk7XG4gICAgfVxuICAgIGdldCBpc0VkaXRhYmxlKCkgeyByZXR1cm4gdHJ1ZTsgfVxuICAgIGNhblJldXNlRE9NKCkgeyByZXR1cm4gdHJ1ZTsgfVxufVxuLy8gVXNlcyB0aGUgb2xkIHN0cnVjdHVyZSBvZiBhIGNodW5rIG9mIGNvbnRlbnQgdmlldyBmcm96ZW4gZm9yXG4vLyBjb21wb3NpdGlvbiB0byB0cnkgYW5kIGZpbmQgYSByZWFzb25hYmxlIERPTSBsb2NhdGlvbiBmb3IgdGhlIGdpdmVuXG4vLyBvZmZzZXQuXG5mdW5jdGlvbiBzY2FuQ29tcG9zaXRpb25UcmVlKHBvcywgc2lkZSwgdmlldywgdGV4dCwgZW50ZXJWaWV3LCBmcm9tVGV4dCkge1xuICAgIGlmICh2aWV3IGluc3RhbmNlb2YgTWFya1ZpZXcpIHtcbiAgICAgICAgZm9yIChsZXQgY2hpbGQgPSB2aWV3LmRvbS5maXJzdENoaWxkOyBjaGlsZDsgY2hpbGQgPSBjaGlsZC5uZXh0U2libGluZykge1xuICAgICAgICAgICAgbGV0IGRlc2MgPSBDb250ZW50Vmlldy5nZXQoY2hpbGQpO1xuICAgICAgICAgICAgaWYgKCFkZXNjKVxuICAgICAgICAgICAgICAgIHJldHVybiBmcm9tVGV4dChwb3MsIHNpZGUpO1xuICAgICAgICAgICAgbGV0IGhhc0NvbXAgPSBjb250YWlucyhjaGlsZCwgdGV4dCk7XG4gICAgICAgICAgICBsZXQgbGVuID0gZGVzYy5sZW5ndGggKyAoaGFzQ29tcCA/IHRleHQubm9kZVZhbHVlLmxlbmd0aCA6IDApO1xuICAgICAgICAgICAgaWYgKHBvcyA8IGxlbiB8fCBwb3MgPT0gbGVuICYmIGRlc2MuZ2V0U2lkZSgpIDw9IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIGhhc0NvbXAgPyBzY2FuQ29tcG9zaXRpb25UcmVlKHBvcywgc2lkZSwgZGVzYywgdGV4dCwgZW50ZXJWaWV3LCBmcm9tVGV4dCkgOiBlbnRlclZpZXcoZGVzYywgcG9zLCBzaWRlKTtcbiAgICAgICAgICAgIHBvcyAtPSBsZW47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVudGVyVmlldyh2aWV3LCB2aWV3Lmxlbmd0aCwgLTEpO1xuICAgIH1cbiAgICBlbHNlIGlmICh2aWV3LmRvbSA9PSB0ZXh0KSB7XG4gICAgICAgIHJldHVybiBmcm9tVGV4dChwb3MsIHNpZGUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGVudGVyVmlldyh2aWV3LCBwb3MsIHNpZGUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHBvc0Zyb21ET01JbkNvbXBvc2l0aW9uVHJlZShub2RlLCBvZmZzZXQsIHZpZXcsIHRleHQpIHtcbiAgICBpZiAodmlldyBpbnN0YW5jZW9mIE1hcmtWaWV3KSB7XG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIHZpZXcuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGxldCBwb3MgPSAwLCBoYXNDb21wID0gY29udGFpbnMoY2hpbGQuZG9tLCB0ZXh0KTtcbiAgICAgICAgICAgIGlmIChjb250YWlucyhjaGlsZC5kb20sIG5vZGUpKVxuICAgICAgICAgICAgICAgIHJldHVybiBwb3MgKyAoaGFzQ29tcCA/IHBvc0Zyb21ET01JbkNvbXBvc2l0aW9uVHJlZShub2RlLCBvZmZzZXQsIGNoaWxkLCB0ZXh0KSA6IGNoaWxkLmxvY2FsUG9zRnJvbURPTShub2RlLCBvZmZzZXQpKTtcbiAgICAgICAgICAgIHBvcyArPSBoYXNDb21wID8gdGV4dC5ub2RlVmFsdWUubGVuZ3RoIDogY2hpbGQubGVuZ3RoO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKHZpZXcuZG9tID09IHRleHQpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKG9mZnNldCwgdGV4dC5ub2RlVmFsdWUubGVuZ3RoKTtcbiAgICB9XG4gICAgcmV0dXJuIHZpZXcubG9jYWxQb3NGcm9tRE9NKG5vZGUsIG9mZnNldCk7XG59XG4vLyBUaGVzZSBhcmUgZHJhd24gYXJvdW5kIHVuZWRpdGFibGUgd2lkZ2V0cyB0byBhdm9pZCBhIG51bWJlciBvZlxuLy8gYnJvd3NlciBidWdzIHRoYXQgc2hvdyB1cCB3aGVuIHRoZSBjdXJzb3IgaXMgZGlyZWN0bHkgbmV4dCB0b1xuLy8gdW5lZGl0YWJsZSBpbmxpbmUgY29udGVudC5cbmNsYXNzIFdpZGdldEJ1ZmZlclZpZXcgZXh0ZW5kcyBDb250ZW50VmlldyB7XG4gICAgY29uc3RydWN0b3Ioc2lkZSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnNpZGUgPSBzaWRlO1xuICAgIH1cbiAgICBnZXQgbGVuZ3RoKCkgeyByZXR1cm4gMDsgfVxuICAgIG1lcmdlKCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICBiZWNvbWUob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIG90aGVyIGluc3RhbmNlb2YgV2lkZ2V0QnVmZmVyVmlldyAmJiBvdGhlci5zaWRlID09IHRoaXMuc2lkZTtcbiAgICB9XG4gICAgc3BsaXQoKSB7IHJldHVybiBuZXcgV2lkZ2V0QnVmZmVyVmlldyh0aGlzLnNpZGUpOyB9XG4gICAgc3luYygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRvbSkge1xuICAgICAgICAgICAgbGV0IGRvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgICAgICAgICBkb20uY2xhc3NOYW1lID0gXCJjbS13aWRnZXRCdWZmZXJcIjtcbiAgICAgICAgICAgIGRvbS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLCBcInRydWVcIik7XG4gICAgICAgICAgICB0aGlzLnNldERPTShkb20pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFNpZGUoKSB7IHJldHVybiB0aGlzLnNpZGU7IH1cbiAgICBkb21BdFBvcyhwb3MpIHsgcmV0dXJuIERPTVBvcy5iZWZvcmUodGhpcy5kb20pOyB9XG4gICAgbG9jYWxQb3NGcm9tRE9NKCkgeyByZXR1cm4gMDsgfVxuICAgIGRvbUJvdW5kc0Fyb3VuZCgpIHsgcmV0dXJuIG51bGw7IH1cbiAgICBjb29yZHNBdChwb3MpIHtcbiAgICAgICAgbGV0IGltZ1JlY3QgPSB0aGlzLmRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgLy8gU2luY2UgdGhlIDxpbWc+IGhlaWdodCBkb2Vzbid0IGNvcnJlc3BvbmQgdG8gdGV4dCBoZWlnaHQsIHRyeVxuICAgICAgICAvLyB0byBib3Jyb3cgdGhlIGhlaWdodCBmcm9tIHNvbWUgc2libGluZyBub2RlLlxuICAgICAgICBsZXQgc2libGluZ1JlY3QgPSBpbmxpbmVTaWJsaW5nUmVjdCh0aGlzLCB0aGlzLnNpZGUgPiAwID8gLTEgOiAxKTtcbiAgICAgICAgcmV0dXJuIHNpYmxpbmdSZWN0ICYmIHNpYmxpbmdSZWN0LnRvcCA8IGltZ1JlY3QuYm90dG9tICYmIHNpYmxpbmdSZWN0LmJvdHRvbSA+IGltZ1JlY3QudG9wXG4gICAgICAgICAgICA/IHsgbGVmdDogaW1nUmVjdC5sZWZ0LCByaWdodDogaW1nUmVjdC5yaWdodCwgdG9wOiBzaWJsaW5nUmVjdC50b3AsIGJvdHRvbTogc2libGluZ1JlY3QuYm90dG9tIH0gOiBpbWdSZWN0O1xuICAgIH1cbiAgICBnZXQgb3ZlcnJpZGVET01UZXh0KCkge1xuICAgICAgICByZXR1cm4gVGV4dC5lbXB0eTtcbiAgICB9XG59XG5UZXh0Vmlldy5wcm90b3R5cGUuY2hpbGRyZW4gPSBXaWRnZXRWaWV3LnByb3RvdHlwZS5jaGlsZHJlbiA9IFdpZGdldEJ1ZmZlclZpZXcucHJvdG90eXBlLmNoaWxkcmVuID0gbm9DaGlsZHJlbjtcbmZ1bmN0aW9uIGlubGluZVNpYmxpbmdSZWN0KHZpZXcsIHNpZGUpIHtcbiAgICBsZXQgcGFyZW50ID0gdmlldy5wYXJlbnQsIGluZGV4ID0gcGFyZW50ID8gcGFyZW50LmNoaWxkcmVuLmluZGV4T2YodmlldykgOiAtMTtcbiAgICB3aGlsZSAocGFyZW50ICYmIGluZGV4ID49IDApIHtcbiAgICAgICAgaWYgKHNpZGUgPCAwID8gaW5kZXggPiAwIDogaW5kZXggPCBwYXJlbnQuY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICBsZXQgbmV4dCA9IHBhcmVudC5jaGlsZHJlbltpbmRleCArIHNpZGVdO1xuICAgICAgICAgICAgaWYgKG5leHQgaW5zdGFuY2VvZiBUZXh0Vmlldykge1xuICAgICAgICAgICAgICAgIGxldCBuZXh0UmVjdCA9IG5leHQuY29vcmRzQXQoc2lkZSA8IDAgPyBuZXh0Lmxlbmd0aCA6IDAsIHNpZGUpO1xuICAgICAgICAgICAgICAgIGlmIChuZXh0UmVjdClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5leHRSZWN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5kZXggKz0gc2lkZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXJlbnQgaW5zdGFuY2VvZiBNYXJrVmlldyAmJiBwYXJlbnQucGFyZW50KSB7XG4gICAgICAgICAgICBpbmRleCA9IHBhcmVudC5wYXJlbnQuY2hpbGRyZW4uaW5kZXhPZihwYXJlbnQpICsgKHNpZGUgPCAwID8gMCA6IDEpO1xuICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBsYXN0ID0gcGFyZW50LmRvbS5sYXN0Q2hpbGQ7XG4gICAgICAgICAgICBpZiAobGFzdCAmJiBsYXN0Lm5vZGVOYW1lID09IFwiQlJcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gbGFzdC5nZXRDbGllbnRSZWN0cygpWzBdO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGlubGluZURPTUF0UG9zKHBhcmVudCwgcG9zKSB7XG4gICAgbGV0IGRvbSA9IHBhcmVudC5kb20sIHsgY2hpbGRyZW4gfSA9IHBhcmVudCwgaSA9IDA7XG4gICAgZm9yIChsZXQgb2ZmID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBjaGlsZCA9IGNoaWxkcmVuW2ldLCBlbmQgPSBvZmYgKyBjaGlsZC5sZW5ndGg7XG4gICAgICAgIGlmIChlbmQgPT0gb2ZmICYmIGNoaWxkLmdldFNpZGUoKSA8PSAwKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIGlmIChwb3MgPiBvZmYgJiYgcG9zIDwgZW5kICYmIGNoaWxkLmRvbS5wYXJlbnROb2RlID09IGRvbSlcbiAgICAgICAgICAgIHJldHVybiBjaGlsZC5kb21BdFBvcyhwb3MgLSBvZmYpO1xuICAgICAgICBpZiAocG9zIDw9IG9mZilcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBvZmYgPSBlbmQ7XG4gICAgfVxuICAgIGZvciAobGV0IGogPSBpOyBqID4gMDsgai0tKSB7XG4gICAgICAgIGxldCBwcmV2ID0gY2hpbGRyZW5baiAtIDFdO1xuICAgICAgICBpZiAocHJldi5kb20ucGFyZW50Tm9kZSA9PSBkb20pXG4gICAgICAgICAgICByZXR1cm4gcHJldi5kb21BdFBvcyhwcmV2Lmxlbmd0aCk7XG4gICAgfVxuICAgIGZvciAobGV0IGogPSBpOyBqIDwgY2hpbGRyZW4ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgbGV0IG5leHQgPSBjaGlsZHJlbltqXTtcbiAgICAgICAgaWYgKG5leHQuZG9tLnBhcmVudE5vZGUgPT0gZG9tKVxuICAgICAgICAgICAgcmV0dXJuIG5leHQuZG9tQXRQb3MoMCk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgRE9NUG9zKGRvbSwgMCk7XG59XG4vLyBBc3N1bWVzIGB2aWV3YCwgaWYgYSBtYXJrIHZpZXcsIGhhcyBwcmVjaXNlbHkgMSBjaGlsZC5cbmZ1bmN0aW9uIGpvaW5JbmxpbmVJbnRvKHBhcmVudCwgdmlldywgb3Blbikge1xuICAgIGxldCBsYXN0LCB7IGNoaWxkcmVuIH0gPSBwYXJlbnQ7XG4gICAgaWYgKG9wZW4gPiAwICYmIHZpZXcgaW5zdGFuY2VvZiBNYXJrVmlldyAmJiBjaGlsZHJlbi5sZW5ndGggJiZcbiAgICAgICAgKGxhc3QgPSBjaGlsZHJlbltjaGlsZHJlbi5sZW5ndGggLSAxXSkgaW5zdGFuY2VvZiBNYXJrVmlldyAmJiBsYXN0Lm1hcmsuZXEodmlldy5tYXJrKSkge1xuICAgICAgICBqb2luSW5saW5lSW50byhsYXN0LCB2aWV3LmNoaWxkcmVuWzBdLCBvcGVuIC0gMSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjaGlsZHJlbi5wdXNoKHZpZXcpO1xuICAgICAgICB2aWV3LnNldFBhcmVudChwYXJlbnQpO1xuICAgIH1cbiAgICBwYXJlbnQubGVuZ3RoICs9IHZpZXcubGVuZ3RoO1xufVxuZnVuY3Rpb24gY29vcmRzSW5DaGlsZHJlbih2aWV3LCBwb3MsIHNpZGUpIHtcbiAgICBsZXQgYmVmb3JlID0gbnVsbCwgYmVmb3JlUG9zID0gLTEsIGFmdGVyID0gbnVsbCwgYWZ0ZXJQb3MgPSAtMTtcbiAgICBmdW5jdGlvbiBzY2FuKHZpZXcsIHBvcykge1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgb2ZmID0gMDsgaSA8IHZpZXcuY2hpbGRyZW4ubGVuZ3RoICYmIG9mZiA8PSBwb3M7IGkrKykge1xuICAgICAgICAgICAgbGV0IGNoaWxkID0gdmlldy5jaGlsZHJlbltpXSwgZW5kID0gb2ZmICsgY2hpbGQubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGVuZCA+PSBwb3MpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGQuY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjYW4oY2hpbGQsIHBvcyAtIG9mZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFhZnRlciAmJiAoZW5kID4gcG9zIHx8IG9mZiA9PSBlbmQgJiYgY2hpbGQuZ2V0U2lkZSgpID4gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgYWZ0ZXIgPSBjaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgYWZ0ZXJQb3MgPSBwb3MgLSBvZmY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9mZiA8IHBvcyB8fCAob2ZmID09IGVuZCAmJiBjaGlsZC5nZXRTaWRlKCkgPCAwKSkge1xuICAgICAgICAgICAgICAgICAgICBiZWZvcmUgPSBjaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgYmVmb3JlUG9zID0gcG9zIC0gb2ZmO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9mZiA9IGVuZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzY2FuKHZpZXcsIHBvcyk7XG4gICAgbGV0IHRhcmdldCA9IChzaWRlIDwgMCA/IGJlZm9yZSA6IGFmdGVyKSB8fCBiZWZvcmUgfHwgYWZ0ZXI7XG4gICAgaWYgKHRhcmdldClcbiAgICAgICAgcmV0dXJuIHRhcmdldC5jb29yZHNBdChNYXRoLm1heCgwLCB0YXJnZXQgPT0gYmVmb3JlID8gYmVmb3JlUG9zIDogYWZ0ZXJQb3MpLCBzaWRlKTtcbiAgICByZXR1cm4gZmFsbGJhY2tSZWN0KHZpZXcpO1xufVxuZnVuY3Rpb24gZmFsbGJhY2tSZWN0KHZpZXcpIHtcbiAgICBsZXQgbGFzdCA9IHZpZXcuZG9tLmxhc3RDaGlsZDtcbiAgICBpZiAoIWxhc3QpXG4gICAgICAgIHJldHVybiB2aWV3LmRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBsZXQgcmVjdHMgPSBjbGllbnRSZWN0c0ZvcihsYXN0KTtcbiAgICByZXR1cm4gcmVjdHNbcmVjdHMubGVuZ3RoIC0gMV0gfHwgbnVsbDtcbn1cblxuZnVuY3Rpb24gY29tYmluZUF0dHJzKHNvdXJjZSwgdGFyZ2V0KSB7XG4gICAgZm9yIChsZXQgbmFtZSBpbiBzb3VyY2UpIHtcbiAgICAgICAgaWYgKG5hbWUgPT0gXCJjbGFzc1wiICYmIHRhcmdldC5jbGFzcylcbiAgICAgICAgICAgIHRhcmdldC5jbGFzcyArPSBcIiBcIiArIHNvdXJjZS5jbGFzcztcbiAgICAgICAgZWxzZSBpZiAobmFtZSA9PSBcInN0eWxlXCIgJiYgdGFyZ2V0LnN0eWxlKVxuICAgICAgICAgICAgdGFyZ2V0LnN0eWxlICs9IFwiO1wiICsgc291cmNlLnN0eWxlO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0YXJnZXRbbmFtZV0gPSBzb3VyY2VbbmFtZV07XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQ7XG59XG5mdW5jdGlvbiBhdHRyc0VxKGEsIGIpIHtcbiAgICBpZiAoYSA9PSBiKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoIWEgfHwgIWIpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQga2V5c0EgPSBPYmplY3Qua2V5cyhhKSwga2V5c0IgPSBPYmplY3Qua2V5cyhiKTtcbiAgICBpZiAoa2V5c0EubGVuZ3RoICE9IGtleXNCLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGZvciAobGV0IGtleSBvZiBrZXlzQSkge1xuICAgICAgICBpZiAoa2V5c0IuaW5kZXhPZihrZXkpID09IC0xIHx8IGFba2V5XSAhPT0gYltrZXldKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIHVwZGF0ZUF0dHJzKGRvbSwgcHJldiwgYXR0cnMpIHtcbiAgICBsZXQgY2hhbmdlZCA9IG51bGw7XG4gICAgaWYgKHByZXYpXG4gICAgICAgIGZvciAobGV0IG5hbWUgaW4gcHJldilcbiAgICAgICAgICAgIGlmICghKGF0dHJzICYmIG5hbWUgaW4gYXR0cnMpKVxuICAgICAgICAgICAgICAgIGRvbS5yZW1vdmVBdHRyaWJ1dGUoY2hhbmdlZCA9IG5hbWUpO1xuICAgIGlmIChhdHRycylcbiAgICAgICAgZm9yIChsZXQgbmFtZSBpbiBhdHRycylcbiAgICAgICAgICAgIGlmICghKHByZXYgJiYgcHJldltuYW1lXSA9PSBhdHRyc1tuYW1lXSkpXG4gICAgICAgICAgICAgICAgZG9tLnNldEF0dHJpYnV0ZShjaGFuZ2VkID0gbmFtZSwgYXR0cnNbbmFtZV0pO1xuICAgIHJldHVybiAhIWNoYW5nZWQ7XG59XG5cbi8qKlxuV2lkZ2V0cyBhZGRlZCB0byB0aGUgY29udGVudCBhcmUgZGVzY3JpYmVkIGJ5IHN1YmNsYXNzZXMgb2YgdGhpc1xuY2xhc3MuIFVzaW5nIGEgZGVzY3JpcHRpb24gb2JqZWN0IGxpa2UgdGhhdCBtYWtlcyBpdCBwb3NzaWJsZSB0b1xuZGVsYXkgY3JlYXRpbmcgb2YgdGhlIERPTSBzdHJ1Y3R1cmUgZm9yIGEgd2lkZ2V0IHVudGlsIGl0IGlzXG5uZWVkZWQsIGFuZCB0byBhdm9pZCByZWRyYXdpbmcgd2lkZ2V0cyBldmVuIGlmIHRoZSBkZWNvcmF0aW9uc1xudGhhdCBkZWZpbmUgdGhlbSBhcmUgcmVjcmVhdGVkLlxuKi9cbmNsYXNzIFdpZGdldFR5cGUge1xuICAgIC8qKlxuICAgIENvbXBhcmUgdGhpcyBpbnN0YW5jZSB0byBhbm90aGVyIGluc3RhbmNlIG9mIHRoZSBzYW1lIHR5cGUuXG4gICAgKFR5cGVTY3JpcHQgY2FuJ3QgZXhwcmVzcyB0aGlzLCBidXQgb25seSBpbnN0YW5jZXMgb2YgdGhlIHNhbWVcbiAgICBzcGVjaWZpYyBjbGFzcyB3aWxsIGJlIHBhc3NlZCB0byB0aGlzIG1ldGhvZC4pIFRoaXMgaXMgdXNlZCB0b1xuICAgIGF2b2lkIHJlZHJhd2luZyB3aWRnZXRzIHdoZW4gdGhleSBhcmUgcmVwbGFjZWQgYnkgYSBuZXdcbiAgICBkZWNvcmF0aW9uIG9mIHRoZSBzYW1lIHR5cGUuIFRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIGp1c3RcbiAgICByZXR1cm5zIGBmYWxzZWAsIHdoaWNoIHdpbGwgY2F1c2UgbmV3IGluc3RhbmNlcyBvZiB0aGUgd2lkZ2V0IHRvXG4gICAgYWx3YXlzIGJlIHJlZHJhd24uXG4gICAgKi9cbiAgICBlcSh3aWRnZXQpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgLyoqXG4gICAgVXBkYXRlIGEgRE9NIGVsZW1lbnQgY3JlYXRlZCBieSBhIHdpZGdldCBvZiB0aGUgc2FtZSB0eXBlIChidXRcbiAgICBkaWZmZXJlbnQsIG5vbi1gZXFgIGNvbnRlbnQpIHRvIHJlZmxlY3QgdGhpcyB3aWRnZXQuIE1heSByZXR1cm5cbiAgICB0cnVlIHRvIGluZGljYXRlIHRoYXQgaXQgY291bGQgdXBkYXRlLCBmYWxzZSB0byBpbmRpY2F0ZSBpdFxuICAgIGNvdWxkbid0IChpbiB3aGljaCBjYXNlIHRoZSB3aWRnZXQgd2lsbCBiZSByZWRyYXduKS4gVGhlIGRlZmF1bHRcbiAgICBpbXBsZW1lbnRhdGlvbiBqdXN0IHJldHVybnMgZmFsc2UuXG4gICAgKi9cbiAgICB1cGRhdGVET00oZG9tKSB7IHJldHVybiBmYWxzZTsgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29tcGFyZShvdGhlcikge1xuICAgICAgICByZXR1cm4gdGhpcyA9PSBvdGhlciB8fCB0aGlzLmNvbnN0cnVjdG9yID09IG90aGVyLmNvbnN0cnVjdG9yICYmIHRoaXMuZXEob3RoZXIpO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgZXN0aW1hdGVkIGhlaWdodCB0aGlzIHdpZGdldCB3aWxsIGhhdmUsIHRvIGJlIHVzZWQgd2hlblxuICAgIGVzdGltYXRpbmcgdGhlIGhlaWdodCBvZiBjb250ZW50IHRoYXQgaGFzbid0IGJlZW4gZHJhd24uIE1heVxuICAgIHJldHVybiAtMSB0byBpbmRpY2F0ZSB5b3UgZG9uJ3Qga25vdy4gVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb25cbiAgICByZXR1cm5zIC0xLlxuICAgICovXG4gICAgZ2V0IGVzdGltYXRlZEhlaWdodCgpIHsgcmV0dXJuIC0xOyB9XG4gICAgLyoqXG4gICAgQ2FuIGJlIHVzZWQgdG8gY29uZmlndXJlIHdoaWNoIGtpbmRzIG9mIGV2ZW50cyBpbnNpZGUgdGhlIHdpZGdldFxuICAgIHNob3VsZCBiZSBpZ25vcmVkIGJ5IHRoZSBlZGl0b3IuIFRoZSBkZWZhdWx0IGlzIHRvIGlnbm9yZSBhbGxcbiAgICBldmVudHMuXG4gICAgKi9cbiAgICBpZ25vcmVFdmVudChldmVudCkgeyByZXR1cm4gdHJ1ZTsgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZ2V0IGN1c3RvbVZpZXcoKSB7IHJldHVybiBudWxsOyB9XG4gICAgLyoqXG4gICAgVGhpcyBpcyBjYWxsZWQgd2hlbiB0aGUgYW4gaW5zdGFuY2Ugb2YgdGhlIHdpZGdldCBpcyByZW1vdmVkXG4gICAgZnJvbSB0aGUgZWRpdG9yIHZpZXcuXG4gICAgKi9cbiAgICBkZXN0cm95KGRvbSkgeyB9XG59XG4vKipcblRoZSBkaWZmZXJlbnQgdHlwZXMgb2YgYmxvY2tzIHRoYXQgY2FuIG9jY3VyIGluIGFuIGVkaXRvciB2aWV3LlxuKi9cbnZhciBCbG9ja1R5cGUgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChCbG9ja1R5cGUpIHtcbiAgICAvKipcbiAgICBBIGxpbmUgb2YgdGV4dC5cbiAgICAqL1xuICAgIEJsb2NrVHlwZVtCbG9ja1R5cGVbXCJUZXh0XCJdID0gMF0gPSBcIlRleHRcIjtcbiAgICAvKipcbiAgICBBIGJsb2NrIHdpZGdldCBhc3NvY2lhdGVkIHdpdGggdGhlIHBvc2l0aW9uIGFmdGVyIGl0LlxuICAgICovXG4gICAgQmxvY2tUeXBlW0Jsb2NrVHlwZVtcIldpZGdldEJlZm9yZVwiXSA9IDFdID0gXCJXaWRnZXRCZWZvcmVcIjtcbiAgICAvKipcbiAgICBBIGJsb2NrIHdpZGdldCBhc3NvY2lhdGVkIHdpdGggdGhlIHBvc2l0aW9uIGJlZm9yZSBpdC5cbiAgICAqL1xuICAgIEJsb2NrVHlwZVtCbG9ja1R5cGVbXCJXaWRnZXRBZnRlclwiXSA9IDJdID0gXCJXaWRnZXRBZnRlclwiO1xuICAgIC8qKlxuICAgIEEgYmxvY2sgd2lkZ2V0IFtyZXBsYWNpbmddKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5EZWNvcmF0aW9uXnJlcGxhY2UpIGEgcmFuZ2Ugb2YgY29udGVudC5cbiAgICAqL1xuICAgIEJsb2NrVHlwZVtCbG9ja1R5cGVbXCJXaWRnZXRSYW5nZVwiXSA9IDNdID0gXCJXaWRnZXRSYW5nZVwiO1xucmV0dXJuIEJsb2NrVHlwZX0pKEJsb2NrVHlwZSB8fCAoQmxvY2tUeXBlID0ge30pKTtcbi8qKlxuQSBkZWNvcmF0aW9uIHByb3ZpZGVzIGluZm9ybWF0aW9uIG9uIGhvdyB0byBkcmF3IG9yIHN0eWxlIGEgcGllY2Vcbm9mIGNvbnRlbnQuIFlvdSdsbCB1c3VhbGx5IHVzZSBpdCB3cmFwcGVkIGluIGFcbltgUmFuZ2VgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlJhbmdlKSwgd2hpY2ggYWRkcyBhIHN0YXJ0IGFuZCBlbmQgcG9zaXRpb24uXG5Abm9uYWJzdHJhY3RcbiovXG5jbGFzcyBEZWNvcmF0aW9uIGV4dGVuZHMgUmFuZ2VWYWx1ZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGFydFNpZGUsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZW5kU2lkZSwgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICB3aWRnZXQsIFxuICAgIC8qKlxuICAgIFRoZSBjb25maWcgb2JqZWN0IHVzZWQgdG8gY3JlYXRlIHRoaXMgZGVjb3JhdGlvbi4gWW91IGNhblxuICAgIGluY2x1ZGUgYWRkaXRpb25hbCBwcm9wZXJ0aWVzIGluIHRoZXJlIHRvIHN0b3JlIG1ldGFkYXRhIGFib3V0XG4gICAgeW91ciBkZWNvcmF0aW9uLlxuICAgICovXG4gICAgc3BlYykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnN0YXJ0U2lkZSA9IHN0YXJ0U2lkZTtcbiAgICAgICAgdGhpcy5lbmRTaWRlID0gZW5kU2lkZTtcbiAgICAgICAgdGhpcy53aWRnZXQgPSB3aWRnZXQ7XG4gICAgICAgIHRoaXMuc3BlYyA9IHNwZWM7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZ2V0IGhlaWdodFJlbGV2YW50KCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBtYXJrIGRlY29yYXRpb24sIHdoaWNoIGluZmx1ZW5jZXMgdGhlIHN0eWxpbmcgb2YgdGhlXG4gICAgY29udGVudCBpbiBpdHMgcmFuZ2UuIE5lc3RlZCBtYXJrIGRlY29yYXRpb25zIHdpbGwgY2F1c2UgbmVzdGVkXG4gICAgRE9NIGVsZW1lbnRzIHRvIGJlIGNyZWF0ZWQuIE5lc3Rpbmcgb3JkZXIgaXMgZGV0ZXJtaW5lZCBieVxuICAgIHByZWNlZGVuY2Ugb2YgdGhlIFtmYWNldF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXdeZGVjb3JhdGlvbnMpLCB3aXRoXG4gICAgdGhlIGhpZ2hlci1wcmVjZWRlbmNlIGRlY29yYXRpb25zIGNyZWF0aW5nIHRoZSBpbm5lciBET00gbm9kZXMuXG4gICAgU3VjaCBlbGVtZW50cyBhcmUgc3BsaXQgb24gbGluZSBib3VuZGFyaWVzIGFuZCBvbiB0aGUgYm91bmRhcmllc1xuICAgIG9mIGxvd2VyLXByZWNlZGVuY2UgZGVjb3JhdGlvbnMuXG4gICAgKi9cbiAgICBzdGF0aWMgbWFyayhzcGVjKSB7XG4gICAgICAgIHJldHVybiBuZXcgTWFya0RlY29yYXRpb24oc3BlYyk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIHdpZGdldCBkZWNvcmF0aW9uLCB3aGljaCBkaXNwbGF5cyBhIERPTSBlbGVtZW50IGF0IHRoZVxuICAgIGdpdmVuIHBvc2l0aW9uLlxuICAgICovXG4gICAgc3RhdGljIHdpZGdldChzcGVjKSB7XG4gICAgICAgIGxldCBzaWRlID0gc3BlYy5zaWRlIHx8IDAsIGJsb2NrID0gISFzcGVjLmJsb2NrO1xuICAgICAgICBzaWRlICs9IGJsb2NrID8gKHNpZGUgPiAwID8gMzAwMDAwMDAwIC8qIFNpZGUuQmxvY2tBZnRlciAqLyA6IC00MDAwMDAwMDAgLyogU2lkZS5CbG9ja0JlZm9yZSAqLykgOiAoc2lkZSA+IDAgPyAxMDAwMDAwMDAgLyogU2lkZS5JbmxpbmVBZnRlciAqLyA6IC0xMDAwMDAwMDAgLyogU2lkZS5JbmxpbmVCZWZvcmUgKi8pO1xuICAgICAgICByZXR1cm4gbmV3IFBvaW50RGVjb3JhdGlvbihzcGVjLCBzaWRlLCBzaWRlLCBibG9jaywgc3BlYy53aWRnZXQgfHwgbnVsbCwgZmFsc2UpO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSByZXBsYWNlIGRlY29yYXRpb24gd2hpY2ggcmVwbGFjZXMgdGhlIGdpdmVuIHJhbmdlIHdpdGhcbiAgICBhIHdpZGdldCwgb3Igc2ltcGx5IGhpZGVzIGl0LlxuICAgICovXG4gICAgc3RhdGljIHJlcGxhY2Uoc3BlYykge1xuICAgICAgICBsZXQgYmxvY2sgPSAhIXNwZWMuYmxvY2ssIHN0YXJ0U2lkZSwgZW5kU2lkZTtcbiAgICAgICAgaWYgKHNwZWMuaXNCbG9ja0dhcCkge1xuICAgICAgICAgICAgc3RhcnRTaWRlID0gLTUwMDAwMDAwMCAvKiBTaWRlLkdhcFN0YXJ0ICovO1xuICAgICAgICAgICAgZW5kU2lkZSA9IDQwMDAwMDAwMCAvKiBTaWRlLkdhcEVuZCAqLztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCB7IHN0YXJ0LCBlbmQgfSA9IGdldEluY2x1c2l2ZShzcGVjLCBibG9jayk7XG4gICAgICAgICAgICBzdGFydFNpZGUgPSAoc3RhcnQgPyAoYmxvY2sgPyAtMzAwMDAwMDAwIC8qIFNpZGUuQmxvY2tJbmNTdGFydCAqLyA6IC0xIC8qIFNpZGUuSW5saW5lSW5jU3RhcnQgKi8pIDogNTAwMDAwMDAwIC8qIFNpZGUuTm9uSW5jU3RhcnQgKi8pIC0gMTtcbiAgICAgICAgICAgIGVuZFNpZGUgPSAoZW5kID8gKGJsb2NrID8gMjAwMDAwMDAwIC8qIFNpZGUuQmxvY2tJbmNFbmQgKi8gOiAxIC8qIFNpZGUuSW5saW5lSW5jRW5kICovKSA6IC02MDAwMDAwMDAgLyogU2lkZS5Ob25JbmNFbmQgKi8pICsgMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFBvaW50RGVjb3JhdGlvbihzcGVjLCBzdGFydFNpZGUsIGVuZFNpZGUsIGJsb2NrLCBzcGVjLndpZGdldCB8fCBudWxsLCB0cnVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgbGluZSBkZWNvcmF0aW9uLCB3aGljaCBjYW4gYWRkIERPTSBhdHRyaWJ1dGVzIHRvIHRoZVxuICAgIGxpbmUgc3RhcnRpbmcgYXQgdGhlIGdpdmVuIHBvc2l0aW9uLlxuICAgICovXG4gICAgc3RhdGljIGxpbmUoc3BlYykge1xuICAgICAgICByZXR1cm4gbmV3IExpbmVEZWNvcmF0aW9uKHNwZWMpO1xuICAgIH1cbiAgICAvKipcbiAgICBCdWlsZCBhIFtgRGVjb3JhdGlvblNldGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5EZWNvcmF0aW9uU2V0KSBmcm9tIHRoZSBnaXZlblxuICAgIGRlY29yYXRlZCByYW5nZSBvciByYW5nZXMuIElmIHRoZSByYW5nZXMgYXJlbid0IGFscmVhZHkgc29ydGVkLFxuICAgIHBhc3MgYHRydWVgIGZvciBgc29ydGAgdG8gbWFrZSB0aGUgbGlicmFyeSBzb3J0IHRoZW0gZm9yIHlvdS5cbiAgICAqL1xuICAgIHN0YXRpYyBzZXQob2YsIHNvcnQgPSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gUmFuZ2VTZXQub2Yob2YsIHNvcnQpO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGhhc0hlaWdodCgpIHsgcmV0dXJuIHRoaXMud2lkZ2V0ID8gdGhpcy53aWRnZXQuZXN0aW1hdGVkSGVpZ2h0ID4gLTEgOiBmYWxzZTsgfVxufVxuLyoqXG5UaGUgZW1wdHkgc2V0IG9mIGRlY29yYXRpb25zLlxuKi9cbkRlY29yYXRpb24ubm9uZSA9IFJhbmdlU2V0LmVtcHR5O1xuY2xhc3MgTWFya0RlY29yYXRpb24gZXh0ZW5kcyBEZWNvcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihzcGVjKSB7XG4gICAgICAgIGxldCB7IHN0YXJ0LCBlbmQgfSA9IGdldEluY2x1c2l2ZShzcGVjKTtcbiAgICAgICAgc3VwZXIoc3RhcnQgPyAtMSAvKiBTaWRlLklubGluZUluY1N0YXJ0ICovIDogNTAwMDAwMDAwIC8qIFNpZGUuTm9uSW5jU3RhcnQgKi8sIGVuZCA/IDEgLyogU2lkZS5JbmxpbmVJbmNFbmQgKi8gOiAtNjAwMDAwMDAwIC8qIFNpZGUuTm9uSW5jRW5kICovLCBudWxsLCBzcGVjKTtcbiAgICAgICAgdGhpcy50YWdOYW1lID0gc3BlYy50YWdOYW1lIHx8IFwic3BhblwiO1xuICAgICAgICB0aGlzLmNsYXNzID0gc3BlYy5jbGFzcyB8fCBcIlwiO1xuICAgICAgICB0aGlzLmF0dHJzID0gc3BlYy5hdHRyaWJ1dGVzIHx8IG51bGw7XG4gICAgfVxuICAgIGVxKG90aGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzID09IG90aGVyIHx8XG4gICAgICAgICAgICBvdGhlciBpbnN0YW5jZW9mIE1hcmtEZWNvcmF0aW9uICYmXG4gICAgICAgICAgICAgICAgdGhpcy50YWdOYW1lID09IG90aGVyLnRhZ05hbWUgJiZcbiAgICAgICAgICAgICAgICB0aGlzLmNsYXNzID09IG90aGVyLmNsYXNzICYmXG4gICAgICAgICAgICAgICAgYXR0cnNFcSh0aGlzLmF0dHJzLCBvdGhlci5hdHRycyk7XG4gICAgfVxuICAgIHJhbmdlKGZyb20sIHRvID0gZnJvbSkge1xuICAgICAgICBpZiAoZnJvbSA+PSB0bylcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiTWFyayBkZWNvcmF0aW9ucyBtYXkgbm90IGJlIGVtcHR5XCIpO1xuICAgICAgICByZXR1cm4gc3VwZXIucmFuZ2UoZnJvbSwgdG8pO1xuICAgIH1cbn1cbk1hcmtEZWNvcmF0aW9uLnByb3RvdHlwZS5wb2ludCA9IGZhbHNlO1xuY2xhc3MgTGluZURlY29yYXRpb24gZXh0ZW5kcyBEZWNvcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihzcGVjKSB7XG4gICAgICAgIHN1cGVyKC0yMDAwMDAwMDAgLyogU2lkZS5MaW5lICovLCAtMjAwMDAwMDAwIC8qIFNpZGUuTGluZSAqLywgbnVsbCwgc3BlYyk7XG4gICAgfVxuICAgIGVxKG90aGVyKSB7XG4gICAgICAgIHJldHVybiBvdGhlciBpbnN0YW5jZW9mIExpbmVEZWNvcmF0aW9uICYmIGF0dHJzRXEodGhpcy5zcGVjLmF0dHJpYnV0ZXMsIG90aGVyLnNwZWMuYXR0cmlidXRlcyk7XG4gICAgfVxuICAgIHJhbmdlKGZyb20sIHRvID0gZnJvbSkge1xuICAgICAgICBpZiAodG8gIT0gZnJvbSlcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiTGluZSBkZWNvcmF0aW9uIHJhbmdlcyBtdXN0IGJlIHplcm8tbGVuZ3RoXCIpO1xuICAgICAgICByZXR1cm4gc3VwZXIucmFuZ2UoZnJvbSwgdG8pO1xuICAgIH1cbn1cbkxpbmVEZWNvcmF0aW9uLnByb3RvdHlwZS5tYXBNb2RlID0gTWFwTW9kZS5UcmFja0JlZm9yZTtcbkxpbmVEZWNvcmF0aW9uLnByb3RvdHlwZS5wb2ludCA9IHRydWU7XG5jbGFzcyBQb2ludERlY29yYXRpb24gZXh0ZW5kcyBEZWNvcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihzcGVjLCBzdGFydFNpZGUsIGVuZFNpZGUsIGJsb2NrLCB3aWRnZXQsIGlzUmVwbGFjZSkge1xuICAgICAgICBzdXBlcihzdGFydFNpZGUsIGVuZFNpZGUsIHdpZGdldCwgc3BlYyk7XG4gICAgICAgIHRoaXMuYmxvY2sgPSBibG9jaztcbiAgICAgICAgdGhpcy5pc1JlcGxhY2UgPSBpc1JlcGxhY2U7XG4gICAgICAgIHRoaXMubWFwTW9kZSA9ICFibG9jayA/IE1hcE1vZGUuVHJhY2tEZWwgOiBzdGFydFNpZGUgPD0gMCA/IE1hcE1vZGUuVHJhY2tCZWZvcmUgOiBNYXBNb2RlLlRyYWNrQWZ0ZXI7XG4gICAgfVxuICAgIC8vIE9ubHkgcmVsZXZhbnQgd2hlbiB0aGlzLmJsb2NrID09IHRydWVcbiAgICBnZXQgdHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhcnRTaWRlIDwgdGhpcy5lbmRTaWRlID8gQmxvY2tUeXBlLldpZGdldFJhbmdlXG4gICAgICAgICAgICA6IHRoaXMuc3RhcnRTaWRlIDw9IDAgPyBCbG9ja1R5cGUuV2lkZ2V0QmVmb3JlIDogQmxvY2tUeXBlLldpZGdldEFmdGVyO1xuICAgIH1cbiAgICBnZXQgaGVpZ2h0UmVsZXZhbnQoKSB7IHJldHVybiB0aGlzLmJsb2NrIHx8ICEhdGhpcy53aWRnZXQgJiYgdGhpcy53aWRnZXQuZXN0aW1hdGVkSGVpZ2h0ID49IDU7IH1cbiAgICBlcShvdGhlcikge1xuICAgICAgICByZXR1cm4gb3RoZXIgaW5zdGFuY2VvZiBQb2ludERlY29yYXRpb24gJiZcbiAgICAgICAgICAgIHdpZGdldHNFcSh0aGlzLndpZGdldCwgb3RoZXIud2lkZ2V0KSAmJlxuICAgICAgICAgICAgdGhpcy5ibG9jayA9PSBvdGhlci5ibG9jayAmJlxuICAgICAgICAgICAgdGhpcy5zdGFydFNpZGUgPT0gb3RoZXIuc3RhcnRTaWRlICYmIHRoaXMuZW5kU2lkZSA9PSBvdGhlci5lbmRTaWRlO1xuICAgIH1cbiAgICByYW5nZShmcm9tLCB0byA9IGZyb20pIHtcbiAgICAgICAgaWYgKHRoaXMuaXNSZXBsYWNlICYmIChmcm9tID4gdG8gfHwgKGZyb20gPT0gdG8gJiYgdGhpcy5zdGFydFNpZGUgPiAwICYmIHRoaXMuZW5kU2lkZSA8PSAwKSkpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgcmFuZ2UgZm9yIHJlcGxhY2VtZW50IGRlY29yYXRpb25cIik7XG4gICAgICAgIGlmICghdGhpcy5pc1JlcGxhY2UgJiYgdG8gIT0gZnJvbSlcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiV2lkZ2V0IGRlY29yYXRpb25zIGNhbiBvbmx5IGhhdmUgemVyby1sZW5ndGggcmFuZ2VzXCIpO1xuICAgICAgICByZXR1cm4gc3VwZXIucmFuZ2UoZnJvbSwgdG8pO1xuICAgIH1cbn1cblBvaW50RGVjb3JhdGlvbi5wcm90b3R5cGUucG9pbnQgPSB0cnVlO1xuZnVuY3Rpb24gZ2V0SW5jbHVzaXZlKHNwZWMsIGJsb2NrID0gZmFsc2UpIHtcbiAgICBsZXQgeyBpbmNsdXNpdmVTdGFydDogc3RhcnQsIGluY2x1c2l2ZUVuZDogZW5kIH0gPSBzcGVjO1xuICAgIGlmIChzdGFydCA9PSBudWxsKVxuICAgICAgICBzdGFydCA9IHNwZWMuaW5jbHVzaXZlO1xuICAgIGlmIChlbmQgPT0gbnVsbClcbiAgICAgICAgZW5kID0gc3BlYy5pbmNsdXNpdmU7XG4gICAgcmV0dXJuIHsgc3RhcnQ6IHN0YXJ0ICE9PSBudWxsICYmIHN0YXJ0ICE9PSB2b2lkIDAgPyBzdGFydCA6IGJsb2NrLCBlbmQ6IGVuZCAhPT0gbnVsbCAmJiBlbmQgIT09IHZvaWQgMCA/IGVuZCA6IGJsb2NrIH07XG59XG5mdW5jdGlvbiB3aWRnZXRzRXEoYSwgYikge1xuICAgIHJldHVybiBhID09IGIgfHwgISEoYSAmJiBiICYmIGEuY29tcGFyZShiKSk7XG59XG5mdW5jdGlvbiBhZGRSYW5nZShmcm9tLCB0bywgcmFuZ2VzLCBtYXJnaW4gPSAwKSB7XG4gICAgbGV0IGxhc3QgPSByYW5nZXMubGVuZ3RoIC0gMTtcbiAgICBpZiAobGFzdCA+PSAwICYmIHJhbmdlc1tsYXN0XSArIG1hcmdpbiA+PSBmcm9tKVxuICAgICAgICByYW5nZXNbbGFzdF0gPSBNYXRoLm1heChyYW5nZXNbbGFzdF0sIHRvKTtcbiAgICBlbHNlXG4gICAgICAgIHJhbmdlcy5wdXNoKGZyb20sIHRvKTtcbn1cblxuY2xhc3MgTGluZVZpZXcgZXh0ZW5kcyBDb250ZW50VmlldyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSBbXTtcbiAgICAgICAgdGhpcy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLnByZXZBdHRycyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5hdHRycyA9IG51bGw7XG4gICAgICAgIHRoaXMuYnJlYWtBZnRlciA9IDA7XG4gICAgfVxuICAgIC8vIENvbnN1bWVzIHNvdXJjZVxuICAgIG1lcmdlKGZyb20sIHRvLCBzb3VyY2UsIGhhc1N0YXJ0LCBvcGVuU3RhcnQsIG9wZW5FbmQpIHtcbiAgICAgICAgaWYgKHNvdXJjZSkge1xuICAgICAgICAgICAgaWYgKCEoc291cmNlIGluc3RhbmNlb2YgTGluZVZpZXcpKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGlmICghdGhpcy5kb20pXG4gICAgICAgICAgICAgICAgc291cmNlLnRyYW5zZmVyRE9NKHRoaXMpOyAvLyBSZXVzZSBzb3VyY2UuZG9tIHdoZW4gYXBwcm9wcmlhdGVcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzU3RhcnQpXG4gICAgICAgICAgICB0aGlzLnNldERlY28oc291cmNlID8gc291cmNlLmF0dHJzIDogbnVsbCk7XG4gICAgICAgIG1lcmdlQ2hpbGRyZW5JbnRvKHRoaXMsIGZyb20sIHRvLCBzb3VyY2UgPyBzb3VyY2UuY2hpbGRyZW4gOiBbXSwgb3BlblN0YXJ0LCBvcGVuRW5kKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHNwbGl0KGF0KSB7XG4gICAgICAgIGxldCBlbmQgPSBuZXcgTGluZVZpZXc7XG4gICAgICAgIGVuZC5icmVha0FmdGVyID0gdGhpcy5icmVha0FmdGVyO1xuICAgICAgICBpZiAodGhpcy5sZW5ndGggPT0gMClcbiAgICAgICAgICAgIHJldHVybiBlbmQ7XG4gICAgICAgIGxldCB7IGksIG9mZiB9ID0gdGhpcy5jaGlsZFBvcyhhdCk7XG4gICAgICAgIGlmIChvZmYpIHtcbiAgICAgICAgICAgIGVuZC5hcHBlbmQodGhpcy5jaGlsZHJlbltpXS5zcGxpdChvZmYpLCAwKTtcbiAgICAgICAgICAgIHRoaXMuY2hpbGRyZW5baV0ubWVyZ2Uob2ZmLCB0aGlzLmNoaWxkcmVuW2ldLmxlbmd0aCwgbnVsbCwgZmFsc2UsIDAsIDApO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGogPSBpOyBqIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGorKylcbiAgICAgICAgICAgIGVuZC5hcHBlbmQodGhpcy5jaGlsZHJlbltqXSwgMCk7XG4gICAgICAgIHdoaWxlIChpID4gMCAmJiB0aGlzLmNoaWxkcmVuW2kgLSAxXS5sZW5ndGggPT0gMClcbiAgICAgICAgICAgIHRoaXMuY2hpbGRyZW5bLS1pXS5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4ubGVuZ3RoID0gaTtcbiAgICAgICAgdGhpcy5tYXJrRGlydHkoKTtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBhdDtcbiAgICAgICAgcmV0dXJuIGVuZDtcbiAgICB9XG4gICAgdHJhbnNmZXJET00ob3RoZXIpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRvbSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5tYXJrRGlydHkoKTtcbiAgICAgICAgb3RoZXIuc2V0RE9NKHRoaXMuZG9tKTtcbiAgICAgICAgb3RoZXIucHJldkF0dHJzID0gdGhpcy5wcmV2QXR0cnMgPT09IHVuZGVmaW5lZCA/IHRoaXMuYXR0cnMgOiB0aGlzLnByZXZBdHRycztcbiAgICAgICAgdGhpcy5wcmV2QXR0cnMgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuZG9tID0gbnVsbDtcbiAgICB9XG4gICAgc2V0RGVjbyhhdHRycykge1xuICAgICAgICBpZiAoIWF0dHJzRXEodGhpcy5hdHRycywgYXR0cnMpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kb20pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZBdHRycyA9IHRoaXMuYXR0cnM7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXJrRGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYXR0cnMgPSBhdHRycztcbiAgICAgICAgfVxuICAgIH1cbiAgICBhcHBlbmQoY2hpbGQsIG9wZW5TdGFydCkge1xuICAgICAgICBqb2luSW5saW5lSW50byh0aGlzLCBjaGlsZCwgb3BlblN0YXJ0KTtcbiAgICB9XG4gICAgLy8gT25seSBjYWxsZWQgd2hlbiBidWlsZGluZyBhIGxpbmUgdmlldyBpbiBDb250ZW50QnVpbGRlclxuICAgIGFkZExpbmVEZWNvKGRlY28pIHtcbiAgICAgICAgbGV0IGF0dHJzID0gZGVjby5zcGVjLmF0dHJpYnV0ZXMsIGNscyA9IGRlY28uc3BlYy5jbGFzcztcbiAgICAgICAgaWYgKGF0dHJzKVxuICAgICAgICAgICAgdGhpcy5hdHRycyA9IGNvbWJpbmVBdHRycyhhdHRycywgdGhpcy5hdHRycyB8fCB7fSk7XG4gICAgICAgIGlmIChjbHMpXG4gICAgICAgICAgICB0aGlzLmF0dHJzID0gY29tYmluZUF0dHJzKHsgY2xhc3M6IGNscyB9LCB0aGlzLmF0dHJzIHx8IHt9KTtcbiAgICB9XG4gICAgZG9tQXRQb3MocG9zKSB7XG4gICAgICAgIHJldHVybiBpbmxpbmVET01BdFBvcyh0aGlzLCBwb3MpO1xuICAgIH1cbiAgICByZXVzZURPTShub2RlKSB7XG4gICAgICAgIGlmIChub2RlLm5vZGVOYW1lID09IFwiRElWXCIpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0RE9NKG5vZGUpO1xuICAgICAgICAgICAgdGhpcy5kaXJ0eSB8PSA0IC8qIERpcnR5LkF0dHJzICovIHwgMiAvKiBEaXJ0eS5Ob2RlICovO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN5bmModHJhY2spIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAoIXRoaXMuZG9tKSB7XG4gICAgICAgICAgICB0aGlzLnNldERPTShkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTtcbiAgICAgICAgICAgIHRoaXMuZG9tLmNsYXNzTmFtZSA9IFwiY20tbGluZVwiO1xuICAgICAgICAgICAgdGhpcy5wcmV2QXR0cnMgPSB0aGlzLmF0dHJzID8gbnVsbCA6IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmRpcnR5ICYgNCAvKiBEaXJ0eS5BdHRycyAqLykge1xuICAgICAgICAgICAgY2xlYXJBdHRyaWJ1dGVzKHRoaXMuZG9tKTtcbiAgICAgICAgICAgIHRoaXMuZG9tLmNsYXNzTmFtZSA9IFwiY20tbGluZVwiO1xuICAgICAgICAgICAgdGhpcy5wcmV2QXR0cnMgPSB0aGlzLmF0dHJzID8gbnVsbCA6IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcmV2QXR0cnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdXBkYXRlQXR0cnModGhpcy5kb20sIHRoaXMucHJldkF0dHJzLCB0aGlzLmF0dHJzKTtcbiAgICAgICAgICAgIHRoaXMuZG9tLmNsYXNzTGlzdC5hZGQoXCJjbS1saW5lXCIpO1xuICAgICAgICAgICAgdGhpcy5wcmV2QXR0cnMgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIuc3luYyh0cmFjayk7XG4gICAgICAgIGxldCBsYXN0ID0gdGhpcy5kb20ubGFzdENoaWxkO1xuICAgICAgICB3aGlsZSAobGFzdCAmJiBDb250ZW50Vmlldy5nZXQobGFzdCkgaW5zdGFuY2VvZiBNYXJrVmlldylcbiAgICAgICAgICAgIGxhc3QgPSBsYXN0Lmxhc3RDaGlsZDtcbiAgICAgICAgaWYgKCFsYXN0IHx8ICF0aGlzLmxlbmd0aCB8fFxuICAgICAgICAgICAgbGFzdC5ub2RlTmFtZSAhPSBcIkJSXCIgJiYgKChfYSA9IENvbnRlbnRWaWV3LmdldChsYXN0KSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmlzRWRpdGFibGUpID09IGZhbHNlICYmXG4gICAgICAgICAgICAgICAgKCFicm93c2VyLmlvcyB8fCAhdGhpcy5jaGlsZHJlbi5zb21lKGNoID0+IGNoIGluc3RhbmNlb2YgVGV4dFZpZXcpKSkge1xuICAgICAgICAgICAgbGV0IGhhY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiQlJcIik7XG4gICAgICAgICAgICBoYWNrLmNtSWdub3JlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZG9tLmFwcGVuZENoaWxkKGhhY2spO1xuICAgICAgICB9XG4gICAgfVxuICAgIG1lYXN1cmVUZXh0U2l6ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuY2hpbGRyZW4ubGVuZ3RoID09IDAgfHwgdGhpcy5sZW5ndGggPiAyMClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBsZXQgdG90YWxXaWR0aCA9IDA7XG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIHRoaXMuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGlmICghKGNoaWxkIGluc3RhbmNlb2YgVGV4dFZpZXcpIHx8IC9bXiAtfl0vLnRlc3QoY2hpbGQudGV4dCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBsZXQgcmVjdHMgPSBjbGllbnRSZWN0c0ZvcihjaGlsZC5kb20pO1xuICAgICAgICAgICAgaWYgKHJlY3RzLmxlbmd0aCAhPSAxKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgdG90YWxXaWR0aCArPSByZWN0c1swXS53aWR0aDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gIXRvdGFsV2lkdGggPyBudWxsIDoge1xuICAgICAgICAgICAgbGluZUhlaWdodDogdGhpcy5kb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0LFxuICAgICAgICAgICAgY2hhcldpZHRoOiB0b3RhbFdpZHRoIC8gdGhpcy5sZW5ndGhcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29vcmRzQXQocG9zLCBzaWRlKSB7XG4gICAgICAgIHJldHVybiBjb29yZHNJbkNoaWxkcmVuKHRoaXMsIHBvcywgc2lkZSk7XG4gICAgfVxuICAgIGJlY29tZShfb3RoZXIpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgZ2V0IHR5cGUoKSB7IHJldHVybiBCbG9ja1R5cGUuVGV4dDsgfVxuICAgIHN0YXRpYyBmaW5kKGRvY1ZpZXcsIHBvcykge1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgb2ZmID0gMDsgaSA8IGRvY1ZpZXcuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBibG9jayA9IGRvY1ZpZXcuY2hpbGRyZW5baV0sIGVuZCA9IG9mZiArIGJsb2NrLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChlbmQgPj0gcG9zKSB7XG4gICAgICAgICAgICAgICAgaWYgKGJsb2NrIGluc3RhbmNlb2YgTGluZVZpZXcpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBibG9jaztcbiAgICAgICAgICAgICAgICBpZiAoZW5kID4gcG9zKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9mZiA9IGVuZCArIGJsb2NrLmJyZWFrQWZ0ZXI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuY2xhc3MgQmxvY2tXaWRnZXRWaWV3IGV4dGVuZHMgQ29udGVudFZpZXcge1xuICAgIGNvbnN0cnVjdG9yKHdpZGdldCwgbGVuZ3RoLCB0eXBlKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMud2lkZ2V0ID0gd2lkZ2V0O1xuICAgICAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aDtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5icmVha0FmdGVyID0gMDtcbiAgICAgICAgdGhpcy5wcmV2V2lkZ2V0ID0gbnVsbDtcbiAgICB9XG4gICAgbWVyZ2UoZnJvbSwgdG8sIHNvdXJjZSwgX3Rha2VEZWNvLCBvcGVuU3RhcnQsIG9wZW5FbmQpIHtcbiAgICAgICAgaWYgKHNvdXJjZSAmJiAoIShzb3VyY2UgaW5zdGFuY2VvZiBCbG9ja1dpZGdldFZpZXcpIHx8ICF0aGlzLndpZGdldC5jb21wYXJlKHNvdXJjZS53aWRnZXQpIHx8XG4gICAgICAgICAgICBmcm9tID4gMCAmJiBvcGVuU3RhcnQgPD0gMCB8fCB0byA8IHRoaXMubGVuZ3RoICYmIG9wZW5FbmQgPD0gMCkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gZnJvbSArIChzb3VyY2UgPyBzb3VyY2UubGVuZ3RoIDogMCkgKyAodGhpcy5sZW5ndGggLSB0byk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBkb21BdFBvcyhwb3MpIHtcbiAgICAgICAgcmV0dXJuIHBvcyA9PSAwID8gRE9NUG9zLmJlZm9yZSh0aGlzLmRvbSkgOiBET01Qb3MuYWZ0ZXIodGhpcy5kb20sIHBvcyA9PSB0aGlzLmxlbmd0aCk7XG4gICAgfVxuICAgIHNwbGl0KGF0KSB7XG4gICAgICAgIGxldCBsZW4gPSB0aGlzLmxlbmd0aCAtIGF0O1xuICAgICAgICB0aGlzLmxlbmd0aCA9IGF0O1xuICAgICAgICBsZXQgZW5kID0gbmV3IEJsb2NrV2lkZ2V0Vmlldyh0aGlzLndpZGdldCwgbGVuLCB0aGlzLnR5cGUpO1xuICAgICAgICBlbmQuYnJlYWtBZnRlciA9IHRoaXMuYnJlYWtBZnRlcjtcbiAgICAgICAgcmV0dXJuIGVuZDtcbiAgICB9XG4gICAgZ2V0IGNoaWxkcmVuKCkgeyByZXR1cm4gbm9DaGlsZHJlbjsgfVxuICAgIHN5bmMoKSB7XG4gICAgICAgIGlmICghdGhpcy5kb20gfHwgIXRoaXMud2lkZ2V0LnVwZGF0ZURPTSh0aGlzLmRvbSkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRvbSAmJiB0aGlzLnByZXZXaWRnZXQpXG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2V2lkZ2V0LmRlc3Ryb3kodGhpcy5kb20pO1xuICAgICAgICAgICAgdGhpcy5wcmV2V2lkZ2V0ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuc2V0RE9NKHRoaXMud2lkZ2V0LnRvRE9NKHRoaXMuZWRpdG9yVmlldykpO1xuICAgICAgICAgICAgdGhpcy5kb20uY29udGVudEVkaXRhYmxlID0gXCJmYWxzZVwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBvdmVycmlkZURPTVRleHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudCA/IHRoaXMucGFyZW50LnZpZXcuc3RhdGUuZG9jLnNsaWNlKHRoaXMucG9zQXRTdGFydCwgdGhpcy5wb3NBdEVuZCkgOiBUZXh0LmVtcHR5O1xuICAgIH1cbiAgICBkb21Cb3VuZHNBcm91bmQoKSB7IHJldHVybiBudWxsOyB9XG4gICAgYmVjb21lKG90aGVyKSB7XG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIEJsb2NrV2lkZ2V0VmlldyAmJiBvdGhlci50eXBlID09IHRoaXMudHlwZSAmJlxuICAgICAgICAgICAgb3RoZXIud2lkZ2V0LmNvbnN0cnVjdG9yID09IHRoaXMud2lkZ2V0LmNvbnN0cnVjdG9yKSB7XG4gICAgICAgICAgICBpZiAoIW90aGVyLndpZGdldC5lcSh0aGlzLndpZGdldCkpXG4gICAgICAgICAgICAgICAgdGhpcy5tYXJrRGlydHkodHJ1ZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5kb20gJiYgIXRoaXMucHJldldpZGdldClcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZXaWRnZXQgPSB0aGlzLndpZGdldDtcbiAgICAgICAgICAgIHRoaXMud2lkZ2V0ID0gb3RoZXIud2lkZ2V0O1xuICAgICAgICAgICAgdGhpcy5sZW5ndGggPSBvdGhlci5sZW5ndGg7XG4gICAgICAgICAgICB0aGlzLmJyZWFrQWZ0ZXIgPSBvdGhlci5icmVha0FmdGVyO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZ25vcmVNdXRhdGlvbigpIHsgcmV0dXJuIHRydWU7IH1cbiAgICBpZ25vcmVFdmVudChldmVudCkgeyByZXR1cm4gdGhpcy53aWRnZXQuaWdub3JlRXZlbnQoZXZlbnQpOyB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgc3VwZXIuZGVzdHJveSgpO1xuICAgICAgICBpZiAodGhpcy5kb20pXG4gICAgICAgICAgICB0aGlzLndpZGdldC5kZXN0cm95KHRoaXMuZG9tKTtcbiAgICB9XG59XG5cbmNsYXNzIENvbnRlbnRCdWlsZGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihkb2MsIHBvcywgZW5kLCBkaXNhbGxvd0Jsb2NrRWZmZWN0c0Zvcikge1xuICAgICAgICB0aGlzLmRvYyA9IGRvYztcbiAgICAgICAgdGhpcy5wb3MgPSBwb3M7XG4gICAgICAgIHRoaXMuZW5kID0gZW5kO1xuICAgICAgICB0aGlzLmRpc2FsbG93QmxvY2tFZmZlY3RzRm9yID0gZGlzYWxsb3dCbG9ja0VmZmVjdHNGb3I7XG4gICAgICAgIHRoaXMuY29udGVudCA9IFtdO1xuICAgICAgICB0aGlzLmN1ckxpbmUgPSBudWxsO1xuICAgICAgICB0aGlzLmJyZWFrQXRTdGFydCA9IDA7XG4gICAgICAgIHRoaXMucGVuZGluZ0J1ZmZlciA9IDAgLyogQnVmLk5vICovO1xuICAgICAgICAvLyBTZXQgdG8gZmFsc2UgZGlyZWN0bHkgYWZ0ZXIgYSB3aWRnZXQgdGhhdCBjb3ZlcnMgdGhlIHBvc2l0aW9uIGFmdGVyIGl0XG4gICAgICAgIHRoaXMuYXRDdXJzb3JQb3MgPSB0cnVlO1xuICAgICAgICB0aGlzLm9wZW5TdGFydCA9IC0xO1xuICAgICAgICB0aGlzLm9wZW5FbmQgPSAtMTtcbiAgICAgICAgdGhpcy50ZXh0ID0gXCJcIjtcbiAgICAgICAgdGhpcy50ZXh0T2ZmID0gMDtcbiAgICAgICAgdGhpcy5jdXJzb3IgPSBkb2MuaXRlcigpO1xuICAgICAgICB0aGlzLnNraXAgPSBwb3M7XG4gICAgfVxuICAgIHBvc0NvdmVyZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbnRlbnQubGVuZ3RoID09IDApXG4gICAgICAgICAgICByZXR1cm4gIXRoaXMuYnJlYWtBdFN0YXJ0ICYmIHRoaXMuZG9jLmxpbmVBdCh0aGlzLnBvcykuZnJvbSAhPSB0aGlzLnBvcztcbiAgICAgICAgbGV0IGxhc3QgPSB0aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aCAtIDFdO1xuICAgICAgICByZXR1cm4gIWxhc3QuYnJlYWtBZnRlciAmJiAhKGxhc3QgaW5zdGFuY2VvZiBCbG9ja1dpZGdldFZpZXcgJiYgbGFzdC50eXBlID09IEJsb2NrVHlwZS5XaWRnZXRCZWZvcmUpO1xuICAgIH1cbiAgICBnZXRMaW5lKCkge1xuICAgICAgICBpZiAoIXRoaXMuY3VyTGluZSkge1xuICAgICAgICAgICAgdGhpcy5jb250ZW50LnB1c2godGhpcy5jdXJMaW5lID0gbmV3IExpbmVWaWV3KTtcbiAgICAgICAgICAgIHRoaXMuYXRDdXJzb3JQb3MgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmN1ckxpbmU7XG4gICAgfVxuICAgIGZsdXNoQnVmZmVyKGFjdGl2ZSkge1xuICAgICAgICBpZiAodGhpcy5wZW5kaW5nQnVmZmVyKSB7XG4gICAgICAgICAgICB0aGlzLmN1ckxpbmUuYXBwZW5kKHdyYXBNYXJrcyhuZXcgV2lkZ2V0QnVmZmVyVmlldygtMSksIGFjdGl2ZSksIGFjdGl2ZS5sZW5ndGgpO1xuICAgICAgICAgICAgdGhpcy5wZW5kaW5nQnVmZmVyID0gMCAvKiBCdWYuTm8gKi87XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWRkQmxvY2tXaWRnZXQodmlldykge1xuICAgICAgICB0aGlzLmZsdXNoQnVmZmVyKFtdKTtcbiAgICAgICAgdGhpcy5jdXJMaW5lID0gbnVsbDtcbiAgICAgICAgdGhpcy5jb250ZW50LnB1c2godmlldyk7XG4gICAgfVxuICAgIGZpbmlzaChvcGVuRW5kKSB7XG4gICAgICAgIGlmICghb3BlbkVuZClcbiAgICAgICAgICAgIHRoaXMuZmx1c2hCdWZmZXIoW10pO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdCdWZmZXIgPSAwIC8qIEJ1Zi5ObyAqLztcbiAgICAgICAgaWYgKCF0aGlzLnBvc0NvdmVyZWQoKSlcbiAgICAgICAgICAgIHRoaXMuZ2V0TGluZSgpO1xuICAgIH1cbiAgICBidWlsZFRleHQobGVuZ3RoLCBhY3RpdmUsIG9wZW5TdGFydCkge1xuICAgICAgICB3aGlsZSAobGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaWYgKHRoaXMudGV4dE9mZiA9PSB0aGlzLnRleHQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgbGV0IHsgdmFsdWUsIGxpbmVCcmVhaywgZG9uZSB9ID0gdGhpcy5jdXJzb3IubmV4dCh0aGlzLnNraXApO1xuICAgICAgICAgICAgICAgIHRoaXMuc2tpcCA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKGRvbmUpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJhbiBvdXQgb2YgdGV4dCBjb250ZW50IHdoZW4gZHJhd2luZyBpbmxpbmUgdmlld3NcIik7XG4gICAgICAgICAgICAgICAgaWYgKGxpbmVCcmVhaykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucG9zQ292ZXJlZCgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRMaW5lKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbnRlbnQubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50W3RoaXMuY29udGVudC5sZW5ndGggLSAxXS5icmVha0FmdGVyID0gMTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5icmVha0F0U3RhcnQgPSAxO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZsdXNoQnVmZmVyKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJMaW5lID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoLS07XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXh0ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGV4dE9mZiA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHRha2UgPSBNYXRoLm1pbih0aGlzLnRleHQubGVuZ3RoIC0gdGhpcy50ZXh0T2ZmLCBsZW5ndGgsIDUxMiAvKiBULkNodW5rICovKTtcbiAgICAgICAgICAgIHRoaXMuZmx1c2hCdWZmZXIoYWN0aXZlLnNsaWNlKDAsIG9wZW5TdGFydCkpO1xuICAgICAgICAgICAgdGhpcy5nZXRMaW5lKCkuYXBwZW5kKHdyYXBNYXJrcyhuZXcgVGV4dFZpZXcodGhpcy50ZXh0LnNsaWNlKHRoaXMudGV4dE9mZiwgdGhpcy50ZXh0T2ZmICsgdGFrZSkpLCBhY3RpdmUpLCBvcGVuU3RhcnQpO1xuICAgICAgICAgICAgdGhpcy5hdEN1cnNvclBvcyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnRleHRPZmYgKz0gdGFrZTtcbiAgICAgICAgICAgIGxlbmd0aCAtPSB0YWtlO1xuICAgICAgICAgICAgb3BlblN0YXJ0ID0gMDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzcGFuKGZyb20sIHRvLCBhY3RpdmUsIG9wZW5TdGFydCkge1xuICAgICAgICB0aGlzLmJ1aWxkVGV4dCh0byAtIGZyb20sIGFjdGl2ZSwgb3BlblN0YXJ0KTtcbiAgICAgICAgdGhpcy5wb3MgPSB0bztcbiAgICAgICAgaWYgKHRoaXMub3BlblN0YXJ0IDwgMClcbiAgICAgICAgICAgIHRoaXMub3BlblN0YXJ0ID0gb3BlblN0YXJ0O1xuICAgIH1cbiAgICBwb2ludChmcm9tLCB0bywgZGVjbywgYWN0aXZlLCBvcGVuU3RhcnQsIGluZGV4KSB7XG4gICAgICAgIGlmICh0aGlzLmRpc2FsbG93QmxvY2tFZmZlY3RzRm9yW2luZGV4XSAmJiBkZWNvIGluc3RhbmNlb2YgUG9pbnREZWNvcmF0aW9uKSB7XG4gICAgICAgICAgICBpZiAoZGVjby5ibG9jaylcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkJsb2NrIGRlY29yYXRpb25zIG1heSBub3QgYmUgc3BlY2lmaWVkIHZpYSBwbHVnaW5zXCIpO1xuICAgICAgICAgICAgaWYgKHRvID4gdGhpcy5kb2MubGluZUF0KHRoaXMucG9zKS50bylcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkRlY29yYXRpb25zIHRoYXQgcmVwbGFjZSBsaW5lIGJyZWFrcyBtYXkgbm90IGJlIHNwZWNpZmllZCB2aWEgcGx1Z2luc1wiKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbGVuID0gdG8gLSBmcm9tO1xuICAgICAgICBpZiAoZGVjbyBpbnN0YW5jZW9mIFBvaW50RGVjb3JhdGlvbikge1xuICAgICAgICAgICAgaWYgKGRlY28uYmxvY2spIHtcbiAgICAgICAgICAgICAgICBsZXQgeyB0eXBlIH0gPSBkZWNvO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlID09IEJsb2NrVHlwZS5XaWRnZXRBZnRlciAmJiAhdGhpcy5wb3NDb3ZlcmVkKCkpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0TGluZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkQmxvY2tXaWRnZXQobmV3IEJsb2NrV2lkZ2V0VmlldyhkZWNvLndpZGdldCB8fCBuZXcgTnVsbFdpZGdldChcImRpdlwiKSwgbGVuLCB0eXBlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgdmlldyA9IFdpZGdldFZpZXcuY3JlYXRlKGRlY28ud2lkZ2V0IHx8IG5ldyBOdWxsV2lkZ2V0KFwic3BhblwiKSwgbGVuLCBsZW4gPyAwIDogZGVjby5zdGFydFNpZGUpO1xuICAgICAgICAgICAgICAgIGxldCBjdXJzb3JCZWZvcmUgPSB0aGlzLmF0Q3Vyc29yUG9zICYmICF2aWV3LmlzRWRpdGFibGUgJiYgb3BlblN0YXJ0IDw9IGFjdGl2ZS5sZW5ndGggJiYgKGZyb20gPCB0byB8fCBkZWNvLnN0YXJ0U2lkZSA+IDApO1xuICAgICAgICAgICAgICAgIGxldCBjdXJzb3JBZnRlciA9ICF2aWV3LmlzRWRpdGFibGUgJiYgKGZyb20gPCB0byB8fCBkZWNvLnN0YXJ0U2lkZSA8PSAwKTtcbiAgICAgICAgICAgICAgICBsZXQgbGluZSA9IHRoaXMuZ2V0TGluZSgpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBlbmRpbmdCdWZmZXIgPT0gMiAvKiBCdWYuSWZDdXJzb3IgKi8gJiYgIWN1cnNvckJlZm9yZSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nQnVmZmVyID0gMCAvKiBCdWYuTm8gKi87XG4gICAgICAgICAgICAgICAgdGhpcy5mbHVzaEJ1ZmZlcihhY3RpdmUpO1xuICAgICAgICAgICAgICAgIGlmIChjdXJzb3JCZWZvcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgbGluZS5hcHBlbmQod3JhcE1hcmtzKG5ldyBXaWRnZXRCdWZmZXJWaWV3KDEpLCBhY3RpdmUpLCBvcGVuU3RhcnQpO1xuICAgICAgICAgICAgICAgICAgICBvcGVuU3RhcnQgPSBhY3RpdmUubGVuZ3RoICsgTWF0aC5tYXgoMCwgb3BlblN0YXJ0IC0gYWN0aXZlLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxpbmUuYXBwZW5kKHdyYXBNYXJrcyh2aWV3LCBhY3RpdmUpLCBvcGVuU3RhcnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXRDdXJzb3JQb3MgPSBjdXJzb3JBZnRlcjtcbiAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmdCdWZmZXIgPSAhY3Vyc29yQWZ0ZXIgPyAwIC8qIEJ1Zi5ObyAqLyA6IGZyb20gPCB0byA/IDEgLyogQnVmLlllcyAqLyA6IDIgLyogQnVmLklmQ3Vyc29yICovO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZG9jLmxpbmVBdCh0aGlzLnBvcykuZnJvbSA9PSB0aGlzLnBvcykgeyAvLyBMaW5lIGRlY29yYXRpb25cbiAgICAgICAgICAgIHRoaXMuZ2V0TGluZSgpLmFkZExpbmVEZWNvKGRlY28pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsZW4pIHtcbiAgICAgICAgICAgIC8vIEFkdmFuY2UgdGhlIGl0ZXJhdG9yIHBhc3QgdGhlIHJlcGxhY2VkIGNvbnRlbnRcbiAgICAgICAgICAgIGlmICh0aGlzLnRleHRPZmYgKyBsZW4gPD0gdGhpcy50ZXh0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMudGV4dE9mZiArPSBsZW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNraXAgKz0gbGVuIC0gKHRoaXMudGV4dC5sZW5ndGggLSB0aGlzLnRleHRPZmYpO1xuICAgICAgICAgICAgICAgIHRoaXMudGV4dCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0T2ZmID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucG9zID0gdG87XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub3BlblN0YXJ0IDwgMClcbiAgICAgICAgICAgIHRoaXMub3BlblN0YXJ0ID0gb3BlblN0YXJ0O1xuICAgIH1cbiAgICBzdGF0aWMgYnVpbGQodGV4dCwgZnJvbSwgdG8sIGRlY29yYXRpb25zLCBkeW5hbWljRGVjb3JhdGlvbk1hcCkge1xuICAgICAgICBsZXQgYnVpbGRlciA9IG5ldyBDb250ZW50QnVpbGRlcih0ZXh0LCBmcm9tLCB0bywgZHluYW1pY0RlY29yYXRpb25NYXApO1xuICAgICAgICBidWlsZGVyLm9wZW5FbmQgPSBSYW5nZVNldC5zcGFucyhkZWNvcmF0aW9ucywgZnJvbSwgdG8sIGJ1aWxkZXIpO1xuICAgICAgICBpZiAoYnVpbGRlci5vcGVuU3RhcnQgPCAwKVxuICAgICAgICAgICAgYnVpbGRlci5vcGVuU3RhcnQgPSBidWlsZGVyLm9wZW5FbmQ7XG4gICAgICAgIGJ1aWxkZXIuZmluaXNoKGJ1aWxkZXIub3BlbkVuZCk7XG4gICAgICAgIHJldHVybiBidWlsZGVyO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHdyYXBNYXJrcyh2aWV3LCBhY3RpdmUpIHtcbiAgICBmb3IgKGxldCBtYXJrIG9mIGFjdGl2ZSlcbiAgICAgICAgdmlldyA9IG5ldyBNYXJrVmlldyhtYXJrLCBbdmlld10sIHZpZXcubGVuZ3RoKTtcbiAgICByZXR1cm4gdmlldztcbn1cbmNsYXNzIE51bGxXaWRnZXQgZXh0ZW5kcyBXaWRnZXRUeXBlIHtcbiAgICBjb25zdHJ1Y3Rvcih0YWcpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy50YWcgPSB0YWc7XG4gICAgfVxuICAgIGVxKG90aGVyKSB7IHJldHVybiBvdGhlci50YWcgPT0gdGhpcy50YWc7IH1cbiAgICB0b0RPTSgpIHsgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGhpcy50YWcpOyB9XG4gICAgdXBkYXRlRE9NKGVsdCkgeyByZXR1cm4gZWx0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT0gdGhpcy50YWc7IH1cbn1cblxuY29uc3QgY2xpY2tBZGRzU2VsZWN0aW9uUmFuZ2UgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG5jb25zdCBkcmFnTW92ZXNTZWxlY3Rpb24kMSA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmNvbnN0IG1vdXNlU2VsZWN0aW9uU3R5bGUgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG5jb25zdCBleGNlcHRpb25TaW5rID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY29uc3QgdXBkYXRlTGlzdGVuZXIgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG5jb25zdCBpbnB1dEhhbmRsZXIgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG5jb25zdCBwZXJMaW5lVGV4dERpcmVjdGlvbiA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmU6IHZhbHVlcyA9PiB2YWx1ZXMuc29tZSh4ID0+IHgpXG59KTtcbmNvbnN0IG5hdGl2ZVNlbGVjdGlvbkhpZGRlbiA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmU6IHZhbHVlcyA9PiB2YWx1ZXMuc29tZSh4ID0+IHgpXG59KTtcbmNsYXNzIFNjcm9sbFRhcmdldCB7XG4gICAgY29uc3RydWN0b3IocmFuZ2UsIHkgPSBcIm5lYXJlc3RcIiwgeCA9IFwibmVhcmVzdFwiLCB5TWFyZ2luID0gNSwgeE1hcmdpbiA9IDUpIHtcbiAgICAgICAgdGhpcy5yYW5nZSA9IHJhbmdlO1xuICAgICAgICB0aGlzLnkgPSB5O1xuICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICB0aGlzLnlNYXJnaW4gPSB5TWFyZ2luO1xuICAgICAgICB0aGlzLnhNYXJnaW4gPSB4TWFyZ2luO1xuICAgIH1cbiAgICBtYXAoY2hhbmdlcykge1xuICAgICAgICByZXR1cm4gY2hhbmdlcy5lbXB0eSA/IHRoaXMgOiBuZXcgU2Nyb2xsVGFyZ2V0KHRoaXMucmFuZ2UubWFwKGNoYW5nZXMpLCB0aGlzLnksIHRoaXMueCwgdGhpcy55TWFyZ2luLCB0aGlzLnhNYXJnaW4pO1xuICAgIH1cbn1cbmNvbnN0IHNjcm9sbEludG9WaWV3ID0gLypAX19QVVJFX18qL1N0YXRlRWZmZWN0LmRlZmluZSh7IG1hcDogKHQsIGNoKSA9PiB0Lm1hcChjaCkgfSk7XG4vKipcbkxvZyBvciByZXBvcnQgYW4gdW5oYW5kbGVkIGV4Y2VwdGlvbiBpbiBjbGllbnQgY29kZS4gU2hvdWxkXG5wcm9iYWJseSBvbmx5IGJlIHVzZWQgYnkgZXh0ZW5zaW9uIGNvZGUgdGhhdCBhbGxvd3MgY2xpZW50IGNvZGUgdG9cbnByb3ZpZGUgZnVuY3Rpb25zLCBhbmQgY2FsbHMgdGhvc2UgZnVuY3Rpb25zIGluIGEgY29udGV4dCB3aGVyZSBhblxuZXhjZXB0aW9uIGNhbid0IGJlIHByb3BhZ2F0ZWQgdG8gY2FsbGluZyBjb2RlIGluIGEgcmVhc29uYWJsZSB3YXlcbihmb3IgZXhhbXBsZSB3aGVuIGluIGFuIGV2ZW50IGhhbmRsZXIpLlxuXG5FaXRoZXIgY2FsbHMgYSBoYW5kbGVyIHJlZ2lzdGVyZWQgd2l0aFxuW2BFZGl0b3JWaWV3LmV4Y2VwdGlvblNpbmtgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlld15leGNlcHRpb25TaW5rKSxcbmB3aW5kb3cub25lcnJvcmAsIGlmIGRlZmluZWQsIG9yIGBjb25zb2xlLmVycm9yYCAoaW4gd2hpY2ggY2FzZVxuaXQnbGwgcGFzcyBgY29udGV4dGAsIHdoZW4gZ2l2ZW4sIGFzIGZpcnN0IGFyZ3VtZW50KS5cbiovXG5mdW5jdGlvbiBsb2dFeGNlcHRpb24oc3RhdGUsIGV4Y2VwdGlvbiwgY29udGV4dCkge1xuICAgIGxldCBoYW5kbGVyID0gc3RhdGUuZmFjZXQoZXhjZXB0aW9uU2luayk7XG4gICAgaWYgKGhhbmRsZXIubGVuZ3RoKVxuICAgICAgICBoYW5kbGVyWzBdKGV4Y2VwdGlvbik7XG4gICAgZWxzZSBpZiAod2luZG93Lm9uZXJyb3IpXG4gICAgICAgIHdpbmRvdy5vbmVycm9yKFN0cmluZyhleGNlcHRpb24pLCBjb250ZXh0LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgZXhjZXB0aW9uKTtcbiAgICBlbHNlIGlmIChjb250ZXh0KVxuICAgICAgICBjb25zb2xlLmVycm9yKGNvbnRleHQgKyBcIjpcIiwgZXhjZXB0aW9uKTtcbiAgICBlbHNlXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXhjZXB0aW9uKTtcbn1cbmNvbnN0IGVkaXRhYmxlID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7IGNvbWJpbmU6IHZhbHVlcyA9PiB2YWx1ZXMubGVuZ3RoID8gdmFsdWVzWzBdIDogdHJ1ZSB9KTtcbmxldCBuZXh0UGx1Z2luSUQgPSAwO1xuY29uc3Qgdmlld1BsdWdpbiA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbi8qKlxuVmlldyBwbHVnaW5zIGFzc29jaWF0ZSBzdGF0ZWZ1bCB2YWx1ZXMgd2l0aCBhIHZpZXcuIFRoZXkgY2FuXG5pbmZsdWVuY2UgdGhlIHdheSB0aGUgY29udGVudCBpcyBkcmF3biwgYW5kIGFyZSBub3RpZmllZCBvZiB0aGluZ3NcbnRoYXQgaGFwcGVuIGluIHRoZSB2aWV3LlxuKi9cbmNsYXNzIFZpZXdQbHVnaW4ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgaWQsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY3JlYXRlLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGRvbUV2ZW50SGFuZGxlcnMsIGJ1aWxkRXh0ZW5zaW9ucykge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMuY3JlYXRlID0gY3JlYXRlO1xuICAgICAgICB0aGlzLmRvbUV2ZW50SGFuZGxlcnMgPSBkb21FdmVudEhhbmRsZXJzO1xuICAgICAgICB0aGlzLmV4dGVuc2lvbiA9IGJ1aWxkRXh0ZW5zaW9ucyh0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgRGVmaW5lIGEgcGx1Z2luIGZyb20gYSBjb25zdHJ1Y3RvciBmdW5jdGlvbiB0aGF0IGNyZWF0ZXMgdGhlXG4gICAgcGx1Z2luJ3MgdmFsdWUsIGdpdmVuIGFuIGVkaXRvciB2aWV3LlxuICAgICovXG4gICAgc3RhdGljIGRlZmluZShjcmVhdGUsIHNwZWMpIHtcbiAgICAgICAgY29uc3QgeyBldmVudEhhbmRsZXJzLCBwcm92aWRlLCBkZWNvcmF0aW9uczogZGVjbyB9ID0gc3BlYyB8fCB7fTtcbiAgICAgICAgcmV0dXJuIG5ldyBWaWV3UGx1Z2luKG5leHRQbHVnaW5JRCsrLCBjcmVhdGUsIGV2ZW50SGFuZGxlcnMsIHBsdWdpbiA9PiB7XG4gICAgICAgICAgICBsZXQgZXh0ID0gW3ZpZXdQbHVnaW4ub2YocGx1Z2luKV07XG4gICAgICAgICAgICBpZiAoZGVjbylcbiAgICAgICAgICAgICAgICBleHQucHVzaChkZWNvcmF0aW9ucy5vZih2aWV3ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBsdWdpbkluc3QgPSB2aWV3LnBsdWdpbihwbHVnaW4pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGx1Z2luSW5zdCA/IGRlY28ocGx1Z2luSW5zdCkgOiBEZWNvcmF0aW9uLm5vbmU7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgaWYgKHByb3ZpZGUpXG4gICAgICAgICAgICAgICAgZXh0LnB1c2gocHJvdmlkZShwbHVnaW4pKTtcbiAgICAgICAgICAgIHJldHVybiBleHQ7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBwbHVnaW4gZm9yIGEgY2xhc3Mgd2hvc2UgY29uc3RydWN0b3IgdGFrZXMgYSBzaW5nbGVcbiAgICBlZGl0b3IgdmlldyBhcyBhcmd1bWVudC5cbiAgICAqL1xuICAgIHN0YXRpYyBmcm9tQ2xhc3MoY2xzLCBzcGVjKSB7XG4gICAgICAgIHJldHVybiBWaWV3UGx1Z2luLmRlZmluZSh2aWV3ID0+IG5ldyBjbHModmlldyksIHNwZWMpO1xuICAgIH1cbn1cbmNsYXNzIFBsdWdpbkluc3RhbmNlIHtcbiAgICBjb25zdHJ1Y3RvcihzcGVjKSB7XG4gICAgICAgIHRoaXMuc3BlYyA9IHNwZWM7XG4gICAgICAgIC8vIFdoZW4gc3RhcnRpbmcgYW4gdXBkYXRlLCBhbGwgcGx1Z2lucyBoYXZlIHRoaXMgZmllbGQgc2V0IHRvIHRoZVxuICAgICAgICAvLyB1cGRhdGUgb2JqZWN0LCBpbmRpY2F0aW5nIHRoZXkgbmVlZCB0byBiZSB1cGRhdGVkLiBXaGVuIGZpbmlzaGVkXG4gICAgICAgIC8vIHVwZGF0aW5nLCBpdCBpcyBzZXQgdG8gYGZhbHNlYC4gUmV0cmlldmluZyBhIHBsdWdpbiB0aGF0IG5lZWRzIHRvXG4gICAgICAgIC8vIGJlIHVwZGF0ZWQgd2l0aCBgdmlldy5wbHVnaW5gIGZvcmNlcyBhbiBlYWdlciB1cGRhdGUuXG4gICAgICAgIHRoaXMubXVzdFVwZGF0ZSA9IG51bGw7XG4gICAgICAgIC8vIFRoaXMgaXMgbnVsbCB3aGVuIHRoZSBwbHVnaW4gaXMgaW5pdGlhbGx5IGNyZWF0ZWQsIGJ1dFxuICAgICAgICAvLyBpbml0aWFsaXplZCBvbiB0aGUgZmlyc3QgdXBkYXRlLlxuICAgICAgICB0aGlzLnZhbHVlID0gbnVsbDtcbiAgICB9XG4gICAgdXBkYXRlKHZpZXcpIHtcbiAgICAgICAgaWYgKCF0aGlzLnZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zcGVjKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuc3BlYy5jcmVhdGUodmlldyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ0V4Y2VwdGlvbih2aWV3LnN0YXRlLCBlLCBcIkNvZGVNaXJyb3IgcGx1Z2luIGNyYXNoZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVhY3RpdmF0ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLm11c3RVcGRhdGUpIHtcbiAgICAgICAgICAgIGxldCB1cGRhdGUgPSB0aGlzLm11c3RVcGRhdGU7XG4gICAgICAgICAgICB0aGlzLm11c3RVcGRhdGUgPSBudWxsO1xuICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUudXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZS51cGRhdGUodXBkYXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nRXhjZXB0aW9uKHVwZGF0ZS5zdGF0ZSwgZSwgXCJDb2RlTWlycm9yIHBsdWdpbiBjcmFzaGVkXCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZS5kZXN0cm95KVxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChfKSB7IH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWFjdGl2YXRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBkZXN0cm95KHZpZXcpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAoKF9hID0gdGhpcy52YWx1ZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmRlc3Ryb3kpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZS5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGxvZ0V4Y2VwdGlvbih2aWV3LnN0YXRlLCBlLCBcIkNvZGVNaXJyb3IgcGx1Z2luIGNyYXNoZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgdGhpcy5zcGVjID0gdGhpcy52YWx1ZSA9IG51bGw7XG4gICAgfVxufVxuY29uc3QgZWRpdG9yQXR0cmlidXRlcyA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmNvbnN0IGNvbnRlbnRBdHRyaWJ1dGVzID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuLy8gUHJvdmlkZSBkZWNvcmF0aW9uc1xuY29uc3QgZGVjb3JhdGlvbnMgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG5jb25zdCBhdG9taWNSYW5nZXMgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG5jb25zdCBzY3JvbGxNYXJnaW5zID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY29uc3Qgc3R5bGVNb2R1bGUgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG5jbGFzcyBDaGFuZ2VkUmFuZ2Uge1xuICAgIGNvbnN0cnVjdG9yKGZyb21BLCB0b0EsIGZyb21CLCB0b0IpIHtcbiAgICAgICAgdGhpcy5mcm9tQSA9IGZyb21BO1xuICAgICAgICB0aGlzLnRvQSA9IHRvQTtcbiAgICAgICAgdGhpcy5mcm9tQiA9IGZyb21CO1xuICAgICAgICB0aGlzLnRvQiA9IHRvQjtcbiAgICB9XG4gICAgam9pbihvdGhlcikge1xuICAgICAgICByZXR1cm4gbmV3IENoYW5nZWRSYW5nZShNYXRoLm1pbih0aGlzLmZyb21BLCBvdGhlci5mcm9tQSksIE1hdGgubWF4KHRoaXMudG9BLCBvdGhlci50b0EpLCBNYXRoLm1pbih0aGlzLmZyb21CLCBvdGhlci5mcm9tQiksIE1hdGgubWF4KHRoaXMudG9CLCBvdGhlci50b0IpKTtcbiAgICB9XG4gICAgYWRkVG9TZXQoc2V0KSB7XG4gICAgICAgIGxldCBpID0gc2V0Lmxlbmd0aCwgbWUgPSB0aGlzO1xuICAgICAgICBmb3IgKDsgaSA+IDA7IGktLSkge1xuICAgICAgICAgICAgbGV0IHJhbmdlID0gc2V0W2kgLSAxXTtcbiAgICAgICAgICAgIGlmIChyYW5nZS5mcm9tQSA+IG1lLnRvQSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGlmIChyYW5nZS50b0EgPCBtZS5mcm9tQSlcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIG1lID0gbWUuam9pbihyYW5nZSk7XG4gICAgICAgICAgICBzZXQuc3BsaWNlKGkgLSAxLCAxKTtcbiAgICAgICAgfVxuICAgICAgICBzZXQuc3BsaWNlKGksIDAsIG1lKTtcbiAgICAgICAgcmV0dXJuIHNldDtcbiAgICB9XG4gICAgc3RhdGljIGV4dGVuZFdpdGhSYW5nZXMoZGlmZiwgcmFuZ2VzKSB7XG4gICAgICAgIGlmIChyYW5nZXMubGVuZ3RoID09IDApXG4gICAgICAgICAgICByZXR1cm4gZGlmZjtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBkSSA9IDAsIHJJID0gMCwgcG9zQSA9IDAsIHBvc0IgPSAwOzsgZEkrKykge1xuICAgICAgICAgICAgbGV0IG5leHQgPSBkSSA9PSBkaWZmLmxlbmd0aCA/IG51bGwgOiBkaWZmW2RJXSwgb2ZmID0gcG9zQSAtIHBvc0I7XG4gICAgICAgICAgICBsZXQgZW5kID0gbmV4dCA/IG5leHQuZnJvbUIgOiAxZTk7XG4gICAgICAgICAgICB3aGlsZSAockkgPCByYW5nZXMubGVuZ3RoICYmIHJhbmdlc1tySV0gPCBlbmQpIHtcbiAgICAgICAgICAgICAgICBsZXQgZnJvbSA9IHJhbmdlc1tySV0sIHRvID0gcmFuZ2VzW3JJICsgMV07XG4gICAgICAgICAgICAgICAgbGV0IGZyb21CID0gTWF0aC5tYXgocG9zQiwgZnJvbSksIHRvQiA9IE1hdGgubWluKGVuZCwgdG8pO1xuICAgICAgICAgICAgICAgIGlmIChmcm9tQiA8PSB0b0IpXG4gICAgICAgICAgICAgICAgICAgIG5ldyBDaGFuZ2VkUmFuZ2UoZnJvbUIgKyBvZmYsIHRvQiArIG9mZiwgZnJvbUIsIHRvQikuYWRkVG9TZXQocmVzdWx0KTtcbiAgICAgICAgICAgICAgICBpZiAodG8gPiBlbmQpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgckkgKz0gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghbmV4dClcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgbmV3IENoYW5nZWRSYW5nZShuZXh0LmZyb21BLCBuZXh0LnRvQSwgbmV4dC5mcm9tQiwgbmV4dC50b0IpLmFkZFRvU2V0KHJlc3VsdCk7XG4gICAgICAgICAgICBwb3NBID0gbmV4dC50b0E7XG4gICAgICAgICAgICBwb3NCID0gbmV4dC50b0I7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcblZpZXcgW3BsdWdpbnNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5WaWV3UGx1Z2luKSBhcmUgZ2l2ZW4gaW5zdGFuY2VzIG9mIHRoaXNcbmNsYXNzLCB3aGljaCBkZXNjcmliZSB3aGF0IGhhcHBlbmVkLCB3aGVuZXZlciB0aGUgdmlldyBpcyB1cGRhdGVkLlxuKi9cbmNsYXNzIFZpZXdVcGRhdGUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBlZGl0b3IgdmlldyB0aGF0IHRoZSB1cGRhdGUgaXMgYXNzb2NpYXRlZCB3aXRoLlxuICAgICovXG4gICAgdmlldywgXG4gICAgLyoqXG4gICAgVGhlIG5ldyBlZGl0b3Igc3RhdGUuXG4gICAgKi9cbiAgICBzdGF0ZSwgXG4gICAgLyoqXG4gICAgVGhlIHRyYW5zYWN0aW9ucyBpbnZvbHZlZCBpbiB0aGUgdXBkYXRlLiBNYXkgYmUgZW1wdHkuXG4gICAgKi9cbiAgICB0cmFuc2FjdGlvbnMpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICB0aGlzLnRyYW5zYWN0aW9ucyA9IHRyYW5zYWN0aW9ucztcbiAgICAgICAgLyoqXG4gICAgICAgIEBpbnRlcm5hbFxuICAgICAgICAqL1xuICAgICAgICB0aGlzLmZsYWdzID0gMDtcbiAgICAgICAgdGhpcy5zdGFydFN0YXRlID0gdmlldy5zdGF0ZTtcbiAgICAgICAgdGhpcy5jaGFuZ2VzID0gQ2hhbmdlU2V0LmVtcHR5KHRoaXMuc3RhcnRTdGF0ZS5kb2MubGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgdHIgb2YgdHJhbnNhY3Rpb25zKVxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VzID0gdGhpcy5jaGFuZ2VzLmNvbXBvc2UodHIuY2hhbmdlcyk7XG4gICAgICAgIGxldCBjaGFuZ2VkUmFuZ2VzID0gW107XG4gICAgICAgIHRoaXMuY2hhbmdlcy5pdGVyQ2hhbmdlZFJhbmdlcygoZnJvbUEsIHRvQSwgZnJvbUIsIHRvQikgPT4gY2hhbmdlZFJhbmdlcy5wdXNoKG5ldyBDaGFuZ2VkUmFuZ2UoZnJvbUEsIHRvQSwgZnJvbUIsIHRvQikpKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkUmFuZ2VzID0gY2hhbmdlZFJhbmdlcztcbiAgICAgICAgbGV0IGZvY3VzID0gdmlldy5oYXNGb2N1cztcbiAgICAgICAgaWYgKGZvY3VzICE9IHZpZXcuaW5wdXRTdGF0ZS5ub3RpZmllZEZvY3VzZWQpIHtcbiAgICAgICAgICAgIHZpZXcuaW5wdXRTdGF0ZS5ub3RpZmllZEZvY3VzZWQgPSBmb2N1cztcbiAgICAgICAgICAgIHRoaXMuZmxhZ3MgfD0gMSAvKiBVcGRhdGVGbGFnLkZvY3VzICovO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc3RhdGljIGNyZWF0ZSh2aWV3LCBzdGF0ZSwgdHJhbnNhY3Rpb25zKSB7XG4gICAgICAgIHJldHVybiBuZXcgVmlld1VwZGF0ZSh2aWV3LCBzdGF0ZSwgdHJhbnNhY3Rpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgVGVsbHMgeW91IHdoZXRoZXIgdGhlIFt2aWV3cG9ydF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXcudmlld3BvcnQpIG9yXG4gICAgW3Zpc2libGUgcmFuZ2VzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlldy52aXNpYmxlUmFuZ2VzKSBjaGFuZ2VkIGluIHRoaXNcbiAgICB1cGRhdGUuXG4gICAgKi9cbiAgICBnZXQgdmlld3BvcnRDaGFuZ2VkKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuZmxhZ3MgJiA0IC8qIFVwZGF0ZUZsYWcuVmlld3BvcnQgKi8pID4gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgSW5kaWNhdGVzIHdoZXRoZXIgdGhlIGhlaWdodCBvZiBhIGJsb2NrIGVsZW1lbnQgaW4gdGhlIGVkaXRvclxuICAgIGNoYW5nZWQgaW4gdGhpcyB1cGRhdGUuXG4gICAgKi9cbiAgICBnZXQgaGVpZ2h0Q2hhbmdlZCgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmZsYWdzICYgMiAvKiBVcGRhdGVGbGFnLkhlaWdodCAqLykgPiAwO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm5zIHRydWUgd2hlbiB0aGUgZG9jdW1lbnQgd2FzIG1vZGlmaWVkIG9yIHRoZSBzaXplIG9mIHRoZVxuICAgIGVkaXRvciwgb3IgZWxlbWVudHMgd2l0aGluIHRoZSBlZGl0b3IsIGNoYW5nZWQuXG4gICAgKi9cbiAgICBnZXQgZ2VvbWV0cnlDaGFuZ2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2NDaGFuZ2VkIHx8ICh0aGlzLmZsYWdzICYgKDggLyogVXBkYXRlRmxhZy5HZW9tZXRyeSAqLyB8IDIgLyogVXBkYXRlRmxhZy5IZWlnaHQgKi8pKSA+IDA7XG4gICAgfVxuICAgIC8qKlxuICAgIFRydWUgd2hlbiB0aGlzIHVwZGF0ZSBpbmRpY2F0ZXMgYSBmb2N1cyBjaGFuZ2UuXG4gICAgKi9cbiAgICBnZXQgZm9jdXNDaGFuZ2VkKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuZmxhZ3MgJiAxIC8qIFVwZGF0ZUZsYWcuRm9jdXMgKi8pID4gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgV2hldGhlciB0aGUgZG9jdW1lbnQgY2hhbmdlZCBpbiB0aGlzIHVwZGF0ZS5cbiAgICAqL1xuICAgIGdldCBkb2NDaGFuZ2VkKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuY2hhbmdlcy5lbXB0eTtcbiAgICB9XG4gICAgLyoqXG4gICAgV2hldGhlciB0aGUgc2VsZWN0aW9uIHdhcyBleHBsaWNpdGx5IHNldCBpbiB0aGlzIHVwZGF0ZS5cbiAgICAqL1xuICAgIGdldCBzZWxlY3Rpb25TZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zYWN0aW9ucy5zb21lKHRyID0+IHRyLnNlbGVjdGlvbik7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZ2V0IGVtcHR5KCkgeyByZXR1cm4gdGhpcy5mbGFncyA9PSAwICYmIHRoaXMudHJhbnNhY3Rpb25zLmxlbmd0aCA9PSAwOyB9XG59XG5cbi8qKlxuVXNlZCB0byBpbmRpY2F0ZSBbdGV4dCBkaXJlY3Rpb25dKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LnRleHREaXJlY3Rpb24pLlxuKi9cbnZhciBEaXJlY3Rpb24gPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChEaXJlY3Rpb24pIHtcbiAgICAvLyAoVGhlc2UgYXJlIGNob3NlbiB0byBtYXRjaCB0aGUgYmFzZSBsZXZlbHMsIGluIGJpZGkgYWxnb3JpdGhtXG4gICAgLy8gdGVybXMsIG9mIHNwYW5zIGluIHRoYXQgZGlyZWN0aW9uLilcbiAgICAvKipcbiAgICBMZWZ0LXRvLXJpZ2h0LlxuICAgICovXG4gICAgRGlyZWN0aW9uW0RpcmVjdGlvbltcIkxUUlwiXSA9IDBdID0gXCJMVFJcIjtcbiAgICAvKipcbiAgICBSaWdodC10by1sZWZ0LlxuICAgICovXG4gICAgRGlyZWN0aW9uW0RpcmVjdGlvbltcIlJUTFwiXSA9IDFdID0gXCJSVExcIjtcbnJldHVybiBEaXJlY3Rpb259KShEaXJlY3Rpb24gfHwgKERpcmVjdGlvbiA9IHt9KSk7XG5jb25zdCBMVFIgPSBEaXJlY3Rpb24uTFRSLCBSVEwgPSBEaXJlY3Rpb24uUlRMO1xuLy8gRGVjb2RlIGEgc3RyaW5nIHdpdGggZWFjaCB0eXBlIGVuY29kZWQgYXMgbG9nMih0eXBlKVxuZnVuY3Rpb24gZGVjKHN0cikge1xuICAgIGxldCByZXN1bHQgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKylcbiAgICAgICAgcmVzdWx0LnB1c2goMSA8PCArc3RyW2ldKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLy8gQ2hhcmFjdGVyIHR5cGVzIGZvciBjb2RlcG9pbnRzIDAgdG8gMHhmOFxuY29uc3QgTG93VHlwZXMgPSAvKkBfX1BVUkVfXyovZGVjKFwiODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg2NjY4ODg4ODg3ODc4MzMzMzMzMzMzMzc4ODg4ODgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDg4ODg4ODAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODc4NjY2Njg4ODgwODg4ODg2NjMzODA4ODgzMDg4ODg4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDhcIik7XG4vLyBDaGFyYWN0ZXIgdHlwZXMgZm9yIGNvZGVwb2ludHMgMHg2MDAgdG8gMHg2ZjlcbmNvbnN0IEFyYWJpY1R5cGVzID0gLypAX19QVVJFX18qL2RlYyhcIjQ0NDQ0NDg4MjY2MjcyODg5OTk5OTk5OTk5OTIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjk5OTk5OTk5OTk5OTk5OTk5OTk5OTQ0NDQ0NDQ0NDQ2NDQyMjI4MjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI5OTk5OTk5NDk5OTk5OTkyMjk5ODk5OTkyMjMzMzMzMzMzMzNcIik7XG5jb25zdCBCcmFja2V0cyA9IC8qQF9fUFVSRV9fKi9PYmplY3QuY3JlYXRlKG51bGwpLCBCcmFja2V0U3RhY2sgPSBbXTtcbi8vIFRoZXJlJ3MgYSBsb3QgbW9yZSBpblxuLy8gaHR0cHM6Ly93d3cudW5pY29kZS5vcmcvUHVibGljL1VDRC9sYXRlc3QvdWNkL0JpZGlCcmFja2V0cy50eHQsXG4vLyB3aGljaCBhcmUgbGVmdCBvdXQgdG8ga2VlcCBjb2RlIHNpemUgZG93bi5cbmZvciAobGV0IHAgb2YgW1wiKClcIiwgXCJbXVwiLCBcInt9XCJdKSB7XG4gICAgbGV0IGwgPSAvKkBfX1BVUkVfXyovcC5jaGFyQ29kZUF0KDApLCByID0gLypAX19QVVJFX18qL3AuY2hhckNvZGVBdCgxKTtcbiAgICBCcmFja2V0c1tsXSA9IHI7XG4gICAgQnJhY2tldHNbcl0gPSAtbDtcbn1cbmZ1bmN0aW9uIGNoYXJUeXBlKGNoKSB7XG4gICAgcmV0dXJuIGNoIDw9IDB4ZjcgPyBMb3dUeXBlc1tjaF0gOlxuICAgICAgICAweDU5MCA8PSBjaCAmJiBjaCA8PSAweDVmNCA/IDIgLyogVC5SICovIDpcbiAgICAgICAgICAgIDB4NjAwIDw9IGNoICYmIGNoIDw9IDB4NmY5ID8gQXJhYmljVHlwZXNbY2ggLSAweDYwMF0gOlxuICAgICAgICAgICAgICAgIDB4NmVlIDw9IGNoICYmIGNoIDw9IDB4OGFjID8gNCAvKiBULkFMICovIDpcbiAgICAgICAgICAgICAgICAgICAgMHgyMDAwIDw9IGNoICYmIGNoIDw9IDB4MjAwYiA/IDI1NiAvKiBULk5JICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIDB4ZmI1MCA8PSBjaCAmJiBjaCA8PSAweGZkZmYgPyA0IC8qIFQuQUwgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoID09IDB4MjAwYyA/IDI1NiAvKiBULk5JICovIDogMSAvKiBULkwgKi87XG59XG5jb25zdCBCaWRpUkUgPSAvW1xcdTA1OTAtXFx1MDVmNFxcdTA2MDAtXFx1MDZmZlxcdTA3MDAtXFx1MDhhY1xcdWZiNTAtXFx1ZmRmZl0vO1xuLyoqXG5SZXByZXNlbnRzIGEgY29udGlndW91cyByYW5nZSBvZiB0ZXh0IHRoYXQgaGFzIGEgc2luZ2xlIGRpcmVjdGlvblxuKGFzIGluIGxlZnQtdG8tcmlnaHQgb3IgcmlnaHQtdG8tbGVmdCkuXG4qL1xuY2xhc3MgQmlkaVNwYW4ge1xuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIHN0YXJ0IG9mIHRoZSBzcGFuIChyZWxhdGl2ZSB0byB0aGUgc3RhcnQgb2YgdGhlIGxpbmUpLlxuICAgICovXG4gICAgZnJvbSwgXG4gICAgLyoqXG4gICAgVGhlIGVuZCBvZiB0aGUgc3Bhbi5cbiAgICAqL1xuICAgIHRvLCBcbiAgICAvKipcbiAgICBUaGUgW1wiYmlkaVxuICAgIGxldmVsXCJdKGh0dHBzOi8vdW5pY29kZS5vcmcvcmVwb3J0cy90cjkvI0Jhc2ljX0Rpc3BsYXlfQWxnb3JpdGhtKVxuICAgIG9mIHRoZSBzcGFuIChpbiB0aGlzIGNvbnRleHQsIDAgbWVhbnNcbiAgICBsZWZ0LXRvLXJpZ2h0LCAxIG1lYW5zIHJpZ2h0LXRvLWxlZnQsIDIgbWVhbnMgbGVmdC10by1yaWdodFxuICAgIG51bWJlciBpbnNpZGUgcmlnaHQtdG8tbGVmdCB0ZXh0KS5cbiAgICAqL1xuICAgIGxldmVsKSB7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICAgICAgdGhpcy5sZXZlbCA9IGxldmVsO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgZGlyZWN0aW9uIG9mIHRoaXMgc3Bhbi5cbiAgICAqL1xuICAgIGdldCBkaXIoKSB7IHJldHVybiB0aGlzLmxldmVsICUgMiA/IFJUTCA6IExUUjsgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc2lkZShlbmQsIGRpcikgeyByZXR1cm4gKHRoaXMuZGlyID09IGRpcikgPT0gZW5kID8gdGhpcy50byA6IHRoaXMuZnJvbTsgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc3RhdGljIGZpbmQob3JkZXIsIGluZGV4LCBsZXZlbCwgYXNzb2MpIHtcbiAgICAgICAgbGV0IG1heWJlID0gLTE7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3JkZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBzcGFuID0gb3JkZXJbaV07XG4gICAgICAgICAgICBpZiAoc3Bhbi5mcm9tIDw9IGluZGV4ICYmIHNwYW4udG8gPj0gaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3Bhbi5sZXZlbCA9PSBsZXZlbClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICAgICAgLy8gV2hlbiBtdWx0aXBsZSBzcGFucyBtYXRjaCwgaWYgYXNzb2MgIT0gMCwgdGFrZSB0aGUgb25lIHRoYXRcbiAgICAgICAgICAgICAgICAvLyBjb3ZlcnMgdGhhdCBzaWRlLCBvdGhlcndpc2UgdGFrZSB0aGUgb25lIHdpdGggdGhlIG1pbmltdW1cbiAgICAgICAgICAgICAgICAvLyBsZXZlbC5cbiAgICAgICAgICAgICAgICBpZiAobWF5YmUgPCAwIHx8IChhc3NvYyAhPSAwID8gKGFzc29jIDwgMCA/IHNwYW4uZnJvbSA8IGluZGV4IDogc3Bhbi50byA+IGluZGV4KSA6IG9yZGVyW21heWJlXS5sZXZlbCA+IHNwYW4ubGV2ZWwpKVxuICAgICAgICAgICAgICAgICAgICBtYXliZSA9IGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1heWJlIDwgMClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW5kZXggb3V0IG9mIHJhbmdlXCIpO1xuICAgICAgICByZXR1cm4gbWF5YmU7XG4gICAgfVxufVxuLy8gUmV1c2VkIGFycmF5IG9mIGNoYXJhY3RlciB0eXBlc1xuY29uc3QgdHlwZXMgPSBbXTtcbmZ1bmN0aW9uIGNvbXB1dGVPcmRlcihsaW5lLCBkaXJlY3Rpb24pIHtcbiAgICBsZXQgbGVuID0gbGluZS5sZW5ndGgsIG91dGVyVHlwZSA9IGRpcmVjdGlvbiA9PSBMVFIgPyAxIC8qIFQuTCAqLyA6IDIgLyogVC5SICovLCBvcHBvc2l0ZVR5cGUgPSBkaXJlY3Rpb24gPT0gTFRSID8gMiAvKiBULlIgKi8gOiAxIC8qIFQuTCAqLztcbiAgICBpZiAoIWxpbmUgfHwgb3V0ZXJUeXBlID09IDEgLyogVC5MICovICYmICFCaWRpUkUudGVzdChsaW5lKSlcbiAgICAgICAgcmV0dXJuIHRyaXZpYWxPcmRlcihsZW4pO1xuICAgIC8vIFcxLiBFeGFtaW5lIGVhY2ggbm9uLXNwYWNpbmcgbWFyayAoTlNNKSBpbiB0aGUgbGV2ZWwgcnVuLCBhbmRcbiAgICAvLyBjaGFuZ2UgdGhlIHR5cGUgb2YgdGhlIE5TTSB0byB0aGUgdHlwZSBvZiB0aGUgcHJldmlvdXNcbiAgICAvLyBjaGFyYWN0ZXIuIElmIHRoZSBOU00gaXMgYXQgdGhlIHN0YXJ0IG9mIHRoZSBsZXZlbCBydW4sIGl0IHdpbGxcbiAgICAvLyBnZXQgdGhlIHR5cGUgb2Ygc29yLlxuICAgIC8vIFcyLiBTZWFyY2ggYmFja3dhcmRzIGZyb20gZWFjaCBpbnN0YW5jZSBvZiBhIEV1cm9wZWFuIG51bWJlclxuICAgIC8vIHVudGlsIHRoZSBmaXJzdCBzdHJvbmcgdHlwZSAoUiwgTCwgQUwsIG9yIHNvcikgaXMgZm91bmQuIElmIGFuXG4gICAgLy8gQUwgaXMgZm91bmQsIGNoYW5nZSB0aGUgdHlwZSBvZiB0aGUgRXVyb3BlYW4gbnVtYmVyIHRvIEFyYWJpY1xuICAgIC8vIG51bWJlci5cbiAgICAvLyBXMy4gQ2hhbmdlIGFsbCBBTHMgdG8gUi5cbiAgICAvLyAoTGVmdCBhZnRlciB0aGlzOiBMLCBSLCBFTiwgQU4sIEVULCBDUywgTkkpXG4gICAgZm9yIChsZXQgaSA9IDAsIHByZXYgPSBvdXRlclR5cGUsIHByZXZTdHJvbmcgPSBvdXRlclR5cGU7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBsZXQgdHlwZSA9IGNoYXJUeXBlKGxpbmUuY2hhckNvZGVBdChpKSk7XG4gICAgICAgIGlmICh0eXBlID09IDUxMiAvKiBULk5TTSAqLylcbiAgICAgICAgICAgIHR5cGUgPSBwcmV2O1xuICAgICAgICBlbHNlIGlmICh0eXBlID09IDggLyogVC5FTiAqLyAmJiBwcmV2U3Ryb25nID09IDQgLyogVC5BTCAqLylcbiAgICAgICAgICAgIHR5cGUgPSAxNiAvKiBULkFOICovO1xuICAgICAgICB0eXBlc1tpXSA9IHR5cGUgPT0gNCAvKiBULkFMICovID8gMiAvKiBULlIgKi8gOiB0eXBlO1xuICAgICAgICBpZiAodHlwZSAmIDcgLyogVC5TdHJvbmcgKi8pXG4gICAgICAgICAgICBwcmV2U3Ryb25nID0gdHlwZTtcbiAgICAgICAgcHJldiA9IHR5cGU7XG4gICAgfVxuICAgIC8vIFc1LiBBIHNlcXVlbmNlIG9mIEV1cm9wZWFuIHRlcm1pbmF0b3JzIGFkamFjZW50IHRvIEV1cm9wZWFuXG4gICAgLy8gbnVtYmVycyBjaGFuZ2VzIHRvIGFsbCBFdXJvcGVhbiBudW1iZXJzLlxuICAgIC8vIFc2LiBPdGhlcndpc2UsIHNlcGFyYXRvcnMgYW5kIHRlcm1pbmF0b3JzIGNoYW5nZSB0byBPdGhlclxuICAgIC8vIE5ldXRyYWwuXG4gICAgLy8gVzcuIFNlYXJjaCBiYWNrd2FyZHMgZnJvbSBlYWNoIGluc3RhbmNlIG9mIGEgRXVyb3BlYW4gbnVtYmVyXG4gICAgLy8gdW50aWwgdGhlIGZpcnN0IHN0cm9uZyB0eXBlIChSLCBMLCBvciBzb3IpIGlzIGZvdW5kLiBJZiBhbiBMIGlzXG4gICAgLy8gZm91bmQsIHRoZW4gY2hhbmdlIHRoZSB0eXBlIG9mIHRoZSBFdXJvcGVhbiBudW1iZXIgdG8gTC5cbiAgICAvLyAoTGVmdCBhZnRlciB0aGlzOiBMLCBSLCBFTitBTiwgTkkpXG4gICAgZm9yIChsZXQgaSA9IDAsIHByZXYgPSBvdXRlclR5cGUsIHByZXZTdHJvbmcgPSBvdXRlclR5cGU7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBsZXQgdHlwZSA9IHR5cGVzW2ldO1xuICAgICAgICBpZiAodHlwZSA9PSAxMjggLyogVC5DUyAqLykge1xuICAgICAgICAgICAgaWYgKGkgPCBsZW4gLSAxICYmIHByZXYgPT0gdHlwZXNbaSArIDFdICYmIChwcmV2ICYgMjQgLyogVC5OdW0gKi8pKVxuICAgICAgICAgICAgICAgIHR5cGUgPSB0eXBlc1tpXSA9IHByZXY7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdHlwZXNbaV0gPSAyNTYgLyogVC5OSSAqLztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlID09IDY0IC8qIFQuRVQgKi8pIHtcbiAgICAgICAgICAgIGxldCBlbmQgPSBpICsgMTtcbiAgICAgICAgICAgIHdoaWxlIChlbmQgPCBsZW4gJiYgdHlwZXNbZW5kXSA9PSA2NCAvKiBULkVUICovKVxuICAgICAgICAgICAgICAgIGVuZCsrO1xuICAgICAgICAgICAgbGV0IHJlcGxhY2UgPSAoaSAmJiBwcmV2ID09IDggLyogVC5FTiAqLykgfHwgKGVuZCA8IGxlbiAmJiB0eXBlc1tlbmRdID09IDggLyogVC5FTiAqLykgPyAocHJldlN0cm9uZyA9PSAxIC8qIFQuTCAqLyA/IDEgLyogVC5MICovIDogOCAvKiBULkVOICovKSA6IDI1NiAvKiBULk5JICovO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IGk7IGogPCBlbmQ7IGorKylcbiAgICAgICAgICAgICAgICB0eXBlc1tqXSA9IHJlcGxhY2U7XG4gICAgICAgICAgICBpID0gZW5kIC0gMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlID09IDggLyogVC5FTiAqLyAmJiBwcmV2U3Ryb25nID09IDEgLyogVC5MICovKSB7XG4gICAgICAgICAgICB0eXBlc1tpXSA9IDEgLyogVC5MICovO1xuICAgICAgICB9XG4gICAgICAgIHByZXYgPSB0eXBlO1xuICAgICAgICBpZiAodHlwZSAmIDcgLyogVC5TdHJvbmcgKi8pXG4gICAgICAgICAgICBwcmV2U3Ryb25nID0gdHlwZTtcbiAgICB9XG4gICAgLy8gTjAuIFByb2Nlc3MgYnJhY2tldCBwYWlycyBpbiBhbiBpc29sYXRpbmcgcnVuIHNlcXVlbmNlXG4gICAgLy8gc2VxdWVudGlhbGx5IGluIHRoZSBsb2dpY2FsIG9yZGVyIG9mIHRoZSB0ZXh0IHBvc2l0aW9ucyBvZiB0aGVcbiAgICAvLyBvcGVuaW5nIHBhaXJlZCBicmFja2V0cyB1c2luZyB0aGUgbG9naWMgZ2l2ZW4gYmVsb3cuIFdpdGhpbiB0aGlzXG4gICAgLy8gc2NvcGUsIGJpZGlyZWN0aW9uYWwgdHlwZXMgRU4gYW5kIEFOIGFyZSB0cmVhdGVkIGFzIFIuXG4gICAgZm9yIChsZXQgaSA9IDAsIHNJID0gMCwgY29udGV4dCA9IDAsIGNoLCBiciwgdHlwZTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIC8vIEtlZXBzIFtzdGFydEluZGV4LCB0eXBlLCBzdHJvbmdTZWVuXSB0cmlwbGVzIGZvciBlYWNoIG9wZW5cbiAgICAgICAgLy8gYnJhY2tldCBvbiBCcmFja2V0U3RhY2suXG4gICAgICAgIGlmIChiciA9IEJyYWNrZXRzW2NoID0gbGluZS5jaGFyQ29kZUF0KGkpXSkge1xuICAgICAgICAgICAgaWYgKGJyIDwgMCkgeyAvLyBDbG9zaW5nIGJyYWNrZXRcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBzSiA9IHNJIC0gMzsgc0ogPj0gMDsgc0ogLT0gMykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoQnJhY2tldFN0YWNrW3NKICsgMV0gPT0gLWJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmxhZ3MgPSBCcmFja2V0U3RhY2tbc0ogKyAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0eXBlID0gKGZsYWdzICYgMiAvKiBCcmFja2V0ZWQuRW1iZWRJbnNpZGUgKi8pID8gb3V0ZXJUeXBlIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhKGZsYWdzICYgNCAvKiBCcmFja2V0ZWQuT3Bwb3NpdGVJbnNpZGUgKi8pID8gMCA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChmbGFncyAmIDEgLyogQnJhY2tldGVkLk9wcG9zaXRlQmVmb3JlICovKSA/IG9wcG9zaXRlVHlwZSA6IG91dGVyVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVzW2ldID0gdHlwZXNbQnJhY2tldFN0YWNrW3NKXV0gPSB0eXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgc0kgPSBzSjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoQnJhY2tldFN0YWNrLmxlbmd0aCA9PSAxODkgLyogQnJhY2tldGVkLk1heERlcHRoICovKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBCcmFja2V0U3RhY2tbc0krK10gPSBpO1xuICAgICAgICAgICAgICAgIEJyYWNrZXRTdGFja1tzSSsrXSA9IGNoO1xuICAgICAgICAgICAgICAgIEJyYWNrZXRTdGFja1tzSSsrXSA9IGNvbnRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoKHR5cGUgPSB0eXBlc1tpXSkgPT0gMiAvKiBULlIgKi8gfHwgdHlwZSA9PSAxIC8qIFQuTCAqLykge1xuICAgICAgICAgICAgbGV0IGVtYmVkID0gdHlwZSA9PSBvdXRlclR5cGU7XG4gICAgICAgICAgICBjb250ZXh0ID0gZW1iZWQgPyAwIDogMSAvKiBCcmFja2V0ZWQuT3Bwb3NpdGVCZWZvcmUgKi87XG4gICAgICAgICAgICBmb3IgKGxldCBzSiA9IHNJIC0gMzsgc0ogPj0gMDsgc0ogLT0gMykge1xuICAgICAgICAgICAgICAgIGxldCBjdXIgPSBCcmFja2V0U3RhY2tbc0ogKyAyXTtcbiAgICAgICAgICAgICAgICBpZiAoY3VyICYgMiAvKiBCcmFja2V0ZWQuRW1iZWRJbnNpZGUgKi8pXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGlmIChlbWJlZCkge1xuICAgICAgICAgICAgICAgICAgICBCcmFja2V0U3RhY2tbc0ogKyAyXSB8PSAyIC8qIEJyYWNrZXRlZC5FbWJlZEluc2lkZSAqLztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXIgJiA0IC8qIEJyYWNrZXRlZC5PcHBvc2l0ZUluc2lkZSAqLylcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBCcmFja2V0U3RhY2tbc0ogKyAyXSB8PSA0IC8qIEJyYWNrZXRlZC5PcHBvc2l0ZUluc2lkZSAqLztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gTjEuIEEgc2VxdWVuY2Ugb2YgbmV1dHJhbHMgdGFrZXMgdGhlIGRpcmVjdGlvbiBvZiB0aGVcbiAgICAvLyBzdXJyb3VuZGluZyBzdHJvbmcgdGV4dCBpZiB0aGUgdGV4dCBvbiBib3RoIHNpZGVzIGhhcyB0aGUgc2FtZVxuICAgIC8vIGRpcmVjdGlvbi4gRXVyb3BlYW4gYW5kIEFyYWJpYyBudW1iZXJzIGFjdCBhcyBpZiB0aGV5IHdlcmUgUiBpblxuICAgIC8vIHRlcm1zIG9mIHRoZWlyIGluZmx1ZW5jZSBvbiBuZXV0cmFscy4gU3RhcnQtb2YtbGV2ZWwtcnVuIChzb3IpXG4gICAgLy8gYW5kIGVuZC1vZi1sZXZlbC1ydW4gKGVvcikgYXJlIHVzZWQgYXQgbGV2ZWwgcnVuIGJvdW5kYXJpZXMuXG4gICAgLy8gTjIuIEFueSByZW1haW5pbmcgbmV1dHJhbHMgdGFrZSB0aGUgZW1iZWRkaW5nIGRpcmVjdGlvbi5cbiAgICAvLyAoTGVmdCBhZnRlciB0aGlzOiBMLCBSLCBFTitBTilcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGlmICh0eXBlc1tpXSA9PSAyNTYgLyogVC5OSSAqLykge1xuICAgICAgICAgICAgbGV0IGVuZCA9IGkgKyAxO1xuICAgICAgICAgICAgd2hpbGUgKGVuZCA8IGxlbiAmJiB0eXBlc1tlbmRdID09IDI1NiAvKiBULk5JICovKVxuICAgICAgICAgICAgICAgIGVuZCsrO1xuICAgICAgICAgICAgbGV0IGJlZm9yZUwgPSAoaSA/IHR5cGVzW2kgLSAxXSA6IG91dGVyVHlwZSkgPT0gMSAvKiBULkwgKi87XG4gICAgICAgICAgICBsZXQgYWZ0ZXJMID0gKGVuZCA8IGxlbiA/IHR5cGVzW2VuZF0gOiBvdXRlclR5cGUpID09IDEgLyogVC5MICovO1xuICAgICAgICAgICAgbGV0IHJlcGxhY2UgPSBiZWZvcmVMID09IGFmdGVyTCA/IChiZWZvcmVMID8gMSAvKiBULkwgKi8gOiAyIC8qIFQuUiAqLykgOiBvdXRlclR5cGU7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gaTsgaiA8IGVuZDsgaisrKVxuICAgICAgICAgICAgICAgIHR5cGVzW2pdID0gcmVwbGFjZTtcbiAgICAgICAgICAgIGkgPSBlbmQgLSAxO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEhlcmUgd2UgZGVwYXJ0IGZyb20gdGhlIGRvY3VtZW50ZWQgYWxnb3JpdGhtLCBpbiBvcmRlciB0byBhdm9pZFxuICAgIC8vIGJ1aWxkaW5nIHVwIGFuIGFjdHVhbCBsZXZlbHMgYXJyYXkuIFNpbmNlIHRoZXJlIGFyZSBvbmx5IHRocmVlXG4gICAgLy8gbGV2ZWxzICgwLCAxLCAyKSBpbiBhbiBpbXBsZW1lbnRhdGlvbiB0aGF0IGRvZXNuJ3QgdGFrZVxuICAgIC8vIGV4cGxpY2l0IGVtYmVkZGluZyBpbnRvIGFjY291bnQsIHdlIGNhbiBidWlsZCB1cCB0aGUgb3JkZXIgb25cbiAgICAvLyB0aGUgZmx5LCB3aXRob3V0IGZvbGxvd2luZyB0aGUgbGV2ZWwtYmFzZWQgYWxnb3JpdGhtLlxuICAgIGxldCBvcmRlciA9IFtdO1xuICAgIGlmIChvdXRlclR5cGUgPT0gMSAvKiBULkwgKi8pIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47KSB7XG4gICAgICAgICAgICBsZXQgc3RhcnQgPSBpLCBydGwgPSB0eXBlc1tpKytdICE9IDEgLyogVC5MICovO1xuICAgICAgICAgICAgd2hpbGUgKGkgPCBsZW4gJiYgcnRsID09ICh0eXBlc1tpXSAhPSAxIC8qIFQuTCAqLykpXG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgaWYgKHJ0bCkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSBpOyBqID4gc3RhcnQ7KSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBlbmQgPSBqLCBsID0gdHlwZXNbLS1qXSAhPSAyIC8qIFQuUiAqLztcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGogPiBzdGFydCAmJiBsID09ICh0eXBlc1tqIC0gMV0gIT0gMiAvKiBULlIgKi8pKVxuICAgICAgICAgICAgICAgICAgICAgICAgai0tO1xuICAgICAgICAgICAgICAgICAgICBvcmRlci5wdXNoKG5ldyBCaWRpU3BhbihqLCBlbmQsIGwgPyAyIDogMSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG9yZGVyLnB1c2gobmV3IEJpZGlTcGFuKHN0YXJ0LCBpLCAwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOykge1xuICAgICAgICAgICAgbGV0IHN0YXJ0ID0gaSwgcnRsID0gdHlwZXNbaSsrXSA9PSAyIC8qIFQuUiAqLztcbiAgICAgICAgICAgIHdoaWxlIChpIDwgbGVuICYmIHJ0bCA9PSAodHlwZXNbaV0gPT0gMiAvKiBULlIgKi8pKVxuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIG9yZGVyLnB1c2gobmV3IEJpZGlTcGFuKHN0YXJ0LCBpLCBydGwgPyAxIDogMikpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvcmRlcjtcbn1cbmZ1bmN0aW9uIHRyaXZpYWxPcmRlcihsZW5ndGgpIHtcbiAgICByZXR1cm4gW25ldyBCaWRpU3BhbigwLCBsZW5ndGgsIDApXTtcbn1cbmxldCBtb3ZlZE92ZXIgPSBcIlwiO1xuZnVuY3Rpb24gbW92ZVZpc3VhbGx5KGxpbmUsIG9yZGVyLCBkaXIsIHN0YXJ0LCBmb3J3YXJkKSB7XG4gICAgdmFyIF9hO1xuICAgIGxldCBzdGFydEluZGV4ID0gc3RhcnQuaGVhZCAtIGxpbmUuZnJvbSwgc3BhbkkgPSAtMTtcbiAgICBpZiAoc3RhcnRJbmRleCA9PSAwKSB7XG4gICAgICAgIGlmICghZm9yd2FyZCB8fCAhbGluZS5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKG9yZGVyWzBdLmxldmVsICE9IGRpcikge1xuICAgICAgICAgICAgc3RhcnRJbmRleCA9IG9yZGVyWzBdLnNpZGUoZmFsc2UsIGRpcik7XG4gICAgICAgICAgICBzcGFuSSA9IDA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoc3RhcnRJbmRleCA9PSBsaW5lLmxlbmd0aCkge1xuICAgICAgICBpZiAoZm9yd2FyZClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBsZXQgbGFzdCA9IG9yZGVyW29yZGVyLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAobGFzdC5sZXZlbCAhPSBkaXIpIHtcbiAgICAgICAgICAgIHN0YXJ0SW5kZXggPSBsYXN0LnNpZGUodHJ1ZSwgZGlyKTtcbiAgICAgICAgICAgIHNwYW5JID0gb3JkZXIubGVuZ3RoIC0gMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoc3BhbkkgPCAwKVxuICAgICAgICBzcGFuSSA9IEJpZGlTcGFuLmZpbmQob3JkZXIsIHN0YXJ0SW5kZXgsIChfYSA9IHN0YXJ0LmJpZGlMZXZlbCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogLTEsIHN0YXJ0LmFzc29jKTtcbiAgICBsZXQgc3BhbiA9IG9yZGVyW3NwYW5JXTtcbiAgICAvLyBFbmQgb2Ygc3Bhbi4gKEJ1dCBub3QgZW5kIG9mIGxpbmUtLXRoYXQgd2FzIGNoZWNrZWQgZm9yIGFib3ZlLilcbiAgICBpZiAoc3RhcnRJbmRleCA9PSBzcGFuLnNpZGUoZm9yd2FyZCwgZGlyKSkge1xuICAgICAgICBzcGFuID0gb3JkZXJbc3BhbkkgKz0gZm9yd2FyZCA/IDEgOiAtMV07XG4gICAgICAgIHN0YXJ0SW5kZXggPSBzcGFuLnNpZGUoIWZvcndhcmQsIGRpcik7XG4gICAgfVxuICAgIGxldCBpbmRleEZvcndhcmQgPSBmb3J3YXJkID09IChzcGFuLmRpciA9PSBkaXIpO1xuICAgIGxldCBuZXh0SW5kZXggPSBmaW5kQ2x1c3RlckJyZWFrKGxpbmUudGV4dCwgc3RhcnRJbmRleCwgaW5kZXhGb3J3YXJkKTtcbiAgICBtb3ZlZE92ZXIgPSBsaW5lLnRleHQuc2xpY2UoTWF0aC5taW4oc3RhcnRJbmRleCwgbmV4dEluZGV4KSwgTWF0aC5tYXgoc3RhcnRJbmRleCwgbmV4dEluZGV4KSk7XG4gICAgaWYgKG5leHRJbmRleCAhPSBzcGFuLnNpZGUoZm9yd2FyZCwgZGlyKSlcbiAgICAgICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5jdXJzb3IobmV4dEluZGV4ICsgbGluZS5mcm9tLCBpbmRleEZvcndhcmQgPyAtMSA6IDEsIHNwYW4ubGV2ZWwpO1xuICAgIGxldCBuZXh0U3BhbiA9IHNwYW5JID09IChmb3J3YXJkID8gb3JkZXIubGVuZ3RoIC0gMSA6IDApID8gbnVsbCA6IG9yZGVyW3NwYW5JICsgKGZvcndhcmQgPyAxIDogLTEpXTtcbiAgICBpZiAoIW5leHRTcGFuICYmIHNwYW4ubGV2ZWwgIT0gZGlyKVxuICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihmb3J3YXJkID8gbGluZS50byA6IGxpbmUuZnJvbSwgZm9yd2FyZCA/IC0xIDogMSwgZGlyKTtcbiAgICBpZiAobmV4dFNwYW4gJiYgbmV4dFNwYW4ubGV2ZWwgPCBzcGFuLmxldmVsKVxuICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihuZXh0U3Bhbi5zaWRlKCFmb3J3YXJkLCBkaXIpICsgbGluZS5mcm9tLCBmb3J3YXJkID8gMSA6IC0xLCBuZXh0U3Bhbi5sZXZlbCk7XG4gICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5jdXJzb3IobmV4dEluZGV4ICsgbGluZS5mcm9tLCBmb3J3YXJkID8gLTEgOiAxLCBzcGFuLmxldmVsKTtcbn1cblxuY29uc3QgTGluZUJyZWFrUGxhY2Vob2xkZXIgPSBcIlxcdWZmZmZcIjtcbmNsYXNzIERPTVJlYWRlciB7XG4gICAgY29uc3RydWN0b3IocG9pbnRzLCBzdGF0ZSkge1xuICAgICAgICB0aGlzLnBvaW50cyA9IHBvaW50cztcbiAgICAgICAgdGhpcy50ZXh0ID0gXCJcIjtcbiAgICAgICAgdGhpcy5saW5lU2VwYXJhdG9yID0gc3RhdGUuZmFjZXQoRWRpdG9yU3RhdGUubGluZVNlcGFyYXRvcik7XG4gICAgfVxuICAgIGFwcGVuZCh0ZXh0KSB7XG4gICAgICAgIHRoaXMudGV4dCArPSB0ZXh0O1xuICAgIH1cbiAgICBsaW5lQnJlYWsoKSB7XG4gICAgICAgIHRoaXMudGV4dCArPSBMaW5lQnJlYWtQbGFjZWhvbGRlcjtcbiAgICB9XG4gICAgcmVhZFJhbmdlKHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgaWYgKCFzdGFydClcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICBsZXQgcGFyZW50ID0gc3RhcnQucGFyZW50Tm9kZTtcbiAgICAgICAgZm9yIChsZXQgY3VyID0gc3RhcnQ7Oykge1xuICAgICAgICAgICAgdGhpcy5maW5kUG9pbnRCZWZvcmUocGFyZW50LCBjdXIpO1xuICAgICAgICAgICAgdGhpcy5yZWFkTm9kZShjdXIpO1xuICAgICAgICAgICAgbGV0IG5leHQgPSBjdXIubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICBpZiAobmV4dCA9PSBlbmQpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBsZXQgdmlldyA9IENvbnRlbnRWaWV3LmdldChjdXIpLCBuZXh0VmlldyA9IENvbnRlbnRWaWV3LmdldChuZXh0KTtcbiAgICAgICAgICAgIGlmICh2aWV3ICYmIG5leHRWaWV3ID8gdmlldy5icmVha0FmdGVyIDpcbiAgICAgICAgICAgICAgICAodmlldyA/IHZpZXcuYnJlYWtBZnRlciA6IGlzQmxvY2tFbGVtZW50KGN1cikpIHx8XG4gICAgICAgICAgICAgICAgICAgIChpc0Jsb2NrRWxlbWVudChuZXh0KSAmJiAoY3VyLm5vZGVOYW1lICE9IFwiQlJcIiB8fCBjdXIuY21JZ25vcmUpKSlcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmVCcmVhaygpO1xuICAgICAgICAgICAgY3VyID0gbmV4dDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZpbmRQb2ludEJlZm9yZShwYXJlbnQsIGVuZCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZWFkVGV4dE5vZGUobm9kZSkge1xuICAgICAgICBsZXQgdGV4dCA9IG5vZGUubm9kZVZhbHVlO1xuICAgICAgICBmb3IgKGxldCBwb2ludCBvZiB0aGlzLnBvaW50cylcbiAgICAgICAgICAgIGlmIChwb2ludC5ub2RlID09IG5vZGUpXG4gICAgICAgICAgICAgICAgcG9pbnQucG9zID0gdGhpcy50ZXh0Lmxlbmd0aCArIE1hdGgubWluKHBvaW50Lm9mZnNldCwgdGV4dC5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBvZmYgPSAwLCByZSA9IHRoaXMubGluZVNlcGFyYXRvciA/IG51bGwgOiAvXFxyXFxuP3xcXG4vZzs7KSB7XG4gICAgICAgICAgICBsZXQgbmV4dEJyZWFrID0gLTEsIGJyZWFrU2l6ZSA9IDEsIG07XG4gICAgICAgICAgICBpZiAodGhpcy5saW5lU2VwYXJhdG9yKSB7XG4gICAgICAgICAgICAgICAgbmV4dEJyZWFrID0gdGV4dC5pbmRleE9mKHRoaXMubGluZVNlcGFyYXRvciwgb2ZmKTtcbiAgICAgICAgICAgICAgICBicmVha1NpemUgPSB0aGlzLmxpbmVTZXBhcmF0b3IubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobSA9IHJlLmV4ZWModGV4dCkpIHtcbiAgICAgICAgICAgICAgICBuZXh0QnJlYWsgPSBtLmluZGV4O1xuICAgICAgICAgICAgICAgIGJyZWFrU2l6ZSA9IG1bMF0ubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hcHBlbmQodGV4dC5zbGljZShvZmYsIG5leHRCcmVhayA8IDAgPyB0ZXh0Lmxlbmd0aCA6IG5leHRCcmVhaykpO1xuICAgICAgICAgICAgaWYgKG5leHRCcmVhayA8IDApXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB0aGlzLmxpbmVCcmVhaygpO1xuICAgICAgICAgICAgaWYgKGJyZWFrU2l6ZSA+IDEpXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgcG9pbnQgb2YgdGhpcy5wb2ludHMpXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb2ludC5ub2RlID09IG5vZGUgJiYgcG9pbnQucG9zID4gdGhpcy50ZXh0Lmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50LnBvcyAtPSBicmVha1NpemUgLSAxO1xuICAgICAgICAgICAgb2ZmID0gbmV4dEJyZWFrICsgYnJlYWtTaXplO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlYWROb2RlKG5vZGUpIHtcbiAgICAgICAgaWYgKG5vZGUuY21JZ25vcmUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCB2aWV3ID0gQ29udGVudFZpZXcuZ2V0KG5vZGUpO1xuICAgICAgICBsZXQgZnJvbVZpZXcgPSB2aWV3ICYmIHZpZXcub3ZlcnJpZGVET01UZXh0O1xuICAgICAgICBpZiAoZnJvbVZpZXcgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5maW5kUG9pbnRJbnNpZGUobm9kZSwgZnJvbVZpZXcubGVuZ3RoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBmcm9tVmlldy5pdGVyKCk7ICFpLm5leHQoKS5kb25lOykge1xuICAgICAgICAgICAgICAgIGlmIChpLmxpbmVCcmVhaylcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5lQnJlYWsoKTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kKGkudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT0gMykge1xuICAgICAgICAgICAgdGhpcy5yZWFkVGV4dE5vZGUobm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobm9kZS5ub2RlTmFtZSA9PSBcIkJSXCIpIHtcbiAgICAgICAgICAgIGlmIChub2RlLm5leHRTaWJsaW5nKVxuICAgICAgICAgICAgICAgIHRoaXMubGluZUJyZWFrKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobm9kZS5ub2RlVHlwZSA9PSAxKSB7XG4gICAgICAgICAgICB0aGlzLnJlYWRSYW5nZShub2RlLmZpcnN0Q2hpbGQsIG51bGwpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZpbmRQb2ludEJlZm9yZShub2RlLCBuZXh0KSB7XG4gICAgICAgIGZvciAobGV0IHBvaW50IG9mIHRoaXMucG9pbnRzKVxuICAgICAgICAgICAgaWYgKHBvaW50Lm5vZGUgPT0gbm9kZSAmJiBub2RlLmNoaWxkTm9kZXNbcG9pbnQub2Zmc2V0XSA9PSBuZXh0KVxuICAgICAgICAgICAgICAgIHBvaW50LnBvcyA9IHRoaXMudGV4dC5sZW5ndGg7XG4gICAgfVxuICAgIGZpbmRQb2ludEluc2lkZShub2RlLCBtYXhMZW4pIHtcbiAgICAgICAgZm9yIChsZXQgcG9pbnQgb2YgdGhpcy5wb2ludHMpXG4gICAgICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAzID8gcG9pbnQubm9kZSA9PSBub2RlIDogbm9kZS5jb250YWlucyhwb2ludC5ub2RlKSlcbiAgICAgICAgICAgICAgICBwb2ludC5wb3MgPSB0aGlzLnRleHQubGVuZ3RoICsgTWF0aC5taW4obWF4TGVuLCBwb2ludC5vZmZzZXQpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGlzQmxvY2tFbGVtZW50KG5vZGUpIHtcbiAgICByZXR1cm4gbm9kZS5ub2RlVHlwZSA9PSAxICYmIC9eKERJVnxQfExJfFVMfE9MfEJMT0NLUVVPVEV8RER8RFR8SFxcZHxTRUNUSU9OfFBSRSkkLy50ZXN0KG5vZGUubm9kZU5hbWUpO1xufVxuY2xhc3MgRE9NUG9pbnQge1xuICAgIGNvbnN0cnVjdG9yKG5vZGUsIG9mZnNldCkge1xuICAgICAgICB0aGlzLm5vZGUgPSBub2RlO1xuICAgICAgICB0aGlzLm9mZnNldCA9IG9mZnNldDtcbiAgICAgICAgdGhpcy5wb3MgPSAtMTtcbiAgICB9XG59XG5cbmNsYXNzIERvY1ZpZXcgZXh0ZW5kcyBDb250ZW50VmlldyB7XG4gICAgY29uc3RydWN0b3Iodmlldykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgICAgICB0aGlzLmNvbXBvc2l0aW9uRGVjbyA9IERlY29yYXRpb24ubm9uZTtcbiAgICAgICAgdGhpcy5kZWNvcmF0aW9ucyA9IFtdO1xuICAgICAgICB0aGlzLmR5bmFtaWNEZWNvcmF0aW9uTWFwID0gW107XG4gICAgICAgIC8vIFRyYWNrIGEgbWluaW11bSB3aWR0aCBmb3IgdGhlIGVkaXRvci4gV2hlbiBtZWFzdXJpbmcgc2l6ZXMgaW5cbiAgICAgICAgLy8gbWVhc3VyZVZpc2libGVMaW5lSGVpZ2h0cywgdGhpcyBpcyB1cGRhdGVkIHRvIHBvaW50IGF0IHRoZSB3aWR0aFxuICAgICAgICAvLyBvZiBhIGdpdmVuIGVsZW1lbnQgYW5kIGl0cyBleHRlbnQgaW4gdGhlIGRvY3VtZW50LiBXaGVuIGEgY2hhbmdlXG4gICAgICAgIC8vIGhhcHBlbnMgaW4gdGhhdCByYW5nZSwgdGhlc2UgYXJlIHJlc2V0LiBUaGF0IHdheSwgb25jZSB3ZSd2ZSBzZWVuXG4gICAgICAgIC8vIGEgbGluZS9lbGVtZW50IG9mIGEgZ2l2ZW4gbGVuZ3RoLCB3ZSBrZWVwIHRoZSBlZGl0b3Igd2lkZSBlbm91Z2hcbiAgICAgICAgLy8gdG8gZml0IGF0IGxlYXN0IHRoYXQgZWxlbWVudCwgdW50aWwgaXQgaXMgY2hhbmdlZCwgYXQgd2hpY2ggcG9pbnRcbiAgICAgICAgLy8gd2UgZm9yZ2V0IGl0IGFnYWluLlxuICAgICAgICB0aGlzLm1pbldpZHRoID0gMDtcbiAgICAgICAgdGhpcy5taW5XaWR0aEZyb20gPSAwO1xuICAgICAgICB0aGlzLm1pbldpZHRoVG8gPSAwO1xuICAgICAgICAvLyBUcmFjayB3aGV0aGVyIHRoZSBET00gc2VsZWN0aW9uIHdhcyBzZXQgaW4gYSBsb3NzeSB3YXksIHNvIHRoYXRcbiAgICAgICAgLy8gd2UgZG9uJ3QgbWVzcyBpdCB1cCB3aGVuIHJlYWRpbmcgaXQgYmFjayBpdFxuICAgICAgICB0aGlzLmltcHJlY2lzZUFuY2hvciA9IG51bGw7XG4gICAgICAgIHRoaXMuaW1wcmVjaXNlSGVhZCA9IG51bGw7XG4gICAgICAgIHRoaXMuZm9yY2VTZWxlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgLy8gVXNlZCBieSB0aGUgcmVzaXplIG9ic2VydmVyIHRvIGlnbm9yZSByZXNpemVzIHRoYXQgd2UgY2F1c2VkXG4gICAgICAgIC8vIG91cnNlbHZlc1xuICAgICAgICB0aGlzLmxhc3RVcGRhdGUgPSBEYXRlLm5vdygpO1xuICAgICAgICB0aGlzLnNldERPTSh2aWV3LmNvbnRlbnRET00pO1xuICAgICAgICB0aGlzLmNoaWxkcmVuID0gW25ldyBMaW5lVmlld107XG4gICAgICAgIHRoaXMuY2hpbGRyZW5bMF0uc2V0UGFyZW50KHRoaXMpO1xuICAgICAgICB0aGlzLnVwZGF0ZURlY28oKTtcbiAgICAgICAgdGhpcy51cGRhdGVJbm5lcihbbmV3IENoYW5nZWRSYW5nZSgwLCAwLCAwLCB2aWV3LnN0YXRlLmRvYy5sZW5ndGgpXSwgMCk7XG4gICAgfVxuICAgIGdldCBlZGl0b3JWaWV3KCkgeyByZXR1cm4gdGhpcy52aWV3OyB9XG4gICAgZ2V0IGxlbmd0aCgpIHsgcmV0dXJuIHRoaXMudmlldy5zdGF0ZS5kb2MubGVuZ3RoOyB9XG4gICAgLy8gVXBkYXRlIHRoZSBkb2N1bWVudCB2aWV3IHRvIGEgZ2l2ZW4gc3RhdGUuIHNjcm9sbEludG9WaWV3IGNhbiBiZVxuICAgIC8vIHVzZWQgYXMgYSBoaW50IHRvIGNvbXB1dGUgYSBuZXcgdmlld3BvcnQgdGhhdCBpbmNsdWRlcyB0aGF0XG4gICAgLy8gcG9zaXRpb24sIGlmIHdlIGtub3cgdGhlIGVkaXRvciBpcyBnb2luZyB0byBzY3JvbGwgdGhhdCBwb3NpdGlvblxuICAgIC8vIGludG8gdmlldy5cbiAgICB1cGRhdGUodXBkYXRlKSB7XG4gICAgICAgIGxldCBjaGFuZ2VkUmFuZ2VzID0gdXBkYXRlLmNoYW5nZWRSYW5nZXM7XG4gICAgICAgIGlmICh0aGlzLm1pbldpZHRoID4gMCAmJiBjaGFuZ2VkUmFuZ2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKCFjaGFuZ2VkUmFuZ2VzLmV2ZXJ5KCh7IGZyb21BLCB0b0EgfSkgPT4gdG9BIDwgdGhpcy5taW5XaWR0aEZyb20gfHwgZnJvbUEgPiB0aGlzLm1pbldpZHRoVG8pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5taW5XaWR0aCA9IHRoaXMubWluV2lkdGhGcm9tID0gdGhpcy5taW5XaWR0aFRvID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubWluV2lkdGhGcm9tID0gdXBkYXRlLmNoYW5nZXMubWFwUG9zKHRoaXMubWluV2lkdGhGcm9tLCAxKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1pbldpZHRoVG8gPSB1cGRhdGUuY2hhbmdlcy5tYXBQb3ModGhpcy5taW5XaWR0aFRvLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy52aWV3LmlucHV0U3RhdGUuY29tcG9zaW5nIDwgMClcbiAgICAgICAgICAgIHRoaXMuY29tcG9zaXRpb25EZWNvID0gRGVjb3JhdGlvbi5ub25lO1xuICAgICAgICBlbHNlIGlmICh1cGRhdGUudHJhbnNhY3Rpb25zLmxlbmd0aCB8fCB0aGlzLmRpcnR5KVxuICAgICAgICAgICAgdGhpcy5jb21wb3NpdGlvbkRlY28gPSBjb21wdXRlQ29tcG9zaXRpb25EZWNvKHRoaXMudmlldywgdXBkYXRlLmNoYW5nZXMpO1xuICAgICAgICAvLyBXaGVuIHRoZSBET00gbm9kZXMgYXJvdW5kIHRoZSBzZWxlY3Rpb24gYXJlIG1vdmVkIHRvIGFub3RoZXJcbiAgICAgICAgLy8gcGFyZW50LCBDaHJvbWUgc29tZXRpbWVzIHJlcG9ydHMgYSBkaWZmZXJlbnQgc2VsZWN0aW9uIHRocm91Z2hcbiAgICAgICAgLy8gZ2V0U2VsZWN0aW9uIHRoYW4gdGhlIG9uZSB0aGF0IGl0IGFjdHVhbGx5IHNob3dzIHRvIHRoZSB1c2VyLlxuICAgICAgICAvLyBUaGlzIGZvcmNlcyBhIHNlbGVjdGlvbiB1cGRhdGUgd2hlbiBsaW5lcyBhcmUgam9pbmVkIHRvIHdvcmtcbiAgICAgICAgLy8gYXJvdW5kIHRoYXQuIElzc3VlICM1NFxuICAgICAgICBpZiAoKGJyb3dzZXIuaWUgfHwgYnJvd3Nlci5jaHJvbWUpICYmICF0aGlzLmNvbXBvc2l0aW9uRGVjby5zaXplICYmIHVwZGF0ZSAmJlxuICAgICAgICAgICAgdXBkYXRlLnN0YXRlLmRvYy5saW5lcyAhPSB1cGRhdGUuc3RhcnRTdGF0ZS5kb2MubGluZXMpXG4gICAgICAgICAgICB0aGlzLmZvcmNlU2VsZWN0aW9uID0gdHJ1ZTtcbiAgICAgICAgbGV0IHByZXZEZWNvID0gdGhpcy5kZWNvcmF0aW9ucywgZGVjbyA9IHRoaXMudXBkYXRlRGVjbygpO1xuICAgICAgICBsZXQgZGVjb0RpZmYgPSBmaW5kQ2hhbmdlZERlY28ocHJldkRlY28sIGRlY28sIHVwZGF0ZS5jaGFuZ2VzKTtcbiAgICAgICAgY2hhbmdlZFJhbmdlcyA9IENoYW5nZWRSYW5nZS5leHRlbmRXaXRoUmFuZ2VzKGNoYW5nZWRSYW5nZXMsIGRlY29EaWZmKTtcbiAgICAgICAgaWYgKHRoaXMuZGlydHkgPT0gMCAvKiBEaXJ0eS5Ob3QgKi8gJiYgY2hhbmdlZFJhbmdlcy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVJbm5lcihjaGFuZ2VkUmFuZ2VzLCB1cGRhdGUuc3RhcnRTdGF0ZS5kb2MubGVuZ3RoKTtcbiAgICAgICAgICAgIGlmICh1cGRhdGUudHJhbnNhY3Rpb25zLmxlbmd0aClcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RVcGRhdGUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gVXNlZCBieSB1cGRhdGUgYW5kIHRoZSBjb25zdHJ1Y3RvciBkbyBwZXJmb3JtIHRoZSBhY3R1YWwgRE9NXG4gICAgLy8gdXBkYXRlXG4gICAgdXBkYXRlSW5uZXIoY2hhbmdlcywgb2xkTGVuZ3RoKSB7XG4gICAgICAgIHRoaXMudmlldy52aWV3U3RhdGUubXVzdE1lYXN1cmVDb250ZW50ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy51cGRhdGVDaGlsZHJlbihjaGFuZ2VzLCBvbGRMZW5ndGgpO1xuICAgICAgICBsZXQgeyBvYnNlcnZlciB9ID0gdGhpcy52aWV3O1xuICAgICAgICBvYnNlcnZlci5pZ25vcmUoKCkgPT4ge1xuICAgICAgICAgICAgLy8gTG9jayB0aGUgaGVpZ2h0IGR1cmluZyByZWRyYXdpbmcsIHNpbmNlIENocm9tZSBzb21ldGltZXNcbiAgICAgICAgICAgIC8vIG1lc3NlcyB3aXRoIHRoZSBzY3JvbGwgcG9zaXRpb24gZHVyaW5nIERPTSBtdXRhdGlvbiAodGhvdWdoXG4gICAgICAgICAgICAvLyBubyByZWxheW91dCBpcyB0cmlnZ2VyZWQgYW5kIEkgY2Fubm90IGltYWdpbmUgaG93IGl0IGNhblxuICAgICAgICAgICAgLy8gcmVjb21wdXRlIHRoZSBzY3JvbGwgcG9zaXRpb24gd2l0aG91dCBhIGxheW91dClcbiAgICAgICAgICAgIHRoaXMuZG9tLnN0eWxlLmhlaWdodCA9IHRoaXMudmlldy52aWV3U3RhdGUuY29udGVudEhlaWdodCArIFwicHhcIjtcbiAgICAgICAgICAgIHRoaXMuZG9tLnN0eWxlLmZsZXhCYXNpcyA9IHRoaXMubWluV2lkdGggPyB0aGlzLm1pbldpZHRoICsgXCJweFwiIDogXCJcIjtcbiAgICAgICAgICAgIC8vIENocm9tZSB3aWxsIHNvbWV0aW1lcywgd2hlbiBET00gbXV0YXRpb25zIG9jY3VyIGRpcmVjdGx5XG4gICAgICAgICAgICAvLyBhcm91bmQgdGhlIHNlbGVjdGlvbiwgZ2V0IGNvbmZ1c2VkIGFuZCByZXBvcnQgYSBkaWZmZXJlbnRcbiAgICAgICAgICAgIC8vIHNlbGVjdGlvbiBmcm9tIHRoZSBvbmUgaXQgZGlzcGxheXMgKGlzc3VlICMyMTgpLiBUaGlzIHRyaWVzXG4gICAgICAgICAgICAvLyB0byBkZXRlY3QgdGhhdCBzaXR1YXRpb24uXG4gICAgICAgICAgICBsZXQgdHJhY2sgPSBicm93c2VyLmNocm9tZSB8fCBicm93c2VyLmlvcyA/IHsgbm9kZTogb2JzZXJ2ZXIuc2VsZWN0aW9uUmFuZ2UuZm9jdXNOb2RlLCB3cml0dGVuOiBmYWxzZSB9IDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5zeW5jKHRyYWNrKTtcbiAgICAgICAgICAgIHRoaXMuZGlydHkgPSAwIC8qIERpcnR5Lk5vdCAqLztcbiAgICAgICAgICAgIGlmICh0cmFjayAmJiAodHJhY2sud3JpdHRlbiB8fCBvYnNlcnZlci5zZWxlY3Rpb25SYW5nZS5mb2N1c05vZGUgIT0gdHJhY2subm9kZSkpXG4gICAgICAgICAgICAgICAgdGhpcy5mb3JjZVNlbGVjdGlvbiA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmRvbS5zdHlsZS5oZWlnaHQgPSBcIlwiO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IGdhcHMgPSBbXTtcbiAgICAgICAgaWYgKHRoaXMudmlldy52aWV3cG9ydC5mcm9tIHx8IHRoaXMudmlldy52aWV3cG9ydC50byA8IHRoaXMudmlldy5zdGF0ZS5kb2MubGVuZ3RoKVxuICAgICAgICAgICAgZm9yIChsZXQgY2hpbGQgb2YgdGhpcy5jaGlsZHJlbilcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGQgaW5zdGFuY2VvZiBCbG9ja1dpZGdldFZpZXcgJiYgY2hpbGQud2lkZ2V0IGluc3RhbmNlb2YgQmxvY2tHYXBXaWRnZXQpXG4gICAgICAgICAgICAgICAgICAgIGdhcHMucHVzaChjaGlsZC5kb20pO1xuICAgICAgICBvYnNlcnZlci51cGRhdGVHYXBzKGdhcHMpO1xuICAgIH1cbiAgICB1cGRhdGVDaGlsZHJlbihjaGFuZ2VzLCBvbGRMZW5ndGgpIHtcbiAgICAgICAgbGV0IGN1cnNvciA9IHRoaXMuY2hpbGRDdXJzb3Iob2xkTGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IGNoYW5nZXMubGVuZ3RoIC0gMTs7IGktLSkge1xuICAgICAgICAgICAgbGV0IG5leHQgPSBpID49IDAgPyBjaGFuZ2VzW2ldIDogbnVsbDtcbiAgICAgICAgICAgIGlmICghbmV4dClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGxldCB7IGZyb21BLCB0b0EsIGZyb21CLCB0b0IgfSA9IG5leHQ7XG4gICAgICAgICAgICBsZXQgeyBjb250ZW50LCBicmVha0F0U3RhcnQsIG9wZW5TdGFydCwgb3BlbkVuZCB9ID0gQ29udGVudEJ1aWxkZXIuYnVpbGQodGhpcy52aWV3LnN0YXRlLmRvYywgZnJvbUIsIHRvQiwgdGhpcy5kZWNvcmF0aW9ucywgdGhpcy5keW5hbWljRGVjb3JhdGlvbk1hcCk7XG4gICAgICAgICAgICBsZXQgeyBpOiB0b0ksIG9mZjogdG9PZmYgfSA9IGN1cnNvci5maW5kUG9zKHRvQSwgMSk7XG4gICAgICAgICAgICBsZXQgeyBpOiBmcm9tSSwgb2ZmOiBmcm9tT2ZmIH0gPSBjdXJzb3IuZmluZFBvcyhmcm9tQSwgLTEpO1xuICAgICAgICAgICAgcmVwbGFjZVJhbmdlKHRoaXMsIGZyb21JLCBmcm9tT2ZmLCB0b0ksIHRvT2ZmLCBjb250ZW50LCBicmVha0F0U3RhcnQsIG9wZW5TdGFydCwgb3BlbkVuZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gU3luYyB0aGUgRE9NIHNlbGVjdGlvbiB0byB0aGlzLnN0YXRlLnNlbGVjdGlvblxuICAgIHVwZGF0ZVNlbGVjdGlvbihtdXN0UmVhZCA9IGZhbHNlLCBmcm9tUG9pbnRlciA9IGZhbHNlKSB7XG4gICAgICAgIGlmIChtdXN0UmVhZCB8fCAhdGhpcy52aWV3Lm9ic2VydmVyLnNlbGVjdGlvblJhbmdlLmZvY3VzTm9kZSlcbiAgICAgICAgICAgIHRoaXMudmlldy5vYnNlcnZlci5yZWFkU2VsZWN0aW9uUmFuZ2UoKTtcbiAgICAgICAgaWYgKCEoZnJvbVBvaW50ZXIgfHwgdGhpcy5tYXlDb250cm9sU2VsZWN0aW9uKCkpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsZXQgZm9yY2UgPSB0aGlzLmZvcmNlU2VsZWN0aW9uO1xuICAgICAgICB0aGlzLmZvcmNlU2VsZWN0aW9uID0gZmFsc2U7XG4gICAgICAgIGxldCBtYWluID0gdGhpcy52aWV3LnN0YXRlLnNlbGVjdGlvbi5tYWluO1xuICAgICAgICAvLyBGSVhNRSBuZWVkIHRvIGhhbmRsZSB0aGUgY2FzZSB3aGVyZSB0aGUgc2VsZWN0aW9uIGZhbGxzIGluc2lkZSBhIGJsb2NrIHJhbmdlXG4gICAgICAgIGxldCBhbmNob3IgPSB0aGlzLmRvbUF0UG9zKG1haW4uYW5jaG9yKTtcbiAgICAgICAgbGV0IGhlYWQgPSBtYWluLmVtcHR5ID8gYW5jaG9yIDogdGhpcy5kb21BdFBvcyhtYWluLmhlYWQpO1xuICAgICAgICAvLyBBbHdheXMgcmVzZXQgb24gRmlyZWZveCB3aGVuIG5leHQgdG8gYW4gdW5lZGl0YWJsZSBub2RlIHRvXG4gICAgICAgIC8vIGF2b2lkIGludmlzaWJsZSBjdXJzb3IgYnVncyAoIzExMSlcbiAgICAgICAgaWYgKGJyb3dzZXIuZ2Vja28gJiYgbWFpbi5lbXB0eSAmJiBiZXR3ZWVuVW5lZGl0YWJsZShhbmNob3IpKSB7XG4gICAgICAgICAgICBsZXQgZHVtbXkgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlwiKTtcbiAgICAgICAgICAgIHRoaXMudmlldy5vYnNlcnZlci5pZ25vcmUoKCkgPT4gYW5jaG9yLm5vZGUuaW5zZXJ0QmVmb3JlKGR1bW15LCBhbmNob3Iubm9kZS5jaGlsZE5vZGVzW2FuY2hvci5vZmZzZXRdIHx8IG51bGwpKTtcbiAgICAgICAgICAgIGFuY2hvciA9IGhlYWQgPSBuZXcgRE9NUG9zKGR1bW15LCAwKTtcbiAgICAgICAgICAgIGZvcmNlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZG9tU2VsID0gdGhpcy52aWV3Lm9ic2VydmVyLnNlbGVjdGlvblJhbmdlO1xuICAgICAgICAvLyBJZiB0aGUgc2VsZWN0aW9uIGlzIGFscmVhZHkgaGVyZSwgb3IgaW4gYW4gZXF1aXZhbGVudCBwb3NpdGlvbiwgZG9uJ3QgdG91Y2ggaXRcbiAgICAgICAgaWYgKGZvcmNlIHx8ICFkb21TZWwuZm9jdXNOb2RlIHx8XG4gICAgICAgICAgICAhaXNFcXVpdmFsZW50UG9zaXRpb24oYW5jaG9yLm5vZGUsIGFuY2hvci5vZmZzZXQsIGRvbVNlbC5hbmNob3JOb2RlLCBkb21TZWwuYW5jaG9yT2Zmc2V0KSB8fFxuICAgICAgICAgICAgIWlzRXF1aXZhbGVudFBvc2l0aW9uKGhlYWQubm9kZSwgaGVhZC5vZmZzZXQsIGRvbVNlbC5mb2N1c05vZGUsIGRvbVNlbC5mb2N1c09mZnNldCkpIHtcbiAgICAgICAgICAgIHRoaXMudmlldy5vYnNlcnZlci5pZ25vcmUoKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIENocm9tZSBBbmRyb2lkIHdpbGwgaGlkZSB0aGUgdmlydHVhbCBrZXlib2FyZCB3aGVuIHRhcHBpbmdcbiAgICAgICAgICAgICAgICAvLyBpbnNpZGUgYW4gdW5lZGl0YWJsZSBub2RlLCBhbmQgbm90IGJyaW5nIGl0IGJhY2sgd2hlbiB3ZVxuICAgICAgICAgICAgICAgIC8vIG1vdmUgdGhlIGN1cnNvciB0byBpdHMgcHJvcGVyIHBvc2l0aW9uLiBUaGlzIHRyaWVzIHRvXG4gICAgICAgICAgICAgICAgLy8gcmVzdG9yZSB0aGUga2V5Ym9hcmQgYnkgY3ljbGluZyBmb2N1cy5cbiAgICAgICAgICAgICAgICBpZiAoYnJvd3Nlci5hbmRyb2lkICYmIGJyb3dzZXIuY2hyb21lICYmIHRoaXMuZG9tLmNvbnRhaW5zKGRvbVNlbC5mb2N1c05vZGUpICYmXG4gICAgICAgICAgICAgICAgICAgIGluVW5lZGl0YWJsZShkb21TZWwuZm9jdXNOb2RlLCB0aGlzLmRvbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kb20uYmx1cigpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRvbS5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCByYXdTZWwgPSBnZXRTZWxlY3Rpb24odGhpcy52aWV3LnJvb3QpO1xuICAgICAgICAgICAgICAgIGlmICghcmF3U2VsKSA7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobWFpbi5lbXB0eSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBXb3JrIGFyb3VuZCBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xNjEyMDc2XG4gICAgICAgICAgICAgICAgICAgIGlmIChicm93c2VyLmdlY2tvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV4dFRvID0gbmV4dFRvVW5lZGl0YWJsZShhbmNob3Iubm9kZSwgYW5jaG9yLm9mZnNldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV4dFRvICYmIG5leHRUbyAhPSAoMSAvKiBOZXh0VG8uQmVmb3JlICovIHwgMiAvKiBOZXh0VG8uQWZ0ZXIgKi8pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRleHQgPSBuZWFyYnlUZXh0Tm9kZShhbmNob3Iubm9kZSwgYW5jaG9yLm9mZnNldCwgbmV4dFRvID09IDEgLyogTmV4dFRvLkJlZm9yZSAqLyA/IDEgOiAtMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRleHQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuY2hvciA9IG5ldyBET01Qb3ModGV4dCwgbmV4dFRvID09IDEgLyogTmV4dFRvLkJlZm9yZSAqLyA/IDAgOiB0ZXh0Lm5vZGVWYWx1ZS5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJhd1NlbC5jb2xsYXBzZShhbmNob3Iubm9kZSwgYW5jaG9yLm9mZnNldCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYWluLmJpZGlMZXZlbCAhPSBudWxsICYmIGRvbVNlbC5jdXJzb3JCaWRpTGV2ZWwgIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvbVNlbC5jdXJzb3JCaWRpTGV2ZWwgPSBtYWluLmJpZGlMZXZlbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmF3U2VsLmV4dGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBTZWxlY3Rpb24uZXh0ZW5kIGNhbiBiZSB1c2VkIHRvIGNyZWF0ZSBhbiAnaW52ZXJ0ZWQnIHNlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAvLyAob25lIHdoZXJlIHRoZSBmb2N1cyBpcyBiZWZvcmUgdGhlIGFuY2hvciksIGJ1dCBub3QgYWxsXG4gICAgICAgICAgICAgICAgICAgIC8vIGJyb3dzZXJzIHN1cHBvcnQgaXQgeWV0LlxuICAgICAgICAgICAgICAgICAgICByYXdTZWwuY29sbGFwc2UoYW5jaG9yLm5vZGUsIGFuY2hvci5vZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICAvLyBTYWZhcmkgd2lsbCBpZ25vcmUgdGhlIGNhbGwgYWJvdmUgd2hlbiB0aGUgZWRpdG9yIGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIGhpZGRlbiwgYW5kIHRoZW4gcmFpc2UgYW4gZXJyb3Igb24gdGhlIGNhbGwgdG8gZXh0ZW5kXG4gICAgICAgICAgICAgICAgICAgIC8vICgjOTQwKS5cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhd1NlbC5leHRlbmQoaGVhZC5ub2RlLCBoZWFkLm9mZnNldCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKF8pIHsgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUHJpbWl0aXZlIChJRSkgd2F5XG4gICAgICAgICAgICAgICAgICAgIGxldCByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYWluLmFuY2hvciA+IG1haW4uaGVhZClcbiAgICAgICAgICAgICAgICAgICAgICAgIFthbmNob3IsIGhlYWRdID0gW2hlYWQsIGFuY2hvcl07XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlLnNldEVuZChoZWFkLm5vZGUsIGhlYWQub2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2Uuc2V0U3RhcnQoYW5jaG9yLm5vZGUsIGFuY2hvci5vZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICByYXdTZWwucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICAgICAgICAgICAgICAgIHJhd1NlbC5hZGRSYW5nZShyYW5nZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnZpZXcub2JzZXJ2ZXIuc2V0U2VsZWN0aW9uUmFuZ2UoYW5jaG9yLCBoZWFkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmltcHJlY2lzZUFuY2hvciA9IGFuY2hvci5wcmVjaXNlID8gbnVsbCA6IG5ldyBET01Qb3MoZG9tU2VsLmFuY2hvck5vZGUsIGRvbVNlbC5hbmNob3JPZmZzZXQpO1xuICAgICAgICB0aGlzLmltcHJlY2lzZUhlYWQgPSBoZWFkLnByZWNpc2UgPyBudWxsIDogbmV3IERPTVBvcyhkb21TZWwuZm9jdXNOb2RlLCBkb21TZWwuZm9jdXNPZmZzZXQpO1xuICAgIH1cbiAgICBlbmZvcmNlQ3Vyc29yQXNzb2MoKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbXBvc2l0aW9uRGVjby5zaXplKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsZXQgeyB2aWV3IH0gPSB0aGlzLCBjdXJzb3IgPSB2aWV3LnN0YXRlLnNlbGVjdGlvbi5tYWluO1xuICAgICAgICBsZXQgc2VsID0gZ2V0U2VsZWN0aW9uKHZpZXcucm9vdCk7XG4gICAgICAgIGxldCB7IGFuY2hvck5vZGUsIGFuY2hvck9mZnNldCB9ID0gdmlldy5vYnNlcnZlci5zZWxlY3Rpb25SYW5nZTtcbiAgICAgICAgaWYgKCFzZWwgfHwgIWN1cnNvci5lbXB0eSB8fCAhY3Vyc29yLmFzc29jIHx8ICFzZWwubW9kaWZ5KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsZXQgbGluZSA9IExpbmVWaWV3LmZpbmQodGhpcywgY3Vyc29yLmhlYWQpO1xuICAgICAgICBpZiAoIWxpbmUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCBsaW5lU3RhcnQgPSBsaW5lLnBvc0F0U3RhcnQ7XG4gICAgICAgIGlmIChjdXJzb3IuaGVhZCA9PSBsaW5lU3RhcnQgfHwgY3Vyc29yLmhlYWQgPT0gbGluZVN0YXJ0ICsgbGluZS5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCBiZWZvcmUgPSB0aGlzLmNvb3Jkc0F0KGN1cnNvci5oZWFkLCAtMSksIGFmdGVyID0gdGhpcy5jb29yZHNBdChjdXJzb3IuaGVhZCwgMSk7XG4gICAgICAgIGlmICghYmVmb3JlIHx8ICFhZnRlciB8fCBiZWZvcmUuYm90dG9tID4gYWZ0ZXIudG9wKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsZXQgZG9tID0gdGhpcy5kb21BdFBvcyhjdXJzb3IuaGVhZCArIGN1cnNvci5hc3NvYyk7XG4gICAgICAgIHNlbC5jb2xsYXBzZShkb20ubm9kZSwgZG9tLm9mZnNldCk7XG4gICAgICAgIHNlbC5tb2RpZnkoXCJtb3ZlXCIsIGN1cnNvci5hc3NvYyA8IDAgPyBcImZvcndhcmRcIiA6IFwiYmFja3dhcmRcIiwgXCJsaW5lYm91bmRhcnlcIik7XG4gICAgICAgIC8vIFRoaXMgY2FuIGdvIHdyb25nIGluIGNvcm5lciBjYXNlcyBsaWtlIHNpbmdsZS1jaGFyYWN0ZXIgbGluZXMsXG4gICAgICAgIC8vIHNvIGNoZWNrIGFuZCByZXNldCBpZiBuZWNlc3NhcnkuXG4gICAgICAgIHZpZXcub2JzZXJ2ZXIucmVhZFNlbGVjdGlvblJhbmdlKCk7XG4gICAgICAgIGxldCBuZXdSYW5nZSA9IHZpZXcub2JzZXJ2ZXIuc2VsZWN0aW9uUmFuZ2U7XG4gICAgICAgIGlmICh2aWV3LmRvY1ZpZXcucG9zRnJvbURPTShuZXdSYW5nZS5hbmNob3JOb2RlLCBuZXdSYW5nZS5hbmNob3JPZmZzZXQpICE9IGN1cnNvci5mcm9tKVxuICAgICAgICAgICAgc2VsLmNvbGxhcHNlKGFuY2hvck5vZGUsIGFuY2hvck9mZnNldCk7XG4gICAgfVxuICAgIG1heUNvbnRyb2xTZWxlY3Rpb24oKSB7XG4gICAgICAgIGxldCBhY3RpdmUgPSB0aGlzLnZpZXcucm9vdC5hY3RpdmVFbGVtZW50O1xuICAgICAgICByZXR1cm4gYWN0aXZlID09IHRoaXMuZG9tIHx8XG4gICAgICAgICAgICBoYXNTZWxlY3Rpb24odGhpcy5kb20sIHRoaXMudmlldy5vYnNlcnZlci5zZWxlY3Rpb25SYW5nZSkgJiYgIShhY3RpdmUgJiYgdGhpcy5kb20uY29udGFpbnMoYWN0aXZlKSk7XG4gICAgfVxuICAgIG5lYXJlc3QoZG9tKSB7XG4gICAgICAgIGZvciAobGV0IGN1ciA9IGRvbTsgY3VyOykge1xuICAgICAgICAgICAgbGV0IGRvbVZpZXcgPSBDb250ZW50Vmlldy5nZXQoY3VyKTtcbiAgICAgICAgICAgIGlmIChkb21WaWV3ICYmIGRvbVZpZXcucm9vdFZpZXcgPT0gdGhpcylcbiAgICAgICAgICAgICAgICByZXR1cm4gZG9tVmlldztcbiAgICAgICAgICAgIGN1ciA9IGN1ci5wYXJlbnROb2RlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBwb3NGcm9tRE9NKG5vZGUsIG9mZnNldCkge1xuICAgICAgICBsZXQgdmlldyA9IHRoaXMubmVhcmVzdChub2RlKTtcbiAgICAgICAgaWYgKCF2aWV3KVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJUcnlpbmcgdG8gZmluZCBwb3NpdGlvbiBmb3IgYSBET00gcG9zaXRpb24gb3V0c2lkZSBvZiB0aGUgZG9jdW1lbnRcIik7XG4gICAgICAgIHJldHVybiB2aWV3LmxvY2FsUG9zRnJvbURPTShub2RlLCBvZmZzZXQpICsgdmlldy5wb3NBdFN0YXJ0O1xuICAgIH1cbiAgICBkb21BdFBvcyhwb3MpIHtcbiAgICAgICAgbGV0IHsgaSwgb2ZmIH0gPSB0aGlzLmNoaWxkQ3Vyc29yKCkuZmluZFBvcyhwb3MsIC0xKTtcbiAgICAgICAgZm9yICg7IGkgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aCAtIDE7KSB7XG4gICAgICAgICAgICBsZXQgY2hpbGQgPSB0aGlzLmNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgaWYgKG9mZiA8IGNoaWxkLmxlbmd0aCB8fCBjaGlsZCBpbnN0YW5jZW9mIExpbmVWaWV3KVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgb2ZmID0gMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbltpXS5kb21BdFBvcyhvZmYpO1xuICAgIH1cbiAgICBjb29yZHNBdChwb3MsIHNpZGUpIHtcbiAgICAgICAgZm9yIChsZXQgb2ZmID0gdGhpcy5sZW5ndGgsIGkgPSB0aGlzLmNoaWxkcmVuLmxlbmd0aCAtIDE7OyBpLS0pIHtcbiAgICAgICAgICAgIGxldCBjaGlsZCA9IHRoaXMuY2hpbGRyZW5baV0sIHN0YXJ0ID0gb2ZmIC0gY2hpbGQuYnJlYWtBZnRlciAtIGNoaWxkLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChwb3MgPiBzdGFydCB8fFxuICAgICAgICAgICAgICAgIChwb3MgPT0gc3RhcnQgJiYgY2hpbGQudHlwZSAhPSBCbG9ja1R5cGUuV2lkZ2V0QmVmb3JlICYmIGNoaWxkLnR5cGUgIT0gQmxvY2tUeXBlLldpZGdldEFmdGVyICYmXG4gICAgICAgICAgICAgICAgICAgICghaSB8fCBzaWRlID09IDIgfHwgdGhpcy5jaGlsZHJlbltpIC0gMV0uYnJlYWtBZnRlciB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuY2hpbGRyZW5baSAtIDFdLnR5cGUgPT0gQmxvY2tUeXBlLldpZGdldEJlZm9yZSAmJiBzaWRlID4gLTIpKSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkLmNvb3Jkc0F0KHBvcyAtIHN0YXJ0LCBzaWRlKTtcbiAgICAgICAgICAgIG9mZiA9IHN0YXJ0O1xuICAgICAgICB9XG4gICAgfVxuICAgIG1lYXN1cmVWaXNpYmxlTGluZUhlaWdodHModmlld3BvcnQpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdLCB7IGZyb20sIHRvIH0gPSB2aWV3cG9ydDtcbiAgICAgICAgbGV0IGNvbnRlbnRXaWR0aCA9IHRoaXMudmlldy5jb250ZW50RE9NLmNsaWVudFdpZHRoO1xuICAgICAgICBsZXQgaXNXaWRlciA9IGNvbnRlbnRXaWR0aCA+IE1hdGgubWF4KHRoaXMudmlldy5zY3JvbGxET00uY2xpZW50V2lkdGgsIHRoaXMubWluV2lkdGgpICsgMTtcbiAgICAgICAgbGV0IHdpZGVzdCA9IC0xLCBsdHIgPSB0aGlzLnZpZXcudGV4dERpcmVjdGlvbiA9PSBEaXJlY3Rpb24uTFRSO1xuICAgICAgICBmb3IgKGxldCBwb3MgPSAwLCBpID0gMDsgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBjaGlsZCA9IHRoaXMuY2hpbGRyZW5baV0sIGVuZCA9IHBvcyArIGNoaWxkLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChlbmQgPiB0bylcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGlmIChwb3MgPj0gZnJvbSkge1xuICAgICAgICAgICAgICAgIGxldCBjaGlsZFJlY3QgPSBjaGlsZC5kb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goY2hpbGRSZWN0LmhlaWdodCk7XG4gICAgICAgICAgICAgICAgaWYgKGlzV2lkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxhc3QgPSBjaGlsZC5kb20ubGFzdENoaWxkO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcmVjdHMgPSBsYXN0ID8gY2xpZW50UmVjdHNGb3IobGFzdCkgOiBbXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlY3RzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlY3QgPSByZWN0c1tyZWN0cy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3aWR0aCA9IGx0ciA/IHJlY3QucmlnaHQgLSBjaGlsZFJlY3QubGVmdCA6IGNoaWxkUmVjdC5yaWdodCAtIHJlY3QubGVmdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3aWR0aCA+IHdpZGVzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGVzdCA9IHdpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWluV2lkdGggPSBjb250ZW50V2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5taW5XaWR0aEZyb20gPSBwb3M7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5taW5XaWR0aFRvID0gZW5kO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcG9zID0gZW5kICsgY2hpbGQuYnJlYWtBZnRlcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICB0ZXh0RGlyZWN0aW9uQXQocG9zKSB7XG4gICAgICAgIGxldCB7IGkgfSA9IHRoaXMuY2hpbGRQb3MocG9zLCAxKTtcbiAgICAgICAgcmV0dXJuIGdldENvbXB1dGVkU3R5bGUodGhpcy5jaGlsZHJlbltpXS5kb20pLmRpcmVjdGlvbiA9PSBcInJ0bFwiID8gRGlyZWN0aW9uLlJUTCA6IERpcmVjdGlvbi5MVFI7XG4gICAgfVxuICAgIG1lYXN1cmVUZXh0U2l6ZSgpIHtcbiAgICAgICAgZm9yIChsZXQgY2hpbGQgb2YgdGhpcy5jaGlsZHJlbikge1xuICAgICAgICAgICAgaWYgKGNoaWxkIGluc3RhbmNlb2YgTGluZVZpZXcpIHtcbiAgICAgICAgICAgICAgICBsZXQgbWVhc3VyZSA9IGNoaWxkLm1lYXN1cmVUZXh0U2l6ZSgpO1xuICAgICAgICAgICAgICAgIGlmIChtZWFzdXJlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVhc3VyZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBJZiBubyB3b3JrYWJsZSBsaW5lIGV4aXN0cywgZm9yY2UgYSBsYXlvdXQgb2YgYSBtZWFzdXJhYmxlIGVsZW1lbnRcbiAgICAgICAgbGV0IGR1bW15ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSwgbGluZUhlaWdodCwgY2hhcldpZHRoO1xuICAgICAgICBkdW1teS5jbGFzc05hbWUgPSBcImNtLWxpbmVcIjtcbiAgICAgICAgZHVtbXkuc3R5bGUud2lkdGggPSBcIjk5OTk5cHhcIjtcbiAgICAgICAgZHVtbXkudGV4dENvbnRlbnQgPSBcImFiYyBkZWYgZ2hpIGprbCBtbm8gcHFyIHN0dVwiO1xuICAgICAgICB0aGlzLnZpZXcub2JzZXJ2ZXIuaWdub3JlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZG9tLmFwcGVuZENoaWxkKGR1bW15KTtcbiAgICAgICAgICAgIGxldCByZWN0ID0gY2xpZW50UmVjdHNGb3IoZHVtbXkuZmlyc3RDaGlsZClbMF07XG4gICAgICAgICAgICBsaW5lSGVpZ2h0ID0gZHVtbXkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xuICAgICAgICAgICAgY2hhcldpZHRoID0gcmVjdCA/IHJlY3Qud2lkdGggLyAyNyA6IDc7XG4gICAgICAgICAgICBkdW1teS5yZW1vdmUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7IGxpbmVIZWlnaHQsIGNoYXJXaWR0aCB9O1xuICAgIH1cbiAgICBjaGlsZEN1cnNvcihwb3MgPSB0aGlzLmxlbmd0aCkge1xuICAgICAgICAvLyBNb3ZlIGJhY2sgdG8gc3RhcnQgb2YgbGFzdCBlbGVtZW50IHdoZW4gcG9zc2libGUsIHNvIHRoYXRcbiAgICAgICAgLy8gYENoaWxkQ3Vyc29yLmZpbmRQb3NgIGRvZXNuJ3QgaGF2ZSB0byBkZWFsIHdpdGggdGhlIGVkZ2UgY2FzZVxuICAgICAgICAvLyBvZiBiZWluZyBhZnRlciB0aGUgbGFzdCBlbGVtZW50LlxuICAgICAgICBsZXQgaSA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgICBpZiAoaSlcbiAgICAgICAgICAgIHBvcyAtPSB0aGlzLmNoaWxkcmVuWy0taV0ubGVuZ3RoO1xuICAgICAgICByZXR1cm4gbmV3IENoaWxkQ3Vyc29yKHRoaXMuY2hpbGRyZW4sIHBvcywgaSk7XG4gICAgfVxuICAgIGNvbXB1dGVCbG9ja0dhcERlY28oKSB7XG4gICAgICAgIGxldCBkZWNvID0gW10sIHZzID0gdGhpcy52aWV3LnZpZXdTdGF0ZTtcbiAgICAgICAgZm9yIChsZXQgcG9zID0gMCwgaSA9IDA7OyBpKyspIHtcbiAgICAgICAgICAgIGxldCBuZXh0ID0gaSA9PSB2cy52aWV3cG9ydHMubGVuZ3RoID8gbnVsbCA6IHZzLnZpZXdwb3J0c1tpXTtcbiAgICAgICAgICAgIGxldCBlbmQgPSBuZXh0ID8gbmV4dC5mcm9tIC0gMSA6IHRoaXMubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGVuZCA+IHBvcykge1xuICAgICAgICAgICAgICAgIGxldCBoZWlnaHQgPSB2cy5saW5lQmxvY2tBdChlbmQpLmJvdHRvbSAtIHZzLmxpbmVCbG9ja0F0KHBvcykudG9wO1xuICAgICAgICAgICAgICAgIGRlY28ucHVzaChEZWNvcmF0aW9uLnJlcGxhY2Uoe1xuICAgICAgICAgICAgICAgICAgICB3aWRnZXQ6IG5ldyBCbG9ja0dhcFdpZGdldChoZWlnaHQpLFxuICAgICAgICAgICAgICAgICAgICBibG9jazogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc0Jsb2NrR2FwOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pLnJhbmdlKHBvcywgZW5kKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIW5leHQpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBwb3MgPSBuZXh0LnRvICsgMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gRGVjb3JhdGlvbi5zZXQoZGVjbyk7XG4gICAgfVxuICAgIHVwZGF0ZURlY28oKSB7XG4gICAgICAgIGxldCBhbGxEZWNvID0gdGhpcy52aWV3LnN0YXRlLmZhY2V0KGRlY29yYXRpb25zKS5tYXAoKGQsIGkpID0+IHtcbiAgICAgICAgICAgIGxldCBkeW5hbWljID0gdGhpcy5keW5hbWljRGVjb3JhdGlvbk1hcFtpXSA9IHR5cGVvZiBkID09IFwiZnVuY3Rpb25cIjtcbiAgICAgICAgICAgIHJldHVybiBkeW5hbWljID8gZCh0aGlzLnZpZXcpIDogZDtcbiAgICAgICAgfSk7XG4gICAgICAgIGZvciAobGV0IGkgPSBhbGxEZWNvLmxlbmd0aDsgaSA8IGFsbERlY28ubGVuZ3RoICsgMzsgaSsrKVxuICAgICAgICAgICAgdGhpcy5keW5hbWljRGVjb3JhdGlvbk1hcFtpXSA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gdGhpcy5kZWNvcmF0aW9ucyA9IFtcbiAgICAgICAgICAgIC4uLmFsbERlY28sXG4gICAgICAgICAgICB0aGlzLmNvbXBvc2l0aW9uRGVjbyxcbiAgICAgICAgICAgIHRoaXMuY29tcHV0ZUJsb2NrR2FwRGVjbygpLFxuICAgICAgICAgICAgdGhpcy52aWV3LnZpZXdTdGF0ZS5saW5lR2FwRGVjb1xuICAgICAgICBdO1xuICAgIH1cbiAgICBzY3JvbGxJbnRvVmlldyh0YXJnZXQpIHtcbiAgICAgICAgbGV0IHsgcmFuZ2UgfSA9IHRhcmdldDtcbiAgICAgICAgbGV0IHJlY3QgPSB0aGlzLmNvb3Jkc0F0KHJhbmdlLmhlYWQsIHJhbmdlLmVtcHR5ID8gcmFuZ2UuYXNzb2MgOiByYW5nZS5oZWFkID4gcmFuZ2UuYW5jaG9yID8gLTEgOiAxKSwgb3RoZXI7XG4gICAgICAgIGlmICghcmVjdClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKCFyYW5nZS5lbXB0eSAmJiAob3RoZXIgPSB0aGlzLmNvb3Jkc0F0KHJhbmdlLmFuY2hvciwgcmFuZ2UuYW5jaG9yID4gcmFuZ2UuaGVhZCA/IC0xIDogMSkpKVxuICAgICAgICAgICAgcmVjdCA9IHsgbGVmdDogTWF0aC5taW4ocmVjdC5sZWZ0LCBvdGhlci5sZWZ0KSwgdG9wOiBNYXRoLm1pbihyZWN0LnRvcCwgb3RoZXIudG9wKSxcbiAgICAgICAgICAgICAgICByaWdodDogTWF0aC5tYXgocmVjdC5yaWdodCwgb3RoZXIucmlnaHQpLCBib3R0b206IE1hdGgubWF4KHJlY3QuYm90dG9tLCBvdGhlci5ib3R0b20pIH07XG4gICAgICAgIGxldCBtTGVmdCA9IDAsIG1SaWdodCA9IDAsIG1Ub3AgPSAwLCBtQm90dG9tID0gMDtcbiAgICAgICAgZm9yIChsZXQgbWFyZ2lucyBvZiB0aGlzLnZpZXcuc3RhdGUuZmFjZXQoc2Nyb2xsTWFyZ2lucykubWFwKGYgPT4gZih0aGlzLnZpZXcpKSlcbiAgICAgICAgICAgIGlmIChtYXJnaW5zKSB7XG4gICAgICAgICAgICAgICAgbGV0IHsgbGVmdCwgcmlnaHQsIHRvcCwgYm90dG9tIH0gPSBtYXJnaW5zO1xuICAgICAgICAgICAgICAgIGlmIChsZWZ0ICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIG1MZWZ0ID0gTWF0aC5tYXgobUxlZnQsIGxlZnQpO1xuICAgICAgICAgICAgICAgIGlmIChyaWdodCAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICBtUmlnaHQgPSBNYXRoLm1heChtUmlnaHQsIHJpZ2h0KTtcbiAgICAgICAgICAgICAgICBpZiAodG9wICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIG1Ub3AgPSBNYXRoLm1heChtVG9wLCB0b3ApO1xuICAgICAgICAgICAgICAgIGlmIChib3R0b20gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgbUJvdHRvbSA9IE1hdGgubWF4KG1Cb3R0b20sIGJvdHRvbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIGxldCB0YXJnZXRSZWN0ID0ge1xuICAgICAgICAgICAgbGVmdDogcmVjdC5sZWZ0IC0gbUxlZnQsIHRvcDogcmVjdC50b3AgLSBtVG9wLFxuICAgICAgICAgICAgcmlnaHQ6IHJlY3QucmlnaHQgKyBtUmlnaHQsIGJvdHRvbTogcmVjdC5ib3R0b20gKyBtQm90dG9tXG4gICAgICAgIH07XG4gICAgICAgIHNjcm9sbFJlY3RJbnRvVmlldyh0aGlzLnZpZXcuc2Nyb2xsRE9NLCB0YXJnZXRSZWN0LCByYW5nZS5oZWFkIDwgcmFuZ2UuYW5jaG9yID8gLTEgOiAxLCB0YXJnZXQueCwgdGFyZ2V0LnksIHRhcmdldC54TWFyZ2luLCB0YXJnZXQueU1hcmdpbiwgdGhpcy52aWV3LnRleHREaXJlY3Rpb24gPT0gRGlyZWN0aW9uLkxUUik7XG4gICAgfVxufVxuZnVuY3Rpb24gYmV0d2VlblVuZWRpdGFibGUocG9zKSB7XG4gICAgcmV0dXJuIHBvcy5ub2RlLm5vZGVUeXBlID09IDEgJiYgcG9zLm5vZGUuZmlyc3RDaGlsZCAmJlxuICAgICAgICAocG9zLm9mZnNldCA9PSAwIHx8IHBvcy5ub2RlLmNoaWxkTm9kZXNbcG9zLm9mZnNldCAtIDFdLmNvbnRlbnRFZGl0YWJsZSA9PSBcImZhbHNlXCIpICYmXG4gICAgICAgIChwb3Mub2Zmc2V0ID09IHBvcy5ub2RlLmNoaWxkTm9kZXMubGVuZ3RoIHx8IHBvcy5ub2RlLmNoaWxkTm9kZXNbcG9zLm9mZnNldF0uY29udGVudEVkaXRhYmxlID09IFwiZmFsc2VcIik7XG59XG5jbGFzcyBCbG9ja0dhcFdpZGdldCBleHRlbmRzIFdpZGdldFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKGhlaWdodCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICB9XG4gICAgdG9ET00oKSB7XG4gICAgICAgIGxldCBlbHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLnVwZGF0ZURPTShlbHQpO1xuICAgICAgICByZXR1cm4gZWx0O1xuICAgIH1cbiAgICBlcShvdGhlcikgeyByZXR1cm4gb3RoZXIuaGVpZ2h0ID09IHRoaXMuaGVpZ2h0OyB9XG4gICAgdXBkYXRlRE9NKGVsdCkge1xuICAgICAgICBlbHQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5oZWlnaHQgKyBcInB4XCI7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBnZXQgZXN0aW1hdGVkSGVpZ2h0KCkgeyByZXR1cm4gdGhpcy5oZWlnaHQ7IH1cbn1cbmZ1bmN0aW9uIGNvbXBvc2l0aW9uU3Vycm91bmRpbmdOb2RlKHZpZXcpIHtcbiAgICBsZXQgc2VsID0gdmlldy5vYnNlcnZlci5zZWxlY3Rpb25SYW5nZTtcbiAgICBsZXQgdGV4dE5vZGUgPSBzZWwuZm9jdXNOb2RlICYmIG5lYXJieVRleHROb2RlKHNlbC5mb2N1c05vZGUsIHNlbC5mb2N1c09mZnNldCwgMCk7XG4gICAgaWYgKCF0ZXh0Tm9kZSlcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgbGV0IGNWaWV3ID0gdmlldy5kb2NWaWV3Lm5lYXJlc3QodGV4dE5vZGUpO1xuICAgIGlmICghY1ZpZXcpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGlmIChjVmlldyBpbnN0YW5jZW9mIExpbmVWaWV3KSB7XG4gICAgICAgIGxldCB0b3BOb2RlID0gdGV4dE5vZGU7XG4gICAgICAgIHdoaWxlICh0b3BOb2RlLnBhcmVudE5vZGUgIT0gY1ZpZXcuZG9tKVxuICAgICAgICAgICAgdG9wTm9kZSA9IHRvcE5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgbGV0IHByZXYgPSB0b3BOb2RlLnByZXZpb3VzU2libGluZztcbiAgICAgICAgd2hpbGUgKHByZXYgJiYgIUNvbnRlbnRWaWV3LmdldChwcmV2KSlcbiAgICAgICAgICAgIHByZXYgPSBwcmV2LnByZXZpb3VzU2libGluZztcbiAgICAgICAgbGV0IHBvcyA9IHByZXYgPyBDb250ZW50Vmlldy5nZXQocHJldikucG9zQXRFbmQgOiBjVmlldy5wb3NBdFN0YXJ0O1xuICAgICAgICByZXR1cm4geyBmcm9tOiBwb3MsIHRvOiBwb3MsIG5vZGU6IHRvcE5vZGUsIHRleHQ6IHRleHROb2RlIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBsZXQgeyBwYXJlbnQgfSA9IGNWaWV3O1xuICAgICAgICAgICAgaWYgKCFwYXJlbnQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBpZiAocGFyZW50IGluc3RhbmNlb2YgTGluZVZpZXcpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjVmlldyA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZnJvbSA9IGNWaWV3LnBvc0F0U3RhcnQ7XG4gICAgICAgIHJldHVybiB7IGZyb20sIHRvOiBmcm9tICsgY1ZpZXcubGVuZ3RoLCBub2RlOiBjVmlldy5kb20sIHRleHQ6IHRleHROb2RlIH07XG4gICAgfVxufVxuZnVuY3Rpb24gY29tcHV0ZUNvbXBvc2l0aW9uRGVjbyh2aWV3LCBjaGFuZ2VzKSB7XG4gICAgbGV0IHN1cnJvdW5kaW5nID0gY29tcG9zaXRpb25TdXJyb3VuZGluZ05vZGUodmlldyk7XG4gICAgaWYgKCFzdXJyb3VuZGluZylcbiAgICAgICAgcmV0dXJuIERlY29yYXRpb24ubm9uZTtcbiAgICBsZXQgeyBmcm9tLCB0bywgbm9kZSwgdGV4dDogdGV4dE5vZGUgfSA9IHN1cnJvdW5kaW5nO1xuICAgIGxldCBuZXdGcm9tID0gY2hhbmdlcy5tYXBQb3MoZnJvbSwgMSksIG5ld1RvID0gTWF0aC5tYXgobmV3RnJvbSwgY2hhbmdlcy5tYXBQb3ModG8sIC0xKSk7XG4gICAgbGV0IHsgc3RhdGUgfSA9IHZpZXcsIHRleHQgPSBub2RlLm5vZGVUeXBlID09IDMgPyBub2RlLm5vZGVWYWx1ZSA6XG4gICAgICAgIG5ldyBET01SZWFkZXIoW10sIHN0YXRlKS5yZWFkUmFuZ2Uobm9kZS5maXJzdENoaWxkLCBudWxsKS50ZXh0O1xuICAgIGlmIChuZXdUbyAtIG5ld0Zyb20gPCB0ZXh0Lmxlbmd0aCkge1xuICAgICAgICBpZiAoc3RhdGUuZG9jLnNsaWNlU3RyaW5nKG5ld0Zyb20sIE1hdGgubWluKHN0YXRlLmRvYy5sZW5ndGgsIG5ld0Zyb20gKyB0ZXh0Lmxlbmd0aCksIExpbmVCcmVha1BsYWNlaG9sZGVyKSA9PSB0ZXh0KVxuICAgICAgICAgICAgbmV3VG8gPSBuZXdGcm9tICsgdGV4dC5sZW5ndGg7XG4gICAgICAgIGVsc2UgaWYgKHN0YXRlLmRvYy5zbGljZVN0cmluZyhNYXRoLm1heCgwLCBuZXdUbyAtIHRleHQubGVuZ3RoKSwgbmV3VG8sIExpbmVCcmVha1BsYWNlaG9sZGVyKSA9PSB0ZXh0KVxuICAgICAgICAgICAgbmV3RnJvbSA9IG5ld1RvIC0gdGV4dC5sZW5ndGg7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiBEZWNvcmF0aW9uLm5vbmU7XG4gICAgfVxuICAgIGVsc2UgaWYgKHN0YXRlLmRvYy5zbGljZVN0cmluZyhuZXdGcm9tLCBuZXdUbywgTGluZUJyZWFrUGxhY2Vob2xkZXIpICE9IHRleHQpIHtcbiAgICAgICAgcmV0dXJuIERlY29yYXRpb24ubm9uZTtcbiAgICB9XG4gICAgbGV0IHRvcFZpZXcgPSBDb250ZW50Vmlldy5nZXQobm9kZSk7XG4gICAgaWYgKHRvcFZpZXcgaW5zdGFuY2VvZiBDb21wb3NpdGlvblZpZXcpXG4gICAgICAgIHRvcFZpZXcgPSB0b3BWaWV3LndpZGdldC50b3BWaWV3O1xuICAgIGVsc2UgaWYgKHRvcFZpZXcpXG4gICAgICAgIHRvcFZpZXcucGFyZW50ID0gbnVsbDtcbiAgICByZXR1cm4gRGVjb3JhdGlvbi5zZXQoRGVjb3JhdGlvbi5yZXBsYWNlKHsgd2lkZ2V0OiBuZXcgQ29tcG9zaXRpb25XaWRnZXQobm9kZSwgdGV4dE5vZGUsIHRvcFZpZXcpLCBpbmNsdXNpdmU6IHRydWUgfSlcbiAgICAgICAgLnJhbmdlKG5ld0Zyb20sIG5ld1RvKSk7XG59XG5jbGFzcyBDb21wb3NpdGlvbldpZGdldCBleHRlbmRzIFdpZGdldFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKHRvcCwgdGV4dCwgdG9wVmlldykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnRvcCA9IHRvcDtcbiAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgICAgICAgdGhpcy50b3BWaWV3ID0gdG9wVmlldztcbiAgICB9XG4gICAgZXEob3RoZXIpIHsgcmV0dXJuIHRoaXMudG9wID09IG90aGVyLnRvcCAmJiB0aGlzLnRleHQgPT0gb3RoZXIudGV4dDsgfVxuICAgIHRvRE9NKCkgeyByZXR1cm4gdGhpcy50b3A7IH1cbiAgICBpZ25vcmVFdmVudCgpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgZ2V0IGN1c3RvbVZpZXcoKSB7IHJldHVybiBDb21wb3NpdGlvblZpZXc7IH1cbn1cbmZ1bmN0aW9uIG5lYXJieVRleHROb2RlKG5vZGUsIG9mZnNldCwgc2lkZSkge1xuICAgIGZvciAoOzspIHtcbiAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMylcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAxICYmIG9mZnNldCA+IDAgJiYgc2lkZSA8PSAwKSB7XG4gICAgICAgICAgICBub2RlID0gbm9kZS5jaGlsZE5vZGVzW29mZnNldCAtIDFdO1xuICAgICAgICAgICAgb2Zmc2V0ID0gbWF4T2Zmc2V0KG5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSAmJiBvZmZzZXQgPCBub2RlLmNoaWxkTm9kZXMubGVuZ3RoICYmIHNpZGUgPj0gMCkge1xuICAgICAgICAgICAgbm9kZSA9IG5vZGUuY2hpbGROb2Rlc1tvZmZzZXRdO1xuICAgICAgICAgICAgb2Zmc2V0ID0gMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gbmV4dFRvVW5lZGl0YWJsZShub2RlLCBvZmZzZXQpIHtcbiAgICBpZiAobm9kZS5ub2RlVHlwZSAhPSAxKVxuICAgICAgICByZXR1cm4gMDtcbiAgICByZXR1cm4gKG9mZnNldCAmJiBub2RlLmNoaWxkTm9kZXNbb2Zmc2V0IC0gMV0uY29udGVudEVkaXRhYmxlID09IFwiZmFsc2VcIiA/IDEgLyogTmV4dFRvLkJlZm9yZSAqLyA6IDApIHxcbiAgICAgICAgKG9mZnNldCA8IG5vZGUuY2hpbGROb2Rlcy5sZW5ndGggJiYgbm9kZS5jaGlsZE5vZGVzW29mZnNldF0uY29udGVudEVkaXRhYmxlID09IFwiZmFsc2VcIiA/IDIgLyogTmV4dFRvLkFmdGVyICovIDogMCk7XG59XG5jbGFzcyBEZWNvcmF0aW9uQ29tcGFyYXRvciQxIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VzID0gW107XG4gICAgfVxuICAgIGNvbXBhcmVSYW5nZShmcm9tLCB0bykgeyBhZGRSYW5nZShmcm9tLCB0bywgdGhpcy5jaGFuZ2VzKTsgfVxuICAgIGNvbXBhcmVQb2ludChmcm9tLCB0bykgeyBhZGRSYW5nZShmcm9tLCB0bywgdGhpcy5jaGFuZ2VzKTsgfVxufVxuZnVuY3Rpb24gZmluZENoYW5nZWREZWNvKGEsIGIsIGRpZmYpIHtcbiAgICBsZXQgY29tcCA9IG5ldyBEZWNvcmF0aW9uQ29tcGFyYXRvciQxO1xuICAgIFJhbmdlU2V0LmNvbXBhcmUoYSwgYiwgZGlmZiwgY29tcCk7XG4gICAgcmV0dXJuIGNvbXAuY2hhbmdlcztcbn1cbmZ1bmN0aW9uIGluVW5lZGl0YWJsZShub2RlLCBpbnNpZGUpIHtcbiAgICBmb3IgKGxldCBjdXIgPSBub2RlOyBjdXIgJiYgY3VyICE9IGluc2lkZTsgY3VyID0gY3VyLmFzc2lnbmVkU2xvdCB8fCBjdXIucGFyZW50Tm9kZSkge1xuICAgICAgICBpZiAoY3VyLm5vZGVUeXBlID09IDEgJiYgY3VyLmNvbnRlbnRFZGl0YWJsZSA9PSAnZmFsc2UnKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGdyb3VwQXQoc3RhdGUsIHBvcywgYmlhcyA9IDEpIHtcbiAgICBsZXQgY2F0ZWdvcml6ZSA9IHN0YXRlLmNoYXJDYXRlZ29yaXplcihwb3MpO1xuICAgIGxldCBsaW5lID0gc3RhdGUuZG9jLmxpbmVBdChwb3MpLCBsaW5lUG9zID0gcG9zIC0gbGluZS5mcm9tO1xuICAgIGlmIChsaW5lLmxlbmd0aCA9PSAwKVxuICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihwb3MpO1xuICAgIGlmIChsaW5lUG9zID09IDApXG4gICAgICAgIGJpYXMgPSAxO1xuICAgIGVsc2UgaWYgKGxpbmVQb3MgPT0gbGluZS5sZW5ndGgpXG4gICAgICAgIGJpYXMgPSAtMTtcbiAgICBsZXQgZnJvbSA9IGxpbmVQb3MsIHRvID0gbGluZVBvcztcbiAgICBpZiAoYmlhcyA8IDApXG4gICAgICAgIGZyb20gPSBmaW5kQ2x1c3RlckJyZWFrKGxpbmUudGV4dCwgbGluZVBvcywgZmFsc2UpO1xuICAgIGVsc2VcbiAgICAgICAgdG8gPSBmaW5kQ2x1c3RlckJyZWFrKGxpbmUudGV4dCwgbGluZVBvcyk7XG4gICAgbGV0IGNhdCA9IGNhdGVnb3JpemUobGluZS50ZXh0LnNsaWNlKGZyb20sIHRvKSk7XG4gICAgd2hpbGUgKGZyb20gPiAwKSB7XG4gICAgICAgIGxldCBwcmV2ID0gZmluZENsdXN0ZXJCcmVhayhsaW5lLnRleHQsIGZyb20sIGZhbHNlKTtcbiAgICAgICAgaWYgKGNhdGVnb3JpemUobGluZS50ZXh0LnNsaWNlKHByZXYsIGZyb20pKSAhPSBjYXQpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZnJvbSA9IHByZXY7XG4gICAgfVxuICAgIHdoaWxlICh0byA8IGxpbmUubGVuZ3RoKSB7XG4gICAgICAgIGxldCBuZXh0ID0gZmluZENsdXN0ZXJCcmVhayhsaW5lLnRleHQsIHRvKTtcbiAgICAgICAgaWYgKGNhdGVnb3JpemUobGluZS50ZXh0LnNsaWNlKHRvLCBuZXh0KSkgIT0gY2F0KVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIHRvID0gbmV4dDtcbiAgICB9XG4gICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5yYW5nZShmcm9tICsgbGluZS5mcm9tLCB0byArIGxpbmUuZnJvbSk7XG59XG4vLyBTZWFyY2ggdGhlIERPTSBmb3IgdGhlIHtub2RlLCBvZmZzZXR9IHBvc2l0aW9uIGNsb3Nlc3QgdG8gdGhlIGdpdmVuXG4vLyBjb29yZGluYXRlcy4gVmVyeSBpbmVmZmljaWVudCBhbmQgY3J1ZGUsIGJ1dCBjYW4gdXN1YWxseSBiZSBhdm9pZGVkXG4vLyBieSBjYWxsaW5nIGNhcmV0KFBvc2l0aW9ufFJhbmdlKUZyb21Qb2ludCBpbnN0ZWFkLlxuZnVuY3Rpb24gZ2V0ZHgoeCwgcmVjdCkge1xuICAgIHJldHVybiByZWN0LmxlZnQgPiB4ID8gcmVjdC5sZWZ0IC0geCA6IE1hdGgubWF4KDAsIHggLSByZWN0LnJpZ2h0KTtcbn1cbmZ1bmN0aW9uIGdldGR5KHksIHJlY3QpIHtcbiAgICByZXR1cm4gcmVjdC50b3AgPiB5ID8gcmVjdC50b3AgLSB5IDogTWF0aC5tYXgoMCwgeSAtIHJlY3QuYm90dG9tKTtcbn1cbmZ1bmN0aW9uIHlPdmVybGFwKGEsIGIpIHtcbiAgICByZXR1cm4gYS50b3AgPCBiLmJvdHRvbSAtIDEgJiYgYS5ib3R0b20gPiBiLnRvcCArIDE7XG59XG5mdW5jdGlvbiB1cFRvcChyZWN0LCB0b3ApIHtcbiAgICByZXR1cm4gdG9wIDwgcmVjdC50b3AgPyB7IHRvcCwgbGVmdDogcmVjdC5sZWZ0LCByaWdodDogcmVjdC5yaWdodCwgYm90dG9tOiByZWN0LmJvdHRvbSB9IDogcmVjdDtcbn1cbmZ1bmN0aW9uIHVwQm90KHJlY3QsIGJvdHRvbSkge1xuICAgIHJldHVybiBib3R0b20gPiByZWN0LmJvdHRvbSA/IHsgdG9wOiByZWN0LnRvcCwgbGVmdDogcmVjdC5sZWZ0LCByaWdodDogcmVjdC5yaWdodCwgYm90dG9tIH0gOiByZWN0O1xufVxuZnVuY3Rpb24gZG9tUG9zQXRDb29yZHMocGFyZW50LCB4LCB5KSB7XG4gICAgbGV0IGNsb3Nlc3QsIGNsb3Nlc3RSZWN0LCBjbG9zZXN0WCwgY2xvc2VzdFksIGNsb3Nlc3RPdmVybGFwID0gZmFsc2U7XG4gICAgbGV0IGFib3ZlLCBiZWxvdywgYWJvdmVSZWN0LCBiZWxvd1JlY3Q7XG4gICAgZm9yIChsZXQgY2hpbGQgPSBwYXJlbnQuZmlyc3RDaGlsZDsgY2hpbGQ7IGNoaWxkID0gY2hpbGQubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgbGV0IHJlY3RzID0gY2xpZW50UmVjdHNGb3IoY2hpbGQpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlY3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgcmVjdCA9IHJlY3RzW2ldO1xuICAgICAgICAgICAgaWYgKGNsb3Nlc3RSZWN0ICYmIHlPdmVybGFwKGNsb3Nlc3RSZWN0LCByZWN0KSlcbiAgICAgICAgICAgICAgICByZWN0ID0gdXBUb3AodXBCb3QocmVjdCwgY2xvc2VzdFJlY3QuYm90dG9tKSwgY2xvc2VzdFJlY3QudG9wKTtcbiAgICAgICAgICAgIGxldCBkeCA9IGdldGR4KHgsIHJlY3QpLCBkeSA9IGdldGR5KHksIHJlY3QpO1xuICAgICAgICAgICAgaWYgKGR4ID09IDAgJiYgZHkgPT0gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGQubm9kZVR5cGUgPT0gMyA/IGRvbVBvc0luVGV4dChjaGlsZCwgeCwgeSkgOiBkb21Qb3NBdENvb3JkcyhjaGlsZCwgeCwgeSk7XG4gICAgICAgICAgICBpZiAoIWNsb3Nlc3QgfHwgY2xvc2VzdFkgPiBkeSB8fCBjbG9zZXN0WSA9PSBkeSAmJiBjbG9zZXN0WCA+IGR4KSB7XG4gICAgICAgICAgICAgICAgY2xvc2VzdCA9IGNoaWxkO1xuICAgICAgICAgICAgICAgIGNsb3Nlc3RSZWN0ID0gcmVjdDtcbiAgICAgICAgICAgICAgICBjbG9zZXN0WCA9IGR4O1xuICAgICAgICAgICAgICAgIGNsb3Nlc3RZID0gZHk7XG4gICAgICAgICAgICAgICAgY2xvc2VzdE92ZXJsYXAgPSAhZHggfHwgKGR4ID4gMCA/IGkgPCByZWN0cy5sZW5ndGggLSAxIDogaSA+IDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGR4ID09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoeSA+IHJlY3QuYm90dG9tICYmICghYWJvdmVSZWN0IHx8IGFib3ZlUmVjdC5ib3R0b20gPCByZWN0LmJvdHRvbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgYWJvdmUgPSBjaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgYWJvdmVSZWN0ID0gcmVjdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoeSA8IHJlY3QudG9wICYmICghYmVsb3dSZWN0IHx8IGJlbG93UmVjdC50b3AgPiByZWN0LnRvcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgYmVsb3cgPSBjaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgYmVsb3dSZWN0ID0gcmVjdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChhYm92ZVJlY3QgJiYgeU92ZXJsYXAoYWJvdmVSZWN0LCByZWN0KSkge1xuICAgICAgICAgICAgICAgIGFib3ZlUmVjdCA9IHVwQm90KGFib3ZlUmVjdCwgcmVjdC5ib3R0b20pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYmVsb3dSZWN0ICYmIHlPdmVybGFwKGJlbG93UmVjdCwgcmVjdCkpIHtcbiAgICAgICAgICAgICAgICBiZWxvd1JlY3QgPSB1cFRvcChiZWxvd1JlY3QsIHJlY3QudG9wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoYWJvdmVSZWN0ICYmIGFib3ZlUmVjdC5ib3R0b20gPj0geSkge1xuICAgICAgICBjbG9zZXN0ID0gYWJvdmU7XG4gICAgICAgIGNsb3Nlc3RSZWN0ID0gYWJvdmVSZWN0O1xuICAgIH1cbiAgICBlbHNlIGlmIChiZWxvd1JlY3QgJiYgYmVsb3dSZWN0LnRvcCA8PSB5KSB7XG4gICAgICAgIGNsb3Nlc3QgPSBiZWxvdztcbiAgICAgICAgY2xvc2VzdFJlY3QgPSBiZWxvd1JlY3Q7XG4gICAgfVxuICAgIGlmICghY2xvc2VzdClcbiAgICAgICAgcmV0dXJuIHsgbm9kZTogcGFyZW50LCBvZmZzZXQ6IDAgfTtcbiAgICBsZXQgY2xpcFggPSBNYXRoLm1heChjbG9zZXN0UmVjdC5sZWZ0LCBNYXRoLm1pbihjbG9zZXN0UmVjdC5yaWdodCwgeCkpO1xuICAgIGlmIChjbG9zZXN0Lm5vZGVUeXBlID09IDMpXG4gICAgICAgIHJldHVybiBkb21Qb3NJblRleHQoY2xvc2VzdCwgY2xpcFgsIHkpO1xuICAgIGlmIChjbG9zZXN0T3ZlcmxhcCAmJiBjbG9zZXN0LmNvbnRlbnRFZGl0YWJsZSAhPSBcImZhbHNlXCIpXG4gICAgICAgIHJldHVybiBkb21Qb3NBdENvb3JkcyhjbG9zZXN0LCBjbGlwWCwgeSk7XG4gICAgbGV0IG9mZnNldCA9IEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwocGFyZW50LmNoaWxkTm9kZXMsIGNsb3Nlc3QpICtcbiAgICAgICAgKHggPj0gKGNsb3Nlc3RSZWN0LmxlZnQgKyBjbG9zZXN0UmVjdC5yaWdodCkgLyAyID8gMSA6IDApO1xuICAgIHJldHVybiB7IG5vZGU6IHBhcmVudCwgb2Zmc2V0IH07XG59XG5mdW5jdGlvbiBkb21Qb3NJblRleHQobm9kZSwgeCwgeSkge1xuICAgIGxldCBsZW4gPSBub2RlLm5vZGVWYWx1ZS5sZW5ndGg7XG4gICAgbGV0IGNsb3Nlc3RPZmZzZXQgPSAtMSwgY2xvc2VzdERZID0gMWU5LCBnZW5lcmFsU2lkZSA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBsZXQgcmVjdHMgPSB0ZXh0UmFuZ2Uobm9kZSwgaSwgaSArIDEpLmdldENsaWVudFJlY3RzKCk7XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcmVjdHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGxldCByZWN0ID0gcmVjdHNbal07XG4gICAgICAgICAgICBpZiAocmVjdC50b3AgPT0gcmVjdC5ib3R0b20pXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBpZiAoIWdlbmVyYWxTaWRlKVxuICAgICAgICAgICAgICAgIGdlbmVyYWxTaWRlID0geCAtIHJlY3QubGVmdDtcbiAgICAgICAgICAgIGxldCBkeSA9IChyZWN0LnRvcCA+IHkgPyByZWN0LnRvcCAtIHkgOiB5IC0gcmVjdC5ib3R0b20pIC0gMTtcbiAgICAgICAgICAgIGlmIChyZWN0LmxlZnQgLSAxIDw9IHggJiYgcmVjdC5yaWdodCArIDEgPj0geCAmJiBkeSA8IGNsb3Nlc3REWSkge1xuICAgICAgICAgICAgICAgIGxldCByaWdodCA9IHggPj0gKHJlY3QubGVmdCArIHJlY3QucmlnaHQpIC8gMiwgYWZ0ZXIgPSByaWdodDtcbiAgICAgICAgICAgICAgICBpZiAoYnJvd3Nlci5jaHJvbWUgfHwgYnJvd3Nlci5nZWNrbykge1xuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBmb3IgUlRMIG9uIGJyb3dzZXJzIHRoYXQgc3VwcG9ydCBnZXR0aW5nIGNsaWVudFxuICAgICAgICAgICAgICAgICAgICAvLyByZWN0cyBmb3IgZW1wdHkgcmFuZ2VzLlxuICAgICAgICAgICAgICAgICAgICBsZXQgcmVjdEJlZm9yZSA9IHRleHRSYW5nZShub2RlLCBpKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlY3RCZWZvcmUubGVmdCA9PSByZWN0LnJpZ2h0KVxuICAgICAgICAgICAgICAgICAgICAgICAgYWZ0ZXIgPSAhcmlnaHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkeSA8PSAwKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBub2RlLCBvZmZzZXQ6IGkgKyAoYWZ0ZXIgPyAxIDogMCkgfTtcbiAgICAgICAgICAgICAgICBjbG9zZXN0T2Zmc2V0ID0gaSArIChhZnRlciA/IDEgOiAwKTtcbiAgICAgICAgICAgICAgICBjbG9zZXN0RFkgPSBkeTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geyBub2RlLCBvZmZzZXQ6IGNsb3Nlc3RPZmZzZXQgPiAtMSA/IGNsb3Nlc3RPZmZzZXQgOiBnZW5lcmFsU2lkZSA+IDAgPyBub2RlLm5vZGVWYWx1ZS5sZW5ndGggOiAwIH07XG59XG5mdW5jdGlvbiBwb3NBdENvb3Jkcyh2aWV3LCB7IHgsIHkgfSwgcHJlY2lzZSwgYmlhcyA9IC0xKSB7XG4gICAgdmFyIF9hO1xuICAgIGxldCBjb250ZW50ID0gdmlldy5jb250ZW50RE9NLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBkb2NUb3AgPSBjb250ZW50LnRvcCArIHZpZXcudmlld1N0YXRlLnBhZGRpbmdUb3A7XG4gICAgbGV0IGJsb2NrLCB7IGRvY0hlaWdodCB9ID0gdmlldy52aWV3U3RhdGU7XG4gICAgbGV0IHlPZmZzZXQgPSB5IC0gZG9jVG9wO1xuICAgIGlmICh5T2Zmc2V0IDwgMClcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgaWYgKHlPZmZzZXQgPiBkb2NIZWlnaHQpXG4gICAgICAgIHJldHVybiB2aWV3LnN0YXRlLmRvYy5sZW5ndGg7XG4gICAgLy8gU2NhbiBmb3IgYSB0ZXh0IGJsb2NrIG5lYXIgdGhlIHF1ZXJpZWQgeSBwb3NpdGlvblxuICAgIGZvciAobGV0IGhhbGZMaW5lID0gdmlldy5kZWZhdWx0TGluZUhlaWdodCAvIDIsIGJvdW5jZWQgPSBmYWxzZTs7KSB7XG4gICAgICAgIGJsb2NrID0gdmlldy5lbGVtZW50QXRIZWlnaHQoeU9mZnNldCk7XG4gICAgICAgIGlmIChibG9jay50eXBlID09IEJsb2NrVHlwZS5UZXh0KVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgIC8vIE1vdmUgdGhlIHkgcG9zaXRpb24gb3V0IG9mIHRoaXMgYmxvY2tcbiAgICAgICAgICAgIHlPZmZzZXQgPSBiaWFzID4gMCA/IGJsb2NrLmJvdHRvbSArIGhhbGZMaW5lIDogYmxvY2sudG9wIC0gaGFsZkxpbmU7XG4gICAgICAgICAgICBpZiAoeU9mZnNldCA+PSAwICYmIHlPZmZzZXQgPD0gZG9jSGVpZ2h0KVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgLy8gSWYgdGhlIGRvY3VtZW50IGNvbnNpc3RzIGVudGlyZWx5IG9mIHJlcGxhY2VkIHdpZGdldHMsIHdlXG4gICAgICAgICAgICAvLyB3b24ndCBmaW5kIGEgdGV4dCBibG9jaywgc28gcmV0dXJuIDBcbiAgICAgICAgICAgIGlmIChib3VuY2VkKVxuICAgICAgICAgICAgICAgIHJldHVybiBwcmVjaXNlID8gbnVsbCA6IDA7XG4gICAgICAgICAgICBib3VuY2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIGJpYXMgPSAtYmlhcztcbiAgICAgICAgfVxuICAgIH1cbiAgICB5ID0gZG9jVG9wICsgeU9mZnNldDtcbiAgICBsZXQgbGluZVN0YXJ0ID0gYmxvY2suZnJvbTtcbiAgICAvLyBJZiB0aGlzIGlzIG91dHNpZGUgb2YgdGhlIHJlbmRlcmVkIHZpZXdwb3J0LCB3ZSBjYW4ndCBkZXRlcm1pbmUgYSBwb3NpdGlvblxuICAgIGlmIChsaW5lU3RhcnQgPCB2aWV3LnZpZXdwb3J0LmZyb20pXG4gICAgICAgIHJldHVybiB2aWV3LnZpZXdwb3J0LmZyb20gPT0gMCA/IDAgOiBwcmVjaXNlID8gbnVsbCA6IHBvc0F0Q29vcmRzSW1wcmVjaXNlKHZpZXcsIGNvbnRlbnQsIGJsb2NrLCB4LCB5KTtcbiAgICBpZiAobGluZVN0YXJ0ID4gdmlldy52aWV3cG9ydC50bylcbiAgICAgICAgcmV0dXJuIHZpZXcudmlld3BvcnQudG8gPT0gdmlldy5zdGF0ZS5kb2MubGVuZ3RoID8gdmlldy5zdGF0ZS5kb2MubGVuZ3RoIDpcbiAgICAgICAgICAgIHByZWNpc2UgPyBudWxsIDogcG9zQXRDb29yZHNJbXByZWNpc2UodmlldywgY29udGVudCwgYmxvY2ssIHgsIHkpO1xuICAgIC8vIFByZWZlciBTaGFkb3dSb290T3JEb2N1bWVudC5lbGVtZW50RnJvbVBvaW50IGlmIHByZXNlbnQsIGZhbGwgYmFjayB0byBkb2N1bWVudCBpZiBub3RcbiAgICBsZXQgZG9jID0gdmlldy5kb20ub3duZXJEb2N1bWVudDtcbiAgICBsZXQgcm9vdCA9IHZpZXcucm9vdC5lbGVtZW50RnJvbVBvaW50ID8gdmlldy5yb290IDogZG9jO1xuICAgIGxldCBlbGVtZW50ID0gcm9vdC5lbGVtZW50RnJvbVBvaW50KHgsIHkpO1xuICAgIGlmIChlbGVtZW50ICYmICF2aWV3LmNvbnRlbnRET00uY29udGFpbnMoZWxlbWVudCkpXG4gICAgICAgIGVsZW1lbnQgPSBudWxsO1xuICAgIC8vIElmIHRoZSBlbGVtZW50IGlzIHVuZXhwZWN0ZWQsIGNsaXAgeCBhdCB0aGUgc2lkZXMgb2YgdGhlIGNvbnRlbnQgYXJlYSBhbmQgdHJ5IGFnYWluXG4gICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgIHggPSBNYXRoLm1heChjb250ZW50LmxlZnQgKyAxLCBNYXRoLm1pbihjb250ZW50LnJpZ2h0IC0gMSwgeCkpO1xuICAgICAgICBlbGVtZW50ID0gcm9vdC5lbGVtZW50RnJvbVBvaW50KHgsIHkpO1xuICAgICAgICBpZiAoZWxlbWVudCAmJiAhdmlldy5jb250ZW50RE9NLmNvbnRhaW5zKGVsZW1lbnQpKVxuICAgICAgICAgICAgZWxlbWVudCA9IG51bGw7XG4gICAgfVxuICAgIC8vIFRoZXJlJ3MgdmlzaWJsZSBlZGl0b3IgY29udGVudCB1bmRlciB0aGUgcG9pbnQsIHNvIHdlIGNhbiB0cnlcbiAgICAvLyB1c2luZyBjYXJldChQb3NpdGlvbnxSYW5nZSlGcm9tUG9pbnQgYXMgYSBzaG9ydGN1dFxuICAgIGxldCBub2RlLCBvZmZzZXQgPSAtMTtcbiAgICBpZiAoZWxlbWVudCAmJiAoKF9hID0gdmlldy5kb2NWaWV3Lm5lYXJlc3QoZWxlbWVudCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pc0VkaXRhYmxlKSAhPSBmYWxzZSkge1xuICAgICAgICBpZiAoZG9jLmNhcmV0UG9zaXRpb25Gcm9tUG9pbnQpIHtcbiAgICAgICAgICAgIGxldCBwb3MgPSBkb2MuY2FyZXRQb3NpdGlvbkZyb21Qb2ludCh4LCB5KTtcbiAgICAgICAgICAgIGlmIChwb3MpXG4gICAgICAgICAgICAgICAgKHsgb2Zmc2V0Tm9kZTogbm9kZSwgb2Zmc2V0IH0gPSBwb3MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRvYy5jYXJldFJhbmdlRnJvbVBvaW50KSB7XG4gICAgICAgICAgICBsZXQgcmFuZ2UgPSBkb2MuY2FyZXRSYW5nZUZyb21Qb2ludCh4LCB5KTtcbiAgICAgICAgICAgIGlmIChyYW5nZSkge1xuICAgICAgICAgICAgICAgICh7IHN0YXJ0Q29udGFpbmVyOiBub2RlLCBzdGFydE9mZnNldDogb2Zmc2V0IH0gPSByYW5nZSk7XG4gICAgICAgICAgICAgICAgaWYgKCF2aWV3LmNvbnRlbnRET00uY29udGFpbnMobm9kZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgYnJvd3Nlci5zYWZhcmkgJiYgaXNTdXNwaWNpb3VzU2FmYXJpQ2FyZXRSZXN1bHQobm9kZSwgb2Zmc2V0LCB4KSB8fFxuICAgICAgICAgICAgICAgICAgICBicm93c2VyLmNocm9tZSAmJiBpc1N1c3BpY2lvdXNDaHJvbWVDYXJldFJlc3VsdChub2RlLCBvZmZzZXQsIHgpKVxuICAgICAgICAgICAgICAgICAgICBub2RlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIE5vIGx1Y2ssIGRvIG91ciBvd24gKHBvdGVudGlhbGx5IGV4cGVuc2l2ZSkgc2VhcmNoXG4gICAgaWYgKCFub2RlIHx8ICF2aWV3LmRvY1ZpZXcuZG9tLmNvbnRhaW5zKG5vZGUpKSB7XG4gICAgICAgIGxldCBsaW5lID0gTGluZVZpZXcuZmluZCh2aWV3LmRvY1ZpZXcsIGxpbmVTdGFydCk7XG4gICAgICAgIGlmICghbGluZSlcbiAgICAgICAgICAgIHJldHVybiB5T2Zmc2V0ID4gYmxvY2sudG9wICsgYmxvY2suaGVpZ2h0IC8gMiA/IGJsb2NrLnRvIDogYmxvY2suZnJvbTtcbiAgICAgICAgKHsgbm9kZSwgb2Zmc2V0IH0gPSBkb21Qb3NBdENvb3JkcyhsaW5lLmRvbSwgeCwgeSkpO1xuICAgIH1cbiAgICByZXR1cm4gdmlldy5kb2NWaWV3LnBvc0Zyb21ET00obm9kZSwgb2Zmc2V0KTtcbn1cbmZ1bmN0aW9uIHBvc0F0Q29vcmRzSW1wcmVjaXNlKHZpZXcsIGNvbnRlbnRSZWN0LCBibG9jaywgeCwgeSkge1xuICAgIGxldCBpbnRvID0gTWF0aC5yb3VuZCgoeCAtIGNvbnRlbnRSZWN0LmxlZnQpICogdmlldy5kZWZhdWx0Q2hhcmFjdGVyV2lkdGgpO1xuICAgIGlmICh2aWV3LmxpbmVXcmFwcGluZyAmJiBibG9jay5oZWlnaHQgPiB2aWV3LmRlZmF1bHRMaW5lSGVpZ2h0ICogMS41KSB7XG4gICAgICAgIGxldCBsaW5lID0gTWF0aC5mbG9vcigoeSAtIGJsb2NrLnRvcCkgLyB2aWV3LmRlZmF1bHRMaW5lSGVpZ2h0KTtcbiAgICAgICAgaW50byArPSBsaW5lICogdmlldy52aWV3U3RhdGUuaGVpZ2h0T3JhY2xlLmxpbmVMZW5ndGg7XG4gICAgfVxuICAgIGxldCBjb250ZW50ID0gdmlldy5zdGF0ZS5zbGljZURvYyhibG9jay5mcm9tLCBibG9jay50byk7XG4gICAgcmV0dXJuIGJsb2NrLmZyb20gKyBmaW5kQ29sdW1uKGNvbnRlbnQsIGludG8sIHZpZXcuc3RhdGUudGFiU2l6ZSk7XG59XG4vLyBJbiBjYXNlIG9mIGEgaGlnaCBsaW5lIGhlaWdodCwgU2FmYXJpJ3MgY2FyZXRSYW5nZUZyb21Qb2ludCB0cmVhdHNcbi8vIHRoZSBzcGFjZSBiZXR3ZWVuIGxpbmVzIGFzIGJlbG9uZ2luZyB0byB0aGUgbGFzdCBjaGFyYWN0ZXIgb2YgdGhlXG4vLyBsaW5lIGJlZm9yZS4gVGhpcyBpcyB1c2VkIHRvIGRldGVjdCBzdWNoIGEgcmVzdWx0IHNvIHRoYXQgaXQgY2FuIGJlXG4vLyBpZ25vcmVkIChpc3N1ZSAjNDAxKS5cbmZ1bmN0aW9uIGlzU3VzcGljaW91c1NhZmFyaUNhcmV0UmVzdWx0KG5vZGUsIG9mZnNldCwgeCkge1xuICAgIGxldCBsZW47XG4gICAgaWYgKG5vZGUubm9kZVR5cGUgIT0gMyB8fCBvZmZzZXQgIT0gKGxlbiA9IG5vZGUubm9kZVZhbHVlLmxlbmd0aCkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBmb3IgKGxldCBuZXh0ID0gbm9kZS5uZXh0U2libGluZzsgbmV4dDsgbmV4dCA9IG5leHQubmV4dFNpYmxpbmcpXG4gICAgICAgIGlmIChuZXh0Lm5vZGVUeXBlICE9IDEgfHwgbmV4dC5ub2RlTmFtZSAhPSBcIkJSXCIpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRleHRSYW5nZShub2RlLCBsZW4gLSAxLCBsZW4pLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgPiB4O1xufVxuLy8gQ2hyb21lIHdpbGwgbW92ZSBwb3NpdGlvbnMgYmV0d2VlbiBsaW5lcyB0byB0aGUgc3RhcnQgb2YgdGhlIG5leHQgbGluZVxuZnVuY3Rpb24gaXNTdXNwaWNpb3VzQ2hyb21lQ2FyZXRSZXN1bHQobm9kZSwgb2Zmc2V0LCB4KSB7XG4gICAgaWYgKG9mZnNldCAhPSAwKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgZm9yIChsZXQgY3VyID0gbm9kZTs7KSB7XG4gICAgICAgIGxldCBwYXJlbnQgPSBjdXIucGFyZW50Tm9kZTtcbiAgICAgICAgaWYgKCFwYXJlbnQgfHwgcGFyZW50Lm5vZGVUeXBlICE9IDEgfHwgcGFyZW50LmZpcnN0Q2hpbGQgIT0gY3VyKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAocGFyZW50LmNsYXNzTGlzdC5jb250YWlucyhcImNtLWxpbmVcIikpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY3VyID0gcGFyZW50O1xuICAgIH1cbiAgICBsZXQgcmVjdCA9IG5vZGUubm9kZVR5cGUgPT0gMSA/IG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgICAgOiB0ZXh0UmFuZ2Uobm9kZSwgMCwgTWF0aC5tYXgobm9kZS5ub2RlVmFsdWUubGVuZ3RoLCAxKSkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcmV0dXJuIHggLSByZWN0LmxlZnQgPiA1O1xufVxuZnVuY3Rpb24gbW92ZVRvTGluZUJvdW5kYXJ5KHZpZXcsIHN0YXJ0LCBmb3J3YXJkLCBpbmNsdWRlV3JhcCkge1xuICAgIGxldCBsaW5lID0gdmlldy5zdGF0ZS5kb2MubGluZUF0KHN0YXJ0LmhlYWQpO1xuICAgIGxldCBjb29yZHMgPSAhaW5jbHVkZVdyYXAgfHwgIXZpZXcubGluZVdyYXBwaW5nID8gbnVsbFxuICAgICAgICA6IHZpZXcuY29vcmRzQXRQb3Moc3RhcnQuYXNzb2MgPCAwICYmIHN0YXJ0LmhlYWQgPiBsaW5lLmZyb20gPyBzdGFydC5oZWFkIC0gMSA6IHN0YXJ0LmhlYWQpO1xuICAgIGlmIChjb29yZHMpIHtcbiAgICAgICAgbGV0IGVkaXRvclJlY3QgPSB2aWV3LmRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgbGV0IGRpcmVjdGlvbiA9IHZpZXcudGV4dERpcmVjdGlvbkF0KGxpbmUuZnJvbSk7XG4gICAgICAgIGxldCBwb3MgPSB2aWV3LnBvc0F0Q29vcmRzKHsgeDogZm9yd2FyZCA9PSAoZGlyZWN0aW9uID09IERpcmVjdGlvbi5MVFIpID8gZWRpdG9yUmVjdC5yaWdodCAtIDEgOiBlZGl0b3JSZWN0LmxlZnQgKyAxLFxuICAgICAgICAgICAgeTogKGNvb3Jkcy50b3AgKyBjb29yZHMuYm90dG9tKSAvIDIgfSk7XG4gICAgICAgIGlmIChwb3MgIT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHBvcywgZm9yd2FyZCA/IC0xIDogMSk7XG4gICAgfVxuICAgIGxldCBsaW5lVmlldyA9IExpbmVWaWV3LmZpbmQodmlldy5kb2NWaWV3LCBzdGFydC5oZWFkKTtcbiAgICBsZXQgZW5kID0gbGluZVZpZXcgPyAoZm9yd2FyZCA/IGxpbmVWaWV3LnBvc0F0RW5kIDogbGluZVZpZXcucG9zQXRTdGFydCkgOiAoZm9yd2FyZCA/IGxpbmUudG8gOiBsaW5lLmZyb20pO1xuICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKGVuZCwgZm9yd2FyZCA/IC0xIDogMSk7XG59XG5mdW5jdGlvbiBtb3ZlQnlDaGFyKHZpZXcsIHN0YXJ0LCBmb3J3YXJkLCBieSkge1xuICAgIGxldCBsaW5lID0gdmlldy5zdGF0ZS5kb2MubGluZUF0KHN0YXJ0LmhlYWQpLCBzcGFucyA9IHZpZXcuYmlkaVNwYW5zKGxpbmUpO1xuICAgIGxldCBkaXJlY3Rpb24gPSB2aWV3LnRleHREaXJlY3Rpb25BdChsaW5lLmZyb20pO1xuICAgIGZvciAobGV0IGN1ciA9IHN0YXJ0LCBjaGVjayA9IG51bGw7Oykge1xuICAgICAgICBsZXQgbmV4dCA9IG1vdmVWaXN1YWxseShsaW5lLCBzcGFucywgZGlyZWN0aW9uLCBjdXIsIGZvcndhcmQpLCBjaGFyID0gbW92ZWRPdmVyO1xuICAgICAgICBpZiAoIW5leHQpIHtcbiAgICAgICAgICAgIGlmIChsaW5lLm51bWJlciA9PSAoZm9yd2FyZCA/IHZpZXcuc3RhdGUuZG9jLmxpbmVzIDogMSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cjtcbiAgICAgICAgICAgIGNoYXIgPSBcIlxcblwiO1xuICAgICAgICAgICAgbGluZSA9IHZpZXcuc3RhdGUuZG9jLmxpbmUobGluZS5udW1iZXIgKyAoZm9yd2FyZCA/IDEgOiAtMSkpO1xuICAgICAgICAgICAgc3BhbnMgPSB2aWV3LmJpZGlTcGFucyhsaW5lKTtcbiAgICAgICAgICAgIG5leHQgPSBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKGZvcndhcmQgPyBsaW5lLmZyb20gOiBsaW5lLnRvKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWNoZWNrKSB7XG4gICAgICAgICAgICBpZiAoIWJ5KVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICAgICAgY2hlY2sgPSBieShjaGFyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghY2hlY2soY2hhcikpIHtcbiAgICAgICAgICAgIHJldHVybiBjdXI7XG4gICAgICAgIH1cbiAgICAgICAgY3VyID0gbmV4dDtcbiAgICB9XG59XG5mdW5jdGlvbiBieUdyb3VwKHZpZXcsIHBvcywgc3RhcnQpIHtcbiAgICBsZXQgY2F0ZWdvcml6ZSA9IHZpZXcuc3RhdGUuY2hhckNhdGVnb3JpemVyKHBvcyk7XG4gICAgbGV0IGNhdCA9IGNhdGVnb3JpemUoc3RhcnQpO1xuICAgIHJldHVybiAobmV4dCkgPT4ge1xuICAgICAgICBsZXQgbmV4dENhdCA9IGNhdGVnb3JpemUobmV4dCk7XG4gICAgICAgIGlmIChjYXQgPT0gQ2hhckNhdGVnb3J5LlNwYWNlKVxuICAgICAgICAgICAgY2F0ID0gbmV4dENhdDtcbiAgICAgICAgcmV0dXJuIGNhdCA9PSBuZXh0Q2F0O1xuICAgIH07XG59XG5mdW5jdGlvbiBtb3ZlVmVydGljYWxseSh2aWV3LCBzdGFydCwgZm9yd2FyZCwgZGlzdGFuY2UpIHtcbiAgICBsZXQgc3RhcnRQb3MgPSBzdGFydC5oZWFkLCBkaXIgPSBmb3J3YXJkID8gMSA6IC0xO1xuICAgIGlmIChzdGFydFBvcyA9PSAoZm9yd2FyZCA/IHZpZXcuc3RhdGUuZG9jLmxlbmd0aCA6IDApKVxuICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihzdGFydFBvcywgc3RhcnQuYXNzb2MpO1xuICAgIGxldCBnb2FsID0gc3RhcnQuZ29hbENvbHVtbiwgc3RhcnRZO1xuICAgIGxldCByZWN0ID0gdmlldy5jb250ZW50RE9NLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGxldCBzdGFydENvb3JkcyA9IHZpZXcuY29vcmRzQXRQb3Moc3RhcnRQb3MpLCBkb2NUb3AgPSB2aWV3LmRvY3VtZW50VG9wO1xuICAgIGlmIChzdGFydENvb3Jkcykge1xuICAgICAgICBpZiAoZ29hbCA9PSBudWxsKVxuICAgICAgICAgICAgZ29hbCA9IHN0YXJ0Q29vcmRzLmxlZnQgLSByZWN0LmxlZnQ7XG4gICAgICAgIHN0YXJ0WSA9IGRpciA8IDAgPyBzdGFydENvb3Jkcy50b3AgOiBzdGFydENvb3Jkcy5ib3R0b207XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsZXQgbGluZSA9IHZpZXcudmlld1N0YXRlLmxpbmVCbG9ja0F0KHN0YXJ0UG9zKTtcbiAgICAgICAgaWYgKGdvYWwgPT0gbnVsbClcbiAgICAgICAgICAgIGdvYWwgPSBNYXRoLm1pbihyZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0LCB2aWV3LmRlZmF1bHRDaGFyYWN0ZXJXaWR0aCAqIChzdGFydFBvcyAtIGxpbmUuZnJvbSkpO1xuICAgICAgICBzdGFydFkgPSAoZGlyIDwgMCA/IGxpbmUudG9wIDogbGluZS5ib3R0b20pICsgZG9jVG9wO1xuICAgIH1cbiAgICBsZXQgcmVzb2x2ZWRHb2FsID0gcmVjdC5sZWZ0ICsgZ29hbDtcbiAgICBsZXQgZGlzdCA9IGRpc3RhbmNlICE9PSBudWxsICYmIGRpc3RhbmNlICE9PSB2b2lkIDAgPyBkaXN0YW5jZSA6ICh2aWV3LmRlZmF1bHRMaW5lSGVpZ2h0ID4+IDEpO1xuICAgIGZvciAobGV0IGV4dHJhID0gMDs7IGV4dHJhICs9IDEwKSB7XG4gICAgICAgIGxldCBjdXJZID0gc3RhcnRZICsgKGRpc3QgKyBleHRyYSkgKiBkaXI7XG4gICAgICAgIGxldCBwb3MgPSBwb3NBdENvb3Jkcyh2aWV3LCB7IHg6IHJlc29sdmVkR29hbCwgeTogY3VyWSB9LCBmYWxzZSwgZGlyKTtcbiAgICAgICAgaWYgKGN1clkgPCByZWN0LnRvcCB8fCBjdXJZID4gcmVjdC5ib3R0b20gfHwgKGRpciA8IDAgPyBwb3MgPCBzdGFydFBvcyA6IHBvcyA+IHN0YXJ0UG9zKSlcbiAgICAgICAgICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHBvcywgc3RhcnQuYXNzb2MsIHVuZGVmaW5lZCwgZ29hbCk7XG4gICAgfVxufVxuZnVuY3Rpb24gc2tpcEF0b21zKHZpZXcsIG9sZFBvcywgcG9zKSB7XG4gICAgbGV0IGF0b21zID0gdmlldy5zdGF0ZS5mYWNldChhdG9taWNSYW5nZXMpLm1hcChmID0+IGYodmlldykpO1xuICAgIGZvciAoOzspIHtcbiAgICAgICAgbGV0IG1vdmVkID0gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IHNldCBvZiBhdG9tcykge1xuICAgICAgICAgICAgc2V0LmJldHdlZW4ocG9zLmZyb20gLSAxLCBwb3MuZnJvbSArIDEsIChmcm9tLCB0bywgdmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocG9zLmZyb20gPiBmcm9tICYmIHBvcy5mcm9tIDwgdG8pIHtcbiAgICAgICAgICAgICAgICAgICAgcG9zID0gb2xkUG9zLmhlYWQgPiBwb3MuZnJvbSA/IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IoZnJvbSwgMSkgOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHRvLCAtMSk7XG4gICAgICAgICAgICAgICAgICAgIG1vdmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW1vdmVkKVxuICAgICAgICAgICAgcmV0dXJuIHBvcztcbiAgICB9XG59XG5cbi8vIFRoaXMgd2lsbCBhbHNvIGJlIHdoZXJlIGRyYWdnaW5nIGluZm8gYW5kIHN1Y2ggZ29lc1xuY2xhc3MgSW5wdXRTdGF0ZSB7XG4gICAgY29uc3RydWN0b3Iodmlldykge1xuICAgICAgICB0aGlzLmxhc3RLZXlDb2RlID0gMDtcbiAgICAgICAgdGhpcy5sYXN0S2V5VGltZSA9IDA7XG4gICAgICAgIHRoaXMubGFzdFRvdWNoVGltZSA9IDA7XG4gICAgICAgIHRoaXMubGFzdEZvY3VzVGltZSA9IDA7XG4gICAgICAgIHRoaXMubGFzdFNjcm9sbFRvcCA9IDA7XG4gICAgICAgIHRoaXMubGFzdFNjcm9sbExlZnQgPSAwO1xuICAgICAgICB0aGlzLmNocm9tZVNjcm9sbEhhY2sgPSAtMTtcbiAgICAgICAgLy8gT24gaU9TLCBzb21lIGtleXMgbmVlZCB0byBoYXZlIHRoZWlyIGRlZmF1bHQgYmVoYXZpb3IgaGFwcGVuXG4gICAgICAgIC8vIChhZnRlciB3aGljaCB3ZSByZXRyb2FjdGl2ZWx5IGhhbmRsZSB0aGVtIGFuZCByZXNldCB0aGUgRE9NKSB0b1xuICAgICAgICAvLyBhdm9pZCBtZXNzaW5nIHVwIHRoZSB2aXJ0dWFsIGtleWJvYXJkIHN0YXRlLlxuICAgICAgICB0aGlzLnBlbmRpbmdJT1NLZXkgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMubGFzdFNlbGVjdGlvbk9yaWdpbiA9IG51bGw7XG4gICAgICAgIHRoaXMubGFzdFNlbGVjdGlvblRpbWUgPSAwO1xuICAgICAgICB0aGlzLmxhc3RFc2NQcmVzcyA9IDA7XG4gICAgICAgIHRoaXMubGFzdENvbnRleHRNZW51ID0gMDtcbiAgICAgICAgdGhpcy5zY3JvbGxIYW5kbGVycyA9IFtdO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyZWRFdmVudHMgPSBbXTtcbiAgICAgICAgdGhpcy5jdXN0b21IYW5kbGVycyA9IFtdO1xuICAgICAgICAvLyAtMSBtZWFucyBub3QgaW4gYSBjb21wb3NpdGlvbi4gT3RoZXJ3aXNlLCB0aGlzIGNvdW50cyB0aGUgbnVtYmVyXG4gICAgICAgIC8vIG9mIGNoYW5nZXMgbWFkZSBkdXJpbmcgdGhlIGNvbXBvc2l0aW9uLiBUaGUgY291bnQgaXMgdXNlZCB0b1xuICAgICAgICAvLyBhdm9pZCB0cmVhdGluZyB0aGUgc3RhcnQgc3RhdGUgb2YgdGhlIGNvbXBvc2l0aW9uLCBiZWZvcmUgYW55XG4gICAgICAgIC8vIGNoYW5nZXMgaGF2ZSBiZWVuIG1hZGUsIGFzIHBhcnQgb2YgdGhlIGNvbXBvc2l0aW9uLlxuICAgICAgICB0aGlzLmNvbXBvc2luZyA9IC0xO1xuICAgICAgICAvLyBUcmFja3Mgd2hldGhlciB0aGUgbmV4dCBjaGFuZ2Ugc2hvdWxkIGJlIG1hcmtlZCBhcyBzdGFydGluZyB0aGVcbiAgICAgICAgLy8gY29tcG9zaXRpb24gKG51bGwgbWVhbnMgbm8gY29tcG9zaXRpb24sIHRydWUgbWVhbnMgbmV4dCBpcyB0aGVcbiAgICAgICAgLy8gZmlyc3QsIGZhbHNlIG1lYW5zIGZpcnN0IGhhcyBhbHJlYWR5IGJlZW4gbWFya2VkIGZvciB0aGlzXG4gICAgICAgIC8vIGNvbXBvc2l0aW9uKVxuICAgICAgICB0aGlzLmNvbXBvc2l0aW9uRmlyc3RDaGFuZ2UgPSBudWxsO1xuICAgICAgICB0aGlzLmNvbXBvc2l0aW9uRW5kZWRBdCA9IDA7XG4gICAgICAgIHRoaXMubW91c2VTZWxlY3Rpb24gPSBudWxsO1xuICAgICAgICBmb3IgKGxldCB0eXBlIGluIGhhbmRsZXJzKSB7XG4gICAgICAgICAgICBsZXQgaGFuZGxlciA9IGhhbmRsZXJzW3R5cGVdO1xuICAgICAgICAgICAgdmlldy5jb250ZW50RE9NLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFldmVudEJlbG9uZ3NUb0VkaXRvcih2aWV3LCBldmVudCkgfHwgdGhpcy5pZ25vcmVEdXJpbmdDb21wb3NpdGlvbihldmVudCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSBcImtleWRvd25cIiAmJiB0aGlzLmtleWRvd24odmlldywgZXZlbnQpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubXVzdEZsdXNoT2JzZXJ2ZXIoZXZlbnQpKVxuICAgICAgICAgICAgICAgICAgICB2aWV3Lm9ic2VydmVyLmZvcmNlRmx1c2goKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ydW5DdXN0b21IYW5kbGVycyh0eXBlLCB2aWV3LCBldmVudCkpXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVyKHZpZXcsIGV2ZW50KTtcbiAgICAgICAgICAgIH0sIGhhbmRsZXJPcHRpb25zW3R5cGVdKTtcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJlZEV2ZW50cy5wdXNoKHR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChicm93c2VyLmNocm9tZSAmJiBicm93c2VyLmNocm9tZV92ZXJzaW9uID09IDEwMikgeyAvLyBGSVhNRSByZW1vdmUgYXQgc29tZSBwb2ludFxuICAgICAgICAgICAgLy8gT24gQ2hyb21lIDEwMiwgdmlld3BvcnQgdXBkYXRlcyBzb21laG93IHN0b3Agd2hlZWwtYmFzZWRcbiAgICAgICAgICAgIC8vIHNjcm9sbGluZy4gVHVybmluZyBvZmYgcG9pbnRlciBldmVudHMgZHVyaW5nIHRoZSBzY3JvbGwgc2VlbXNcbiAgICAgICAgICAgIC8vIHRvIGF2b2lkIHRoZSBpc3N1ZS5cbiAgICAgICAgICAgIHZpZXcuc2Nyb2xsRE9NLmFkZEV2ZW50TGlzdGVuZXIoXCJ3aGVlbFwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hyb21lU2Nyb2xsSGFjayA8IDApXG4gICAgICAgICAgICAgICAgICAgIHZpZXcuY29udGVudERPTS5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuY2hyb21lU2Nyb2xsSGFjayk7XG4gICAgICAgICAgICAgICAgdGhpcy5jaHJvbWVTY3JvbGxIYWNrID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hyb21lU2Nyb2xsSGFjayA9IC0xO1xuICAgICAgICAgICAgICAgICAgICB2aWV3LmNvbnRlbnRET00uc3R5bGUucG9pbnRlckV2ZW50cyA9IFwiXCI7XG4gICAgICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICAgIH0sIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5vdGlmaWVkRm9jdXNlZCA9IHZpZXcuaGFzRm9jdXM7XG4gICAgICAgIC8vIE9uIFNhZmFyaSBhZGRpbmcgYW4gaW5wdXQgZXZlbnQgaGFuZGxlciBzb21laG93IHByZXZlbnRzIGFuXG4gICAgICAgIC8vIGlzc3VlIHdoZXJlIHRoZSBjb21wb3NpdGlvbiB2YW5pc2hlcyB3aGVuIHlvdSBwcmVzcyBlbnRlci5cbiAgICAgICAgaWYgKGJyb3dzZXIuc2FmYXJpKVxuICAgICAgICAgICAgdmlldy5jb250ZW50RE9NLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiBudWxsKTtcbiAgICB9XG4gICAgc2V0U2VsZWN0aW9uT3JpZ2luKG9yaWdpbikge1xuICAgICAgICB0aGlzLmxhc3RTZWxlY3Rpb25PcmlnaW4gPSBvcmlnaW47XG4gICAgICAgIHRoaXMubGFzdFNlbGVjdGlvblRpbWUgPSBEYXRlLm5vdygpO1xuICAgIH1cbiAgICBlbnN1cmVIYW5kbGVycyh2aWV3LCBwbHVnaW5zKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgbGV0IGhhbmRsZXJzO1xuICAgICAgICB0aGlzLmN1c3RvbUhhbmRsZXJzID0gW107XG4gICAgICAgIGZvciAobGV0IHBsdWdpbiBvZiBwbHVnaW5zKVxuICAgICAgICAgICAgaWYgKGhhbmRsZXJzID0gKF9hID0gcGx1Z2luLnVwZGF0ZSh2aWV3KS5zcGVjKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZG9tRXZlbnRIYW5kbGVycykge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9tSGFuZGxlcnMucHVzaCh7IHBsdWdpbjogcGx1Z2luLnZhbHVlLCBoYW5kbGVycyB9KTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB0eXBlIGluIGhhbmRsZXJzKVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yZWdpc3RlcmVkRXZlbnRzLmluZGV4T2YodHlwZSkgPCAwICYmIHR5cGUgIT0gXCJzY3JvbGxcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RlcmVkRXZlbnRzLnB1c2godHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3LmNvbnRlbnRET00uYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWV2ZW50QmVsb25nc1RvRWRpdG9yKHZpZXcsIGV2ZW50KSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJ1bkN1c3RvbUhhbmRsZXJzKHR5cGUsIHZpZXcsIGV2ZW50KSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgfVxuICAgIHJ1bkN1c3RvbUhhbmRsZXJzKHR5cGUsIHZpZXcsIGV2ZW50KSB7XG4gICAgICAgIGZvciAobGV0IHNldCBvZiB0aGlzLmN1c3RvbUhhbmRsZXJzKSB7XG4gICAgICAgICAgICBsZXQgaGFuZGxlciA9IHNldC5oYW5kbGVyc1t0eXBlXTtcbiAgICAgICAgICAgIGlmIChoYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIuY2FsbChzZXQucGx1Z2luLCBldmVudCwgdmlldykgfHwgZXZlbnQuZGVmYXVsdFByZXZlbnRlZClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBsb2dFeGNlcHRpb24odmlldy5zdGF0ZSwgZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcnVuU2Nyb2xsSGFuZGxlcnModmlldywgZXZlbnQpIHtcbiAgICAgICAgdGhpcy5sYXN0U2Nyb2xsVG9wID0gdmlldy5zY3JvbGxET00uc2Nyb2xsVG9wO1xuICAgICAgICB0aGlzLmxhc3RTY3JvbGxMZWZ0ID0gdmlldy5zY3JvbGxET00uc2Nyb2xsTGVmdDtcbiAgICAgICAgZm9yIChsZXQgc2V0IG9mIHRoaXMuY3VzdG9tSGFuZGxlcnMpIHtcbiAgICAgICAgICAgIGxldCBoYW5kbGVyID0gc2V0LmhhbmRsZXJzLnNjcm9sbDtcbiAgICAgICAgICAgIGlmIChoYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlci5jYWxsKHNldC5wbHVnaW4sIGV2ZW50LCB2aWV3KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nRXhjZXB0aW9uKHZpZXcuc3RhdGUsIGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBrZXlkb3duKHZpZXcsIGV2ZW50KSB7XG4gICAgICAgIC8vIE11c3QgYWx3YXlzIHJ1biwgZXZlbiBpZiBhIGN1c3RvbSBoYW5kbGVyIGhhbmRsZWQgdGhlIGV2ZW50XG4gICAgICAgIHRoaXMubGFzdEtleUNvZGUgPSBldmVudC5rZXlDb2RlO1xuICAgICAgICB0aGlzLmxhc3RLZXlUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gOSAmJiBEYXRlLm5vdygpIDwgdGhpcy5sYXN0RXNjUHJlc3MgKyAyMDAwKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIC8vIENocm9tZSBmb3IgQW5kcm9pZCB1c3VhbGx5IGRvZXNuJ3QgZmlyZSBwcm9wZXIga2V5IGV2ZW50cywgYnV0XG4gICAgICAgIC8vIG9jY2FzaW9uYWxseSBkb2VzLCB1c3VhbGx5IHN1cnJvdW5kZWQgYnkgYSBidW5jaCBvZiBjb21wbGljYXRlZFxuICAgICAgICAvLyBjb21wb3NpdGlvbiBjaGFuZ2VzLiBXaGVuIGFuIGVudGVyIG9yIGJhY2tzcGFjZSBrZXkgZXZlbnQgaXNcbiAgICAgICAgLy8gc2VlbiwgaG9sZCBvZmYgb24gaGFuZGxpbmcgRE9NIGV2ZW50cyBmb3IgYSBiaXQsIGFuZCB0aGVuXG4gICAgICAgIC8vIGRpc3BhdGNoIGl0LlxuICAgICAgICBpZiAoYnJvd3Nlci5hbmRyb2lkICYmIGJyb3dzZXIuY2hyb21lICYmICFldmVudC5zeW50aGV0aWMgJiZcbiAgICAgICAgICAgIChldmVudC5rZXlDb2RlID09IDEzIHx8IGV2ZW50LmtleUNvZGUgPT0gOCkpIHtcbiAgICAgICAgICAgIHZpZXcub2JzZXJ2ZXIuZGVsYXlBbmRyb2lkS2V5KGV2ZW50LmtleSwgZXZlbnQua2V5Q29kZSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQcmV2ZW50IHRoZSBkZWZhdWx0IGJlaGF2aW9yIG9mIEVudGVyIG9uIGlPUyBtYWtlcyB0aGVcbiAgICAgICAgLy8gdmlydHVhbCBrZXlib2FyZCBnZXQgc3R1Y2sgaW4gdGhlIHdyb25nIChsb3dlcmNhc2UpXG4gICAgICAgIC8vIHN0YXRlLiBTbyB3ZSBsZXQgaXQgZ28gdGhyb3VnaCwgYW5kIHRoZW4sIGluXG4gICAgICAgIC8vIGFwcGx5RE9NQ2hhbmdlLCBub3RpZnkga2V5IGhhbmRsZXJzIG9mIGl0IGFuZCByZXNldCB0b1xuICAgICAgICAvLyB0aGUgc3RhdGUgdGhleSBwcm9kdWNlLlxuICAgICAgICBsZXQgcGVuZGluZztcbiAgICAgICAgaWYgKGJyb3dzZXIuaW9zICYmICFldmVudC5zeW50aGV0aWMgJiYgIWV2ZW50LmFsdEtleSAmJiAhZXZlbnQubWV0YUtleSAmJlxuICAgICAgICAgICAgKChwZW5kaW5nID0gUGVuZGluZ0tleXMuZmluZChrZXkgPT4ga2V5LmtleUNvZGUgPT0gZXZlbnQua2V5Q29kZSkpICYmICFldmVudC5jdHJsS2V5IHx8XG4gICAgICAgICAgICAgICAgRW1hY3N5UGVuZGluZ0tleXMuaW5kZXhPZihldmVudC5rZXkpID4gLTEgJiYgZXZlbnQuY3RybEtleSAmJiAhZXZlbnQuc2hpZnRLZXkpKSB7XG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdJT1NLZXkgPSBwZW5kaW5nIHx8IGV2ZW50O1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmZsdXNoSU9TS2V5KHZpZXcpLCAyNTApO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmbHVzaElPU0tleSh2aWV3KSB7XG4gICAgICAgIGxldCBrZXkgPSB0aGlzLnBlbmRpbmdJT1NLZXk7XG4gICAgICAgIGlmICgha2V5KVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB0aGlzLnBlbmRpbmdJT1NLZXkgPSB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBkaXNwYXRjaEtleSh2aWV3LmNvbnRlbnRET00sIGtleS5rZXksIGtleS5rZXlDb2RlKTtcbiAgICB9XG4gICAgaWdub3JlRHVyaW5nQ29tcG9zaXRpb24oZXZlbnQpIHtcbiAgICAgICAgaWYgKCEvXmtleS8udGVzdChldmVudC50eXBlKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuY29tcG9zaW5nID4gMClcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAvLyBTZWUgaHR0cHM6Ly93d3cuc3R1bS5kZS8yMDE2LzA2LzI0L2hhbmRsaW5nLWltZS1ldmVudHMtaW4tamF2YXNjcmlwdC8uXG4gICAgICAgIC8vIE9uIHNvbWUgaW5wdXQgbWV0aG9kIGVkaXRvcnMgKElNRXMpLCB0aGUgRW50ZXIga2V5IGlzIHVzZWQgdG9cbiAgICAgICAgLy8gY29uZmlybSBjaGFyYWN0ZXIgc2VsZWN0aW9uLiBPbiBTYWZhcmksIHdoZW4gRW50ZXIgaXMgcHJlc3NlZCxcbiAgICAgICAgLy8gY29tcG9zaXRpb25lbmQgYW5kIGtleWRvd24gZXZlbnRzIGFyZSBzb21ldGltZXMgZW1pdHRlZCBpbiB0aGVcbiAgICAgICAgLy8gd3Jvbmcgb3JkZXIuIFRoZSBrZXkgZXZlbnQgc2hvdWxkIHN0aWxsIGJlIGlnbm9yZWQsIGV2ZW4gd2hlblxuICAgICAgICAvLyBpdCBoYXBwZW5zIGFmdGVyIHRoZSBjb21wb3NpdGlvbmVuZCBldmVudC5cbiAgICAgICAgaWYgKGJyb3dzZXIuc2FmYXJpICYmICFicm93c2VyLmlvcyAmJiBEYXRlLm5vdygpIC0gdGhpcy5jb21wb3NpdGlvbkVuZGVkQXQgPCAxMDApIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9zaXRpb25FbmRlZEF0ID0gMDtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgbXVzdEZsdXNoT2JzZXJ2ZXIoZXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIGV2ZW50LnR5cGUgPT0gXCJrZXlkb3duXCIgJiYgZXZlbnQua2V5Q29kZSAhPSAyMjk7XG4gICAgfVxuICAgIHN0YXJ0TW91c2VTZWxlY3Rpb24obW91c2VTZWxlY3Rpb24pIHtcbiAgICAgICAgaWYgKHRoaXMubW91c2VTZWxlY3Rpb24pXG4gICAgICAgICAgICB0aGlzLm1vdXNlU2VsZWN0aW9uLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5tb3VzZVNlbGVjdGlvbiA9IG1vdXNlU2VsZWN0aW9uO1xuICAgIH1cbiAgICB1cGRhdGUodXBkYXRlKSB7XG4gICAgICAgIGlmICh0aGlzLm1vdXNlU2VsZWN0aW9uKVxuICAgICAgICAgICAgdGhpcy5tb3VzZVNlbGVjdGlvbi51cGRhdGUodXBkYXRlKTtcbiAgICAgICAgaWYgKHVwZGF0ZS50cmFuc2FjdGlvbnMubGVuZ3RoKVxuICAgICAgICAgICAgdGhpcy5sYXN0S2V5Q29kZSA9IHRoaXMubGFzdFNlbGVjdGlvblRpbWUgPSAwO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBpZiAodGhpcy5tb3VzZVNlbGVjdGlvbilcbiAgICAgICAgICAgIHRoaXMubW91c2VTZWxlY3Rpb24uZGVzdHJveSgpO1xuICAgIH1cbn1cbmNvbnN0IFBlbmRpbmdLZXlzID0gW1xuICAgIHsga2V5OiBcIkJhY2tzcGFjZVwiLCBrZXlDb2RlOiA4LCBpbnB1dFR5cGU6IFwiZGVsZXRlQ29udGVudEJhY2t3YXJkXCIgfSxcbiAgICB7IGtleTogXCJFbnRlclwiLCBrZXlDb2RlOiAxMywgaW5wdXRUeXBlOiBcImluc2VydFBhcmFncmFwaFwiIH0sXG4gICAgeyBrZXk6IFwiRGVsZXRlXCIsIGtleUNvZGU6IDQ2LCBpbnB1dFR5cGU6IFwiZGVsZXRlQ29udGVudEZvcndhcmRcIiB9XG5dO1xuY29uc3QgRW1hY3N5UGVuZGluZ0tleXMgPSBcImR0aGtvXCI7XG4vLyBLZXkgY29kZXMgZm9yIG1vZGlmaWVyIGtleXNcbmNvbnN0IG1vZGlmaWVyQ29kZXMgPSBbMTYsIDE3LCAxOCwgMjAsIDkxLCA5MiwgMjI0LCAyMjVdO1xuY2xhc3MgTW91c2VTZWxlY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcsIHN0YXJ0RXZlbnQsIHN0eWxlLCBtdXN0U2VsZWN0KSB7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIHRoaXMuc3R5bGUgPSBzdHlsZTtcbiAgICAgICAgdGhpcy5tdXN0U2VsZWN0ID0gbXVzdFNlbGVjdDtcbiAgICAgICAgdGhpcy5sYXN0RXZlbnQgPSBzdGFydEV2ZW50O1xuICAgICAgICBsZXQgZG9jID0gdmlldy5jb250ZW50RE9NLm93bmVyRG9jdW1lbnQ7XG4gICAgICAgIGRvYy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMubW92ZSA9IHRoaXMubW92ZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMudXAgPSB0aGlzLnVwLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmV4dGVuZCA9IHN0YXJ0RXZlbnQuc2hpZnRLZXk7XG4gICAgICAgIHRoaXMubXVsdGlwbGUgPSB2aWV3LnN0YXRlLmZhY2V0KEVkaXRvclN0YXRlLmFsbG93TXVsdGlwbGVTZWxlY3Rpb25zKSAmJiBhZGRzU2VsZWN0aW9uUmFuZ2Uodmlldywgc3RhcnRFdmVudCk7XG4gICAgICAgIHRoaXMuZHJhZ01vdmUgPSBkcmFnTW92ZXNTZWxlY3Rpb24odmlldywgc3RhcnRFdmVudCk7XG4gICAgICAgIHRoaXMuZHJhZ2dpbmcgPSBpc0luUHJpbWFyeVNlbGVjdGlvbih2aWV3LCBzdGFydEV2ZW50KSAmJiBnZXRDbGlja1R5cGUoc3RhcnRFdmVudCkgPT0gMSA/IG51bGwgOiBmYWxzZTtcbiAgICAgICAgLy8gV2hlbiBjbGlja2luZyBvdXRzaWRlIG9mIHRoZSBzZWxlY3Rpb24sIGltbWVkaWF0ZWx5IGFwcGx5IHRoZVxuICAgICAgICAvLyBlZmZlY3Qgb2Ygc3RhcnRpbmcgdGhlIHNlbGVjdGlvblxuICAgICAgICBpZiAodGhpcy5kcmFnZ2luZyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHN0YXJ0RXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0KHN0YXJ0RXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG1vdmUoZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LmJ1dHRvbnMgPT0gMClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlc3Ryb3koKTtcbiAgICAgICAgaWYgKHRoaXMuZHJhZ2dpbmcgIT09IGZhbHNlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLnNlbGVjdCh0aGlzLmxhc3RFdmVudCA9IGV2ZW50KTtcbiAgICB9XG4gICAgdXAoZXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuZHJhZ2dpbmcgPT0gbnVsbClcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0KHRoaXMubGFzdEV2ZW50KTtcbiAgICAgICAgaWYgKCF0aGlzLmRyYWdnaW5nKVxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5kZXN0cm95KCk7XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGxldCBkb2MgPSB0aGlzLnZpZXcuY29udGVudERPTS5vd25lckRvY3VtZW50O1xuICAgICAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLm1vdmUpO1xuICAgICAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcy51cCk7XG4gICAgICAgIHRoaXMudmlldy5pbnB1dFN0YXRlLm1vdXNlU2VsZWN0aW9uID0gbnVsbDtcbiAgICB9XG4gICAgc2VsZWN0KGV2ZW50KSB7XG4gICAgICAgIGxldCBzZWxlY3Rpb24gPSB0aGlzLnN0eWxlLmdldChldmVudCwgdGhpcy5leHRlbmQsIHRoaXMubXVsdGlwbGUpO1xuICAgICAgICBpZiAodGhpcy5tdXN0U2VsZWN0IHx8ICFzZWxlY3Rpb24uZXEodGhpcy52aWV3LnN0YXRlLnNlbGVjdGlvbikgfHxcbiAgICAgICAgICAgIHNlbGVjdGlvbi5tYWluLmFzc29jICE9IHRoaXMudmlldy5zdGF0ZS5zZWxlY3Rpb24ubWFpbi5hc3NvYylcbiAgICAgICAgICAgIHRoaXMudmlldy5kaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uLFxuICAgICAgICAgICAgICAgIHVzZXJFdmVudDogXCJzZWxlY3QucG9pbnRlclwiLFxuICAgICAgICAgICAgICAgIHNjcm9sbEludG9WaWV3OiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tdXN0U2VsZWN0ID0gZmFsc2U7XG4gICAgfVxuICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgaWYgKHVwZGF0ZS5kb2NDaGFuZ2VkICYmIHRoaXMuZHJhZ2dpbmcpXG4gICAgICAgICAgICB0aGlzLmRyYWdnaW5nID0gdGhpcy5kcmFnZ2luZy5tYXAodXBkYXRlLmNoYW5nZXMpO1xuICAgICAgICBpZiAodGhpcy5zdHlsZS51cGRhdGUodXBkYXRlKSlcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5zZWxlY3QodGhpcy5sYXN0RXZlbnQpLCAyMCk7XG4gICAgfVxufVxuZnVuY3Rpb24gYWRkc1NlbGVjdGlvblJhbmdlKHZpZXcsIGV2ZW50KSB7XG4gICAgbGV0IGZhY2V0ID0gdmlldy5zdGF0ZS5mYWNldChjbGlja0FkZHNTZWxlY3Rpb25SYW5nZSk7XG4gICAgcmV0dXJuIGZhY2V0Lmxlbmd0aCA/IGZhY2V0WzBdKGV2ZW50KSA6IGJyb3dzZXIubWFjID8gZXZlbnQubWV0YUtleSA6IGV2ZW50LmN0cmxLZXk7XG59XG5mdW5jdGlvbiBkcmFnTW92ZXNTZWxlY3Rpb24odmlldywgZXZlbnQpIHtcbiAgICBsZXQgZmFjZXQgPSB2aWV3LnN0YXRlLmZhY2V0KGRyYWdNb3Zlc1NlbGVjdGlvbiQxKTtcbiAgICByZXR1cm4gZmFjZXQubGVuZ3RoID8gZmFjZXRbMF0oZXZlbnQpIDogYnJvd3Nlci5tYWMgPyAhZXZlbnQuYWx0S2V5IDogIWV2ZW50LmN0cmxLZXk7XG59XG5mdW5jdGlvbiBpc0luUHJpbWFyeVNlbGVjdGlvbih2aWV3LCBldmVudCkge1xuICAgIGxldCB7IG1haW4gfSA9IHZpZXcuc3RhdGUuc2VsZWN0aW9uO1xuICAgIGlmIChtYWluLmVtcHR5KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgLy8gT24gYm91bmRhcnkgY2xpY2tzLCBjaGVjayB3aGV0aGVyIHRoZSBjb29yZGluYXRlcyBhcmUgaW5zaWRlIHRoZVxuICAgIC8vIHNlbGVjdGlvbidzIGNsaWVudCByZWN0YW5nbGVzXG4gICAgbGV0IHNlbCA9IGdldFNlbGVjdGlvbih2aWV3LnJvb3QpO1xuICAgIGlmICghc2VsIHx8IHNlbC5yYW5nZUNvdW50ID09IDApXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGxldCByZWN0cyA9IHNlbC5nZXRSYW5nZUF0KDApLmdldENsaWVudFJlY3RzKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZWN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgcmVjdCA9IHJlY3RzW2ldO1xuICAgICAgICBpZiAocmVjdC5sZWZ0IDw9IGV2ZW50LmNsaWVudFggJiYgcmVjdC5yaWdodCA+PSBldmVudC5jbGllbnRYICYmXG4gICAgICAgICAgICByZWN0LnRvcCA8PSBldmVudC5jbGllbnRZICYmIHJlY3QuYm90dG9tID49IGV2ZW50LmNsaWVudFkpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gZXZlbnRCZWxvbmdzVG9FZGl0b3IodmlldywgZXZlbnQpIHtcbiAgICBpZiAoIWV2ZW50LmJ1YmJsZXMpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGlmIChldmVudC5kZWZhdWx0UHJldmVudGVkKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgZm9yIChsZXQgbm9kZSA9IGV2ZW50LnRhcmdldCwgY1ZpZXc7IG5vZGUgIT0gdmlldy5jb250ZW50RE9NOyBub2RlID0gbm9kZS5wYXJlbnROb2RlKVxuICAgICAgICBpZiAoIW5vZGUgfHwgbm9kZS5ub2RlVHlwZSA9PSAxMSB8fCAoKGNWaWV3ID0gQ29udGVudFZpZXcuZ2V0KG5vZGUpKSAmJiBjVmlldy5pZ25vcmVFdmVudChldmVudCkpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xufVxuY29uc3QgaGFuZGxlcnMgPSAvKkBfX1BVUkVfXyovT2JqZWN0LmNyZWF0ZShudWxsKTtcbmNvbnN0IGhhbmRsZXJPcHRpb25zID0gLypAX19QVVJFX18qL09iamVjdC5jcmVhdGUobnVsbCk7XG4vLyBUaGlzIGlzIHZlcnkgY3J1ZGUsIGJ1dCB1bmZvcnR1bmF0ZWx5IGJvdGggdGhlc2UgYnJvd3NlcnMgX3ByZXRlbmRfXG4vLyB0aGF0IHRoZXkgaGF2ZSBhIGNsaXBib2FyZCBBUElcdTIwMTRhbGwgdGhlIG9iamVjdHMgYW5kIG1ldGhvZHMgYXJlXG4vLyB0aGVyZSwgdGhleSBqdXN0IGRvbid0IHdvcmssIGFuZCB0aGV5IGFyZSBoYXJkIHRvIHRlc3QuXG5jb25zdCBicm9rZW5DbGlwYm9hcmRBUEkgPSAoYnJvd3Nlci5pZSAmJiBicm93c2VyLmllX3ZlcnNpb24gPCAxNSkgfHxcbiAgICAoYnJvd3Nlci5pb3MgJiYgYnJvd3Nlci53ZWJraXRfdmVyc2lvbiA8IDYwNCk7XG5mdW5jdGlvbiBjYXB0dXJlUGFzdGUodmlldykge1xuICAgIGxldCBwYXJlbnQgPSB2aWV3LmRvbS5wYXJlbnROb2RlO1xuICAgIGlmICghcGFyZW50KVxuICAgICAgICByZXR1cm47XG4gICAgbGV0IHRhcmdldCA9IHBhcmVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIikpO1xuICAgIHRhcmdldC5zdHlsZS5jc3NUZXh0ID0gXCJwb3NpdGlvbjogZml4ZWQ7IGxlZnQ6IC0xMDAwMHB4OyB0b3A6IDEwcHhcIjtcbiAgICB0YXJnZXQuZm9jdXMoKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdmlldy5mb2N1cygpO1xuICAgICAgICB0YXJnZXQucmVtb3ZlKCk7XG4gICAgICAgIGRvUGFzdGUodmlldywgdGFyZ2V0LnZhbHVlKTtcbiAgICB9LCA1MCk7XG59XG5mdW5jdGlvbiBkb1Bhc3RlKHZpZXcsIGlucHV0KSB7XG4gICAgbGV0IHsgc3RhdGUgfSA9IHZpZXcsIGNoYW5nZXMsIGkgPSAxLCB0ZXh0ID0gc3RhdGUudG9UZXh0KGlucHV0KTtcbiAgICBsZXQgYnlMaW5lID0gdGV4dC5saW5lcyA9PSBzdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzLmxlbmd0aDtcbiAgICBsZXQgbGluZXdpc2UgPSBsYXN0TGluZXdpc2VDb3B5ICE9IG51bGwgJiYgc3RhdGUuc2VsZWN0aW9uLnJhbmdlcy5ldmVyeShyID0+IHIuZW1wdHkpICYmIGxhc3RMaW5ld2lzZUNvcHkgPT0gdGV4dC50b1N0cmluZygpO1xuICAgIGlmIChsaW5ld2lzZSkge1xuICAgICAgICBsZXQgbGFzdExpbmUgPSAtMTtcbiAgICAgICAgY2hhbmdlcyA9IHN0YXRlLmNoYW5nZUJ5UmFuZ2UocmFuZ2UgPT4ge1xuICAgICAgICAgICAgbGV0IGxpbmUgPSBzdGF0ZS5kb2MubGluZUF0KHJhbmdlLmZyb20pO1xuICAgICAgICAgICAgaWYgKGxpbmUuZnJvbSA9PSBsYXN0TGluZSlcbiAgICAgICAgICAgICAgICByZXR1cm4geyByYW5nZSB9O1xuICAgICAgICAgICAgbGFzdExpbmUgPSBsaW5lLmZyb207XG4gICAgICAgICAgICBsZXQgaW5zZXJ0ID0gc3RhdGUudG9UZXh0KChieUxpbmUgPyB0ZXh0LmxpbmUoaSsrKS50ZXh0IDogaW5wdXQpICsgc3RhdGUubGluZUJyZWFrKTtcbiAgICAgICAgICAgIHJldHVybiB7IGNoYW5nZXM6IHsgZnJvbTogbGluZS5mcm9tLCBpbnNlcnQgfSxcbiAgICAgICAgICAgICAgICByYW5nZTogRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihyYW5nZS5mcm9tICsgaW5zZXJ0Lmxlbmd0aCkgfTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGJ5TGluZSkge1xuICAgICAgICBjaGFuZ2VzID0gc3RhdGUuY2hhbmdlQnlSYW5nZShyYW5nZSA9PiB7XG4gICAgICAgICAgICBsZXQgbGluZSA9IHRleHQubGluZShpKyspO1xuICAgICAgICAgICAgcmV0dXJuIHsgY2hhbmdlczogeyBmcm9tOiByYW5nZS5mcm9tLCB0bzogcmFuZ2UudG8sIGluc2VydDogbGluZS50ZXh0IH0sXG4gICAgICAgICAgICAgICAgcmFuZ2U6IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IocmFuZ2UuZnJvbSArIGxpbmUubGVuZ3RoKSB9O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNoYW5nZXMgPSBzdGF0ZS5yZXBsYWNlU2VsZWN0aW9uKHRleHQpO1xuICAgIH1cbiAgICB2aWV3LmRpc3BhdGNoKGNoYW5nZXMsIHtcbiAgICAgICAgdXNlckV2ZW50OiBcImlucHV0LnBhc3RlXCIsXG4gICAgICAgIHNjcm9sbEludG9WaWV3OiB0cnVlXG4gICAgfSk7XG59XG5oYW5kbGVycy5rZXlkb3duID0gKHZpZXcsIGV2ZW50KSA9PiB7XG4gICAgdmlldy5pbnB1dFN0YXRlLnNldFNlbGVjdGlvbk9yaWdpbihcInNlbGVjdFwiKTtcbiAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSAyNylcbiAgICAgICAgdmlldy5pbnB1dFN0YXRlLmxhc3RFc2NQcmVzcyA9IERhdGUubm93KCk7XG4gICAgZWxzZSBpZiAobW9kaWZpZXJDb2Rlcy5pbmRleE9mKGV2ZW50LmtleUNvZGUpIDwgMClcbiAgICAgICAgdmlldy5pbnB1dFN0YXRlLmxhc3RFc2NQcmVzcyA9IDA7XG59O1xuaGFuZGxlcnMudG91Y2hzdGFydCA9ICh2aWV3LCBlKSA9PiB7XG4gICAgdmlldy5pbnB1dFN0YXRlLmxhc3RUb3VjaFRpbWUgPSBEYXRlLm5vdygpO1xuICAgIHZpZXcuaW5wdXRTdGF0ZS5zZXRTZWxlY3Rpb25PcmlnaW4oXCJzZWxlY3QucG9pbnRlclwiKTtcbn07XG5oYW5kbGVycy50b3VjaG1vdmUgPSB2aWV3ID0+IHtcbiAgICB2aWV3LmlucHV0U3RhdGUuc2V0U2VsZWN0aW9uT3JpZ2luKFwic2VsZWN0LnBvaW50ZXJcIik7XG59O1xuaGFuZGxlck9wdGlvbnMudG91Y2hzdGFydCA9IGhhbmRsZXJPcHRpb25zLnRvdWNobW92ZSA9IHsgcGFzc2l2ZTogdHJ1ZSB9O1xuaGFuZGxlcnMubW91c2Vkb3duID0gKHZpZXcsIGV2ZW50KSA9PiB7XG4gICAgdmlldy5vYnNlcnZlci5mbHVzaCgpO1xuICAgIGlmICh2aWV3LmlucHV0U3RhdGUubGFzdFRvdWNoVGltZSA+IERhdGUubm93KCkgLSAyMDAwKVxuICAgICAgICByZXR1cm47IC8vIElnbm9yZSB0b3VjaCBpbnRlcmFjdGlvblxuICAgIGxldCBzdHlsZSA9IG51bGw7XG4gICAgZm9yIChsZXQgbWFrZVN0eWxlIG9mIHZpZXcuc3RhdGUuZmFjZXQobW91c2VTZWxlY3Rpb25TdHlsZSkpIHtcbiAgICAgICAgc3R5bGUgPSBtYWtlU3R5bGUodmlldywgZXZlbnQpO1xuICAgICAgICBpZiAoc3R5bGUpXG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgaWYgKCFzdHlsZSAmJiBldmVudC5idXR0b24gPT0gMClcbiAgICAgICAgc3R5bGUgPSBiYXNpY01vdXNlU2VsZWN0aW9uKHZpZXcsIGV2ZW50KTtcbiAgICBpZiAoc3R5bGUpIHtcbiAgICAgICAgbGV0IG11c3RGb2N1cyA9IHZpZXcucm9vdC5hY3RpdmVFbGVtZW50ICE9IHZpZXcuY29udGVudERPTTtcbiAgICAgICAgaWYgKG11c3RGb2N1cylcbiAgICAgICAgICAgIHZpZXcub2JzZXJ2ZXIuaWdub3JlKCgpID0+IGZvY3VzUHJldmVudFNjcm9sbCh2aWV3LmNvbnRlbnRET00pKTtcbiAgICAgICAgdmlldy5pbnB1dFN0YXRlLnN0YXJ0TW91c2VTZWxlY3Rpb24obmV3IE1vdXNlU2VsZWN0aW9uKHZpZXcsIGV2ZW50LCBzdHlsZSwgbXVzdEZvY3VzKSk7XG4gICAgfVxufTtcbmZ1bmN0aW9uIHJhbmdlRm9yQ2xpY2sodmlldywgcG9zLCBiaWFzLCB0eXBlKSB7XG4gICAgaWYgKHR5cGUgPT0gMSkgeyAvLyBTaW5nbGUgY2xpY2tcbiAgICAgICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5jdXJzb3IocG9zLCBiaWFzKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSA9PSAyKSB7IC8vIERvdWJsZSBjbGlja1xuICAgICAgICByZXR1cm4gZ3JvdXBBdCh2aWV3LnN0YXRlLCBwb3MsIGJpYXMpO1xuICAgIH1cbiAgICBlbHNlIHsgLy8gVHJpcGxlIGNsaWNrXG4gICAgICAgIGxldCB2aXN1YWwgPSBMaW5lVmlldy5maW5kKHZpZXcuZG9jVmlldywgcG9zKSwgbGluZSA9IHZpZXcuc3RhdGUuZG9jLmxpbmVBdCh2aXN1YWwgPyB2aXN1YWwucG9zQXRFbmQgOiBwb3MpO1xuICAgICAgICBsZXQgZnJvbSA9IHZpc3VhbCA/IHZpc3VhbC5wb3NBdFN0YXJ0IDogbGluZS5mcm9tLCB0byA9IHZpc3VhbCA/IHZpc3VhbC5wb3NBdEVuZCA6IGxpbmUudG87XG4gICAgICAgIGlmICh0byA8IHZpZXcuc3RhdGUuZG9jLmxlbmd0aCAmJiB0byA9PSBsaW5lLnRvKVxuICAgICAgICAgICAgdG8rKztcbiAgICAgICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5yYW5nZShmcm9tLCB0byk7XG4gICAgfVxufVxubGV0IGluc2lkZVkgPSAoeSwgcmVjdCkgPT4geSA+PSByZWN0LnRvcCAmJiB5IDw9IHJlY3QuYm90dG9tO1xubGV0IGluc2lkZSA9ICh4LCB5LCByZWN0KSA9PiBpbnNpZGVZKHksIHJlY3QpICYmIHggPj0gcmVjdC5sZWZ0ICYmIHggPD0gcmVjdC5yaWdodDtcbi8vIFRyeSB0byBkZXRlcm1pbmUsIGZvciB0aGUgZ2l2ZW4gY29vcmRpbmF0ZXMsIGFzc29jaWF0ZWQgd2l0aCB0aGVcbi8vIGdpdmVuIHBvc2l0aW9uLCB3aGV0aGVyIHRoZXkgYXJlIHJlbGF0ZWQgdG8gdGhlIGVsZW1lbnQgYmVmb3JlIG9yXG4vLyB0aGUgZWxlbWVudCBhZnRlciB0aGUgcG9zaXRpb24uXG5mdW5jdGlvbiBmaW5kUG9zaXRpb25TaWRlKHZpZXcsIHBvcywgeCwgeSkge1xuICAgIGxldCBsaW5lID0gTGluZVZpZXcuZmluZCh2aWV3LmRvY1ZpZXcsIHBvcyk7XG4gICAgaWYgKCFsaW5lKVxuICAgICAgICByZXR1cm4gMTtcbiAgICBsZXQgb2ZmID0gcG9zIC0gbGluZS5wb3NBdFN0YXJ0O1xuICAgIC8vIExpbmUgYm91bmRhcmllcyBwb2ludCBpbnRvIHRoZSBsaW5lXG4gICAgaWYgKG9mZiA9PSAwKVxuICAgICAgICByZXR1cm4gMTtcbiAgICBpZiAob2ZmID09IGxpbmUubGVuZ3RoKVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgLy8gUG9zaXRpb25zIG9uIHRvcCBvZiBhbiBlbGVtZW50IHBvaW50IGF0IHRoYXQgZWxlbWVudFxuICAgIGxldCBiZWZvcmUgPSBsaW5lLmNvb3Jkc0F0KG9mZiwgLTEpO1xuICAgIGlmIChiZWZvcmUgJiYgaW5zaWRlKHgsIHksIGJlZm9yZSkpXG4gICAgICAgIHJldHVybiAtMTtcbiAgICBsZXQgYWZ0ZXIgPSBsaW5lLmNvb3Jkc0F0KG9mZiwgMSk7XG4gICAgaWYgKGFmdGVyICYmIGluc2lkZSh4LCB5LCBhZnRlcikpXG4gICAgICAgIHJldHVybiAxO1xuICAgIC8vIFRoaXMgaXMgcHJvYmFibHkgYSBsaW5lIHdyYXAgcG9pbnQuIFBpY2sgYmVmb3JlIGlmIHRoZSBwb2ludCBpc1xuICAgIC8vIGJlc2lkZSBpdC5cbiAgICByZXR1cm4gYmVmb3JlICYmIGluc2lkZVkoeSwgYmVmb3JlKSA/IC0xIDogMTtcbn1cbmZ1bmN0aW9uIHF1ZXJ5UG9zKHZpZXcsIGV2ZW50KSB7XG4gICAgbGV0IHBvcyA9IHZpZXcucG9zQXRDb29yZHMoeyB4OiBldmVudC5jbGllbnRYLCB5OiBldmVudC5jbGllbnRZIH0sIGZhbHNlKTtcbiAgICByZXR1cm4geyBwb3MsIGJpYXM6IGZpbmRQb3NpdGlvblNpZGUodmlldywgcG9zLCBldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKSB9O1xufVxuY29uc3QgQmFkTW91c2VEZXRhaWwgPSBicm93c2VyLmllICYmIGJyb3dzZXIuaWVfdmVyc2lvbiA8PSAxMTtcbmxldCBsYXN0TW91c2VEb3duID0gbnVsbCwgbGFzdE1vdXNlRG93bkNvdW50ID0gMCwgbGFzdE1vdXNlRG93blRpbWUgPSAwO1xuZnVuY3Rpb24gZ2V0Q2xpY2tUeXBlKGV2ZW50KSB7XG4gICAgaWYgKCFCYWRNb3VzZURldGFpbClcbiAgICAgICAgcmV0dXJuIGV2ZW50LmRldGFpbDtcbiAgICBsZXQgbGFzdCA9IGxhc3RNb3VzZURvd24sIGxhc3RUaW1lID0gbGFzdE1vdXNlRG93blRpbWU7XG4gICAgbGFzdE1vdXNlRG93biA9IGV2ZW50O1xuICAgIGxhc3RNb3VzZURvd25UaW1lID0gRGF0ZS5ub3coKTtcbiAgICByZXR1cm4gbGFzdE1vdXNlRG93bkNvdW50ID0gIWxhc3QgfHwgKGxhc3RUaW1lID4gRGF0ZS5ub3coKSAtIDQwMCAmJiBNYXRoLmFicyhsYXN0LmNsaWVudFggLSBldmVudC5jbGllbnRYKSA8IDIgJiZcbiAgICAgICAgTWF0aC5hYnMobGFzdC5jbGllbnRZIC0gZXZlbnQuY2xpZW50WSkgPCAyKSA/IChsYXN0TW91c2VEb3duQ291bnQgKyAxKSAlIDMgOiAxO1xufVxuZnVuY3Rpb24gYmFzaWNNb3VzZVNlbGVjdGlvbih2aWV3LCBldmVudCkge1xuICAgIGxldCBzdGFydCA9IHF1ZXJ5UG9zKHZpZXcsIGV2ZW50KSwgdHlwZSA9IGdldENsaWNrVHlwZShldmVudCk7XG4gICAgbGV0IHN0YXJ0U2VsID0gdmlldy5zdGF0ZS5zZWxlY3Rpb247XG4gICAgbGV0IGxhc3QgPSBzdGFydCwgbGFzdEV2ZW50ID0gZXZlbnQ7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICAgICAgaWYgKHVwZGF0ZS5kb2NDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgc3RhcnQucG9zID0gdXBkYXRlLmNoYW5nZXMubWFwUG9zKHN0YXJ0LnBvcyk7XG4gICAgICAgICAgICAgICAgc3RhcnRTZWwgPSBzdGFydFNlbC5tYXAodXBkYXRlLmNoYW5nZXMpO1xuICAgICAgICAgICAgICAgIGxhc3RFdmVudCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGdldChldmVudCwgZXh0ZW5kLCBtdWx0aXBsZSkge1xuICAgICAgICAgICAgbGV0IGN1cjtcbiAgICAgICAgICAgIGlmIChsYXN0RXZlbnQgJiYgZXZlbnQuY2xpZW50WCA9PSBsYXN0RXZlbnQuY2xpZW50WCAmJiBldmVudC5jbGllbnRZID09IGxhc3RFdmVudC5jbGllbnRZKVxuICAgICAgICAgICAgICAgIGN1ciA9IGxhc3Q7XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdXIgPSBsYXN0ID0gcXVlcnlQb3ModmlldywgZXZlbnQpO1xuICAgICAgICAgICAgICAgIGxhc3RFdmVudCA9IGV2ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHJhbmdlID0gcmFuZ2VGb3JDbGljayh2aWV3LCBjdXIucG9zLCBjdXIuYmlhcywgdHlwZSk7XG4gICAgICAgICAgICBpZiAoc3RhcnQucG9zICE9IGN1ci5wb3MgJiYgIWV4dGVuZCkge1xuICAgICAgICAgICAgICAgIGxldCBzdGFydFJhbmdlID0gcmFuZ2VGb3JDbGljayh2aWV3LCBzdGFydC5wb3MsIHN0YXJ0LmJpYXMsIHR5cGUpO1xuICAgICAgICAgICAgICAgIGxldCBmcm9tID0gTWF0aC5taW4oc3RhcnRSYW5nZS5mcm9tLCByYW5nZS5mcm9tKSwgdG8gPSBNYXRoLm1heChzdGFydFJhbmdlLnRvLCByYW5nZS50byk7XG4gICAgICAgICAgICAgICAgcmFuZ2UgPSBmcm9tIDwgcmFuZ2UuZnJvbSA/IEVkaXRvclNlbGVjdGlvbi5yYW5nZShmcm9tLCB0bykgOiBFZGl0b3JTZWxlY3Rpb24ucmFuZ2UodG8sIGZyb20pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGV4dGVuZClcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhcnRTZWwucmVwbGFjZVJhbmdlKHN0YXJ0U2VsLm1haW4uZXh0ZW5kKHJhbmdlLmZyb20sIHJhbmdlLnRvKSk7XG4gICAgICAgICAgICBlbHNlIGlmIChtdWx0aXBsZSAmJiBzdGFydFNlbC5yYW5nZXMubGVuZ3RoID4gMSAmJiBzdGFydFNlbC5yYW5nZXMuc29tZShyID0+IHIuZXEocmFuZ2UpKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVtb3ZlUmFuZ2Uoc3RhcnRTZWwsIHJhbmdlKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKG11bHRpcGxlKVxuICAgICAgICAgICAgICAgIHJldHVybiBzdGFydFNlbC5hZGRSYW5nZShyYW5nZSk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5jcmVhdGUoW3JhbmdlXSk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuZnVuY3Rpb24gcmVtb3ZlUmFuZ2Uoc2VsLCByYW5nZSkge1xuICAgIGZvciAobGV0IGkgPSAwOzsgaSsrKSB7XG4gICAgICAgIGlmIChzZWwucmFuZ2VzW2ldLmVxKHJhbmdlKSlcbiAgICAgICAgICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24uY3JlYXRlKHNlbC5yYW5nZXMuc2xpY2UoMCwgaSkuY29uY2F0KHNlbC5yYW5nZXMuc2xpY2UoaSArIDEpKSwgc2VsLm1haW5JbmRleCA9PSBpID8gMCA6IHNlbC5tYWluSW5kZXggLSAoc2VsLm1haW5JbmRleCA+IGkgPyAxIDogMCkpO1xuICAgIH1cbn1cbmhhbmRsZXJzLmRyYWdzdGFydCA9ICh2aWV3LCBldmVudCkgPT4ge1xuICAgIGxldCB7IHNlbGVjdGlvbjogeyBtYWluIH0gfSA9IHZpZXcuc3RhdGU7XG4gICAgbGV0IHsgbW91c2VTZWxlY3Rpb24gfSA9IHZpZXcuaW5wdXRTdGF0ZTtcbiAgICBpZiAobW91c2VTZWxlY3Rpb24pXG4gICAgICAgIG1vdXNlU2VsZWN0aW9uLmRyYWdnaW5nID0gbWFpbjtcbiAgICBpZiAoZXZlbnQuZGF0YVRyYW5zZmVyKSB7XG4gICAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKFwiVGV4dFwiLCB2aWV3LnN0YXRlLnNsaWNlRG9jKG1haW4uZnJvbSwgbWFpbi50bykpO1xuICAgICAgICBldmVudC5kYXRhVHJhbnNmZXIuZWZmZWN0QWxsb3dlZCA9IFwiY29weU1vdmVcIjtcbiAgICB9XG59O1xuZnVuY3Rpb24gZHJvcFRleHQodmlldywgZXZlbnQsIHRleHQsIGRpcmVjdCkge1xuICAgIGlmICghdGV4dClcbiAgICAgICAgcmV0dXJuO1xuICAgIGxldCBkcm9wUG9zID0gdmlldy5wb3NBdENvb3Jkcyh7IHg6IGV2ZW50LmNsaWVudFgsIHk6IGV2ZW50LmNsaWVudFkgfSwgZmFsc2UpO1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgbGV0IHsgbW91c2VTZWxlY3Rpb24gfSA9IHZpZXcuaW5wdXRTdGF0ZTtcbiAgICBsZXQgZGVsID0gZGlyZWN0ICYmIG1vdXNlU2VsZWN0aW9uICYmIG1vdXNlU2VsZWN0aW9uLmRyYWdnaW5nICYmIG1vdXNlU2VsZWN0aW9uLmRyYWdNb3ZlID9cbiAgICAgICAgeyBmcm9tOiBtb3VzZVNlbGVjdGlvbi5kcmFnZ2luZy5mcm9tLCB0bzogbW91c2VTZWxlY3Rpb24uZHJhZ2dpbmcudG8gfSA6IG51bGw7XG4gICAgbGV0IGlucyA9IHsgZnJvbTogZHJvcFBvcywgaW5zZXJ0OiB0ZXh0IH07XG4gICAgbGV0IGNoYW5nZXMgPSB2aWV3LnN0YXRlLmNoYW5nZXMoZGVsID8gW2RlbCwgaW5zXSA6IGlucyk7XG4gICAgdmlldy5mb2N1cygpO1xuICAgIHZpZXcuZGlzcGF0Y2goe1xuICAgICAgICBjaGFuZ2VzLFxuICAgICAgICBzZWxlY3Rpb246IHsgYW5jaG9yOiBjaGFuZ2VzLm1hcFBvcyhkcm9wUG9zLCAtMSksIGhlYWQ6IGNoYW5nZXMubWFwUG9zKGRyb3BQb3MsIDEpIH0sXG4gICAgICAgIHVzZXJFdmVudDogZGVsID8gXCJtb3ZlLmRyb3BcIiA6IFwiaW5wdXQuZHJvcFwiXG4gICAgfSk7XG59XG5oYW5kbGVycy5kcm9wID0gKHZpZXcsIGV2ZW50KSA9PiB7XG4gICAgaWYgKCFldmVudC5kYXRhVHJhbnNmZXIpXG4gICAgICAgIHJldHVybjtcbiAgICBpZiAodmlldy5zdGF0ZS5yZWFkT25seSlcbiAgICAgICAgcmV0dXJuIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgbGV0IGZpbGVzID0gZXZlbnQuZGF0YVRyYW5zZmVyLmZpbGVzO1xuICAgIGlmIChmaWxlcyAmJiBmaWxlcy5sZW5ndGgpIHsgLy8gRm9yIGEgZmlsZSBkcm9wLCByZWFkIHRoZSBmaWxlJ3MgdGV4dC5cbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgbGV0IHRleHQgPSBBcnJheShmaWxlcy5sZW5ndGgpLCByZWFkID0gMDtcbiAgICAgICAgbGV0IGZpbmlzaEZpbGUgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoKytyZWFkID09IGZpbGVzLmxlbmd0aClcbiAgICAgICAgICAgICAgICBkcm9wVGV4dCh2aWV3LCBldmVudCwgdGV4dC5maWx0ZXIocyA9PiBzICE9IG51bGwpLmpvaW4odmlldy5zdGF0ZS5saW5lQnJlYWspLCBmYWxzZSk7XG4gICAgICAgIH07XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcjtcbiAgICAgICAgICAgIHJlYWRlci5vbmVycm9yID0gZmluaXNoRmlsZTtcbiAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEvW1xceDAwLVxceDA4XFx4MGUtXFx4MWZdezJ9Ly50ZXN0KHJlYWRlci5yZXN1bHQpKVxuICAgICAgICAgICAgICAgICAgICB0ZXh0W2ldID0gcmVhZGVyLnJlc3VsdDtcbiAgICAgICAgICAgICAgICBmaW5pc2hGaWxlKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZXNbaV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBkcm9wVGV4dCh2aWV3LCBldmVudCwgZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoXCJUZXh0XCIpLCB0cnVlKTtcbiAgICB9XG59O1xuaGFuZGxlcnMucGFzdGUgPSAodmlldywgZXZlbnQpID0+IHtcbiAgICBpZiAodmlldy5zdGF0ZS5yZWFkT25seSlcbiAgICAgICAgcmV0dXJuIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmlldy5vYnNlcnZlci5mbHVzaCgpO1xuICAgIGxldCBkYXRhID0gYnJva2VuQ2xpcGJvYXJkQVBJID8gbnVsbCA6IGV2ZW50LmNsaXBib2FyZERhdGE7XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgICAgZG9QYXN0ZSh2aWV3LCBkYXRhLmdldERhdGEoXCJ0ZXh0L3BsYWluXCIpKTtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNhcHR1cmVQYXN0ZSh2aWV3KTtcbiAgICB9XG59O1xuZnVuY3Rpb24gY2FwdHVyZUNvcHkodmlldywgdGV4dCkge1xuICAgIC8vIFRoZSBleHRyYSB3cmFwcGVyIGlzIHNvbWVob3cgbmVjZXNzYXJ5IG9uIElFL0VkZ2UgdG8gcHJldmVudCB0aGVcbiAgICAvLyBjb250ZW50IGZyb20gYmVpbmcgbWFuZ2xlZCB3aGVuIGl0IGlzIHB1dCBvbnRvIHRoZSBjbGlwYm9hcmRcbiAgICBsZXQgcGFyZW50ID0gdmlldy5kb20ucGFyZW50Tm9kZTtcbiAgICBpZiAoIXBhcmVudClcbiAgICAgICAgcmV0dXJuO1xuICAgIGxldCB0YXJnZXQgPSBwYXJlbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpKTtcbiAgICB0YXJnZXQuc3R5bGUuY3NzVGV4dCA9IFwicG9zaXRpb246IGZpeGVkOyBsZWZ0OiAtMTAwMDBweDsgdG9wOiAxMHB4XCI7XG4gICAgdGFyZ2V0LnZhbHVlID0gdGV4dDtcbiAgICB0YXJnZXQuZm9jdXMoKTtcbiAgICB0YXJnZXQuc2VsZWN0aW9uRW5kID0gdGV4dC5sZW5ndGg7XG4gICAgdGFyZ2V0LnNlbGVjdGlvblN0YXJ0ID0gMDtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGFyZ2V0LnJlbW92ZSgpO1xuICAgICAgICB2aWV3LmZvY3VzKCk7XG4gICAgfSwgNTApO1xufVxuZnVuY3Rpb24gY29waWVkUmFuZ2Uoc3RhdGUpIHtcbiAgICBsZXQgY29udGVudCA9IFtdLCByYW5nZXMgPSBbXSwgbGluZXdpc2UgPSBmYWxzZTtcbiAgICBmb3IgKGxldCByYW5nZSBvZiBzdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzKVxuICAgICAgICBpZiAoIXJhbmdlLmVtcHR5KSB7XG4gICAgICAgICAgICBjb250ZW50LnB1c2goc3RhdGUuc2xpY2VEb2MocmFuZ2UuZnJvbSwgcmFuZ2UudG8pKTtcbiAgICAgICAgICAgIHJhbmdlcy5wdXNoKHJhbmdlKTtcbiAgICAgICAgfVxuICAgIGlmICghY29udGVudC5sZW5ndGgpIHtcbiAgICAgICAgLy8gTm90aGluZyBzZWxlY3RlZCwgZG8gYSBsaW5lLXdpc2UgY29weVxuICAgICAgICBsZXQgdXB0byA9IC0xO1xuICAgICAgICBmb3IgKGxldCB7IGZyb20gfSBvZiBzdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzKSB7XG4gICAgICAgICAgICBsZXQgbGluZSA9IHN0YXRlLmRvYy5saW5lQXQoZnJvbSk7XG4gICAgICAgICAgICBpZiAobGluZS5udW1iZXIgPiB1cHRvKSB7XG4gICAgICAgICAgICAgICAgY29udGVudC5wdXNoKGxpbmUudGV4dCk7XG4gICAgICAgICAgICAgICAgcmFuZ2VzLnB1c2goeyBmcm9tOiBsaW5lLmZyb20sIHRvOiBNYXRoLm1pbihzdGF0ZS5kb2MubGVuZ3RoLCBsaW5lLnRvICsgMSkgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cHRvID0gbGluZS5udW1iZXI7XG4gICAgICAgIH1cbiAgICAgICAgbGluZXdpc2UgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4geyB0ZXh0OiBjb250ZW50LmpvaW4oc3RhdGUubGluZUJyZWFrKSwgcmFuZ2VzLCBsaW5ld2lzZSB9O1xufVxubGV0IGxhc3RMaW5ld2lzZUNvcHkgPSBudWxsO1xuaGFuZGxlcnMuY29weSA9IGhhbmRsZXJzLmN1dCA9ICh2aWV3LCBldmVudCkgPT4ge1xuICAgIGxldCB7IHRleHQsIHJhbmdlcywgbGluZXdpc2UgfSA9IGNvcGllZFJhbmdlKHZpZXcuc3RhdGUpO1xuICAgIGlmICghdGV4dCAmJiAhbGluZXdpc2UpXG4gICAgICAgIHJldHVybjtcbiAgICBsYXN0TGluZXdpc2VDb3B5ID0gbGluZXdpc2UgPyB0ZXh0IDogbnVsbDtcbiAgICBsZXQgZGF0YSA9IGJyb2tlbkNsaXBib2FyZEFQSSA/IG51bGwgOiBldmVudC5jbGlwYm9hcmREYXRhO1xuICAgIGlmIChkYXRhKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGRhdGEuY2xlYXJEYXRhKCk7XG4gICAgICAgIGRhdGEuc2V0RGF0YShcInRleHQvcGxhaW5cIiwgdGV4dCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjYXB0dXJlQ29weSh2aWV3LCB0ZXh0KTtcbiAgICB9XG4gICAgaWYgKGV2ZW50LnR5cGUgPT0gXCJjdXRcIiAmJiAhdmlldy5zdGF0ZS5yZWFkT25seSlcbiAgICAgICAgdmlldy5kaXNwYXRjaCh7XG4gICAgICAgICAgICBjaGFuZ2VzOiByYW5nZXMsXG4gICAgICAgICAgICBzY3JvbGxJbnRvVmlldzogdHJ1ZSxcbiAgICAgICAgICAgIHVzZXJFdmVudDogXCJkZWxldGUuY3V0XCJcbiAgICAgICAgfSk7XG59O1xuZnVuY3Rpb24gdXBkYXRlRm9yRm9jdXNDaGFuZ2Uodmlldykge1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAodmlldy5oYXNGb2N1cyAhPSB2aWV3LmlucHV0U3RhdGUubm90aWZpZWRGb2N1c2VkKVxuICAgICAgICAgICAgdmlldy51cGRhdGUoW10pO1xuICAgIH0sIDEwKTtcbn1cbmhhbmRsZXJzLmZvY3VzID0gdmlldyA9PiB7XG4gICAgdmlldy5pbnB1dFN0YXRlLmxhc3RGb2N1c1RpbWUgPSBEYXRlLm5vdygpO1xuICAgIC8vIFdoZW4gZm9jdXNpbmcgcmVzZXQgdGhlIHNjcm9sbCBwb3NpdGlvbiwgbW92ZSBpdCBiYWNrIHRvIHdoZXJlIGl0IHdhc1xuICAgIGlmICghdmlldy5zY3JvbGxET00uc2Nyb2xsVG9wICYmICh2aWV3LmlucHV0U3RhdGUubGFzdFNjcm9sbFRvcCB8fCB2aWV3LmlucHV0U3RhdGUubGFzdFNjcm9sbExlZnQpKSB7XG4gICAgICAgIHZpZXcuc2Nyb2xsRE9NLnNjcm9sbFRvcCA9IHZpZXcuaW5wdXRTdGF0ZS5sYXN0U2Nyb2xsVG9wO1xuICAgICAgICB2aWV3LnNjcm9sbERPTS5zY3JvbGxMZWZ0ID0gdmlldy5pbnB1dFN0YXRlLmxhc3RTY3JvbGxMZWZ0O1xuICAgIH1cbiAgICB1cGRhdGVGb3JGb2N1c0NoYW5nZSh2aWV3KTtcbn07XG5oYW5kbGVycy5ibHVyID0gdmlldyA9PiB7XG4gICAgdmlldy5vYnNlcnZlci5jbGVhclNlbGVjdGlvblJhbmdlKCk7XG4gICAgdXBkYXRlRm9yRm9jdXNDaGFuZ2Uodmlldyk7XG59O1xuaGFuZGxlcnMuY29tcG9zaXRpb25zdGFydCA9IGhhbmRsZXJzLmNvbXBvc2l0aW9udXBkYXRlID0gdmlldyA9PiB7XG4gICAgaWYgKHZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpdGlvbkZpcnN0Q2hhbmdlID09IG51bGwpXG4gICAgICAgIHZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpdGlvbkZpcnN0Q2hhbmdlID0gdHJ1ZTtcbiAgICBpZiAodmlldy5pbnB1dFN0YXRlLmNvbXBvc2luZyA8IDApIHtcbiAgICAgICAgLy8gRklYTUUgcG9zc2libHkgc2V0IGEgdGltZW91dCB0byBjbGVhciBpdCBhZ2FpbiBvbiBBbmRyb2lkXG4gICAgICAgIHZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpbmcgPSAwO1xuICAgIH1cbn07XG5oYW5kbGVycy5jb21wb3NpdGlvbmVuZCA9IHZpZXcgPT4ge1xuICAgIHZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpbmcgPSAtMTtcbiAgICB2aWV3LmlucHV0U3RhdGUuY29tcG9zaXRpb25FbmRlZEF0ID0gRGF0ZS5ub3coKTtcbiAgICB2aWV3LmlucHV0U3RhdGUuY29tcG9zaXRpb25GaXJzdENoYW5nZSA9IG51bGw7XG4gICAgaWYgKGJyb3dzZXIuY2hyb21lICYmIGJyb3dzZXIuYW5kcm9pZClcbiAgICAgICAgdmlldy5vYnNlcnZlci5mbHVzaFNvb24oKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgLy8gRm9yY2UgdGhlIGNvbXBvc2l0aW9uIHN0YXRlIHRvIGJlIGNsZWFyZWQgaWYgaXQgaGFzbid0IGFscmVhZHkgYmVlblxuICAgICAgICBpZiAodmlldy5pbnB1dFN0YXRlLmNvbXBvc2luZyA8IDAgJiYgdmlldy5kb2NWaWV3LmNvbXBvc2l0aW9uRGVjby5zaXplKVxuICAgICAgICAgICAgdmlldy51cGRhdGUoW10pO1xuICAgIH0sIDUwKTtcbn07XG5oYW5kbGVycy5jb250ZXh0bWVudSA9IHZpZXcgPT4ge1xuICAgIHZpZXcuaW5wdXRTdGF0ZS5sYXN0Q29udGV4dE1lbnUgPSBEYXRlLm5vdygpO1xufTtcbmhhbmRsZXJzLmJlZm9yZWlucHV0ID0gKHZpZXcsIGV2ZW50KSA9PiB7XG4gICAgdmFyIF9hO1xuICAgIC8vIEJlY2F1c2UgQ2hyb21lIEFuZHJvaWQgZG9lc24ndCBmaXJlIHVzZWZ1bCBrZXkgZXZlbnRzLCB1c2VcbiAgICAvLyBiZWZvcmVpbnB1dCB0byBkZXRlY3QgYmFja3NwYWNlIChhbmQgcG9zc2libHkgZW50ZXIgYW5kIGRlbGV0ZSxcbiAgICAvLyBidXQgdGhvc2UgdXN1YWxseSBkb24ndCBldmVuIHNlZW0gdG8gZmlyZSBiZWZvcmVpbnB1dCBldmVudHMgYXRcbiAgICAvLyB0aGUgbW9tZW50KSBhbmQgZmFrZSBhIGtleSBldmVudCBmb3IgaXQuXG4gICAgLy9cbiAgICAvLyAocHJldmVudERlZmF1bHQgb24gYmVmb3JlaW5wdXQsIHRob3VnaCBzdXBwb3J0ZWQgaW4gdGhlIHNwZWMsXG4gICAgLy8gc2VlbXMgdG8gZG8gbm90aGluZyBhdCBhbGwgb24gQ2hyb21lKS5cbiAgICBsZXQgcGVuZGluZztcbiAgICBpZiAoYnJvd3Nlci5jaHJvbWUgJiYgYnJvd3Nlci5hbmRyb2lkICYmIChwZW5kaW5nID0gUGVuZGluZ0tleXMuZmluZChrZXkgPT4ga2V5LmlucHV0VHlwZSA9PSBldmVudC5pbnB1dFR5cGUpKSkge1xuICAgICAgICB2aWV3Lm9ic2VydmVyLmRlbGF5QW5kcm9pZEtleShwZW5kaW5nLmtleSwgcGVuZGluZy5rZXlDb2RlKTtcbiAgICAgICAgaWYgKHBlbmRpbmcua2V5ID09IFwiQmFja3NwYWNlXCIgfHwgcGVuZGluZy5rZXkgPT0gXCJEZWxldGVcIikge1xuICAgICAgICAgICAgbGV0IHN0YXJ0Vmlld0hlaWdodCA9ICgoX2EgPSB3aW5kb3cudmlzdWFsVmlld3BvcnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5oZWlnaHQpIHx8IDA7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgLy8gQmFja3NwYWNpbmcgbmVhciB1bmVkaXRhYmxlIG5vZGVzIG9uIENocm9tZSBBbmRyb2lkIHNvbWV0aW1lc1xuICAgICAgICAgICAgICAgIC8vIGNsb3NlcyB0aGUgdmlydHVhbCBrZXlib2FyZC4gVGhpcyB0cmllcyB0byBjcnVkZWx5IGRldGVjdFxuICAgICAgICAgICAgICAgIC8vIHRoYXQgYW5kIHJlZm9jdXMgdG8gZ2V0IGl0IGJhY2suXG4gICAgICAgICAgICAgICAgaWYgKCgoKF9hID0gd2luZG93LnZpc3VhbFZpZXdwb3J0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaGVpZ2h0KSB8fCAwKSA+IHN0YXJ0Vmlld0hlaWdodCArIDEwICYmIHZpZXcuaGFzRm9jdXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5jb250ZW50RE9NLmJsdXIoKTtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5mb2N1cygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5jb25zdCB3cmFwcGluZ1doaXRlU3BhY2UgPSBbXCJwcmUtd3JhcFwiLCBcIm5vcm1hbFwiLCBcInByZS1saW5lXCIsIFwiYnJlYWstc3BhY2VzXCJdO1xuY2xhc3MgSGVpZ2h0T3JhY2xlIHtcbiAgICBjb25zdHJ1Y3RvcihsaW5lV3JhcHBpbmcpIHtcbiAgICAgICAgdGhpcy5saW5lV3JhcHBpbmcgPSBsaW5lV3JhcHBpbmc7XG4gICAgICAgIHRoaXMuZG9jID0gVGV4dC5lbXB0eTtcbiAgICAgICAgdGhpcy5oZWlnaHRTYW1wbGVzID0ge307XG4gICAgICAgIHRoaXMubGluZUhlaWdodCA9IDE0O1xuICAgICAgICB0aGlzLmNoYXJXaWR0aCA9IDc7XG4gICAgICAgIHRoaXMubGluZUxlbmd0aCA9IDMwO1xuICAgICAgICAvLyBVc2VkIHRvIHRyYWNrLCBkdXJpbmcgdXBkYXRlSGVpZ2h0LCBpZiBhbnkgYWN0dWFsIGhlaWdodHMgY2hhbmdlZFxuICAgICAgICB0aGlzLmhlaWdodENoYW5nZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgaGVpZ2h0Rm9yR2FwKGZyb20sIHRvKSB7XG4gICAgICAgIGxldCBsaW5lcyA9IHRoaXMuZG9jLmxpbmVBdCh0bykubnVtYmVyIC0gdGhpcy5kb2MubGluZUF0KGZyb20pLm51bWJlciArIDE7XG4gICAgICAgIGlmICh0aGlzLmxpbmVXcmFwcGluZylcbiAgICAgICAgICAgIGxpbmVzICs9IE1hdGguY2VpbCgoKHRvIC0gZnJvbSkgLSAobGluZXMgKiB0aGlzLmxpbmVMZW5ndGggKiAwLjUpKSAvIHRoaXMubGluZUxlbmd0aCk7XG4gICAgICAgIHJldHVybiB0aGlzLmxpbmVIZWlnaHQgKiBsaW5lcztcbiAgICB9XG4gICAgaGVpZ2h0Rm9yTGluZShsZW5ndGgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmxpbmVXcmFwcGluZylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxpbmVIZWlnaHQ7XG4gICAgICAgIGxldCBsaW5lcyA9IDEgKyBNYXRoLm1heCgwLCBNYXRoLmNlaWwoKGxlbmd0aCAtIHRoaXMubGluZUxlbmd0aCkgLyAodGhpcy5saW5lTGVuZ3RoIC0gNSkpKTtcbiAgICAgICAgcmV0dXJuIGxpbmVzICogdGhpcy5saW5lSGVpZ2h0O1xuICAgIH1cbiAgICBzZXREb2MoZG9jKSB7IHRoaXMuZG9jID0gZG9jOyByZXR1cm4gdGhpczsgfVxuICAgIG11c3RSZWZyZXNoRm9yV3JhcHBpbmcod2hpdGVTcGFjZSkge1xuICAgICAgICByZXR1cm4gKHdyYXBwaW5nV2hpdGVTcGFjZS5pbmRleE9mKHdoaXRlU3BhY2UpID4gLTEpICE9IHRoaXMubGluZVdyYXBwaW5nO1xuICAgIH1cbiAgICBtdXN0UmVmcmVzaEZvckhlaWdodHMobGluZUhlaWdodHMpIHtcbiAgICAgICAgbGV0IG5ld0hlaWdodCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVIZWlnaHRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgaCA9IGxpbmVIZWlnaHRzW2ldO1xuICAgICAgICAgICAgaWYgKGggPCAwKSB7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIXRoaXMuaGVpZ2h0U2FtcGxlc1tNYXRoLmZsb29yKGggKiAxMCldKSB7IC8vIFJvdW5kIHRvIC4xIHBpeGVsc1xuICAgICAgICAgICAgICAgIG5ld0hlaWdodCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWlnaHRTYW1wbGVzW01hdGguZmxvb3IoaCAqIDEwKV0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdIZWlnaHQ7XG4gICAgfVxuICAgIHJlZnJlc2god2hpdGVTcGFjZSwgbGluZUhlaWdodCwgY2hhcldpZHRoLCBsaW5lTGVuZ3RoLCBrbm93bkhlaWdodHMpIHtcbiAgICAgICAgbGV0IGxpbmVXcmFwcGluZyA9IHdyYXBwaW5nV2hpdGVTcGFjZS5pbmRleE9mKHdoaXRlU3BhY2UpID4gLTE7XG4gICAgICAgIGxldCBjaGFuZ2VkID0gTWF0aC5yb3VuZChsaW5lSGVpZ2h0KSAhPSBNYXRoLnJvdW5kKHRoaXMubGluZUhlaWdodCkgfHwgdGhpcy5saW5lV3JhcHBpbmcgIT0gbGluZVdyYXBwaW5nO1xuICAgICAgICB0aGlzLmxpbmVXcmFwcGluZyA9IGxpbmVXcmFwcGluZztcbiAgICAgICAgdGhpcy5saW5lSGVpZ2h0ID0gbGluZUhlaWdodDtcbiAgICAgICAgdGhpcy5jaGFyV2lkdGggPSBjaGFyV2lkdGg7XG4gICAgICAgIHRoaXMubGluZUxlbmd0aCA9IGxpbmVMZW5ndGg7XG4gICAgICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICAgICAgICB0aGlzLmhlaWdodFNhbXBsZXMgPSB7fTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga25vd25IZWlnaHRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGggPSBrbm93bkhlaWdodHNbaV07XG4gICAgICAgICAgICAgICAgaWYgKGggPCAwKVxuICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhlaWdodFNhbXBsZXNbTWF0aC5mbG9vcihoICogMTApXSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNoYW5nZWQ7XG4gICAgfVxufVxuLy8gVGhpcyBvYmplY3QgaXMgdXNlZCBieSBgdXBkYXRlSGVpZ2h0YCB0byBtYWtlIERPTSBtZWFzdXJlbWVudHNcbi8vIGFycml2ZSBhdCB0aGUgcmlnaHQgbmlkZXMuIFRoZSBgaGVpZ2h0c2AgYXJyYXkgaXMgYSBzZXF1ZW5jZSBvZlxuLy8gYmxvY2sgaGVpZ2h0cywgc3RhcnRpbmcgZnJvbSBwb3NpdGlvbiBgZnJvbWAuXG5jbGFzcyBNZWFzdXJlZEhlaWdodHMge1xuICAgIGNvbnN0cnVjdG9yKGZyb20sIGhlaWdodHMpIHtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy5oZWlnaHRzID0gaGVpZ2h0cztcbiAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgfVxuICAgIGdldCBtb3JlKCkgeyByZXR1cm4gdGhpcy5pbmRleCA8IHRoaXMuaGVpZ2h0cy5sZW5ndGg7IH1cbn1cbi8qKlxuUmVjb3JkIHVzZWQgdG8gcmVwcmVzZW50IGluZm9ybWF0aW9uIGFib3V0IGEgYmxvY2stbGV2ZWwgZWxlbWVudFxuaW4gdGhlIGVkaXRvciB2aWV3LlxuKi9cbmNsYXNzIEJsb2NrSW5mbyB7XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgc3RhcnQgb2YgdGhlIGVsZW1lbnQgaW4gdGhlIGRvY3VtZW50LlxuICAgICovXG4gICAgZnJvbSwgXG4gICAgLyoqXG4gICAgVGhlIGxlbmd0aCBvZiB0aGUgZWxlbWVudC5cbiAgICAqL1xuICAgIGxlbmd0aCwgXG4gICAgLyoqXG4gICAgVGhlIHRvcCBwb3NpdGlvbiBvZiB0aGUgZWxlbWVudCAocmVsYXRpdmUgdG8gdGhlIHRvcCBvZiB0aGVcbiAgICBkb2N1bWVudCkuXG4gICAgKi9cbiAgICB0b3AsIFxuICAgIC8qKlxuICAgIEl0cyBoZWlnaHQuXG4gICAgKi9cbiAgICBoZWlnaHQsIFxuICAgIC8qKlxuICAgIFRoZSB0eXBlIG9mIGVsZW1lbnQgdGhpcyBpcy4gV2hlbiBxdWVyeWluZyBsaW5lcywgdGhpcyBtYXkgYmVcbiAgICBhbiBhcnJheSBvZiBhbGwgdGhlIGJsb2NrcyB0aGF0IG1ha2UgdXAgdGhlIGxpbmUuXG4gICAgKi9cbiAgICB0eXBlKSB7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMubGVuZ3RoID0gbGVuZ3RoO1xuICAgICAgICB0aGlzLnRvcCA9IHRvcDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBlbmQgb2YgdGhlIGVsZW1lbnQgYXMgYSBkb2N1bWVudCBwb3NpdGlvbi5cbiAgICAqL1xuICAgIGdldCB0bygpIHsgcmV0dXJuIHRoaXMuZnJvbSArIHRoaXMubGVuZ3RoOyB9XG4gICAgLyoqXG4gICAgVGhlIGJvdHRvbSBwb3NpdGlvbiBvZiB0aGUgZWxlbWVudC5cbiAgICAqL1xuICAgIGdldCBib3R0b20oKSB7IHJldHVybiB0aGlzLnRvcCArIHRoaXMuaGVpZ2h0OyB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBqb2luKG90aGVyKSB7XG4gICAgICAgIGxldCBkZXRhaWwgPSAoQXJyYXkuaXNBcnJheSh0aGlzLnR5cGUpID8gdGhpcy50eXBlIDogW3RoaXNdKVxuICAgICAgICAgICAgLmNvbmNhdChBcnJheS5pc0FycmF5KG90aGVyLnR5cGUpID8gb3RoZXIudHlwZSA6IFtvdGhlcl0pO1xuICAgICAgICByZXR1cm4gbmV3IEJsb2NrSW5mbyh0aGlzLmZyb20sIHRoaXMubGVuZ3RoICsgb3RoZXIubGVuZ3RoLCB0aGlzLnRvcCwgdGhpcy5oZWlnaHQgKyBvdGhlci5oZWlnaHQsIGRldGFpbCk7XG4gICAgfVxufVxudmFyIFF1ZXJ5VHlwZSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKFF1ZXJ5VHlwZSkge1xuICAgIFF1ZXJ5VHlwZVtRdWVyeVR5cGVbXCJCeVBvc1wiXSA9IDBdID0gXCJCeVBvc1wiO1xuICAgIFF1ZXJ5VHlwZVtRdWVyeVR5cGVbXCJCeUhlaWdodFwiXSA9IDFdID0gXCJCeUhlaWdodFwiO1xuICAgIFF1ZXJ5VHlwZVtRdWVyeVR5cGVbXCJCeVBvc05vSGVpZ2h0XCJdID0gMl0gPSBcIkJ5UG9zTm9IZWlnaHRcIjtcbnJldHVybiBRdWVyeVR5cGV9KShRdWVyeVR5cGUgfHwgKFF1ZXJ5VHlwZSA9IHt9KSk7XG5jb25zdCBFcHNpbG9uID0gMWUtMztcbmNsYXNzIEhlaWdodE1hcCB7XG4gICAgY29uc3RydWN0b3IobGVuZ3RoLCAvLyBUaGUgbnVtYmVyIG9mIGNoYXJhY3RlcnMgY292ZXJlZFxuICAgIGhlaWdodCwgLy8gSGVpZ2h0IG9mIHRoaXMgcGFydCBvZiB0aGUgZG9jdW1lbnRcbiAgICBmbGFncyA9IDIgLyogRmxhZy5PdXRkYXRlZCAqLykge1xuICAgICAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIHRoaXMuZmxhZ3MgPSBmbGFncztcbiAgICB9XG4gICAgZ2V0IG91dGRhdGVkKCkgeyByZXR1cm4gKHRoaXMuZmxhZ3MgJiAyIC8qIEZsYWcuT3V0ZGF0ZWQgKi8pID4gMDsgfVxuICAgIHNldCBvdXRkYXRlZCh2YWx1ZSkgeyB0aGlzLmZsYWdzID0gKHZhbHVlID8gMiAvKiBGbGFnLk91dGRhdGVkICovIDogMCkgfCAodGhpcy5mbGFncyAmIH4yIC8qIEZsYWcuT3V0ZGF0ZWQgKi8pOyB9XG4gICAgc2V0SGVpZ2h0KG9yYWNsZSwgaGVpZ2h0KSB7XG4gICAgICAgIGlmICh0aGlzLmhlaWdodCAhPSBoZWlnaHQpIHtcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyh0aGlzLmhlaWdodCAtIGhlaWdodCkgPiBFcHNpbG9uKVxuICAgICAgICAgICAgICAgIG9yYWNsZS5oZWlnaHRDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEJhc2UgY2FzZSBpcyB0byByZXBsYWNlIGEgbGVhZiBub2RlLCB3aGljaCBzaW1wbHkgYnVpbGRzIGEgdHJlZVxuICAgIC8vIGZyb20gdGhlIG5ldyBub2RlcyBhbmQgcmV0dXJucyB0aGF0IChIZWlnaHRNYXBCcmFuY2ggYW5kXG4gICAgLy8gSGVpZ2h0TWFwR2FwIG92ZXJyaWRlIHRoaXMgdG8gYWN0dWFsbHkgdXNlIGZyb20vdG8pXG4gICAgcmVwbGFjZShfZnJvbSwgX3RvLCBub2Rlcykge1xuICAgICAgICByZXR1cm4gSGVpZ2h0TWFwLm9mKG5vZGVzKTtcbiAgICB9XG4gICAgLy8gQWdhaW4sIHRoZXNlIGFyZSBiYXNlIGNhc2VzLCBhbmQgYXJlIG92ZXJyaWRkZW4gZm9yIGJyYW5jaCBhbmQgZ2FwIG5vZGVzLlxuICAgIGRlY29tcG9zZUxlZnQoX3RvLCByZXN1bHQpIHsgcmVzdWx0LnB1c2godGhpcyk7IH1cbiAgICBkZWNvbXBvc2VSaWdodChfZnJvbSwgcmVzdWx0KSB7IHJlc3VsdC5wdXNoKHRoaXMpOyB9XG4gICAgYXBwbHlDaGFuZ2VzKGRlY29yYXRpb25zLCBvbGREb2MsIG9yYWNsZSwgY2hhbmdlcykge1xuICAgICAgICBsZXQgbWUgPSB0aGlzO1xuICAgICAgICBmb3IgKGxldCBpID0gY2hhbmdlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgbGV0IHsgZnJvbUEsIHRvQSwgZnJvbUIsIHRvQiB9ID0gY2hhbmdlc1tpXTtcbiAgICAgICAgICAgIGxldCBzdGFydCA9IG1lLmxpbmVBdChmcm9tQSwgUXVlcnlUeXBlLkJ5UG9zTm9IZWlnaHQsIG9sZERvYywgMCwgMCk7XG4gICAgICAgICAgICBsZXQgZW5kID0gc3RhcnQudG8gPj0gdG9BID8gc3RhcnQgOiBtZS5saW5lQXQodG9BLCBRdWVyeVR5cGUuQnlQb3NOb0hlaWdodCwgb2xkRG9jLCAwLCAwKTtcbiAgICAgICAgICAgIHRvQiArPSBlbmQudG8gLSB0b0E7XG4gICAgICAgICAgICB0b0EgPSBlbmQudG87XG4gICAgICAgICAgICB3aGlsZSAoaSA+IDAgJiYgc3RhcnQuZnJvbSA8PSBjaGFuZ2VzW2kgLSAxXS50b0EpIHtcbiAgICAgICAgICAgICAgICBmcm9tQSA9IGNoYW5nZXNbaSAtIDFdLmZyb21BO1xuICAgICAgICAgICAgICAgIGZyb21CID0gY2hhbmdlc1tpIC0gMV0uZnJvbUI7XG4gICAgICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgICAgIGlmIChmcm9tQSA8IHN0YXJ0LmZyb20pXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gbWUubGluZUF0KGZyb21BLCBRdWVyeVR5cGUuQnlQb3NOb0hlaWdodCwgb2xkRG9jLCAwLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZyb21CICs9IHN0YXJ0LmZyb20gLSBmcm9tQTtcbiAgICAgICAgICAgIGZyb21BID0gc3RhcnQuZnJvbTtcbiAgICAgICAgICAgIGxldCBub2RlcyA9IE5vZGVCdWlsZGVyLmJ1aWxkKG9yYWNsZSwgZGVjb3JhdGlvbnMsIGZyb21CLCB0b0IpO1xuICAgICAgICAgICAgbWUgPSBtZS5yZXBsYWNlKGZyb21BLCB0b0EsIG5vZGVzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWUudXBkYXRlSGVpZ2h0KG9yYWNsZSwgMCk7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eSgpIHsgcmV0dXJuIG5ldyBIZWlnaHRNYXBUZXh0KDAsIDApOyB9XG4gICAgLy8gbm9kZXMgdXNlcyBudWxsIHZhbHVlcyB0byBpbmRpY2F0ZSB0aGUgcG9zaXRpb24gb2YgbGluZSBicmVha3MuXG4gICAgLy8gVGhlcmUgYXJlIG5ldmVyIGxpbmUgYnJlYWtzIGF0IHRoZSBzdGFydCBvciBlbmQgb2YgdGhlIGFycmF5LCBvclxuICAgIC8vIHR3byBsaW5lIGJyZWFrcyBuZXh0IHRvIGVhY2ggb3RoZXIsIGFuZCB0aGUgYXJyYXkgaXNuJ3QgYWxsb3dlZFxuICAgIC8vIHRvIGJlIGVtcHR5IChzYW1lIHJlc3RyaWN0aW9ucyBhcyByZXR1cm4gdmFsdWUgZnJvbSB0aGUgYnVpbGRlcikuXG4gICAgc3RhdGljIG9mKG5vZGVzKSB7XG4gICAgICAgIGlmIChub2Rlcy5sZW5ndGggPT0gMSlcbiAgICAgICAgICAgIHJldHVybiBub2Rlc1swXTtcbiAgICAgICAgbGV0IGkgPSAwLCBqID0gbm9kZXMubGVuZ3RoLCBiZWZvcmUgPSAwLCBhZnRlciA9IDA7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgIGlmIChpID09IGopIHtcbiAgICAgICAgICAgICAgICBpZiAoYmVmb3JlID4gYWZ0ZXIgKiAyKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzcGxpdCA9IG5vZGVzW2kgLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNwbGl0LmJyZWFrKVxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXMuc3BsaWNlKC0taSwgMSwgc3BsaXQubGVmdCwgbnVsbCwgc3BsaXQucmlnaHQpO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBub2Rlcy5zcGxpY2UoLS1pLCAxLCBzcGxpdC5sZWZ0LCBzcGxpdC5yaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIGogKz0gMSArIHNwbGl0LmJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBiZWZvcmUgLT0gc3BsaXQuc2l6ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYWZ0ZXIgPiBiZWZvcmUgKiAyKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzcGxpdCA9IG5vZGVzW2pdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3BsaXQuYnJlYWspXG4gICAgICAgICAgICAgICAgICAgICAgICBub2Rlcy5zcGxpY2UoaiwgMSwgc3BsaXQubGVmdCwgbnVsbCwgc3BsaXQucmlnaHQpO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBub2Rlcy5zcGxpY2UoaiwgMSwgc3BsaXQubGVmdCwgc3BsaXQucmlnaHQpO1xuICAgICAgICAgICAgICAgICAgICBqICs9IDIgKyBzcGxpdC5icmVhaztcbiAgICAgICAgICAgICAgICAgICAgYWZ0ZXIgLT0gc3BsaXQuc2l6ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGJlZm9yZSA8IGFmdGVyKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5leHQgPSBub2Rlc1tpKytdO1xuICAgICAgICAgICAgICAgIGlmIChuZXh0KVxuICAgICAgICAgICAgICAgICAgICBiZWZvcmUgKz0gbmV4dC5zaXplO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IG5leHQgPSBub2Rlc1stLWpdO1xuICAgICAgICAgICAgICAgIGlmIChuZXh0KVxuICAgICAgICAgICAgICAgICAgICBhZnRlciArPSBuZXh0LnNpemU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGJyayA9IDA7XG4gICAgICAgIGlmIChub2Rlc1tpIC0gMV0gPT0gbnVsbCkge1xuICAgICAgICAgICAgYnJrID0gMTtcbiAgICAgICAgICAgIGktLTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChub2Rlc1tpXSA9PSBudWxsKSB7XG4gICAgICAgICAgICBicmsgPSAxO1xuICAgICAgICAgICAgaisrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgSGVpZ2h0TWFwQnJhbmNoKEhlaWdodE1hcC5vZihub2Rlcy5zbGljZSgwLCBpKSksIGJyaywgSGVpZ2h0TWFwLm9mKG5vZGVzLnNsaWNlKGopKSk7XG4gICAgfVxufVxuSGVpZ2h0TWFwLnByb3RvdHlwZS5zaXplID0gMTtcbmNsYXNzIEhlaWdodE1hcEJsb2NrIGV4dGVuZHMgSGVpZ2h0TWFwIHtcbiAgICBjb25zdHJ1Y3RvcihsZW5ndGgsIGhlaWdodCwgdHlwZSkge1xuICAgICAgICBzdXBlcihsZW5ndGgsIGhlaWdodCk7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgfVxuICAgIGJsb2NrQXQoX2hlaWdodCwgX2RvYywgdG9wLCBvZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCbG9ja0luZm8ob2Zmc2V0LCB0aGlzLmxlbmd0aCwgdG9wLCB0aGlzLmhlaWdodCwgdGhpcy50eXBlKTtcbiAgICB9XG4gICAgbGluZUF0KF92YWx1ZSwgX3R5cGUsIGRvYywgdG9wLCBvZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmxvY2tBdCgwLCBkb2MsIHRvcCwgb2Zmc2V0KTtcbiAgICB9XG4gICAgZm9yRWFjaExpbmUoZnJvbSwgdG8sIGRvYywgdG9wLCBvZmZzZXQsIGYpIHtcbiAgICAgICAgaWYgKGZyb20gPD0gb2Zmc2V0ICsgdGhpcy5sZW5ndGggJiYgdG8gPj0gb2Zmc2V0KVxuICAgICAgICAgICAgZih0aGlzLmJsb2NrQXQoMCwgZG9jLCB0b3AsIG9mZnNldCkpO1xuICAgIH1cbiAgICB1cGRhdGVIZWlnaHQob3JhY2xlLCBvZmZzZXQgPSAwLCBfZm9yY2UgPSBmYWxzZSwgbWVhc3VyZWQpIHtcbiAgICAgICAgaWYgKG1lYXN1cmVkICYmIG1lYXN1cmVkLmZyb20gPD0gb2Zmc2V0ICYmIG1lYXN1cmVkLm1vcmUpXG4gICAgICAgICAgICB0aGlzLnNldEhlaWdodChvcmFjbGUsIG1lYXN1cmVkLmhlaWdodHNbbWVhc3VyZWQuaW5kZXgrK10pO1xuICAgICAgICB0aGlzLm91dGRhdGVkID0gZmFsc2U7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHsgcmV0dXJuIGBibG9jaygke3RoaXMubGVuZ3RofSlgOyB9XG59XG5jbGFzcyBIZWlnaHRNYXBUZXh0IGV4dGVuZHMgSGVpZ2h0TWFwQmxvY2sge1xuICAgIGNvbnN0cnVjdG9yKGxlbmd0aCwgaGVpZ2h0KSB7XG4gICAgICAgIHN1cGVyKGxlbmd0aCwgaGVpZ2h0LCBCbG9ja1R5cGUuVGV4dCk7XG4gICAgICAgIHRoaXMuY29sbGFwc2VkID0gMDsgLy8gQW1vdW50IG9mIGNvbGxhcHNlZCBjb250ZW50IGluIHRoZSBsaW5lXG4gICAgICAgIHRoaXMud2lkZ2V0SGVpZ2h0ID0gMDsgLy8gTWF4aW11bSBpbmxpbmUgd2lkZ2V0IGhlaWdodFxuICAgIH1cbiAgICByZXBsYWNlKF9mcm9tLCBfdG8sIG5vZGVzKSB7XG4gICAgICAgIGxldCBub2RlID0gbm9kZXNbMF07XG4gICAgICAgIGlmIChub2Rlcy5sZW5ndGggPT0gMSAmJiAobm9kZSBpbnN0YW5jZW9mIEhlaWdodE1hcFRleHQgfHwgbm9kZSBpbnN0YW5jZW9mIEhlaWdodE1hcEdhcCAmJiAobm9kZS5mbGFncyAmIDQgLyogRmxhZy5TaW5nbGVMaW5lICovKSkgJiZcbiAgICAgICAgICAgIE1hdGguYWJzKHRoaXMubGVuZ3RoIC0gbm9kZS5sZW5ndGgpIDwgMTApIHtcbiAgICAgICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgSGVpZ2h0TWFwR2FwKVxuICAgICAgICAgICAgICAgIG5vZGUgPSBuZXcgSGVpZ2h0TWFwVGV4dChub2RlLmxlbmd0aCwgdGhpcy5oZWlnaHQpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG5vZGUuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG4gICAgICAgICAgICBpZiAoIXRoaXMub3V0ZGF0ZWQpXG4gICAgICAgICAgICAgICAgbm9kZS5vdXRkYXRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gSGVpZ2h0TWFwLm9mKG5vZGVzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVIZWlnaHQob3JhY2xlLCBvZmZzZXQgPSAwLCBmb3JjZSA9IGZhbHNlLCBtZWFzdXJlZCkge1xuICAgICAgICBpZiAobWVhc3VyZWQgJiYgbWVhc3VyZWQuZnJvbSA8PSBvZmZzZXQgJiYgbWVhc3VyZWQubW9yZSlcbiAgICAgICAgICAgIHRoaXMuc2V0SGVpZ2h0KG9yYWNsZSwgbWVhc3VyZWQuaGVpZ2h0c1ttZWFzdXJlZC5pbmRleCsrXSk7XG4gICAgICAgIGVsc2UgaWYgKGZvcmNlIHx8IHRoaXMub3V0ZGF0ZWQpXG4gICAgICAgICAgICB0aGlzLnNldEhlaWdodChvcmFjbGUsIE1hdGgubWF4KHRoaXMud2lkZ2V0SGVpZ2h0LCBvcmFjbGUuaGVpZ2h0Rm9yTGluZSh0aGlzLmxlbmd0aCAtIHRoaXMuY29sbGFwc2VkKSkpO1xuICAgICAgICB0aGlzLm91dGRhdGVkID0gZmFsc2U7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIGBsaW5lKCR7dGhpcy5sZW5ndGh9JHt0aGlzLmNvbGxhcHNlZCA/IC10aGlzLmNvbGxhcHNlZCA6IFwiXCJ9JHt0aGlzLndpZGdldEhlaWdodCA/IFwiOlwiICsgdGhpcy53aWRnZXRIZWlnaHQgOiBcIlwifSlgO1xuICAgIH1cbn1cbmNsYXNzIEhlaWdodE1hcEdhcCBleHRlbmRzIEhlaWdodE1hcCB7XG4gICAgY29uc3RydWN0b3IobGVuZ3RoKSB7IHN1cGVyKGxlbmd0aCwgMCk7IH1cbiAgICBsaW5lcyhkb2MsIG9mZnNldCkge1xuICAgICAgICBsZXQgZmlyc3RMaW5lID0gZG9jLmxpbmVBdChvZmZzZXQpLm51bWJlciwgbGFzdExpbmUgPSBkb2MubGluZUF0KG9mZnNldCArIHRoaXMubGVuZ3RoKS5udW1iZXI7XG4gICAgICAgIHJldHVybiB7IGZpcnN0TGluZSwgbGFzdExpbmUsIGxpbmVIZWlnaHQ6IHRoaXMuaGVpZ2h0IC8gKGxhc3RMaW5lIC0gZmlyc3RMaW5lICsgMSkgfTtcbiAgICB9XG4gICAgYmxvY2tBdChoZWlnaHQsIGRvYywgdG9wLCBvZmZzZXQpIHtcbiAgICAgICAgbGV0IHsgZmlyc3RMaW5lLCBsYXN0TGluZSwgbGluZUhlaWdodCB9ID0gdGhpcy5saW5lcyhkb2MsIG9mZnNldCk7XG4gICAgICAgIGxldCBsaW5lID0gTWF0aC5tYXgoMCwgTWF0aC5taW4obGFzdExpbmUgLSBmaXJzdExpbmUsIE1hdGguZmxvb3IoKGhlaWdodCAtIHRvcCkgLyBsaW5lSGVpZ2h0KSkpO1xuICAgICAgICBsZXQgeyBmcm9tLCBsZW5ndGggfSA9IGRvYy5saW5lKGZpcnN0TGluZSArIGxpbmUpO1xuICAgICAgICByZXR1cm4gbmV3IEJsb2NrSW5mbyhmcm9tLCBsZW5ndGgsIHRvcCArIGxpbmVIZWlnaHQgKiBsaW5lLCBsaW5lSGVpZ2h0LCBCbG9ja1R5cGUuVGV4dCk7XG4gICAgfVxuICAgIGxpbmVBdCh2YWx1ZSwgdHlwZSwgZG9jLCB0b3AsIG9mZnNldCkge1xuICAgICAgICBpZiAodHlwZSA9PSBRdWVyeVR5cGUuQnlIZWlnaHQpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ibG9ja0F0KHZhbHVlLCBkb2MsIHRvcCwgb2Zmc2V0KTtcbiAgICAgICAgaWYgKHR5cGUgPT0gUXVlcnlUeXBlLkJ5UG9zTm9IZWlnaHQpIHtcbiAgICAgICAgICAgIGxldCB7IGZyb20sIHRvIH0gPSBkb2MubGluZUF0KHZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQmxvY2tJbmZvKGZyb20sIHRvIC0gZnJvbSwgMCwgMCwgQmxvY2tUeXBlLlRleHQpO1xuICAgICAgICB9XG4gICAgICAgIGxldCB7IGZpcnN0TGluZSwgbGluZUhlaWdodCB9ID0gdGhpcy5saW5lcyhkb2MsIG9mZnNldCk7XG4gICAgICAgIGxldCB7IGZyb20sIGxlbmd0aCwgbnVtYmVyIH0gPSBkb2MubGluZUF0KHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBCbG9ja0luZm8oZnJvbSwgbGVuZ3RoLCB0b3AgKyBsaW5lSGVpZ2h0ICogKG51bWJlciAtIGZpcnN0TGluZSksIGxpbmVIZWlnaHQsIEJsb2NrVHlwZS5UZXh0KTtcbiAgICB9XG4gICAgZm9yRWFjaExpbmUoZnJvbSwgdG8sIGRvYywgdG9wLCBvZmZzZXQsIGYpIHtcbiAgICAgICAgbGV0IHsgZmlyc3RMaW5lLCBsaW5lSGVpZ2h0IH0gPSB0aGlzLmxpbmVzKGRvYywgb2Zmc2V0KTtcbiAgICAgICAgZm9yIChsZXQgcG9zID0gTWF0aC5tYXgoZnJvbSwgb2Zmc2V0KSwgZW5kID0gTWF0aC5taW4ob2Zmc2V0ICsgdGhpcy5sZW5ndGgsIHRvKTsgcG9zIDw9IGVuZDspIHtcbiAgICAgICAgICAgIGxldCBsaW5lID0gZG9jLmxpbmVBdChwb3MpO1xuICAgICAgICAgICAgaWYgKHBvcyA9PSBmcm9tKVxuICAgICAgICAgICAgICAgIHRvcCArPSBsaW5lSGVpZ2h0ICogKGxpbmUubnVtYmVyIC0gZmlyc3RMaW5lKTtcbiAgICAgICAgICAgIGYobmV3IEJsb2NrSW5mbyhsaW5lLmZyb20sIGxpbmUubGVuZ3RoLCB0b3AsIGxpbmVIZWlnaHQsIEJsb2NrVHlwZS5UZXh0KSk7XG4gICAgICAgICAgICB0b3AgKz0gbGluZUhlaWdodDtcbiAgICAgICAgICAgIHBvcyA9IGxpbmUudG8gKyAxO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlcGxhY2UoZnJvbSwgdG8sIG5vZGVzKSB7XG4gICAgICAgIGxldCBhZnRlciA9IHRoaXMubGVuZ3RoIC0gdG87XG4gICAgICAgIGlmIChhZnRlciA+IDApIHtcbiAgICAgICAgICAgIGxldCBsYXN0ID0gbm9kZXNbbm9kZXMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICBpZiAobGFzdCBpbnN0YW5jZW9mIEhlaWdodE1hcEdhcClcbiAgICAgICAgICAgICAgICBub2Rlc1tub2Rlcy5sZW5ndGggLSAxXSA9IG5ldyBIZWlnaHRNYXBHYXAobGFzdC5sZW5ndGggKyBhZnRlcik7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgbm9kZXMucHVzaChudWxsLCBuZXcgSGVpZ2h0TWFwR2FwKGFmdGVyIC0gMSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmcm9tID4gMCkge1xuICAgICAgICAgICAgbGV0IGZpcnN0ID0gbm9kZXNbMF07XG4gICAgICAgICAgICBpZiAoZmlyc3QgaW5zdGFuY2VvZiBIZWlnaHRNYXBHYXApXG4gICAgICAgICAgICAgICAgbm9kZXNbMF0gPSBuZXcgSGVpZ2h0TWFwR2FwKGZyb20gKyBmaXJzdC5sZW5ndGgpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG5vZGVzLnVuc2hpZnQobmV3IEhlaWdodE1hcEdhcChmcm9tIC0gMSksIG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBIZWlnaHRNYXAub2Yobm9kZXMpO1xuICAgIH1cbiAgICBkZWNvbXBvc2VMZWZ0KHRvLCByZXN1bHQpIHtcbiAgICAgICAgcmVzdWx0LnB1c2gobmV3IEhlaWdodE1hcEdhcCh0byAtIDEpLCBudWxsKTtcbiAgICB9XG4gICAgZGVjb21wb3NlUmlnaHQoZnJvbSwgcmVzdWx0KSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKG51bGwsIG5ldyBIZWlnaHRNYXBHYXAodGhpcy5sZW5ndGggLSBmcm9tIC0gMSkpO1xuICAgIH1cbiAgICB1cGRhdGVIZWlnaHQob3JhY2xlLCBvZmZzZXQgPSAwLCBmb3JjZSA9IGZhbHNlLCBtZWFzdXJlZCkge1xuICAgICAgICBsZXQgZW5kID0gb2Zmc2V0ICsgdGhpcy5sZW5ndGg7XG4gICAgICAgIGlmIChtZWFzdXJlZCAmJiBtZWFzdXJlZC5mcm9tIDw9IG9mZnNldCArIHRoaXMubGVuZ3RoICYmIG1lYXN1cmVkLm1vcmUpIHtcbiAgICAgICAgICAgIC8vIEZpbGwgaW4gcGFydCBvZiB0aGlzIGdhcCB3aXRoIG1lYXN1cmVkIGxpbmVzLiBXZSBrbm93IHRoZXJlXG4gICAgICAgICAgICAvLyBjYW4ndCBiZSB3aWRnZXRzIG9yIGNvbGxhcHNlZCByYW5nZXMgaW4gdGhvc2UgbGluZXMsIGJlY2F1c2VcbiAgICAgICAgICAgIC8vIHRoZXkgd291bGQgYWxyZWFkeSBoYXZlIGJlZW4gYWRkZWQgdG8gdGhlIGhlaWdodG1hcCAoZ2Fwc1xuICAgICAgICAgICAgLy8gb25seSBjb250YWluIHBsYWluIHRleHQpLlxuICAgICAgICAgICAgbGV0IG5vZGVzID0gW10sIHBvcyA9IE1hdGgubWF4KG9mZnNldCwgbWVhc3VyZWQuZnJvbSksIHNpbmdsZUhlaWdodCA9IC0xO1xuICAgICAgICAgICAgbGV0IHdhc0NoYW5nZWQgPSBvcmFjbGUuaGVpZ2h0Q2hhbmdlZDtcbiAgICAgICAgICAgIGlmIChtZWFzdXJlZC5mcm9tID4gb2Zmc2V0KVxuICAgICAgICAgICAgICAgIG5vZGVzLnB1c2gobmV3IEhlaWdodE1hcEdhcChtZWFzdXJlZC5mcm9tIC0gb2Zmc2V0IC0gMSkudXBkYXRlSGVpZ2h0KG9yYWNsZSwgb2Zmc2V0KSk7XG4gICAgICAgICAgICB3aGlsZSAocG9zIDw9IGVuZCAmJiBtZWFzdXJlZC5tb3JlKSB7XG4gICAgICAgICAgICAgICAgbGV0IGxlbiA9IG9yYWNsZS5kb2MubGluZUF0KHBvcykubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmIChub2Rlcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIG5vZGVzLnB1c2gobnVsbCk7XG4gICAgICAgICAgICAgICAgbGV0IGhlaWdodCA9IG1lYXN1cmVkLmhlaWdodHNbbWVhc3VyZWQuaW5kZXgrK107XG4gICAgICAgICAgICAgICAgaWYgKHNpbmdsZUhlaWdodCA9PSAtMSlcbiAgICAgICAgICAgICAgICAgICAgc2luZ2xlSGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKE1hdGguYWJzKGhlaWdodCAtIHNpbmdsZUhlaWdodCkgPj0gRXBzaWxvbilcbiAgICAgICAgICAgICAgICAgICAgc2luZ2xlSGVpZ2h0ID0gLTI7XG4gICAgICAgICAgICAgICAgbGV0IGxpbmUgPSBuZXcgSGVpZ2h0TWFwVGV4dChsZW4sIGhlaWdodCk7XG4gICAgICAgICAgICAgICAgbGluZS5vdXRkYXRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIG5vZGVzLnB1c2gobGluZSk7XG4gICAgICAgICAgICAgICAgcG9zICs9IGxlbiArIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocG9zIDw9IGVuZClcbiAgICAgICAgICAgICAgICBub2Rlcy5wdXNoKG51bGwsIG5ldyBIZWlnaHRNYXBHYXAoZW5kIC0gcG9zKS51cGRhdGVIZWlnaHQob3JhY2xlLCBwb3MpKTtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBIZWlnaHRNYXAub2Yobm9kZXMpO1xuICAgICAgICAgICAgb3JhY2xlLmhlaWdodENoYW5nZWQgPSB3YXNDaGFuZ2VkIHx8IHNpbmdsZUhlaWdodCA8IDAgfHwgTWF0aC5hYnMocmVzdWx0LmhlaWdodCAtIHRoaXMuaGVpZ2h0KSA+PSBFcHNpbG9uIHx8XG4gICAgICAgICAgICAgICAgTWF0aC5hYnMoc2luZ2xlSGVpZ2h0IC0gdGhpcy5saW5lcyhvcmFjbGUuZG9jLCBvZmZzZXQpLmxpbmVIZWlnaHQpID49IEVwc2lsb247XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGZvcmNlIHx8IHRoaXMub3V0ZGF0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0SGVpZ2h0KG9yYWNsZSwgb3JhY2xlLmhlaWdodEZvckdhcChvZmZzZXQsIG9mZnNldCArIHRoaXMubGVuZ3RoKSk7XG4gICAgICAgICAgICB0aGlzLm91dGRhdGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkgeyByZXR1cm4gYGdhcCgke3RoaXMubGVuZ3RofSlgOyB9XG59XG5jbGFzcyBIZWlnaHRNYXBCcmFuY2ggZXh0ZW5kcyBIZWlnaHRNYXAge1xuICAgIGNvbnN0cnVjdG9yKGxlZnQsIGJyaywgcmlnaHQpIHtcbiAgICAgICAgc3VwZXIobGVmdC5sZW5ndGggKyBicmsgKyByaWdodC5sZW5ndGgsIGxlZnQuaGVpZ2h0ICsgcmlnaHQuaGVpZ2h0LCBicmsgfCAobGVmdC5vdXRkYXRlZCB8fCByaWdodC5vdXRkYXRlZCA/IDIgLyogRmxhZy5PdXRkYXRlZCAqLyA6IDApKTtcbiAgICAgICAgdGhpcy5sZWZ0ID0gbGVmdDtcbiAgICAgICAgdGhpcy5yaWdodCA9IHJpZ2h0O1xuICAgICAgICB0aGlzLnNpemUgPSBsZWZ0LnNpemUgKyByaWdodC5zaXplO1xuICAgIH1cbiAgICBnZXQgYnJlYWsoKSB7IHJldHVybiB0aGlzLmZsYWdzICYgMSAvKiBGbGFnLkJyZWFrICovOyB9XG4gICAgYmxvY2tBdChoZWlnaHQsIGRvYywgdG9wLCBvZmZzZXQpIHtcbiAgICAgICAgbGV0IG1pZCA9IHRvcCArIHRoaXMubGVmdC5oZWlnaHQ7XG4gICAgICAgIHJldHVybiBoZWlnaHQgPCBtaWQgPyB0aGlzLmxlZnQuYmxvY2tBdChoZWlnaHQsIGRvYywgdG9wLCBvZmZzZXQpXG4gICAgICAgICAgICA6IHRoaXMucmlnaHQuYmxvY2tBdChoZWlnaHQsIGRvYywgbWlkLCBvZmZzZXQgKyB0aGlzLmxlZnQubGVuZ3RoICsgdGhpcy5icmVhayk7XG4gICAgfVxuICAgIGxpbmVBdCh2YWx1ZSwgdHlwZSwgZG9jLCB0b3AsIG9mZnNldCkge1xuICAgICAgICBsZXQgcmlnaHRUb3AgPSB0b3AgKyB0aGlzLmxlZnQuaGVpZ2h0LCByaWdodE9mZnNldCA9IG9mZnNldCArIHRoaXMubGVmdC5sZW5ndGggKyB0aGlzLmJyZWFrO1xuICAgICAgICBsZXQgbGVmdCA9IHR5cGUgPT0gUXVlcnlUeXBlLkJ5SGVpZ2h0ID8gdmFsdWUgPCByaWdodFRvcCA6IHZhbHVlIDwgcmlnaHRPZmZzZXQ7XG4gICAgICAgIGxldCBiYXNlID0gbGVmdCA/IHRoaXMubGVmdC5saW5lQXQodmFsdWUsIHR5cGUsIGRvYywgdG9wLCBvZmZzZXQpXG4gICAgICAgICAgICA6IHRoaXMucmlnaHQubGluZUF0KHZhbHVlLCB0eXBlLCBkb2MsIHJpZ2h0VG9wLCByaWdodE9mZnNldCk7XG4gICAgICAgIGlmICh0aGlzLmJyZWFrIHx8IChsZWZ0ID8gYmFzZS50byA8IHJpZ2h0T2Zmc2V0IDogYmFzZS5mcm9tID4gcmlnaHRPZmZzZXQpKVxuICAgICAgICAgICAgcmV0dXJuIGJhc2U7XG4gICAgICAgIGxldCBzdWJRdWVyeSA9IHR5cGUgPT0gUXVlcnlUeXBlLkJ5UG9zTm9IZWlnaHQgPyBRdWVyeVR5cGUuQnlQb3NOb0hlaWdodCA6IFF1ZXJ5VHlwZS5CeVBvcztcbiAgICAgICAgaWYgKGxlZnQpXG4gICAgICAgICAgICByZXR1cm4gYmFzZS5qb2luKHRoaXMucmlnaHQubGluZUF0KHJpZ2h0T2Zmc2V0LCBzdWJRdWVyeSwgZG9jLCByaWdodFRvcCwgcmlnaHRPZmZzZXQpKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5saW5lQXQocmlnaHRPZmZzZXQsIHN1YlF1ZXJ5LCBkb2MsIHRvcCwgb2Zmc2V0KS5qb2luKGJhc2UpO1xuICAgIH1cbiAgICBmb3JFYWNoTGluZShmcm9tLCB0bywgZG9jLCB0b3AsIG9mZnNldCwgZikge1xuICAgICAgICBsZXQgcmlnaHRUb3AgPSB0b3AgKyB0aGlzLmxlZnQuaGVpZ2h0LCByaWdodE9mZnNldCA9IG9mZnNldCArIHRoaXMubGVmdC5sZW5ndGggKyB0aGlzLmJyZWFrO1xuICAgICAgICBpZiAodGhpcy5icmVhaykge1xuICAgICAgICAgICAgaWYgKGZyb20gPCByaWdodE9mZnNldClcbiAgICAgICAgICAgICAgICB0aGlzLmxlZnQuZm9yRWFjaExpbmUoZnJvbSwgdG8sIGRvYywgdG9wLCBvZmZzZXQsIGYpO1xuICAgICAgICAgICAgaWYgKHRvID49IHJpZ2h0T2Zmc2V0KVxuICAgICAgICAgICAgICAgIHRoaXMucmlnaHQuZm9yRWFjaExpbmUoZnJvbSwgdG8sIGRvYywgcmlnaHRUb3AsIHJpZ2h0T2Zmc2V0LCBmKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBtaWQgPSB0aGlzLmxpbmVBdChyaWdodE9mZnNldCwgUXVlcnlUeXBlLkJ5UG9zLCBkb2MsIHRvcCwgb2Zmc2V0KTtcbiAgICAgICAgICAgIGlmIChmcm9tIDwgbWlkLmZyb20pXG4gICAgICAgICAgICAgICAgdGhpcy5sZWZ0LmZvckVhY2hMaW5lKGZyb20sIG1pZC5mcm9tIC0gMSwgZG9jLCB0b3AsIG9mZnNldCwgZik7XG4gICAgICAgICAgICBpZiAobWlkLnRvID49IGZyb20gJiYgbWlkLmZyb20gPD0gdG8pXG4gICAgICAgICAgICAgICAgZihtaWQpO1xuICAgICAgICAgICAgaWYgKHRvID4gbWlkLnRvKVxuICAgICAgICAgICAgICAgIHRoaXMucmlnaHQuZm9yRWFjaExpbmUobWlkLnRvICsgMSwgdG8sIGRvYywgcmlnaHRUb3AsIHJpZ2h0T2Zmc2V0LCBmKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXBsYWNlKGZyb20sIHRvLCBub2Rlcykge1xuICAgICAgICBsZXQgcmlnaHRTdGFydCA9IHRoaXMubGVmdC5sZW5ndGggKyB0aGlzLmJyZWFrO1xuICAgICAgICBpZiAodG8gPCByaWdodFN0YXJ0KVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmFsYW5jZWQodGhpcy5sZWZ0LnJlcGxhY2UoZnJvbSwgdG8sIG5vZGVzKSwgdGhpcy5yaWdodCk7XG4gICAgICAgIGlmIChmcm9tID4gdGhpcy5sZWZ0Lmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJhbGFuY2VkKHRoaXMubGVmdCwgdGhpcy5yaWdodC5yZXBsYWNlKGZyb20gLSByaWdodFN0YXJ0LCB0byAtIHJpZ2h0U3RhcnQsIG5vZGVzKSk7XG4gICAgICAgIGxldCByZXN1bHQgPSBbXTtcbiAgICAgICAgaWYgKGZyb20gPiAwKVxuICAgICAgICAgICAgdGhpcy5kZWNvbXBvc2VMZWZ0KGZyb20sIHJlc3VsdCk7XG4gICAgICAgIGxldCBsZWZ0ID0gcmVzdWx0Lmxlbmd0aDtcbiAgICAgICAgZm9yIChsZXQgbm9kZSBvZiBub2RlcylcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKG5vZGUpO1xuICAgICAgICBpZiAoZnJvbSA+IDApXG4gICAgICAgICAgICBtZXJnZUdhcHMocmVzdWx0LCBsZWZ0IC0gMSk7XG4gICAgICAgIGlmICh0byA8IHRoaXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBsZXQgcmlnaHQgPSByZXN1bHQubGVuZ3RoO1xuICAgICAgICAgICAgdGhpcy5kZWNvbXBvc2VSaWdodCh0bywgcmVzdWx0KTtcbiAgICAgICAgICAgIG1lcmdlR2FwcyhyZXN1bHQsIHJpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gSGVpZ2h0TWFwLm9mKHJlc3VsdCk7XG4gICAgfVxuICAgIGRlY29tcG9zZUxlZnQodG8sIHJlc3VsdCkge1xuICAgICAgICBsZXQgbGVmdCA9IHRoaXMubGVmdC5sZW5ndGg7XG4gICAgICAgIGlmICh0byA8PSBsZWZ0KVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5kZWNvbXBvc2VMZWZ0KHRvLCByZXN1bHQpO1xuICAgICAgICByZXN1bHQucHVzaCh0aGlzLmxlZnQpO1xuICAgICAgICBpZiAodGhpcy5icmVhaykge1xuICAgICAgICAgICAgbGVmdCsrO1xuICAgICAgICAgICAgaWYgKHRvID49IGxlZnQpXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRvID4gbGVmdClcbiAgICAgICAgICAgIHRoaXMucmlnaHQuZGVjb21wb3NlTGVmdCh0byAtIGxlZnQsIHJlc3VsdCk7XG4gICAgfVxuICAgIGRlY29tcG9zZVJpZ2h0KGZyb20sIHJlc3VsdCkge1xuICAgICAgICBsZXQgbGVmdCA9IHRoaXMubGVmdC5sZW5ndGgsIHJpZ2h0ID0gbGVmdCArIHRoaXMuYnJlYWs7XG4gICAgICAgIGlmIChmcm9tID49IHJpZ2h0KVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmlnaHQuZGVjb21wb3NlUmlnaHQoZnJvbSAtIHJpZ2h0LCByZXN1bHQpO1xuICAgICAgICBpZiAoZnJvbSA8IGxlZnQpXG4gICAgICAgICAgICB0aGlzLmxlZnQuZGVjb21wb3NlUmlnaHQoZnJvbSwgcmVzdWx0KTtcbiAgICAgICAgaWYgKHRoaXMuYnJlYWsgJiYgZnJvbSA8IHJpZ2h0KVxuICAgICAgICAgICAgcmVzdWx0LnB1c2gobnVsbCk7XG4gICAgICAgIHJlc3VsdC5wdXNoKHRoaXMucmlnaHQpO1xuICAgIH1cbiAgICBiYWxhbmNlZChsZWZ0LCByaWdodCkge1xuICAgICAgICBpZiAobGVmdC5zaXplID4gMiAqIHJpZ2h0LnNpemUgfHwgcmlnaHQuc2l6ZSA+IDIgKiBsZWZ0LnNpemUpXG4gICAgICAgICAgICByZXR1cm4gSGVpZ2h0TWFwLm9mKHRoaXMuYnJlYWsgPyBbbGVmdCwgbnVsbCwgcmlnaHRdIDogW2xlZnQsIHJpZ2h0XSk7XG4gICAgICAgIHRoaXMubGVmdCA9IGxlZnQ7XG4gICAgICAgIHRoaXMucmlnaHQgPSByaWdodDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBsZWZ0LmhlaWdodCArIHJpZ2h0LmhlaWdodDtcbiAgICAgICAgdGhpcy5vdXRkYXRlZCA9IGxlZnQub3V0ZGF0ZWQgfHwgcmlnaHQub3V0ZGF0ZWQ7XG4gICAgICAgIHRoaXMuc2l6ZSA9IGxlZnQuc2l6ZSArIHJpZ2h0LnNpemU7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gbGVmdC5sZW5ndGggKyB0aGlzLmJyZWFrICsgcmlnaHQubGVuZ3RoO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgdXBkYXRlSGVpZ2h0KG9yYWNsZSwgb2Zmc2V0ID0gMCwgZm9yY2UgPSBmYWxzZSwgbWVhc3VyZWQpIHtcbiAgICAgICAgbGV0IHsgbGVmdCwgcmlnaHQgfSA9IHRoaXMsIHJpZ2h0U3RhcnQgPSBvZmZzZXQgKyBsZWZ0Lmxlbmd0aCArIHRoaXMuYnJlYWssIHJlYmFsYW5jZSA9IG51bGw7XG4gICAgICAgIGlmIChtZWFzdXJlZCAmJiBtZWFzdXJlZC5mcm9tIDw9IG9mZnNldCArIGxlZnQubGVuZ3RoICYmIG1lYXN1cmVkLm1vcmUpXG4gICAgICAgICAgICByZWJhbGFuY2UgPSBsZWZ0ID0gbGVmdC51cGRhdGVIZWlnaHQob3JhY2xlLCBvZmZzZXQsIGZvcmNlLCBtZWFzdXJlZCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGxlZnQudXBkYXRlSGVpZ2h0KG9yYWNsZSwgb2Zmc2V0LCBmb3JjZSk7XG4gICAgICAgIGlmIChtZWFzdXJlZCAmJiBtZWFzdXJlZC5mcm9tIDw9IHJpZ2h0U3RhcnQgKyByaWdodC5sZW5ndGggJiYgbWVhc3VyZWQubW9yZSlcbiAgICAgICAgICAgIHJlYmFsYW5jZSA9IHJpZ2h0ID0gcmlnaHQudXBkYXRlSGVpZ2h0KG9yYWNsZSwgcmlnaHRTdGFydCwgZm9yY2UsIG1lYXN1cmVkKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmlnaHQudXBkYXRlSGVpZ2h0KG9yYWNsZSwgcmlnaHRTdGFydCwgZm9yY2UpO1xuICAgICAgICBpZiAocmViYWxhbmNlKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmFsYW5jZWQobGVmdCwgcmlnaHQpO1xuICAgICAgICB0aGlzLmhlaWdodCA9IHRoaXMubGVmdC5oZWlnaHQgKyB0aGlzLnJpZ2h0LmhlaWdodDtcbiAgICAgICAgdGhpcy5vdXRkYXRlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7IHJldHVybiB0aGlzLmxlZnQgKyAodGhpcy5icmVhayA/IFwiIFwiIDogXCItXCIpICsgdGhpcy5yaWdodDsgfVxufVxuZnVuY3Rpb24gbWVyZ2VHYXBzKG5vZGVzLCBhcm91bmQpIHtcbiAgICBsZXQgYmVmb3JlLCBhZnRlcjtcbiAgICBpZiAobm9kZXNbYXJvdW5kXSA9PSBudWxsICYmXG4gICAgICAgIChiZWZvcmUgPSBub2Rlc1thcm91bmQgLSAxXSkgaW5zdGFuY2VvZiBIZWlnaHRNYXBHYXAgJiZcbiAgICAgICAgKGFmdGVyID0gbm9kZXNbYXJvdW5kICsgMV0pIGluc3RhbmNlb2YgSGVpZ2h0TWFwR2FwKVxuICAgICAgICBub2Rlcy5zcGxpY2UoYXJvdW5kIC0gMSwgMywgbmV3IEhlaWdodE1hcEdhcChiZWZvcmUubGVuZ3RoICsgMSArIGFmdGVyLmxlbmd0aCkpO1xufVxuY29uc3QgcmVsZXZhbnRXaWRnZXRIZWlnaHQgPSA1O1xuY2xhc3MgTm9kZUJ1aWxkZXIge1xuICAgIGNvbnN0cnVjdG9yKHBvcywgb3JhY2xlKSB7XG4gICAgICAgIHRoaXMucG9zID0gcG9zO1xuICAgICAgICB0aGlzLm9yYWNsZSA9IG9yYWNsZTtcbiAgICAgICAgdGhpcy5ub2RlcyA9IFtdO1xuICAgICAgICB0aGlzLmxpbmVTdGFydCA9IC0xO1xuICAgICAgICB0aGlzLmxpbmVFbmQgPSAtMTtcbiAgICAgICAgdGhpcy5jb3ZlcmluZyA9IG51bGw7XG4gICAgICAgIHRoaXMud3JpdHRlblRvID0gcG9zO1xuICAgIH1cbiAgICBnZXQgaXNDb3ZlcmVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb3ZlcmluZyAmJiB0aGlzLm5vZGVzW3RoaXMubm9kZXMubGVuZ3RoIC0gMV0gPT0gdGhpcy5jb3ZlcmluZztcbiAgICB9XG4gICAgc3BhbihfZnJvbSwgdG8pIHtcbiAgICAgICAgaWYgKHRoaXMubGluZVN0YXJ0ID4gLTEpIHtcbiAgICAgICAgICAgIGxldCBlbmQgPSBNYXRoLm1pbih0bywgdGhpcy5saW5lRW5kKSwgbGFzdCA9IHRoaXMubm9kZXNbdGhpcy5ub2Rlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGlmIChsYXN0IGluc3RhbmNlb2YgSGVpZ2h0TWFwVGV4dClcbiAgICAgICAgICAgICAgICBsYXN0Lmxlbmd0aCArPSBlbmQgLSB0aGlzLnBvcztcbiAgICAgICAgICAgIGVsc2UgaWYgKGVuZCA+IHRoaXMucG9zIHx8ICF0aGlzLmlzQ292ZXJlZClcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVzLnB1c2gobmV3IEhlaWdodE1hcFRleHQoZW5kIC0gdGhpcy5wb3MsIC0xKSk7XG4gICAgICAgICAgICB0aGlzLndyaXR0ZW5UbyA9IGVuZDtcbiAgICAgICAgICAgIGlmICh0byA+IGVuZCkge1xuICAgICAgICAgICAgICAgIHRoaXMubm9kZXMucHVzaChudWxsKTtcbiAgICAgICAgICAgICAgICB0aGlzLndyaXR0ZW5UbysrO1xuICAgICAgICAgICAgICAgIHRoaXMubGluZVN0YXJ0ID0gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wb3MgPSB0bztcbiAgICB9XG4gICAgcG9pbnQoZnJvbSwgdG8sIGRlY28pIHtcbiAgICAgICAgaWYgKGZyb20gPCB0byB8fCBkZWNvLmhlaWdodFJlbGV2YW50KSB7XG4gICAgICAgICAgICBsZXQgaGVpZ2h0ID0gZGVjby53aWRnZXQgPyBkZWNvLndpZGdldC5lc3RpbWF0ZWRIZWlnaHQgOiAwO1xuICAgICAgICAgICAgaWYgKGhlaWdodCA8IDApXG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gdGhpcy5vcmFjbGUubGluZUhlaWdodDtcbiAgICAgICAgICAgIGxldCBsZW4gPSB0byAtIGZyb207XG4gICAgICAgICAgICBpZiAoZGVjby5ibG9jaykge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkQmxvY2sobmV3IEhlaWdodE1hcEJsb2NrKGxlbiwgaGVpZ2h0LCBkZWNvLnR5cGUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGxlbiB8fCBoZWlnaHQgPj0gcmVsZXZhbnRXaWRnZXRIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZExpbmVEZWNvKGhlaWdodCwgbGVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0byA+IGZyb20pIHtcbiAgICAgICAgICAgIHRoaXMuc3Bhbihmcm9tLCB0byk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubGluZUVuZCA+IC0xICYmIHRoaXMubGluZUVuZCA8IHRoaXMucG9zKVxuICAgICAgICAgICAgdGhpcy5saW5lRW5kID0gdGhpcy5vcmFjbGUuZG9jLmxpbmVBdCh0aGlzLnBvcykudG87XG4gICAgfVxuICAgIGVudGVyTGluZSgpIHtcbiAgICAgICAgaWYgKHRoaXMubGluZVN0YXJ0ID4gLTEpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCB7IGZyb20sIHRvIH0gPSB0aGlzLm9yYWNsZS5kb2MubGluZUF0KHRoaXMucG9zKTtcbiAgICAgICAgdGhpcy5saW5lU3RhcnQgPSBmcm9tO1xuICAgICAgICB0aGlzLmxpbmVFbmQgPSB0bztcbiAgICAgICAgaWYgKHRoaXMud3JpdHRlblRvIDwgZnJvbSkge1xuICAgICAgICAgICAgaWYgKHRoaXMud3JpdHRlblRvIDwgZnJvbSAtIDEgfHwgdGhpcy5ub2Rlc1t0aGlzLm5vZGVzLmxlbmd0aCAtIDFdID09IG51bGwpXG4gICAgICAgICAgICAgICAgdGhpcy5ub2Rlcy5wdXNoKHRoaXMuYmxhbmtDb250ZW50KHRoaXMud3JpdHRlblRvLCBmcm9tIC0gMSkpO1xuICAgICAgICAgICAgdGhpcy5ub2Rlcy5wdXNoKG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnBvcyA+IGZyb20pXG4gICAgICAgICAgICB0aGlzLm5vZGVzLnB1c2gobmV3IEhlaWdodE1hcFRleHQodGhpcy5wb3MgLSBmcm9tLCAtMSkpO1xuICAgICAgICB0aGlzLndyaXR0ZW5UbyA9IHRoaXMucG9zO1xuICAgIH1cbiAgICBibGFua0NvbnRlbnQoZnJvbSwgdG8pIHtcbiAgICAgICAgbGV0IGdhcCA9IG5ldyBIZWlnaHRNYXBHYXAodG8gLSBmcm9tKTtcbiAgICAgICAgaWYgKHRoaXMub3JhY2xlLmRvYy5saW5lQXQoZnJvbSkudG8gPT0gdG8pXG4gICAgICAgICAgICBnYXAuZmxhZ3MgfD0gNCAvKiBGbGFnLlNpbmdsZUxpbmUgKi87XG4gICAgICAgIHJldHVybiBnYXA7XG4gICAgfVxuICAgIGVuc3VyZUxpbmUoKSB7XG4gICAgICAgIHRoaXMuZW50ZXJMaW5lKCk7XG4gICAgICAgIGxldCBsYXN0ID0gdGhpcy5ub2Rlcy5sZW5ndGggPyB0aGlzLm5vZGVzW3RoaXMubm9kZXMubGVuZ3RoIC0gMV0gOiBudWxsO1xuICAgICAgICBpZiAobGFzdCBpbnN0YW5jZW9mIEhlaWdodE1hcFRleHQpXG4gICAgICAgICAgICByZXR1cm4gbGFzdDtcbiAgICAgICAgbGV0IGxpbmUgPSBuZXcgSGVpZ2h0TWFwVGV4dCgwLCAtMSk7XG4gICAgICAgIHRoaXMubm9kZXMucHVzaChsaW5lKTtcbiAgICAgICAgcmV0dXJuIGxpbmU7XG4gICAgfVxuICAgIGFkZEJsb2NrKGJsb2NrKSB7XG4gICAgICAgIHRoaXMuZW50ZXJMaW5lKCk7XG4gICAgICAgIGlmIChibG9jay50eXBlID09IEJsb2NrVHlwZS5XaWRnZXRBZnRlciAmJiAhdGhpcy5pc0NvdmVyZWQpXG4gICAgICAgICAgICB0aGlzLmVuc3VyZUxpbmUoKTtcbiAgICAgICAgdGhpcy5ub2Rlcy5wdXNoKGJsb2NrKTtcbiAgICAgICAgdGhpcy53cml0dGVuVG8gPSB0aGlzLnBvcyA9IHRoaXMucG9zICsgYmxvY2subGVuZ3RoO1xuICAgICAgICBpZiAoYmxvY2sudHlwZSAhPSBCbG9ja1R5cGUuV2lkZ2V0QmVmb3JlKVxuICAgICAgICAgICAgdGhpcy5jb3ZlcmluZyA9IGJsb2NrO1xuICAgIH1cbiAgICBhZGRMaW5lRGVjbyhoZWlnaHQsIGxlbmd0aCkge1xuICAgICAgICBsZXQgbGluZSA9IHRoaXMuZW5zdXJlTGluZSgpO1xuICAgICAgICBsaW5lLmxlbmd0aCArPSBsZW5ndGg7XG4gICAgICAgIGxpbmUuY29sbGFwc2VkICs9IGxlbmd0aDtcbiAgICAgICAgbGluZS53aWRnZXRIZWlnaHQgPSBNYXRoLm1heChsaW5lLndpZGdldEhlaWdodCwgaGVpZ2h0KTtcbiAgICAgICAgdGhpcy53cml0dGVuVG8gPSB0aGlzLnBvcyA9IHRoaXMucG9zICsgbGVuZ3RoO1xuICAgIH1cbiAgICBmaW5pc2goZnJvbSkge1xuICAgICAgICBsZXQgbGFzdCA9IHRoaXMubm9kZXMubGVuZ3RoID09IDAgPyBudWxsIDogdGhpcy5ub2Rlc1t0aGlzLm5vZGVzLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAodGhpcy5saW5lU3RhcnQgPiAtMSAmJiAhKGxhc3QgaW5zdGFuY2VvZiBIZWlnaHRNYXBUZXh0KSAmJiAhdGhpcy5pc0NvdmVyZWQpXG4gICAgICAgICAgICB0aGlzLm5vZGVzLnB1c2gobmV3IEhlaWdodE1hcFRleHQoMCwgLTEpKTtcbiAgICAgICAgZWxzZSBpZiAodGhpcy53cml0dGVuVG8gPCB0aGlzLnBvcyB8fCBsYXN0ID09IG51bGwpXG4gICAgICAgICAgICB0aGlzLm5vZGVzLnB1c2godGhpcy5ibGFua0NvbnRlbnQodGhpcy53cml0dGVuVG8sIHRoaXMucG9zKSk7XG4gICAgICAgIGxldCBwb3MgPSBmcm9tO1xuICAgICAgICBmb3IgKGxldCBub2RlIG9mIHRoaXMubm9kZXMpIHtcbiAgICAgICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgSGVpZ2h0TWFwVGV4dClcbiAgICAgICAgICAgICAgICBub2RlLnVwZGF0ZUhlaWdodCh0aGlzLm9yYWNsZSwgcG9zKTtcbiAgICAgICAgICAgIHBvcyArPSBub2RlID8gbm9kZS5sZW5ndGggOiAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm5vZGVzO1xuICAgIH1cbiAgICAvLyBBbHdheXMgY2FsbGVkIHdpdGggYSByZWdpb24gdGhhdCBvbiBib3RoIHNpZGVzIGVpdGhlciBzdHJldGNoZXNcbiAgICAvLyB0byBhIGxpbmUgYnJlYWsgb3IgdGhlIGVuZCBvZiB0aGUgZG9jdW1lbnQuXG4gICAgLy8gVGhlIHJldHVybmVkIGFycmF5IHVzZXMgbnVsbCB0byBpbmRpY2F0ZSBsaW5lIGJyZWFrcywgYnV0IG5ldmVyXG4gICAgLy8gc3RhcnRzIG9yIGVuZHMgaW4gYSBsaW5lIGJyZWFrLCBvciBoYXMgbXVsdGlwbGUgbGluZSBicmVha3MgbmV4dFxuICAgIC8vIHRvIGVhY2ggb3RoZXIuXG4gICAgc3RhdGljIGJ1aWxkKG9yYWNsZSwgZGVjb3JhdGlvbnMsIGZyb20sIHRvKSB7XG4gICAgICAgIGxldCBidWlsZGVyID0gbmV3IE5vZGVCdWlsZGVyKGZyb20sIG9yYWNsZSk7XG4gICAgICAgIFJhbmdlU2V0LnNwYW5zKGRlY29yYXRpb25zLCBmcm9tLCB0bywgYnVpbGRlciwgMCk7XG4gICAgICAgIHJldHVybiBidWlsZGVyLmZpbmlzaChmcm9tKTtcbiAgICB9XG59XG5mdW5jdGlvbiBoZWlnaHRSZWxldmFudERlY29DaGFuZ2VzKGEsIGIsIGRpZmYpIHtcbiAgICBsZXQgY29tcCA9IG5ldyBEZWNvcmF0aW9uQ29tcGFyYXRvcjtcbiAgICBSYW5nZVNldC5jb21wYXJlKGEsIGIsIGRpZmYsIGNvbXAsIDApO1xuICAgIHJldHVybiBjb21wLmNoYW5nZXM7XG59XG5jbGFzcyBEZWNvcmF0aW9uQ29tcGFyYXRvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlcyA9IFtdO1xuICAgIH1cbiAgICBjb21wYXJlUmFuZ2UoKSB7IH1cbiAgICBjb21wYXJlUG9pbnQoZnJvbSwgdG8sIGEsIGIpIHtcbiAgICAgICAgaWYgKGZyb20gPCB0byB8fCBhICYmIGEuaGVpZ2h0UmVsZXZhbnQgfHwgYiAmJiBiLmhlaWdodFJlbGV2YW50KVxuICAgICAgICAgICAgYWRkUmFuZ2UoZnJvbSwgdG8sIHRoaXMuY2hhbmdlcywgNSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB2aXNpYmxlUGl4ZWxSYW5nZShkb20sIHBhZGRpbmdUb3ApIHtcbiAgICBsZXQgcmVjdCA9IGRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBsZXQgZG9jID0gZG9tLm93bmVyRG9jdW1lbnQsIHdpbiA9IGRvYy5kZWZhdWx0VmlldyB8fCB3aW5kb3c7XG4gICAgbGV0IGxlZnQgPSBNYXRoLm1heCgwLCByZWN0LmxlZnQpLCByaWdodCA9IE1hdGgubWluKHdpbi5pbm5lcldpZHRoLCByZWN0LnJpZ2h0KTtcbiAgICBsZXQgdG9wID0gTWF0aC5tYXgoMCwgcmVjdC50b3ApLCBib3R0b20gPSBNYXRoLm1pbih3aW4uaW5uZXJIZWlnaHQsIHJlY3QuYm90dG9tKTtcbiAgICBmb3IgKGxldCBwYXJlbnQgPSBkb20ucGFyZW50Tm9kZTsgcGFyZW50ICYmIHBhcmVudCAhPSBkb2MuYm9keTspIHtcbiAgICAgICAgaWYgKHBhcmVudC5ub2RlVHlwZSA9PSAxKSB7XG4gICAgICAgICAgICBsZXQgZWx0ID0gcGFyZW50O1xuICAgICAgICAgICAgbGV0IHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWx0KTtcbiAgICAgICAgICAgIGlmICgoZWx0LnNjcm9sbEhlaWdodCA+IGVsdC5jbGllbnRIZWlnaHQgfHwgZWx0LnNjcm9sbFdpZHRoID4gZWx0LmNsaWVudFdpZHRoKSAmJlxuICAgICAgICAgICAgICAgIHN0eWxlLm92ZXJmbG93ICE9IFwidmlzaWJsZVwiKSB7XG4gICAgICAgICAgICAgICAgbGV0IHBhcmVudFJlY3QgPSBlbHQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgbGVmdCA9IE1hdGgubWF4KGxlZnQsIHBhcmVudFJlY3QubGVmdCk7XG4gICAgICAgICAgICAgICAgcmlnaHQgPSBNYXRoLm1pbihyaWdodCwgcGFyZW50UmVjdC5yaWdodCk7XG4gICAgICAgICAgICAgICAgdG9wID0gTWF0aC5tYXgodG9wLCBwYXJlbnRSZWN0LnRvcCk7XG4gICAgICAgICAgICAgICAgYm90dG9tID0gcGFyZW50ID09IGRvbS5wYXJlbnROb2RlID8gcGFyZW50UmVjdC5ib3R0b20gOiBNYXRoLm1pbihib3R0b20sIHBhcmVudFJlY3QuYm90dG9tKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmVudCA9IHN0eWxlLnBvc2l0aW9uID09IFwiYWJzb2x1dGVcIiB8fCBzdHlsZS5wb3NpdGlvbiA9PSBcImZpeGVkXCIgPyBlbHQub2Zmc2V0UGFyZW50IDogZWx0LnBhcmVudE5vZGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocGFyZW50Lm5vZGVUeXBlID09IDExKSB7IC8vIFNoYWRvdyByb290XG4gICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQuaG9zdDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7IGxlZnQ6IGxlZnQgLSByZWN0LmxlZnQsIHJpZ2h0OiBNYXRoLm1heChsZWZ0LCByaWdodCkgLSByZWN0LmxlZnQsXG4gICAgICAgIHRvcDogdG9wIC0gKHJlY3QudG9wICsgcGFkZGluZ1RvcCksIGJvdHRvbTogTWF0aC5tYXgodG9wLCBib3R0b20pIC0gKHJlY3QudG9wICsgcGFkZGluZ1RvcCkgfTtcbn1cbmZ1bmN0aW9uIGZ1bGxQaXhlbFJhbmdlKGRvbSwgcGFkZGluZ1RvcCkge1xuICAgIGxldCByZWN0ID0gZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHJldHVybiB7IGxlZnQ6IDAsIHJpZ2h0OiByZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0LFxuICAgICAgICB0b3A6IHBhZGRpbmdUb3AsIGJvdHRvbTogcmVjdC5ib3R0b20gLSAocmVjdC50b3AgKyBwYWRkaW5nVG9wKSB9O1xufVxuLy8gTGluZSBnYXBzIGFyZSBwbGFjZWhvbGRlciB3aWRnZXRzIHVzZWQgdG8gaGlkZSBwaWVjZXMgb2Ygb3Zlcmxvbmdcbi8vIGxpbmVzIHdpdGhpbiB0aGUgdmlld3BvcnQsIGFzIGEga2x1ZGdlIHRvIGtlZXAgdGhlIGVkaXRvclxuLy8gcmVzcG9uc2l2ZSB3aGVuIGEgcmlkaWN1bG91c2x5IGxvbmcgbGluZSBpcyBsb2FkZWQgaW50byBpdC5cbmNsYXNzIExpbmVHYXAge1xuICAgIGNvbnN0cnVjdG9yKGZyb20sIHRvLCBzaXplKSB7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICAgICAgdGhpcy5zaXplID0gc2l6ZTtcbiAgICB9XG4gICAgc3RhdGljIHNhbWUoYSwgYikge1xuICAgICAgICBpZiAoYS5sZW5ndGggIT0gYi5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGdBID0gYVtpXSwgZ0IgPSBiW2ldO1xuICAgICAgICAgICAgaWYgKGdBLmZyb20gIT0gZ0IuZnJvbSB8fCBnQS50byAhPSBnQi50byB8fCBnQS5zaXplICE9IGdCLnNpemUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBkcmF3KHdyYXBwaW5nKSB7XG4gICAgICAgIHJldHVybiBEZWNvcmF0aW9uLnJlcGxhY2UoeyB3aWRnZXQ6IG5ldyBMaW5lR2FwV2lkZ2V0KHRoaXMuc2l6ZSwgd3JhcHBpbmcpIH0pLnJhbmdlKHRoaXMuZnJvbSwgdGhpcy50byk7XG4gICAgfVxufVxuY2xhc3MgTGluZUdhcFdpZGdldCBleHRlbmRzIFdpZGdldFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKHNpemUsIHZlcnRpY2FsKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gICAgICAgIHRoaXMudmVydGljYWwgPSB2ZXJ0aWNhbDtcbiAgICB9XG4gICAgZXEob3RoZXIpIHsgcmV0dXJuIG90aGVyLnNpemUgPT0gdGhpcy5zaXplICYmIG90aGVyLnZlcnRpY2FsID09IHRoaXMudmVydGljYWw7IH1cbiAgICB0b0RPTSgpIHtcbiAgICAgICAgbGV0IGVsdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGlmICh0aGlzLnZlcnRpY2FsKSB7XG4gICAgICAgICAgICBlbHQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5zaXplICsgXCJweFwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZWx0LnN0eWxlLndpZHRoID0gdGhpcy5zaXplICsgXCJweFwiO1xuICAgICAgICAgICAgZWx0LnN0eWxlLmhlaWdodCA9IFwiMnB4XCI7XG4gICAgICAgICAgICBlbHQuc3R5bGUuZGlzcGxheSA9IFwiaW5saW5lLWJsb2NrXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVsdDtcbiAgICB9XG4gICAgZ2V0IGVzdGltYXRlZEhlaWdodCgpIHsgcmV0dXJuIHRoaXMudmVydGljYWwgPyB0aGlzLnNpemUgOiAtMTsgfVxufVxuY2xhc3MgVmlld1N0YXRlIHtcbiAgICBjb25zdHJ1Y3RvcihzdGF0ZSkge1xuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgICAgIC8vIFRoZXNlIGFyZSBjb250ZW50RE9NLWxvY2FsIGNvb3JkaW5hdGVzXG4gICAgICAgIHRoaXMucGl4ZWxWaWV3cG9ydCA9IHsgbGVmdDogMCwgcmlnaHQ6IHdpbmRvdy5pbm5lcldpZHRoLCB0b3A6IDAsIGJvdHRvbTogMCB9O1xuICAgICAgICB0aGlzLmluVmlldyA9IHRydWU7XG4gICAgICAgIHRoaXMucGFkZGluZ1RvcCA9IDA7XG4gICAgICAgIHRoaXMucGFkZGluZ0JvdHRvbSA9IDA7XG4gICAgICAgIHRoaXMuY29udGVudERPTVdpZHRoID0gMDtcbiAgICAgICAgdGhpcy5jb250ZW50RE9NSGVpZ2h0ID0gMDtcbiAgICAgICAgdGhpcy5lZGl0b3JIZWlnaHQgPSAwO1xuICAgICAgICB0aGlzLmVkaXRvcldpZHRoID0gMDtcbiAgICAgICAgLy8gU2VlIFZQLk1heERPTUhlaWdodFxuICAgICAgICB0aGlzLnNjYWxlciA9IElkU2NhbGVyO1xuICAgICAgICB0aGlzLnNjcm9sbFRhcmdldCA9IG51bGw7XG4gICAgICAgIC8vIEJyaWVmbHkgc2V0IHRvIHRydWUgd2hlbiBwcmludGluZywgdG8gZGlzYWJsZSB2aWV3cG9ydCBsaW1pdGluZ1xuICAgICAgICB0aGlzLnByaW50aW5nID0gZmFsc2U7XG4gICAgICAgIC8vIEZsYWcgc2V0IHdoZW4gZWRpdG9yIGNvbnRlbnQgd2FzIHJlZHJhd24sIHNvIHRoYXQgdGhlIG5leHRcbiAgICAgICAgLy8gbWVhc3VyZSBzdGFnZSBrbm93cyBpdCBtdXN0IHJlYWQgRE9NIGxheW91dFxuICAgICAgICB0aGlzLm11c3RNZWFzdXJlQ29udGVudCA9IHRydWU7XG4gICAgICAgIHRoaXMuZGVmYXVsdFRleHREaXJlY3Rpb24gPSBEaXJlY3Rpb24uTFRSO1xuICAgICAgICB0aGlzLnZpc2libGVSYW5nZXMgPSBbXTtcbiAgICAgICAgLy8gQ3Vyc29yICdhc3NvYycgaXMgb25seSBzaWduaWZpY2FudCB3aGVuIHRoZSBjdXJzb3IgaXMgb24gYSBsaW5lXG4gICAgICAgIC8vIHdyYXAgcG9pbnQsIHdoZXJlIGl0IG11c3Qgc3RpY2sgdG8gdGhlIGNoYXJhY3RlciB0aGF0IGl0IGlzXG4gICAgICAgIC8vIGFzc29jaWF0ZWQgd2l0aC4gU2luY2UgYnJvd3NlcnMgZG9uJ3QgcHJvdmlkZSBhIHJlYXNvbmFibGVcbiAgICAgICAgLy8gaW50ZXJmYWNlIHRvIHNldCBvciBxdWVyeSB0aGlzLCB3aGVuIGEgc2VsZWN0aW9uIGlzIHNldCB0aGF0XG4gICAgICAgIC8vIG1pZ2h0IGNhdXNlIHRoaXMgdG8gYmUgc2lnbmlmaWNhbnQsIHRoaXMgZmxhZyBpcyBzZXQuIFRoZSBuZXh0XG4gICAgICAgIC8vIG1lYXN1cmUgcGhhc2Ugd2lsbCBjaGVjayB3aGV0aGVyIHRoZSBjdXJzb3IgaXMgb24gYSBsaW5lLXdyYXBwaW5nXG4gICAgICAgIC8vIGJvdW5kYXJ5IGFuZCwgaWYgc28sIHJlc2V0IGl0IHRvIG1ha2Ugc3VyZSBpdCBpcyBwb3NpdGlvbmVkIGluXG4gICAgICAgIC8vIHRoZSByaWdodCBwbGFjZS5cbiAgICAgICAgdGhpcy5tdXN0RW5mb3JjZUN1cnNvckFzc29jID0gZmFsc2U7XG4gICAgICAgIGxldCBndWVzc1dyYXBwaW5nID0gc3RhdGUuZmFjZXQoY29udGVudEF0dHJpYnV0ZXMpLnNvbWUodiA9PiB0eXBlb2YgdiAhPSBcImZ1bmN0aW9uXCIgJiYgdi5jbGFzcyA9PSBcImNtLWxpbmVXcmFwcGluZ1wiKTtcbiAgICAgICAgdGhpcy5oZWlnaHRPcmFjbGUgPSBuZXcgSGVpZ2h0T3JhY2xlKGd1ZXNzV3JhcHBpbmcpO1xuICAgICAgICB0aGlzLnN0YXRlRGVjbyA9IHN0YXRlLmZhY2V0KGRlY29yYXRpb25zKS5maWx0ZXIoZCA9PiB0eXBlb2YgZCAhPSBcImZ1bmN0aW9uXCIpO1xuICAgICAgICB0aGlzLmhlaWdodE1hcCA9IEhlaWdodE1hcC5lbXB0eSgpLmFwcGx5Q2hhbmdlcyh0aGlzLnN0YXRlRGVjbywgVGV4dC5lbXB0eSwgdGhpcy5oZWlnaHRPcmFjbGUuc2V0RG9jKHN0YXRlLmRvYyksIFtuZXcgQ2hhbmdlZFJhbmdlKDAsIDAsIDAsIHN0YXRlLmRvYy5sZW5ndGgpXSk7XG4gICAgICAgIHRoaXMudmlld3BvcnQgPSB0aGlzLmdldFZpZXdwb3J0KDAsIG51bGwpO1xuICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0TGluZXMoKTtcbiAgICAgICAgdGhpcy51cGRhdGVGb3JWaWV3cG9ydCgpO1xuICAgICAgICB0aGlzLmxpbmVHYXBzID0gdGhpcy5lbnN1cmVMaW5lR2FwcyhbXSk7XG4gICAgICAgIHRoaXMubGluZUdhcERlY28gPSBEZWNvcmF0aW9uLnNldCh0aGlzLmxpbmVHYXBzLm1hcChnYXAgPT4gZ2FwLmRyYXcoZmFsc2UpKSk7XG4gICAgICAgIHRoaXMuY29tcHV0ZVZpc2libGVSYW5nZXMoKTtcbiAgICB9XG4gICAgdXBkYXRlRm9yVmlld3BvcnQoKSB7XG4gICAgICAgIGxldCB2aWV3cG9ydHMgPSBbdGhpcy52aWV3cG9ydF0sIHsgbWFpbiB9ID0gdGhpcy5zdGF0ZS5zZWxlY3Rpb247XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IDE7IGkrKykge1xuICAgICAgICAgICAgbGV0IHBvcyA9IGkgPyBtYWluLmhlYWQgOiBtYWluLmFuY2hvcjtcbiAgICAgICAgICAgIGlmICghdmlld3BvcnRzLnNvbWUoKHsgZnJvbSwgdG8gfSkgPT4gcG9zID49IGZyb20gJiYgcG9zIDw9IHRvKSkge1xuICAgICAgICAgICAgICAgIGxldCB7IGZyb20sIHRvIH0gPSB0aGlzLmxpbmVCbG9ja0F0KHBvcyk7XG4gICAgICAgICAgICAgICAgdmlld3BvcnRzLnB1c2gobmV3IFZpZXdwb3J0KGZyb20sIHRvKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52aWV3cG9ydHMgPSB2aWV3cG9ydHMuc29ydCgoYSwgYikgPT4gYS5mcm9tIC0gYi5mcm9tKTtcbiAgICAgICAgdGhpcy5zY2FsZXIgPSB0aGlzLmhlaWdodE1hcC5oZWlnaHQgPD0gNzAwMDAwMCAvKiBWUC5NYXhET01IZWlnaHQgKi8gPyBJZFNjYWxlciA6XG4gICAgICAgICAgICBuZXcgQmlnU2NhbGVyKHRoaXMuaGVpZ2h0T3JhY2xlLmRvYywgdGhpcy5oZWlnaHRNYXAsIHRoaXMudmlld3BvcnRzKTtcbiAgICB9XG4gICAgdXBkYXRlVmlld3BvcnRMaW5lcygpIHtcbiAgICAgICAgdGhpcy52aWV3cG9ydExpbmVzID0gW107XG4gICAgICAgIHRoaXMuaGVpZ2h0TWFwLmZvckVhY2hMaW5lKHRoaXMudmlld3BvcnQuZnJvbSwgdGhpcy52aWV3cG9ydC50bywgdGhpcy5zdGF0ZS5kb2MsIDAsIDAsIGJsb2NrID0+IHtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnRMaW5lcy5wdXNoKHRoaXMuc2NhbGVyLnNjYWxlID09IDEgPyBibG9jayA6IHNjYWxlQmxvY2soYmxvY2ssIHRoaXMuc2NhbGVyKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB1cGRhdGUodXBkYXRlLCBzY3JvbGxUYXJnZXQgPSBudWxsKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB1cGRhdGUuc3RhdGU7XG4gICAgICAgIGxldCBwcmV2RGVjbyA9IHRoaXMuc3RhdGVEZWNvO1xuICAgICAgICB0aGlzLnN0YXRlRGVjbyA9IHRoaXMuc3RhdGUuZmFjZXQoZGVjb3JhdGlvbnMpLmZpbHRlcihkID0+IHR5cGVvZiBkICE9IFwiZnVuY3Rpb25cIik7XG4gICAgICAgIGxldCBjb250ZW50Q2hhbmdlcyA9IHVwZGF0ZS5jaGFuZ2VkUmFuZ2VzO1xuICAgICAgICBsZXQgaGVpZ2h0Q2hhbmdlcyA9IENoYW5nZWRSYW5nZS5leHRlbmRXaXRoUmFuZ2VzKGNvbnRlbnRDaGFuZ2VzLCBoZWlnaHRSZWxldmFudERlY29DaGFuZ2VzKHByZXZEZWNvLCB0aGlzLnN0YXRlRGVjbywgdXBkYXRlID8gdXBkYXRlLmNoYW5nZXMgOiBDaGFuZ2VTZXQuZW1wdHkodGhpcy5zdGF0ZS5kb2MubGVuZ3RoKSkpO1xuICAgICAgICBsZXQgcHJldkhlaWdodCA9IHRoaXMuaGVpZ2h0TWFwLmhlaWdodDtcbiAgICAgICAgdGhpcy5oZWlnaHRNYXAgPSB0aGlzLmhlaWdodE1hcC5hcHBseUNoYW5nZXModGhpcy5zdGF0ZURlY28sIHVwZGF0ZS5zdGFydFN0YXRlLmRvYywgdGhpcy5oZWlnaHRPcmFjbGUuc2V0RG9jKHRoaXMuc3RhdGUuZG9jKSwgaGVpZ2h0Q2hhbmdlcyk7XG4gICAgICAgIGlmICh0aGlzLmhlaWdodE1hcC5oZWlnaHQgIT0gcHJldkhlaWdodClcbiAgICAgICAgICAgIHVwZGF0ZS5mbGFncyB8PSAyIC8qIFVwZGF0ZUZsYWcuSGVpZ2h0ICovO1xuICAgICAgICBsZXQgdmlld3BvcnQgPSBoZWlnaHRDaGFuZ2VzLmxlbmd0aCA/IHRoaXMubWFwVmlld3BvcnQodGhpcy52aWV3cG9ydCwgdXBkYXRlLmNoYW5nZXMpIDogdGhpcy52aWV3cG9ydDtcbiAgICAgICAgaWYgKHNjcm9sbFRhcmdldCAmJiAoc2Nyb2xsVGFyZ2V0LnJhbmdlLmhlYWQgPCB2aWV3cG9ydC5mcm9tIHx8IHNjcm9sbFRhcmdldC5yYW5nZS5oZWFkID4gdmlld3BvcnQudG8pIHx8XG4gICAgICAgICAgICAhdGhpcy52aWV3cG9ydElzQXBwcm9wcmlhdGUodmlld3BvcnQpKVxuICAgICAgICAgICAgdmlld3BvcnQgPSB0aGlzLmdldFZpZXdwb3J0KDAsIHNjcm9sbFRhcmdldCk7XG4gICAgICAgIGxldCB1cGRhdGVMaW5lcyA9ICF1cGRhdGUuY2hhbmdlcy5lbXB0eSB8fCAodXBkYXRlLmZsYWdzICYgMiAvKiBVcGRhdGVGbGFnLkhlaWdodCAqLykgfHxcbiAgICAgICAgICAgIHZpZXdwb3J0LmZyb20gIT0gdGhpcy52aWV3cG9ydC5mcm9tIHx8IHZpZXdwb3J0LnRvICE9IHRoaXMudmlld3BvcnQudG87XG4gICAgICAgIHRoaXMudmlld3BvcnQgPSB2aWV3cG9ydDtcbiAgICAgICAgdGhpcy51cGRhdGVGb3JWaWV3cG9ydCgpO1xuICAgICAgICBpZiAodXBkYXRlTGluZXMpXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0TGluZXMoKTtcbiAgICAgICAgaWYgKHRoaXMubGluZUdhcHMubGVuZ3RoIHx8IHRoaXMudmlld3BvcnQudG8gLSB0aGlzLnZpZXdwb3J0LmZyb20gPiAoMjAwMCAvKiBMRy5NYXJnaW4gKi8gPDwgMSkpXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUxpbmVHYXBzKHRoaXMuZW5zdXJlTGluZUdhcHModGhpcy5tYXBMaW5lR2Fwcyh0aGlzLmxpbmVHYXBzLCB1cGRhdGUuY2hhbmdlcykpKTtcbiAgICAgICAgdXBkYXRlLmZsYWdzIHw9IHRoaXMuY29tcHV0ZVZpc2libGVSYW5nZXMoKTtcbiAgICAgICAgaWYgKHNjcm9sbFRhcmdldClcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVGFyZ2V0ID0gc2Nyb2xsVGFyZ2V0O1xuICAgICAgICBpZiAoIXRoaXMubXVzdEVuZm9yY2VDdXJzb3JBc3NvYyAmJiB1cGRhdGUuc2VsZWN0aW9uU2V0ICYmIHVwZGF0ZS52aWV3LmxpbmVXcmFwcGluZyAmJlxuICAgICAgICAgICAgdXBkYXRlLnN0YXRlLnNlbGVjdGlvbi5tYWluLmVtcHR5ICYmIHVwZGF0ZS5zdGF0ZS5zZWxlY3Rpb24ubWFpbi5hc3NvYyAmJlxuICAgICAgICAgICAgIXVwZGF0ZS5zdGF0ZS5mYWNldChuYXRpdmVTZWxlY3Rpb25IaWRkZW4pKVxuICAgICAgICAgICAgdGhpcy5tdXN0RW5mb3JjZUN1cnNvckFzc29jID0gdHJ1ZTtcbiAgICB9XG4gICAgbWVhc3VyZSh2aWV3KSB7XG4gICAgICAgIGxldCBkb20gPSB2aWV3LmNvbnRlbnRET00sIHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZG9tKTtcbiAgICAgICAgbGV0IG9yYWNsZSA9IHRoaXMuaGVpZ2h0T3JhY2xlO1xuICAgICAgICBsZXQgd2hpdGVTcGFjZSA9IHN0eWxlLndoaXRlU3BhY2U7XG4gICAgICAgIHRoaXMuZGVmYXVsdFRleHREaXJlY3Rpb24gPSBzdHlsZS5kaXJlY3Rpb24gPT0gXCJydGxcIiA/IERpcmVjdGlvbi5SVEwgOiBEaXJlY3Rpb24uTFRSO1xuICAgICAgICBsZXQgcmVmcmVzaCA9IHRoaXMuaGVpZ2h0T3JhY2xlLm11c3RSZWZyZXNoRm9yV3JhcHBpbmcod2hpdGVTcGFjZSk7XG4gICAgICAgIGxldCBtZWFzdXJlQ29udGVudCA9IHJlZnJlc2ggfHwgdGhpcy5tdXN0TWVhc3VyZUNvbnRlbnQgfHwgdGhpcy5jb250ZW50RE9NSGVpZ2h0ICE9IGRvbS5jbGllbnRIZWlnaHQ7XG4gICAgICAgIHRoaXMuY29udGVudERPTUhlaWdodCA9IGRvbS5jbGllbnRIZWlnaHQ7XG4gICAgICAgIHRoaXMubXVzdE1lYXN1cmVDb250ZW50ID0gZmFsc2U7XG4gICAgICAgIGxldCByZXN1bHQgPSAwLCBiaWFzID0gMDtcbiAgICAgICAgLy8gVmVydGljYWwgcGFkZGluZ1xuICAgICAgICBsZXQgcGFkZGluZ1RvcCA9IHBhcnNlSW50KHN0eWxlLnBhZGRpbmdUb3ApIHx8IDAsIHBhZGRpbmdCb3R0b20gPSBwYXJzZUludChzdHlsZS5wYWRkaW5nQm90dG9tKSB8fCAwO1xuICAgICAgICBpZiAodGhpcy5wYWRkaW5nVG9wICE9IHBhZGRpbmdUb3AgfHwgdGhpcy5wYWRkaW5nQm90dG9tICE9IHBhZGRpbmdCb3R0b20pIHtcbiAgICAgICAgICAgIHRoaXMucGFkZGluZ1RvcCA9IHBhZGRpbmdUb3A7XG4gICAgICAgICAgICB0aGlzLnBhZGRpbmdCb3R0b20gPSBwYWRkaW5nQm90dG9tO1xuICAgICAgICAgICAgcmVzdWx0IHw9IDggLyogVXBkYXRlRmxhZy5HZW9tZXRyeSAqLyB8IDIgLyogVXBkYXRlRmxhZy5IZWlnaHQgKi87XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZWRpdG9yV2lkdGggIT0gdmlldy5zY3JvbGxET00uY2xpZW50V2lkdGgpIHtcbiAgICAgICAgICAgIGlmIChvcmFjbGUubGluZVdyYXBwaW5nKVxuICAgICAgICAgICAgICAgIG1lYXN1cmVDb250ZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZWRpdG9yV2lkdGggPSB2aWV3LnNjcm9sbERPTS5jbGllbnRXaWR0aDtcbiAgICAgICAgICAgIHJlc3VsdCB8PSA4IC8qIFVwZGF0ZUZsYWcuR2VvbWV0cnkgKi87XG4gICAgICAgIH1cbiAgICAgICAgLy8gUGl4ZWwgdmlld3BvcnRcbiAgICAgICAgbGV0IHBpeGVsVmlld3BvcnQgPSAodGhpcy5wcmludGluZyA/IGZ1bGxQaXhlbFJhbmdlIDogdmlzaWJsZVBpeGVsUmFuZ2UpKGRvbSwgdGhpcy5wYWRkaW5nVG9wKTtcbiAgICAgICAgbGV0IGRUb3AgPSBwaXhlbFZpZXdwb3J0LnRvcCAtIHRoaXMucGl4ZWxWaWV3cG9ydC50b3AsIGRCb3R0b20gPSBwaXhlbFZpZXdwb3J0LmJvdHRvbSAtIHRoaXMucGl4ZWxWaWV3cG9ydC5ib3R0b207XG4gICAgICAgIHRoaXMucGl4ZWxWaWV3cG9ydCA9IHBpeGVsVmlld3BvcnQ7XG4gICAgICAgIGxldCBpblZpZXcgPSB0aGlzLnBpeGVsVmlld3BvcnQuYm90dG9tID4gdGhpcy5waXhlbFZpZXdwb3J0LnRvcCAmJiB0aGlzLnBpeGVsVmlld3BvcnQucmlnaHQgPiB0aGlzLnBpeGVsVmlld3BvcnQubGVmdDtcbiAgICAgICAgaWYgKGluVmlldyAhPSB0aGlzLmluVmlldykge1xuICAgICAgICAgICAgdGhpcy5pblZpZXcgPSBpblZpZXc7XG4gICAgICAgICAgICBpZiAoaW5WaWV3KVxuICAgICAgICAgICAgICAgIG1lYXN1cmVDb250ZW50ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuaW5WaWV3ICYmICF0aGlzLnNjcm9sbFRhcmdldClcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICBsZXQgY29udGVudFdpZHRoID0gZG9tLmNsaWVudFdpZHRoO1xuICAgICAgICBpZiAodGhpcy5jb250ZW50RE9NV2lkdGggIT0gY29udGVudFdpZHRoIHx8IHRoaXMuZWRpdG9ySGVpZ2h0ICE9IHZpZXcuc2Nyb2xsRE9NLmNsaWVudEhlaWdodCkge1xuICAgICAgICAgICAgdGhpcy5jb250ZW50RE9NV2lkdGggPSBjb250ZW50V2lkdGg7XG4gICAgICAgICAgICB0aGlzLmVkaXRvckhlaWdodCA9IHZpZXcuc2Nyb2xsRE9NLmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgIHJlc3VsdCB8PSA4IC8qIFVwZGF0ZUZsYWcuR2VvbWV0cnkgKi87XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lYXN1cmVDb250ZW50KSB7XG4gICAgICAgICAgICBsZXQgbGluZUhlaWdodHMgPSB2aWV3LmRvY1ZpZXcubWVhc3VyZVZpc2libGVMaW5lSGVpZ2h0cyh0aGlzLnZpZXdwb3J0KTtcbiAgICAgICAgICAgIGlmIChvcmFjbGUubXVzdFJlZnJlc2hGb3JIZWlnaHRzKGxpbmVIZWlnaHRzKSlcbiAgICAgICAgICAgICAgICByZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChyZWZyZXNoIHx8IG9yYWNsZS5saW5lV3JhcHBpbmcgJiYgTWF0aC5hYnMoY29udGVudFdpZHRoIC0gdGhpcy5jb250ZW50RE9NV2lkdGgpID4gb3JhY2xlLmNoYXJXaWR0aCkge1xuICAgICAgICAgICAgICAgIGxldCB7IGxpbmVIZWlnaHQsIGNoYXJXaWR0aCB9ID0gdmlldy5kb2NWaWV3Lm1lYXN1cmVUZXh0U2l6ZSgpO1xuICAgICAgICAgICAgICAgIHJlZnJlc2ggPSBsaW5lSGVpZ2h0ID4gMCAmJiBvcmFjbGUucmVmcmVzaCh3aGl0ZVNwYWNlLCBsaW5lSGVpZ2h0LCBjaGFyV2lkdGgsIGNvbnRlbnRXaWR0aCAvIGNoYXJXaWR0aCwgbGluZUhlaWdodHMpO1xuICAgICAgICAgICAgICAgIGlmIChyZWZyZXNoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcuZG9jVmlldy5taW5XaWR0aCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCB8PSA4IC8qIFVwZGF0ZUZsYWcuR2VvbWV0cnkgKi87XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRUb3AgPiAwICYmIGRCb3R0b20gPiAwKVxuICAgICAgICAgICAgICAgIGJpYXMgPSBNYXRoLm1heChkVG9wLCBkQm90dG9tKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGRUb3AgPCAwICYmIGRCb3R0b20gPCAwKVxuICAgICAgICAgICAgICAgIGJpYXMgPSBNYXRoLm1pbihkVG9wLCBkQm90dG9tKTtcbiAgICAgICAgICAgIG9yYWNsZS5oZWlnaHRDaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgICAgICBmb3IgKGxldCB2cCBvZiB0aGlzLnZpZXdwb3J0cykge1xuICAgICAgICAgICAgICAgIGxldCBoZWlnaHRzID0gdnAuZnJvbSA9PSB0aGlzLnZpZXdwb3J0LmZyb20gPyBsaW5lSGVpZ2h0cyA6IHZpZXcuZG9jVmlldy5tZWFzdXJlVmlzaWJsZUxpbmVIZWlnaHRzKHZwKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhlaWdodE1hcCA9IChyZWZyZXNoID8gSGVpZ2h0TWFwLmVtcHR5KCkuYXBwbHlDaGFuZ2VzKHRoaXMuc3RhdGVEZWNvLCBUZXh0LmVtcHR5LCB0aGlzLmhlaWdodE9yYWNsZSwgW25ldyBDaGFuZ2VkUmFuZ2UoMCwgMCwgMCwgdmlldy5zdGF0ZS5kb2MubGVuZ3RoKV0pIDogdGhpcy5oZWlnaHRNYXApLnVwZGF0ZUhlaWdodChvcmFjbGUsIDAsIHJlZnJlc2gsIG5ldyBNZWFzdXJlZEhlaWdodHModnAuZnJvbSwgaGVpZ2h0cykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9yYWNsZS5oZWlnaHRDaGFuZ2VkKVxuICAgICAgICAgICAgICAgIHJlc3VsdCB8PSAyIC8qIFVwZGF0ZUZsYWcuSGVpZ2h0ICovO1xuICAgICAgICB9XG4gICAgICAgIGxldCB2aWV3cG9ydENoYW5nZSA9ICF0aGlzLnZpZXdwb3J0SXNBcHByb3ByaWF0ZSh0aGlzLnZpZXdwb3J0LCBiaWFzKSB8fFxuICAgICAgICAgICAgdGhpcy5zY3JvbGxUYXJnZXQgJiYgKHRoaXMuc2Nyb2xsVGFyZ2V0LnJhbmdlLmhlYWQgPCB0aGlzLnZpZXdwb3J0LmZyb20gfHwgdGhpcy5zY3JvbGxUYXJnZXQucmFuZ2UuaGVhZCA+IHRoaXMudmlld3BvcnQudG8pO1xuICAgICAgICBpZiAodmlld3BvcnRDaGFuZ2UpXG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0ID0gdGhpcy5nZXRWaWV3cG9ydChiaWFzLCB0aGlzLnNjcm9sbFRhcmdldCk7XG4gICAgICAgIHRoaXMudXBkYXRlRm9yVmlld3BvcnQoKTtcbiAgICAgICAgaWYgKChyZXN1bHQgJiAyIC8qIFVwZGF0ZUZsYWcuSGVpZ2h0ICovKSB8fCB2aWV3cG9ydENoYW5nZSlcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmlld3BvcnRMaW5lcygpO1xuICAgICAgICBpZiAodGhpcy5saW5lR2Fwcy5sZW5ndGggfHwgdGhpcy52aWV3cG9ydC50byAtIHRoaXMudmlld3BvcnQuZnJvbSA+ICgyMDAwIC8qIExHLk1hcmdpbiAqLyA8PCAxKSlcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTGluZUdhcHModGhpcy5lbnN1cmVMaW5lR2FwcyhyZWZyZXNoID8gW10gOiB0aGlzLmxpbmVHYXBzLCB2aWV3KSk7XG4gICAgICAgIHJlc3VsdCB8PSB0aGlzLmNvbXB1dGVWaXNpYmxlUmFuZ2VzKCk7XG4gICAgICAgIGlmICh0aGlzLm11c3RFbmZvcmNlQ3Vyc29yQXNzb2MpIHtcbiAgICAgICAgICAgIHRoaXMubXVzdEVuZm9yY2VDdXJzb3JBc3NvYyA9IGZhbHNlO1xuICAgICAgICAgICAgLy8gVGhpcyBpcyBkb25lIGluIHRoZSByZWFkIHN0YWdlLCBiZWNhdXNlIG1vdmluZyB0aGUgc2VsZWN0aW9uXG4gICAgICAgICAgICAvLyB0byBhIGxpbmUgZW5kIGlzIGdvaW5nIHRvIHRyaWdnZXIgYSBsYXlvdXQgYW55d2F5LCBzbyBpdFxuICAgICAgICAgICAgLy8gY2FuJ3QgYmUgYSBwdXJlIHdyaXRlLiBJdCBzaG91bGQgYmUgcmFyZSB0aGF0IGl0IGRvZXMgYW55XG4gICAgICAgICAgICAvLyB3cml0aW5nLlxuICAgICAgICAgICAgdmlldy5kb2NWaWV3LmVuZm9yY2VDdXJzb3JBc3NvYygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGdldCB2aXNpYmxlVG9wKCkgeyByZXR1cm4gdGhpcy5zY2FsZXIuZnJvbURPTSh0aGlzLnBpeGVsVmlld3BvcnQudG9wKTsgfVxuICAgIGdldCB2aXNpYmxlQm90dG9tKCkgeyByZXR1cm4gdGhpcy5zY2FsZXIuZnJvbURPTSh0aGlzLnBpeGVsVmlld3BvcnQuYm90dG9tKTsgfVxuICAgIGdldFZpZXdwb3J0KGJpYXMsIHNjcm9sbFRhcmdldCkge1xuICAgICAgICAvLyBUaGlzIHdpbGwgZGl2aWRlIFZQLk1hcmdpbiBiZXR3ZWVuIHRoZSB0b3AgYW5kIHRoZVxuICAgICAgICAvLyBib3R0b20sIGRlcGVuZGluZyBvbiB0aGUgYmlhcyAodGhlIGNoYW5nZSBpbiB2aWV3cG9ydCBwb3NpdGlvblxuICAgICAgICAvLyBzaW5jZSB0aGUgbGFzdCB1cGRhdGUpLiBJdCdsbCBob2xkIGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgMVxuICAgICAgICBsZXQgbWFyZ2luVG9wID0gMC41IC0gTWF0aC5tYXgoLTAuNSwgTWF0aC5taW4oMC41LCBiaWFzIC8gMTAwMCAvKiBWUC5NYXJnaW4gKi8gLyAyKSk7XG4gICAgICAgIGxldCBtYXAgPSB0aGlzLmhlaWdodE1hcCwgZG9jID0gdGhpcy5zdGF0ZS5kb2MsIHsgdmlzaWJsZVRvcCwgdmlzaWJsZUJvdHRvbSB9ID0gdGhpcztcbiAgICAgICAgbGV0IHZpZXdwb3J0ID0gbmV3IFZpZXdwb3J0KG1hcC5saW5lQXQodmlzaWJsZVRvcCAtIG1hcmdpblRvcCAqIDEwMDAgLyogVlAuTWFyZ2luICovLCBRdWVyeVR5cGUuQnlIZWlnaHQsIGRvYywgMCwgMCkuZnJvbSwgbWFwLmxpbmVBdCh2aXNpYmxlQm90dG9tICsgKDEgLSBtYXJnaW5Ub3ApICogMTAwMCAvKiBWUC5NYXJnaW4gKi8sIFF1ZXJ5VHlwZS5CeUhlaWdodCwgZG9jLCAwLCAwKS50byk7XG4gICAgICAgIC8vIElmIHNjcm9sbFRhcmdldCBpcyBnaXZlbiwgbWFrZSBzdXJlIHRoZSB2aWV3cG9ydCBpbmNsdWRlcyB0aGF0IHBvc2l0aW9uXG4gICAgICAgIGlmIChzY3JvbGxUYXJnZXQpIHtcbiAgICAgICAgICAgIGxldCB7IGhlYWQgfSA9IHNjcm9sbFRhcmdldC5yYW5nZTtcbiAgICAgICAgICAgIGlmIChoZWFkIDwgdmlld3BvcnQuZnJvbSB8fCBoZWFkID4gdmlld3BvcnQudG8pIHtcbiAgICAgICAgICAgICAgICBsZXQgdmlld0hlaWdodCA9IE1hdGgubWluKHRoaXMuZWRpdG9ySGVpZ2h0LCB0aGlzLnBpeGVsVmlld3BvcnQuYm90dG9tIC0gdGhpcy5waXhlbFZpZXdwb3J0LnRvcCk7XG4gICAgICAgICAgICAgICAgbGV0IGJsb2NrID0gbWFwLmxpbmVBdChoZWFkLCBRdWVyeVR5cGUuQnlQb3MsIGRvYywgMCwgMCksIHRvcFBvcztcbiAgICAgICAgICAgICAgICBpZiAoc2Nyb2xsVGFyZ2V0LnkgPT0gXCJjZW50ZXJcIilcbiAgICAgICAgICAgICAgICAgICAgdG9wUG9zID0gKGJsb2NrLnRvcCArIGJsb2NrLmJvdHRvbSkgLyAyIC0gdmlld0hlaWdodCAvIDI7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoc2Nyb2xsVGFyZ2V0LnkgPT0gXCJzdGFydFwiIHx8IHNjcm9sbFRhcmdldC55ID09IFwibmVhcmVzdFwiICYmIGhlYWQgPCB2aWV3cG9ydC5mcm9tKVxuICAgICAgICAgICAgICAgICAgICB0b3BQb3MgPSBibG9jay50b3A7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICB0b3BQb3MgPSBibG9jay5ib3R0b20gLSB2aWV3SGVpZ2h0O1xuICAgICAgICAgICAgICAgIHZpZXdwb3J0ID0gbmV3IFZpZXdwb3J0KG1hcC5saW5lQXQodG9wUG9zIC0gMTAwMCAvKiBWUC5NYXJnaW4gKi8gLyAyLCBRdWVyeVR5cGUuQnlIZWlnaHQsIGRvYywgMCwgMCkuZnJvbSwgbWFwLmxpbmVBdCh0b3BQb3MgKyB2aWV3SGVpZ2h0ICsgMTAwMCAvKiBWUC5NYXJnaW4gKi8gLyAyLCBRdWVyeVR5cGUuQnlIZWlnaHQsIGRvYywgMCwgMCkudG8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2aWV3cG9ydDtcbiAgICB9XG4gICAgbWFwVmlld3BvcnQodmlld3BvcnQsIGNoYW5nZXMpIHtcbiAgICAgICAgbGV0IGZyb20gPSBjaGFuZ2VzLm1hcFBvcyh2aWV3cG9ydC5mcm9tLCAtMSksIHRvID0gY2hhbmdlcy5tYXBQb3Modmlld3BvcnQudG8sIDEpO1xuICAgICAgICByZXR1cm4gbmV3IFZpZXdwb3J0KHRoaXMuaGVpZ2h0TWFwLmxpbmVBdChmcm9tLCBRdWVyeVR5cGUuQnlQb3MsIHRoaXMuc3RhdGUuZG9jLCAwLCAwKS5mcm9tLCB0aGlzLmhlaWdodE1hcC5saW5lQXQodG8sIFF1ZXJ5VHlwZS5CeVBvcywgdGhpcy5zdGF0ZS5kb2MsIDAsIDApLnRvKTtcbiAgICB9XG4gICAgLy8gQ2hlY2tzIGlmIGEgZ2l2ZW4gdmlld3BvcnQgY292ZXJzIHRoZSB2aXNpYmxlIHBhcnQgb2YgdGhlXG4gICAgLy8gZG9jdW1lbnQgYW5kIG5vdCB0b28gbXVjaCBiZXlvbmQgdGhhdC5cbiAgICB2aWV3cG9ydElzQXBwcm9wcmlhdGUoeyBmcm9tLCB0byB9LCBiaWFzID0gMCkge1xuICAgICAgICBpZiAoIXRoaXMuaW5WaWV3KVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIGxldCB7IHRvcCB9ID0gdGhpcy5oZWlnaHRNYXAubGluZUF0KGZyb20sIFF1ZXJ5VHlwZS5CeVBvcywgdGhpcy5zdGF0ZS5kb2MsIDAsIDApO1xuICAgICAgICBsZXQgeyBib3R0b20gfSA9IHRoaXMuaGVpZ2h0TWFwLmxpbmVBdCh0bywgUXVlcnlUeXBlLkJ5UG9zLCB0aGlzLnN0YXRlLmRvYywgMCwgMCk7XG4gICAgICAgIGxldCB7IHZpc2libGVUb3AsIHZpc2libGVCb3R0b20gfSA9IHRoaXM7XG4gICAgICAgIHJldHVybiAoZnJvbSA9PSAwIHx8IHRvcCA8PSB2aXNpYmxlVG9wIC0gTWF0aC5tYXgoMTAgLyogVlAuTWluQ292ZXJNYXJnaW4gKi8sIE1hdGgubWluKC1iaWFzLCAyNTAgLyogVlAuTWF4Q292ZXJNYXJnaW4gKi8pKSkgJiZcbiAgICAgICAgICAgICh0byA9PSB0aGlzLnN0YXRlLmRvYy5sZW5ndGggfHxcbiAgICAgICAgICAgICAgICBib3R0b20gPj0gdmlzaWJsZUJvdHRvbSArIE1hdGgubWF4KDEwIC8qIFZQLk1pbkNvdmVyTWFyZ2luICovLCBNYXRoLm1pbihiaWFzLCAyNTAgLyogVlAuTWF4Q292ZXJNYXJnaW4gKi8pKSkgJiZcbiAgICAgICAgICAgICh0b3AgPiB2aXNpYmxlVG9wIC0gMiAqIDEwMDAgLyogVlAuTWFyZ2luICovICYmIGJvdHRvbSA8IHZpc2libGVCb3R0b20gKyAyICogMTAwMCAvKiBWUC5NYXJnaW4gKi8pO1xuICAgIH1cbiAgICBtYXBMaW5lR2FwcyhnYXBzLCBjaGFuZ2VzKSB7XG4gICAgICAgIGlmICghZ2Fwcy5sZW5ndGggfHwgY2hhbmdlcy5lbXB0eSlcbiAgICAgICAgICAgIHJldHVybiBnYXBzO1xuICAgICAgICBsZXQgbWFwcGVkID0gW107XG4gICAgICAgIGZvciAobGV0IGdhcCBvZiBnYXBzKVxuICAgICAgICAgICAgaWYgKCFjaGFuZ2VzLnRvdWNoZXNSYW5nZShnYXAuZnJvbSwgZ2FwLnRvKSlcbiAgICAgICAgICAgICAgICBtYXBwZWQucHVzaChuZXcgTGluZUdhcChjaGFuZ2VzLm1hcFBvcyhnYXAuZnJvbSksIGNoYW5nZXMubWFwUG9zKGdhcC50byksIGdhcC5zaXplKSk7XG4gICAgICAgIHJldHVybiBtYXBwZWQ7XG4gICAgfVxuICAgIC8vIENvbXB1dGVzIHBvc2l0aW9ucyBpbiB0aGUgdmlld3BvcnQgd2hlcmUgdGhlIHN0YXJ0IG9yIGVuZCBvZiBhXG4gICAgLy8gbGluZSBzaG91bGQgYmUgaGlkZGVuLCB0cnlpbmcgdG8gcmV1c2UgZXhpc3RpbmcgbGluZSBnYXBzIHdoZW5cbiAgICAvLyBhcHByb3ByaWF0ZSB0byBhdm9pZCB1bm5lY2Nlc2FyeSByZWRyYXdzLlxuICAgIC8vIFVzZXMgY3J1ZGUgY2hhcmFjdGVyLWNvdW50aW5nIGZvciB0aGUgcG9zaXRpb25pbmcgYW5kIHNpemluZyxcbiAgICAvLyBzaW5jZSBhY3R1YWwgRE9NIGNvb3JkaW5hdGVzIGFyZW4ndCBhbHdheXMgYXZhaWxhYmxlIGFuZFxuICAgIC8vIHByZWRpY3RhYmxlLiBSZWxpZXMgb24gZ2VuZXJvdXMgbWFyZ2lucyAoc2VlIExHLk1hcmdpbikgdG8gaGlkZVxuICAgIC8vIHRoZSBhcnRpZmFjdHMgdGhpcyBtaWdodCBwcm9kdWNlIGZyb20gdGhlIHVzZXIuXG4gICAgZW5zdXJlTGluZUdhcHMoY3VycmVudCwgbWF5TWVhc3VyZSkge1xuICAgICAgICBsZXQgd3JhcHBpbmcgPSB0aGlzLmhlaWdodE9yYWNsZS5saW5lV3JhcHBpbmc7XG4gICAgICAgIGxldCBtYXJnaW4gPSB3cmFwcGluZyA/IDEwMDAwIC8qIExHLk1hcmdpbldyYXAgKi8gOiAyMDAwIC8qIExHLk1hcmdpbiAqLywgaGFsZk1hcmdpbiA9IG1hcmdpbiA+PiAxLCBkb3VibGVNYXJnaW4gPSBtYXJnaW4gPDwgMTtcbiAgICAgICAgLy8gVGhlIG5vbi13cmFwcGluZyBsb2dpYyB3b24ndCB3b3JrIGF0IGFsbCBpbiBwcmVkb21pbmFudGx5IHJpZ2h0LXRvLWxlZnQgdGV4dC5cbiAgICAgICAgaWYgKHRoaXMuZGVmYXVsdFRleHREaXJlY3Rpb24gIT0gRGlyZWN0aW9uLkxUUiAmJiAhd3JhcHBpbmcpXG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIGxldCBnYXBzID0gW107XG4gICAgICAgIGxldCBhZGRHYXAgPSAoZnJvbSwgdG8sIGxpbmUsIHN0cnVjdHVyZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHRvIC0gZnJvbSA8IGhhbGZNYXJnaW4pXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgbGV0IHNlbCA9IHRoaXMuc3RhdGUuc2VsZWN0aW9uLm1haW4sIGF2b2lkID0gW3NlbC5mcm9tXTtcbiAgICAgICAgICAgIGlmICghc2VsLmVtcHR5KVxuICAgICAgICAgICAgICAgIGF2b2lkLnB1c2goc2VsLnRvKTtcbiAgICAgICAgICAgIGZvciAobGV0IHBvcyBvZiBhdm9pZCkge1xuICAgICAgICAgICAgICAgIGlmIChwb3MgPiBmcm9tICYmIHBvcyA8IHRvKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZEdhcChmcm9tLCBwb3MgLSAxMCAvKiBMRy5TZWxlY3Rpb25NYXJnaW4gKi8sIGxpbmUsIHN0cnVjdHVyZSk7XG4gICAgICAgICAgICAgICAgICAgIGFkZEdhcChwb3MgKyAxMCAvKiBMRy5TZWxlY3Rpb25NYXJnaW4gKi8sIHRvLCBsaW5lLCBzdHJ1Y3R1cmUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGdhcCA9IGZpbmQoY3VycmVudCwgZ2FwID0+IGdhcC5mcm9tID49IGxpbmUuZnJvbSAmJiBnYXAudG8gPD0gbGluZS50byAmJlxuICAgICAgICAgICAgICAgIE1hdGguYWJzKGdhcC5mcm9tIC0gZnJvbSkgPCBoYWxmTWFyZ2luICYmIE1hdGguYWJzKGdhcC50byAtIHRvKSA8IGhhbGZNYXJnaW4gJiZcbiAgICAgICAgICAgICAgICAhYXZvaWQuc29tZShwb3MgPT4gZ2FwLmZyb20gPCBwb3MgJiYgZ2FwLnRvID4gcG9zKSk7XG4gICAgICAgICAgICBpZiAoIWdhcCkge1xuICAgICAgICAgICAgICAgIC8vIFdoZW4gc2Nyb2xsaW5nIGRvd24sIHNuYXAgZ2FwIGVuZHMgdG8gbGluZSBzdGFydHMgdG8gYXZvaWQgc2hpZnRzIGluIHdyYXBwaW5nXG4gICAgICAgICAgICAgICAgaWYgKHRvIDwgbGluZS50byAmJiBtYXlNZWFzdXJlICYmIHdyYXBwaW5nICYmXG4gICAgICAgICAgICAgICAgICAgIG1heU1lYXN1cmUudmlzaWJsZVJhbmdlcy5zb21lKHIgPT4gci5mcm9tIDw9IHRvICYmIHIudG8gPj0gdG8pKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBsaW5lU3RhcnQgPSBtYXlNZWFzdXJlLm1vdmVUb0xpbmVCb3VuZGFyeShFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHRvKSwgZmFsc2UsIHRydWUpLmhlYWQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW5lU3RhcnQgPiBmcm9tKVxuICAgICAgICAgICAgICAgICAgICAgICAgdG8gPSBsaW5lU3RhcnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdhcCA9IG5ldyBMaW5lR2FwKGZyb20sIHRvLCB0aGlzLmdhcFNpemUobGluZSwgZnJvbSwgdG8sIHN0cnVjdHVyZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ2Fwcy5wdXNoKGdhcCk7XG4gICAgICAgIH07XG4gICAgICAgIGZvciAobGV0IGxpbmUgb2YgdGhpcy52aWV3cG9ydExpbmVzKSB7XG4gICAgICAgICAgICBpZiAobGluZS5sZW5ndGggPCBkb3VibGVNYXJnaW4pXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBsZXQgc3RydWN0dXJlID0gbGluZVN0cnVjdHVyZShsaW5lLmZyb20sIGxpbmUudG8sIHRoaXMuc3RhdGVEZWNvKTtcbiAgICAgICAgICAgIGlmIChzdHJ1Y3R1cmUudG90YWwgPCBkb3VibGVNYXJnaW4pXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBsZXQgdGFyZ2V0ID0gdGhpcy5zY3JvbGxUYXJnZXQgPyB0aGlzLnNjcm9sbFRhcmdldC5yYW5nZS5oZWFkIDogbnVsbDtcbiAgICAgICAgICAgIGxldCB2aWV3RnJvbSwgdmlld1RvO1xuICAgICAgICAgICAgaWYgKHdyYXBwaW5nKSB7XG4gICAgICAgICAgICAgICAgbGV0IG1hcmdpbkhlaWdodCA9IChtYXJnaW4gLyB0aGlzLmhlaWdodE9yYWNsZS5saW5lTGVuZ3RoKSAqIHRoaXMuaGVpZ2h0T3JhY2xlLmxpbmVIZWlnaHQ7XG4gICAgICAgICAgICAgICAgbGV0IHRvcCwgYm90O1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0RnJhYyA9IGZpbmRGcmFjdGlvbihzdHJ1Y3R1cmUsIHRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzcGFjZUZyYWMgPSAoKHRoaXMudmlzaWJsZUJvdHRvbSAtIHRoaXMudmlzaWJsZVRvcCkgLyAyICsgbWFyZ2luSGVpZ2h0KSAvIGxpbmUuaGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICB0b3AgPSB0YXJnZXRGcmFjIC0gc3BhY2VGcmFjO1xuICAgICAgICAgICAgICAgICAgICBib3QgPSB0YXJnZXRGcmFjICsgc3BhY2VGcmFjO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdG9wID0gKHRoaXMudmlzaWJsZVRvcCAtIGxpbmUudG9wIC0gbWFyZ2luSGVpZ2h0KSAvIGxpbmUuaGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBib3QgPSAodGhpcy52aXNpYmxlQm90dG9tIC0gbGluZS50b3AgKyBtYXJnaW5IZWlnaHQpIC8gbGluZS5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZpZXdGcm9tID0gZmluZFBvc2l0aW9uKHN0cnVjdHVyZSwgdG9wKTtcbiAgICAgICAgICAgICAgICB2aWV3VG8gPSBmaW5kUG9zaXRpb24oc3RydWN0dXJlLCBib3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IHRvdGFsV2lkdGggPSBzdHJ1Y3R1cmUudG90YWwgKiB0aGlzLmhlaWdodE9yYWNsZS5jaGFyV2lkdGg7XG4gICAgICAgICAgICAgICAgbGV0IG1hcmdpbldpZHRoID0gbWFyZ2luICogdGhpcy5oZWlnaHRPcmFjbGUuY2hhcldpZHRoO1xuICAgICAgICAgICAgICAgIGxldCBsZWZ0LCByaWdodDtcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhcmdldEZyYWMgPSBmaW5kRnJhY3Rpb24oc3RydWN0dXJlLCB0YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgc3BhY2VGcmFjID0gKCh0aGlzLnBpeGVsVmlld3BvcnQucmlnaHQgLSB0aGlzLnBpeGVsVmlld3BvcnQubGVmdCkgLyAyICsgbWFyZ2luV2lkdGgpIC8gdG90YWxXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHRhcmdldEZyYWMgLSBzcGFjZUZyYWM7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0gdGFyZ2V0RnJhYyArIHNwYWNlRnJhYztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQgPSAodGhpcy5waXhlbFZpZXdwb3J0LmxlZnQgLSBtYXJnaW5XaWR0aCkgLyB0b3RhbFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICByaWdodCA9ICh0aGlzLnBpeGVsVmlld3BvcnQucmlnaHQgKyBtYXJnaW5XaWR0aCkgLyB0b3RhbFdpZHRoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2aWV3RnJvbSA9IGZpbmRQb3NpdGlvbihzdHJ1Y3R1cmUsIGxlZnQpO1xuICAgICAgICAgICAgICAgIHZpZXdUbyA9IGZpbmRQb3NpdGlvbihzdHJ1Y3R1cmUsIHJpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2aWV3RnJvbSA+IGxpbmUuZnJvbSlcbiAgICAgICAgICAgICAgICBhZGRHYXAobGluZS5mcm9tLCB2aWV3RnJvbSwgbGluZSwgc3RydWN0dXJlKTtcbiAgICAgICAgICAgIGlmICh2aWV3VG8gPCBsaW5lLnRvKVxuICAgICAgICAgICAgICAgIGFkZEdhcCh2aWV3VG8sIGxpbmUudG8sIGxpbmUsIHN0cnVjdHVyZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdhcHM7XG4gICAgfVxuICAgIGdhcFNpemUobGluZSwgZnJvbSwgdG8sIHN0cnVjdHVyZSkge1xuICAgICAgICBsZXQgZnJhY3Rpb24gPSBmaW5kRnJhY3Rpb24oc3RydWN0dXJlLCB0bykgLSBmaW5kRnJhY3Rpb24oc3RydWN0dXJlLCBmcm9tKTtcbiAgICAgICAgaWYgKHRoaXMuaGVpZ2h0T3JhY2xlLmxpbmVXcmFwcGluZykge1xuICAgICAgICAgICAgcmV0dXJuIGxpbmUuaGVpZ2h0ICogZnJhY3Rpb247XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gc3RydWN0dXJlLnRvdGFsICogdGhpcy5oZWlnaHRPcmFjbGUuY2hhcldpZHRoICogZnJhY3Rpb247XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlTGluZUdhcHMoZ2Fwcykge1xuICAgICAgICBpZiAoIUxpbmVHYXAuc2FtZShnYXBzLCB0aGlzLmxpbmVHYXBzKSkge1xuICAgICAgICAgICAgdGhpcy5saW5lR2FwcyA9IGdhcHM7XG4gICAgICAgICAgICB0aGlzLmxpbmVHYXBEZWNvID0gRGVjb3JhdGlvbi5zZXQoZ2Fwcy5tYXAoZ2FwID0+IGdhcC5kcmF3KHRoaXMuaGVpZ2h0T3JhY2xlLmxpbmVXcmFwcGluZykpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb21wdXRlVmlzaWJsZVJhbmdlcygpIHtcbiAgICAgICAgbGV0IGRlY28gPSB0aGlzLnN0YXRlRGVjbztcbiAgICAgICAgaWYgKHRoaXMubGluZUdhcHMubGVuZ3RoKVxuICAgICAgICAgICAgZGVjbyA9IGRlY28uY29uY2F0KHRoaXMubGluZUdhcERlY28pO1xuICAgICAgICBsZXQgcmFuZ2VzID0gW107XG4gICAgICAgIFJhbmdlU2V0LnNwYW5zKGRlY28sIHRoaXMudmlld3BvcnQuZnJvbSwgdGhpcy52aWV3cG9ydC50bywge1xuICAgICAgICAgICAgc3Bhbihmcm9tLCB0bykgeyByYW5nZXMucHVzaCh7IGZyb20sIHRvIH0pOyB9LFxuICAgICAgICAgICAgcG9pbnQoKSB7IH1cbiAgICAgICAgfSwgMjApO1xuICAgICAgICBsZXQgY2hhbmdlZCA9IHJhbmdlcy5sZW5ndGggIT0gdGhpcy52aXNpYmxlUmFuZ2VzLmxlbmd0aCB8fFxuICAgICAgICAgICAgdGhpcy52aXNpYmxlUmFuZ2VzLnNvbWUoKHIsIGkpID0+IHIuZnJvbSAhPSByYW5nZXNbaV0uZnJvbSB8fCByLnRvICE9IHJhbmdlc1tpXS50byk7XG4gICAgICAgIHRoaXMudmlzaWJsZVJhbmdlcyA9IHJhbmdlcztcbiAgICAgICAgcmV0dXJuIGNoYW5nZWQgPyA0IC8qIFVwZGF0ZUZsYWcuVmlld3BvcnQgKi8gOiAwO1xuICAgIH1cbiAgICBsaW5lQmxvY2tBdChwb3MpIHtcbiAgICAgICAgcmV0dXJuIChwb3MgPj0gdGhpcy52aWV3cG9ydC5mcm9tICYmIHBvcyA8PSB0aGlzLnZpZXdwb3J0LnRvICYmIHRoaXMudmlld3BvcnRMaW5lcy5maW5kKGIgPT4gYi5mcm9tIDw9IHBvcyAmJiBiLnRvID49IHBvcykpIHx8XG4gICAgICAgICAgICBzY2FsZUJsb2NrKHRoaXMuaGVpZ2h0TWFwLmxpbmVBdChwb3MsIFF1ZXJ5VHlwZS5CeVBvcywgdGhpcy5zdGF0ZS5kb2MsIDAsIDApLCB0aGlzLnNjYWxlcik7XG4gICAgfVxuICAgIGxpbmVCbG9ja0F0SGVpZ2h0KGhlaWdodCkge1xuICAgICAgICByZXR1cm4gc2NhbGVCbG9jayh0aGlzLmhlaWdodE1hcC5saW5lQXQodGhpcy5zY2FsZXIuZnJvbURPTShoZWlnaHQpLCBRdWVyeVR5cGUuQnlIZWlnaHQsIHRoaXMuc3RhdGUuZG9jLCAwLCAwKSwgdGhpcy5zY2FsZXIpO1xuICAgIH1cbiAgICBlbGVtZW50QXRIZWlnaHQoaGVpZ2h0KSB7XG4gICAgICAgIHJldHVybiBzY2FsZUJsb2NrKHRoaXMuaGVpZ2h0TWFwLmJsb2NrQXQodGhpcy5zY2FsZXIuZnJvbURPTShoZWlnaHQpLCB0aGlzLnN0YXRlLmRvYywgMCwgMCksIHRoaXMuc2NhbGVyKTtcbiAgICB9XG4gICAgZ2V0IGRvY0hlaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NhbGVyLnRvRE9NKHRoaXMuaGVpZ2h0TWFwLmhlaWdodCk7XG4gICAgfVxuICAgIGdldCBjb250ZW50SGVpZ2h0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2NIZWlnaHQgKyB0aGlzLnBhZGRpbmdUb3AgKyB0aGlzLnBhZGRpbmdCb3R0b207XG4gICAgfVxufVxuY2xhc3MgVmlld3BvcnQge1xuICAgIGNvbnN0cnVjdG9yKGZyb20sIHRvKSB7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICB9XG59XG5mdW5jdGlvbiBsaW5lU3RydWN0dXJlKGZyb20sIHRvLCBzdGF0ZURlY28pIHtcbiAgICBsZXQgcmFuZ2VzID0gW10sIHBvcyA9IGZyb20sIHRvdGFsID0gMDtcbiAgICBSYW5nZVNldC5zcGFucyhzdGF0ZURlY28sIGZyb20sIHRvLCB7XG4gICAgICAgIHNwYW4oKSB7IH0sXG4gICAgICAgIHBvaW50KGZyb20sIHRvKSB7XG4gICAgICAgICAgICBpZiAoZnJvbSA+IHBvcykge1xuICAgICAgICAgICAgICAgIHJhbmdlcy5wdXNoKHsgZnJvbTogcG9zLCB0bzogZnJvbSB9KTtcbiAgICAgICAgICAgICAgICB0b3RhbCArPSBmcm9tIC0gcG9zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcG9zID0gdG87XG4gICAgICAgIH1cbiAgICB9LCAyMCk7IC8vIFdlJ3JlIG9ubHkgaW50ZXJlc3RlZCBpbiBjb2xsYXBzZWQgcmFuZ2VzIG9mIGEgc2lnbmlmaWNhbnQgc2l6ZVxuICAgIGlmIChwb3MgPCB0bykge1xuICAgICAgICByYW5nZXMucHVzaCh7IGZyb206IHBvcywgdG8gfSk7XG4gICAgICAgIHRvdGFsICs9IHRvIC0gcG9zO1xuICAgIH1cbiAgICByZXR1cm4geyB0b3RhbCwgcmFuZ2VzIH07XG59XG5mdW5jdGlvbiBmaW5kUG9zaXRpb24oeyB0b3RhbCwgcmFuZ2VzIH0sIHJhdGlvKSB7XG4gICAgaWYgKHJhdGlvIDw9IDApXG4gICAgICAgIHJldHVybiByYW5nZXNbMF0uZnJvbTtcbiAgICBpZiAocmF0aW8gPj0gMSlcbiAgICAgICAgcmV0dXJuIHJhbmdlc1tyYW5nZXMubGVuZ3RoIC0gMV0udG87XG4gICAgbGV0IGRpc3QgPSBNYXRoLmZsb29yKHRvdGFsICogcmF0aW8pO1xuICAgIGZvciAobGV0IGkgPSAwOzsgaSsrKSB7XG4gICAgICAgIGxldCB7IGZyb20sIHRvIH0gPSByYW5nZXNbaV0sIHNpemUgPSB0byAtIGZyb207XG4gICAgICAgIGlmIChkaXN0IDw9IHNpemUpXG4gICAgICAgICAgICByZXR1cm4gZnJvbSArIGRpc3Q7XG4gICAgICAgIGRpc3QgLT0gc2l6ZTtcbiAgICB9XG59XG5mdW5jdGlvbiBmaW5kRnJhY3Rpb24oc3RydWN0dXJlLCBwb3MpIHtcbiAgICBsZXQgY291bnRlZCA9IDA7XG4gICAgZm9yIChsZXQgeyBmcm9tLCB0byB9IG9mIHN0cnVjdHVyZS5yYW5nZXMpIHtcbiAgICAgICAgaWYgKHBvcyA8PSB0bykge1xuICAgICAgICAgICAgY291bnRlZCArPSBwb3MgLSBmcm9tO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY291bnRlZCArPSB0byAtIGZyb207XG4gICAgfVxuICAgIHJldHVybiBjb3VudGVkIC8gc3RydWN0dXJlLnRvdGFsO1xufVxuZnVuY3Rpb24gZmluZChhcnJheSwgZikge1xuICAgIGZvciAobGV0IHZhbCBvZiBhcnJheSlcbiAgICAgICAgaWYgKGYodmFsKSlcbiAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbi8vIERvbid0IHNjYWxlIHdoZW4gdGhlIGRvY3VtZW50IGhlaWdodCBpcyB3aXRoaW4gdGhlIHJhbmdlIG9mIHdoYXRcbi8vIHRoZSBET00gY2FuIGhhbmRsZS5cbmNvbnN0IElkU2NhbGVyID0ge1xuICAgIHRvRE9NKG4pIHsgcmV0dXJuIG47IH0sXG4gICAgZnJvbURPTShuKSB7IHJldHVybiBuOyB9LFxuICAgIHNjYWxlOiAxXG59O1xuLy8gV2hlbiB0aGUgaGVpZ2h0IGlzIHRvbyBiaWcgKD4gVlAuTWF4RE9NSGVpZ2h0KSwgc2NhbGUgZG93biB0aGVcbi8vIHJlZ2lvbnMgb3V0c2lkZSB0aGUgdmlld3BvcnRzIHNvIHRoYXQgdGhlIHRvdGFsIGhlaWdodCBpc1xuLy8gVlAuTWF4RE9NSGVpZ2h0LlxuY2xhc3MgQmlnU2NhbGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihkb2MsIGhlaWdodE1hcCwgdmlld3BvcnRzKSB7XG4gICAgICAgIGxldCB2cEhlaWdodCA9IDAsIGJhc2UgPSAwLCBkb21CYXNlID0gMDtcbiAgICAgICAgdGhpcy52aWV3cG9ydHMgPSB2aWV3cG9ydHMubWFwKCh7IGZyb20sIHRvIH0pID0+IHtcbiAgICAgICAgICAgIGxldCB0b3AgPSBoZWlnaHRNYXAubGluZUF0KGZyb20sIFF1ZXJ5VHlwZS5CeVBvcywgZG9jLCAwLCAwKS50b3A7XG4gICAgICAgICAgICBsZXQgYm90dG9tID0gaGVpZ2h0TWFwLmxpbmVBdCh0bywgUXVlcnlUeXBlLkJ5UG9zLCBkb2MsIDAsIDApLmJvdHRvbTtcbiAgICAgICAgICAgIHZwSGVpZ2h0ICs9IGJvdHRvbSAtIHRvcDtcbiAgICAgICAgICAgIHJldHVybiB7IGZyb20sIHRvLCB0b3AsIGJvdHRvbSwgZG9tVG9wOiAwLCBkb21Cb3R0b206IDAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2NhbGUgPSAoNzAwMDAwMCAvKiBWUC5NYXhET01IZWlnaHQgKi8gLSB2cEhlaWdodCkgLyAoaGVpZ2h0TWFwLmhlaWdodCAtIHZwSGVpZ2h0KTtcbiAgICAgICAgZm9yIChsZXQgb2JqIG9mIHRoaXMudmlld3BvcnRzKSB7XG4gICAgICAgICAgICBvYmouZG9tVG9wID0gZG9tQmFzZSArIChvYmoudG9wIC0gYmFzZSkgKiB0aGlzLnNjYWxlO1xuICAgICAgICAgICAgZG9tQmFzZSA9IG9iai5kb21Cb3R0b20gPSBvYmouZG9tVG9wICsgKG9iai5ib3R0b20gLSBvYmoudG9wKTtcbiAgICAgICAgICAgIGJhc2UgPSBvYmouYm90dG9tO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvRE9NKG4pIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGJhc2UgPSAwLCBkb21CYXNlID0gMDs7IGkrKykge1xuICAgICAgICAgICAgbGV0IHZwID0gaSA8IHRoaXMudmlld3BvcnRzLmxlbmd0aCA/IHRoaXMudmlld3BvcnRzW2ldIDogbnVsbDtcbiAgICAgICAgICAgIGlmICghdnAgfHwgbiA8IHZwLnRvcClcbiAgICAgICAgICAgICAgICByZXR1cm4gZG9tQmFzZSArIChuIC0gYmFzZSkgKiB0aGlzLnNjYWxlO1xuICAgICAgICAgICAgaWYgKG4gPD0gdnAuYm90dG9tKVxuICAgICAgICAgICAgICAgIHJldHVybiB2cC5kb21Ub3AgKyAobiAtIHZwLnRvcCk7XG4gICAgICAgICAgICBiYXNlID0gdnAuYm90dG9tO1xuICAgICAgICAgICAgZG9tQmFzZSA9IHZwLmRvbUJvdHRvbTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmcm9tRE9NKG4pIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGJhc2UgPSAwLCBkb21CYXNlID0gMDs7IGkrKykge1xuICAgICAgICAgICAgbGV0IHZwID0gaSA8IHRoaXMudmlld3BvcnRzLmxlbmd0aCA/IHRoaXMudmlld3BvcnRzW2ldIDogbnVsbDtcbiAgICAgICAgICAgIGlmICghdnAgfHwgbiA8IHZwLmRvbVRvcClcbiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZSArIChuIC0gZG9tQmFzZSkgLyB0aGlzLnNjYWxlO1xuICAgICAgICAgICAgaWYgKG4gPD0gdnAuZG9tQm90dG9tKVxuICAgICAgICAgICAgICAgIHJldHVybiB2cC50b3AgKyAobiAtIHZwLmRvbVRvcCk7XG4gICAgICAgICAgICBiYXNlID0gdnAuYm90dG9tO1xuICAgICAgICAgICAgZG9tQmFzZSA9IHZwLmRvbUJvdHRvbTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIHNjYWxlQmxvY2soYmxvY2ssIHNjYWxlcikge1xuICAgIGlmIChzY2FsZXIuc2NhbGUgPT0gMSlcbiAgICAgICAgcmV0dXJuIGJsb2NrO1xuICAgIGxldCBiVG9wID0gc2NhbGVyLnRvRE9NKGJsb2NrLnRvcCksIGJCb3R0b20gPSBzY2FsZXIudG9ET00oYmxvY2suYm90dG9tKTtcbiAgICByZXR1cm4gbmV3IEJsb2NrSW5mbyhibG9jay5mcm9tLCBibG9jay5sZW5ndGgsIGJUb3AsIGJCb3R0b20gLSBiVG9wLCBBcnJheS5pc0FycmF5KGJsb2NrLnR5cGUpID8gYmxvY2sudHlwZS5tYXAoYiA9PiBzY2FsZUJsb2NrKGIsIHNjYWxlcikpIDogYmxvY2sudHlwZSk7XG59XG5cbmNvbnN0IHRoZW1lID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7IGNvbWJpbmU6IHN0cnMgPT4gc3Rycy5qb2luKFwiIFwiKSB9KTtcbmNvbnN0IGRhcmtUaGVtZSA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoeyBjb21iaW5lOiB2YWx1ZXMgPT4gdmFsdWVzLmluZGV4T2YodHJ1ZSkgPiAtMSB9KTtcbmNvbnN0IGJhc2VUaGVtZUlEID0gLypAX19QVVJFX18qL1N0eWxlTW9kdWxlLm5ld05hbWUoKSwgYmFzZUxpZ2h0SUQgPSAvKkBfX1BVUkVfXyovU3R5bGVNb2R1bGUubmV3TmFtZSgpLCBiYXNlRGFya0lEID0gLypAX19QVVJFX18qL1N0eWxlTW9kdWxlLm5ld05hbWUoKTtcbmNvbnN0IGxpZ2h0RGFya0lEcyA9IHsgXCImbGlnaHRcIjogXCIuXCIgKyBiYXNlTGlnaHRJRCwgXCImZGFya1wiOiBcIi5cIiArIGJhc2VEYXJrSUQgfTtcbmZ1bmN0aW9uIGJ1aWxkVGhlbWUobWFpbiwgc3BlYywgc2NvcGVzKSB7XG4gICAgcmV0dXJuIG5ldyBTdHlsZU1vZHVsZShzcGVjLCB7XG4gICAgICAgIGZpbmlzaChzZWwpIHtcbiAgICAgICAgICAgIHJldHVybiAvJi8udGVzdChzZWwpID8gc2VsLnJlcGxhY2UoLyZcXHcqLywgbSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG0gPT0gXCImXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtYWluO1xuICAgICAgICAgICAgICAgIGlmICghc2NvcGVzIHx8ICFzY29wZXNbbV0pXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBVbnN1cHBvcnRlZCBzZWxlY3RvcjogJHttfWApO1xuICAgICAgICAgICAgICAgIHJldHVybiBzY29wZXNbbV07XG4gICAgICAgICAgICB9KSA6IG1haW4gKyBcIiBcIiArIHNlbDtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuY29uc3QgYmFzZVRoZW1lJDEgPSAvKkBfX1BVUkVfXyovYnVpbGRUaGVtZShcIi5cIiArIGJhc2VUaGVtZUlELCB7XG4gICAgXCImLmNtLWVkaXRvclwiOiB7XG4gICAgICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlICFpbXBvcnRhbnRcIixcbiAgICAgICAgYm94U2l6aW5nOiBcImJvcmRlci1ib3hcIixcbiAgICAgICAgXCImLmNtLWZvY3VzZWRcIjoge1xuICAgICAgICAgICAgLy8gUHJvdmlkZSBhIHNpbXBsZSBkZWZhdWx0IG91dGxpbmUgdG8gbWFrZSBzdXJlIGEgZm9jdXNlZFxuICAgICAgICAgICAgLy8gZWRpdG9yIGlzIHZpc3VhbGx5IGRpc3RpbmN0LiBDYW4ndCBsZWF2ZSB0aGUgZGVmYXVsdCBiZWhhdmlvclxuICAgICAgICAgICAgLy8gYmVjYXVzZSB0aGF0IHdpbGwgYXBwbHkgdG8gdGhlIGNvbnRlbnQgZWxlbWVudCwgd2hpY2ggaXNcbiAgICAgICAgICAgIC8vIGluc2lkZSB0aGUgc2Nyb2xsYWJsZSBjb250YWluZXIgYW5kIGRvZXNuJ3QgaW5jbHVkZSB0aGVcbiAgICAgICAgICAgIC8vIGd1dHRlcnMuIFdlIGFsc28gY2FuJ3QgdXNlIGFuICdhdXRvJyBvdXRsaW5lLCBzaW5jZSB0aG9zZVxuICAgICAgICAgICAgLy8gYXJlLCBmb3Igc29tZSByZWFzb24sIGRyYXduIGJlaGluZCB0aGUgZWxlbWVudCBjb250ZW50LCB3aGljaFxuICAgICAgICAgICAgLy8gd2lsbCBjYXVzZSB0aGluZ3MgbGlrZSB0aGUgYWN0aXZlIGxpbmUgYmFja2dyb3VuZCB0byBjb3ZlclxuICAgICAgICAgICAgLy8gdGhlIG91dGxpbmUgKCMyOTcpLlxuICAgICAgICAgICAgb3V0bGluZTogXCIxcHggZG90dGVkICMyMTIxMjFcIlxuICAgICAgICB9LFxuICAgICAgICBkaXNwbGF5OiBcImZsZXggIWltcG9ydGFudFwiLFxuICAgICAgICBmbGV4RGlyZWN0aW9uOiBcImNvbHVtblwiXG4gICAgfSxcbiAgICBcIi5jbS1zY3JvbGxlclwiOiB7XG4gICAgICAgIGRpc3BsYXk6IFwiZmxleCAhaW1wb3J0YW50XCIsXG4gICAgICAgIGFsaWduSXRlbXM6IFwiZmxleC1zdGFydCAhaW1wb3J0YW50XCIsXG4gICAgICAgIGZvbnRGYW1pbHk6IFwibW9ub3NwYWNlXCIsXG4gICAgICAgIGxpbmVIZWlnaHQ6IDEuNCxcbiAgICAgICAgaGVpZ2h0OiBcIjEwMCVcIixcbiAgICAgICAgb3ZlcmZsb3dYOiBcImF1dG9cIixcbiAgICAgICAgcG9zaXRpb246IFwicmVsYXRpdmVcIixcbiAgICAgICAgekluZGV4OiAwXG4gICAgfSxcbiAgICBcIi5jbS1jb250ZW50XCI6IHtcbiAgICAgICAgbWFyZ2luOiAwLFxuICAgICAgICBmbGV4R3JvdzogMixcbiAgICAgICAgZmxleFNocmluazogMCxcbiAgICAgICAgbWluSGVpZ2h0OiBcIjEwMCVcIixcbiAgICAgICAgZGlzcGxheTogXCJibG9ja1wiLFxuICAgICAgICB3aGl0ZVNwYWNlOiBcInByZVwiLFxuICAgICAgICB3b3JkV3JhcDogXCJub3JtYWxcIixcbiAgICAgICAgYm94U2l6aW5nOiBcImJvcmRlci1ib3hcIixcbiAgICAgICAgcGFkZGluZzogXCI0cHggMFwiLFxuICAgICAgICBvdXRsaW5lOiBcIm5vbmVcIixcbiAgICAgICAgXCImW2NvbnRlbnRlZGl0YWJsZT10cnVlXVwiOiB7XG4gICAgICAgICAgICBXZWJraXRVc2VyTW9kaWZ5OiBcInJlYWQtd3JpdGUtcGxhaW50ZXh0LW9ubHlcIixcbiAgICAgICAgfVxuICAgIH0sXG4gICAgXCIuY20tbGluZVdyYXBwaW5nXCI6IHtcbiAgICAgICAgd2hpdGVTcGFjZV9mYWxsYmFjazogXCJwcmUtd3JhcFwiLFxuICAgICAgICB3aGl0ZVNwYWNlOiBcImJyZWFrLXNwYWNlc1wiLFxuICAgICAgICB3b3JkQnJlYWs6IFwiYnJlYWstd29yZFwiLFxuICAgICAgICBvdmVyZmxvd1dyYXA6IFwiYW55d2hlcmVcIixcbiAgICAgICAgZmxleFNocmluazogMVxuICAgIH0sXG4gICAgXCImbGlnaHQgLmNtLWNvbnRlbnRcIjogeyBjYXJldENvbG9yOiBcImJsYWNrXCIgfSxcbiAgICBcIiZkYXJrIC5jbS1jb250ZW50XCI6IHsgY2FyZXRDb2xvcjogXCJ3aGl0ZVwiIH0sXG4gICAgXCIuY20tbGluZVwiOiB7XG4gICAgICAgIGRpc3BsYXk6IFwiYmxvY2tcIixcbiAgICAgICAgcGFkZGluZzogXCIwIDJweCAwIDRweFwiXG4gICAgfSxcbiAgICBcIi5jbS1zZWxlY3Rpb25MYXllclwiOiB7XG4gICAgICAgIHpJbmRleDogLTEsXG4gICAgICAgIGNvbnRhaW46IFwic2l6ZSBzdHlsZVwiXG4gICAgfSxcbiAgICBcIi5jbS1zZWxlY3Rpb25CYWNrZ3JvdW5kXCI6IHtcbiAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICB9LFxuICAgIFwiJmxpZ2h0IC5jbS1zZWxlY3Rpb25CYWNrZ3JvdW5kXCI6IHtcbiAgICAgICAgYmFja2dyb3VuZDogXCIjZDlkOWQ5XCJcbiAgICB9LFxuICAgIFwiJmRhcmsgLmNtLXNlbGVjdGlvbkJhY2tncm91bmRcIjoge1xuICAgICAgICBiYWNrZ3JvdW5kOiBcIiMyMjJcIlxuICAgIH0sXG4gICAgXCImbGlnaHQuY20tZm9jdXNlZCAuY20tc2VsZWN0aW9uQmFja2dyb3VuZFwiOiB7XG4gICAgICAgIGJhY2tncm91bmQ6IFwiI2Q3ZDRmMFwiXG4gICAgfSxcbiAgICBcIiZkYXJrLmNtLWZvY3VzZWQgLmNtLXNlbGVjdGlvbkJhY2tncm91bmRcIjoge1xuICAgICAgICBiYWNrZ3JvdW5kOiBcIiMyMzNcIlxuICAgIH0sXG4gICAgXCIuY20tY3Vyc29yTGF5ZXJcIjoge1xuICAgICAgICB6SW5kZXg6IDEwMCxcbiAgICAgICAgY29udGFpbjogXCJzaXplIHN0eWxlXCIsXG4gICAgICAgIHBvaW50ZXJFdmVudHM6IFwibm9uZVwiXG4gICAgfSxcbiAgICBcIiYuY20tZm9jdXNlZCAuY20tY3Vyc29yTGF5ZXJcIjoge1xuICAgICAgICBhbmltYXRpb246IFwic3RlcHMoMSkgY20tYmxpbmsgMS4ycyBpbmZpbml0ZVwiXG4gICAgfSxcbiAgICAvLyBUd28gYW5pbWF0aW9ucyBkZWZpbmVkIHNvIHRoYXQgd2UgY2FuIHN3aXRjaCBiZXR3ZWVuIHRoZW0gdG9cbiAgICAvLyByZXN0YXJ0IHRoZSBhbmltYXRpb24gd2l0aG91dCBmb3JjaW5nIGFub3RoZXIgc3R5bGVcbiAgICAvLyByZWNvbXB1dGF0aW9uLlxuICAgIFwiQGtleWZyYW1lcyBjbS1ibGlua1wiOiB7IFwiMCVcIjoge30sIFwiNTAlXCI6IHsgb3BhY2l0eTogMCB9LCBcIjEwMCVcIjoge30gfSxcbiAgICBcIkBrZXlmcmFtZXMgY20tYmxpbmsyXCI6IHsgXCIwJVwiOiB7fSwgXCI1MCVcIjogeyBvcGFjaXR5OiAwIH0sIFwiMTAwJVwiOiB7fSB9LFxuICAgIFwiLmNtLWN1cnNvciwgLmNtLWRyb3BDdXJzb3JcIjoge1xuICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgICAgICBib3JkZXJMZWZ0OiBcIjEuMnB4IHNvbGlkIGJsYWNrXCIsXG4gICAgICAgIG1hcmdpbkxlZnQ6IFwiLTAuNnB4XCIsXG4gICAgICAgIHBvaW50ZXJFdmVudHM6IFwibm9uZVwiLFxuICAgIH0sXG4gICAgXCIuY20tY3Vyc29yXCI6IHtcbiAgICAgICAgZGlzcGxheTogXCJub25lXCJcbiAgICB9LFxuICAgIFwiJmRhcmsgLmNtLWN1cnNvclwiOiB7XG4gICAgICAgIGJvcmRlckxlZnRDb2xvcjogXCIjNDQ0XCJcbiAgICB9LFxuICAgIFwiJi5jbS1mb2N1c2VkIC5jbS1jdXJzb3JcIjoge1xuICAgICAgICBkaXNwbGF5OiBcImJsb2NrXCJcbiAgICB9LFxuICAgIFwiJmxpZ2h0IC5jbS1hY3RpdmVMaW5lXCI6IHsgYmFja2dyb3VuZENvbG9yOiBcIiNjY2VlZmY0NFwiIH0sXG4gICAgXCImZGFyayAuY20tYWN0aXZlTGluZVwiOiB7IGJhY2tncm91bmRDb2xvcjogXCIjOTllZWZmMzNcIiB9LFxuICAgIFwiJmxpZ2h0IC5jbS1zcGVjaWFsQ2hhclwiOiB7IGNvbG9yOiBcInJlZFwiIH0sXG4gICAgXCImZGFyayAuY20tc3BlY2lhbENoYXJcIjogeyBjb2xvcjogXCIjZjc4XCIgfSxcbiAgICBcIi5jbS1ndXR0ZXJzXCI6IHtcbiAgICAgICAgZmxleFNocmluazogMCxcbiAgICAgICAgZGlzcGxheTogXCJmbGV4XCIsXG4gICAgICAgIGhlaWdodDogXCIxMDAlXCIsXG4gICAgICAgIGJveFNpemluZzogXCJib3JkZXItYm94XCIsXG4gICAgICAgIGxlZnQ6IDAsXG4gICAgICAgIHpJbmRleDogMjAwXG4gICAgfSxcbiAgICBcIiZsaWdodCAuY20tZ3V0dGVyc1wiOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjZjVmNWY1XCIsXG4gICAgICAgIGNvbG9yOiBcIiM2YzZjNmNcIixcbiAgICAgICAgYm9yZGVyUmlnaHQ6IFwiMXB4IHNvbGlkICNkZGRcIlxuICAgIH0sXG4gICAgXCImZGFyayAuY20tZ3V0dGVyc1wiOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjMzMzMzM4XCIsXG4gICAgICAgIGNvbG9yOiBcIiNjY2NcIlxuICAgIH0sXG4gICAgXCIuY20tZ3V0dGVyXCI6IHtcbiAgICAgICAgZGlzcGxheTogXCJmbGV4ICFpbXBvcnRhbnRcIixcbiAgICAgICAgZmxleERpcmVjdGlvbjogXCJjb2x1bW5cIixcbiAgICAgICAgZmxleFNocmluazogMCxcbiAgICAgICAgYm94U2l6aW5nOiBcImJvcmRlci1ib3hcIixcbiAgICAgICAgbWluSGVpZ2h0OiBcIjEwMCVcIixcbiAgICAgICAgb3ZlcmZsb3c6IFwiaGlkZGVuXCJcbiAgICB9LFxuICAgIFwiLmNtLWd1dHRlckVsZW1lbnRcIjoge1xuICAgICAgICBib3hTaXppbmc6IFwiYm9yZGVyLWJveFwiXG4gICAgfSxcbiAgICBcIi5jbS1saW5lTnVtYmVycyAuY20tZ3V0dGVyRWxlbWVudFwiOiB7XG4gICAgICAgIHBhZGRpbmc6IFwiMCAzcHggMCA1cHhcIixcbiAgICAgICAgbWluV2lkdGg6IFwiMjBweFwiLFxuICAgICAgICB0ZXh0QWxpZ246IFwicmlnaHRcIixcbiAgICAgICAgd2hpdGVTcGFjZTogXCJub3dyYXBcIlxuICAgIH0sXG4gICAgXCImbGlnaHQgLmNtLWFjdGl2ZUxpbmVHdXR0ZXJcIjoge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiI2UyZjJmZlwiXG4gICAgfSxcbiAgICBcIiZkYXJrIC5jbS1hY3RpdmVMaW5lR3V0dGVyXCI6IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiMyMjIyMjdcIlxuICAgIH0sXG4gICAgXCIuY20tcGFuZWxzXCI6IHtcbiAgICAgICAgYm94U2l6aW5nOiBcImJvcmRlci1ib3hcIixcbiAgICAgICAgcG9zaXRpb246IFwic3RpY2t5XCIsXG4gICAgICAgIGxlZnQ6IDAsXG4gICAgICAgIHJpZ2h0OiAwXG4gICAgfSxcbiAgICBcIiZsaWdodCAuY20tcGFuZWxzXCI6IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiNmNWY1ZjVcIixcbiAgICAgICAgY29sb3I6IFwiYmxhY2tcIlxuICAgIH0sXG4gICAgXCImbGlnaHQgLmNtLXBhbmVscy10b3BcIjoge1xuICAgICAgICBib3JkZXJCb3R0b206IFwiMXB4IHNvbGlkICNkZGRcIlxuICAgIH0sXG4gICAgXCImbGlnaHQgLmNtLXBhbmVscy1ib3R0b21cIjoge1xuICAgICAgICBib3JkZXJUb3A6IFwiMXB4IHNvbGlkICNkZGRcIlxuICAgIH0sXG4gICAgXCImZGFyayAuY20tcGFuZWxzXCI6IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiMzMzMzMzhcIixcbiAgICAgICAgY29sb3I6IFwid2hpdGVcIlxuICAgIH0sXG4gICAgXCIuY20tdGFiXCI6IHtcbiAgICAgICAgZGlzcGxheTogXCJpbmxpbmUtYmxvY2tcIixcbiAgICAgICAgb3ZlcmZsb3c6IFwiaGlkZGVuXCIsXG4gICAgICAgIHZlcnRpY2FsQWxpZ246IFwiYm90dG9tXCJcbiAgICB9LFxuICAgIFwiLmNtLXdpZGdldEJ1ZmZlclwiOiB7XG4gICAgICAgIHZlcnRpY2FsQWxpZ246IFwidGV4dC10b3BcIixcbiAgICAgICAgaGVpZ2h0OiBcIjFlbVwiLFxuICAgICAgICB3aWR0aDogMCxcbiAgICAgICAgZGlzcGxheTogXCJpbmxpbmVcIlxuICAgIH0sXG4gICAgXCIuY20tcGxhY2Vob2xkZXJcIjoge1xuICAgICAgICBjb2xvcjogXCIjODg4XCIsXG4gICAgICAgIGRpc3BsYXk6IFwiaW5saW5lLWJsb2NrXCIsXG4gICAgICAgIHZlcnRpY2FsQWxpZ246IFwidG9wXCIsXG4gICAgfSxcbiAgICBcIi5jbS1idXR0b25cIjoge1xuICAgICAgICB2ZXJ0aWNhbEFsaWduOiBcIm1pZGRsZVwiLFxuICAgICAgICBjb2xvcjogXCJpbmhlcml0XCIsXG4gICAgICAgIGZvbnRTaXplOiBcIjcwJVwiLFxuICAgICAgICBwYWRkaW5nOiBcIi4yZW0gMWVtXCIsXG4gICAgICAgIGJvcmRlclJhZGl1czogXCIxcHhcIlxuICAgIH0sXG4gICAgXCImbGlnaHQgLmNtLWJ1dHRvblwiOiB7XG4gICAgICAgIGJhY2tncm91bmRJbWFnZTogXCJsaW5lYXItZ3JhZGllbnQoI2VmZjFmNSwgI2Q5ZDlkZilcIixcbiAgICAgICAgYm9yZGVyOiBcIjFweCBzb2xpZCAjODg4XCIsXG4gICAgICAgIFwiJjphY3RpdmVcIjoge1xuICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlOiBcImxpbmVhci1ncmFkaWVudCgjYjRiNGI0LCAjZDBkM2Q2KVwiXG4gICAgICAgIH1cbiAgICB9LFxuICAgIFwiJmRhcmsgLmNtLWJ1dHRvblwiOiB7XG4gICAgICAgIGJhY2tncm91bmRJbWFnZTogXCJsaW5lYXItZ3JhZGllbnQoIzM5MzkzOSwgIzExMSlcIixcbiAgICAgICAgYm9yZGVyOiBcIjFweCBzb2xpZCAjODg4XCIsXG4gICAgICAgIFwiJjphY3RpdmVcIjoge1xuICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlOiBcImxpbmVhci1ncmFkaWVudCgjMTExLCAjMzMzKVwiXG4gICAgICAgIH1cbiAgICB9LFxuICAgIFwiLmNtLXRleHRmaWVsZFwiOiB7XG4gICAgICAgIHZlcnRpY2FsQWxpZ246IFwibWlkZGxlXCIsXG4gICAgICAgIGNvbG9yOiBcImluaGVyaXRcIixcbiAgICAgICAgZm9udFNpemU6IFwiNzAlXCIsXG4gICAgICAgIGJvcmRlcjogXCIxcHggc29saWQgc2lsdmVyXCIsXG4gICAgICAgIHBhZGRpbmc6IFwiLjJlbSAuNWVtXCJcbiAgICB9LFxuICAgIFwiJmxpZ2h0IC5jbS10ZXh0ZmllbGRcIjoge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwid2hpdGVcIlxuICAgIH0sXG4gICAgXCImZGFyayAuY20tdGV4dGZpZWxkXCI6IHtcbiAgICAgICAgYm9yZGVyOiBcIjFweCBzb2xpZCAjNTU1XCIsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCJpbmhlcml0XCJcbiAgICB9XG59LCBsaWdodERhcmtJRHMpO1xuXG5jbGFzcyBET01DaGFuZ2Uge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcsIHN0YXJ0LCBlbmQsIHR5cGVPdmVyKSB7XG4gICAgICAgIHRoaXMudHlwZU92ZXIgPSB0eXBlT3ZlcjtcbiAgICAgICAgdGhpcy5ib3VuZHMgPSBudWxsO1xuICAgICAgICB0aGlzLnRleHQgPSBcIlwiO1xuICAgICAgICBsZXQgeyBpbXByZWNpc2VIZWFkOiBpSGVhZCwgaW1wcmVjaXNlQW5jaG9yOiBpQW5jaG9yIH0gPSB2aWV3LmRvY1ZpZXc7XG4gICAgICAgIGlmICh2aWV3LnN0YXRlLnJlYWRPbmx5ICYmIHN0YXJ0ID4gLTEpIHtcbiAgICAgICAgICAgIC8vIElnbm9yZSBjaGFuZ2VzIHdoZW4gdGhlIGVkaXRvciBpcyByZWFkLW9ubHlcbiAgICAgICAgICAgIHRoaXMubmV3U2VsID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzdGFydCA+IC0xICYmICh0aGlzLmJvdW5kcyA9IHZpZXcuZG9jVmlldy5kb21Cb3VuZHNBcm91bmQoc3RhcnQsIGVuZCwgMCkpKSB7XG4gICAgICAgICAgICBsZXQgc2VsUG9pbnRzID0gaUhlYWQgfHwgaUFuY2hvciA/IFtdIDogc2VsZWN0aW9uUG9pbnRzKHZpZXcpO1xuICAgICAgICAgICAgbGV0IHJlYWRlciA9IG5ldyBET01SZWFkZXIoc2VsUG9pbnRzLCB2aWV3LnN0YXRlKTtcbiAgICAgICAgICAgIHJlYWRlci5yZWFkUmFuZ2UodGhpcy5ib3VuZHMuc3RhcnRET00sIHRoaXMuYm91bmRzLmVuZERPTSk7XG4gICAgICAgICAgICB0aGlzLnRleHQgPSByZWFkZXIudGV4dDtcbiAgICAgICAgICAgIHRoaXMubmV3U2VsID0gc2VsZWN0aW9uRnJvbVBvaW50cyhzZWxQb2ludHMsIHRoaXMuYm91bmRzLmZyb20pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IGRvbVNlbCA9IHZpZXcub2JzZXJ2ZXIuc2VsZWN0aW9uUmFuZ2U7XG4gICAgICAgICAgICBsZXQgaGVhZCA9IGlIZWFkICYmIGlIZWFkLm5vZGUgPT0gZG9tU2VsLmZvY3VzTm9kZSAmJiBpSGVhZC5vZmZzZXQgPT0gZG9tU2VsLmZvY3VzT2Zmc2V0IHx8XG4gICAgICAgICAgICAgICAgIWNvbnRhaW5zKHZpZXcuY29udGVudERPTSwgZG9tU2VsLmZvY3VzTm9kZSlcbiAgICAgICAgICAgICAgICA/IHZpZXcuc3RhdGUuc2VsZWN0aW9uLm1haW4uaGVhZFxuICAgICAgICAgICAgICAgIDogdmlldy5kb2NWaWV3LnBvc0Zyb21ET00oZG9tU2VsLmZvY3VzTm9kZSwgZG9tU2VsLmZvY3VzT2Zmc2V0KTtcbiAgICAgICAgICAgIGxldCBhbmNob3IgPSBpQW5jaG9yICYmIGlBbmNob3Iubm9kZSA9PSBkb21TZWwuYW5jaG9yTm9kZSAmJiBpQW5jaG9yLm9mZnNldCA9PSBkb21TZWwuYW5jaG9yT2Zmc2V0IHx8XG4gICAgICAgICAgICAgICAgIWNvbnRhaW5zKHZpZXcuY29udGVudERPTSwgZG9tU2VsLmFuY2hvck5vZGUpXG4gICAgICAgICAgICAgICAgPyB2aWV3LnN0YXRlLnNlbGVjdGlvbi5tYWluLmFuY2hvclxuICAgICAgICAgICAgICAgIDogdmlldy5kb2NWaWV3LnBvc0Zyb21ET00oZG9tU2VsLmFuY2hvck5vZGUsIGRvbVNlbC5hbmNob3JPZmZzZXQpO1xuICAgICAgICAgICAgdGhpcy5uZXdTZWwgPSBFZGl0b3JTZWxlY3Rpb24uc2luZ2xlKGFuY2hvciwgaGVhZCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBhcHBseURPTUNoYW5nZSh2aWV3LCBkb21DaGFuZ2UpIHtcbiAgICBsZXQgY2hhbmdlO1xuICAgIGxldCB7IG5ld1NlbCB9ID0gZG9tQ2hhbmdlLCBzZWwgPSB2aWV3LnN0YXRlLnNlbGVjdGlvbi5tYWluO1xuICAgIGlmIChkb21DaGFuZ2UuYm91bmRzKSB7XG4gICAgICAgIGxldCB7IGZyb20sIHRvIH0gPSBkb21DaGFuZ2UuYm91bmRzO1xuICAgICAgICBsZXQgcHJlZmVycmVkUG9zID0gc2VsLmZyb20sIHByZWZlcnJlZFNpZGUgPSBudWxsO1xuICAgICAgICAvLyBQcmVmZXIgYW5jaG9yaW5nIHRvIGVuZCB3aGVuIEJhY2tzcGFjZSBpcyBwcmVzc2VkIChvciwgb25cbiAgICAgICAgLy8gQW5kcm9pZCwgd2hlbiBzb21ldGhpbmcgd2FzIGRlbGV0ZWQpXG4gICAgICAgIGlmICh2aWV3LmlucHV0U3RhdGUubGFzdEtleUNvZGUgPT09IDggJiYgdmlldy5pbnB1dFN0YXRlLmxhc3RLZXlUaW1lID4gRGF0ZS5ub3coKSAtIDEwMCB8fFxuICAgICAgICAgICAgYnJvd3Nlci5hbmRyb2lkICYmIGRvbUNoYW5nZS50ZXh0Lmxlbmd0aCA8IHRvIC0gZnJvbSkge1xuICAgICAgICAgICAgcHJlZmVycmVkUG9zID0gc2VsLnRvO1xuICAgICAgICAgICAgcHJlZmVycmVkU2lkZSA9IFwiZW5kXCI7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGRpZmYgPSBmaW5kRGlmZih2aWV3LnN0YXRlLmRvYy5zbGljZVN0cmluZyhmcm9tLCB0bywgTGluZUJyZWFrUGxhY2Vob2xkZXIpLCBkb21DaGFuZ2UudGV4dCwgcHJlZmVycmVkUG9zIC0gZnJvbSwgcHJlZmVycmVkU2lkZSk7XG4gICAgICAgIGlmIChkaWZmKSB7XG4gICAgICAgICAgICAvLyBDaHJvbWUgaW5zZXJ0cyB0d28gbmV3bGluZXMgd2hlbiBwcmVzc2luZyBzaGlmdC1lbnRlciBhdCB0aGVcbiAgICAgICAgICAgIC8vIGVuZCBvZiBhIGxpbmUuIERvbUNoYW5nZSBkcm9wcyBvbmUgb2YgdGhvc2UuXG4gICAgICAgICAgICBpZiAoYnJvd3Nlci5jaHJvbWUgJiYgdmlldy5pbnB1dFN0YXRlLmxhc3RLZXlDb2RlID09IDEzICYmXG4gICAgICAgICAgICAgICAgZGlmZi50b0IgPT0gZGlmZi5mcm9tICsgMiAmJiBkb21DaGFuZ2UudGV4dC5zbGljZShkaWZmLmZyb20sIGRpZmYudG9CKSA9PSBMaW5lQnJlYWtQbGFjZWhvbGRlciArIExpbmVCcmVha1BsYWNlaG9sZGVyKVxuICAgICAgICAgICAgICAgIGRpZmYudG9CLS07XG4gICAgICAgICAgICBjaGFuZ2UgPSB7IGZyb206IGZyb20gKyBkaWZmLmZyb20sIHRvOiBmcm9tICsgZGlmZi50b0EsXG4gICAgICAgICAgICAgICAgaW5zZXJ0OiBUZXh0Lm9mKGRvbUNoYW5nZS50ZXh0LnNsaWNlKGRpZmYuZnJvbSwgZGlmZi50b0IpLnNwbGl0KExpbmVCcmVha1BsYWNlaG9sZGVyKSkgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChuZXdTZWwgJiYgKCF2aWV3Lmhhc0ZvY3VzIHx8ICF2aWV3LnN0YXRlLmZhY2V0KGVkaXRhYmxlKSB8fCBuZXdTZWwubWFpbi5lcShzZWwpKSkge1xuICAgICAgICBuZXdTZWwgPSBudWxsO1xuICAgIH1cbiAgICBpZiAoIWNoYW5nZSAmJiAhbmV3U2VsKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgaWYgKCFjaGFuZ2UgJiYgZG9tQ2hhbmdlLnR5cGVPdmVyICYmICFzZWwuZW1wdHkgJiYgbmV3U2VsICYmIG5ld1NlbC5tYWluLmVtcHR5KSB7XG4gICAgICAgIC8vIEhldXJpc3RpYyB0byBub3RpY2UgdHlwaW5nIG92ZXIgYSBzZWxlY3RlZCBjaGFyYWN0ZXJcbiAgICAgICAgY2hhbmdlID0geyBmcm9tOiBzZWwuZnJvbSwgdG86IHNlbC50bywgaW5zZXJ0OiB2aWV3LnN0YXRlLmRvYy5zbGljZShzZWwuZnJvbSwgc2VsLnRvKSB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChjaGFuZ2UgJiYgY2hhbmdlLmZyb20gPj0gc2VsLmZyb20gJiYgY2hhbmdlLnRvIDw9IHNlbC50byAmJlxuICAgICAgICAoY2hhbmdlLmZyb20gIT0gc2VsLmZyb20gfHwgY2hhbmdlLnRvICE9IHNlbC50bykgJiZcbiAgICAgICAgKHNlbC50byAtIHNlbC5mcm9tKSAtIChjaGFuZ2UudG8gLSBjaGFuZ2UuZnJvbSkgPD0gNCkge1xuICAgICAgICAvLyBJZiB0aGUgY2hhbmdlIGlzIGluc2lkZSB0aGUgc2VsZWN0aW9uIGFuZCBjb3ZlcnMgbW9zdCBvZiBpdCxcbiAgICAgICAgLy8gYXNzdW1lIGl0IGlzIGEgc2VsZWN0aW9uIHJlcGxhY2UgKHdpdGggaWRlbnRpY2FsIGNoYXJhY3RlcnMgYXRcbiAgICAgICAgLy8gdGhlIHN0YXJ0L2VuZCBub3QgaW5jbHVkZWQgaW4gdGhlIGRpZmYpXG4gICAgICAgIGNoYW5nZSA9IHtcbiAgICAgICAgICAgIGZyb206IHNlbC5mcm9tLCB0bzogc2VsLnRvLFxuICAgICAgICAgICAgaW5zZXJ0OiB2aWV3LnN0YXRlLmRvYy5zbGljZShzZWwuZnJvbSwgY2hhbmdlLmZyb20pLmFwcGVuZChjaGFuZ2UuaW5zZXJ0KS5hcHBlbmQodmlldy5zdGF0ZS5kb2Muc2xpY2UoY2hhbmdlLnRvLCBzZWwudG8pKVxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIGlmICgoYnJvd3Nlci5tYWMgfHwgYnJvd3Nlci5hbmRyb2lkKSAmJiBjaGFuZ2UgJiYgY2hhbmdlLmZyb20gPT0gY2hhbmdlLnRvICYmIGNoYW5nZS5mcm9tID09IHNlbC5oZWFkIC0gMSAmJlxuICAgICAgICAvXlxcLiA/JC8udGVzdChjaGFuZ2UuaW5zZXJ0LnRvU3RyaW5nKCkpKSB7XG4gICAgICAgIC8vIERldGVjdCBpbnNlcnQtcGVyaW9kLW9uLWRvdWJsZS1zcGFjZSBNYWMgYW5kIEFuZHJvaWQgYmVoYXZpb3IsXG4gICAgICAgIC8vIGFuZCB0cmFuc2Zvcm0gaXQgaW50byBhIHJlZ3VsYXIgc3BhY2UgaW5zZXJ0LlxuICAgICAgICBpZiAobmV3U2VsICYmIGNoYW5nZS5pbnNlcnQubGVuZ3RoID09IDIpXG4gICAgICAgICAgICBuZXdTZWwgPSBFZGl0b3JTZWxlY3Rpb24uc2luZ2xlKG5ld1NlbC5tYWluLmFuY2hvciAtIDEsIG5ld1NlbC5tYWluLmhlYWQgLSAxKTtcbiAgICAgICAgY2hhbmdlID0geyBmcm9tOiBzZWwuZnJvbSwgdG86IHNlbC50bywgaW5zZXJ0OiBUZXh0Lm9mKFtcIiBcIl0pIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGJyb3dzZXIuY2hyb21lICYmIGNoYW5nZSAmJiBjaGFuZ2UuZnJvbSA9PSBjaGFuZ2UudG8gJiYgY2hhbmdlLmZyb20gPT0gc2VsLmhlYWQgJiZcbiAgICAgICAgY2hhbmdlLmluc2VydC50b1N0cmluZygpID09IFwiXFxuIFwiICYmIHZpZXcubGluZVdyYXBwaW5nKSB7XG4gICAgICAgIC8vIEluIENocm9tZSwgaWYgeW91IGluc2VydCBhIHNwYWNlIGF0IHRoZSBzdGFydCBvZiBhIHdyYXBwZWRcbiAgICAgICAgLy8gbGluZSwgaXQgd2lsbCBhY3R1YWxseSBpbnNlcnQgYSBuZXdsaW5lIGFuZCBhIHNwYWNlLCBjYXVzaW5nIGFcbiAgICAgICAgLy8gYm9ndXMgbmV3IGxpbmUgdG8gYmUgY3JlYXRlZCBpbiBDb2RlTWlycm9yICgjOTY4KVxuICAgICAgICBpZiAobmV3U2VsKVxuICAgICAgICAgICAgbmV3U2VsID0gRWRpdG9yU2VsZWN0aW9uLnNpbmdsZShuZXdTZWwubWFpbi5hbmNob3IgLSAxLCBuZXdTZWwubWFpbi5oZWFkIC0gMSk7XG4gICAgICAgIGNoYW5nZSA9IHsgZnJvbTogc2VsLmZyb20sIHRvOiBzZWwudG8sIGluc2VydDogVGV4dC5vZihbXCIgXCJdKSB9O1xuICAgIH1cbiAgICBpZiAoY2hhbmdlKSB7XG4gICAgICAgIGxldCBzdGFydFN0YXRlID0gdmlldy5zdGF0ZTtcbiAgICAgICAgaWYgKGJyb3dzZXIuaW9zICYmIHZpZXcuaW5wdXRTdGF0ZS5mbHVzaElPU0tleSh2aWV3KSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAvLyBBbmRyb2lkIGJyb3dzZXJzIGRvbid0IGZpcmUgcmVhc29uYWJsZSBrZXkgZXZlbnRzIGZvciBlbnRlcixcbiAgICAgICAgLy8gYmFja3NwYWNlLCBvciBkZWxldGUuIFNvIHRoaXMgZGV0ZWN0cyBjaGFuZ2VzIHRoYXQgbG9vayBsaWtlXG4gICAgICAgIC8vIHRoZXkncmUgY2F1c2VkIGJ5IHRob3NlIGtleXMsIGFuZCByZWludGVycHJldHMgdGhlbSBhcyBrZXlcbiAgICAgICAgLy8gZXZlbnRzLiAoU29tZSBvZiB0aGVzZSBrZXlzIGFyZSBhbHNvIGhhbmRsZWQgYnkgYmVmb3JlaW5wdXRcbiAgICAgICAgLy8gZXZlbnRzIGFuZCB0aGUgcGVuZGluZ0FuZHJvaWRLZXkgbWVjaGFuaXNtLCBidXQgdGhhdCdzIG5vdFxuICAgICAgICAvLyByZWxpYWJsZSBpbiBhbGwgc2l0dWF0aW9ucy4pXG4gICAgICAgIGlmIChicm93c2VyLmFuZHJvaWQgJiZcbiAgICAgICAgICAgICgoY2hhbmdlLmZyb20gPT0gc2VsLmZyb20gJiYgY2hhbmdlLnRvID09IHNlbC50byAmJlxuICAgICAgICAgICAgICAgIGNoYW5nZS5pbnNlcnQubGVuZ3RoID09IDEgJiYgY2hhbmdlLmluc2VydC5saW5lcyA9PSAyICYmXG4gICAgICAgICAgICAgICAgZGlzcGF0Y2hLZXkodmlldy5jb250ZW50RE9NLCBcIkVudGVyXCIsIDEzKSkgfHxcbiAgICAgICAgICAgICAgICAoY2hhbmdlLmZyb20gPT0gc2VsLmZyb20gLSAxICYmIGNoYW5nZS50byA9PSBzZWwudG8gJiYgY2hhbmdlLmluc2VydC5sZW5ndGggPT0gMCAmJlxuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaEtleSh2aWV3LmNvbnRlbnRET00sIFwiQmFja3NwYWNlXCIsIDgpKSB8fFxuICAgICAgICAgICAgICAgIChjaGFuZ2UuZnJvbSA9PSBzZWwuZnJvbSAmJiBjaGFuZ2UudG8gPT0gc2VsLnRvICsgMSAmJiBjaGFuZ2UuaW5zZXJ0Lmxlbmd0aCA9PSAwICYmXG4gICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoS2V5KHZpZXcuY29udGVudERPTSwgXCJEZWxldGVcIiwgNDYpKSkpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgbGV0IHRleHQgPSBjaGFuZ2UuaW5zZXJ0LnRvU3RyaW5nKCk7XG4gICAgICAgIGlmICh2aWV3LnN0YXRlLmZhY2V0KGlucHV0SGFuZGxlcikuc29tZShoID0+IGgodmlldywgY2hhbmdlLmZyb20sIGNoYW5nZS50bywgdGV4dCkpKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIGlmICh2aWV3LmlucHV0U3RhdGUuY29tcG9zaW5nID49IDApXG4gICAgICAgICAgICB2aWV3LmlucHV0U3RhdGUuY29tcG9zaW5nKys7XG4gICAgICAgIGxldCB0cjtcbiAgICAgICAgaWYgKGNoYW5nZS5mcm9tID49IHNlbC5mcm9tICYmIGNoYW5nZS50byA8PSBzZWwudG8gJiYgY2hhbmdlLnRvIC0gY2hhbmdlLmZyb20gPj0gKHNlbC50byAtIHNlbC5mcm9tKSAvIDMgJiZcbiAgICAgICAgICAgICghbmV3U2VsIHx8IG5ld1NlbC5tYWluLmVtcHR5ICYmIG5ld1NlbC5tYWluLmZyb20gPT0gY2hhbmdlLmZyb20gKyBjaGFuZ2UuaW5zZXJ0Lmxlbmd0aCkgJiZcbiAgICAgICAgICAgIHZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpbmcgPCAwKSB7XG4gICAgICAgICAgICBsZXQgYmVmb3JlID0gc2VsLmZyb20gPCBjaGFuZ2UuZnJvbSA/IHN0YXJ0U3RhdGUuc2xpY2VEb2Moc2VsLmZyb20sIGNoYW5nZS5mcm9tKSA6IFwiXCI7XG4gICAgICAgICAgICBsZXQgYWZ0ZXIgPSBzZWwudG8gPiBjaGFuZ2UudG8gPyBzdGFydFN0YXRlLnNsaWNlRG9jKGNoYW5nZS50bywgc2VsLnRvKSA6IFwiXCI7XG4gICAgICAgICAgICB0ciA9IHN0YXJ0U3RhdGUucmVwbGFjZVNlbGVjdGlvbih2aWV3LnN0YXRlLnRvVGV4dChiZWZvcmUgKyBjaGFuZ2UuaW5zZXJ0LnNsaWNlU3RyaW5nKDAsIHVuZGVmaW5lZCwgdmlldy5zdGF0ZS5saW5lQnJlYWspICsgYWZ0ZXIpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBjaGFuZ2VzID0gc3RhcnRTdGF0ZS5jaGFuZ2VzKGNoYW5nZSk7XG4gICAgICAgICAgICBsZXQgbWFpblNlbCA9IG5ld1NlbCAmJiAhc3RhcnRTdGF0ZS5zZWxlY3Rpb24ubWFpbi5lcShuZXdTZWwubWFpbikgJiYgbmV3U2VsLm1haW4udG8gPD0gY2hhbmdlcy5uZXdMZW5ndGhcbiAgICAgICAgICAgICAgICA/IG5ld1NlbC5tYWluIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgLy8gVHJ5IHRvIGFwcGx5IGEgY29tcG9zaXRpb24gY2hhbmdlIHRvIGFsbCBjdXJzb3JzXG4gICAgICAgICAgICBpZiAoc3RhcnRTdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzLmxlbmd0aCA+IDEgJiYgdmlldy5pbnB1dFN0YXRlLmNvbXBvc2luZyA+PSAwICYmXG4gICAgICAgICAgICAgICAgY2hhbmdlLnRvIDw9IHNlbC50byAmJiBjaGFuZ2UudG8gPj0gc2VsLnRvIC0gMTApIHtcbiAgICAgICAgICAgICAgICBsZXQgcmVwbGFjZWQgPSB2aWV3LnN0YXRlLnNsaWNlRG9jKGNoYW5nZS5mcm9tLCBjaGFuZ2UudG8pO1xuICAgICAgICAgICAgICAgIGxldCBjb21wb3NpdGlvblJhbmdlID0gY29tcG9zaXRpb25TdXJyb3VuZGluZ05vZGUodmlldykgfHwgdmlldy5zdGF0ZS5kb2MubGluZUF0KHNlbC5oZWFkKTtcbiAgICAgICAgICAgICAgICBsZXQgb2Zmc2V0ID0gc2VsLnRvIC0gY2hhbmdlLnRvLCBzaXplID0gc2VsLnRvIC0gc2VsLmZyb207XG4gICAgICAgICAgICAgICAgdHIgPSBzdGFydFN0YXRlLmNoYW5nZUJ5UmFuZ2UocmFuZ2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmFuZ2UuZnJvbSA9PSBzZWwuZnJvbSAmJiByYW5nZS50byA9PSBzZWwudG8pXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBjaGFuZ2VzLCByYW5nZTogbWFpblNlbCB8fCByYW5nZS5tYXAoY2hhbmdlcykgfTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRvID0gcmFuZ2UudG8gLSBvZmZzZXQsIGZyb20gPSB0byAtIHJlcGxhY2VkLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJhbmdlLnRvIC0gcmFuZ2UuZnJvbSAhPSBzaXplIHx8IHZpZXcuc3RhdGUuc2xpY2VEb2MoZnJvbSwgdG8pICE9IHJlcGxhY2VkIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVbmZvcnR1bmF0ZWx5LCB0aGVyZSdzIG5vIHdheSB0byBtYWtlIG11bHRpcGxlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjaGFuZ2VzIGluIHRoZSBzYW1lIG5vZGUgd29yayB3aXRob3V0IGFib3J0aW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb21wb3NpdGlvbiwgc28gY3Vyc29ycyBpbiB0aGUgY29tcG9zaXRpb24gcmFuZ2UgYXJlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZ25vcmVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9zaXRpb25SYW5nZSAmJiByYW5nZS50byA+PSBjb21wb3NpdGlvblJhbmdlLmZyb20gJiYgcmFuZ2UuZnJvbSA8PSBjb21wb3NpdGlvblJhbmdlLnRvKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgcmFuZ2UgfTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJhbmdlQ2hhbmdlcyA9IHN0YXJ0U3RhdGUuY2hhbmdlcyh7IGZyb20sIHRvLCBpbnNlcnQ6IGNoYW5nZS5pbnNlcnQgfSksIHNlbE9mZiA9IHJhbmdlLnRvIC0gc2VsLnRvO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlczogcmFuZ2VDaGFuZ2VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2U6ICFtYWluU2VsID8gcmFuZ2UubWFwKHJhbmdlQ2hhbmdlcykgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVkaXRvclNlbGVjdGlvbi5yYW5nZShNYXRoLm1heCgwLCBtYWluU2VsLmFuY2hvciArIHNlbE9mZiksIE1hdGgubWF4KDAsIG1haW5TZWwuaGVhZCArIHNlbE9mZikpXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0ciA9IHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlcyxcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uOiBtYWluU2VsICYmIHN0YXJ0U3RhdGUuc2VsZWN0aW9uLnJlcGxhY2VSYW5nZShtYWluU2VsKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHVzZXJFdmVudCA9IFwiaW5wdXQudHlwZVwiO1xuICAgICAgICBpZiAodmlldy5jb21wb3NpbmcpIHtcbiAgICAgICAgICAgIHVzZXJFdmVudCArPSBcIi5jb21wb3NlXCI7XG4gICAgICAgICAgICBpZiAodmlldy5pbnB1dFN0YXRlLmNvbXBvc2l0aW9uRmlyc3RDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICB1c2VyRXZlbnQgKz0gXCIuc3RhcnRcIjtcbiAgICAgICAgICAgICAgICB2aWV3LmlucHV0U3RhdGUuY29tcG9zaXRpb25GaXJzdENoYW5nZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZpZXcuZGlzcGF0Y2godHIsIHsgc2Nyb2xsSW50b1ZpZXc6IHRydWUsIHVzZXJFdmVudCB9KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGVsc2UgaWYgKG5ld1NlbCAmJiAhbmV3U2VsLm1haW4uZXEoc2VsKSkge1xuICAgICAgICBsZXQgc2Nyb2xsSW50b1ZpZXcgPSBmYWxzZSwgdXNlckV2ZW50ID0gXCJzZWxlY3RcIjtcbiAgICAgICAgaWYgKHZpZXcuaW5wdXRTdGF0ZS5sYXN0U2VsZWN0aW9uVGltZSA+IERhdGUubm93KCkgLSA1MCkge1xuICAgICAgICAgICAgaWYgKHZpZXcuaW5wdXRTdGF0ZS5sYXN0U2VsZWN0aW9uT3JpZ2luID09IFwic2VsZWN0XCIpXG4gICAgICAgICAgICAgICAgc2Nyb2xsSW50b1ZpZXcgPSB0cnVlO1xuICAgICAgICAgICAgdXNlckV2ZW50ID0gdmlldy5pbnB1dFN0YXRlLmxhc3RTZWxlY3Rpb25PcmlnaW47XG4gICAgICAgIH1cbiAgICAgICAgdmlldy5kaXNwYXRjaCh7IHNlbGVjdGlvbjogbmV3U2VsLCBzY3JvbGxJbnRvVmlldywgdXNlckV2ZW50IH0pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5mdW5jdGlvbiBmaW5kRGlmZihhLCBiLCBwcmVmZXJyZWRQb3MsIHByZWZlcnJlZFNpZGUpIHtcbiAgICBsZXQgbWluTGVuID0gTWF0aC5taW4oYS5sZW5ndGgsIGIubGVuZ3RoKTtcbiAgICBsZXQgZnJvbSA9IDA7XG4gICAgd2hpbGUgKGZyb20gPCBtaW5MZW4gJiYgYS5jaGFyQ29kZUF0KGZyb20pID09IGIuY2hhckNvZGVBdChmcm9tKSlcbiAgICAgICAgZnJvbSsrO1xuICAgIGlmIChmcm9tID09IG1pbkxlbiAmJiBhLmxlbmd0aCA9PSBiLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgbGV0IHRvQSA9IGEubGVuZ3RoLCB0b0IgPSBiLmxlbmd0aDtcbiAgICB3aGlsZSAodG9BID4gMCAmJiB0b0IgPiAwICYmIGEuY2hhckNvZGVBdCh0b0EgLSAxKSA9PSBiLmNoYXJDb2RlQXQodG9CIC0gMSkpIHtcbiAgICAgICAgdG9BLS07XG4gICAgICAgIHRvQi0tO1xuICAgIH1cbiAgICBpZiAocHJlZmVycmVkU2lkZSA9PSBcImVuZFwiKSB7XG4gICAgICAgIGxldCBhZGp1c3QgPSBNYXRoLm1heCgwLCBmcm9tIC0gTWF0aC5taW4odG9BLCB0b0IpKTtcbiAgICAgICAgcHJlZmVycmVkUG9zIC09IHRvQSArIGFkanVzdCAtIGZyb207XG4gICAgfVxuICAgIGlmICh0b0EgPCBmcm9tICYmIGEubGVuZ3RoIDwgYi5sZW5ndGgpIHtcbiAgICAgICAgbGV0IG1vdmUgPSBwcmVmZXJyZWRQb3MgPD0gZnJvbSAmJiBwcmVmZXJyZWRQb3MgPj0gdG9BID8gZnJvbSAtIHByZWZlcnJlZFBvcyA6IDA7XG4gICAgICAgIGZyb20gLT0gbW92ZTtcbiAgICAgICAgdG9CID0gZnJvbSArICh0b0IgLSB0b0EpO1xuICAgICAgICB0b0EgPSBmcm9tO1xuICAgIH1cbiAgICBlbHNlIGlmICh0b0IgPCBmcm9tKSB7XG4gICAgICAgIGxldCBtb3ZlID0gcHJlZmVycmVkUG9zIDw9IGZyb20gJiYgcHJlZmVycmVkUG9zID49IHRvQiA/IGZyb20gLSBwcmVmZXJyZWRQb3MgOiAwO1xuICAgICAgICBmcm9tIC09IG1vdmU7XG4gICAgICAgIHRvQSA9IGZyb20gKyAodG9BIC0gdG9CKTtcbiAgICAgICAgdG9CID0gZnJvbTtcbiAgICB9XG4gICAgcmV0dXJuIHsgZnJvbSwgdG9BLCB0b0IgfTtcbn1cbmZ1bmN0aW9uIHNlbGVjdGlvblBvaW50cyh2aWV3KSB7XG4gICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgIGlmICh2aWV3LnJvb3QuYWN0aXZlRWxlbWVudCAhPSB2aWV3LmNvbnRlbnRET00pXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgbGV0IHsgYW5jaG9yTm9kZSwgYW5jaG9yT2Zmc2V0LCBmb2N1c05vZGUsIGZvY3VzT2Zmc2V0IH0gPSB2aWV3Lm9ic2VydmVyLnNlbGVjdGlvblJhbmdlO1xuICAgIGlmIChhbmNob3JOb2RlKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKG5ldyBET01Qb2ludChhbmNob3JOb2RlLCBhbmNob3JPZmZzZXQpKTtcbiAgICAgICAgaWYgKGZvY3VzTm9kZSAhPSBhbmNob3JOb2RlIHx8IGZvY3VzT2Zmc2V0ICE9IGFuY2hvck9mZnNldClcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKG5ldyBET01Qb2ludChmb2N1c05vZGUsIGZvY3VzT2Zmc2V0KSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBzZWxlY3Rpb25Gcm9tUG9pbnRzKHBvaW50cywgYmFzZSkge1xuICAgIGlmIChwb2ludHMubGVuZ3RoID09IDApXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGxldCBhbmNob3IgPSBwb2ludHNbMF0ucG9zLCBoZWFkID0gcG9pbnRzLmxlbmd0aCA9PSAyID8gcG9pbnRzWzFdLnBvcyA6IGFuY2hvcjtcbiAgICByZXR1cm4gYW5jaG9yID4gLTEgJiYgaGVhZCA+IC0xID8gRWRpdG9yU2VsZWN0aW9uLnNpbmdsZShhbmNob3IgKyBiYXNlLCBoZWFkICsgYmFzZSkgOiBudWxsO1xufVxuXG5jb25zdCBvYnNlcnZlT3B0aW9ucyA9IHtcbiAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgY2hhcmFjdGVyRGF0YTogdHJ1ZSxcbiAgICBzdWJ0cmVlOiB0cnVlLFxuICAgIGF0dHJpYnV0ZXM6IHRydWUsXG4gICAgY2hhcmFjdGVyRGF0YU9sZFZhbHVlOiB0cnVlXG59O1xuLy8gSUUxMSBoYXMgdmVyeSBicm9rZW4gbXV0YXRpb24gb2JzZXJ2ZXJzLCBzbyB3ZSBhbHNvIGxpc3RlbiB0b1xuLy8gRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIHRoZXJlXG5jb25zdCB1c2VDaGFyRGF0YSA9IGJyb3dzZXIuaWUgJiYgYnJvd3Nlci5pZV92ZXJzaW9uIDw9IDExO1xuY2xhc3MgRE9NT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgLy8gVGhlIGtub3duIHNlbGVjdGlvbi4gS2VwdCBpbiBvdXIgb3duIG9iamVjdCwgYXMgb3Bwb3NlZCB0byBqdXN0XG4gICAgICAgIC8vIGRpcmVjdGx5IGFjY2Vzc2luZyB0aGUgc2VsZWN0aW9uIGJlY2F1c2U6XG4gICAgICAgIC8vICAtIFNhZmFyaSBkb2Vzbid0IHJlcG9ydCB0aGUgcmlnaHQgc2VsZWN0aW9uIGluIHNoYWRvdyBET01cbiAgICAgICAgLy8gIC0gUmVhZGluZyBmcm9tIHRoZSBzZWxlY3Rpb24gZm9yY2VzIGEgRE9NIGxheW91dFxuICAgICAgICAvLyAgLSBUaGlzIHdheSwgd2UgY2FuIGlnbm9yZSBzZWxlY3Rpb25jaGFuZ2UgZXZlbnRzIGlmIHdlIGhhdmVcbiAgICAgICAgLy8gICAgYWxyZWFkeSBzZWVuIHRoZSAnbmV3JyBzZWxlY3Rpb25cbiAgICAgICAgdGhpcy5zZWxlY3Rpb25SYW5nZSA9IG5ldyBET01TZWxlY3Rpb25TdGF0ZTtcbiAgICAgICAgLy8gU2V0IHdoZW4gYSBzZWxlY3Rpb24gY2hhbmdlIGlzIGRldGVjdGVkLCBjbGVhcmVkIG9uIGZsdXNoXG4gICAgICAgIHRoaXMuc2VsZWN0aW9uQ2hhbmdlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmRlbGF5ZWRGbHVzaCA9IC0xO1xuICAgICAgICB0aGlzLnJlc2l6ZVRpbWVvdXQgPSAtMTtcbiAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xuICAgICAgICB0aGlzLmRlbGF5ZWRBbmRyb2lkS2V5ID0gbnVsbDtcbiAgICAgICAgdGhpcy5mbHVzaGluZ0FuZHJvaWRLZXkgPSAtMTtcbiAgICAgICAgdGhpcy5sYXN0Q2hhbmdlID0gMDtcbiAgICAgICAgdGhpcy5zY3JvbGxUYXJnZXRzID0gW107XG4gICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uID0gbnVsbDtcbiAgICAgICAgdGhpcy5yZXNpemUgPSBudWxsO1xuICAgICAgICB0aGlzLmludGVyc2VjdGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmdhcEludGVyc2VjdGlvbiA9IG51bGw7XG4gICAgICAgIHRoaXMuZ2FwcyA9IFtdO1xuICAgICAgICAvLyBUaW1lb3V0IGZvciBzY2hlZHVsaW5nIGNoZWNrIG9mIHRoZSBwYXJlbnRzIHRoYXQgbmVlZCBzY3JvbGwgaGFuZGxlcnNcbiAgICAgICAgdGhpcy5wYXJlbnRDaGVjayA9IC0xO1xuICAgICAgICB0aGlzLmRvbSA9IHZpZXcuY29udGVudERPTTtcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKG11dGF0aW9ucyA9PiB7XG4gICAgICAgICAgICBmb3IgKGxldCBtdXQgb2YgbXV0YXRpb25zKVxuICAgICAgICAgICAgICAgIHRoaXMucXVldWUucHVzaChtdXQpO1xuICAgICAgICAgICAgLy8gSUUxMSB3aWxsIHNvbWV0aW1lcyAob24gdHlwaW5nIG92ZXIgYSBzZWxlY3Rpb24gb3JcbiAgICAgICAgICAgIC8vIGJhY2tzcGFjaW5nIG91dCBhIHNpbmdsZSBjaGFyYWN0ZXIgdGV4dCBub2RlKSBjYWxsIHRoZVxuICAgICAgICAgICAgLy8gb2JzZXJ2ZXIgY2FsbGJhY2sgYmVmb3JlIGFjdHVhbGx5IHVwZGF0aW5nIHRoZSBET00uXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gVW5yZWxhdGVkbHksIGlPUyBTYWZhcmkgd2lsbCwgd2hlbiBlbmRpbmcgYSBjb21wb3NpdGlvbixcbiAgICAgICAgICAgIC8vIHNvbWV0aW1lcyBmaXJzdCBjbGVhciBpdCwgZGVsaXZlciB0aGUgbXV0YXRpb25zLCBhbmQgdGhlblxuICAgICAgICAgICAgLy8gcmVpbnNlcnQgdGhlIGZpbmlzaGVkIHRleHQuIENvZGVNaXJyb3IncyBoYW5kbGluZyBvZiB0aGVcbiAgICAgICAgICAgIC8vIGRlbGV0aW9uIHdpbGwgcHJldmVudCB0aGUgcmVpbnNlcnRpb24gZnJvbSBoYXBwZW5pbmcsXG4gICAgICAgICAgICAvLyBicmVha2luZyBjb21wb3NpdGlvbi5cbiAgICAgICAgICAgIGlmICgoYnJvd3Nlci5pZSAmJiBicm93c2VyLmllX3ZlcnNpb24gPD0gMTEgfHwgYnJvd3Nlci5pb3MgJiYgdmlldy5jb21wb3NpbmcpICYmXG4gICAgICAgICAgICAgICAgbXV0YXRpb25zLnNvbWUobSA9PiBtLnR5cGUgPT0gXCJjaGlsZExpc3RcIiAmJiBtLnJlbW92ZWROb2Rlcy5sZW5ndGggfHxcbiAgICAgICAgICAgICAgICAgICAgbS50eXBlID09IFwiY2hhcmFjdGVyRGF0YVwiICYmIG0ub2xkVmFsdWUubGVuZ3RoID4gbS50YXJnZXQubm9kZVZhbHVlLmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgdGhpcy5mbHVzaFNvb24oKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0aGlzLmZsdXNoKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodXNlQ2hhckRhdGEpXG4gICAgICAgICAgICB0aGlzLm9uQ2hhckRhdGEgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlLnB1c2goeyB0YXJnZXQ6IGV2ZW50LnRhcmdldCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJjaGFyYWN0ZXJEYXRhXCIsXG4gICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlOiBldmVudC5wcmV2VmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5mbHVzaFNvb24oKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIHRoaXMub25TZWxlY3Rpb25DaGFuZ2UgPSB0aGlzLm9uU2VsZWN0aW9uQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25SZXNpemUgPSB0aGlzLm9uUmVzaXplLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25QcmludCA9IHRoaXMub25QcmludC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uU2Nyb2xsID0gdGhpcy5vblNjcm9sbC5iaW5kKHRoaXMpO1xuICAgICAgICBpZiAodHlwZW9mIFJlc2l6ZU9ic2VydmVyID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhpcy5yZXNpemUgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICBpZiAoKChfYSA9IHRoaXMudmlldy5kb2NWaWV3KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubGFzdFVwZGF0ZSkgPCBEYXRlLm5vdygpIC0gNzUpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25SZXNpemUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5yZXNpemUub2JzZXJ2ZSh2aWV3LnNjcm9sbERPTSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZGRXaW5kb3dMaXN0ZW5lcnModGhpcy53aW4gPSB2aWV3Lndpbik7XG4gICAgICAgIHRoaXMuc3RhcnQoKTtcbiAgICAgICAgaWYgKHR5cGVvZiBJbnRlcnNlY3Rpb25PYnNlcnZlciA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKGVudHJpZXMgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudENoZWNrIDwgMClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnRDaGVjayA9IHNldFRpbWVvdXQodGhpcy5saXN0ZW5Gb3JTY3JvbGwuYmluZCh0aGlzKSwgMTAwMCk7XG4gICAgICAgICAgICAgICAgaWYgKGVudHJpZXMubGVuZ3RoID4gMCAmJiAoZW50cmllc1tlbnRyaWVzLmxlbmd0aCAtIDFdLmludGVyc2VjdGlvblJhdGlvID4gMCkgIT0gdGhpcy5pbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnRlcnNlY3RpbmcgPSAhdGhpcy5pbnRlcnNlY3Rpbmc7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmludGVyc2VjdGluZyAhPSB0aGlzLnZpZXcuaW5WaWV3KVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vblNjcm9sbENoYW5nZWQoZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwge30pO1xuICAgICAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb24ub2JzZXJ2ZSh0aGlzLmRvbSk7XG4gICAgICAgICAgICB0aGlzLmdhcEludGVyc2VjdGlvbiA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihlbnRyaWVzID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZW50cmllcy5sZW5ndGggPiAwICYmIGVudHJpZXNbZW50cmllcy5sZW5ndGggLSAxXS5pbnRlcnNlY3Rpb25SYXRpbyA+IDApXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25TY3JvbGxDaGFuZ2VkKGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRcIikpO1xuICAgICAgICAgICAgfSwge30pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGlzdGVuRm9yU2Nyb2xsKCk7XG4gICAgICAgIHRoaXMucmVhZFNlbGVjdGlvblJhbmdlKCk7XG4gICAgfVxuICAgIG9uU2Nyb2xsQ2hhbmdlZChlKSB7XG4gICAgICAgIHRoaXMudmlldy5pbnB1dFN0YXRlLnJ1blNjcm9sbEhhbmRsZXJzKHRoaXMudmlldywgZSk7XG4gICAgICAgIGlmICh0aGlzLmludGVyc2VjdGluZylcbiAgICAgICAgICAgIHRoaXMudmlldy5tZWFzdXJlKCk7XG4gICAgfVxuICAgIG9uU2Nyb2xsKGUpIHtcbiAgICAgICAgaWYgKHRoaXMuaW50ZXJzZWN0aW5nKVxuICAgICAgICAgICAgdGhpcy5mbHVzaChmYWxzZSk7XG4gICAgICAgIHRoaXMub25TY3JvbGxDaGFuZ2VkKGUpO1xuICAgIH1cbiAgICBvblJlc2l6ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVzaXplVGltZW91dCA8IDApXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZVRpbWVvdXQgPSAtMTtcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXcucmVxdWVzdE1lYXN1cmUoKTtcbiAgICAgICAgICAgIH0sIDUwKTtcbiAgICB9XG4gICAgb25QcmludCgpIHtcbiAgICAgICAgdGhpcy52aWV3LnZpZXdTdGF0ZS5wcmludGluZyA9IHRydWU7XG4gICAgICAgIHRoaXMudmlldy5tZWFzdXJlKCk7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy52aWV3LnZpZXdTdGF0ZS5wcmludGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy52aWV3LnJlcXVlc3RNZWFzdXJlKCk7XG4gICAgICAgIH0sIDUwMCk7XG4gICAgfVxuICAgIHVwZGF0ZUdhcHMoZ2Fwcykge1xuICAgICAgICBpZiAodGhpcy5nYXBJbnRlcnNlY3Rpb24gJiYgKGdhcHMubGVuZ3RoICE9IHRoaXMuZ2Fwcy5sZW5ndGggfHwgdGhpcy5nYXBzLnNvbWUoKGcsIGkpID0+IGcgIT0gZ2Fwc1tpXSkpKSB7XG4gICAgICAgICAgICB0aGlzLmdhcEludGVyc2VjdGlvbi5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICBmb3IgKGxldCBnYXAgb2YgZ2FwcylcbiAgICAgICAgICAgICAgICB0aGlzLmdhcEludGVyc2VjdGlvbi5vYnNlcnZlKGdhcCk7XG4gICAgICAgICAgICB0aGlzLmdhcHMgPSBnYXBzO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uU2VsZWN0aW9uQ2hhbmdlKGV2ZW50KSB7XG4gICAgICAgIGxldCB3YXNDaGFuZ2VkID0gdGhpcy5zZWxlY3Rpb25DaGFuZ2VkO1xuICAgICAgICBpZiAoIXRoaXMucmVhZFNlbGVjdGlvblJhbmdlKCkgfHwgdGhpcy5kZWxheWVkQW5kcm9pZEtleSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IHsgdmlldyB9ID0gdGhpcywgc2VsID0gdGhpcy5zZWxlY3Rpb25SYW5nZTtcbiAgICAgICAgaWYgKHZpZXcuc3RhdGUuZmFjZXQoZWRpdGFibGUpID8gdmlldy5yb290LmFjdGl2ZUVsZW1lbnQgIT0gdGhpcy5kb20gOiAhaGFzU2VsZWN0aW9uKHZpZXcuZG9tLCBzZWwpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsZXQgY29udGV4dCA9IHNlbC5hbmNob3JOb2RlICYmIHZpZXcuZG9jVmlldy5uZWFyZXN0KHNlbC5hbmNob3JOb2RlKTtcbiAgICAgICAgaWYgKGNvbnRleHQgJiYgY29udGV4dC5pZ25vcmVFdmVudChldmVudCkpIHtcbiAgICAgICAgICAgIGlmICghd2FzQ2hhbmdlZClcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbkNoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBEZWxldGlvbnMgb24gSUUxMSBmaXJlIHRoZWlyIGV2ZW50cyBpbiB0aGUgd3Jvbmcgb3JkZXIsIGdpdmluZ1xuICAgICAgICAvLyB1cyBhIHNlbGVjdGlvbiBjaGFuZ2UgZXZlbnQgYmVmb3JlIHRoZSBET00gY2hhbmdlcyBhcmVcbiAgICAgICAgLy8gcmVwb3J0ZWQuXG4gICAgICAgIC8vIENocm9tZSBBbmRyb2lkIGhhcyBhIHNpbWlsYXIgaXNzdWUgd2hlbiBiYWNrc3BhY2luZyBvdXQgYVxuICAgICAgICAvLyBzZWxlY3Rpb24gKCM2NDUpLlxuICAgICAgICBpZiAoKGJyb3dzZXIuaWUgJiYgYnJvd3Nlci5pZV92ZXJzaW9uIDw9IDExIHx8IGJyb3dzZXIuYW5kcm9pZCAmJiBicm93c2VyLmNocm9tZSkgJiYgIXZpZXcuc3RhdGUuc2VsZWN0aW9uLm1haW4uZW1wdHkgJiZcbiAgICAgICAgICAgIC8vIChTZWxlY3Rpb24uaXNDb2xsYXBzZWQgaXNuJ3QgcmVsaWFibGUgb24gSUUpXG4gICAgICAgICAgICBzZWwuZm9jdXNOb2RlICYmIGlzRXF1aXZhbGVudFBvc2l0aW9uKHNlbC5mb2N1c05vZGUsIHNlbC5mb2N1c09mZnNldCwgc2VsLmFuY2hvck5vZGUsIHNlbC5hbmNob3JPZmZzZXQpKVxuICAgICAgICAgICAgdGhpcy5mbHVzaFNvb24oKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGhpcy5mbHVzaChmYWxzZSk7XG4gICAgfVxuICAgIHJlYWRTZWxlY3Rpb25SYW5nZSgpIHtcbiAgICAgICAgbGV0IHsgdmlldyB9ID0gdGhpcztcbiAgICAgICAgLy8gVGhlIFNlbGVjdGlvbiBvYmplY3QgaXMgYnJva2VuIGluIHNoYWRvdyByb290cyBpbiBTYWZhcmkuIFNlZVxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vY29kZW1pcnJvci9kZXYvaXNzdWVzLzQxNFxuICAgICAgICBsZXQgcmFuZ2UgPSBicm93c2VyLnNhZmFyaSAmJiB2aWV3LnJvb3Qubm9kZVR5cGUgPT0gMTEgJiZcbiAgICAgICAgICAgIGRlZXBBY3RpdmVFbGVtZW50KHRoaXMuZG9tLm93bmVyRG9jdW1lbnQpID09IHRoaXMuZG9tICYmXG4gICAgICAgICAgICBzYWZhcmlTZWxlY3Rpb25SYW5nZUhhY2sodGhpcy52aWV3KSB8fCBnZXRTZWxlY3Rpb24odmlldy5yb290KTtcbiAgICAgICAgaWYgKCFyYW5nZSB8fCB0aGlzLnNlbGVjdGlvblJhbmdlLmVxKHJhbmdlKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgbGV0IGxvY2FsID0gaGFzU2VsZWN0aW9uKHRoaXMuZG9tLCByYW5nZSk7XG4gICAgICAgIC8vIERldGVjdCB0aGUgc2l0dWF0aW9uIHdoZXJlIHRoZSBicm93c2VyIGhhcywgb24gZm9jdXMsIG1vdmVkIHRoZVxuICAgICAgICAvLyBzZWxlY3Rpb24gdG8gdGhlIHN0YXJ0IG9mIHRoZSBjb250ZW50IGVsZW1lbnQuIFJlc2V0IGl0IHRvIHRoZVxuICAgICAgICAvLyBwb3NpdGlvbiBmcm9tIHRoZSBlZGl0b3Igc3RhdGUuXG4gICAgICAgIGlmIChsb2NhbCAmJiAhdGhpcy5zZWxlY3Rpb25DaGFuZ2VkICYmXG4gICAgICAgICAgICB2aWV3LmlucHV0U3RhdGUubGFzdEZvY3VzVGltZSA+IERhdGUubm93KCkgLSAyMDAgJiZcbiAgICAgICAgICAgIHZpZXcuaW5wdXRTdGF0ZS5sYXN0VG91Y2hUaW1lIDwgRGF0ZS5ub3coKSAtIDMwMCAmJlxuICAgICAgICAgICAgYXRFbGVtZW50U3RhcnQodGhpcy5kb20sIHJhbmdlKSkge1xuICAgICAgICAgICAgdGhpcy52aWV3LmlucHV0U3RhdGUubGFzdEZvY3VzVGltZSA9IDA7XG4gICAgICAgICAgICB2aWV3LmRvY1ZpZXcudXBkYXRlU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZWxlY3Rpb25SYW5nZS5zZXRSYW5nZShyYW5nZSk7XG4gICAgICAgIGlmIChsb2NhbClcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBzZXRTZWxlY3Rpb25SYW5nZShhbmNob3IsIGhlYWQpIHtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25SYW5nZS5zZXQoYW5jaG9yLm5vZGUsIGFuY2hvci5vZmZzZXQsIGhlYWQubm9kZSwgaGVhZC5vZmZzZXQpO1xuICAgICAgICB0aGlzLnNlbGVjdGlvbkNoYW5nZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgY2xlYXJTZWxlY3Rpb25SYW5nZSgpIHtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25SYW5nZS5zZXQobnVsbCwgMCwgbnVsbCwgMCk7XG4gICAgfVxuICAgIGxpc3RlbkZvclNjcm9sbCgpIHtcbiAgICAgICAgdGhpcy5wYXJlbnRDaGVjayA9IC0xO1xuICAgICAgICBsZXQgaSA9IDAsIGNoYW5nZWQgPSBudWxsO1xuICAgICAgICBmb3IgKGxldCBkb20gPSB0aGlzLmRvbTsgZG9tOykge1xuICAgICAgICAgICAgaWYgKGRvbS5ub2RlVHlwZSA9PSAxKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjaGFuZ2VkICYmIGkgPCB0aGlzLnNjcm9sbFRhcmdldHMubGVuZ3RoICYmIHRoaXMuc2Nyb2xsVGFyZ2V0c1tpXSA9PSBkb20pXG4gICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICBlbHNlIGlmICghY2hhbmdlZClcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlZCA9IHRoaXMuc2Nyb2xsVGFyZ2V0cy5zbGljZSgwLCBpKTtcbiAgICAgICAgICAgICAgICBpZiAoY2hhbmdlZClcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlZC5wdXNoKGRvbSk7XG4gICAgICAgICAgICAgICAgZG9tID0gZG9tLmFzc2lnbmVkU2xvdCB8fCBkb20ucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRvbS5ub2RlVHlwZSA9PSAxMSkgeyAvLyBTaGFkb3cgcm9vdFxuICAgICAgICAgICAgICAgIGRvbSA9IGRvbS5ob3N0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGkgPCB0aGlzLnNjcm9sbFRhcmdldHMubGVuZ3RoICYmICFjaGFuZ2VkKVxuICAgICAgICAgICAgY2hhbmdlZCA9IHRoaXMuc2Nyb2xsVGFyZ2V0cy5zbGljZSgwLCBpKTtcbiAgICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGRvbSBvZiB0aGlzLnNjcm9sbFRhcmdldHMpXG4gICAgICAgICAgICAgICAgZG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdGhpcy5vblNjcm9sbCk7XG4gICAgICAgICAgICBmb3IgKGxldCBkb20gb2YgdGhpcy5zY3JvbGxUYXJnZXRzID0gY2hhbmdlZClcbiAgICAgICAgICAgICAgICBkb20uYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCB0aGlzLm9uU2Nyb2xsKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZ25vcmUoZikge1xuICAgICAgICBpZiAoIXRoaXMuYWN0aXZlKVxuICAgICAgICAgICAgcmV0dXJuIGYoKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuc3RvcCgpO1xuICAgICAgICAgICAgcmV0dXJuIGYoKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnQoKTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLm9ic2VydmVyLm9ic2VydmUodGhpcy5kb20sIG9ic2VydmVPcHRpb25zKTtcbiAgICAgICAgaWYgKHVzZUNoYXJEYXRhKVxuICAgICAgICAgICAgdGhpcy5kb20uYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZFwiLCB0aGlzLm9uQ2hhckRhdGEpO1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IHRydWU7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIGlmICghdGhpcy5hY3RpdmUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICBpZiAodXNlQ2hhckRhdGEpXG4gICAgICAgICAgICB0aGlzLmRvbS5yZW1vdmVFdmVudExpc3RlbmVyKFwiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkXCIsIHRoaXMub25DaGFyRGF0YSk7XG4gICAgfVxuICAgIC8vIFRocm93IGF3YXkgYW55IHBlbmRpbmcgY2hhbmdlc1xuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLnByb2Nlc3NSZWNvcmRzKCk7XG4gICAgICAgIHRoaXMucXVldWUubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25DaGFuZ2VkID0gZmFsc2U7XG4gICAgfVxuICAgIC8vIENocm9tZSBBbmRyb2lkLCBlc3BlY2lhbGx5IGluIGNvbWJpbmF0aW9uIHdpdGggR0JvYXJkLCBub3Qgb25seVxuICAgIC8vIGRvZXNuJ3QgcmVsaWFibHkgZmlyZSByZWd1bGFyIGtleSBldmVudHMsIGJ1dCBhbHNvIG9mdGVuXG4gICAgLy8gc3Vycm91bmRzIHRoZSBlZmZlY3Qgb2YgZW50ZXIgb3IgYmFja3NwYWNlIHdpdGggYSBidW5jaCBvZlxuICAgIC8vIGNvbXBvc2l0aW9uIGV2ZW50cyB0aGF0LCB3aGVuIGludGVycnVwdGVkLCBjYXVzZSB0ZXh0IGR1cGxpY2F0aW9uXG4gICAgLy8gb3Igb3RoZXIga2luZHMgb2YgY29ycnVwdGlvbi4gVGhpcyBoYWNrIG1ha2VzIHRoZSBlZGl0b3IgYmFjayBvZmZcbiAgICAvLyBmcm9tIGhhbmRsaW5nIERPTSBjaGFuZ2VzIGZvciBhIG1vbWVudCB3aGVuIHN1Y2ggYSBrZXkgaXNcbiAgICAvLyBkZXRlY3RlZCAodmlhIGJlZm9yZWlucHV0IG9yIGtleWRvd24pLCBhbmQgdGhlbiB0cmllcyB0byBmbHVzaFxuICAgIC8vIHRoZW0gb3IsIGlmIHRoYXQgaGFzIG5vIGVmZmVjdCwgZGlzcGF0Y2hlcyB0aGUgZ2l2ZW4ga2V5LlxuICAgIGRlbGF5QW5kcm9pZEtleShrZXksIGtleUNvZGUpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAoIXRoaXMuZGVsYXllZEFuZHJvaWRLZXkpIHtcbiAgICAgICAgICAgIGxldCBmbHVzaCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQga2V5ID0gdGhpcy5kZWxheWVkQW5kcm9pZEtleTtcbiAgICAgICAgICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJEZWxheWVkQW5kcm9pZEtleSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZmx1c2goKSAmJiBrZXkuZm9yY2UpXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaEtleSh0aGlzLmRvbSwga2V5LmtleSwga2V5LmtleUNvZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmZsdXNoaW5nQW5kcm9pZEtleSA9IHRoaXMudmlldy53aW4ucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZsdXNoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTaW5jZSBiYWNrc3BhY2UgYmVmb3JlaW5wdXQgaXMgc29tZXRpbWVzIHNpZ25hbGxlZCBzcHVyaW91c2x5LFxuICAgICAgICAvLyBFbnRlciBhbHdheXMgdGFrZXMgcHJlY2VkZW5jZS5cbiAgICAgICAgaWYgKCF0aGlzLmRlbGF5ZWRBbmRyb2lkS2V5IHx8IGtleSA9PSBcIkVudGVyXCIpXG4gICAgICAgICAgICB0aGlzLmRlbGF5ZWRBbmRyb2lkS2V5ID0ge1xuICAgICAgICAgICAgICAgIGtleSwga2V5Q29kZSxcbiAgICAgICAgICAgICAgICAvLyBPbmx5IHJ1biB0aGUga2V5IGhhbmRsZXIgd2hlbiBubyBjaGFuZ2VzIGFyZSBkZXRlY3RlZCBpZlxuICAgICAgICAgICAgICAgIC8vIHRoaXMgaXNuJ3QgY29taW5nIHJpZ2h0IGFmdGVyIGFub3RoZXIgY2hhbmdlLCBpbiB3aGljaCBjYXNlXG4gICAgICAgICAgICAgICAgLy8gaXQgaXMgcHJvYmFibHkgcGFydCBvZiBhIHdlaXJkIGNoYWluIG9mIHVwZGF0ZXMsIGFuZCBzaG91bGRcbiAgICAgICAgICAgICAgICAvLyBiZSBpZ25vcmVkIGlmIGl0IHJldHVybnMgdGhlIERPTSB0byBpdHMgcHJldmlvdXMgc3RhdGUuXG4gICAgICAgICAgICAgICAgZm9yY2U6IHRoaXMubGFzdENoYW5nZSA8IERhdGUubm93KCkgLSA1MCB8fCAhISgoX2EgPSB0aGlzLmRlbGF5ZWRBbmRyb2lkS2V5KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZm9yY2UpXG4gICAgICAgICAgICB9O1xuICAgIH1cbiAgICBjbGVhckRlbGF5ZWRBbmRyb2lkS2V5KCkge1xuICAgICAgICB0aGlzLndpbi5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmZsdXNoaW5nQW5kcm9pZEtleSk7XG4gICAgICAgIHRoaXMuZGVsYXllZEFuZHJvaWRLZXkgPSBudWxsO1xuICAgICAgICB0aGlzLmZsdXNoaW5nQW5kcm9pZEtleSA9IC0xO1xuICAgIH1cbiAgICBmbHVzaFNvb24oKSB7XG4gICAgICAgIGlmICh0aGlzLmRlbGF5ZWRGbHVzaCA8IDApXG4gICAgICAgICAgICB0aGlzLmRlbGF5ZWRGbHVzaCA9IHRoaXMudmlldy53aW4ucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHsgdGhpcy5kZWxheWVkRmx1c2ggPSAtMTsgdGhpcy5mbHVzaCgpOyB9KTtcbiAgICB9XG4gICAgZm9yY2VGbHVzaCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGVsYXllZEZsdXNoID49IDApIHtcbiAgICAgICAgICAgIHRoaXMudmlldy53aW4uY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5kZWxheWVkRmx1c2gpO1xuICAgICAgICAgICAgdGhpcy5kZWxheWVkRmx1c2ggPSAtMTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZsdXNoKCk7XG4gICAgfVxuICAgIHByb2Nlc3NSZWNvcmRzKCkge1xuICAgICAgICBsZXQgcmVjb3JkcyA9IHRoaXMucXVldWU7XG4gICAgICAgIGZvciAobGV0IG11dCBvZiB0aGlzLm9ic2VydmVyLnRha2VSZWNvcmRzKCkpXG4gICAgICAgICAgICByZWNvcmRzLnB1c2gobXV0KTtcbiAgICAgICAgaWYgKHJlY29yZHMubGVuZ3RoKVxuICAgICAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xuICAgICAgICBsZXQgZnJvbSA9IC0xLCB0byA9IC0xLCB0eXBlT3ZlciA9IGZhbHNlO1xuICAgICAgICBmb3IgKGxldCByZWNvcmQgb2YgcmVjb3Jkcykge1xuICAgICAgICAgICAgbGV0IHJhbmdlID0gdGhpcy5yZWFkTXV0YXRpb24ocmVjb3JkKTtcbiAgICAgICAgICAgIGlmICghcmFuZ2UpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBpZiAocmFuZ2UudHlwZU92ZXIpXG4gICAgICAgICAgICAgICAgdHlwZU92ZXIgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKGZyb20gPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAoeyBmcm9tLCB0byB9ID0gcmFuZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZnJvbSA9IE1hdGgubWluKHJhbmdlLmZyb20sIGZyb20pO1xuICAgICAgICAgICAgICAgIHRvID0gTWF0aC5tYXgocmFuZ2UudG8sIHRvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBmcm9tLCB0bywgdHlwZU92ZXIgfTtcbiAgICB9XG4gICAgcmVhZENoYW5nZSgpIHtcbiAgICAgICAgbGV0IHsgZnJvbSwgdG8sIHR5cGVPdmVyIH0gPSB0aGlzLnByb2Nlc3NSZWNvcmRzKCk7XG4gICAgICAgIGxldCBuZXdTZWwgPSB0aGlzLnNlbGVjdGlvbkNoYW5nZWQgJiYgaGFzU2VsZWN0aW9uKHRoaXMuZG9tLCB0aGlzLnNlbGVjdGlvblJhbmdlKTtcbiAgICAgICAgaWYgKGZyb20gPCAwICYmICFuZXdTZWwpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKGZyb20gPiAtMSlcbiAgICAgICAgICAgIHRoaXMubGFzdENoYW5nZSA9IERhdGUubm93KCk7XG4gICAgICAgIHRoaXMudmlldy5pbnB1dFN0YXRlLmxhc3RGb2N1c1RpbWUgPSAwO1xuICAgICAgICB0aGlzLnNlbGVjdGlvbkNoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIG5ldyBET01DaGFuZ2UodGhpcy52aWV3LCBmcm9tLCB0bywgdHlwZU92ZXIpO1xuICAgIH1cbiAgICAvLyBBcHBseSBwZW5kaW5nIGNoYW5nZXMsIGlmIGFueVxuICAgIGZsdXNoKHJlYWRTZWxlY3Rpb24gPSB0cnVlKSB7XG4gICAgICAgIC8vIENvbXBsZXRlbHkgaG9sZCBvZmYgZmx1c2hpbmcgd2hlbiBwZW5kaW5nIGtleXMgYXJlIHNldFx1MjAxNHRoZSBjb2RlXG4gICAgICAgIC8vIG1hbmFnaW5nIHRob3NlIHdpbGwgbWFrZSBzdXJlIHByb2Nlc3NSZWNvcmRzIGlzIGNhbGxlZCBhbmQgdGhlXG4gICAgICAgIC8vIHZpZXcgaXMgcmVzeW5jaHJvbml6ZWQgYWZ0ZXJcbiAgICAgICAgaWYgKHRoaXMuZGVsYXllZEZsdXNoID49IDAgfHwgdGhpcy5kZWxheWVkQW5kcm9pZEtleSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKHJlYWRTZWxlY3Rpb24pXG4gICAgICAgICAgICB0aGlzLnJlYWRTZWxlY3Rpb25SYW5nZSgpO1xuICAgICAgICBsZXQgZG9tQ2hhbmdlID0gdGhpcy5yZWFkQ2hhbmdlKCk7XG4gICAgICAgIGlmICghZG9tQ2hhbmdlKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBsZXQgc3RhcnRTdGF0ZSA9IHRoaXMudmlldy5zdGF0ZTtcbiAgICAgICAgbGV0IGhhbmRsZWQgPSBhcHBseURPTUNoYW5nZSh0aGlzLnZpZXcsIGRvbUNoYW5nZSk7XG4gICAgICAgIC8vIFRoZSB2aWV3IHdhc24ndCB1cGRhdGVkXG4gICAgICAgIGlmICh0aGlzLnZpZXcuc3RhdGUgPT0gc3RhcnRTdGF0ZSlcbiAgICAgICAgICAgIHRoaXMudmlldy51cGRhdGUoW10pO1xuICAgICAgICByZXR1cm4gaGFuZGxlZDtcbiAgICB9XG4gICAgcmVhZE11dGF0aW9uKHJlYykge1xuICAgICAgICBsZXQgY1ZpZXcgPSB0aGlzLnZpZXcuZG9jVmlldy5uZWFyZXN0KHJlYy50YXJnZXQpO1xuICAgICAgICBpZiAoIWNWaWV3IHx8IGNWaWV3Lmlnbm9yZU11dGF0aW9uKHJlYykpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgY1ZpZXcubWFya0RpcnR5KHJlYy50eXBlID09IFwiYXR0cmlidXRlc1wiKTtcbiAgICAgICAgaWYgKHJlYy50eXBlID09IFwiYXR0cmlidXRlc1wiKVxuICAgICAgICAgICAgY1ZpZXcuZGlydHkgfD0gNCAvKiBEaXJ0eS5BdHRycyAqLztcbiAgICAgICAgaWYgKHJlYy50eXBlID09IFwiY2hpbGRMaXN0XCIpIHtcbiAgICAgICAgICAgIGxldCBjaGlsZEJlZm9yZSA9IGZpbmRDaGlsZChjVmlldywgcmVjLnByZXZpb3VzU2libGluZyB8fCByZWMudGFyZ2V0LnByZXZpb3VzU2libGluZywgLTEpO1xuICAgICAgICAgICAgbGV0IGNoaWxkQWZ0ZXIgPSBmaW5kQ2hpbGQoY1ZpZXcsIHJlYy5uZXh0U2libGluZyB8fCByZWMudGFyZ2V0Lm5leHRTaWJsaW5nLCAxKTtcbiAgICAgICAgICAgIHJldHVybiB7IGZyb206IGNoaWxkQmVmb3JlID8gY1ZpZXcucG9zQWZ0ZXIoY2hpbGRCZWZvcmUpIDogY1ZpZXcucG9zQXRTdGFydCxcbiAgICAgICAgICAgICAgICB0bzogY2hpbGRBZnRlciA/IGNWaWV3LnBvc0JlZm9yZShjaGlsZEFmdGVyKSA6IGNWaWV3LnBvc0F0RW5kLCB0eXBlT3ZlcjogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChyZWMudHlwZSA9PSBcImNoYXJhY3RlckRhdGFcIikge1xuICAgICAgICAgICAgcmV0dXJuIHsgZnJvbTogY1ZpZXcucG9zQXRTdGFydCwgdG86IGNWaWV3LnBvc0F0RW5kLCB0eXBlT3ZlcjogcmVjLnRhcmdldC5ub2RlVmFsdWUgPT0gcmVjLm9sZFZhbHVlIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRXaW5kb3cod2luKSB7XG4gICAgICAgIGlmICh3aW4gIT0gdGhpcy53aW4pIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlV2luZG93TGlzdGVuZXJzKHRoaXMud2luKTtcbiAgICAgICAgICAgIHRoaXMud2luID0gd2luO1xuICAgICAgICAgICAgdGhpcy5hZGRXaW5kb3dMaXN0ZW5lcnModGhpcy53aW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZFdpbmRvd0xpc3RlbmVycyh3aW4pIHtcbiAgICAgICAgd2luLmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5vblJlc2l6ZSk7XG4gICAgICAgIHdpbi5hZGRFdmVudExpc3RlbmVyKFwiYmVmb3JlcHJpbnRcIiwgdGhpcy5vblByaW50KTtcbiAgICAgICAgd2luLmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdGhpcy5vblNjcm9sbCk7XG4gICAgICAgIHdpbi5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwic2VsZWN0aW9uY2hhbmdlXCIsIHRoaXMub25TZWxlY3Rpb25DaGFuZ2UpO1xuICAgIH1cbiAgICByZW1vdmVXaW5kb3dMaXN0ZW5lcnMod2luKSB7XG4gICAgICAgIHdpbi5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIHRoaXMub25TY3JvbGwpO1xuICAgICAgICB3aW4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB0aGlzLm9uUmVzaXplKTtcbiAgICAgICAgd2luLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJiZWZvcmVwcmludFwiLCB0aGlzLm9uUHJpbnQpO1xuICAgICAgICB3aW4uZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNlbGVjdGlvbmNoYW5nZVwiLCB0aGlzLm9uU2VsZWN0aW9uQ2hhbmdlKTtcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIHRoaXMuc3RvcCgpO1xuICAgICAgICAoX2EgPSB0aGlzLmludGVyc2VjdGlvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgKF9iID0gdGhpcy5nYXBJbnRlcnNlY3Rpb24pID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5kaXNjb25uZWN0KCk7XG4gICAgICAgIChfYyA9IHRoaXMucmVzaXplKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MuZGlzY29ubmVjdCgpO1xuICAgICAgICBmb3IgKGxldCBkb20gb2YgdGhpcy5zY3JvbGxUYXJnZXRzKVxuICAgICAgICAgICAgZG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdGhpcy5vblNjcm9sbCk7XG4gICAgICAgIHRoaXMucmVtb3ZlV2luZG93TGlzdGVuZXJzKHRoaXMud2luKTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucGFyZW50Q2hlY2spO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5yZXNpemVUaW1lb3V0KTtcbiAgICAgICAgdGhpcy53aW4uY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5kZWxheWVkRmx1c2gpO1xuICAgICAgICB0aGlzLndpbi5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmZsdXNoaW5nQW5kcm9pZEtleSk7XG4gICAgfVxufVxuZnVuY3Rpb24gZmluZENoaWxkKGNWaWV3LCBkb20sIGRpcikge1xuICAgIHdoaWxlIChkb20pIHtcbiAgICAgICAgbGV0IGN1clZpZXcgPSBDb250ZW50Vmlldy5nZXQoZG9tKTtcbiAgICAgICAgaWYgKGN1clZpZXcgJiYgY3VyVmlldy5wYXJlbnQgPT0gY1ZpZXcpXG4gICAgICAgICAgICByZXR1cm4gY3VyVmlldztcbiAgICAgICAgbGV0IHBhcmVudCA9IGRvbS5wYXJlbnROb2RlO1xuICAgICAgICBkb20gPSBwYXJlbnQgIT0gY1ZpZXcuZG9tID8gcGFyZW50IDogZGlyID4gMCA/IGRvbS5uZXh0U2libGluZyA6IGRvbS5wcmV2aW91c1NpYmxpbmc7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuLy8gVXNlZCB0byB3b3JrIGFyb3VuZCBhIFNhZmFyaSBTZWxlY3Rpb24vc2hhZG93IERPTSBidWcgKCM0MTQpXG5mdW5jdGlvbiBzYWZhcmlTZWxlY3Rpb25SYW5nZUhhY2sodmlldykge1xuICAgIGxldCBmb3VuZCA9IG51bGw7XG4gICAgLy8gQmVjYXVzZSBTYWZhcmkgKGF0IGxlYXN0IGluIDIwMTgtMjAyMSkgZG9lc24ndCBwcm92aWRlIHJlZ3VsYXJcbiAgICAvLyBhY2Nlc3MgdG8gdGhlIHNlbGVjdGlvbiBpbnNpZGUgYSBzaGFkb3dyb290LCB3ZSBoYXZlIHRvIHBlcmZvcm0gYVxuICAgIC8vIHJpZGljdWxvdXMgaGFjayB0byBnZXQgYXQgaXRcdTIwMTR1c2luZyBgZXhlY0NvbW1hbmRgIHRvIHRyaWdnZXIgYVxuICAgIC8vIGBiZWZvcmVJbnB1dGAgZXZlbnQgc28gdGhhdCB3ZSBjYW4gcmVhZCB0aGUgdGFyZ2V0IHJhbmdlIGZyb20gdGhlXG4gICAgLy8gZXZlbnQuXG4gICAgZnVuY3Rpb24gcmVhZChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgZm91bmQgPSBldmVudC5nZXRUYXJnZXRSYW5nZXMoKVswXTtcbiAgICB9XG4gICAgdmlldy5jb250ZW50RE9NLmFkZEV2ZW50TGlzdGVuZXIoXCJiZWZvcmVpbnB1dFwiLCByZWFkLCB0cnVlKTtcbiAgICB2aWV3LmRvbS5vd25lckRvY3VtZW50LmV4ZWNDb21tYW5kKFwiaW5kZW50XCIpO1xuICAgIHZpZXcuY29udGVudERPTS5yZW1vdmVFdmVudExpc3RlbmVyKFwiYmVmb3JlaW5wdXRcIiwgcmVhZCwgdHJ1ZSk7XG4gICAgaWYgKCFmb3VuZClcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgbGV0IGFuY2hvck5vZGUgPSBmb3VuZC5zdGFydENvbnRhaW5lciwgYW5jaG9yT2Zmc2V0ID0gZm91bmQuc3RhcnRPZmZzZXQ7XG4gICAgbGV0IGZvY3VzTm9kZSA9IGZvdW5kLmVuZENvbnRhaW5lciwgZm9jdXNPZmZzZXQgPSBmb3VuZC5lbmRPZmZzZXQ7XG4gICAgbGV0IGN1ckFuY2hvciA9IHZpZXcuZG9jVmlldy5kb21BdFBvcyh2aWV3LnN0YXRlLnNlbGVjdGlvbi5tYWluLmFuY2hvcik7XG4gICAgLy8gU2luY2Ugc3VjaCBhIHJhbmdlIGRvZXNuJ3QgZGlzdGluZ3Vpc2ggYmV0d2VlbiBhbmNob3IgYW5kIGhlYWQsXG4gICAgLy8gdXNlIGEgaGV1cmlzdGljIHRoYXQgZmxpcHMgaXQgYXJvdW5kIGlmIGl0cyBlbmQgbWF0Y2hlcyB0aGVcbiAgICAvLyBjdXJyZW50IGFuY2hvci5cbiAgICBpZiAoaXNFcXVpdmFsZW50UG9zaXRpb24oY3VyQW5jaG9yLm5vZGUsIGN1ckFuY2hvci5vZmZzZXQsIGZvY3VzTm9kZSwgZm9jdXNPZmZzZXQpKVxuICAgICAgICBbYW5jaG9yTm9kZSwgYW5jaG9yT2Zmc2V0LCBmb2N1c05vZGUsIGZvY3VzT2Zmc2V0XSA9IFtmb2N1c05vZGUsIGZvY3VzT2Zmc2V0LCBhbmNob3JOb2RlLCBhbmNob3JPZmZzZXRdO1xuICAgIHJldHVybiB7IGFuY2hvck5vZGUsIGFuY2hvck9mZnNldCwgZm9jdXNOb2RlLCBmb2N1c09mZnNldCB9O1xufVxuXG4vLyBUaGUgZWRpdG9yJ3MgdXBkYXRlIHN0YXRlIG1hY2hpbmUgbG9va3Mgc29tZXRoaW5nIGxpa2UgdGhpczpcbi8vXG4vLyAgICAgSWRsZSBcdTIxOTIgVXBkYXRpbmcgXHUyMUM2IElkbGUgKHVuY2hlY2tlZCkgXHUyMTkyIE1lYXN1cmluZyBcdTIxOTIgSWRsZVxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFx1MjE5MSAgICAgIFx1MjE5M1xuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVwZGF0aW5nIChtZWFzdXJlKVxuLy9cbi8vIFRoZSBkaWZmZXJlbmNlIGJldHdlZW4gJ0lkbGUnIGFuZCAnSWRsZSAodW5jaGVja2VkKScgbGllcyBpblxuLy8gd2hldGhlciBhIGxheW91dCBjaGVjayBoYXMgYmVlbiBzY2hlZHVsZWQuIEEgcmVndWxhciB1cGRhdGUgdGhyb3VnaFxuLy8gdGhlIGB1cGRhdGVgIG1ldGhvZCB1cGRhdGVzIHRoZSBET00gaW4gYSB3cml0ZS1vbmx5IGZhc2hpb24sIGFuZFxuLy8gcmVsaWVzIG9uIGEgY2hlY2sgKHNjaGVkdWxlZCB3aXRoIGByZXF1ZXN0QW5pbWF0aW9uRnJhbWVgKSB0byBtYWtlXG4vLyBzdXJlIGV2ZXJ5dGhpbmcgaXMgd2hlcmUgaXQgc2hvdWxkIGJlIGFuZCB0aGUgdmlld3BvcnQgY292ZXJzIHRoZVxuLy8gdmlzaWJsZSBjb2RlLiBUaGF0IGNoZWNrIGNvbnRpbnVlcyB0byBtZWFzdXJlIGFuZCB0aGVuIG9wdGlvbmFsbHlcbi8vIHVwZGF0ZSB1bnRpbCBpdCByZWFjaGVzIGEgY29oZXJlbnQgc3RhdGUuXG4vKipcbkFuIGVkaXRvciB2aWV3IHJlcHJlc2VudHMgdGhlIGVkaXRvcidzIHVzZXIgaW50ZXJmYWNlLiBJdCBob2xkc1xudGhlIGVkaXRhYmxlIERPTSBzdXJmYWNlLCBhbmQgcG9zc2libHkgb3RoZXIgZWxlbWVudHMgc3VjaCBhcyB0aGVcbmxpbmUgbnVtYmVyIGd1dHRlci4gSXQgaGFuZGxlcyBldmVudHMgYW5kIGRpc3BhdGNoZXMgc3RhdGVcbnRyYW5zYWN0aW9ucyBmb3IgZWRpdGluZyBhY3Rpb25zLlxuKi9cbmNsYXNzIEVkaXRvclZpZXcge1xuICAgIC8qKlxuICAgIENvbnN0cnVjdCBhIG5ldyB2aWV3LiBZb3UnbGwgd2FudCB0byBlaXRoZXIgcHJvdmlkZSBhIGBwYXJlbnRgXG4gICAgb3B0aW9uLCBvciBwdXQgYHZpZXcuZG9tYCBpbnRvIHlvdXIgZG9jdW1lbnQgYWZ0ZXIgY3JlYXRpbmcgYVxuICAgIHZpZXcsIHNvIHRoYXQgdGhlIHVzZXIgY2FuIHNlZSB0aGUgZWRpdG9yLlxuICAgICovXG4gICAgY29uc3RydWN0b3IoY29uZmlnID0ge30pIHtcbiAgICAgICAgdGhpcy5wbHVnaW5zID0gW107XG4gICAgICAgIHRoaXMucGx1Z2luTWFwID0gbmV3IE1hcDtcbiAgICAgICAgdGhpcy5lZGl0b3JBdHRycyA9IHt9O1xuICAgICAgICB0aGlzLmNvbnRlbnRBdHRycyA9IHt9O1xuICAgICAgICB0aGlzLmJpZGlDYWNoZSA9IFtdO1xuICAgICAgICB0aGlzLmRlc3Ryb3llZCA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgQGludGVybmFsXG4gICAgICAgICovXG4gICAgICAgIHRoaXMudXBkYXRlU3RhdGUgPSAyIC8qIFVwZGF0ZVN0YXRlLlVwZGF0aW5nICovO1xuICAgICAgICAvKipcbiAgICAgICAgQGludGVybmFsXG4gICAgICAgICovXG4gICAgICAgIHRoaXMubWVhc3VyZVNjaGVkdWxlZCA9IC0xO1xuICAgICAgICAvKipcbiAgICAgICAgQGludGVybmFsXG4gICAgICAgICovXG4gICAgICAgIHRoaXMubWVhc3VyZVJlcXVlc3RzID0gW107XG4gICAgICAgIHRoaXMuY29udGVudERPTSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuc2Nyb2xsRE9NID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5zY3JvbGxET00udGFiSW5kZXggPSAtMTtcbiAgICAgICAgdGhpcy5zY3JvbGxET00uY2xhc3NOYW1lID0gXCJjbS1zY3JvbGxlclwiO1xuICAgICAgICB0aGlzLnNjcm9sbERPTS5hcHBlbmRDaGlsZCh0aGlzLmNvbnRlbnRET00pO1xuICAgICAgICB0aGlzLmFubm91bmNlRE9NID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5hbm5vdW5jZURPTS5zdHlsZS5jc3NUZXh0ID0gXCJwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogLTEwMDAwcHhcIjtcbiAgICAgICAgdGhpcy5hbm5vdW5jZURPTS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxpdmVcIiwgXCJwb2xpdGVcIik7XG4gICAgICAgIHRoaXMuZG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5kb20uYXBwZW5kQ2hpbGQodGhpcy5hbm5vdW5jZURPTSk7XG4gICAgICAgIHRoaXMuZG9tLmFwcGVuZENoaWxkKHRoaXMuc2Nyb2xsRE9NKTtcbiAgICAgICAgdGhpcy5fZGlzcGF0Y2ggPSBjb25maWcuZGlzcGF0Y2ggfHwgKCh0cikgPT4gdGhpcy51cGRhdGUoW3RyXSkpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoID0gdGhpcy5kaXNwYXRjaC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9yb290ID0gKGNvbmZpZy5yb290IHx8IGdldFJvb3QoY29uZmlnLnBhcmVudCkgfHwgZG9jdW1lbnQpO1xuICAgICAgICB0aGlzLnZpZXdTdGF0ZSA9IG5ldyBWaWV3U3RhdGUoY29uZmlnLnN0YXRlIHx8IEVkaXRvclN0YXRlLmNyZWF0ZShjb25maWcpKTtcbiAgICAgICAgdGhpcy5wbHVnaW5zID0gdGhpcy5zdGF0ZS5mYWNldCh2aWV3UGx1Z2luKS5tYXAoc3BlYyA9PiBuZXcgUGx1Z2luSW5zdGFuY2Uoc3BlYykpO1xuICAgICAgICBmb3IgKGxldCBwbHVnaW4gb2YgdGhpcy5wbHVnaW5zKVxuICAgICAgICAgICAgcGx1Z2luLnVwZGF0ZSh0aGlzKTtcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IG5ldyBET01PYnNlcnZlcih0aGlzKTtcbiAgICAgICAgdGhpcy5pbnB1dFN0YXRlID0gbmV3IElucHV0U3RhdGUodGhpcyk7XG4gICAgICAgIHRoaXMuaW5wdXRTdGF0ZS5lbnN1cmVIYW5kbGVycyh0aGlzLCB0aGlzLnBsdWdpbnMpO1xuICAgICAgICB0aGlzLmRvY1ZpZXcgPSBuZXcgRG9jVmlldyh0aGlzKTtcbiAgICAgICAgdGhpcy5tb3VudFN0eWxlcygpO1xuICAgICAgICB0aGlzLnVwZGF0ZUF0dHJzKCk7XG4gICAgICAgIHRoaXMudXBkYXRlU3RhdGUgPSAwIC8qIFVwZGF0ZVN0YXRlLklkbGUgKi87XG4gICAgICAgIHRoaXMucmVxdWVzdE1lYXN1cmUoKTtcbiAgICAgICAgaWYgKGNvbmZpZy5wYXJlbnQpXG4gICAgICAgICAgICBjb25maWcucGFyZW50LmFwcGVuZENoaWxkKHRoaXMuZG9tKTtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIGN1cnJlbnQgZWRpdG9yIHN0YXRlLlxuICAgICovXG4gICAgZ2V0IHN0YXRlKCkgeyByZXR1cm4gdGhpcy52aWV3U3RhdGUuc3RhdGU7IH1cbiAgICAvKipcbiAgICBUbyBiZSBhYmxlIHRvIGRpc3BsYXkgbGFyZ2UgZG9jdW1lbnRzIHdpdGhvdXQgY29uc3VtaW5nIHRvbyBtdWNoXG4gICAgbWVtb3J5IG9yIG92ZXJsb2FkaW5nIHRoZSBicm93c2VyLCBDb2RlTWlycm9yIG9ubHkgZHJhd3MgdGhlXG4gICAgY29kZSB0aGF0IGlzIHZpc2libGUgKHBsdXMgYSBtYXJnaW4gYXJvdW5kIGl0KSB0byB0aGUgRE9NLiBUaGlzXG4gICAgcHJvcGVydHkgdGVsbHMgeW91IHRoZSBleHRlbnQgb2YgdGhlIGN1cnJlbnQgZHJhd24gdmlld3BvcnQsIGluXG4gICAgZG9jdW1lbnQgcG9zaXRpb25zLlxuICAgICovXG4gICAgZ2V0IHZpZXdwb3J0KCkgeyByZXR1cm4gdGhpcy52aWV3U3RhdGUudmlld3BvcnQ7IH1cbiAgICAvKipcbiAgICBXaGVuIHRoZXJlIGFyZSwgZm9yIGV4YW1wbGUsIGxhcmdlIGNvbGxhcHNlZCByYW5nZXMgaW4gdGhlXG4gICAgdmlld3BvcnQsIGl0cyBzaXplIGNhbiBiZSBhIGxvdCBiaWdnZXIgdGhhbiB0aGUgYWN0dWFsIHZpc2libGVcbiAgICBjb250ZW50LiBUaHVzLCBpZiB5b3UgYXJlIGRvaW5nIHNvbWV0aGluZyBsaWtlIHN0eWxpbmcgdGhlXG4gICAgY29udGVudCBpbiB0aGUgdmlld3BvcnQsIGl0IGlzIHByZWZlcmFibGUgdG8gb25seSBkbyBzbyBmb3JcbiAgICB0aGVzZSByYW5nZXMsIHdoaWNoIGFyZSB0aGUgc3Vic2V0IG9mIHRoZSB2aWV3cG9ydCB0aGF0IGlzXG4gICAgYWN0dWFsbHkgZHJhd24uXG4gICAgKi9cbiAgICBnZXQgdmlzaWJsZVJhbmdlcygpIHsgcmV0dXJuIHRoaXMudmlld1N0YXRlLnZpc2libGVSYW5nZXM7IH1cbiAgICAvKipcbiAgICBSZXR1cm5zIGZhbHNlIHdoZW4gdGhlIGVkaXRvciBpcyBlbnRpcmVseSBzY3JvbGxlZCBvdXQgb2Ygdmlld1xuICAgIG9yIG90aGVyd2lzZSBoaWRkZW4uXG4gICAgKi9cbiAgICBnZXQgaW5WaWV3KCkgeyByZXR1cm4gdGhpcy52aWV3U3RhdGUuaW5WaWV3OyB9XG4gICAgLyoqXG4gICAgSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHVzZXIgaXMgY3VycmVudGx5IGNvbXBvc2luZyB0ZXh0IHZpYVxuICAgIFtJTUVdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lucHV0X21ldGhvZCksIGFuZCBhdCBsZWFzdFxuICAgIG9uZSBjaGFuZ2UgaGFzIGJlZW4gbWFkZSBpbiB0aGUgY3VycmVudCBjb21wb3NpdGlvbi5cbiAgICAqL1xuICAgIGdldCBjb21wb3NpbmcoKSB7IHJldHVybiB0aGlzLmlucHV0U3RhdGUuY29tcG9zaW5nID4gMDsgfVxuICAgIC8qKlxuICAgIEluZGljYXRlcyB3aGV0aGVyIHRoZSB1c2VyIGlzIGN1cnJlbnRseSBpbiBjb21wb3Npbmcgc3RhdGUuIE5vdGVcbiAgICB0aGF0IG9uIHNvbWUgcGxhdGZvcm1zLCBsaWtlIEFuZHJvaWQsIHRoaXMgd2lsbCBiZSB0aGUgY2FzZSBhXG4gICAgbG90LCBzaW5jZSBqdXN0IHB1dHRpbmcgdGhlIGN1cnNvciBvbiBhIHdvcmQgc3RhcnRzIGFcbiAgICBjb21wb3NpdGlvbiB0aGVyZS5cbiAgICAqL1xuICAgIGdldCBjb21wb3NpdGlvblN0YXJ0ZWQoKSB7IHJldHVybiB0aGlzLmlucHV0U3RhdGUuY29tcG9zaW5nID49IDA7IH1cbiAgICAvKipcbiAgICBUaGUgZG9jdW1lbnQgb3Igc2hhZG93IHJvb3QgdGhhdCB0aGUgdmlldyBsaXZlcyBpbi5cbiAgICAqL1xuICAgIGdldCByb290KCkgeyByZXR1cm4gdGhpcy5fcm9vdDsgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZ2V0IHdpbigpIHsgcmV0dXJuIHRoaXMuZG9tLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcgfHwgd2luZG93OyB9XG4gICAgZGlzcGF0Y2goLi4uaW5wdXQpIHtcbiAgICAgICAgdGhpcy5fZGlzcGF0Y2goaW5wdXQubGVuZ3RoID09IDEgJiYgaW5wdXRbMF0gaW5zdGFuY2VvZiBUcmFuc2FjdGlvbiA/IGlucHV0WzBdXG4gICAgICAgICAgICA6IHRoaXMuc3RhdGUudXBkYXRlKC4uLmlucHV0KSk7XG4gICAgfVxuICAgIC8qKlxuICAgIFVwZGF0ZSB0aGUgdmlldyBmb3IgdGhlIGdpdmVuIGFycmF5IG9mIHRyYW5zYWN0aW9ucy4gVGhpcyB3aWxsXG4gICAgdXBkYXRlIHRoZSB2aXNpYmxlIGRvY3VtZW50IGFuZCBzZWxlY3Rpb24gdG8gbWF0Y2ggdGhlIHN0YXRlXG4gICAgcHJvZHVjZWQgYnkgdGhlIHRyYW5zYWN0aW9ucywgYW5kIG5vdGlmeSB2aWV3IHBsdWdpbnMgb2YgdGhlXG4gICAgY2hhbmdlLiBZb3Ugc2hvdWxkIHVzdWFsbHkgY2FsbFxuICAgIFtgZGlzcGF0Y2hgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlldy5kaXNwYXRjaCkgaW5zdGVhZCwgd2hpY2ggdXNlcyB0aGlzXG4gICAgYXMgYSBwcmltaXRpdmUuXG4gICAgKi9cbiAgICB1cGRhdGUodHJhbnNhY3Rpb25zKSB7XG4gICAgICAgIGlmICh0aGlzLnVwZGF0ZVN0YXRlICE9IDAgLyogVXBkYXRlU3RhdGUuSWRsZSAqLylcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbGxzIHRvIEVkaXRvclZpZXcudXBkYXRlIGFyZSBub3QgYWxsb3dlZCB3aGlsZSBhbiB1cGRhdGUgaXMgaW4gcHJvZ3Jlc3NcIik7XG4gICAgICAgIGxldCByZWRyYXduID0gZmFsc2UsIGF0dHJzQ2hhbmdlZCA9IGZhbHNlLCB1cGRhdGU7XG4gICAgICAgIGxldCBzdGF0ZSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIGZvciAobGV0IHRyIG9mIHRyYW5zYWN0aW9ucykge1xuICAgICAgICAgICAgaWYgKHRyLnN0YXJ0U3RhdGUgIT0gc3RhdGUpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJUcnlpbmcgdG8gdXBkYXRlIHN0YXRlIHdpdGggYSB0cmFuc2FjdGlvbiB0aGF0IGRvZXNuJ3Qgc3RhcnQgZnJvbSB0aGUgcHJldmlvdXMgc3RhdGUuXCIpO1xuICAgICAgICAgICAgc3RhdGUgPSB0ci5zdGF0ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIHRoaXMudmlld1N0YXRlLnN0YXRlID0gc3RhdGU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdGhlcmUgd2FzIGEgcGVuZGluZyBET00gY2hhbmdlLCBlYWdlcmx5IHJlYWQgaXQgYW5kIHRyeSB0b1xuICAgICAgICAvLyBhcHBseSBpdCBhZnRlciB0aGUgZ2l2ZW4gdHJhbnNhY3Rpb25zLlxuICAgICAgICBsZXQgcGVuZGluZ0tleSA9IHRoaXMub2JzZXJ2ZXIuZGVsYXllZEFuZHJvaWRLZXksIGRvbUNoYW5nZSA9IG51bGw7XG4gICAgICAgIGlmIChwZW5kaW5nS2V5KSB7XG4gICAgICAgICAgICB0aGlzLm9ic2VydmVyLmNsZWFyRGVsYXllZEFuZHJvaWRLZXkoKTtcbiAgICAgICAgICAgIGRvbUNoYW5nZSA9IHRoaXMub2JzZXJ2ZXIucmVhZENoYW5nZSgpO1xuICAgICAgICAgICAgLy8gT25seSB0cnkgdG8gYXBwbHkgRE9NIGNoYW5nZXMgaWYgdGhlIHRyYW5zYWN0aW9ucyBkaWRuJ3RcbiAgICAgICAgICAgIC8vIGNoYW5nZSB0aGUgZG9jIG9yIHNlbGVjdGlvbi5cbiAgICAgICAgICAgIGlmIChkb21DaGFuZ2UgJiYgIXRoaXMuc3RhdGUuZG9jLmVxKHN0YXRlLmRvYykgfHwgIXRoaXMuc3RhdGUuc2VsZWN0aW9uLmVxKHN0YXRlLnNlbGVjdGlvbikpXG4gICAgICAgICAgICAgICAgZG9tQ2hhbmdlID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXIuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXaGVuIHRoZSBwaHJhc2VzIGNoYW5nZSwgcmVkcmF3IHRoZSBlZGl0b3JcbiAgICAgICAgaWYgKHN0YXRlLmZhY2V0KEVkaXRvclN0YXRlLnBocmFzZXMpICE9IHRoaXMuc3RhdGUuZmFjZXQoRWRpdG9yU3RhdGUucGhyYXNlcykpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRTdGF0ZShzdGF0ZSk7XG4gICAgICAgIHVwZGF0ZSA9IFZpZXdVcGRhdGUuY3JlYXRlKHRoaXMsIHN0YXRlLCB0cmFuc2FjdGlvbnMpO1xuICAgICAgICBsZXQgc2Nyb2xsVGFyZ2V0ID0gdGhpcy52aWV3U3RhdGUuc2Nyb2xsVGFyZ2V0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0ZSA9IDIgLyogVXBkYXRlU3RhdGUuVXBkYXRpbmcgKi87XG4gICAgICAgICAgICBmb3IgKGxldCB0ciBvZiB0cmFuc2FjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2Nyb2xsVGFyZ2V0KVxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxUYXJnZXQgPSBzY3JvbGxUYXJnZXQubWFwKHRyLmNoYW5nZXMpO1xuICAgICAgICAgICAgICAgIGlmICh0ci5zY3JvbGxJbnRvVmlldykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgeyBtYWluIH0gPSB0ci5zdGF0ZS5zZWxlY3Rpb247XG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFRhcmdldCA9IG5ldyBTY3JvbGxUYXJnZXQobWFpbi5lbXB0eSA/IG1haW4gOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKG1haW4uaGVhZCwgbWFpbi5oZWFkID4gbWFpbi5hbmNob3IgPyAtMSA6IDEpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgZSBvZiB0ci5lZmZlY3RzKVxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5pcyhzY3JvbGxJbnRvVmlldykpXG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUYXJnZXQgPSBlLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy52aWV3U3RhdGUudXBkYXRlKHVwZGF0ZSwgc2Nyb2xsVGFyZ2V0KTtcbiAgICAgICAgICAgIHRoaXMuYmlkaUNhY2hlID0gQ2FjaGVkT3JkZXIudXBkYXRlKHRoaXMuYmlkaUNhY2hlLCB1cGRhdGUuY2hhbmdlcyk7XG4gICAgICAgICAgICBpZiAoIXVwZGF0ZS5lbXB0eSkge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUGx1Z2lucyh1cGRhdGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRTdGF0ZS51cGRhdGUodXBkYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlZHJhd24gPSB0aGlzLmRvY1ZpZXcudXBkYXRlKHVwZGF0ZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5mYWNldChzdHlsZU1vZHVsZSkgIT0gdGhpcy5zdHlsZU1vZHVsZXMpXG4gICAgICAgICAgICAgICAgdGhpcy5tb3VudFN0eWxlcygpO1xuICAgICAgICAgICAgYXR0cnNDaGFuZ2VkID0gdGhpcy51cGRhdGVBdHRycygpO1xuICAgICAgICAgICAgdGhpcy5zaG93QW5ub3VuY2VtZW50cyh0cmFuc2FjdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5kb2NWaWV3LnVwZGF0ZVNlbGVjdGlvbihyZWRyYXduLCB0cmFuc2FjdGlvbnMuc29tZSh0ciA9PiB0ci5pc1VzZXJFdmVudChcInNlbGVjdC5wb2ludGVyXCIpKSk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlID0gMCAvKiBVcGRhdGVTdGF0ZS5JZGxlICovO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1cGRhdGUuc3RhcnRTdGF0ZS5mYWNldCh0aGVtZSkgIT0gdXBkYXRlLnN0YXRlLmZhY2V0KHRoZW1lKSlcbiAgICAgICAgICAgIHRoaXMudmlld1N0YXRlLm11c3RNZWFzdXJlQ29udGVudCA9IHRydWU7XG4gICAgICAgIGlmIChyZWRyYXduIHx8IGF0dHJzQ2hhbmdlZCB8fCBzY3JvbGxUYXJnZXQgfHwgdGhpcy52aWV3U3RhdGUubXVzdEVuZm9yY2VDdXJzb3JBc3NvYyB8fCB0aGlzLnZpZXdTdGF0ZS5tdXN0TWVhc3VyZUNvbnRlbnQpXG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RNZWFzdXJlKCk7XG4gICAgICAgIGlmICghdXBkYXRlLmVtcHR5KVxuICAgICAgICAgICAgZm9yIChsZXQgbGlzdGVuZXIgb2YgdGhpcy5zdGF0ZS5mYWNldCh1cGRhdGVMaXN0ZW5lcikpXG4gICAgICAgICAgICAgICAgbGlzdGVuZXIodXBkYXRlKTtcbiAgICAgICAgaWYgKGRvbUNoYW5nZSkge1xuICAgICAgICAgICAgaWYgKCFhcHBseURPTUNoYW5nZSh0aGlzLCBkb21DaGFuZ2UpICYmIHBlbmRpbmdLZXkuZm9yY2UpXG4gICAgICAgICAgICAgICAgZGlzcGF0Y2hLZXkodGhpcy5jb250ZW50RE9NLCBwZW5kaW5nS2V5LmtleSwgcGVuZGluZ0tleS5rZXlDb2RlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBSZXNldCB0aGUgdmlldyB0byB0aGUgZ2l2ZW4gc3RhdGUuIChUaGlzIHdpbGwgY2F1c2UgdGhlIGVudGlyZVxuICAgIGRvY3VtZW50IHRvIGJlIHJlZHJhd24gYW5kIGFsbCB2aWV3IHBsdWdpbnMgdG8gYmUgcmVpbml0aWFsaXplZCxcbiAgICBzbyB5b3Ugc2hvdWxkIHByb2JhYmx5IG9ubHkgdXNlIGl0IHdoZW4gdGhlIG5ldyBzdGF0ZSBpc24ndFxuICAgIGRlcml2ZWQgZnJvbSB0aGUgb2xkIHN0YXRlLiBPdGhlcndpc2UsIHVzZVxuICAgIFtgZGlzcGF0Y2hgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlldy5kaXNwYXRjaCkgaW5zdGVhZC4pXG4gICAgKi9cbiAgICBzZXRTdGF0ZShuZXdTdGF0ZSkge1xuICAgICAgICBpZiAodGhpcy51cGRhdGVTdGF0ZSAhPSAwIC8qIFVwZGF0ZVN0YXRlLklkbGUgKi8pXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYWxscyB0byBFZGl0b3JWaWV3LnNldFN0YXRlIGFyZSBub3QgYWxsb3dlZCB3aGlsZSBhbiB1cGRhdGUgaXMgaW4gcHJvZ3Jlc3NcIik7XG4gICAgICAgIGlmICh0aGlzLmRlc3Ryb3llZCkge1xuICAgICAgICAgICAgdGhpcy52aWV3U3RhdGUuc3RhdGUgPSBuZXdTdGF0ZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlID0gMiAvKiBVcGRhdGVTdGF0ZS5VcGRhdGluZyAqLztcbiAgICAgICAgbGV0IGhhZEZvY3VzID0gdGhpcy5oYXNGb2N1cztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAobGV0IHBsdWdpbiBvZiB0aGlzLnBsdWdpbnMpXG4gICAgICAgICAgICAgICAgcGx1Z2luLmRlc3Ryb3kodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnZpZXdTdGF0ZSA9IG5ldyBWaWV3U3RhdGUobmV3U3RhdGUpO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW5zID0gbmV3U3RhdGUuZmFjZXQodmlld1BsdWdpbikubWFwKHNwZWMgPT4gbmV3IFBsdWdpbkluc3RhbmNlKHNwZWMpKTtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luTWFwLmNsZWFyKCk7XG4gICAgICAgICAgICBmb3IgKGxldCBwbHVnaW4gb2YgdGhpcy5wbHVnaW5zKVxuICAgICAgICAgICAgICAgIHBsdWdpbi51cGRhdGUodGhpcyk7XG4gICAgICAgICAgICB0aGlzLmRvY1ZpZXcgPSBuZXcgRG9jVmlldyh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRTdGF0ZS5lbnN1cmVIYW5kbGVycyh0aGlzLCB0aGlzLnBsdWdpbnMpO1xuICAgICAgICAgICAgdGhpcy5tb3VudFN0eWxlcygpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVBdHRycygpO1xuICAgICAgICAgICAgdGhpcy5iaWRpQ2FjaGUgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU3RhdGUgPSAwIC8qIFVwZGF0ZVN0YXRlLklkbGUgKi87XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhZEZvY3VzKVxuICAgICAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgICB0aGlzLnJlcXVlc3RNZWFzdXJlKCk7XG4gICAgfVxuICAgIHVwZGF0ZVBsdWdpbnModXBkYXRlKSB7XG4gICAgICAgIGxldCBwcmV2U3BlY3MgPSB1cGRhdGUuc3RhcnRTdGF0ZS5mYWNldCh2aWV3UGx1Z2luKSwgc3BlY3MgPSB1cGRhdGUuc3RhdGUuZmFjZXQodmlld1BsdWdpbik7XG4gICAgICAgIGlmIChwcmV2U3BlY3MgIT0gc3BlY3MpIHtcbiAgICAgICAgICAgIGxldCBuZXdQbHVnaW5zID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBzcGVjIG9mIHNwZWNzKSB7XG4gICAgICAgICAgICAgICAgbGV0IGZvdW5kID0gcHJldlNwZWNzLmluZGV4T2Yoc3BlYyk7XG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBuZXdQbHVnaW5zLnB1c2gobmV3IFBsdWdpbkluc3RhbmNlKHNwZWMpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwbHVnaW4gPSB0aGlzLnBsdWdpbnNbZm91bmRdO1xuICAgICAgICAgICAgICAgICAgICBwbHVnaW4ubXVzdFVwZGF0ZSA9IHVwZGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgbmV3UGx1Z2lucy5wdXNoKHBsdWdpbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgcGx1Z2luIG9mIHRoaXMucGx1Z2lucylcbiAgICAgICAgICAgICAgICBpZiAocGx1Z2luLm11c3RVcGRhdGUgIT0gdXBkYXRlKVxuICAgICAgICAgICAgICAgICAgICBwbHVnaW4uZGVzdHJveSh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGx1Z2lucyA9IG5ld1BsdWdpbnM7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbk1hcC5jbGVhcigpO1xuICAgICAgICAgICAgdGhpcy5pbnB1dFN0YXRlLmVuc3VyZUhhbmRsZXJzKHRoaXMsIHRoaXMucGx1Z2lucyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGxldCBwIG9mIHRoaXMucGx1Z2lucylcbiAgICAgICAgICAgICAgICBwLm11c3RVcGRhdGUgPSB1cGRhdGU7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnBsdWdpbnMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICB0aGlzLnBsdWdpbnNbaV0udXBkYXRlKHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIG1lYXN1cmUoZmx1c2ggPSB0cnVlKSB7XG4gICAgICAgIGlmICh0aGlzLmRlc3Ryb3llZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKHRoaXMubWVhc3VyZVNjaGVkdWxlZCA+IC0xKVxuICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5tZWFzdXJlU2NoZWR1bGVkKTtcbiAgICAgICAgdGhpcy5tZWFzdXJlU2NoZWR1bGVkID0gMDsgLy8gUHJldmVudCByZXF1ZXN0TWVhc3VyZSBjYWxscyBmcm9tIHNjaGVkdWxpbmcgYW5vdGhlciBhbmltYXRpb24gZnJhbWVcbiAgICAgICAgaWYgKGZsdXNoKVxuICAgICAgICAgICAgdGhpcy5vYnNlcnZlci5mb3JjZUZsdXNoKCk7XG4gICAgICAgIGxldCB1cGRhdGVkID0gbnVsbDtcbiAgICAgICAgbGV0IHsgc2Nyb2xsSGVpZ2h0LCBzY3JvbGxUb3AsIGNsaWVudEhlaWdodCB9ID0gdGhpcy5zY3JvbGxET007XG4gICAgICAgIGxldCByZWZIZWlnaHQgPSBzY3JvbGxUb3AgPiBzY3JvbGxIZWlnaHQgLSBjbGllbnRIZWlnaHQgLSA0ID8gc2Nyb2xsSGVpZ2h0IDogc2Nyb2xsVG9wO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7OyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlID0gMSAvKiBVcGRhdGVTdGF0ZS5NZWFzdXJpbmcgKi87XG4gICAgICAgICAgICAgICAgbGV0IG9sZFZpZXdwb3J0ID0gdGhpcy52aWV3cG9ydDtcbiAgICAgICAgICAgICAgICBsZXQgcmVmQmxvY2sgPSB0aGlzLnZpZXdTdGF0ZS5saW5lQmxvY2tBdEhlaWdodChyZWZIZWlnaHQpO1xuICAgICAgICAgICAgICAgIGxldCBjaGFuZ2VkID0gdGhpcy52aWV3U3RhdGUubWVhc3VyZSh0aGlzKTtcbiAgICAgICAgICAgICAgICBpZiAoIWNoYW5nZWQgJiYgIXRoaXMubWVhc3VyZVJlcXVlc3RzLmxlbmd0aCAmJiB0aGlzLnZpZXdTdGF0ZS5zY3JvbGxUYXJnZXQgPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgaWYgKGkgPiA1KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybih0aGlzLm1lYXN1cmVSZXF1ZXN0cy5sZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgICAgID8gXCJNZWFzdXJlIGxvb3AgcmVzdGFydGVkIG1vcmUgdGhhbiA1IHRpbWVzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogXCJWaWV3cG9ydCBmYWlsZWQgdG8gc3RhYmlsaXplXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IG1lYXN1cmluZyA9IFtdO1xuICAgICAgICAgICAgICAgIC8vIE9ubHkgcnVuIG1lYXN1cmUgcmVxdWVzdHMgaW4gdGhpcyBjeWNsZSB3aGVuIHRoZSB2aWV3cG9ydCBkaWRuJ3QgY2hhbmdlXG4gICAgICAgICAgICAgICAgaWYgKCEoY2hhbmdlZCAmIDQgLyogVXBkYXRlRmxhZy5WaWV3cG9ydCAqLykpXG4gICAgICAgICAgICAgICAgICAgIFt0aGlzLm1lYXN1cmVSZXF1ZXN0cywgbWVhc3VyaW5nXSA9IFttZWFzdXJpbmcsIHRoaXMubWVhc3VyZVJlcXVlc3RzXTtcbiAgICAgICAgICAgICAgICBsZXQgbWVhc3VyZWQgPSBtZWFzdXJpbmcubWFwKG0gPT4ge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG0ucmVhZCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nRXhjZXB0aW9uKHRoaXMuc3RhdGUsIGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEJhZE1lYXN1cmU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBsZXQgdXBkYXRlID0gVmlld1VwZGF0ZS5jcmVhdGUodGhpcywgdGhpcy5zdGF0ZSwgW10pLCByZWRyYXduID0gZmFsc2UsIHNjcm9sbGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdXBkYXRlLmZsYWdzIHw9IGNoYW5nZWQ7XG4gICAgICAgICAgICAgICAgaWYgKCF1cGRhdGVkKVxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkID0gdXBkYXRlO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZC5mbGFncyB8PSBjaGFuZ2VkO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU3RhdGUgPSAyIC8qIFVwZGF0ZVN0YXRlLlVwZGF0aW5nICovO1xuICAgICAgICAgICAgICAgIGlmICghdXBkYXRlLmVtcHR5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUGx1Z2lucyh1cGRhdGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlucHV0U3RhdGUudXBkYXRlKHVwZGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQXR0cnMoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVkcmF3biA9IHRoaXMuZG9jVmlldy51cGRhdGUodXBkYXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZWFzdXJpbmcubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAgICAgIGlmIChtZWFzdXJlZFtpXSAhPSBCYWRNZWFzdXJlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtID0gbWVhc3VyaW5nW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtLndyaXRlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtLndyaXRlKG1lYXN1cmVkW2ldLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nRXhjZXB0aW9uKHRoaXMuc3RhdGUsIGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmlld1N0YXRlLmVkaXRvckhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52aWV3U3RhdGUuc2Nyb2xsVGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRvY1ZpZXcuc2Nyb2xsSW50b1ZpZXcodGhpcy52aWV3U3RhdGUuc2Nyb2xsVGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmlld1N0YXRlLnNjcm9sbFRhcmdldCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGlmZiA9IHRoaXMudmlld1N0YXRlLmxpbmVCbG9ja0F0KHJlZkJsb2NrLmZyb20pLnRvcCAtIHJlZkJsb2NrLnRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaWZmID4gMSB8fCBkaWZmIDwgLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbERPTS5zY3JvbGxUb3AgKz0gZGlmZjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlZHJhd24pXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZG9jVmlldy51cGRhdGVTZWxlY3Rpb24odHJ1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmlld3BvcnQuZnJvbSA9PSBvbGRWaWV3cG9ydC5mcm9tICYmIHRoaXMudmlld3BvcnQudG8gPT0gb2xkVmlld3BvcnQudG8gJiZcbiAgICAgICAgICAgICAgICAgICAgIXNjcm9sbGVkICYmIHRoaXMubWVhc3VyZVJlcXVlc3RzLmxlbmd0aCA9PSAwKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU3RhdGUgPSAwIC8qIFVwZGF0ZVN0YXRlLklkbGUgKi87XG4gICAgICAgICAgICB0aGlzLm1lYXN1cmVTY2hlZHVsZWQgPSAtMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXBkYXRlZCAmJiAhdXBkYXRlZC5lbXB0eSlcbiAgICAgICAgICAgIGZvciAobGV0IGxpc3RlbmVyIG9mIHRoaXMuc3RhdGUuZmFjZXQodXBkYXRlTGlzdGVuZXIpKVxuICAgICAgICAgICAgICAgIGxpc3RlbmVyKHVwZGF0ZWQpO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIENTUyBjbGFzc2VzIGZvciB0aGUgY3VycmVudGx5IGFjdGl2ZSBlZGl0b3IgdGhlbWVzLlxuICAgICovXG4gICAgZ2V0IHRoZW1lQ2xhc3NlcygpIHtcbiAgICAgICAgcmV0dXJuIGJhc2VUaGVtZUlEICsgXCIgXCIgK1xuICAgICAgICAgICAgKHRoaXMuc3RhdGUuZmFjZXQoZGFya1RoZW1lKSA/IGJhc2VEYXJrSUQgOiBiYXNlTGlnaHRJRCkgKyBcIiBcIiArXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmZhY2V0KHRoZW1lKTtcbiAgICB9XG4gICAgdXBkYXRlQXR0cnMoKSB7XG4gICAgICAgIGxldCBlZGl0b3JBdHRycyA9IGF0dHJzRnJvbUZhY2V0KHRoaXMsIGVkaXRvckF0dHJpYnV0ZXMsIHtcbiAgICAgICAgICAgIGNsYXNzOiBcImNtLWVkaXRvclwiICsgKHRoaXMuaGFzRm9jdXMgPyBcIiBjbS1mb2N1c2VkIFwiIDogXCIgXCIpICsgdGhpcy50aGVtZUNsYXNzZXNcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBjb250ZW50QXR0cnMgPSB7XG4gICAgICAgICAgICBzcGVsbGNoZWNrOiBcImZhbHNlXCIsXG4gICAgICAgICAgICBhdXRvY29ycmVjdDogXCJvZmZcIixcbiAgICAgICAgICAgIGF1dG9jYXBpdGFsaXplOiBcIm9mZlwiLFxuICAgICAgICAgICAgdHJhbnNsYXRlOiBcIm5vXCIsXG4gICAgICAgICAgICBjb250ZW50ZWRpdGFibGU6ICF0aGlzLnN0YXRlLmZhY2V0KGVkaXRhYmxlKSA/IFwiZmFsc2VcIiA6IFwidHJ1ZVwiLFxuICAgICAgICAgICAgY2xhc3M6IFwiY20tY29udGVudFwiLFxuICAgICAgICAgICAgc3R5bGU6IGAke2Jyb3dzZXIudGFiU2l6ZX06ICR7dGhpcy5zdGF0ZS50YWJTaXplfWAsXG4gICAgICAgICAgICByb2xlOiBcInRleHRib3hcIixcbiAgICAgICAgICAgIFwiYXJpYS1tdWx0aWxpbmVcIjogXCJ0cnVlXCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUucmVhZE9ubHkpXG4gICAgICAgICAgICBjb250ZW50QXR0cnNbXCJhcmlhLXJlYWRvbmx5XCJdID0gXCJ0cnVlXCI7XG4gICAgICAgIGF0dHJzRnJvbUZhY2V0KHRoaXMsIGNvbnRlbnRBdHRyaWJ1dGVzLCBjb250ZW50QXR0cnMpO1xuICAgICAgICBsZXQgY2hhbmdlZCA9IHRoaXMub2JzZXJ2ZXIuaWdub3JlKCgpID0+IHtcbiAgICAgICAgICAgIGxldCBjaGFuZ2VkQ29udGVudCA9IHVwZGF0ZUF0dHJzKHRoaXMuY29udGVudERPTSwgdGhpcy5jb250ZW50QXR0cnMsIGNvbnRlbnRBdHRycyk7XG4gICAgICAgICAgICBsZXQgY2hhbmdlZEVkaXRvciA9IHVwZGF0ZUF0dHJzKHRoaXMuZG9tLCB0aGlzLmVkaXRvckF0dHJzLCBlZGl0b3JBdHRycyk7XG4gICAgICAgICAgICByZXR1cm4gY2hhbmdlZENvbnRlbnQgfHwgY2hhbmdlZEVkaXRvcjtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZWRpdG9yQXR0cnMgPSBlZGl0b3JBdHRycztcbiAgICAgICAgdGhpcy5jb250ZW50QXR0cnMgPSBjb250ZW50QXR0cnM7XG4gICAgICAgIHJldHVybiBjaGFuZ2VkO1xuICAgIH1cbiAgICBzaG93QW5ub3VuY2VtZW50cyh0cnMpIHtcbiAgICAgICAgbGV0IGZpcnN0ID0gdHJ1ZTtcbiAgICAgICAgZm9yIChsZXQgdHIgb2YgdHJzKVxuICAgICAgICAgICAgZm9yIChsZXQgZWZmZWN0IG9mIHRyLmVmZmVjdHMpXG4gICAgICAgICAgICAgICAgaWYgKGVmZmVjdC5pcyhFZGl0b3JWaWV3LmFubm91bmNlKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3QpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFubm91bmNlRE9NLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgZmlyc3QgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRpdiA9IHRoaXMuYW5ub3VuY2VET00uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSk7XG4gICAgICAgICAgICAgICAgICAgIGRpdi50ZXh0Q29udGVudCA9IGVmZmVjdC52YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgfVxuICAgIG1vdW50U3R5bGVzKCkge1xuICAgICAgICB0aGlzLnN0eWxlTW9kdWxlcyA9IHRoaXMuc3RhdGUuZmFjZXQoc3R5bGVNb2R1bGUpO1xuICAgICAgICBTdHlsZU1vZHVsZS5tb3VudCh0aGlzLnJvb3QsIHRoaXMuc3R5bGVNb2R1bGVzLmNvbmNhdChiYXNlVGhlbWUkMSkucmV2ZXJzZSgpKTtcbiAgICB9XG4gICAgcmVhZE1lYXN1cmVkKCkge1xuICAgICAgICBpZiAodGhpcy51cGRhdGVTdGF0ZSA9PSAyIC8qIFVwZGF0ZVN0YXRlLlVwZGF0aW5nICovKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUmVhZGluZyB0aGUgZWRpdG9yIGxheW91dCBpc24ndCBhbGxvd2VkIGR1cmluZyBhbiB1cGRhdGVcIik7XG4gICAgICAgIGlmICh0aGlzLnVwZGF0ZVN0YXRlID09IDAgLyogVXBkYXRlU3RhdGUuSWRsZSAqLyAmJiB0aGlzLm1lYXN1cmVTY2hlZHVsZWQgPiAtMSlcbiAgICAgICAgICAgIHRoaXMubWVhc3VyZShmYWxzZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIFNjaGVkdWxlIGEgbGF5b3V0IG1lYXN1cmVtZW50LCBvcHRpb25hbGx5IHByb3ZpZGluZyBjYWxsYmFja3MgdG9cbiAgICBkbyBjdXN0b20gRE9NIG1lYXN1cmluZyBmb2xsb3dlZCBieSBhIERPTSB3cml0ZSBwaGFzZS4gVXNpbmdcbiAgICB0aGlzIGlzIHByZWZlcmFibGUgcmVhZGluZyBET00gbGF5b3V0IGRpcmVjdGx5IGZyb20sIGZvclxuICAgIGV4YW1wbGUsIGFuIGV2ZW50IGhhbmRsZXIsIGJlY2F1c2UgaXQnbGwgbWFrZSBzdXJlIG1lYXN1cmluZyBhbmRcbiAgICBkcmF3aW5nIGRvbmUgYnkgb3RoZXIgY29tcG9uZW50cyBpcyBzeW5jaHJvbml6ZWQsIGF2b2lkaW5nXG4gICAgdW5uZWNlc3NhcnkgRE9NIGxheW91dCBjb21wdXRhdGlvbnMuXG4gICAgKi9cbiAgICByZXF1ZXN0TWVhc3VyZShyZXF1ZXN0KSB7XG4gICAgICAgIGlmICh0aGlzLm1lYXN1cmVTY2hlZHVsZWQgPCAwKVxuICAgICAgICAgICAgdGhpcy5tZWFzdXJlU2NoZWR1bGVkID0gdGhpcy53aW4ucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMubWVhc3VyZSgpKTtcbiAgICAgICAgaWYgKHJlcXVlc3QpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0LmtleSAhPSBudWxsKVxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tZWFzdXJlUmVxdWVzdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWVhc3VyZVJlcXVlc3RzW2ldLmtleSA9PT0gcmVxdWVzdC5rZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVhc3VyZVJlcXVlc3RzW2ldID0gcmVxdWVzdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWVhc3VyZVJlcXVlc3RzLnB1c2gocmVxdWVzdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSB2YWx1ZSBvZiBhIHNwZWNpZmljIHBsdWdpbiwgaWYgcHJlc2VudC4gTm90ZSB0aGF0XG4gICAgcGx1Z2lucyB0aGF0IGNyYXNoIGNhbiBiZSBkcm9wcGVkIGZyb20gYSB2aWV3LCBzbyBldmVuIHdoZW4geW91XG4gICAga25vdyB5b3UgcmVnaXN0ZXJlZCBhIGdpdmVuIHBsdWdpbiwgaXQgaXMgcmVjb21tZW5kZWQgdG8gY2hlY2tcbiAgICB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoaXMgbWV0aG9kLlxuICAgICovXG4gICAgcGx1Z2luKHBsdWdpbikge1xuICAgICAgICBsZXQga25vd24gPSB0aGlzLnBsdWdpbk1hcC5nZXQocGx1Z2luKTtcbiAgICAgICAgaWYgKGtub3duID09PSB1bmRlZmluZWQgfHwga25vd24gJiYga25vd24uc3BlYyAhPSBwbHVnaW4pXG4gICAgICAgICAgICB0aGlzLnBsdWdpbk1hcC5zZXQocGx1Z2luLCBrbm93biA9IHRoaXMucGx1Z2lucy5maW5kKHAgPT4gcC5zcGVjID09IHBsdWdpbikgfHwgbnVsbCk7XG4gICAgICAgIHJldHVybiBrbm93biAmJiBrbm93bi51cGRhdGUodGhpcykudmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSB0b3AgcG9zaXRpb24gb2YgdGhlIGRvY3VtZW50LCBpbiBzY3JlZW4gY29vcmRpbmF0ZXMuIFRoaXNcbiAgICBtYXkgYmUgbmVnYXRpdmUgd2hlbiB0aGUgZWRpdG9yIGlzIHNjcm9sbGVkIGRvd24uIFBvaW50c1xuICAgIGRpcmVjdGx5IHRvIHRoZSB0b3Agb2YgdGhlIGZpcnN0IGxpbmUsIG5vdCBhYm92ZSB0aGUgcGFkZGluZy5cbiAgICAqL1xuICAgIGdldCBkb2N1bWVudFRvcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudERPTS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgKyB0aGlzLnZpZXdTdGF0ZS5wYWRkaW5nVG9wO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXBvcnRzIHRoZSBwYWRkaW5nIGFib3ZlIGFuZCBiZWxvdyB0aGUgZG9jdW1lbnQuXG4gICAgKi9cbiAgICBnZXQgZG9jdW1lbnRQYWRkaW5nKCkge1xuICAgICAgICByZXR1cm4geyB0b3A6IHRoaXMudmlld1N0YXRlLnBhZGRpbmdUb3AsIGJvdHRvbTogdGhpcy52aWV3U3RhdGUucGFkZGluZ0JvdHRvbSB9O1xuICAgIH1cbiAgICAvKipcbiAgICBGaW5kIHRoZSB0ZXh0IGxpbmUgb3IgYmxvY2sgd2lkZ2V0IGF0IHRoZSBnaXZlbiB2ZXJ0aWNhbFxuICAgIHBvc2l0aW9uICh3aGljaCBpcyBpbnRlcnByZXRlZCBhcyByZWxhdGl2ZSB0byB0aGUgW3RvcCBvZiB0aGVcbiAgICBkb2N1bWVudF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXcuZG9jdW1lbnRUb3ApKS5cbiAgICAqL1xuICAgIGVsZW1lbnRBdEhlaWdodChoZWlnaHQpIHtcbiAgICAgICAgdGhpcy5yZWFkTWVhc3VyZWQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlld1N0YXRlLmVsZW1lbnRBdEhlaWdodChoZWlnaHQpO1xuICAgIH1cbiAgICAvKipcbiAgICBGaW5kIHRoZSBsaW5lIGJsb2NrIChzZWVcbiAgICBbYGxpbmVCbG9ja0F0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXcubGluZUJsb2NrQXQpIGF0IHRoZSBnaXZlblxuICAgIGhlaWdodCwgYWdhaW4gaW50ZXJwcmV0ZWQgcmVsYXRpdmUgdG8gdGhlIFt0b3Agb2YgdGhlXG4gICAgZG9jdW1lbnRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LmRvY3VtZW50VG9wKS5cbiAgICAqL1xuICAgIGxpbmVCbG9ja0F0SGVpZ2h0KGhlaWdodCkge1xuICAgICAgICB0aGlzLnJlYWRNZWFzdXJlZCgpO1xuICAgICAgICByZXR1cm4gdGhpcy52aWV3U3RhdGUubGluZUJsb2NrQXRIZWlnaHQoaGVpZ2h0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSBleHRlbnQgYW5kIHZlcnRpY2FsIHBvc2l0aW9uIG9mIGFsbCBbbGluZVxuICAgIGJsb2Nrc10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXcubGluZUJsb2NrQXQpIGluIHRoZSB2aWV3cG9ydC4gUG9zaXRpb25zXG4gICAgYXJlIHJlbGF0aXZlIHRvIHRoZSBbdG9wIG9mIHRoZVxuICAgIGRvY3VtZW50XShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlldy5kb2N1bWVudFRvcCk7XG4gICAgKi9cbiAgICBnZXQgdmlld3BvcnRMaW5lQmxvY2tzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52aWV3U3RhdGUudmlld3BvcnRMaW5lcztcbiAgICB9XG4gICAgLyoqXG4gICAgRmluZCB0aGUgbGluZSBibG9jayBhcm91bmQgdGhlIGdpdmVuIGRvY3VtZW50IHBvc2l0aW9uLiBBIGxpbmVcbiAgICBibG9jayBpcyBhIHJhbmdlIGRlbGltaXRlZCBvbiBib3RoIHNpZGVzIGJ5IGVpdGhlciBhXG4gICAgbm9uLVtoaWRkZW5dKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5EZWNvcmF0aW9uXnJlcGxhY2UpIGxpbmUgYnJlYWtzLCBvciB0aGVcbiAgICBzdGFydC9lbmQgb2YgdGhlIGRvY3VtZW50LiBJdCB3aWxsIHVzdWFsbHkganVzdCBob2xkIGEgbGluZSBvZlxuICAgIHRleHQsIGJ1dCBtYXkgYmUgYnJva2VuIGludG8gbXVsdGlwbGUgdGV4dGJsb2NrcyBieSBibG9ja1xuICAgIHdpZGdldHMuXG4gICAgKi9cbiAgICBsaW5lQmxvY2tBdChwb3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlld1N0YXRlLmxpbmVCbG9ja0F0KHBvcyk7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBlZGl0b3IncyB0b3RhbCBjb250ZW50IGhlaWdodC5cbiAgICAqL1xuICAgIGdldCBjb250ZW50SGVpZ2h0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy52aWV3U3RhdGUuY29udGVudEhlaWdodDtcbiAgICB9XG4gICAgLyoqXG4gICAgTW92ZSBhIGN1cnNvciBwb3NpdGlvbiBieSBbZ3JhcGhlbWVcbiAgICBjbHVzdGVyXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLmZpbmRDbHVzdGVyQnJlYWspLiBgZm9yd2FyZGAgZGV0ZXJtaW5lcyB3aGV0aGVyXG4gICAgdGhlIG1vdGlvbiBpcyBhd2F5IGZyb20gdGhlIGxpbmUgc3RhcnQsIG9yIHRvd2FyZHMgaXQuIEluXG4gICAgYmlkaXJlY3Rpb25hbCB0ZXh0LCB0aGUgbGluZSBpcyB0cmF2ZXJzZWQgaW4gdmlzdWFsIG9yZGVyLCB1c2luZ1xuICAgIHRoZSBlZGl0b3IncyBbdGV4dCBkaXJlY3Rpb25dKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LnRleHREaXJlY3Rpb24pLlxuICAgIFdoZW4gdGhlIHN0YXJ0IHBvc2l0aW9uIHdhcyB0aGUgbGFzdCBvbmUgb24gdGhlIGxpbmUsIHRoZVxuICAgIHJldHVybmVkIHBvc2l0aW9uIHdpbGwgYmUgYWNyb3NzIHRoZSBsaW5lIGJyZWFrLiBJZiB0aGVyZSBpcyBub1xuICAgIGZ1cnRoZXIgbGluZSwgdGhlIG9yaWdpbmFsIHBvc2l0aW9uIGlzIHJldHVybmVkLlxuICAgIFxuICAgIEJ5IGRlZmF1bHQsIHRoaXMgbWV0aG9kIG1vdmVzIG92ZXIgYSBzaW5nbGUgY2x1c3Rlci4gVGhlXG4gICAgb3B0aW9uYWwgYGJ5YCBhcmd1bWVudCBjYW4gYmUgdXNlZCB0byBtb3ZlIGFjcm9zcyBtb3JlLiBJdCB3aWxsXG4gICAgYmUgY2FsbGVkIHdpdGggdGhlIGZpcnN0IGNsdXN0ZXIgYXMgYXJndW1lbnQsIGFuZCBzaG91bGQgcmV0dXJuXG4gICAgYSBwcmVkaWNhdGUgdGhhdCBkZXRlcm1pbmVzLCBmb3IgZWFjaCBzdWJzZXF1ZW50IGNsdXN0ZXIsXG4gICAgd2hldGhlciBpdCBzaG91bGQgYWxzbyBiZSBtb3ZlZCBvdmVyLlxuICAgICovXG4gICAgbW92ZUJ5Q2hhcihzdGFydCwgZm9yd2FyZCwgYnkpIHtcbiAgICAgICAgcmV0dXJuIHNraXBBdG9tcyh0aGlzLCBzdGFydCwgbW92ZUJ5Q2hhcih0aGlzLCBzdGFydCwgZm9yd2FyZCwgYnkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgTW92ZSBhIGN1cnNvciBwb3NpdGlvbiBhY3Jvc3MgdGhlIG5leHQgZ3JvdXAgb2YgZWl0aGVyXG4gICAgW2xldHRlcnNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUuY2hhckNhdGVnb3JpemVyKSBvciBub24tbGV0dGVyXG4gICAgbm9uLXdoaXRlc3BhY2UgY2hhcmFjdGVycy5cbiAgICAqL1xuICAgIG1vdmVCeUdyb3VwKHN0YXJ0LCBmb3J3YXJkKSB7XG4gICAgICAgIHJldHVybiBza2lwQXRvbXModGhpcywgc3RhcnQsIG1vdmVCeUNoYXIodGhpcywgc3RhcnQsIGZvcndhcmQsIGluaXRpYWwgPT4gYnlHcm91cCh0aGlzLCBzdGFydC5oZWFkLCBpbml0aWFsKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICBNb3ZlIHRvIHRoZSBuZXh0IGxpbmUgYm91bmRhcnkgaW4gdGhlIGdpdmVuIGRpcmVjdGlvbi4gSWZcbiAgICBgaW5jbHVkZVdyYXBgIGlzIHRydWUsIGxpbmUgd3JhcHBpbmcgaXMgb24sIGFuZCB0aGVyZSBpcyBhXG4gICAgZnVydGhlciB3cmFwIHBvaW50IG9uIHRoZSBjdXJyZW50IGxpbmUsIHRoZSB3cmFwIHBvaW50IHdpbGwgYmVcbiAgICByZXR1cm5lZC4gT3RoZXJ3aXNlIHRoaXMgZnVuY3Rpb24gd2lsbCByZXR1cm4gdGhlIHN0YXJ0IG9yIGVuZFxuICAgIG9mIHRoZSBsaW5lLlxuICAgICovXG4gICAgbW92ZVRvTGluZUJvdW5kYXJ5KHN0YXJ0LCBmb3J3YXJkLCBpbmNsdWRlV3JhcCA9IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIG1vdmVUb0xpbmVCb3VuZGFyeSh0aGlzLCBzdGFydCwgZm9yd2FyZCwgaW5jbHVkZVdyYXApO1xuICAgIH1cbiAgICAvKipcbiAgICBNb3ZlIGEgY3Vyc29yIHBvc2l0aW9uIHZlcnRpY2FsbHkuIFdoZW4gYGRpc3RhbmNlYCBpc24ndCBnaXZlbixcbiAgICBpdCBkZWZhdWx0cyB0byBtb3ZpbmcgdG8gdGhlIG5leHQgbGluZSAoaW5jbHVkaW5nIHdyYXBwZWRcbiAgICBsaW5lcykuIE90aGVyd2lzZSwgYGRpc3RhbmNlYCBzaG91bGQgcHJvdmlkZSBhIHBvc2l0aXZlIGRpc3RhbmNlXG4gICAgaW4gcGl4ZWxzLlxuICAgIFxuICAgIFdoZW4gYHN0YXJ0YCBoYXMgYVxuICAgIFtgZ29hbENvbHVtbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuU2VsZWN0aW9uUmFuZ2UuZ29hbENvbHVtbiksIHRoZSB2ZXJ0aWNhbFxuICAgIG1vdGlvbiB3aWxsIHVzZSB0aGF0IGFzIGEgdGFyZ2V0IGhvcml6b250YWwgcG9zaXRpb24uIE90aGVyd2lzZSxcbiAgICB0aGUgY3Vyc29yJ3Mgb3duIGhvcml6b250YWwgcG9zaXRpb24gaXMgdXNlZC4gVGhlIHJldHVybmVkXG4gICAgY3Vyc29yIHdpbGwgaGF2ZSBpdHMgZ29hbCBjb2x1bW4gc2V0IHRvIHdoaWNoZXZlciBjb2x1bW4gd2FzXG4gICAgdXNlZC5cbiAgICAqL1xuICAgIG1vdmVWZXJ0aWNhbGx5KHN0YXJ0LCBmb3J3YXJkLCBkaXN0YW5jZSkge1xuICAgICAgICByZXR1cm4gc2tpcEF0b21zKHRoaXMsIHN0YXJ0LCBtb3ZlVmVydGljYWxseSh0aGlzLCBzdGFydCwgZm9yd2FyZCwgZGlzdGFuY2UpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgRmluZCB0aGUgRE9NIHBhcmVudCBub2RlIGFuZCBvZmZzZXQgKGNoaWxkIG9mZnNldCBpZiBgbm9kZWAgaXNcbiAgICBhbiBlbGVtZW50LCBjaGFyYWN0ZXIgb2Zmc2V0IHdoZW4gaXQgaXMgYSB0ZXh0IG5vZGUpIGF0IHRoZVxuICAgIGdpdmVuIGRvY3VtZW50IHBvc2l0aW9uLlxuICAgIFxuICAgIE5vdGUgdGhhdCBmb3IgcG9zaXRpb25zIHRoYXQgYXJlbid0IGN1cnJlbnRseSBpblxuICAgIGB2aXNpYmxlUmFuZ2VzYCwgdGhlIHJlc3VsdGluZyBET00gcG9zaXRpb24gaXNuJ3QgbmVjZXNzYXJpbHlcbiAgICBtZWFuaW5nZnVsIChpdCBtYXkganVzdCBwb2ludCBiZWZvcmUgb3IgYWZ0ZXIgYSBwbGFjZWhvbGRlclxuICAgIGVsZW1lbnQpLlxuICAgICovXG4gICAgZG9tQXRQb3MocG9zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY1ZpZXcuZG9tQXRQb3MocG9zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgRmluZCB0aGUgZG9jdW1lbnQgcG9zaXRpb24gYXQgdGhlIGdpdmVuIERPTSBub2RlLiBDYW4gYmUgdXNlZnVsXG4gICAgZm9yIGFzc29jaWF0aW5nIHBvc2l0aW9ucyB3aXRoIERPTSBldmVudHMuIFdpbGwgcmFpc2UgYW4gZXJyb3JcbiAgICB3aGVuIGBub2RlYCBpc24ndCBwYXJ0IG9mIHRoZSBlZGl0b3IgY29udGVudC5cbiAgICAqL1xuICAgIHBvc0F0RE9NKG5vZGUsIG9mZnNldCA9IDApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jVmlldy5wb3NGcm9tRE9NKG5vZGUsIG9mZnNldCk7XG4gICAgfVxuICAgIHBvc0F0Q29vcmRzKGNvb3JkcywgcHJlY2lzZSA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5yZWFkTWVhc3VyZWQoKTtcbiAgICAgICAgcmV0dXJuIHBvc0F0Q29vcmRzKHRoaXMsIGNvb3JkcywgcHJlY2lzZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgc2NyZWVuIGNvb3JkaW5hdGVzIGF0IHRoZSBnaXZlbiBkb2N1bWVudCBwb3NpdGlvbi5cbiAgICBgc2lkZWAgZGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBjb29yZGluYXRlcyBhcmUgYmFzZWQgb24gdGhlXG4gICAgZWxlbWVudCBiZWZvcmUgKC0xKSBvciBhZnRlciAoMSkgdGhlIHBvc2l0aW9uIChpZiBubyBlbGVtZW50IGlzXG4gICAgYXZhaWxhYmxlIG9uIHRoZSBnaXZlbiBzaWRlLCB0aGUgbWV0aG9kIHdpbGwgdHJhbnNwYXJlbnRseSB1c2VcbiAgICBhbm90aGVyIHN0cmF0ZWd5IHRvIGdldCByZWFzb25hYmxlIGNvb3JkaW5hdGVzKS5cbiAgICAqL1xuICAgIGNvb3Jkc0F0UG9zKHBvcywgc2lkZSA9IDEpIHtcbiAgICAgICAgdGhpcy5yZWFkTWVhc3VyZWQoKTtcbiAgICAgICAgbGV0IHJlY3QgPSB0aGlzLmRvY1ZpZXcuY29vcmRzQXQocG9zLCBzaWRlKTtcbiAgICAgICAgaWYgKCFyZWN0IHx8IHJlY3QubGVmdCA9PSByZWN0LnJpZ2h0KVxuICAgICAgICAgICAgcmV0dXJuIHJlY3Q7XG4gICAgICAgIGxldCBsaW5lID0gdGhpcy5zdGF0ZS5kb2MubGluZUF0KHBvcyksIG9yZGVyID0gdGhpcy5iaWRpU3BhbnMobGluZSk7XG4gICAgICAgIGxldCBzcGFuID0gb3JkZXJbQmlkaVNwYW4uZmluZChvcmRlciwgcG9zIC0gbGluZS5mcm9tLCAtMSwgc2lkZSldO1xuICAgICAgICByZXR1cm4gZmxhdHRlblJlY3QocmVjdCwgKHNwYW4uZGlyID09IERpcmVjdGlvbi5MVFIpID09IChzaWRlID4gMCkpO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgZGVmYXVsdCB3aWR0aCBvZiBhIGNoYXJhY3RlciBpbiB0aGUgZWRpdG9yLiBNYXkgbm90XG4gICAgYWNjdXJhdGVseSByZWZsZWN0IHRoZSB3aWR0aCBvZiBhbGwgY2hhcmFjdGVycyAoZ2l2ZW4gdmFyaWFibGVcbiAgICB3aWR0aCBmb250cyBvciBzdHlsaW5nIG9mIGludmlkaWR1YWwgcmFuZ2VzKS5cbiAgICAqL1xuICAgIGdldCBkZWZhdWx0Q2hhcmFjdGVyV2lkdGgoKSB7IHJldHVybiB0aGlzLnZpZXdTdGF0ZS5oZWlnaHRPcmFjbGUuY2hhcldpZHRoOyB9XG4gICAgLyoqXG4gICAgVGhlIGRlZmF1bHQgaGVpZ2h0IG9mIGEgbGluZSBpbiB0aGUgZWRpdG9yLiBNYXkgbm90IGJlIGFjY3VyYXRlXG4gICAgZm9yIGFsbCBsaW5lcy5cbiAgICAqL1xuICAgIGdldCBkZWZhdWx0TGluZUhlaWdodCgpIHsgcmV0dXJuIHRoaXMudmlld1N0YXRlLmhlaWdodE9yYWNsZS5saW5lSGVpZ2h0OyB9XG4gICAgLyoqXG4gICAgVGhlIHRleHQgZGlyZWN0aW9uXG4gICAgKFtgZGlyZWN0aW9uYF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL2RpcmVjdGlvbilcbiAgICBDU1MgcHJvcGVydHkpIG9mIHRoZSBlZGl0b3IncyBjb250ZW50IGVsZW1lbnQuXG4gICAgKi9cbiAgICBnZXQgdGV4dERpcmVjdGlvbigpIHsgcmV0dXJuIHRoaXMudmlld1N0YXRlLmRlZmF1bHRUZXh0RGlyZWN0aW9uOyB9XG4gICAgLyoqXG4gICAgRmluZCB0aGUgdGV4dCBkaXJlY3Rpb24gb2YgdGhlIGJsb2NrIGF0IHRoZSBnaXZlbiBwb3NpdGlvbiwgYXNcbiAgICBhc3NpZ25lZCBieSBDU1MuIElmXG4gICAgW2BwZXJMaW5lVGV4dERpcmVjdGlvbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3XnBlckxpbmVUZXh0RGlyZWN0aW9uKVxuICAgIGlzbid0IGVuYWJsZWQsIG9yIHRoZSBnaXZlbiBwb3NpdGlvbiBpcyBvdXRzaWRlIG9mIHRoZSB2aWV3cG9ydCxcbiAgICB0aGlzIHdpbGwgYWx3YXlzIHJldHVybiB0aGUgc2FtZSBhc1xuICAgIFtgdGV4dERpcmVjdGlvbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LnRleHREaXJlY3Rpb24pLiBOb3RlIHRoYXRcbiAgICB0aGlzIG1heSB0cmlnZ2VyIGEgRE9NIGxheW91dC5cbiAgICAqL1xuICAgIHRleHREaXJlY3Rpb25BdChwb3MpIHtcbiAgICAgICAgbGV0IHBlckxpbmUgPSB0aGlzLnN0YXRlLmZhY2V0KHBlckxpbmVUZXh0RGlyZWN0aW9uKTtcbiAgICAgICAgaWYgKCFwZXJMaW5lIHx8IHBvcyA8IHRoaXMudmlld3BvcnQuZnJvbSB8fCBwb3MgPiB0aGlzLnZpZXdwb3J0LnRvKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGV4dERpcmVjdGlvbjtcbiAgICAgICAgdGhpcy5yZWFkTWVhc3VyZWQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jVmlldy50ZXh0RGlyZWN0aW9uQXQocG9zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgV2hldGhlciB0aGlzIGVkaXRvciBbd3JhcHMgbGluZXNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LmxpbmVXcmFwcGluZylcbiAgICAoYXMgZGV0ZXJtaW5lZCBieSB0aGVcbiAgICBbYHdoaXRlLXNwYWNlYF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL3doaXRlLXNwYWNlKVxuICAgIENTUyBwcm9wZXJ0eSBvZiBpdHMgY29udGVudCBlbGVtZW50KS5cbiAgICAqL1xuICAgIGdldCBsaW5lV3JhcHBpbmcoKSB7IHJldHVybiB0aGlzLnZpZXdTdGF0ZS5oZWlnaHRPcmFjbGUubGluZVdyYXBwaW5nOyB9XG4gICAgLyoqXG4gICAgUmV0dXJucyB0aGUgYmlkaXJlY3Rpb25hbCB0ZXh0IHN0cnVjdHVyZSBvZiB0aGUgZ2l2ZW4gbGluZVxuICAgICh3aGljaCBzaG91bGQgYmUgaW4gdGhlIGN1cnJlbnQgZG9jdW1lbnQpIGFzIGFuIGFycmF5IG9mIHNwYW5cbiAgICBvYmplY3RzLiBUaGUgb3JkZXIgb2YgdGhlc2Ugc3BhbnMgbWF0Y2hlcyB0aGUgW3RleHRcbiAgICBkaXJlY3Rpb25dKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LnRleHREaXJlY3Rpb24pXHUyMDE0aWYgdGhhdCBpc1xuICAgIGxlZnQtdG8tcmlnaHQsIHRoZSBsZWZ0bW9zdCBzcGFucyBjb21lIGZpcnN0LCBvdGhlcndpc2UgdGhlXG4gICAgcmlnaHRtb3N0IHNwYW5zIGNvbWUgZmlyc3QuXG4gICAgKi9cbiAgICBiaWRpU3BhbnMobGluZSkge1xuICAgICAgICBpZiAobGluZS5sZW5ndGggPiBNYXhCaWRpTGluZSlcbiAgICAgICAgICAgIHJldHVybiB0cml2aWFsT3JkZXIobGluZS5sZW5ndGgpO1xuICAgICAgICBsZXQgZGlyID0gdGhpcy50ZXh0RGlyZWN0aW9uQXQobGluZS5mcm9tKTtcbiAgICAgICAgZm9yIChsZXQgZW50cnkgb2YgdGhpcy5iaWRpQ2FjaGUpXG4gICAgICAgICAgICBpZiAoZW50cnkuZnJvbSA9PSBsaW5lLmZyb20gJiYgZW50cnkuZGlyID09IGRpcilcbiAgICAgICAgICAgICAgICByZXR1cm4gZW50cnkub3JkZXI7XG4gICAgICAgIGxldCBvcmRlciA9IGNvbXB1dGVPcmRlcihsaW5lLnRleHQsIGRpcik7XG4gICAgICAgIHRoaXMuYmlkaUNhY2hlLnB1c2gobmV3IENhY2hlZE9yZGVyKGxpbmUuZnJvbSwgbGluZS50bywgZGlyLCBvcmRlcikpO1xuICAgICAgICByZXR1cm4gb3JkZXI7XG4gICAgfVxuICAgIC8qKlxuICAgIENoZWNrIHdoZXRoZXIgdGhlIGVkaXRvciBoYXMgZm9jdXMuXG4gICAgKi9cbiAgICBnZXQgaGFzRm9jdXMoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgLy8gU2FmYXJpIHJldHVybiBmYWxzZSBmb3IgaGFzRm9jdXMgd2hlbiB0aGUgY29udGV4dCBtZW51IGlzIG9wZW5cbiAgICAgICAgLy8gb3IgY2xvc2luZywgd2hpY2ggbGVhZHMgdXMgdG8gaWdub3JlIHNlbGVjdGlvbiBjaGFuZ2VzIGZyb20gdGhlXG4gICAgICAgIC8vIGNvbnRleHQgbWVudSBiZWNhdXNlIGl0IGxvb2tzIGxpa2UgdGhlIGVkaXRvciBpc24ndCBmb2N1c2VkLlxuICAgICAgICAvLyBUaGlzIGtsdWRnZXMgYXJvdW5kIHRoYXQuXG4gICAgICAgIHJldHVybiAodGhpcy5kb20ub3duZXJEb2N1bWVudC5oYXNGb2N1cygpIHx8IGJyb3dzZXIuc2FmYXJpICYmICgoX2EgPSB0aGlzLmlucHV0U3RhdGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5sYXN0Q29udGV4dE1lbnUpID4gRGF0ZS5ub3coKSAtIDNlNCkgJiZcbiAgICAgICAgICAgIHRoaXMucm9vdC5hY3RpdmVFbGVtZW50ID09IHRoaXMuY29udGVudERPTTtcbiAgICB9XG4gICAgLyoqXG4gICAgUHV0IGZvY3VzIG9uIHRoZSBlZGl0b3IuXG4gICAgKi9cbiAgICBmb2N1cygpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5pZ25vcmUoKCkgPT4ge1xuICAgICAgICAgICAgZm9jdXNQcmV2ZW50U2Nyb2xsKHRoaXMuY29udGVudERPTSk7XG4gICAgICAgICAgICB0aGlzLmRvY1ZpZXcudXBkYXRlU2VsZWN0aW9uKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICBVcGRhdGUgdGhlIFtyb290XShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvIyN2aWV3LkVkaXRvclZpZXdDb25maWcucm9vdCkgaW4gd2hpY2ggdGhlIGVkaXRvciBsaXZlcy4gVGhpcyBpcyBvbmx5XG4gICAgbmVjZXNzYXJ5IHdoZW4gbW92aW5nIHRoZSBlZGl0b3IncyBleGlzdGluZyBET00gdG8gYSBuZXcgd2luZG93IG9yIHNoYWRvdyByb290LlxuICAgICovXG4gICAgc2V0Um9vdChyb290KSB7XG4gICAgICAgIGlmICh0aGlzLl9yb290ICE9IHJvb3QpIHtcbiAgICAgICAgICAgIHRoaXMuX3Jvb3QgPSByb290O1xuICAgICAgICAgICAgdGhpcy5vYnNlcnZlci5zZXRXaW5kb3coKHJvb3Qubm9kZVR5cGUgPT0gOSA/IHJvb3QgOiByb290Lm93bmVyRG9jdW1lbnQpLmRlZmF1bHRWaWV3IHx8IHdpbmRvdyk7XG4gICAgICAgICAgICB0aGlzLm1vdW50U3R5bGVzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgQ2xlYW4gdXAgdGhpcyBlZGl0b3IgdmlldywgcmVtb3ZpbmcgaXRzIGVsZW1lbnQgZnJvbSB0aGVcbiAgICBkb2N1bWVudCwgdW5yZWdpc3RlcmluZyBldmVudCBoYW5kbGVycywgYW5kIG5vdGlmeWluZ1xuICAgIHBsdWdpbnMuIFRoZSB2aWV3IGluc3RhbmNlIGNhbiBubyBsb25nZXIgYmUgdXNlZCBhZnRlclxuICAgIGNhbGxpbmcgdGhpcy5cbiAgICAqL1xuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGZvciAobGV0IHBsdWdpbiBvZiB0aGlzLnBsdWdpbnMpXG4gICAgICAgICAgICBwbHVnaW4uZGVzdHJveSh0aGlzKTtcbiAgICAgICAgdGhpcy5wbHVnaW5zID0gW107XG4gICAgICAgIHRoaXMuaW5wdXRTdGF0ZS5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMuZG9tLnJlbW92ZSgpO1xuICAgICAgICB0aGlzLm9ic2VydmVyLmRlc3Ryb3koKTtcbiAgICAgICAgaWYgKHRoaXMubWVhc3VyZVNjaGVkdWxlZCA+IC0xKVxuICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5tZWFzdXJlU2NoZWR1bGVkKTtcbiAgICAgICAgdGhpcy5kZXN0cm95ZWQgPSB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm5zIGFuIGVmZmVjdCB0aGF0IGNhbiBiZVxuICAgIFthZGRlZF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvblNwZWMuZWZmZWN0cykgdG8gYSB0cmFuc2FjdGlvbiB0b1xuICAgIGNhdXNlIGl0IHRvIHNjcm9sbCB0aGUgZ2l2ZW4gcG9zaXRpb24gb3IgcmFuZ2UgaW50byB2aWV3LlxuICAgICovXG4gICAgc3RhdGljIHNjcm9sbEludG9WaWV3KHBvcywgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHJldHVybiBzY3JvbGxJbnRvVmlldy5vZihuZXcgU2Nyb2xsVGFyZ2V0KHR5cGVvZiBwb3MgPT0gXCJudW1iZXJcIiA/IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IocG9zKSA6IHBvcywgb3B0aW9ucy55LCBvcHRpb25zLngsIG9wdGlvbnMueU1hcmdpbiwgb3B0aW9ucy54TWFyZ2luKSk7XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHVybnMgYW4gZXh0ZW5zaW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gYWRkIERPTSBldmVudCBoYW5kbGVycy5cbiAgICBUaGUgdmFsdWUgc2hvdWxkIGJlIGFuIG9iamVjdCBtYXBwaW5nIGV2ZW50IG5hbWVzIHRvIGhhbmRsZXJcbiAgICBmdW5jdGlvbnMuIEZvciBhbnkgZ2l2ZW4gZXZlbnQsIHN1Y2ggZnVuY3Rpb25zIGFyZSBvcmRlcmVkIGJ5XG4gICAgZXh0ZW5zaW9uIHByZWNlZGVuY2UsIGFuZCB0aGUgZmlyc3QgaGFuZGxlciB0byByZXR1cm4gdHJ1ZSB3aWxsXG4gICAgYmUgYXNzdW1lZCB0byBoYXZlIGhhbmRsZWQgdGhhdCBldmVudCwgYW5kIG5vIG90aGVyIGhhbmRsZXJzIG9yXG4gICAgYnVpbHQtaW4gYmVoYXZpb3Igd2lsbCBiZSBhY3RpdmF0ZWQgZm9yIGl0LiBUaGVzZSBhcmUgcmVnaXN0ZXJlZFxuICAgIG9uIHRoZSBbY29udGVudCBlbGVtZW50XShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlldy5jb250ZW50RE9NKSwgZXhjZXB0XG4gICAgZm9yIGBzY3JvbGxgIGhhbmRsZXJzLCB3aGljaCB3aWxsIGJlIGNhbGxlZCBhbnkgdGltZSB0aGVcbiAgICBlZGl0b3IncyBbc2Nyb2xsIGVsZW1lbnRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LnNjcm9sbERPTSkgb3Igb25lIG9mXG4gICAgaXRzIHBhcmVudCBub2RlcyBpcyBzY3JvbGxlZC5cbiAgICAqL1xuICAgIHN0YXRpYyBkb21FdmVudEhhbmRsZXJzKGhhbmRsZXJzKSB7XG4gICAgICAgIHJldHVybiBWaWV3UGx1Z2luLmRlZmluZSgoKSA9PiAoe30pLCB7IGV2ZW50SGFuZGxlcnM6IGhhbmRsZXJzIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSB0aGVtZSBleHRlbnNpb24uIFRoZSBmaXJzdCBhcmd1bWVudCBjYW4gYmUgYVxuICAgIFtgc3R5bGUtbW9kYF0oaHR0cHM6Ly9naXRodWIuY29tL21hcmlqbmgvc3R5bGUtbW9kI2RvY3VtZW50YXRpb24pXG4gICAgc3R5bGUgc3BlYyBwcm92aWRpbmcgdGhlIHN0eWxlcyBmb3IgdGhlIHRoZW1lLiBUaGVzZSB3aWxsIGJlXG4gICAgcHJlZml4ZWQgd2l0aCBhIGdlbmVyYXRlZCBjbGFzcyBmb3IgdGhlIHN0eWxlLlxuICAgIFxuICAgIEJlY2F1c2UgdGhlIHNlbGVjdG9ycyB3aWxsIGJlIHByZWZpeGVkIHdpdGggYSBzY29wZSBjbGFzcywgcnVsZVxuICAgIHRoYXQgZGlyZWN0bHkgbWF0Y2ggdGhlIGVkaXRvcidzIFt3cmFwcGVyXG4gICAgZWxlbWVudF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXcuZG9tKVx1MjAxNHRvIHdoaWNoIHRoZSBzY29wZSBjbGFzcyB3aWxsIGJlXG4gICAgYWRkZWRcdTIwMTRuZWVkIHRvIGJlIGV4cGxpY2l0bHkgZGlmZmVyZW50aWF0ZWQgYnkgYWRkaW5nIGFuIGAmYCB0b1xuICAgIHRoZSBzZWxlY3RvciBmb3IgdGhhdCBlbGVtZW50XHUyMDE0Zm9yIGV4YW1wbGVcbiAgICBgJi5jbS1mb2N1c2VkYC5cbiAgICBcbiAgICBXaGVuIGBkYXJrYCBpcyBzZXQgdG8gdHJ1ZSwgdGhlIHRoZW1lIHdpbGwgYmUgbWFya2VkIGFzIGRhcmssXG4gICAgd2hpY2ggd2lsbCBjYXVzZSB0aGUgYCZkYXJrYCBydWxlcyBmcm9tIFtiYXNlXG4gICAgdGhlbWVzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlld15iYXNlVGhlbWUpIHRvIGJlIHVzZWQgKGFzIG9wcG9zZWQgdG9cbiAgICBgJmxpZ2h0YCB3aGVuIGEgbGlnaHQgdGhlbWUgaXMgYWN0aXZlKS5cbiAgICAqL1xuICAgIHN0YXRpYyB0aGVtZShzcGVjLCBvcHRpb25zKSB7XG4gICAgICAgIGxldCBwcmVmaXggPSBTdHlsZU1vZHVsZS5uZXdOYW1lKCk7XG4gICAgICAgIGxldCByZXN1bHQgPSBbdGhlbWUub2YocHJlZml4KSwgc3R5bGVNb2R1bGUub2YoYnVpbGRUaGVtZShgLiR7cHJlZml4fWAsIHNwZWMpKV07XG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZGFyaylcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGRhcmtUaGVtZS5vZih0cnVlKSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhbiBleHRlbnNpb24gdGhhdCBhZGRzIHN0eWxlcyB0byB0aGUgYmFzZSB0aGVtZS4gTGlrZVxuICAgIHdpdGggW2B0aGVtZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3XnRoZW1lKSwgdXNlIGAmYCB0byBpbmRpY2F0ZSB0aGVcbiAgICBwbGFjZSBvZiB0aGUgZWRpdG9yIHdyYXBwZXIgZWxlbWVudCB3aGVuIGRpcmVjdGx5IHRhcmdldGluZ1xuICAgIHRoYXQuIFlvdSBjYW4gYWxzbyB1c2UgYCZkYXJrYCBvciBgJmxpZ2h0YCBpbnN0ZWFkIHRvIG9ubHlcbiAgICB0YXJnZXQgZWRpdG9ycyB3aXRoIGEgZGFyayBvciBsaWdodCB0aGVtZS5cbiAgICAqL1xuICAgIHN0YXRpYyBiYXNlVGhlbWUoc3BlYykge1xuICAgICAgICByZXR1cm4gUHJlYy5sb3dlc3Qoc3R5bGVNb2R1bGUub2YoYnVpbGRUaGVtZShcIi5cIiArIGJhc2VUaGVtZUlELCBzcGVjLCBsaWdodERhcmtJRHMpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHJpZXZlIGFuIGVkaXRvciB2aWV3IGluc3RhbmNlIGZyb20gdGhlIHZpZXcncyBET01cbiAgICByZXByZXNlbnRhdGlvbi5cbiAgICAqL1xuICAgIHN0YXRpYyBmaW5kRnJvbURPTShkb20pIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBsZXQgY29udGVudCA9IGRvbS5xdWVyeVNlbGVjdG9yKFwiLmNtLWNvbnRlbnRcIik7XG4gICAgICAgIGxldCBjVmlldyA9IGNvbnRlbnQgJiYgQ29udGVudFZpZXcuZ2V0KGNvbnRlbnQpIHx8IENvbnRlbnRWaWV3LmdldChkb20pO1xuICAgICAgICByZXR1cm4gKChfYSA9IGNWaWV3ID09PSBudWxsIHx8IGNWaWV3ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjVmlldy5yb290VmlldykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnZpZXcpIHx8IG51bGw7XG4gICAgfVxufVxuLyoqXG5GYWNldCB0byBhZGQgYSBbc3R5bGVcbm1vZHVsZV0oaHR0cHM6Ly9naXRodWIuY29tL21hcmlqbmgvc3R5bGUtbW9kI2RvY3VtZW50YXRpb24pIHRvXG5hbiBlZGl0b3Igdmlldy4gVGhlIHZpZXcgd2lsbCBlbnN1cmUgdGhhdCB0aGUgbW9kdWxlIGlzXG5tb3VudGVkIGluIGl0cyBbZG9jdW1lbnRcbnJvb3RdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LmNvbnN0cnVjdG9yXmNvbmZpZy5yb290KS5cbiovXG5FZGl0b3JWaWV3LnN0eWxlTW9kdWxlID0gc3R5bGVNb2R1bGU7XG4vKipcbkFuIGlucHV0IGhhbmRsZXIgY2FuIG92ZXJyaWRlIHRoZSB3YXkgY2hhbmdlcyB0byB0aGUgZWRpdGFibGVcbkRPTSBjb250ZW50IGFyZSBoYW5kbGVkLiBIYW5kbGVycyBhcmUgcGFzc2VkIHRoZSBkb2N1bWVudFxucG9zaXRpb25zIGJldHdlZW4gd2hpY2ggdGhlIGNoYW5nZSB3YXMgZm91bmQsIGFuZCB0aGUgbmV3XG5jb250ZW50LiBXaGVuIG9uZSByZXR1cm5zIHRydWUsIG5vIGZ1cnRoZXIgaW5wdXQgaGFuZGxlcnMgYXJlXG5jYWxsZWQgYW5kIHRoZSBkZWZhdWx0IGJlaGF2aW9yIGlzIHByZXZlbnRlZC5cbiovXG5FZGl0b3JWaWV3LmlucHV0SGFuZGxlciA9IGlucHV0SGFuZGxlcjtcbi8qKlxuQnkgZGVmYXVsdCwgdGhlIGVkaXRvciBhc3N1bWVzIGFsbCBpdHMgY29udGVudCBoYXMgdGhlIHNhbWVcblt0ZXh0IGRpcmVjdGlvbl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkRpcmVjdGlvbikuIENvbmZpZ3VyZSB0aGlzIHdpdGggYSBgdHJ1ZWBcbnZhbHVlIHRvIG1ha2UgaXQgcmVhZCB0aGUgdGV4dCBkaXJlY3Rpb24gb2YgZXZlcnkgKHJlbmRlcmVkKVxubGluZSBzZXBhcmF0ZWx5LlxuKi9cbkVkaXRvclZpZXcucGVyTGluZVRleHREaXJlY3Rpb24gPSBwZXJMaW5lVGV4dERpcmVjdGlvbjtcbi8qKlxuQWxsb3dzIHlvdSB0byBwcm92aWRlIGEgZnVuY3Rpb24gdGhhdCBzaG91bGQgYmUgY2FsbGVkIHdoZW4gdGhlXG5saWJyYXJ5IGNhdGNoZXMgYW4gZXhjZXB0aW9uIGZyb20gYW4gZXh0ZW5zaW9uIChtb3N0bHkgZnJvbSB2aWV3XG5wbHVnaW5zLCBidXQgbWF5IGJlIHVzZWQgYnkgb3RoZXIgZXh0ZW5zaW9ucyB0byByb3V0ZSBleGNlcHRpb25zXG5mcm9tIHVzZXItY29kZS1wcm92aWRlZCBjYWxsYmFja3MpLiBUaGlzIGlzIG1vc3RseSB1c2VmdWwgZm9yXG5kZWJ1Z2dpbmcgYW5kIGxvZ2dpbmcuIFNlZSBbYGxvZ0V4Y2VwdGlvbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5sb2dFeGNlcHRpb24pLlxuKi9cbkVkaXRvclZpZXcuZXhjZXB0aW9uU2luayA9IGV4Y2VwdGlvblNpbms7XG4vKipcbkEgZmFjZXQgdGhhdCBjYW4gYmUgdXNlZCB0byByZWdpc3RlciBhIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZFxuZXZlcnkgdGltZSB0aGUgdmlldyB1cGRhdGVzLlxuKi9cbkVkaXRvclZpZXcudXBkYXRlTGlzdGVuZXIgPSB1cGRhdGVMaXN0ZW5lcjtcbi8qKlxuRmFjZXQgdGhhdCBjb250cm9scyB3aGV0aGVyIHRoZSBlZGl0b3IgY29udGVudCBET00gaXMgZWRpdGFibGUuXG5XaGVuIGl0cyBoaWdoZXN0LXByZWNlZGVuY2UgdmFsdWUgaXMgYGZhbHNlYCwgdGhlIGVsZW1lbnQgd2lsbFxubm90IGhhdmUgaXRzIGBjb250ZW50ZWRpdGFibGVgIGF0dHJpYnV0ZSBzZXQuIChOb3RlIHRoYXQgdGhpc1xuZG9lc24ndCBhZmZlY3QgQVBJIGNhbGxzIHRoYXQgY2hhbmdlIHRoZSBlZGl0b3IgY29udGVudCwgZXZlblxud2hlbiB0aG9zZSBhcmUgYm91bmQgdG8ga2V5cyBvciBidXR0b25zLiBTZWUgdGhlXG5bYHJlYWRPbmx5YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZS5yZWFkT25seSkgZmFjZXQgZm9yIHRoYXQuKVxuKi9cbkVkaXRvclZpZXcuZWRpdGFibGUgPSBlZGl0YWJsZTtcbi8qKlxuQWxsb3dzIHlvdSB0byBpbmZsdWVuY2UgdGhlIHdheSBtb3VzZSBzZWxlY3Rpb24gaGFwcGVucy4gVGhlXG5mdW5jdGlvbnMgaW4gdGhpcyBmYWNldCB3aWxsIGJlIGNhbGxlZCBmb3IgYSBgbW91c2Vkb3duYCBldmVudFxub24gdGhlIGVkaXRvciwgYW5kIGNhbiByZXR1cm4gYW4gb2JqZWN0IHRoYXQgb3ZlcnJpZGVzIHRoZSB3YXkgYVxuc2VsZWN0aW9uIGlzIGNvbXB1dGVkIGZyb20gdGhhdCBtb3VzZSBjbGljayBvciBkcmFnLlxuKi9cbkVkaXRvclZpZXcubW91c2VTZWxlY3Rpb25TdHlsZSA9IG1vdXNlU2VsZWN0aW9uU3R5bGU7XG4vKipcbkZhY2V0IHVzZWQgdG8gY29uZmlndXJlIHdoZXRoZXIgYSBnaXZlbiBzZWxlY3Rpb24gZHJhZyBldmVudFxuc2hvdWxkIG1vdmUgb3IgY29weSB0aGUgc2VsZWN0aW9uLiBUaGUgZ2l2ZW4gcHJlZGljYXRlIHdpbGwgYmVcbmNhbGxlZCB3aXRoIHRoZSBgbW91c2Vkb3duYCBldmVudCwgYW5kIGNhbiByZXR1cm4gYHRydWVgIHdoZW5cbnRoZSBkcmFnIHNob3VsZCBtb3ZlIHRoZSBjb250ZW50LlxuKi9cbkVkaXRvclZpZXcuZHJhZ01vdmVzU2VsZWN0aW9uID0gZHJhZ01vdmVzU2VsZWN0aW9uJDE7XG4vKipcbkZhY2V0IHVzZWQgdG8gY29uZmlndXJlIHdoZXRoZXIgYSBnaXZlbiBzZWxlY3RpbmcgY2xpY2sgYWRkcyBhXG5uZXcgcmFuZ2UgdG8gdGhlIGV4aXN0aW5nIHNlbGVjdGlvbiBvciByZXBsYWNlcyBpdCBlbnRpcmVseS4gVGhlXG5kZWZhdWx0IGJlaGF2aW9yIGlzIHRvIGNoZWNrIGBldmVudC5tZXRhS2V5YCBvbiBtYWNPUywgYW5kXG5gZXZlbnQuY3RybEtleWAgZWxzZXdoZXJlLlxuKi9cbkVkaXRvclZpZXcuY2xpY2tBZGRzU2VsZWN0aW9uUmFuZ2UgPSBjbGlja0FkZHNTZWxlY3Rpb25SYW5nZTtcbi8qKlxuQSBmYWNldCB0aGF0IGRldGVybWluZXMgd2hpY2ggW2RlY29yYXRpb25zXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRGVjb3JhdGlvbilcbmFyZSBzaG93biBpbiB0aGUgdmlldy4gRGVjb3JhdGlvbnMgY2FuIGJlIHByb3ZpZGVkIGluIHR3b1xud2F5c1x1MjAxNGRpcmVjdGx5LCBvciB2aWEgYSBmdW5jdGlvbiB0aGF0IHRha2VzIGFuIGVkaXRvciB2aWV3LlxuXG5Pbmx5IGRlY29yYXRpb24gc2V0cyBwcm92aWRlZCBkaXJlY3RseSBhcmUgYWxsb3dlZCB0byBpbmZsdWVuY2VcbnRoZSBlZGl0b3IncyB2ZXJ0aWNhbCBsYXlvdXQgc3RydWN0dXJlLiBUaGUgb25lcyBwcm92aWRlZCBhc1xuZnVuY3Rpb25zIGFyZSBjYWxsZWQgX2FmdGVyXyB0aGUgbmV3IHZpZXdwb3J0IGhhcyBiZWVuIGNvbXB1dGVkLFxuYW5kIHRodXMgKiptdXN0IG5vdCoqIGludHJvZHVjZSBibG9jayB3aWRnZXRzIG9yIHJlcGxhY2luZ1xuZGVjb3JhdGlvbnMgdGhhdCBjb3ZlciBsaW5lIGJyZWFrcy5cblxuSWYgeW91IHdhbnQgZGVjb3JhdGVkIHJhbmdlcyB0byBiZWhhdmUgbGlrZSBhdG9taWMgdW5pdHMgZm9yXG5jdXJzb3IgbW90aW9uIGFuZCBkZWxldGlvbiBwdXJwb3NlcywgYWxzbyBwcm92aWRlIHRoZSByYW5nZSBzZXRcbmNvbnRhaW5pbmcgdGhlIGRlY29yYXRpb25zIHRvXG5bYEVkaXRvclZpZXcuYXRvbWljUmFuZ2VzYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXdeYXRvbWljUmFuZ2VzKS5cbiovXG5FZGl0b3JWaWV3LmRlY29yYXRpb25zID0gZGVjb3JhdGlvbnM7XG4vKipcblVzZWQgdG8gcHJvdmlkZSByYW5nZXMgdGhhdCBzaG91bGQgYmUgdHJlYXRlZCBhcyBhdG9tcyBhcyBmYXIgYXNcbmN1cnNvciBtb3Rpb24gaXMgY29uY2VybmVkLiBUaGlzIGNhdXNlcyBtZXRob2RzIGxpa2VcbltgbW92ZUJ5Q2hhcmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3Lm1vdmVCeUNoYXIpIGFuZFxuW2Btb3ZlVmVydGljYWxseWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3Lm1vdmVWZXJ0aWNhbGx5KSAoYW5kIHRoZVxuY29tbWFuZHMgYnVpbHQgb24gdG9wIG9mIHRoZW0pIHRvIHNraXAgYWNyb3NzIHN1Y2ggcmVnaW9ucyB3aGVuXG5hIHNlbGVjdGlvbiBlbmRwb2ludCB3b3VsZCBlbnRlciB0aGVtLiBUaGlzIGRvZXMgX25vdF8gcHJldmVudFxuZGlyZWN0IHByb2dyYW1tYXRpYyBbc2VsZWN0aW9uXG51cGRhdGVzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uU3BlYy5zZWxlY3Rpb24pIGZyb20gbW92aW5nIGludG8gc3VjaFxucmVnaW9ucy5cbiovXG5FZGl0b3JWaWV3LmF0b21pY1JhbmdlcyA9IGF0b21pY1Jhbmdlcztcbi8qKlxuRmFjZXQgdGhhdCBhbGxvd3MgZXh0ZW5zaW9ucyB0byBwcm92aWRlIGFkZGl0aW9uYWwgc2Nyb2xsXG5tYXJnaW5zIChzcGFjZSBhcm91bmQgdGhlIHNpZGVzIG9mIHRoZSBzY3JvbGxpbmcgZWxlbWVudCB0aGF0XG5zaG91bGQgYmUgY29uc2lkZXJlZCBpbnZpc2libGUpLiBUaGlzIGNhbiBiZSB1c2VmdWwgd2hlbiB0aGVcbnBsdWdpbiBpbnRyb2R1Y2VzIGVsZW1lbnRzIHRoYXQgY292ZXIgcGFydCBvZiB0aGF0IGVsZW1lbnQgKGZvclxuZXhhbXBsZSBhIGhvcml6b250YWxseSBmaXhlZCBndXR0ZXIpLlxuKi9cbkVkaXRvclZpZXcuc2Nyb2xsTWFyZ2lucyA9IHNjcm9sbE1hcmdpbnM7XG4vKipcblRoaXMgZmFjZXQgcmVjb3JkcyB3aGV0aGVyIGEgZGFyayB0aGVtZSBpcyBhY3RpdmUuIFRoZSBleHRlbnNpb25cbnJldHVybmVkIGJ5IFtgdGhlbWVgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlld150aGVtZSkgYXV0b21hdGljYWxseVxuaW5jbHVkZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyB3aGVuIHRoZSBgZGFya2Agb3B0aW9uIGlzIHNldCB0b1xudHJ1ZS5cbiovXG5FZGl0b3JWaWV3LmRhcmtUaGVtZSA9IGRhcmtUaGVtZTtcbi8qKlxuRmFjZXQgdGhhdCBwcm92aWRlcyBhZGRpdGlvbmFsIERPTSBhdHRyaWJ1dGVzIGZvciB0aGUgZWRpdG9yJ3NcbmVkaXRhYmxlIERPTSBlbGVtZW50LlxuKi9cbkVkaXRvclZpZXcuY29udGVudEF0dHJpYnV0ZXMgPSBjb250ZW50QXR0cmlidXRlcztcbi8qKlxuRmFjZXQgdGhhdCBwcm92aWRlcyBET00gYXR0cmlidXRlcyBmb3IgdGhlIGVkaXRvcidzIG91dGVyXG5lbGVtZW50LlxuKi9cbkVkaXRvclZpZXcuZWRpdG9yQXR0cmlidXRlcyA9IGVkaXRvckF0dHJpYnV0ZXM7XG4vKipcbkFuIGV4dGVuc2lvbiB0aGF0IGVuYWJsZXMgbGluZSB3cmFwcGluZyBpbiB0aGUgZWRpdG9yIChieVxuc2V0dGluZyBDU1MgYHdoaXRlLXNwYWNlYCB0byBgcHJlLXdyYXBgIGluIHRoZSBjb250ZW50KS5cbiovXG5FZGl0b3JWaWV3LmxpbmVXcmFwcGluZyA9IC8qQF9fUFVSRV9fKi9FZGl0b3JWaWV3LmNvbnRlbnRBdHRyaWJ1dGVzLm9mKHsgXCJjbGFzc1wiOiBcImNtLWxpbmVXcmFwcGluZ1wiIH0pO1xuLyoqXG5TdGF0ZSBlZmZlY3QgdXNlZCB0byBpbmNsdWRlIHNjcmVlbiByZWFkZXIgYW5ub3VuY2VtZW50cyBpbiBhXG50cmFuc2FjdGlvbi4gVGhlc2Ugd2lsbCBiZSBhZGRlZCB0byB0aGUgRE9NIGluIGEgdmlzdWFsbHkgaGlkZGVuXG5lbGVtZW50IHdpdGggYGFyaWEtbGl2ZT1cInBvbGl0ZVwiYCBzZXQsIGFuZCBzaG91bGQgYmUgdXNlZCB0b1xuZGVzY3JpYmUgZWZmZWN0cyB0aGF0IGFyZSB2aXN1YWxseSBvYnZpb3VzIGJ1dCBtYXkgbm90IGJlXG5ub3RpY2VkIGJ5IHNjcmVlbiByZWFkZXIgdXNlcnMgKHN1Y2ggYXMgbW92aW5nIHRvIHRoZSBuZXh0XG5zZWFyY2ggbWF0Y2gpLlxuKi9cbkVkaXRvclZpZXcuYW5ub3VuY2UgPSAvKkBfX1BVUkVfXyovU3RhdGVFZmZlY3QuZGVmaW5lKCk7XG4vLyBNYXhpbXVtIGxpbmUgbGVuZ3RoIGZvciB3aGljaCB3ZSBjb21wdXRlIGFjY3VyYXRlIGJpZGkgaW5mb1xuY29uc3QgTWF4QmlkaUxpbmUgPSA0MDk2O1xuY29uc3QgQmFkTWVhc3VyZSA9IHt9O1xuY2xhc3MgQ2FjaGVkT3JkZXIge1xuICAgIGNvbnN0cnVjdG9yKGZyb20sIHRvLCBkaXIsIG9yZGVyKSB7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICAgICAgdGhpcy5kaXIgPSBkaXI7XG4gICAgICAgIHRoaXMub3JkZXIgPSBvcmRlcjtcbiAgICB9XG4gICAgc3RhdGljIHVwZGF0ZShjYWNoZSwgY2hhbmdlcykge1xuICAgICAgICBpZiAoY2hhbmdlcy5lbXB0eSlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZTtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdLCBsYXN0RGlyID0gY2FjaGUubGVuZ3RoID8gY2FjaGVbY2FjaGUubGVuZ3RoIC0gMV0uZGlyIDogRGlyZWN0aW9uLkxUUjtcbiAgICAgICAgZm9yIChsZXQgaSA9IE1hdGgubWF4KDAsIGNhY2hlLmxlbmd0aCAtIDEwKTsgaSA8IGNhY2hlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgZW50cnkgPSBjYWNoZVtpXTtcbiAgICAgICAgICAgIGlmIChlbnRyeS5kaXIgPT0gbGFzdERpciAmJiAhY2hhbmdlcy50b3VjaGVzUmFuZ2UoZW50cnkuZnJvbSwgZW50cnkudG8pKVxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKG5ldyBDYWNoZWRPcmRlcihjaGFuZ2VzLm1hcFBvcyhlbnRyeS5mcm9tLCAxKSwgY2hhbmdlcy5tYXBQb3MoZW50cnkudG8sIC0xKSwgZW50cnkuZGlyLCBlbnRyeS5vcmRlcikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuZnVuY3Rpb24gYXR0cnNGcm9tRmFjZXQodmlldywgZmFjZXQsIGJhc2UpIHtcbiAgICBmb3IgKGxldCBzb3VyY2VzID0gdmlldy5zdGF0ZS5mYWNldChmYWNldCksIGkgPSBzb3VyY2VzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGxldCBzb3VyY2UgPSBzb3VyY2VzW2ldLCB2YWx1ZSA9IHR5cGVvZiBzb3VyY2UgPT0gXCJmdW5jdGlvblwiID8gc291cmNlKHZpZXcpIDogc291cmNlO1xuICAgICAgICBpZiAodmFsdWUpXG4gICAgICAgICAgICBjb21iaW5lQXR0cnModmFsdWUsIGJhc2UpO1xuICAgIH1cbiAgICByZXR1cm4gYmFzZTtcbn1cblxuY29uc3QgY3VycmVudFBsYXRmb3JtID0gYnJvd3Nlci5tYWMgPyBcIm1hY1wiIDogYnJvd3Nlci53aW5kb3dzID8gXCJ3aW5cIiA6IGJyb3dzZXIubGludXggPyBcImxpbnV4XCIgOiBcImtleVwiO1xuZnVuY3Rpb24gbm9ybWFsaXplS2V5TmFtZShuYW1lLCBwbGF0Zm9ybSkge1xuICAgIGNvbnN0IHBhcnRzID0gbmFtZS5zcGxpdCgvLSg/ISQpLyk7XG4gICAgbGV0IHJlc3VsdCA9IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdO1xuICAgIGlmIChyZXN1bHQgPT0gXCJTcGFjZVwiKVxuICAgICAgICByZXN1bHQgPSBcIiBcIjtcbiAgICBsZXQgYWx0LCBjdHJsLCBzaGlmdCwgbWV0YTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aCAtIDE7ICsraSkge1xuICAgICAgICBjb25zdCBtb2QgPSBwYXJ0c1tpXTtcbiAgICAgICAgaWYgKC9eKGNtZHxtZXRhfG0pJC9pLnRlc3QobW9kKSlcbiAgICAgICAgICAgIG1ldGEgPSB0cnVlO1xuICAgICAgICBlbHNlIGlmICgvXmEobHQpPyQvaS50ZXN0KG1vZCkpXG4gICAgICAgICAgICBhbHQgPSB0cnVlO1xuICAgICAgICBlbHNlIGlmICgvXihjfGN0cmx8Y29udHJvbCkkL2kudGVzdChtb2QpKVxuICAgICAgICAgICAgY3RybCA9IHRydWU7XG4gICAgICAgIGVsc2UgaWYgKC9ecyhoaWZ0KT8kL2kudGVzdChtb2QpKVxuICAgICAgICAgICAgc2hpZnQgPSB0cnVlO1xuICAgICAgICBlbHNlIGlmICgvXm1vZCQvaS50ZXN0KG1vZCkpIHtcbiAgICAgICAgICAgIGlmIChwbGF0Zm9ybSA9PSBcIm1hY1wiKVxuICAgICAgICAgICAgICAgIG1ldGEgPSB0cnVlO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGN0cmwgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVucmVjb2duaXplZCBtb2RpZmllciBuYW1lOiBcIiArIG1vZCk7XG4gICAgfVxuICAgIGlmIChhbHQpXG4gICAgICAgIHJlc3VsdCA9IFwiQWx0LVwiICsgcmVzdWx0O1xuICAgIGlmIChjdHJsKVxuICAgICAgICByZXN1bHQgPSBcIkN0cmwtXCIgKyByZXN1bHQ7XG4gICAgaWYgKG1ldGEpXG4gICAgICAgIHJlc3VsdCA9IFwiTWV0YS1cIiArIHJlc3VsdDtcbiAgICBpZiAoc2hpZnQpXG4gICAgICAgIHJlc3VsdCA9IFwiU2hpZnQtXCIgKyByZXN1bHQ7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIG1vZGlmaWVycyhuYW1lLCBldmVudCwgc2hpZnQpIHtcbiAgICBpZiAoZXZlbnQuYWx0S2V5KVxuICAgICAgICBuYW1lID0gXCJBbHQtXCIgKyBuYW1lO1xuICAgIGlmIChldmVudC5jdHJsS2V5KVxuICAgICAgICBuYW1lID0gXCJDdHJsLVwiICsgbmFtZTtcbiAgICBpZiAoZXZlbnQubWV0YUtleSlcbiAgICAgICAgbmFtZSA9IFwiTWV0YS1cIiArIG5hbWU7XG4gICAgaWYgKHNoaWZ0ICE9PSBmYWxzZSAmJiBldmVudC5zaGlmdEtleSlcbiAgICAgICAgbmFtZSA9IFwiU2hpZnQtXCIgKyBuYW1lO1xuICAgIHJldHVybiBuYW1lO1xufVxuY29uc3QgaGFuZGxlS2V5RXZlbnRzID0gLypAX19QVVJFX18qL1ByZWMuZGVmYXVsdCgvKkBfX1BVUkVfXyovRWRpdG9yVmlldy5kb21FdmVudEhhbmRsZXJzKHtcbiAgICBrZXlkb3duKGV2ZW50LCB2aWV3KSB7XG4gICAgICAgIHJldHVybiBydW5IYW5kbGVycyhnZXRLZXltYXAodmlldy5zdGF0ZSksIGV2ZW50LCB2aWV3LCBcImVkaXRvclwiKTtcbiAgICB9XG59KSk7XG4vKipcbkZhY2V0IHVzZWQgZm9yIHJlZ2lzdGVyaW5nIGtleW1hcHMuXG5cbllvdSBjYW4gYWRkIG11bHRpcGxlIGtleW1hcHMgdG8gYW4gZWRpdG9yLiBUaGVpciBwcmlvcml0aWVzXG5kZXRlcm1pbmUgdGhlaXIgcHJlY2VkZW5jZSAodGhlIG9uZXMgc3BlY2lmaWVkIGVhcmx5IG9yIHdpdGggaGlnaFxucHJpb3JpdHkgZ2V0IGNoZWNrZWQgZmlyc3QpLiBXaGVuIGEgaGFuZGxlciBoYXMgcmV0dXJuZWQgYHRydWVgXG5mb3IgYSBnaXZlbiBrZXksIG5vIGZ1cnRoZXIgaGFuZGxlcnMgYXJlIGNhbGxlZC5cbiovXG5jb25zdCBrZXltYXAgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHsgZW5hYmxlczogaGFuZGxlS2V5RXZlbnRzIH0pO1xuY29uc3QgS2V5bWFwcyA9IC8qQF9fUFVSRV9fKi9uZXcgV2Vha01hcCgpO1xuLy8gVGhpcyBpcyBoaWRkZW4gYmVoaW5kIGFuIGluZGlyZWN0aW9uLCByYXRoZXIgdGhhbiBkaXJlY3RseSBjb21wdXRlZFxuLy8gYnkgdGhlIGZhY2V0LCB0byBrZWVwIGludGVybmFsIHR5cGVzIG91dCBvZiB0aGUgZmFjZXQncyB0eXBlLlxuZnVuY3Rpb24gZ2V0S2V5bWFwKHN0YXRlKSB7XG4gICAgbGV0IGJpbmRpbmdzID0gc3RhdGUuZmFjZXQoa2V5bWFwKTtcbiAgICBsZXQgbWFwID0gS2V5bWFwcy5nZXQoYmluZGluZ3MpO1xuICAgIGlmICghbWFwKVxuICAgICAgICBLZXltYXBzLnNldChiaW5kaW5ncywgbWFwID0gYnVpbGRLZXltYXAoYmluZGluZ3MucmVkdWNlKChhLCBiKSA9PiBhLmNvbmNhdChiKSwgW10pKSk7XG4gICAgcmV0dXJuIG1hcDtcbn1cbi8qKlxuUnVuIHRoZSBrZXkgaGFuZGxlcnMgcmVnaXN0ZXJlZCBmb3IgYSBnaXZlbiBzY29wZS4gVGhlIGV2ZW50XG5vYmplY3Qgc2hvdWxkIGJlIGEgYFwia2V5ZG93blwiYCBldmVudC4gUmV0dXJucyB0cnVlIGlmIGFueSBvZiB0aGVcbmhhbmRsZXJzIGhhbmRsZWQgaXQuXG4qL1xuZnVuY3Rpb24gcnVuU2NvcGVIYW5kbGVycyh2aWV3LCBldmVudCwgc2NvcGUpIHtcbiAgICByZXR1cm4gcnVuSGFuZGxlcnMoZ2V0S2V5bWFwKHZpZXcuc3RhdGUpLCBldmVudCwgdmlldywgc2NvcGUpO1xufVxubGV0IHN0b3JlZFByZWZpeCA9IG51bGw7XG5jb25zdCBQcmVmaXhUaW1lb3V0ID0gNDAwMDtcbmZ1bmN0aW9uIGJ1aWxkS2V5bWFwKGJpbmRpbmdzLCBwbGF0Zm9ybSA9IGN1cnJlbnRQbGF0Zm9ybSkge1xuICAgIGxldCBib3VuZCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgbGV0IGlzUHJlZml4ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBsZXQgY2hlY2tQcmVmaXggPSAobmFtZSwgaXMpID0+IHtcbiAgICAgICAgbGV0IGN1cnJlbnQgPSBpc1ByZWZpeFtuYW1lXTtcbiAgICAgICAgaWYgKGN1cnJlbnQgPT0gbnVsbClcbiAgICAgICAgICAgIGlzUHJlZml4W25hbWVdID0gaXM7XG4gICAgICAgIGVsc2UgaWYgKGN1cnJlbnQgIT0gaXMpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJLZXkgYmluZGluZyBcIiArIG5hbWUgKyBcIiBpcyB1c2VkIGJvdGggYXMgYSByZWd1bGFyIGJpbmRpbmcgYW5kIGFzIGEgbXVsdGktc3Ryb2tlIHByZWZpeFwiKTtcbiAgICB9O1xuICAgIGxldCBhZGQgPSAoc2NvcGUsIGtleSwgY29tbWFuZCwgcHJldmVudERlZmF1bHQpID0+IHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgbGV0IHNjb3BlT2JqID0gYm91bmRbc2NvcGVdIHx8IChib3VuZFtzY29wZV0gPSBPYmplY3QuY3JlYXRlKG51bGwpKTtcbiAgICAgICAgbGV0IHBhcnRzID0ga2V5LnNwbGl0KC8gKD8hJCkvKS5tYXAoayA9PiBub3JtYWxpemVLZXlOYW1lKGssIHBsYXRmb3JtKSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBwcmVmaXggPSBwYXJ0cy5zbGljZSgwLCBpKS5qb2luKFwiIFwiKTtcbiAgICAgICAgICAgIGNoZWNrUHJlZml4KHByZWZpeCwgdHJ1ZSk7XG4gICAgICAgICAgICBpZiAoIXNjb3BlT2JqW3ByZWZpeF0pXG4gICAgICAgICAgICAgICAgc2NvcGVPYmpbcHJlZml4XSA9IHtcbiAgICAgICAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHJ1bjogWyh2aWV3KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG91ck9iaiA9IHN0b3JlZFByZWZpeCA9IHsgdmlldywgcHJlZml4LCBzY29wZSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4geyBpZiAoc3RvcmVkUHJlZml4ID09IG91ck9iailcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVkUHJlZml4ID0gbnVsbDsgfSwgUHJlZml4VGltZW91dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGZ1bGwgPSBwYXJ0cy5qb2luKFwiIFwiKTtcbiAgICAgICAgY2hlY2tQcmVmaXgoZnVsbCwgZmFsc2UpO1xuICAgICAgICBsZXQgYmluZGluZyA9IHNjb3BlT2JqW2Z1bGxdIHx8IChzY29wZU9ialtmdWxsXSA9IHsgcHJldmVudERlZmF1bHQ6IGZhbHNlLCBydW46ICgoX2IgPSAoX2EgPSBzY29wZU9iai5fYW55KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucnVuKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Iuc2xpY2UoKSkgfHwgW10gfSk7XG4gICAgICAgIGlmIChjb21tYW5kKVxuICAgICAgICAgICAgYmluZGluZy5ydW4ucHVzaChjb21tYW5kKTtcbiAgICAgICAgaWYgKHByZXZlbnREZWZhdWx0KVxuICAgICAgICAgICAgYmluZGluZy5wcmV2ZW50RGVmYXVsdCA9IHRydWU7XG4gICAgfTtcbiAgICBmb3IgKGxldCBiIG9mIGJpbmRpbmdzKSB7XG4gICAgICAgIGxldCBzY29wZXMgPSBiLnNjb3BlID8gYi5zY29wZS5zcGxpdChcIiBcIikgOiBbXCJlZGl0b3JcIl07XG4gICAgICAgIGlmIChiLmFueSlcbiAgICAgICAgICAgIGZvciAobGV0IHNjb3BlIG9mIHNjb3Blcykge1xuICAgICAgICAgICAgICAgIGxldCBzY29wZU9iaiA9IGJvdW5kW3Njb3BlXSB8fCAoYm91bmRbc2NvcGVdID0gT2JqZWN0LmNyZWF0ZShudWxsKSk7XG4gICAgICAgICAgICAgICAgaWYgKCFzY29wZU9iai5fYW55KVxuICAgICAgICAgICAgICAgICAgICBzY29wZU9iai5fYW55ID0geyBwcmV2ZW50RGVmYXVsdDogZmFsc2UsIHJ1bjogW10gfTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gc2NvcGVPYmopXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlT2JqW2tleV0ucnVuLnB1c2goYi5hbnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICBsZXQgbmFtZSA9IGJbcGxhdGZvcm1dIHx8IGIua2V5O1xuICAgICAgICBpZiAoIW5hbWUpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgZm9yIChsZXQgc2NvcGUgb2Ygc2NvcGVzKSB7XG4gICAgICAgICAgICBhZGQoc2NvcGUsIG5hbWUsIGIucnVuLCBiLnByZXZlbnREZWZhdWx0KTtcbiAgICAgICAgICAgIGlmIChiLnNoaWZ0KVxuICAgICAgICAgICAgICAgIGFkZChzY29wZSwgXCJTaGlmdC1cIiArIG5hbWUsIGIuc2hpZnQsIGIucHJldmVudERlZmF1bHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBib3VuZDtcbn1cbmZ1bmN0aW9uIHJ1bkhhbmRsZXJzKG1hcCwgZXZlbnQsIHZpZXcsIHNjb3BlKSB7XG4gICAgbGV0IG5hbWUgPSBrZXlOYW1lKGV2ZW50KTtcbiAgICBsZXQgY2hhckNvZGUgPSBjb2RlUG9pbnRBdChuYW1lLCAwKSwgaXNDaGFyID0gY29kZVBvaW50U2l6ZShjaGFyQ29kZSkgPT0gbmFtZS5sZW5ndGggJiYgbmFtZSAhPSBcIiBcIjtcbiAgICBsZXQgcHJlZml4ID0gXCJcIiwgZmFsbHRocm91Z2ggPSBmYWxzZTtcbiAgICBpZiAoc3RvcmVkUHJlZml4ICYmIHN0b3JlZFByZWZpeC52aWV3ID09IHZpZXcgJiYgc3RvcmVkUHJlZml4LnNjb3BlID09IHNjb3BlKSB7XG4gICAgICAgIHByZWZpeCA9IHN0b3JlZFByZWZpeC5wcmVmaXggKyBcIiBcIjtcbiAgICAgICAgaWYgKGZhbGx0aHJvdWdoID0gbW9kaWZpZXJDb2Rlcy5pbmRleE9mKGV2ZW50LmtleUNvZGUpIDwgMClcbiAgICAgICAgICAgIHN0b3JlZFByZWZpeCA9IG51bGw7XG4gICAgfVxuICAgIGxldCByYW4gPSBuZXcgU2V0O1xuICAgIGxldCBydW5Gb3IgPSAoYmluZGluZykgPT4ge1xuICAgICAgICBpZiAoYmluZGluZykge1xuICAgICAgICAgICAgZm9yIChsZXQgY21kIG9mIGJpbmRpbmcucnVuKVxuICAgICAgICAgICAgICAgIGlmICghcmFuLmhhcyhjbWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJhbi5hZGQoY21kKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNtZCh2aWV3LCBldmVudCkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYmluZGluZy5wcmV2ZW50RGVmYXVsdClcbiAgICAgICAgICAgICAgICBmYWxsdGhyb3VnaCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgbGV0IHNjb3BlT2JqID0gbWFwW3Njb3BlXSwgYmFzZU5hbWUsIHNoaWZ0TmFtZTtcbiAgICBpZiAoc2NvcGVPYmopIHtcbiAgICAgICAgaWYgKHJ1bkZvcihzY29wZU9ialtwcmVmaXggKyBtb2RpZmllcnMobmFtZSwgZXZlbnQsICFpc0NoYXIpXSkpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYgKGlzQ2hhciAmJiAoZXZlbnQuYWx0S2V5IHx8IGV2ZW50Lm1ldGFLZXkgfHwgZXZlbnQuY3RybEtleSkgJiZcbiAgICAgICAgICAgIChiYXNlTmFtZSA9IGJhc2VbZXZlbnQua2V5Q29kZV0pICYmIGJhc2VOYW1lICE9IG5hbWUpIHtcbiAgICAgICAgICAgIGlmIChydW5Gb3Ioc2NvcGVPYmpbcHJlZml4ICsgbW9kaWZpZXJzKGJhc2VOYW1lLCBldmVudCwgdHJ1ZSldKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50LnNoaWZ0S2V5ICYmIChzaGlmdE5hbWUgPSBzaGlmdFtldmVudC5rZXlDb2RlXSkgIT0gbmFtZSAmJiBzaGlmdE5hbWUgIT0gYmFzZU5hbWUgJiZcbiAgICAgICAgICAgICAgICBydW5Gb3Ioc2NvcGVPYmpbcHJlZml4ICsgbW9kaWZpZXJzKHNoaWZ0TmFtZSwgZXZlbnQsIGZhbHNlKV0pKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzQ2hhciAmJiBldmVudC5zaGlmdEtleSkge1xuICAgICAgICAgICAgaWYgKHJ1bkZvcihzY29wZU9ialtwcmVmaXggKyBtb2RpZmllcnMobmFtZSwgZXZlbnQsIHRydWUpXSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJ1bkZvcihzY29wZU9iai5fYW55KSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsbHRocm91Z2g7XG59XG5cbmNvbnN0IENhbkhpZGVQcmltYXJ5ID0gIWJyb3dzZXIuaW9zOyAvLyBGSVhNRSB0ZXN0IElFXG5jb25zdCBzZWxlY3Rpb25Db25maWcgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21iaW5lKGNvbmZpZ3MpIHtcbiAgICAgICAgcmV0dXJuIGNvbWJpbmVDb25maWcoY29uZmlncywge1xuICAgICAgICAgICAgY3Vyc29yQmxpbmtSYXRlOiAxMjAwLFxuICAgICAgICAgICAgZHJhd1JhbmdlQ3Vyc29yOiB0cnVlXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGN1cnNvckJsaW5rUmF0ZTogKGEsIGIpID0+IE1hdGgubWluKGEsIGIpLFxuICAgICAgICAgICAgZHJhd1JhbmdlQ3Vyc29yOiAoYSwgYikgPT4gYSB8fCBiXG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuLyoqXG5SZXR1cm5zIGFuIGV4dGVuc2lvbiB0aGF0IGhpZGVzIHRoZSBicm93c2VyJ3MgbmF0aXZlIHNlbGVjdGlvbiBhbmRcbmN1cnNvciwgcmVwbGFjaW5nIHRoZSBzZWxlY3Rpb24gd2l0aCBhIGJhY2tncm91bmQgYmVoaW5kIHRoZSB0ZXh0XG4od2l0aCB0aGUgYGNtLXNlbGVjdGlvbkJhY2tncm91bmRgIGNsYXNzKSwgYW5kIHRoZVxuY3Vyc29ycyB3aXRoIGVsZW1lbnRzIG92ZXJsYWlkIG92ZXIgdGhlIGNvZGUgKHVzaW5nXG5gY20tY3Vyc29yLXByaW1hcnlgIGFuZCBgY20tY3Vyc29yLXNlY29uZGFyeWApLlxuXG5UaGlzIGFsbG93cyB0aGUgZWRpdG9yIHRvIGRpc3BsYXkgc2Vjb25kYXJ5IHNlbGVjdGlvbiByYW5nZXMsIGFuZFxudGVuZHMgdG8gcHJvZHVjZSBhIHR5cGUgb2Ygc2VsZWN0aW9uIG1vcmUgaW4gbGluZSB3aXRoIHRoYXQgdXNlcnNcbmV4cGVjdCBpbiBhIHRleHQgZWRpdG9yICh0aGUgbmF0aXZlIHNlbGVjdGlvbiBzdHlsaW5nIHdpbGwgb2Z0ZW5cbmxlYXZlIGdhcHMgYmV0d2VlbiBsaW5lcyBhbmQgd29uJ3QgZmlsbCB0aGUgaG9yaXpvbnRhbCBzcGFjZSBhZnRlclxuYSBsaW5lIHdoZW4gdGhlIHNlbGVjdGlvbiBjb250aW51ZXMgcGFzdCBpdCkuXG5cbkl0IGRvZXMgaGF2ZSBhIHBlcmZvcm1hbmNlIGNvc3QsIGluIHRoYXQgaXQgcmVxdWlyZXMgYW4gZXh0cmEgRE9NXG5sYXlvdXQgY3ljbGUgZm9yIG1hbnkgdXBkYXRlcyAodGhlIHNlbGVjdGlvbiBpcyBkcmF3biBiYXNlZCBvbiBET01cbmxheW91dCBpbmZvcm1hdGlvbiB0aGF0J3Mgb25seSBhdmFpbGFibGUgYWZ0ZXIgbGF5aW5nIG91dCB0aGVcbmNvbnRlbnQpLlxuKi9cbmZ1bmN0aW9uIGRyYXdTZWxlY3Rpb24oY29uZmlnID0ge30pIHtcbiAgICByZXR1cm4gW1xuICAgICAgICBzZWxlY3Rpb25Db25maWcub2YoY29uZmlnKSxcbiAgICAgICAgZHJhd1NlbGVjdGlvblBsdWdpbixcbiAgICAgICAgaGlkZU5hdGl2ZVNlbGVjdGlvbixcbiAgICAgICAgbmF0aXZlU2VsZWN0aW9uSGlkZGVuLm9mKHRydWUpXG4gICAgXTtcbn1cbmNsYXNzIFBpZWNlIHtcbiAgICBjb25zdHJ1Y3RvcihsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQsIGNsYXNzTmFtZSkge1xuICAgICAgICB0aGlzLmxlZnQgPSBsZWZ0O1xuICAgICAgICB0aGlzLnRvcCA9IHRvcDtcbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgdGhpcy5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gICAgfVxuICAgIGRyYXcoKSB7XG4gICAgICAgIGxldCBlbHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBlbHQuY2xhc3NOYW1lID0gdGhpcy5jbGFzc05hbWU7XG4gICAgICAgIHRoaXMuYWRqdXN0KGVsdCk7XG4gICAgICAgIHJldHVybiBlbHQ7XG4gICAgfVxuICAgIGFkanVzdChlbHQpIHtcbiAgICAgICAgZWx0LnN0eWxlLmxlZnQgPSB0aGlzLmxlZnQgKyBcInB4XCI7XG4gICAgICAgIGVsdC5zdHlsZS50b3AgPSB0aGlzLnRvcCArIFwicHhcIjtcbiAgICAgICAgaWYgKHRoaXMud2lkdGggPj0gMClcbiAgICAgICAgICAgIGVsdC5zdHlsZS53aWR0aCA9IHRoaXMud2lkdGggKyBcInB4XCI7XG4gICAgICAgIGVsdC5zdHlsZS5oZWlnaHQgPSB0aGlzLmhlaWdodCArIFwicHhcIjtcbiAgICB9XG4gICAgZXEocCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sZWZ0ID09IHAubGVmdCAmJiB0aGlzLnRvcCA9PSBwLnRvcCAmJiB0aGlzLndpZHRoID09IHAud2lkdGggJiYgdGhpcy5oZWlnaHQgPT0gcC5oZWlnaHQgJiZcbiAgICAgICAgICAgIHRoaXMuY2xhc3NOYW1lID09IHAuY2xhc3NOYW1lO1xuICAgIH1cbn1cbmNvbnN0IGRyYXdTZWxlY3Rpb25QbHVnaW4gPSAvKkBfX1BVUkVfXyovVmlld1BsdWdpbi5mcm9tQ2xhc3MoY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgdGhpcy5yYW5nZVBpZWNlcyA9IFtdO1xuICAgICAgICB0aGlzLmN1cnNvcnMgPSBbXTtcbiAgICAgICAgdGhpcy5tZWFzdXJlUmVxID0geyByZWFkOiB0aGlzLnJlYWRQb3MuYmluZCh0aGlzKSwgd3JpdGU6IHRoaXMuZHJhd1NlbC5iaW5kKHRoaXMpIH07XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uTGF5ZXIgPSB2aWV3LnNjcm9sbERPTS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25MYXllci5jbGFzc05hbWUgPSBcImNtLXNlbGVjdGlvbkxheWVyXCI7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uTGF5ZXIuc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgXCJ0cnVlXCIpO1xuICAgICAgICB0aGlzLmN1cnNvckxheWVyID0gdmlldy5zY3JvbGxET00uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSk7XG4gICAgICAgIHRoaXMuY3Vyc29yTGF5ZXIuY2xhc3NOYW1lID0gXCJjbS1jdXJzb3JMYXllclwiO1xuICAgICAgICB0aGlzLmN1cnNvckxheWVyLnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgdmlldy5yZXF1ZXN0TWVhc3VyZSh0aGlzLm1lYXN1cmVSZXEpO1xuICAgICAgICB0aGlzLnNldEJsaW5rUmF0ZSgpO1xuICAgIH1cbiAgICBzZXRCbGlua1JhdGUoKSB7XG4gICAgICAgIHRoaXMuY3Vyc29yTGF5ZXIuc3R5bGUuYW5pbWF0aW9uRHVyYXRpb24gPSB0aGlzLnZpZXcuc3RhdGUuZmFjZXQoc2VsZWN0aW9uQ29uZmlnKS5jdXJzb3JCbGlua1JhdGUgKyBcIm1zXCI7XG4gICAgfVxuICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgbGV0IGNvbmZDaGFuZ2VkID0gdXBkYXRlLnN0YXJ0U3RhdGUuZmFjZXQoc2VsZWN0aW9uQ29uZmlnKSAhPSB1cGRhdGUuc3RhdGUuZmFjZXQoc2VsZWN0aW9uQ29uZmlnKTtcbiAgICAgICAgaWYgKGNvbmZDaGFuZ2VkIHx8IHVwZGF0ZS5zZWxlY3Rpb25TZXQgfHwgdXBkYXRlLmdlb21ldHJ5Q2hhbmdlZCB8fCB1cGRhdGUudmlld3BvcnRDaGFuZ2VkKVxuICAgICAgICAgICAgdGhpcy52aWV3LnJlcXVlc3RNZWFzdXJlKHRoaXMubWVhc3VyZVJlcSk7XG4gICAgICAgIGlmICh1cGRhdGUudHJhbnNhY3Rpb25zLnNvbWUodHIgPT4gdHIuc2Nyb2xsSW50b1ZpZXcpKVxuICAgICAgICAgICAgdGhpcy5jdXJzb3JMYXllci5zdHlsZS5hbmltYXRpb25OYW1lID0gdGhpcy5jdXJzb3JMYXllci5zdHlsZS5hbmltYXRpb25OYW1lID09IFwiY20tYmxpbmtcIiA/IFwiY20tYmxpbmsyXCIgOiBcImNtLWJsaW5rXCI7XG4gICAgICAgIGlmIChjb25mQ2hhbmdlZClcbiAgICAgICAgICAgIHRoaXMuc2V0QmxpbmtSYXRlKCk7XG4gICAgfVxuICAgIHJlYWRQb3MoKSB7XG4gICAgICAgIGxldCB7IHN0YXRlIH0gPSB0aGlzLnZpZXcsIGNvbmYgPSBzdGF0ZS5mYWNldChzZWxlY3Rpb25Db25maWcpO1xuICAgICAgICBsZXQgcmFuZ2VQaWVjZXMgPSBzdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzLm1hcChyID0+IHIuZW1wdHkgPyBbXSA6IG1lYXN1cmVSYW5nZSh0aGlzLnZpZXcsIHIpKS5yZWR1Y2UoKGEsIGIpID0+IGEuY29uY2F0KGIpKTtcbiAgICAgICAgbGV0IGN1cnNvcnMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgciBvZiBzdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzKSB7XG4gICAgICAgICAgICBsZXQgcHJpbSA9IHIgPT0gc3RhdGUuc2VsZWN0aW9uLm1haW47XG4gICAgICAgICAgICBpZiAoci5lbXB0eSA/ICFwcmltIHx8IENhbkhpZGVQcmltYXJ5IDogY29uZi5kcmF3UmFuZ2VDdXJzb3IpIHtcbiAgICAgICAgICAgICAgICBsZXQgcGllY2UgPSBtZWFzdXJlQ3Vyc29yKHRoaXMudmlldywgciwgcHJpbSk7XG4gICAgICAgICAgICAgICAgaWYgKHBpZWNlKVxuICAgICAgICAgICAgICAgICAgICBjdXJzb3JzLnB1c2gocGllY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHJhbmdlUGllY2VzLCBjdXJzb3JzIH07XG4gICAgfVxuICAgIGRyYXdTZWwoeyByYW5nZVBpZWNlcywgY3Vyc29ycyB9KSB7XG4gICAgICAgIGlmIChyYW5nZVBpZWNlcy5sZW5ndGggIT0gdGhpcy5yYW5nZVBpZWNlcy5sZW5ndGggfHwgcmFuZ2VQaWVjZXMuc29tZSgocCwgaSkgPT4gIXAuZXEodGhpcy5yYW5nZVBpZWNlc1tpXSkpKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbkxheWVyLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICAgICAgICAgIGZvciAobGV0IHAgb2YgcmFuZ2VQaWVjZXMpXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25MYXllci5hcHBlbmRDaGlsZChwLmRyYXcoKSk7XG4gICAgICAgICAgICB0aGlzLnJhbmdlUGllY2VzID0gcmFuZ2VQaWVjZXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN1cnNvcnMubGVuZ3RoICE9IHRoaXMuY3Vyc29ycy5sZW5ndGggfHwgY3Vyc29ycy5zb21lKChjLCBpKSA9PiAhYy5lcSh0aGlzLmN1cnNvcnNbaV0pKSkge1xuICAgICAgICAgICAgbGV0IG9sZEN1cnNvcnMgPSB0aGlzLmN1cnNvckxheWVyLmNoaWxkcmVuO1xuICAgICAgICAgICAgaWYgKG9sZEN1cnNvcnMubGVuZ3RoICE9PSBjdXJzb3JzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3Vyc29yTGF5ZXIudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYyBvZiBjdXJzb3JzKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnNvckxheWVyLmFwcGVuZENoaWxkKGMuZHJhdygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGN1cnNvcnMuZm9yRWFjaCgoYywgaWR4KSA9PiBjLmFkanVzdChvbGRDdXJzb3JzW2lkeF0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY3Vyc29ycyA9IGN1cnNvcnM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25MYXllci5yZW1vdmUoKTtcbiAgICAgICAgdGhpcy5jdXJzb3JMYXllci5yZW1vdmUoKTtcbiAgICB9XG59KTtcbmNvbnN0IHRoZW1lU3BlYyA9IHtcbiAgICBcIi5jbS1saW5lXCI6IHtcbiAgICAgICAgXCImIDo6c2VsZWN0aW9uXCI6IHsgYmFja2dyb3VuZENvbG9yOiBcInRyYW5zcGFyZW50ICFpbXBvcnRhbnRcIiB9LFxuICAgICAgICBcIiY6OnNlbGVjdGlvblwiOiB7IGJhY2tncm91bmRDb2xvcjogXCJ0cmFuc3BhcmVudCAhaW1wb3J0YW50XCIgfVxuICAgIH1cbn07XG5pZiAoQ2FuSGlkZVByaW1hcnkpXG4gICAgdGhlbWVTcGVjW1wiLmNtLWxpbmVcIl0uY2FyZXRDb2xvciA9IFwidHJhbnNwYXJlbnQgIWltcG9ydGFudFwiO1xuY29uc3QgaGlkZU5hdGl2ZVNlbGVjdGlvbiA9IC8qQF9fUFVSRV9fKi9QcmVjLmhpZ2hlc3QoLypAX19QVVJFX18qL0VkaXRvclZpZXcudGhlbWUodGhlbWVTcGVjKSk7XG5mdW5jdGlvbiBnZXRCYXNlKHZpZXcpIHtcbiAgICBsZXQgcmVjdCA9IHZpZXcuc2Nyb2xsRE9NLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGxldCBsZWZ0ID0gdmlldy50ZXh0RGlyZWN0aW9uID09IERpcmVjdGlvbi5MVFIgPyByZWN0LmxlZnQgOiByZWN0LnJpZ2h0IC0gdmlldy5zY3JvbGxET00uY2xpZW50V2lkdGg7XG4gICAgcmV0dXJuIHsgbGVmdDogbGVmdCAtIHZpZXcuc2Nyb2xsRE9NLnNjcm9sbExlZnQsIHRvcDogcmVjdC50b3AgLSB2aWV3LnNjcm9sbERPTS5zY3JvbGxUb3AgfTtcbn1cbmZ1bmN0aW9uIHdyYXBwZWRMaW5lKHZpZXcsIHBvcywgaW5zaWRlKSB7XG4gICAgbGV0IHJhbmdlID0gRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihwb3MpO1xuICAgIHJldHVybiB7IGZyb206IE1hdGgubWF4KGluc2lkZS5mcm9tLCB2aWV3Lm1vdmVUb0xpbmVCb3VuZGFyeShyYW5nZSwgZmFsc2UsIHRydWUpLmZyb20pLFxuICAgICAgICB0bzogTWF0aC5taW4oaW5zaWRlLnRvLCB2aWV3Lm1vdmVUb0xpbmVCb3VuZGFyeShyYW5nZSwgdHJ1ZSwgdHJ1ZSkuZnJvbSksXG4gICAgICAgIHR5cGU6IEJsb2NrVHlwZS5UZXh0IH07XG59XG5mdW5jdGlvbiBibG9ja0F0KHZpZXcsIHBvcykge1xuICAgIGxldCBsaW5lID0gdmlldy5saW5lQmxvY2tBdChwb3MpO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGxpbmUudHlwZSkpXG4gICAgICAgIGZvciAobGV0IGwgb2YgbGluZS50eXBlKSB7XG4gICAgICAgICAgICBpZiAobC50byA+IHBvcyB8fCBsLnRvID09IHBvcyAmJiAobC50byA9PSBsaW5lLnRvIHx8IGwudHlwZSA9PSBCbG9ja1R5cGUuVGV4dCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGw7XG4gICAgICAgIH1cbiAgICByZXR1cm4gbGluZTtcbn1cbmZ1bmN0aW9uIG1lYXN1cmVSYW5nZSh2aWV3LCByYW5nZSkge1xuICAgIGlmIChyYW5nZS50byA8PSB2aWV3LnZpZXdwb3J0LmZyb20gfHwgcmFuZ2UuZnJvbSA+PSB2aWV3LnZpZXdwb3J0LnRvKVxuICAgICAgICByZXR1cm4gW107XG4gICAgbGV0IGZyb20gPSBNYXRoLm1heChyYW5nZS5mcm9tLCB2aWV3LnZpZXdwb3J0LmZyb20pLCB0byA9IE1hdGgubWluKHJhbmdlLnRvLCB2aWV3LnZpZXdwb3J0LnRvKTtcbiAgICBsZXQgbHRyID0gdmlldy50ZXh0RGlyZWN0aW9uID09IERpcmVjdGlvbi5MVFI7XG4gICAgbGV0IGNvbnRlbnQgPSB2aWV3LmNvbnRlbnRET00sIGNvbnRlbnRSZWN0ID0gY29udGVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgYmFzZSA9IGdldEJhc2Uodmlldyk7XG4gICAgbGV0IGxpbmVTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGNvbnRlbnQuZmlyc3RDaGlsZCk7XG4gICAgbGV0IGxlZnRTaWRlID0gY29udGVudFJlY3QubGVmdCArIHBhcnNlSW50KGxpbmVTdHlsZS5wYWRkaW5nTGVmdCkgKyBNYXRoLm1pbigwLCBwYXJzZUludChsaW5lU3R5bGUudGV4dEluZGVudCkpO1xuICAgIGxldCByaWdodFNpZGUgPSBjb250ZW50UmVjdC5yaWdodCAtIHBhcnNlSW50KGxpbmVTdHlsZS5wYWRkaW5nUmlnaHQpO1xuICAgIGxldCBzdGFydEJsb2NrID0gYmxvY2tBdCh2aWV3LCBmcm9tKSwgZW5kQmxvY2sgPSBibG9ja0F0KHZpZXcsIHRvKTtcbiAgICBsZXQgdmlzdWFsU3RhcnQgPSBzdGFydEJsb2NrLnR5cGUgPT0gQmxvY2tUeXBlLlRleHQgPyBzdGFydEJsb2NrIDogbnVsbDtcbiAgICBsZXQgdmlzdWFsRW5kID0gZW5kQmxvY2sudHlwZSA9PSBCbG9ja1R5cGUuVGV4dCA/IGVuZEJsb2NrIDogbnVsbDtcbiAgICBpZiAodmlldy5saW5lV3JhcHBpbmcpIHtcbiAgICAgICAgaWYgKHZpc3VhbFN0YXJ0KVxuICAgICAgICAgICAgdmlzdWFsU3RhcnQgPSB3cmFwcGVkTGluZSh2aWV3LCBmcm9tLCB2aXN1YWxTdGFydCk7XG4gICAgICAgIGlmICh2aXN1YWxFbmQpXG4gICAgICAgICAgICB2aXN1YWxFbmQgPSB3cmFwcGVkTGluZSh2aWV3LCB0bywgdmlzdWFsRW5kKTtcbiAgICB9XG4gICAgaWYgKHZpc3VhbFN0YXJ0ICYmIHZpc3VhbEVuZCAmJiB2aXN1YWxTdGFydC5mcm9tID09IHZpc3VhbEVuZC5mcm9tKSB7XG4gICAgICAgIHJldHVybiBwaWVjZXMoZHJhd0ZvckxpbmUocmFuZ2UuZnJvbSwgcmFuZ2UudG8sIHZpc3VhbFN0YXJ0KSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsZXQgdG9wID0gdmlzdWFsU3RhcnQgPyBkcmF3Rm9yTGluZShyYW5nZS5mcm9tLCBudWxsLCB2aXN1YWxTdGFydCkgOiBkcmF3Rm9yV2lkZ2V0KHN0YXJ0QmxvY2ssIGZhbHNlKTtcbiAgICAgICAgbGV0IGJvdHRvbSA9IHZpc3VhbEVuZCA/IGRyYXdGb3JMaW5lKG51bGwsIHJhbmdlLnRvLCB2aXN1YWxFbmQpIDogZHJhd0ZvcldpZGdldChlbmRCbG9jaywgdHJ1ZSk7XG4gICAgICAgIGxldCBiZXR3ZWVuID0gW107XG4gICAgICAgIGlmICgodmlzdWFsU3RhcnQgfHwgc3RhcnRCbG9jaykudG8gPCAodmlzdWFsRW5kIHx8IGVuZEJsb2NrKS5mcm9tIC0gMSlcbiAgICAgICAgICAgIGJldHdlZW4ucHVzaChwaWVjZShsZWZ0U2lkZSwgdG9wLmJvdHRvbSwgcmlnaHRTaWRlLCBib3R0b20udG9wKSk7XG4gICAgICAgIGVsc2UgaWYgKHRvcC5ib3R0b20gPCBib3R0b20udG9wICYmIHZpZXcuZWxlbWVudEF0SGVpZ2h0KCh0b3AuYm90dG9tICsgYm90dG9tLnRvcCkgLyAyKS50eXBlID09IEJsb2NrVHlwZS5UZXh0KVxuICAgICAgICAgICAgdG9wLmJvdHRvbSA9IGJvdHRvbS50b3AgPSAodG9wLmJvdHRvbSArIGJvdHRvbS50b3ApIC8gMjtcbiAgICAgICAgcmV0dXJuIHBpZWNlcyh0b3ApLmNvbmNhdChiZXR3ZWVuKS5jb25jYXQocGllY2VzKGJvdHRvbSkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwaWVjZShsZWZ0LCB0b3AsIHJpZ2h0LCBib3R0b20pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQaWVjZShsZWZ0IC0gYmFzZS5sZWZ0LCB0b3AgLSBiYXNlLnRvcCAtIDAuMDEgLyogQy5FcHNpbG9uICovLCByaWdodCAtIGxlZnQsIGJvdHRvbSAtIHRvcCArIDAuMDEgLyogQy5FcHNpbG9uICovLCBcImNtLXNlbGVjdGlvbkJhY2tncm91bmRcIik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBpZWNlcyh7IHRvcCwgYm90dG9tLCBob3Jpem9udGFsIH0pIHtcbiAgICAgICAgbGV0IHBpZWNlcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhvcml6b250YWwubGVuZ3RoOyBpICs9IDIpXG4gICAgICAgICAgICBwaWVjZXMucHVzaChwaWVjZShob3Jpem9udGFsW2ldLCB0b3AsIGhvcml6b250YWxbaSArIDFdLCBib3R0b20pKTtcbiAgICAgICAgcmV0dXJuIHBpZWNlcztcbiAgICB9XG4gICAgLy8gR2V0cyBwYXNzZWQgZnJvbS90byBpbiBsaW5lLWxvY2FsIHBvc2l0aW9uc1xuICAgIGZ1bmN0aW9uIGRyYXdGb3JMaW5lKGZyb20sIHRvLCBsaW5lKSB7XG4gICAgICAgIGxldCB0b3AgPSAxZTksIGJvdHRvbSA9IC0xZTksIGhvcml6b250YWwgPSBbXTtcbiAgICAgICAgZnVuY3Rpb24gYWRkU3Bhbihmcm9tLCBmcm9tT3BlbiwgdG8sIHRvT3BlbiwgZGlyKSB7XG4gICAgICAgICAgICAvLyBQYXNzaW5nIDIvLTIgaXMgYSBrbHVkZ2UgdG8gZm9yY2UgdGhlIHZpZXcgdG8gcmV0dXJuXG4gICAgICAgICAgICAvLyBjb29yZGluYXRlcyBvbiB0aGUgcHJvcGVyIHNpZGUgb2YgYmxvY2sgd2lkZ2V0cywgc2luY2VcbiAgICAgICAgICAgIC8vIG5vcm1hbGl6aW5nIHRoZSBzaWRlIHRoZXJlLCB0aG91Z2ggYXBwcm9wcmlhdGUgZm9yIG1vc3RcbiAgICAgICAgICAgIC8vIGNvb3Jkc0F0UG9zIHF1ZXJpZXMsIHdvdWxkIGJyZWFrIHNlbGVjdGlvbiBkcmF3aW5nLlxuICAgICAgICAgICAgbGV0IGZyb21Db29yZHMgPSB2aWV3LmNvb3Jkc0F0UG9zKGZyb20sIChmcm9tID09IGxpbmUudG8gPyAtMiA6IDIpKTtcbiAgICAgICAgICAgIGxldCB0b0Nvb3JkcyA9IHZpZXcuY29vcmRzQXRQb3ModG8sICh0byA9PSBsaW5lLmZyb20gPyAyIDogLTIpKTtcbiAgICAgICAgICAgIHRvcCA9IE1hdGgubWluKGZyb21Db29yZHMudG9wLCB0b0Nvb3Jkcy50b3AsIHRvcCk7XG4gICAgICAgICAgICBib3R0b20gPSBNYXRoLm1heChmcm9tQ29vcmRzLmJvdHRvbSwgdG9Db29yZHMuYm90dG9tLCBib3R0b20pO1xuICAgICAgICAgICAgaWYgKGRpciA9PSBEaXJlY3Rpb24uTFRSKVxuICAgICAgICAgICAgICAgIGhvcml6b250YWwucHVzaChsdHIgJiYgZnJvbU9wZW4gPyBsZWZ0U2lkZSA6IGZyb21Db29yZHMubGVmdCwgbHRyICYmIHRvT3BlbiA/IHJpZ2h0U2lkZSA6IHRvQ29vcmRzLnJpZ2h0KTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBob3Jpem9udGFsLnB1c2goIWx0ciAmJiB0b09wZW4gPyBsZWZ0U2lkZSA6IHRvQ29vcmRzLmxlZnQsICFsdHIgJiYgZnJvbU9wZW4gPyByaWdodFNpZGUgOiBmcm9tQ29vcmRzLnJpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc3RhcnQgPSBmcm9tICE9PSBudWxsICYmIGZyb20gIT09IHZvaWQgMCA/IGZyb20gOiBsaW5lLmZyb20sIGVuZCA9IHRvICE9PSBudWxsICYmIHRvICE9PSB2b2lkIDAgPyB0byA6IGxpbmUudG87XG4gICAgICAgIC8vIFNwbGl0IHRoZSByYW5nZSBieSB2aXNpYmxlIHJhbmdlIGFuZCBkb2N1bWVudCBsaW5lXG4gICAgICAgIGZvciAobGV0IHIgb2Ygdmlldy52aXNpYmxlUmFuZ2VzKVxuICAgICAgICAgICAgaWYgKHIudG8gPiBzdGFydCAmJiByLmZyb20gPCBlbmQpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBwb3MgPSBNYXRoLm1heChyLmZyb20sIHN0YXJ0KSwgZW5kUG9zID0gTWF0aC5taW4oci50bywgZW5kKTs7KSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBkb2NMaW5lID0gdmlldy5zdGF0ZS5kb2MubGluZUF0KHBvcyk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHNwYW4gb2Ygdmlldy5iaWRpU3BhbnMoZG9jTGluZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcGFuRnJvbSA9IHNwYW4uZnJvbSArIGRvY0xpbmUuZnJvbSwgc3BhblRvID0gc3Bhbi50byArIGRvY0xpbmUuZnJvbTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcGFuRnJvbSA+PSBlbmRQb3MpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3BhblRvID4gcG9zKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFNwYW4oTWF0aC5tYXgoc3BhbkZyb20sIHBvcyksIGZyb20gPT0gbnVsbCAmJiBzcGFuRnJvbSA8PSBzdGFydCwgTWF0aC5taW4oc3BhblRvLCBlbmRQb3MpLCB0byA9PSBudWxsICYmIHNwYW5UbyA+PSBlbmQsIHNwYW4uZGlyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwb3MgPSBkb2NMaW5lLnRvICsgMTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvcyA+PSBlbmRQb3MpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIGlmIChob3Jpem9udGFsLmxlbmd0aCA9PSAwKVxuICAgICAgICAgICAgYWRkU3BhbihzdGFydCwgZnJvbSA9PSBudWxsLCBlbmQsIHRvID09IG51bGwsIHZpZXcudGV4dERpcmVjdGlvbik7XG4gICAgICAgIHJldHVybiB7IHRvcCwgYm90dG9tLCBob3Jpem9udGFsIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRyYXdGb3JXaWRnZXQoYmxvY2ssIHRvcCkge1xuICAgICAgICBsZXQgeSA9IGNvbnRlbnRSZWN0LnRvcCArICh0b3AgPyBibG9jay50b3AgOiBibG9jay5ib3R0b20pO1xuICAgICAgICByZXR1cm4geyB0b3A6IHksIGJvdHRvbTogeSwgaG9yaXpvbnRhbDogW10gfTtcbiAgICB9XG59XG5mdW5jdGlvbiBtZWFzdXJlQ3Vyc29yKHZpZXcsIGN1cnNvciwgcHJpbWFyeSkge1xuICAgIGxldCBwb3MgPSB2aWV3LmNvb3Jkc0F0UG9zKGN1cnNvci5oZWFkLCBjdXJzb3IuYXNzb2MgfHwgMSk7XG4gICAgaWYgKCFwb3MpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGxldCBiYXNlID0gZ2V0QmFzZSh2aWV3KTtcbiAgICByZXR1cm4gbmV3IFBpZWNlKHBvcy5sZWZ0IC0gYmFzZS5sZWZ0LCBwb3MudG9wIC0gYmFzZS50b3AsIC0xLCBwb3MuYm90dG9tIC0gcG9zLnRvcCwgcHJpbWFyeSA/IFwiY20tY3Vyc29yIGNtLWN1cnNvci1wcmltYXJ5XCIgOiBcImNtLWN1cnNvciBjbS1jdXJzb3Itc2Vjb25kYXJ5XCIpO1xufVxuXG5jb25zdCBzZXREcm9wQ3Vyc29yUG9zID0gLypAX19QVVJFX18qL1N0YXRlRWZmZWN0LmRlZmluZSh7XG4gICAgbWFwKHBvcywgbWFwcGluZykgeyByZXR1cm4gcG9zID09IG51bGwgPyBudWxsIDogbWFwcGluZy5tYXBQb3MocG9zKTsgfVxufSk7XG5jb25zdCBkcm9wQ3Vyc29yUG9zID0gLypAX19QVVJFX18qL1N0YXRlRmllbGQuZGVmaW5lKHtcbiAgICBjcmVhdGUoKSB7IHJldHVybiBudWxsOyB9LFxuICAgIHVwZGF0ZShwb3MsIHRyKSB7XG4gICAgICAgIGlmIChwb3MgIT0gbnVsbClcbiAgICAgICAgICAgIHBvcyA9IHRyLmNoYW5nZXMubWFwUG9zKHBvcyk7XG4gICAgICAgIHJldHVybiB0ci5lZmZlY3RzLnJlZHVjZSgocG9zLCBlKSA9PiBlLmlzKHNldERyb3BDdXJzb3JQb3MpID8gZS52YWx1ZSA6IHBvcywgcG9zKTtcbiAgICB9XG59KTtcbmNvbnN0IGRyYXdEcm9wQ3Vyc29yID0gLypAX19QVVJFX18qL1ZpZXdQbHVnaW4uZnJvbUNsYXNzKGNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3KSB7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gbnVsbDtcbiAgICAgICAgdGhpcy5tZWFzdXJlUmVxID0geyByZWFkOiB0aGlzLnJlYWRQb3MuYmluZCh0aGlzKSwgd3JpdGU6IHRoaXMuZHJhd0N1cnNvci5iaW5kKHRoaXMpIH07XG4gICAgfVxuICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBsZXQgY3Vyc29yUG9zID0gdXBkYXRlLnN0YXRlLmZpZWxkKGRyb3BDdXJzb3JQb3MpO1xuICAgICAgICBpZiAoY3Vyc29yUG9zID09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnNvciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgKF9hID0gdGhpcy5jdXJzb3IpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnNvciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY3Vyc29yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJzb3IgPSB0aGlzLnZpZXcuc2Nyb2xsRE9NLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3Vyc29yLmNsYXNzTmFtZSA9IFwiY20tZHJvcEN1cnNvclwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHVwZGF0ZS5zdGFydFN0YXRlLmZpZWxkKGRyb3BDdXJzb3JQb3MpICE9IGN1cnNvclBvcyB8fCB1cGRhdGUuZG9jQ2hhbmdlZCB8fCB1cGRhdGUuZ2VvbWV0cnlDaGFuZ2VkKVxuICAgICAgICAgICAgICAgIHRoaXMudmlldy5yZXF1ZXN0TWVhc3VyZSh0aGlzLm1lYXN1cmVSZXEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlYWRQb3MoKSB7XG4gICAgICAgIGxldCBwb3MgPSB0aGlzLnZpZXcuc3RhdGUuZmllbGQoZHJvcEN1cnNvclBvcyk7XG4gICAgICAgIGxldCByZWN0ID0gcG9zICE9IG51bGwgJiYgdGhpcy52aWV3LmNvb3Jkc0F0UG9zKHBvcyk7XG4gICAgICAgIGlmICghcmVjdClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBsZXQgb3V0ZXIgPSB0aGlzLnZpZXcuc2Nyb2xsRE9NLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbGVmdDogcmVjdC5sZWZ0IC0gb3V0ZXIubGVmdCArIHRoaXMudmlldy5zY3JvbGxET00uc2Nyb2xsTGVmdCxcbiAgICAgICAgICAgIHRvcDogcmVjdC50b3AgLSBvdXRlci50b3AgKyB0aGlzLnZpZXcuc2Nyb2xsRE9NLnNjcm9sbFRvcCxcbiAgICAgICAgICAgIGhlaWdodDogcmVjdC5ib3R0b20gLSByZWN0LnRvcFxuICAgICAgICB9O1xuICAgIH1cbiAgICBkcmF3Q3Vyc29yKHBvcykge1xuICAgICAgICBpZiAodGhpcy5jdXJzb3IpIHtcbiAgICAgICAgICAgIGlmIChwb3MpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnNvci5zdHlsZS5sZWZ0ID0gcG9zLmxlZnQgKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJzb3Iuc3R5bGUudG9wID0gcG9zLnRvcCArIFwicHhcIjtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnNvci5zdHlsZS5oZWlnaHQgPSBwb3MuaGVpZ2h0ICsgXCJweFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJzb3Iuc3R5bGUubGVmdCA9IFwiLTEwMDAwMHB4XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgaWYgKHRoaXMuY3Vyc29yKVxuICAgICAgICAgICAgdGhpcy5jdXJzb3IucmVtb3ZlKCk7XG4gICAgfVxuICAgIHNldERyb3BQb3MocG9zKSB7XG4gICAgICAgIGlmICh0aGlzLnZpZXcuc3RhdGUuZmllbGQoZHJvcEN1cnNvclBvcykgIT0gcG9zKVxuICAgICAgICAgICAgdGhpcy52aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogc2V0RHJvcEN1cnNvclBvcy5vZihwb3MpIH0pO1xuICAgIH1cbn0sIHtcbiAgICBldmVudEhhbmRsZXJzOiB7XG4gICAgICAgIGRyYWdvdmVyKGV2ZW50KSB7XG4gICAgICAgICAgICB0aGlzLnNldERyb3BQb3ModGhpcy52aWV3LnBvc0F0Q29vcmRzKHsgeDogZXZlbnQuY2xpZW50WCwgeTogZXZlbnQuY2xpZW50WSB9KSk7XG4gICAgICAgIH0sXG4gICAgICAgIGRyYWdsZWF2ZShldmVudCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PSB0aGlzLnZpZXcuY29udGVudERPTSB8fCAhdGhpcy52aWV3LmNvbnRlbnRET00uY29udGFpbnMoZXZlbnQucmVsYXRlZFRhcmdldCkpXG4gICAgICAgICAgICAgICAgdGhpcy5zZXREcm9wUG9zKG51bGwpO1xuICAgICAgICB9LFxuICAgICAgICBkcmFnZW5kKCkge1xuICAgICAgICAgICAgdGhpcy5zZXREcm9wUG9zKG51bGwpO1xuICAgICAgICB9LFxuICAgICAgICBkcm9wKCkge1xuICAgICAgICAgICAgdGhpcy5zZXREcm9wUG9zKG51bGwpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG4vKipcbkRyYXdzIGEgY3Vyc29yIGF0IHRoZSBjdXJyZW50IGRyb3AgcG9zaXRpb24gd2hlbiBzb21ldGhpbmcgaXNcbmRyYWdnZWQgb3ZlciB0aGUgZWRpdG9yLlxuKi9cbmZ1bmN0aW9uIGRyb3BDdXJzb3IoKSB7XG4gICAgcmV0dXJuIFtkcm9wQ3Vyc29yUG9zLCBkcmF3RHJvcEN1cnNvcl07XG59XG5cbmZ1bmN0aW9uIGl0ZXJNYXRjaGVzKGRvYywgcmUsIGZyb20sIHRvLCBmKSB7XG4gICAgcmUubGFzdEluZGV4ID0gMDtcbiAgICBmb3IgKGxldCBjdXJzb3IgPSBkb2MuaXRlclJhbmdlKGZyb20sIHRvKSwgcG9zID0gZnJvbSwgbTsgIWN1cnNvci5uZXh0KCkuZG9uZTsgcG9zICs9IGN1cnNvci52YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgaWYgKCFjdXJzb3IubGluZUJyZWFrKVxuICAgICAgICAgICAgd2hpbGUgKG0gPSByZS5leGVjKGN1cnNvci52YWx1ZSkpXG4gICAgICAgICAgICAgICAgZihwb3MgKyBtLmluZGV4LCBtKTtcbiAgICB9XG59XG5mdW5jdGlvbiBtYXRjaFJhbmdlcyh2aWV3LCBtYXhMZW5ndGgpIHtcbiAgICBsZXQgdmlzaWJsZSA9IHZpZXcudmlzaWJsZVJhbmdlcztcbiAgICBpZiAodmlzaWJsZS5sZW5ndGggPT0gMSAmJiB2aXNpYmxlWzBdLmZyb20gPT0gdmlldy52aWV3cG9ydC5mcm9tICYmXG4gICAgICAgIHZpc2libGVbMF0udG8gPT0gdmlldy52aWV3cG9ydC50bylcbiAgICAgICAgcmV0dXJuIHZpc2libGU7XG4gICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgIGZvciAobGV0IHsgZnJvbSwgdG8gfSBvZiB2aXNpYmxlKSB7XG4gICAgICAgIGZyb20gPSBNYXRoLm1heCh2aWV3LnN0YXRlLmRvYy5saW5lQXQoZnJvbSkuZnJvbSwgZnJvbSAtIG1heExlbmd0aCk7XG4gICAgICAgIHRvID0gTWF0aC5taW4odmlldy5zdGF0ZS5kb2MubGluZUF0KHRvKS50bywgdG8gKyBtYXhMZW5ndGgpO1xuICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCAmJiByZXN1bHRbcmVzdWx0Lmxlbmd0aCAtIDFdLnRvID49IGZyb20pXG4gICAgICAgICAgICByZXN1bHRbcmVzdWx0Lmxlbmd0aCAtIDFdLnRvID0gdG87XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHsgZnJvbSwgdG8gfSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG4vKipcbkhlbHBlciBjbGFzcyB1c2VkIHRvIG1ha2UgaXQgZWFzaWVyIHRvIG1haW50YWluIGRlY29yYXRpb25zIG9uXG52aXNpYmxlIGNvZGUgdGhhdCBtYXRjaGVzIGEgZ2l2ZW4gcmVndWxhciBleHByZXNzaW9uLiBUbyBiZSB1c2VkXG5pbiBhIFt2aWV3IHBsdWdpbl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LlZpZXdQbHVnaW4pLiBJbnN0YW5jZXMgb2YgdGhpcyBvYmplY3RcbnJlcHJlc2VudCBhIG1hdGNoaW5nIGNvbmZpZ3VyYXRpb24uXG4qL1xuY2xhc3MgTWF0Y2hEZWNvcmF0b3Ige1xuICAgIC8qKlxuICAgIENyZWF0ZSBhIGRlY29yYXRvci5cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICBjb25zdCB7IHJlZ2V4cCwgZGVjb3JhdGlvbiwgZGVjb3JhdGUsIGJvdW5kYXJ5LCBtYXhMZW5ndGggPSAxMDAwIH0gPSBjb25maWc7XG4gICAgICAgIGlmICghcmVnZXhwLmdsb2JhbClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiVGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiBnaXZlbiB0byBNYXRjaERlY29yYXRvciBzaG91bGQgaGF2ZSBpdHMgJ2cnIGZsYWcgc2V0XCIpO1xuICAgICAgICB0aGlzLnJlZ2V4cCA9IHJlZ2V4cDtcbiAgICAgICAgaWYgKGRlY29yYXRlKSB7XG4gICAgICAgICAgICB0aGlzLmFkZE1hdGNoID0gKG1hdGNoLCB2aWV3LCBmcm9tLCBhZGQpID0+IGRlY29yYXRlKGFkZCwgZnJvbSwgZnJvbSArIG1hdGNoWzBdLmxlbmd0aCwgbWF0Y2gsIHZpZXcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBkZWNvcmF0aW9uID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhpcy5hZGRNYXRjaCA9IChtYXRjaCwgdmlldywgZnJvbSwgYWRkKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGRlY28gPSBkZWNvcmF0aW9uKG1hdGNoLCB2aWV3LCBmcm9tKTtcbiAgICAgICAgICAgICAgICBpZiAoZGVjbylcbiAgICAgICAgICAgICAgICAgICAgYWRkKGZyb20sIGZyb20gKyBtYXRjaFswXS5sZW5ndGgsIGRlY28pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkZWNvcmF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmFkZE1hdGNoID0gKG1hdGNoLCBfdmlldywgZnJvbSwgYWRkKSA9PiBhZGQoZnJvbSwgZnJvbSArIG1hdGNoWzBdLmxlbmd0aCwgZGVjb3JhdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkVpdGhlciAnZGVjb3JhdGUnIG9yICdkZWNvcmF0aW9uJyBzaG91bGQgYmUgcHJvdmlkZWQgdG8gTWF0Y2hEZWNvcmF0b3JcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ib3VuZGFyeSA9IGJvdW5kYXJ5O1xuICAgICAgICB0aGlzLm1heExlbmd0aCA9IG1heExlbmd0aDtcbiAgICB9XG4gICAgLyoqXG4gICAgQ29tcHV0ZSB0aGUgZnVsbCBzZXQgb2YgZGVjb3JhdGlvbnMgZm9yIG1hdGNoZXMgaW4gdGhlIGdpdmVuXG4gICAgdmlldydzIHZpZXdwb3J0LiBZb3UnbGwgd2FudCB0byBjYWxsIHRoaXMgd2hlbiBpbml0aWFsaXppbmcgeW91clxuICAgIHBsdWdpbi5cbiAgICAqL1xuICAgIGNyZWF0ZURlY28odmlldykge1xuICAgICAgICBsZXQgYnVpbGQgPSBuZXcgUmFuZ2VTZXRCdWlsZGVyKCksIGFkZCA9IGJ1aWxkLmFkZC5iaW5kKGJ1aWxkKTtcbiAgICAgICAgZm9yIChsZXQgeyBmcm9tLCB0byB9IG9mIG1hdGNoUmFuZ2VzKHZpZXcsIHRoaXMubWF4TGVuZ3RoKSlcbiAgICAgICAgICAgIGl0ZXJNYXRjaGVzKHZpZXcuc3RhdGUuZG9jLCB0aGlzLnJlZ2V4cCwgZnJvbSwgdG8sIChmcm9tLCBtKSA9PiB0aGlzLmFkZE1hdGNoKG0sIHZpZXcsIGZyb20sIGFkZCkpO1xuICAgICAgICByZXR1cm4gYnVpbGQuZmluaXNoKCk7XG4gICAgfVxuICAgIC8qKlxuICAgIFVwZGF0ZSBhIHNldCBvZiBkZWNvcmF0aW9ucyBmb3IgYSB2aWV3IHVwZGF0ZS4gYGRlY29gIF9tdXN0XyBiZVxuICAgIHRoZSBzZXQgb2YgZGVjb3JhdGlvbnMgcHJvZHVjZWQgYnkgX3RoaXNfIGBNYXRjaERlY29yYXRvcmAgZm9yXG4gICAgdGhlIHZpZXcgc3RhdGUgYmVmb3JlIHRoZSB1cGRhdGUuXG4gICAgKi9cbiAgICB1cGRhdGVEZWNvKHVwZGF0ZSwgZGVjbykge1xuICAgICAgICBsZXQgY2hhbmdlRnJvbSA9IDFlOSwgY2hhbmdlVG8gPSAtMTtcbiAgICAgICAgaWYgKHVwZGF0ZS5kb2NDaGFuZ2VkKVxuICAgICAgICAgICAgdXBkYXRlLmNoYW5nZXMuaXRlckNoYW5nZXMoKF9mLCBfdCwgZnJvbSwgdG8pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodG8gPiB1cGRhdGUudmlldy52aWV3cG9ydC5mcm9tICYmIGZyb20gPCB1cGRhdGUudmlldy52aWV3cG9ydC50bykge1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VGcm9tID0gTWF0aC5taW4oZnJvbSwgY2hhbmdlRnJvbSk7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZVRvID0gTWF0aC5tYXgodG8sIGNoYW5nZVRvKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgaWYgKHVwZGF0ZS52aWV3cG9ydENoYW5nZWQgfHwgY2hhbmdlVG8gLSBjaGFuZ2VGcm9tID4gMTAwMClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZURlY28odXBkYXRlLnZpZXcpO1xuICAgICAgICBpZiAoY2hhbmdlVG8gPiAtMSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZVJhbmdlKHVwZGF0ZS52aWV3LCBkZWNvLm1hcCh1cGRhdGUuY2hhbmdlcyksIGNoYW5nZUZyb20sIGNoYW5nZVRvKTtcbiAgICAgICAgcmV0dXJuIGRlY287XG4gICAgfVxuICAgIHVwZGF0ZVJhbmdlKHZpZXcsIGRlY28sIHVwZGF0ZUZyb20sIHVwZGF0ZVRvKSB7XG4gICAgICAgIGZvciAobGV0IHIgb2Ygdmlldy52aXNpYmxlUmFuZ2VzKSB7XG4gICAgICAgICAgICBsZXQgZnJvbSA9IE1hdGgubWF4KHIuZnJvbSwgdXBkYXRlRnJvbSksIHRvID0gTWF0aC5taW4oci50bywgdXBkYXRlVG8pO1xuICAgICAgICAgICAgaWYgKHRvID4gZnJvbSkge1xuICAgICAgICAgICAgICAgIGxldCBmcm9tTGluZSA9IHZpZXcuc3RhdGUuZG9jLmxpbmVBdChmcm9tKSwgdG9MaW5lID0gZnJvbUxpbmUudG8gPCB0byA/IHZpZXcuc3RhdGUuZG9jLmxpbmVBdCh0bykgOiBmcm9tTGluZTtcbiAgICAgICAgICAgICAgICBsZXQgc3RhcnQgPSBNYXRoLm1heChyLmZyb20sIGZyb21MaW5lLmZyb20pLCBlbmQgPSBNYXRoLm1pbihyLnRvLCB0b0xpbmUudG8pO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmJvdW5kYXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoOyBmcm9tID4gZnJvbUxpbmUuZnJvbTsgZnJvbS0tKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYm91bmRhcnkudGVzdChmcm9tTGluZS50ZXh0W2Zyb20gLSAxIC0gZnJvbUxpbmUuZnJvbV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSBmcm9tO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmb3IgKDsgdG8gPCB0b0xpbmUudG87IHRvKyspXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ib3VuZGFyeS50ZXN0KHRvTGluZS50ZXh0W3RvIC0gdG9MaW5lLmZyb21dKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZCA9IHRvO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgcmFuZ2VzID0gW10sIG07XG4gICAgICAgICAgICAgICAgbGV0IGFkZCA9IChmcm9tLCB0bywgZGVjbykgPT4gcmFuZ2VzLnB1c2goZGVjby5yYW5nZShmcm9tLCB0bykpO1xuICAgICAgICAgICAgICAgIGlmIChmcm9tTGluZSA9PSB0b0xpbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdleHAubGFzdEluZGV4ID0gc3RhcnQgLSBmcm9tTGluZS5mcm9tO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoKG0gPSB0aGlzLnJlZ2V4cC5leGVjKGZyb21MaW5lLnRleHQpKSAmJiBtLmluZGV4IDwgZW5kIC0gZnJvbUxpbmUuZnJvbSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkTWF0Y2gobSwgdmlldywgbS5pbmRleCArIGZyb21MaW5lLmZyb20sIGFkZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpdGVyTWF0Y2hlcyh2aWV3LnN0YXRlLmRvYywgdGhpcy5yZWdleHAsIHN0YXJ0LCBlbmQsIChmcm9tLCBtKSA9PiB0aGlzLmFkZE1hdGNoKG0sIHZpZXcsIGZyb20sIGFkZCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWNvID0gZGVjby51cGRhdGUoeyBmaWx0ZXJGcm9tOiBzdGFydCwgZmlsdGVyVG86IGVuZCwgZmlsdGVyOiAoZnJvbSwgdG8pID0+IGZyb20gPCBzdGFydCB8fCB0byA+IGVuZCwgYWRkOiByYW5nZXMgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlY287XG4gICAgfVxufVxuXG5jb25zdCBVbmljb2RlUmVnZXhwU3VwcG9ydCA9IC94Ly51bmljb2RlICE9IG51bGwgPyBcImd1XCIgOiBcImdcIjtcbmNvbnN0IFNwZWNpYWxzID0gLypAX19QVVJFX18qL25ldyBSZWdFeHAoXCJbXFx1MDAwMC1cXHUwMDA4XFx1MDAwYS1cXHUwMDFmXFx1MDA3Zi1cXHUwMDlmXFx1MDBhZFxcdTA2MWNcXHUyMDBiXFx1MjAwZVxcdTIwMGZcXHUyMDI4XFx1MjAyOVxcdTIwMmRcXHUyMDJlXFx1MjA2NlxcdTIwNjdcXHUyMDY5XFx1ZmVmZlxcdWZmZjktXFx1ZmZmY11cIiwgVW5pY29kZVJlZ2V4cFN1cHBvcnQpO1xuY29uc3QgTmFtZXMgPSB7XG4gICAgMDogXCJudWxsXCIsXG4gICAgNzogXCJiZWxsXCIsXG4gICAgODogXCJiYWNrc3BhY2VcIixcbiAgICAxMDogXCJuZXdsaW5lXCIsXG4gICAgMTE6IFwidmVydGljYWwgdGFiXCIsXG4gICAgMTM6IFwiY2FycmlhZ2UgcmV0dXJuXCIsXG4gICAgMjc6IFwiZXNjYXBlXCIsXG4gICAgODIwMzogXCJ6ZXJvIHdpZHRoIHNwYWNlXCIsXG4gICAgODIwNDogXCJ6ZXJvIHdpZHRoIG5vbi1qb2luZXJcIixcbiAgICA4MjA1OiBcInplcm8gd2lkdGggam9pbmVyXCIsXG4gICAgODIwNjogXCJsZWZ0LXRvLXJpZ2h0IG1hcmtcIixcbiAgICA4MjA3OiBcInJpZ2h0LXRvLWxlZnQgbWFya1wiLFxuICAgIDgyMzI6IFwibGluZSBzZXBhcmF0b3JcIixcbiAgICA4MjM3OiBcImxlZnQtdG8tcmlnaHQgb3ZlcnJpZGVcIixcbiAgICA4MjM4OiBcInJpZ2h0LXRvLWxlZnQgb3ZlcnJpZGVcIixcbiAgICA4Mjk0OiBcImxlZnQtdG8tcmlnaHQgaXNvbGF0ZVwiLFxuICAgIDgyOTU6IFwicmlnaHQtdG8tbGVmdCBpc29sYXRlXCIsXG4gICAgODI5NzogXCJwb3AgZGlyZWN0aW9uYWwgaXNvbGF0ZVwiLFxuICAgIDgyMzM6IFwicGFyYWdyYXBoIHNlcGFyYXRvclwiLFxuICAgIDY1Mjc5OiBcInplcm8gd2lkdGggbm8tYnJlYWsgc3BhY2VcIixcbiAgICA2NTUzMjogXCJvYmplY3QgcmVwbGFjZW1lbnRcIlxufTtcbmxldCBfc3VwcG9ydHNUYWJTaXplID0gbnVsbDtcbmZ1bmN0aW9uIHN1cHBvcnRzVGFiU2l6ZSgpIHtcbiAgICB2YXIgX2E7XG4gICAgaWYgKF9zdXBwb3J0c1RhYlNpemUgPT0gbnVsbCAmJiB0eXBlb2YgZG9jdW1lbnQgIT0gXCJ1bmRlZmluZWRcIiAmJiBkb2N1bWVudC5ib2R5KSB7XG4gICAgICAgIGxldCBzdHlsZXMgPSBkb2N1bWVudC5ib2R5LnN0eWxlO1xuICAgICAgICBfc3VwcG9ydHNUYWJTaXplID0gKChfYSA9IHN0eWxlcy50YWJTaXplKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBzdHlsZXMuTW96VGFiU2l6ZSkgIT0gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIF9zdXBwb3J0c1RhYlNpemUgfHwgZmFsc2U7XG59XG5jb25zdCBzcGVjaWFsQ2hhckNvbmZpZyA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmUoY29uZmlncykge1xuICAgICAgICBsZXQgY29uZmlnID0gY29tYmluZUNvbmZpZyhjb25maWdzLCB7XG4gICAgICAgICAgICByZW5kZXI6IG51bGwsXG4gICAgICAgICAgICBzcGVjaWFsQ2hhcnM6IFNwZWNpYWxzLFxuICAgICAgICAgICAgYWRkU3BlY2lhbENoYXJzOiBudWxsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY29uZmlnLnJlcGxhY2VUYWJzID0gIXN1cHBvcnRzVGFiU2l6ZSgpKVxuICAgICAgICAgICAgY29uZmlnLnNwZWNpYWxDaGFycyA9IG5ldyBSZWdFeHAoXCJcXHR8XCIgKyBjb25maWcuc3BlY2lhbENoYXJzLnNvdXJjZSwgVW5pY29kZVJlZ2V4cFN1cHBvcnQpO1xuICAgICAgICBpZiAoY29uZmlnLmFkZFNwZWNpYWxDaGFycylcbiAgICAgICAgICAgIGNvbmZpZy5zcGVjaWFsQ2hhcnMgPSBuZXcgUmVnRXhwKGNvbmZpZy5zcGVjaWFsQ2hhcnMuc291cmNlICsgXCJ8XCIgKyBjb25maWcuYWRkU3BlY2lhbENoYXJzLnNvdXJjZSwgVW5pY29kZVJlZ2V4cFN1cHBvcnQpO1xuICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgIH1cbn0pO1xuLyoqXG5SZXR1cm5zIGFuIGV4dGVuc2lvbiB0aGF0IGluc3RhbGxzIGhpZ2hsaWdodGluZyBvZiBzcGVjaWFsXG5jaGFyYWN0ZXJzLlxuKi9cbmZ1bmN0aW9uIGhpZ2hsaWdodFNwZWNpYWxDaGFycyhcbi8qKlxuQ29uZmlndXJhdGlvbiBvcHRpb25zLlxuKi9cbmNvbmZpZyA9IHt9KSB7XG4gICAgcmV0dXJuIFtzcGVjaWFsQ2hhckNvbmZpZy5vZihjb25maWcpLCBzcGVjaWFsQ2hhclBsdWdpbigpXTtcbn1cbmxldCBfcGx1Z2luID0gbnVsbDtcbmZ1bmN0aW9uIHNwZWNpYWxDaGFyUGx1Z2luKCkge1xuICAgIHJldHVybiBfcGx1Z2luIHx8IChfcGx1Z2luID0gVmlld1BsdWdpbi5mcm9tQ2xhc3MoY2xhc3Mge1xuICAgICAgICBjb25zdHJ1Y3Rvcih2aWV3KSB7XG4gICAgICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgICAgICAgICAgdGhpcy5kZWNvcmF0aW9ucyA9IERlY29yYXRpb24ubm9uZTtcbiAgICAgICAgICAgIHRoaXMuZGVjb3JhdGlvbkNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgICAgIHRoaXMuZGVjb3JhdG9yID0gdGhpcy5tYWtlRGVjb3JhdG9yKHZpZXcuc3RhdGUuZmFjZXQoc3BlY2lhbENoYXJDb25maWcpKTtcbiAgICAgICAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSB0aGlzLmRlY29yYXRvci5jcmVhdGVEZWNvKHZpZXcpO1xuICAgICAgICB9XG4gICAgICAgIG1ha2VEZWNvcmF0b3IoY29uZikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBNYXRjaERlY29yYXRvcih7XG4gICAgICAgICAgICAgICAgcmVnZXhwOiBjb25mLnNwZWNpYWxDaGFycyxcbiAgICAgICAgICAgICAgICBkZWNvcmF0aW9uOiAobSwgdmlldywgcG9zKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB7IGRvYyB9ID0gdmlldy5zdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvZGUgPSBjb2RlUG9pbnRBdChtWzBdLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvZGUgPT0gOSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmUgPSBkb2MubGluZUF0KHBvcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2l6ZSA9IHZpZXcuc3RhdGUudGFiU2l6ZSwgY29sID0gY291bnRDb2x1bW4obGluZS50ZXh0LCBzaXplLCBwb3MgLSBsaW5lLmZyb20pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERlY29yYXRpb24ucmVwbGFjZSh7IHdpZGdldDogbmV3IFRhYldpZGdldCgoc2l6ZSAtIChjb2wgJSBzaXplKSkgKiB0aGlzLnZpZXcuZGVmYXVsdENoYXJhY3RlcldpZHRoKSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvcmF0aW9uQ2FjaGVbY29kZV0gfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmRlY29yYXRpb25DYWNoZVtjb2RlXSA9IERlY29yYXRpb24ucmVwbGFjZSh7IHdpZGdldDogbmV3IFNwZWNpYWxDaGFyV2lkZ2V0KGNvbmYsIGNvZGUpIH0pKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJvdW5kYXJ5OiBjb25mLnJlcGxhY2VUYWJzID8gdW5kZWZpbmVkIDogL1teXS9cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgICAgIGxldCBjb25mID0gdXBkYXRlLnN0YXRlLmZhY2V0KHNwZWNpYWxDaGFyQ29uZmlnKTtcbiAgICAgICAgICAgIGlmICh1cGRhdGUuc3RhcnRTdGF0ZS5mYWNldChzcGVjaWFsQ2hhckNvbmZpZykgIT0gY29uZikge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVjb3JhdG9yID0gdGhpcy5tYWtlRGVjb3JhdG9yKGNvbmYpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSB0aGlzLmRlY29yYXRvci5jcmVhdGVEZWNvKHVwZGF0ZS52aWV3KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSB0aGlzLmRlY29yYXRvci51cGRhdGVEZWNvKHVwZGF0ZSwgdGhpcy5kZWNvcmF0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGRlY29yYXRpb25zOiB2ID0+IHYuZGVjb3JhdGlvbnNcbiAgICB9KSk7XG59XG5jb25zdCBEZWZhdWx0UGxhY2Vob2xkZXIgPSBcIlxcdTIwMjJcIjtcbi8vIEFzc2lnbnMgcGxhY2Vob2xkZXIgY2hhcmFjdGVycyBmcm9tIHRoZSBDb250cm9sIFBpY3R1cmVzIGJsb2NrIHRvXG4vLyBBU0NJSSBjb250cm9sIGNoYXJhY3RlcnNcbmZ1bmN0aW9uIHBsYWNlaG9sZGVyJDEoY29kZSkge1xuICAgIGlmIChjb2RlID49IDMyKVxuICAgICAgICByZXR1cm4gRGVmYXVsdFBsYWNlaG9sZGVyO1xuICAgIGlmIChjb2RlID09IDEwKVxuICAgICAgICByZXR1cm4gXCJcXHUyNDI0XCI7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoOTIxNiArIGNvZGUpO1xufVxuY2xhc3MgU3BlY2lhbENoYXJXaWRnZXQgZXh0ZW5kcyBXaWRnZXRUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zLCBjb2RlKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuY29kZSA9IGNvZGU7XG4gICAgfVxuICAgIGVxKG90aGVyKSB7IHJldHVybiBvdGhlci5jb2RlID09IHRoaXMuY29kZTsgfVxuICAgIHRvRE9NKHZpZXcpIHtcbiAgICAgICAgbGV0IHBoID0gcGxhY2Vob2xkZXIkMSh0aGlzLmNvZGUpO1xuICAgICAgICBsZXQgZGVzYyA9IHZpZXcuc3RhdGUucGhyYXNlKFwiQ29udHJvbCBjaGFyYWN0ZXJcIikgKyBcIiBcIiArIChOYW1lc1t0aGlzLmNvZGVdIHx8IFwiMHhcIiArIHRoaXMuY29kZS50b1N0cmluZygxNikpO1xuICAgICAgICBsZXQgY3VzdG9tID0gdGhpcy5vcHRpb25zLnJlbmRlciAmJiB0aGlzLm9wdGlvbnMucmVuZGVyKHRoaXMuY29kZSwgZGVzYywgcGgpO1xuICAgICAgICBpZiAoY3VzdG9tKVxuICAgICAgICAgICAgcmV0dXJuIGN1c3RvbTtcbiAgICAgICAgbGV0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgc3Bhbi50ZXh0Q29udGVudCA9IHBoO1xuICAgICAgICBzcGFuLnRpdGxlID0gZGVzYztcbiAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIGRlc2MpO1xuICAgICAgICBzcGFuLmNsYXNzTmFtZSA9IFwiY20tc3BlY2lhbENoYXJcIjtcbiAgICAgICAgcmV0dXJuIHNwYW47XG4gICAgfVxuICAgIGlnbm9yZUV2ZW50KCkgeyByZXR1cm4gZmFsc2U7IH1cbn1cbmNsYXNzIFRhYldpZGdldCBleHRlbmRzIFdpZGdldFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKHdpZHRoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgICB9XG4gICAgZXEob3RoZXIpIHsgcmV0dXJuIG90aGVyLndpZHRoID09IHRoaXMud2lkdGg7IH1cbiAgICB0b0RPTSgpIHtcbiAgICAgICAgbGV0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgc3Bhbi50ZXh0Q29udGVudCA9IFwiXFx0XCI7XG4gICAgICAgIHNwYW4uY2xhc3NOYW1lID0gXCJjbS10YWJcIjtcbiAgICAgICAgc3Bhbi5zdHlsZS53aWR0aCA9IHRoaXMud2lkdGggKyBcInB4XCI7XG4gICAgICAgIHJldHVybiBzcGFuO1xuICAgIH1cbiAgICBpZ25vcmVFdmVudCgpIHsgcmV0dXJuIGZhbHNlOyB9XG59XG5cbmNvbnN0IHBsdWdpbiA9IC8qQF9fUFVSRV9fKi9WaWV3UGx1Z2luLmZyb21DbGFzcyhjbGFzcyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gMTAwMDtcbiAgICAgICAgdGhpcy5hdHRycyA9IHsgc3R5bGU6IFwicGFkZGluZy1ib3R0b206IDEwMDBweFwiIH07XG4gICAgfVxuICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgbGV0IHsgdmlldyB9ID0gdXBkYXRlO1xuICAgICAgICBsZXQgaGVpZ2h0ID0gdmlldy52aWV3U3RhdGUuZWRpdG9ySGVpZ2h0IC0gdmlldy5kZWZhdWx0TGluZUhlaWdodCAtIHZpZXcuZG9jdW1lbnRQYWRkaW5nLnRvcCAtIDAuNTtcbiAgICAgICAgaWYgKGhlaWdodCAhPSB0aGlzLmhlaWdodCkge1xuICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLmF0dHJzID0geyBzdHlsZTogYHBhZGRpbmctYm90dG9tOiAke2hlaWdodH1weGAgfTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuLyoqXG5SZXR1cm5zIGFuIGV4dGVuc2lvbiB0aGF0IG1ha2VzIHN1cmUgdGhlIGNvbnRlbnQgaGFzIGEgYm90dG9tXG5tYXJnaW4gZXF1aXZhbGVudCB0byB0aGUgaGVpZ2h0IG9mIHRoZSBlZGl0b3IsIG1pbnVzIG9uZSBsaW5lXG5oZWlnaHQsIHNvIHRoYXQgZXZlcnkgbGluZSBpbiB0aGUgZG9jdW1lbnQgY2FuIGJlIHNjcm9sbGVkIHRvIHRoZVxudG9wIG9mIHRoZSBlZGl0b3IuXG5cblRoaXMgaXMgb25seSBtZWFuaW5nZnVsIHdoZW4gdGhlIGVkaXRvciBpcyBzY3JvbGxhYmxlLCBhbmQgc2hvdWxkXG5ub3QgYmUgZW5hYmxlZCBpbiBlZGl0b3JzIHRoYXQgdGFrZSB0aGUgc2l6ZSBvZiB0aGVpciBjb250ZW50LlxuKi9cbmZ1bmN0aW9uIHNjcm9sbFBhc3RFbmQoKSB7XG4gICAgcmV0dXJuIFtwbHVnaW4sIGNvbnRlbnRBdHRyaWJ1dGVzLm9mKHZpZXcgPT4geyB2YXIgX2E7IHJldHVybiAoKF9hID0gdmlldy5wbHVnaW4ocGx1Z2luKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmF0dHJzKSB8fCBudWxsOyB9KV07XG59XG5cbi8qKlxuTWFyayBsaW5lcyB0aGF0IGhhdmUgYSBjdXJzb3Igb24gdGhlbSB3aXRoIHRoZSBgXCJjbS1hY3RpdmVMaW5lXCJgXG5ET00gY2xhc3MuXG4qL1xuZnVuY3Rpb24gaGlnaGxpZ2h0QWN0aXZlTGluZSgpIHtcbiAgICByZXR1cm4gYWN0aXZlTGluZUhpZ2hsaWdodGVyO1xufVxuY29uc3QgbGluZURlY28gPSAvKkBfX1BVUkVfXyovRGVjb3JhdGlvbi5saW5lKHsgY2xhc3M6IFwiY20tYWN0aXZlTGluZVwiIH0pO1xuY29uc3QgYWN0aXZlTGluZUhpZ2hsaWdodGVyID0gLypAX19QVVJFX18qL1ZpZXdQbHVnaW4uZnJvbUNsYXNzKGNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3KSB7XG4gICAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSB0aGlzLmdldERlY28odmlldyk7XG4gICAgfVxuICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgaWYgKHVwZGF0ZS5kb2NDaGFuZ2VkIHx8IHVwZGF0ZS5zZWxlY3Rpb25TZXQpXG4gICAgICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gdGhpcy5nZXREZWNvKHVwZGF0ZS52aWV3KTtcbiAgICB9XG4gICAgZ2V0RGVjbyh2aWV3KSB7XG4gICAgICAgIGxldCBsYXN0TGluZVN0YXJ0ID0gLTEsIGRlY28gPSBbXTtcbiAgICAgICAgZm9yIChsZXQgciBvZiB2aWV3LnN0YXRlLnNlbGVjdGlvbi5yYW5nZXMpIHtcbiAgICAgICAgICAgIGxldCBsaW5lID0gdmlldy5saW5lQmxvY2tBdChyLmhlYWQpO1xuICAgICAgICAgICAgaWYgKGxpbmUuZnJvbSA+IGxhc3RMaW5lU3RhcnQpIHtcbiAgICAgICAgICAgICAgICBkZWNvLnB1c2gobGluZURlY28ucmFuZ2UobGluZS5mcm9tKSk7XG4gICAgICAgICAgICAgICAgbGFzdExpbmVTdGFydCA9IGxpbmUuZnJvbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gRGVjb3JhdGlvbi5zZXQoZGVjbyk7XG4gICAgfVxufSwge1xuICAgIGRlY29yYXRpb25zOiB2ID0+IHYuZGVjb3JhdGlvbnNcbn0pO1xuXG5jbGFzcyBQbGFjZWhvbGRlciBleHRlbmRzIFdpZGdldFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKGNvbnRlbnQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcbiAgICB9XG4gICAgdG9ET00oKSB7XG4gICAgICAgIGxldCB3cmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgIHdyYXAuY2xhc3NOYW1lID0gXCJjbS1wbGFjZWhvbGRlclwiO1xuICAgICAgICB3cmFwLnN0eWxlLnBvaW50ZXJFdmVudHMgPSBcIm5vbmVcIjtcbiAgICAgICAgd3JhcC5hcHBlbmRDaGlsZCh0eXBlb2YgdGhpcy5jb250ZW50ID09IFwic3RyaW5nXCIgPyBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0aGlzLmNvbnRlbnQpIDogdGhpcy5jb250ZW50KTtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmNvbnRlbnQgPT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgIHdyYXAuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCBcInBsYWNlaG9sZGVyIFwiICsgdGhpcy5jb250ZW50KTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgd3JhcC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLCBcInRydWVcIik7XG4gICAgICAgIHJldHVybiB3cmFwO1xuICAgIH1cbiAgICBpZ25vcmVFdmVudCgpIHsgcmV0dXJuIGZhbHNlOyB9XG59XG4vKipcbkV4dGVuc2lvbiB0aGF0IGVuYWJsZXMgYSBwbGFjZWhvbGRlclx1MjAxNGEgcGllY2Ugb2YgZXhhbXBsZSBjb250ZW50XG50byBzaG93IHdoZW4gdGhlIGVkaXRvciBpcyBlbXB0eS5cbiovXG5mdW5jdGlvbiBwbGFjZWhvbGRlcihjb250ZW50KSB7XG4gICAgcmV0dXJuIFZpZXdQbHVnaW4uZnJvbUNsYXNzKGNsYXNzIHtcbiAgICAgICAgY29uc3RydWN0b3Iodmlldykge1xuICAgICAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgICAgIHRoaXMucGxhY2Vob2xkZXIgPSBEZWNvcmF0aW9uLnNldChbRGVjb3JhdGlvbi53aWRnZXQoeyB3aWRnZXQ6IG5ldyBQbGFjZWhvbGRlcihjb250ZW50KSwgc2lkZTogMSB9KS5yYW5nZSgwKV0pO1xuICAgICAgICB9XG4gICAgICAgIGdldCBkZWNvcmF0aW9ucygpIHsgcmV0dXJuIHRoaXMudmlldy5zdGF0ZS5kb2MubGVuZ3RoID8gRGVjb3JhdGlvbi5ub25lIDogdGhpcy5wbGFjZWhvbGRlcjsgfVxuICAgIH0sIHsgZGVjb3JhdGlvbnM6IHYgPT4gdi5kZWNvcmF0aW9ucyB9KTtcbn1cblxuLy8gRG9uJ3QgY29tcHV0ZSBwcmVjaXNlIGNvbHVtbiBwb3NpdGlvbnMgZm9yIGxpbmUgb2Zmc2V0cyBhYm92ZSB0aGlzXG4vLyAoc2luY2UgaXQgY291bGQgZ2V0IGV4cGVuc2l2ZSkuIEFzc3VtZSBvZmZzZXQ9PWNvbHVtbiBmb3IgdGhlbS5cbmNvbnN0IE1heE9mZiA9IDIwMDA7XG5mdW5jdGlvbiByZWN0YW5nbGVGb3Ioc3RhdGUsIGEsIGIpIHtcbiAgICBsZXQgc3RhcnRMaW5lID0gTWF0aC5taW4oYS5saW5lLCBiLmxpbmUpLCBlbmRMaW5lID0gTWF0aC5tYXgoYS5saW5lLCBiLmxpbmUpO1xuICAgIGxldCByYW5nZXMgPSBbXTtcbiAgICBpZiAoYS5vZmYgPiBNYXhPZmYgfHwgYi5vZmYgPiBNYXhPZmYgfHwgYS5jb2wgPCAwIHx8IGIuY29sIDwgMCkge1xuICAgICAgICBsZXQgc3RhcnRPZmYgPSBNYXRoLm1pbihhLm9mZiwgYi5vZmYpLCBlbmRPZmYgPSBNYXRoLm1heChhLm9mZiwgYi5vZmYpO1xuICAgICAgICBmb3IgKGxldCBpID0gc3RhcnRMaW5lOyBpIDw9IGVuZExpbmU7IGkrKykge1xuICAgICAgICAgICAgbGV0IGxpbmUgPSBzdGF0ZS5kb2MubGluZShpKTtcbiAgICAgICAgICAgIGlmIChsaW5lLmxlbmd0aCA8PSBlbmRPZmYpXG4gICAgICAgICAgICAgICAgcmFuZ2VzLnB1c2goRWRpdG9yU2VsZWN0aW9uLnJhbmdlKGxpbmUuZnJvbSArIHN0YXJ0T2ZmLCBsaW5lLnRvICsgZW5kT2ZmKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxldCBzdGFydENvbCA9IE1hdGgubWluKGEuY29sLCBiLmNvbCksIGVuZENvbCA9IE1hdGgubWF4KGEuY29sLCBiLmNvbCk7XG4gICAgICAgIGZvciAobGV0IGkgPSBzdGFydExpbmU7IGkgPD0gZW5kTGluZTsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgbGluZSA9IHN0YXRlLmRvYy5saW5lKGkpO1xuICAgICAgICAgICAgbGV0IHN0YXJ0ID0gZmluZENvbHVtbihsaW5lLnRleHQsIHN0YXJ0Q29sLCBzdGF0ZS50YWJTaXplLCB0cnVlKTtcbiAgICAgICAgICAgIGlmIChzdGFydCA8IDApIHtcbiAgICAgICAgICAgICAgICByYW5nZXMucHVzaChFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKGxpbmUudG8pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBlbmQgPSBmaW5kQ29sdW1uKGxpbmUudGV4dCwgZW5kQ29sLCBzdGF0ZS50YWJTaXplKTtcbiAgICAgICAgICAgICAgICByYW5nZXMucHVzaChFZGl0b3JTZWxlY3Rpb24ucmFuZ2UobGluZS5mcm9tICsgc3RhcnQsIGxpbmUuZnJvbSArIGVuZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByYW5nZXM7XG59XG5mdW5jdGlvbiBhYnNvbHV0ZUNvbHVtbih2aWV3LCB4KSB7XG4gICAgbGV0IHJlZiA9IHZpZXcuY29vcmRzQXRQb3Modmlldy52aWV3cG9ydC5mcm9tKTtcbiAgICByZXR1cm4gcmVmID8gTWF0aC5yb3VuZChNYXRoLmFicygocmVmLmxlZnQgLSB4KSAvIHZpZXcuZGVmYXVsdENoYXJhY3RlcldpZHRoKSkgOiAtMTtcbn1cbmZ1bmN0aW9uIGdldFBvcyh2aWV3LCBldmVudCkge1xuICAgIGxldCBvZmZzZXQgPSB2aWV3LnBvc0F0Q29vcmRzKHsgeDogZXZlbnQuY2xpZW50WCwgeTogZXZlbnQuY2xpZW50WSB9LCBmYWxzZSk7XG4gICAgbGV0IGxpbmUgPSB2aWV3LnN0YXRlLmRvYy5saW5lQXQob2Zmc2V0KSwgb2ZmID0gb2Zmc2V0IC0gbGluZS5mcm9tO1xuICAgIGxldCBjb2wgPSBvZmYgPiBNYXhPZmYgPyAtMVxuICAgICAgICA6IG9mZiA9PSBsaW5lLmxlbmd0aCA/IGFic29sdXRlQ29sdW1uKHZpZXcsIGV2ZW50LmNsaWVudFgpXG4gICAgICAgICAgICA6IGNvdW50Q29sdW1uKGxpbmUudGV4dCwgdmlldy5zdGF0ZS50YWJTaXplLCBvZmZzZXQgLSBsaW5lLmZyb20pO1xuICAgIHJldHVybiB7IGxpbmU6IGxpbmUubnVtYmVyLCBjb2wsIG9mZiB9O1xufVxuZnVuY3Rpb24gcmVjdGFuZ2xlU2VsZWN0aW9uU3R5bGUodmlldywgZXZlbnQpIHtcbiAgICBsZXQgc3RhcnQgPSBnZXRQb3ModmlldywgZXZlbnQpLCBzdGFydFNlbCA9IHZpZXcuc3RhdGUuc2VsZWN0aW9uO1xuICAgIGlmICghc3RhcnQpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIHJldHVybiB7XG4gICAgICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgICAgIGlmICh1cGRhdGUuZG9jQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgIGxldCBuZXdTdGFydCA9IHVwZGF0ZS5jaGFuZ2VzLm1hcFBvcyh1cGRhdGUuc3RhcnRTdGF0ZS5kb2MubGluZShzdGFydC5saW5lKS5mcm9tKTtcbiAgICAgICAgICAgICAgICBsZXQgbmV3TGluZSA9IHVwZGF0ZS5zdGF0ZS5kb2MubGluZUF0KG5ld1N0YXJ0KTtcbiAgICAgICAgICAgICAgICBzdGFydCA9IHsgbGluZTogbmV3TGluZS5udW1iZXIsIGNvbDogc3RhcnQuY29sLCBvZmY6IE1hdGgubWluKHN0YXJ0Lm9mZiwgbmV3TGluZS5sZW5ndGgpIH07XG4gICAgICAgICAgICAgICAgc3RhcnRTZWwgPSBzdGFydFNlbC5tYXAodXBkYXRlLmNoYW5nZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBnZXQoZXZlbnQsIF9leHRlbmQsIG11bHRpcGxlKSB7XG4gICAgICAgICAgICBsZXQgY3VyID0gZ2V0UG9zKHZpZXcsIGV2ZW50KTtcbiAgICAgICAgICAgIGlmICghY3VyKVxuICAgICAgICAgICAgICAgIHJldHVybiBzdGFydFNlbDtcbiAgICAgICAgICAgIGxldCByYW5nZXMgPSByZWN0YW5nbGVGb3Iodmlldy5zdGF0ZSwgc3RhcnQsIGN1cik7XG4gICAgICAgICAgICBpZiAoIXJhbmdlcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXJ0U2VsO1xuICAgICAgICAgICAgaWYgKG11bHRpcGxlKVxuICAgICAgICAgICAgICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24uY3JlYXRlKHJhbmdlcy5jb25jYXQoc3RhcnRTZWwucmFuZ2VzKSk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5jcmVhdGUocmFuZ2VzKTtcbiAgICAgICAgfVxuICAgIH07XG59XG4vKipcbkNyZWF0ZSBhbiBleHRlbnNpb24gdGhhdCBlbmFibGVzIHJlY3Rhbmd1bGFyIHNlbGVjdGlvbnMuIEJ5XG5kZWZhdWx0LCBpdCB3aWxsIHJlYWN0IHRvIGxlZnQgbW91c2UgZHJhZyB3aXRoIHRoZSBBbHQga2V5IGhlbGRcbmRvd24uIFdoZW4gc3VjaCBhIHNlbGVjdGlvbiBvY2N1cnMsIHRoZSB0ZXh0IHdpdGhpbiB0aGUgcmVjdGFuZ2xlXG50aGF0IHdhcyBkcmFnZ2VkIG92ZXIgd2lsbCBiZSBzZWxlY3RlZCwgYXMgb25lIHNlbGVjdGlvblxuW3JhbmdlXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlNlbGVjdGlvblJhbmdlKSBwZXIgbGluZS5cbiovXG5mdW5jdGlvbiByZWN0YW5ndWxhclNlbGVjdGlvbihvcHRpb25zKSB7XG4gICAgbGV0IGZpbHRlciA9IChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuZXZlbnRGaWx0ZXIpIHx8IChlID0+IGUuYWx0S2V5ICYmIGUuYnV0dG9uID09IDApO1xuICAgIHJldHVybiBFZGl0b3JWaWV3Lm1vdXNlU2VsZWN0aW9uU3R5bGUub2YoKHZpZXcsIGV2ZW50KSA9PiBmaWx0ZXIoZXZlbnQpID8gcmVjdGFuZ2xlU2VsZWN0aW9uU3R5bGUodmlldywgZXZlbnQpIDogbnVsbCk7XG59XG5jb25zdCBrZXlzID0ge1xuICAgIEFsdDogWzE4LCBlID0+IGUuYWx0S2V5XSxcbiAgICBDb250cm9sOiBbMTcsIGUgPT4gZS5jdHJsS2V5XSxcbiAgICBTaGlmdDogWzE2LCBlID0+IGUuc2hpZnRLZXldLFxuICAgIE1ldGE6IFs5MSwgZSA9PiBlLm1ldGFLZXldXG59O1xuY29uc3Qgc2hvd0Nyb3NzaGFpciA9IHsgc3R5bGU6IFwiY3Vyc29yOiBjcm9zc2hhaXJcIiB9O1xuLyoqXG5SZXR1cm5zIGFuIGV4dGVuc2lvbiB0aGF0IHR1cm5zIHRoZSBwb2ludGVyIGN1cnNvciBpbnRvIGFcbmNyb3NzaGFpciB3aGVuIGEgZ2l2ZW4gbW9kaWZpZXIga2V5LCBkZWZhdWx0aW5nIHRvIEFsdCwgaXMgaGVsZFxuZG93bi4gQ2FuIHNlcnZlIGFzIGEgdmlzdWFsIGhpbnQgdGhhdCByZWN0YW5ndWxhciBzZWxlY3Rpb24gaXNcbmdvaW5nIHRvIGhhcHBlbiB3aGVuIHBhaXJlZCB3aXRoXG5bYHJlY3Rhbmd1bGFyU2VsZWN0aW9uYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LnJlY3Rhbmd1bGFyU2VsZWN0aW9uKS5cbiovXG5mdW5jdGlvbiBjcm9zc2hhaXJDdXJzb3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgbGV0IFtjb2RlLCBnZXR0ZXJdID0ga2V5c1tvcHRpb25zLmtleSB8fCBcIkFsdFwiXTtcbiAgICBsZXQgcGx1Z2luID0gVmlld1BsdWdpbi5mcm9tQ2xhc3MoY2xhc3Mge1xuICAgICAgICBjb25zdHJ1Y3Rvcih2aWV3KSB7XG4gICAgICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgICAgICAgICAgdGhpcy5pc0Rvd24gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBzZXQoaXNEb3duKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0Rvd24gIT0gaXNEb3duKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0Rvd24gPSBpc0Rvd247XG4gICAgICAgICAgICAgICAgdGhpcy52aWV3LnVwZGF0ZShbXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGV2ZW50SGFuZGxlcnM6IHtcbiAgICAgICAgICAgIGtleWRvd24oZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0KGUua2V5Q29kZSA9PSBjb2RlIHx8IGdldHRlcihlKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAga2V5dXAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gY29kZSB8fCAhZ2V0dGVyKGUpKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldChmYWxzZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbW91c2Vtb3ZlKGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldChnZXR0ZXIoZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgcGx1Z2luLFxuICAgICAgICBFZGl0b3JWaWV3LmNvbnRlbnRBdHRyaWJ1dGVzLm9mKHZpZXcgPT4geyB2YXIgX2E7IHJldHVybiAoKF9hID0gdmlldy5wbHVnaW4ocGx1Z2luKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmlzRG93bikgPyBzaG93Q3Jvc3NoYWlyIDogbnVsbDsgfSlcbiAgICBdO1xufVxuXG5jb25zdCBPdXRzaWRlID0gXCItMTAwMDBweFwiO1xuY2xhc3MgVG9vbHRpcFZpZXdNYW5hZ2VyIHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3LCBmYWNldCwgY3JlYXRlVG9vbHRpcFZpZXcpIHtcbiAgICAgICAgdGhpcy5mYWNldCA9IGZhY2V0O1xuICAgICAgICB0aGlzLmNyZWF0ZVRvb2x0aXBWaWV3ID0gY3JlYXRlVG9vbHRpcFZpZXc7XG4gICAgICAgIHRoaXMuaW5wdXQgPSB2aWV3LnN0YXRlLmZhY2V0KGZhY2V0KTtcbiAgICAgICAgdGhpcy50b29sdGlwcyA9IHRoaXMuaW5wdXQuZmlsdGVyKHQgPT4gdCk7XG4gICAgICAgIHRoaXMudG9vbHRpcFZpZXdzID0gdGhpcy50b29sdGlwcy5tYXAoY3JlYXRlVG9vbHRpcFZpZXcpO1xuICAgIH1cbiAgICB1cGRhdGUodXBkYXRlKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgbGV0IGlucHV0ID0gdXBkYXRlLnN0YXRlLmZhY2V0KHRoaXMuZmFjZXQpO1xuICAgICAgICBsZXQgdG9vbHRpcHMgPSBpbnB1dC5maWx0ZXIoeCA9PiB4KTtcbiAgICAgICAgaWYgKGlucHV0ID09PSB0aGlzLmlucHV0KSB7XG4gICAgICAgICAgICBmb3IgKGxldCB0IG9mIHRoaXMudG9vbHRpcFZpZXdzKVxuICAgICAgICAgICAgICAgIGlmICh0LnVwZGF0ZSlcbiAgICAgICAgICAgICAgICAgICAgdC51cGRhdGUodXBkYXRlKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgdG9vbHRpcFZpZXdzID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG9vbHRpcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCB0aXAgPSB0b29sdGlwc1tpXSwga25vd24gPSAtMTtcbiAgICAgICAgICAgIGlmICghdGlwKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRvb2x0aXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IG90aGVyID0gdGhpcy50b29sdGlwc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAob3RoZXIgJiYgb3RoZXIuY3JlYXRlID09IHRpcC5jcmVhdGUpXG4gICAgICAgICAgICAgICAgICAgIGtub3duID0gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChrbm93biA8IDApIHtcbiAgICAgICAgICAgICAgICB0b29sdGlwVmlld3NbaV0gPSB0aGlzLmNyZWF0ZVRvb2x0aXBWaWV3KHRpcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgdG9vbHRpcFZpZXcgPSB0b29sdGlwVmlld3NbaV0gPSB0aGlzLnRvb2x0aXBWaWV3c1trbm93bl07XG4gICAgICAgICAgICAgICAgaWYgKHRvb2x0aXBWaWV3LnVwZGF0ZSlcbiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcFZpZXcudXBkYXRlKHVwZGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgdCBvZiB0aGlzLnRvb2x0aXBWaWV3cylcbiAgICAgICAgICAgIGlmICh0b29sdGlwVmlld3MuaW5kZXhPZih0KSA8IDApIHtcbiAgICAgICAgICAgICAgICB0LmRvbS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAoX2EgPSB0LmRlc3Ryb3kpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jYWxsKHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB0aGlzLmlucHV0ID0gaW5wdXQ7XG4gICAgICAgIHRoaXMudG9vbHRpcHMgPSB0b29sdGlwcztcbiAgICAgICAgdGhpcy50b29sdGlwVmlld3MgPSB0b29sdGlwVmlld3M7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cbi8qKlxuQ3JlYXRlcyBhbiBleHRlbnNpb24gdGhhdCBjb25maWd1cmVzIHRvb2x0aXAgYmVoYXZpb3IuXG4qL1xuZnVuY3Rpb24gdG9vbHRpcHMoY29uZmlnID0ge30pIHtcbiAgICByZXR1cm4gdG9vbHRpcENvbmZpZy5vZihjb25maWcpO1xufVxuZnVuY3Rpb24gd2luZG93U3BhY2Uodmlldykge1xuICAgIGxldCB7IHdpbiB9ID0gdmlldztcbiAgICByZXR1cm4geyB0b3A6IDAsIGxlZnQ6IDAsIGJvdHRvbTogd2luLmlubmVySGVpZ2h0LCByaWdodDogd2luLmlubmVyV2lkdGggfTtcbn1cbmNvbnN0IHRvb2x0aXBDb25maWcgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21iaW5lOiB2YWx1ZXMgPT4ge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgcmV0dXJuICh7XG4gICAgICAgICAgICBwb3NpdGlvbjogYnJvd3Nlci5pb3MgPyBcImFic29sdXRlXCIgOiAoKF9hID0gdmFsdWVzLmZpbmQoY29uZiA9PiBjb25mLnBvc2l0aW9uKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnBvc2l0aW9uKSB8fCBcImZpeGVkXCIsXG4gICAgICAgICAgICBwYXJlbnQ6ICgoX2IgPSB2YWx1ZXMuZmluZChjb25mID0+IGNvbmYucGFyZW50KSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnBhcmVudCkgfHwgbnVsbCxcbiAgICAgICAgICAgIHRvb2x0aXBTcGFjZTogKChfYyA9IHZhbHVlcy5maW5kKGNvbmYgPT4gY29uZi50b29sdGlwU3BhY2UpKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MudG9vbHRpcFNwYWNlKSB8fCB3aW5kb3dTcGFjZSxcbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG5jb25zdCB0b29sdGlwUGx1Z2luID0gLypAX19QVVJFX18qL1ZpZXdQbHVnaW4uZnJvbUNsYXNzKGNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3KSB7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIHRoaXMuaW5WaWV3ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5sYXN0VHJhbnNhY3Rpb24gPSAwO1xuICAgICAgICB0aGlzLm1lYXN1cmVUaW1lb3V0ID0gLTE7XG4gICAgICAgIGxldCBjb25maWcgPSB2aWV3LnN0YXRlLmZhY2V0KHRvb2x0aXBDb25maWcpO1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gY29uZmlnLnBvc2l0aW9uO1xuICAgICAgICB0aGlzLnBhcmVudCA9IGNvbmZpZy5wYXJlbnQ7XG4gICAgICAgIHRoaXMuY2xhc3NlcyA9IHZpZXcudGhlbWVDbGFzc2VzO1xuICAgICAgICB0aGlzLmNyZWF0ZUNvbnRhaW5lcigpO1xuICAgICAgICB0aGlzLm1lYXN1cmVSZXEgPSB7IHJlYWQ6IHRoaXMucmVhZE1lYXN1cmUuYmluZCh0aGlzKSwgd3JpdGU6IHRoaXMud3JpdGVNZWFzdXJlLmJpbmQodGhpcyksIGtleTogdGhpcyB9O1xuICAgICAgICB0aGlzLm1hbmFnZXIgPSBuZXcgVG9vbHRpcFZpZXdNYW5hZ2VyKHZpZXcsIHNob3dUb29sdGlwLCB0ID0+IHRoaXMuY3JlYXRlVG9vbHRpcCh0KSk7XG4gICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXIgPSB0eXBlb2YgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgPT0gXCJmdW5jdGlvblwiID8gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKGVudHJpZXMgPT4ge1xuICAgICAgICAgICAgaWYgKERhdGUubm93KCkgPiB0aGlzLmxhc3RUcmFuc2FjdGlvbiAtIDUwICYmXG4gICAgICAgICAgICAgICAgZW50cmllcy5sZW5ndGggPiAwICYmIGVudHJpZXNbZW50cmllcy5sZW5ndGggLSAxXS5pbnRlcnNlY3Rpb25SYXRpbyA8IDEpXG4gICAgICAgICAgICAgICAgdGhpcy5tZWFzdXJlU29vbigpO1xuICAgICAgICB9LCB7IHRocmVzaG9sZDogWzFdIH0pIDogbnVsbDtcbiAgICAgICAgdGhpcy5vYnNlcnZlSW50ZXJzZWN0aW9uKCk7XG4gICAgICAgIHZpZXcud2luLmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5tZWFzdXJlU29vbiA9IHRoaXMubWVhc3VyZVNvb24uYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMubWF5YmVNZWFzdXJlKCk7XG4gICAgfVxuICAgIGNyZWF0ZUNvbnRhaW5lcigpIHtcbiAgICAgICAgaWYgKHRoaXMucGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9IFwicmVsYXRpdmVcIjtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTmFtZSA9IHRoaXMudmlldy50aGVtZUNsYXNzZXM7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5hcHBlbmRDaGlsZCh0aGlzLmNvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lciA9IHRoaXMudmlldy5kb207XG4gICAgICAgIH1cbiAgICB9XG4gICAgb2JzZXJ2ZUludGVyc2VjdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgZm9yIChsZXQgdG9vbHRpcCBvZiB0aGlzLm1hbmFnZXIudG9vbHRpcFZpZXdzKVxuICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXIub2JzZXJ2ZSh0b29sdGlwLmRvbSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbWVhc3VyZVNvb24oKSB7XG4gICAgICAgIGlmICh0aGlzLm1lYXN1cmVUaW1lb3V0IDwgMClcbiAgICAgICAgICAgIHRoaXMubWVhc3VyZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm1lYXN1cmVUaW1lb3V0ID0gLTE7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXliZU1lYXN1cmUoKTtcbiAgICAgICAgICAgIH0sIDUwKTtcbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICBpZiAodXBkYXRlLnRyYW5zYWN0aW9ucy5sZW5ndGgpXG4gICAgICAgICAgICB0aGlzLmxhc3RUcmFuc2FjdGlvbiA9IERhdGUubm93KCk7XG4gICAgICAgIGxldCB1cGRhdGVkID0gdGhpcy5tYW5hZ2VyLnVwZGF0ZSh1cGRhdGUpO1xuICAgICAgICBpZiAodXBkYXRlZClcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZUludGVyc2VjdGlvbigpO1xuICAgICAgICBsZXQgc2hvdWxkTWVhc3VyZSA9IHVwZGF0ZWQgfHwgdXBkYXRlLmdlb21ldHJ5Q2hhbmdlZDtcbiAgICAgICAgbGV0IG5ld0NvbmZpZyA9IHVwZGF0ZS5zdGF0ZS5mYWNldCh0b29sdGlwQ29uZmlnKTtcbiAgICAgICAgaWYgKG5ld0NvbmZpZy5wb3NpdGlvbiAhPSB0aGlzLnBvc2l0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uID0gbmV3Q29uZmlnLnBvc2l0aW9uO1xuICAgICAgICAgICAgZm9yIChsZXQgdCBvZiB0aGlzLm1hbmFnZXIudG9vbHRpcFZpZXdzKVxuICAgICAgICAgICAgICAgIHQuZG9tLnN0eWxlLnBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbjtcbiAgICAgICAgICAgIHNob3VsZE1lYXN1cmUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZXdDb25maWcucGFyZW50ICE9IHRoaXMucGFyZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQpXG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIucmVtb3ZlKCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IG5ld0NvbmZpZy5wYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUNvbnRhaW5lcigpO1xuICAgICAgICAgICAgZm9yIChsZXQgdCBvZiB0aGlzLm1hbmFnZXIudG9vbHRpcFZpZXdzKVxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHQuZG9tKTtcbiAgICAgICAgICAgIHNob3VsZE1lYXN1cmUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMucGFyZW50ICYmIHRoaXMudmlldy50aGVtZUNsYXNzZXMgIT0gdGhpcy5jbGFzc2VzKSB7XG4gICAgICAgICAgICB0aGlzLmNsYXNzZXMgPSB0aGlzLmNvbnRhaW5lci5jbGFzc05hbWUgPSB0aGlzLnZpZXcudGhlbWVDbGFzc2VzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzaG91bGRNZWFzdXJlKVxuICAgICAgICAgICAgdGhpcy5tYXliZU1lYXN1cmUoKTtcbiAgICB9XG4gICAgY3JlYXRlVG9vbHRpcCh0b29sdGlwKSB7XG4gICAgICAgIGxldCB0b29sdGlwVmlldyA9IHRvb2x0aXAuY3JlYXRlKHRoaXMudmlldyk7XG4gICAgICAgIHRvb2x0aXBWaWV3LmRvbS5jbGFzc0xpc3QuYWRkKFwiY20tdG9vbHRpcFwiKTtcbiAgICAgICAgaWYgKHRvb2x0aXAuYXJyb3cgJiYgIXRvb2x0aXBWaWV3LmRvbS5xdWVyeVNlbGVjdG9yKFwiLmNtLXRvb2x0aXAgPiAuY20tdG9vbHRpcC1hcnJvd1wiKSkge1xuICAgICAgICAgICAgbGV0IGFycm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGFycm93LmNsYXNzTmFtZSA9IFwiY20tdG9vbHRpcC1hcnJvd1wiO1xuICAgICAgICAgICAgdG9vbHRpcFZpZXcuZG9tLmFwcGVuZENoaWxkKGFycm93KTtcbiAgICAgICAgfVxuICAgICAgICB0b29sdGlwVmlldy5kb20uc3R5bGUucG9zaXRpb24gPSB0aGlzLnBvc2l0aW9uO1xuICAgICAgICB0b29sdGlwVmlldy5kb20uc3R5bGUudG9wID0gT3V0c2lkZTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodG9vbHRpcFZpZXcuZG9tKTtcbiAgICAgICAgaWYgKHRvb2x0aXBWaWV3Lm1vdW50KVxuICAgICAgICAgICAgdG9vbHRpcFZpZXcubW91bnQodGhpcy52aWV3KTtcbiAgICAgICAgcmV0dXJuIHRvb2x0aXBWaWV3O1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICB0aGlzLnZpZXcud2luLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5tZWFzdXJlU29vbik7XG4gICAgICAgIGZvciAobGV0IHRvb2x0aXBWaWV3IG9mIHRoaXMubWFuYWdlci50b29sdGlwVmlld3MpIHtcbiAgICAgICAgICAgIHRvb2x0aXBWaWV3LmRvbS5yZW1vdmUoKTtcbiAgICAgICAgICAgIChfYSA9IHRvb2x0aXBWaWV3LmRlc3Ryb3kpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jYWxsKHRvb2x0aXBWaWV3KTtcbiAgICAgICAgfVxuICAgICAgICAoX2IgPSB0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuZGlzY29ubmVjdCgpO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5tZWFzdXJlVGltZW91dCk7XG4gICAgfVxuICAgIHJlYWRNZWFzdXJlKCkge1xuICAgICAgICBsZXQgZWRpdG9yID0gdGhpcy52aWV3LmRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGVkaXRvcixcbiAgICAgICAgICAgIHBhcmVudDogdGhpcy5wYXJlbnQgPyB0aGlzLmNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSA6IGVkaXRvcixcbiAgICAgICAgICAgIHBvczogdGhpcy5tYW5hZ2VyLnRvb2x0aXBzLm1hcCgodCwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCB0diA9IHRoaXMubWFuYWdlci50b29sdGlwVmlld3NbaV07XG4gICAgICAgICAgICAgICAgcmV0dXJuIHR2LmdldENvb3JkcyA/IHR2LmdldENvb3Jkcyh0LnBvcykgOiB0aGlzLnZpZXcuY29vcmRzQXRQb3ModC5wb3MpO1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBzaXplOiB0aGlzLm1hbmFnZXIudG9vbHRpcFZpZXdzLm1hcCgoeyBkb20gfSkgPT4gZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKSxcbiAgICAgICAgICAgIHNwYWNlOiB0aGlzLnZpZXcuc3RhdGUuZmFjZXQodG9vbHRpcENvbmZpZykudG9vbHRpcFNwYWNlKHRoaXMudmlldyksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHdyaXRlTWVhc3VyZShtZWFzdXJlZCkge1xuICAgICAgICBsZXQgeyBlZGl0b3IsIHNwYWNlIH0gPSBtZWFzdXJlZDtcbiAgICAgICAgbGV0IG90aGVycyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWFuYWdlci50b29sdGlwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHRvb2x0aXAgPSB0aGlzLm1hbmFnZXIudG9vbHRpcHNbaV0sIHRWaWV3ID0gdGhpcy5tYW5hZ2VyLnRvb2x0aXBWaWV3c1tpXSwgeyBkb20gfSA9IHRWaWV3O1xuICAgICAgICAgICAgbGV0IHBvcyA9IG1lYXN1cmVkLnBvc1tpXSwgc2l6ZSA9IG1lYXN1cmVkLnNpemVbaV07XG4gICAgICAgICAgICAvLyBIaWRlIHRvb2x0aXBzIHRoYXQgYXJlIG91dHNpZGUgb2YgdGhlIGVkaXRvci5cbiAgICAgICAgICAgIGlmICghcG9zIHx8IHBvcy5ib3R0b20gPD0gTWF0aC5tYXgoZWRpdG9yLnRvcCwgc3BhY2UudG9wKSB8fFxuICAgICAgICAgICAgICAgIHBvcy50b3AgPj0gTWF0aC5taW4oZWRpdG9yLmJvdHRvbSwgc3BhY2UuYm90dG9tKSB8fFxuICAgICAgICAgICAgICAgIHBvcy5yaWdodCA8IE1hdGgubWF4KGVkaXRvci5sZWZ0LCBzcGFjZS5sZWZ0KSAtIC4xIHx8XG4gICAgICAgICAgICAgICAgcG9zLmxlZnQgPiBNYXRoLm1pbihlZGl0b3IucmlnaHQsIHNwYWNlLnJpZ2h0KSArIC4xKSB7XG4gICAgICAgICAgICAgICAgZG9tLnN0eWxlLnRvcCA9IE91dHNpZGU7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgYXJyb3cgPSB0b29sdGlwLmFycm93ID8gdFZpZXcuZG9tLnF1ZXJ5U2VsZWN0b3IoXCIuY20tdG9vbHRpcC1hcnJvd1wiKSA6IG51bGw7XG4gICAgICAgICAgICBsZXQgYXJyb3dIZWlnaHQgPSBhcnJvdyA/IDcgLyogQXJyb3cuU2l6ZSAqLyA6IDA7XG4gICAgICAgICAgICBsZXQgd2lkdGggPSBzaXplLnJpZ2h0IC0gc2l6ZS5sZWZ0LCBoZWlnaHQgPSBzaXplLmJvdHRvbSAtIHNpemUudG9wO1xuICAgICAgICAgICAgbGV0IG9mZnNldCA9IHRWaWV3Lm9mZnNldCB8fCBub09mZnNldCwgbHRyID0gdGhpcy52aWV3LnRleHREaXJlY3Rpb24gPT0gRGlyZWN0aW9uLkxUUjtcbiAgICAgICAgICAgIGxldCBsZWZ0ID0gc2l6ZS53aWR0aCA+IHNwYWNlLnJpZ2h0IC0gc3BhY2UubGVmdCA/IChsdHIgPyBzcGFjZS5sZWZ0IDogc3BhY2UucmlnaHQgLSBzaXplLndpZHRoKVxuICAgICAgICAgICAgICAgIDogbHRyID8gTWF0aC5taW4ocG9zLmxlZnQgLSAoYXJyb3cgPyAxNCAvKiBBcnJvdy5PZmZzZXQgKi8gOiAwKSArIG9mZnNldC54LCBzcGFjZS5yaWdodCAtIHdpZHRoKVxuICAgICAgICAgICAgICAgICAgICA6IE1hdGgubWF4KHNwYWNlLmxlZnQsIHBvcy5sZWZ0IC0gd2lkdGggKyAoYXJyb3cgPyAxNCAvKiBBcnJvdy5PZmZzZXQgKi8gOiAwKSAtIG9mZnNldC54KTtcbiAgICAgICAgICAgIGxldCBhYm92ZSA9ICEhdG9vbHRpcC5hYm92ZTtcbiAgICAgICAgICAgIGlmICghdG9vbHRpcC5zdHJpY3RTaWRlICYmIChhYm92ZVxuICAgICAgICAgICAgICAgID8gcG9zLnRvcCAtIChzaXplLmJvdHRvbSAtIHNpemUudG9wKSAtIG9mZnNldC55IDwgc3BhY2UudG9wXG4gICAgICAgICAgICAgICAgOiBwb3MuYm90dG9tICsgKHNpemUuYm90dG9tIC0gc2l6ZS50b3ApICsgb2Zmc2V0LnkgPiBzcGFjZS5ib3R0b20pICYmXG4gICAgICAgICAgICAgICAgYWJvdmUgPT0gKHNwYWNlLmJvdHRvbSAtIHBvcy5ib3R0b20gPiBwb3MudG9wIC0gc3BhY2UudG9wKSlcbiAgICAgICAgICAgICAgICBhYm92ZSA9ICFhYm92ZTtcbiAgICAgICAgICAgIGxldCB0b3AgPSBhYm92ZSA/IHBvcy50b3AgLSBoZWlnaHQgLSBhcnJvd0hlaWdodCAtIG9mZnNldC55IDogcG9zLmJvdHRvbSArIGFycm93SGVpZ2h0ICsgb2Zmc2V0Lnk7XG4gICAgICAgICAgICBsZXQgcmlnaHQgPSBsZWZ0ICsgd2lkdGg7XG4gICAgICAgICAgICBpZiAodFZpZXcub3ZlcmxhcCAhPT0gdHJ1ZSlcbiAgICAgICAgICAgICAgICBmb3IgKGxldCByIG9mIG90aGVycylcbiAgICAgICAgICAgICAgICAgICAgaWYgKHIubGVmdCA8IHJpZ2h0ICYmIHIucmlnaHQgPiBsZWZ0ICYmIHIudG9wIDwgdG9wICsgaGVpZ2h0ICYmIHIuYm90dG9tID4gdG9wKVxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0gYWJvdmUgPyByLnRvcCAtIGhlaWdodCAtIDIgLSBhcnJvd0hlaWdodCA6IHIuYm90dG9tICsgYXJyb3dIZWlnaHQgKyAyO1xuICAgICAgICAgICAgaWYgKHRoaXMucG9zaXRpb24gPT0gXCJhYnNvbHV0ZVwiKSB7XG4gICAgICAgICAgICAgICAgZG9tLnN0eWxlLnRvcCA9ICh0b3AgLSBtZWFzdXJlZC5wYXJlbnQudG9wKSArIFwicHhcIjtcbiAgICAgICAgICAgICAgICBkb20uc3R5bGUubGVmdCA9IChsZWZ0IC0gbWVhc3VyZWQucGFyZW50LmxlZnQpICsgXCJweFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZG9tLnN0eWxlLnRvcCA9IHRvcCArIFwicHhcIjtcbiAgICAgICAgICAgICAgICBkb20uc3R5bGUubGVmdCA9IGxlZnQgKyBcInB4XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXJyb3cpXG4gICAgICAgICAgICAgICAgYXJyb3cuc3R5bGUubGVmdCA9IGAke3Bvcy5sZWZ0ICsgKGx0ciA/IG9mZnNldC54IDogLW9mZnNldC54KSAtIChsZWZ0ICsgMTQgLyogQXJyb3cuT2Zmc2V0ICovIC0gNyAvKiBBcnJvdy5TaXplICovKX1weGA7XG4gICAgICAgICAgICBpZiAodFZpZXcub3ZlcmxhcCAhPT0gdHJ1ZSlcbiAgICAgICAgICAgICAgICBvdGhlcnMucHVzaCh7IGxlZnQsIHRvcCwgcmlnaHQsIGJvdHRvbTogdG9wICsgaGVpZ2h0IH0pO1xuICAgICAgICAgICAgZG9tLmNsYXNzTGlzdC50b2dnbGUoXCJjbS10b29sdGlwLWFib3ZlXCIsIGFib3ZlKTtcbiAgICAgICAgICAgIGRvbS5jbGFzc0xpc3QudG9nZ2xlKFwiY20tdG9vbHRpcC1iZWxvd1wiLCAhYWJvdmUpO1xuICAgICAgICAgICAgaWYgKHRWaWV3LnBvc2l0aW9uZWQpXG4gICAgICAgICAgICAgICAgdFZpZXcucG9zaXRpb25lZChtZWFzdXJlZC5zcGFjZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbWF5YmVNZWFzdXJlKCkge1xuICAgICAgICBpZiAodGhpcy5tYW5hZ2VyLnRvb2x0aXBzLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKHRoaXMudmlldy5pblZpZXcpXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3LnJlcXVlc3RNZWFzdXJlKHRoaXMubWVhc3VyZVJlcSk7XG4gICAgICAgICAgICBpZiAodGhpcy5pblZpZXcgIT0gdGhpcy52aWV3LmluVmlldykge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5WaWV3ID0gdGhpcy52aWV3LmluVmlldztcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaW5WaWV3KVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB0diBvZiB0aGlzLm1hbmFnZXIudG9vbHRpcFZpZXdzKVxuICAgICAgICAgICAgICAgICAgICAgICAgdHYuZG9tLnN0eWxlLnRvcCA9IE91dHNpZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59LCB7XG4gICAgZXZlbnRIYW5kbGVyczoge1xuICAgICAgICBzY3JvbGwoKSB7IHRoaXMubWF5YmVNZWFzdXJlKCk7IH1cbiAgICB9XG59KTtcbmNvbnN0IGJhc2VUaGVtZSA9IC8qQF9fUFVSRV9fKi9FZGl0b3JWaWV3LmJhc2VUaGVtZSh7XG4gICAgXCIuY20tdG9vbHRpcFwiOiB7XG4gICAgICAgIHpJbmRleDogMTAwXG4gICAgfSxcbiAgICBcIiZsaWdodCAuY20tdG9vbHRpcFwiOiB7XG4gICAgICAgIGJvcmRlcjogXCIxcHggc29saWQgI2JiYlwiLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiI2Y1ZjVmNVwiXG4gICAgfSxcbiAgICBcIiZsaWdodCAuY20tdG9vbHRpcC1zZWN0aW9uOm5vdCg6Zmlyc3QtY2hpbGQpXCI6IHtcbiAgICAgICAgYm9yZGVyVG9wOiBcIjFweCBzb2xpZCAjYmJiXCIsXG4gICAgfSxcbiAgICBcIiZkYXJrIC5jbS10b29sdGlwXCI6IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiMzMzMzMzhcIixcbiAgICAgICAgY29sb3I6IFwid2hpdGVcIlxuICAgIH0sXG4gICAgXCIuY20tdG9vbHRpcC1hcnJvd1wiOiB7XG4gICAgICAgIGhlaWdodDogYCR7NyAvKiBBcnJvdy5TaXplICovfXB4YCxcbiAgICAgICAgd2lkdGg6IGAkezcgLyogQXJyb3cuU2l6ZSAqLyAqIDJ9cHhgLFxuICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgICAgICB6SW5kZXg6IC0xLFxuICAgICAgICBvdmVyZmxvdzogXCJoaWRkZW5cIixcbiAgICAgICAgXCImOmJlZm9yZSwgJjphZnRlclwiOiB7XG4gICAgICAgICAgICBjb250ZW50OiBcIicnXCIsXG4gICAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgICAgICAgICAgd2lkdGg6IDAsXG4gICAgICAgICAgICBoZWlnaHQ6IDAsXG4gICAgICAgICAgICBib3JkZXJMZWZ0OiBgJHs3IC8qIEFycm93LlNpemUgKi99cHggc29saWQgdHJhbnNwYXJlbnRgLFxuICAgICAgICAgICAgYm9yZGVyUmlnaHQ6IGAkezcgLyogQXJyb3cuU2l6ZSAqL31weCBzb2xpZCB0cmFuc3BhcmVudGAsXG4gICAgICAgIH0sXG4gICAgICAgIFwiLmNtLXRvb2x0aXAtYWJvdmUgJlwiOiB7XG4gICAgICAgICAgICBib3R0b206IGAtJHs3IC8qIEFycm93LlNpemUgKi99cHhgLFxuICAgICAgICAgICAgXCImOmJlZm9yZVwiOiB7XG4gICAgICAgICAgICAgICAgYm9yZGVyVG9wOiBgJHs3IC8qIEFycm93LlNpemUgKi99cHggc29saWQgI2JiYmAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCImOmFmdGVyXCI6IHtcbiAgICAgICAgICAgICAgICBib3JkZXJUb3A6IGAkezcgLyogQXJyb3cuU2l6ZSAqL31weCBzb2xpZCAjZjVmNWY1YCxcbiAgICAgICAgICAgICAgICBib3R0b206IFwiMXB4XCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCIuY20tdG9vbHRpcC1iZWxvdyAmXCI6IHtcbiAgICAgICAgICAgIHRvcDogYC0kezcgLyogQXJyb3cuU2l6ZSAqL31weGAsXG4gICAgICAgICAgICBcIiY6YmVmb3JlXCI6IHtcbiAgICAgICAgICAgICAgICBib3JkZXJCb3R0b206IGAkezcgLyogQXJyb3cuU2l6ZSAqL31weCBzb2xpZCAjYmJiYCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIiY6YWZ0ZXJcIjoge1xuICAgICAgICAgICAgICAgIGJvcmRlckJvdHRvbTogYCR7NyAvKiBBcnJvdy5TaXplICovfXB4IHNvbGlkICNmNWY1ZjVgLFxuICAgICAgICAgICAgICAgIHRvcDogXCIxcHhcIlxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgIH0sXG4gICAgXCImZGFyayAuY20tdG9vbHRpcCAuY20tdG9vbHRpcC1hcnJvd1wiOiB7XG4gICAgICAgIFwiJjpiZWZvcmVcIjoge1xuICAgICAgICAgICAgYm9yZGVyVG9wQ29sb3I6IFwiIzMzMzMzOFwiLFxuICAgICAgICAgICAgYm9yZGVyQm90dG9tQ29sb3I6IFwiIzMzMzMzOFwiXG4gICAgICAgIH0sXG4gICAgICAgIFwiJjphZnRlclwiOiB7XG4gICAgICAgICAgICBib3JkZXJUb3BDb2xvcjogXCJ0cmFuc3BhcmVudFwiLFxuICAgICAgICAgICAgYm9yZGVyQm90dG9tQ29sb3I6IFwidHJhbnNwYXJlbnRcIlxuICAgICAgICB9XG4gICAgfVxufSk7XG5jb25zdCBub09mZnNldCA9IHsgeDogMCwgeTogMCB9O1xuLyoqXG5GYWNldCB0byB3aGljaCBhbiBleHRlbnNpb24gY2FuIGFkZCBhIHZhbHVlIHRvIHNob3cgYSB0b29sdGlwLlxuKi9cbmNvbnN0IHNob3dUb29sdGlwID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgZW5hYmxlczogW3Rvb2x0aXBQbHVnaW4sIGJhc2VUaGVtZV1cbn0pO1xuY29uc3Qgc2hvd0hvdmVyVG9vbHRpcCA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmNsYXNzIEhvdmVyVG9vbHRpcEhvc3Qge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgdGhpcy5tb3VudGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5kb20uY2xhc3NMaXN0LmFkZChcImNtLXRvb2x0aXAtaG92ZXJcIik7XG4gICAgICAgIHRoaXMubWFuYWdlciA9IG5ldyBUb29sdGlwVmlld01hbmFnZXIodmlldywgc2hvd0hvdmVyVG9vbHRpcCwgdCA9PiB0aGlzLmNyZWF0ZUhvc3RlZFZpZXcodCkpO1xuICAgIH1cbiAgICAvLyBOZWVkcyB0byBiZSBzdGF0aWMgc28gdGhhdCBob3N0IHRvb2x0aXAgaW5zdGFuY2VzIGFsd2F5cyBtYXRjaFxuICAgIHN0YXRpYyBjcmVhdGUodmlldykge1xuICAgICAgICByZXR1cm4gbmV3IEhvdmVyVG9vbHRpcEhvc3Qodmlldyk7XG4gICAgfVxuICAgIGNyZWF0ZUhvc3RlZFZpZXcodG9vbHRpcCkge1xuICAgICAgICBsZXQgaG9zdGVkVmlldyA9IHRvb2x0aXAuY3JlYXRlKHRoaXMudmlldyk7XG4gICAgICAgIGhvc3RlZFZpZXcuZG9tLmNsYXNzTGlzdC5hZGQoXCJjbS10b29sdGlwLXNlY3Rpb25cIik7XG4gICAgICAgIHRoaXMuZG9tLmFwcGVuZENoaWxkKGhvc3RlZFZpZXcuZG9tKTtcbiAgICAgICAgaWYgKHRoaXMubW91bnRlZCAmJiBob3N0ZWRWaWV3Lm1vdW50KVxuICAgICAgICAgICAgaG9zdGVkVmlldy5tb3VudCh0aGlzLnZpZXcpO1xuICAgICAgICByZXR1cm4gaG9zdGVkVmlldztcbiAgICB9XG4gICAgbW91bnQodmlldykge1xuICAgICAgICBmb3IgKGxldCBob3N0ZWRWaWV3IG9mIHRoaXMubWFuYWdlci50b29sdGlwVmlld3MpIHtcbiAgICAgICAgICAgIGlmIChob3N0ZWRWaWV3Lm1vdW50KVxuICAgICAgICAgICAgICAgIGhvc3RlZFZpZXcubW91bnQodmlldyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tb3VudGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgcG9zaXRpb25lZChzcGFjZSkge1xuICAgICAgICBmb3IgKGxldCBob3N0ZWRWaWV3IG9mIHRoaXMubWFuYWdlci50b29sdGlwVmlld3MpIHtcbiAgICAgICAgICAgIGlmIChob3N0ZWRWaWV3LnBvc2l0aW9uZWQpXG4gICAgICAgICAgICAgICAgaG9zdGVkVmlldy5wb3NpdGlvbmVkKHNwYWNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGUodXBkYXRlKSB7XG4gICAgICAgIHRoaXMubWFuYWdlci51cGRhdGUodXBkYXRlKTtcbiAgICB9XG59XG5jb25zdCBzaG93SG92ZXJUb29sdGlwSG9zdCA9IC8qQF9fUFVSRV9fKi9zaG93VG9vbHRpcC5jb21wdXRlKFtzaG93SG92ZXJUb29sdGlwXSwgc3RhdGUgPT4ge1xuICAgIGxldCB0b29sdGlwcyA9IHN0YXRlLmZhY2V0KHNob3dIb3ZlclRvb2x0aXApLmZpbHRlcih0ID0+IHQpO1xuICAgIGlmICh0b29sdGlwcy5sZW5ndGggPT09IDApXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIHJldHVybiB7XG4gICAgICAgIHBvczogTWF0aC5taW4oLi4udG9vbHRpcHMubWFwKHQgPT4gdC5wb3MpKSxcbiAgICAgICAgZW5kOiBNYXRoLm1heCguLi50b29sdGlwcy5maWx0ZXIodCA9PiB0LmVuZCAhPSBudWxsKS5tYXAodCA9PiB0LmVuZCkpLFxuICAgICAgICBjcmVhdGU6IEhvdmVyVG9vbHRpcEhvc3QuY3JlYXRlLFxuICAgICAgICBhYm92ZTogdG9vbHRpcHNbMF0uYWJvdmUsXG4gICAgICAgIGFycm93OiB0b29sdGlwcy5zb21lKHQgPT4gdC5hcnJvdyksXG4gICAgfTtcbn0pO1xuY2xhc3MgSG92ZXJQbHVnaW4ge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcsIHNvdXJjZSwgZmllbGQsIHNldEhvdmVyLCBob3ZlclRpbWUpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgIHRoaXMuZmllbGQgPSBmaWVsZDtcbiAgICAgICAgdGhpcy5zZXRIb3ZlciA9IHNldEhvdmVyO1xuICAgICAgICB0aGlzLmhvdmVyVGltZSA9IGhvdmVyVGltZTtcbiAgICAgICAgdGhpcy5ob3ZlclRpbWVvdXQgPSAtMTtcbiAgICAgICAgdGhpcy5yZXN0YXJ0VGltZW91dCA9IC0xO1xuICAgICAgICB0aGlzLnBlbmRpbmcgPSBudWxsO1xuICAgICAgICB0aGlzLmxhc3RNb3ZlID0geyB4OiAwLCB5OiAwLCB0YXJnZXQ6IHZpZXcuZG9tLCB0aW1lOiAwIH07XG4gICAgICAgIHRoaXMuY2hlY2tIb3ZlciA9IHRoaXMuY2hlY2tIb3Zlci5iaW5kKHRoaXMpO1xuICAgICAgICB2aWV3LmRvbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCB0aGlzLm1vdXNlbGVhdmUgPSB0aGlzLm1vdXNlbGVhdmUuYmluZCh0aGlzKSk7XG4gICAgICAgIHZpZXcuZG9tLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5tb3VzZW1vdmUgPSB0aGlzLm1vdXNlbW92ZS5iaW5kKHRoaXMpKTtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICBpZiAodGhpcy5wZW5kaW5nKSB7XG4gICAgICAgICAgICB0aGlzLnBlbmRpbmcgPSBudWxsO1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmVzdGFydFRpbWVvdXQpO1xuICAgICAgICAgICAgdGhpcy5yZXN0YXJ0VGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5zdGFydEhvdmVyKCksIDIwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgYWN0aXZlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52aWV3LnN0YXRlLmZpZWxkKHRoaXMuZmllbGQpO1xuICAgIH1cbiAgICBjaGVja0hvdmVyKCkge1xuICAgICAgICB0aGlzLmhvdmVyVGltZW91dCA9IC0xO1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCBob3ZlcmVkID0gRGF0ZS5ub3coKSAtIHRoaXMubGFzdE1vdmUudGltZTtcbiAgICAgICAgaWYgKGhvdmVyZWQgPCB0aGlzLmhvdmVyVGltZSlcbiAgICAgICAgICAgIHRoaXMuaG92ZXJUaW1lb3V0ID0gc2V0VGltZW91dCh0aGlzLmNoZWNrSG92ZXIsIHRoaXMuaG92ZXJUaW1lIC0gaG92ZXJlZCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRoaXMuc3RhcnRIb3ZlcigpO1xuICAgIH1cbiAgICBzdGFydEhvdmVyKCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5yZXN0YXJ0VGltZW91dCk7XG4gICAgICAgIGxldCB7IGxhc3RNb3ZlIH0gPSB0aGlzO1xuICAgICAgICBsZXQgcG9zID0gdGhpcy52aWV3LmNvbnRlbnRET00uY29udGFpbnMobGFzdE1vdmUudGFyZ2V0KSA/IHRoaXMudmlldy5wb3NBdENvb3JkcyhsYXN0TW92ZSkgOiBudWxsO1xuICAgICAgICBpZiAocG9zID09IG51bGwpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCBwb3NDb29yZHMgPSB0aGlzLnZpZXcuY29vcmRzQXRQb3MocG9zKTtcbiAgICAgICAgaWYgKHBvc0Nvb3JkcyA9PSBudWxsIHx8IGxhc3RNb3ZlLnkgPCBwb3NDb29yZHMudG9wIHx8IGxhc3RNb3ZlLnkgPiBwb3NDb29yZHMuYm90dG9tIHx8XG4gICAgICAgICAgICBsYXN0TW92ZS54IDwgcG9zQ29vcmRzLmxlZnQgLSB0aGlzLnZpZXcuZGVmYXVsdENoYXJhY3RlcldpZHRoIHx8XG4gICAgICAgICAgICBsYXN0TW92ZS54ID4gcG9zQ29vcmRzLnJpZ2h0ICsgdGhpcy52aWV3LmRlZmF1bHRDaGFyYWN0ZXJXaWR0aClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IGJpZGkgPSB0aGlzLnZpZXcuYmlkaVNwYW5zKHRoaXMudmlldy5zdGF0ZS5kb2MubGluZUF0KHBvcykpLmZpbmQocyA9PiBzLmZyb20gPD0gcG9zICYmIHMudG8gPj0gcG9zKTtcbiAgICAgICAgbGV0IHJ0bCA9IGJpZGkgJiYgYmlkaS5kaXIgPT0gRGlyZWN0aW9uLlJUTCA/IC0xIDogMTtcbiAgICAgICAgbGV0IG9wZW4gPSB0aGlzLnNvdXJjZSh0aGlzLnZpZXcsIHBvcywgKGxhc3RNb3ZlLnggPCBwb3NDb29yZHMubGVmdCA/IC1ydGwgOiBydGwpKTtcbiAgICAgICAgaWYgKG9wZW4gPT09IG51bGwgfHwgb3BlbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3Blbi50aGVuKSB7XG4gICAgICAgICAgICBsZXQgcGVuZGluZyA9IHRoaXMucGVuZGluZyA9IHsgcG9zIH07XG4gICAgICAgICAgICBvcGVuLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wZW5kaW5nID09IHBlbmRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IHRoaXMuc2V0SG92ZXIub2YocmVzdWx0KSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBlID0+IGxvZ0V4Y2VwdGlvbih0aGlzLnZpZXcuc3RhdGUsIGUsIFwiaG92ZXIgdG9vbHRpcFwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3Blbikge1xuICAgICAgICAgICAgdGhpcy52aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogdGhpcy5zZXRIb3Zlci5vZihvcGVuKSB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBtb3VzZW1vdmUoZXZlbnQpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0aGlzLmxhc3RNb3ZlID0geyB4OiBldmVudC5jbGllbnRYLCB5OiBldmVudC5jbGllbnRZLCB0YXJnZXQ6IGV2ZW50LnRhcmdldCwgdGltZTogRGF0ZS5ub3coKSB9O1xuICAgICAgICBpZiAodGhpcy5ob3ZlclRpbWVvdXQgPCAwKVxuICAgICAgICAgICAgdGhpcy5ob3ZlclRpbWVvdXQgPSBzZXRUaW1lb3V0KHRoaXMuY2hlY2tIb3ZlciwgdGhpcy5ob3ZlclRpbWUpO1xuICAgICAgICBsZXQgdG9vbHRpcCA9IHRoaXMuYWN0aXZlO1xuICAgICAgICBpZiAodG9vbHRpcCAmJiAhaXNJblRvb2x0aXAodGhpcy5sYXN0TW92ZS50YXJnZXQpIHx8IHRoaXMucGVuZGluZykge1xuICAgICAgICAgICAgbGV0IHsgcG9zIH0gPSB0b29sdGlwIHx8IHRoaXMucGVuZGluZywgZW5kID0gKF9hID0gdG9vbHRpcCA9PT0gbnVsbCB8fCB0b29sdGlwID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0b29sdGlwLmVuZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogcG9zO1xuICAgICAgICAgICAgaWYgKChwb3MgPT0gZW5kID8gdGhpcy52aWV3LnBvc0F0Q29vcmRzKHRoaXMubGFzdE1vdmUpICE9IHBvc1xuICAgICAgICAgICAgICAgIDogIWlzT3ZlclJhbmdlKHRoaXMudmlldywgcG9zLCBlbmQsIGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFksIDYgLyogSG92ZXIuTWF4RGlzdCAqLykpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogdGhpcy5zZXRIb3Zlci5vZihudWxsKSB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmcgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIG1vdXNlbGVhdmUoZSkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5ob3ZlclRpbWVvdXQpO1xuICAgICAgICB0aGlzLmhvdmVyVGltZW91dCA9IC0xO1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUgJiYgIWlzSW5Ub29sdGlwKGUucmVsYXRlZFRhcmdldCkpXG4gICAgICAgICAgICB0aGlzLnZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiB0aGlzLnNldEhvdmVyLm9mKG51bGwpIH0pO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5ob3ZlclRpbWVvdXQpO1xuICAgICAgICB0aGlzLnZpZXcuZG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsIHRoaXMubW91c2VsZWF2ZSk7XG4gICAgICAgIHRoaXMudmlldy5kb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLm1vdXNlbW92ZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gaXNJblRvb2x0aXAoZWx0KSB7XG4gICAgZm9yIChsZXQgY3VyID0gZWx0OyBjdXI7IGN1ciA9IGN1ci5wYXJlbnROb2RlKVxuICAgICAgICBpZiAoY3VyLm5vZGVUeXBlID09IDEgJiYgY3VyLmNsYXNzTGlzdC5jb250YWlucyhcImNtLXRvb2x0aXBcIikpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBpc092ZXJSYW5nZSh2aWV3LCBmcm9tLCB0bywgeCwgeSwgbWFyZ2luKSB7XG4gICAgbGV0IHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgICBsZXQgZnJvbURPTSA9IHZpZXcuZG9tQXRQb3MoZnJvbSksIHRvRE9NID0gdmlldy5kb21BdFBvcyh0byk7XG4gICAgcmFuZ2Uuc2V0RW5kKHRvRE9NLm5vZGUsIHRvRE9NLm9mZnNldCk7XG4gICAgcmFuZ2Uuc2V0U3RhcnQoZnJvbURPTS5ub2RlLCBmcm9tRE9NLm9mZnNldCk7XG4gICAgbGV0IHJlY3RzID0gcmFuZ2UuZ2V0Q2xpZW50UmVjdHMoKTtcbiAgICByYW5nZS5kZXRhY2goKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlY3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCByZWN0ID0gcmVjdHNbaV07XG4gICAgICAgIGxldCBkaXN0ID0gTWF0aC5tYXgocmVjdC50b3AgLSB5LCB5IC0gcmVjdC5ib3R0b20sIHJlY3QubGVmdCAtIHgsIHggLSByZWN0LnJpZ2h0KTtcbiAgICAgICAgaWYgKGRpc3QgPD0gbWFyZ2luKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8qKlxuU2V0IHVwIGEgaG92ZXIgdG9vbHRpcCwgd2hpY2ggc2hvd3MgdXAgd2hlbiB0aGUgcG9pbnRlciBob3ZlcnNcbm92ZXIgcmFuZ2VzIG9mIHRleHQuIFRoZSBjYWxsYmFjayBpcyBjYWxsZWQgd2hlbiB0aGUgbW91c2UgaG92ZXJzXG5vdmVyIHRoZSBkb2N1bWVudCB0ZXh0LiBJdCBzaG91bGQsIGlmIHRoZXJlIGlzIGEgdG9vbHRpcFxuYXNzb2NpYXRlZCB3aXRoIHBvc2l0aW9uIGBwb3NgLCByZXR1cm4gdGhlIHRvb2x0aXAgZGVzY3JpcHRpb25cbihlaXRoZXIgZGlyZWN0bHkgb3IgaW4gYSBwcm9taXNlKS4gVGhlIGBzaWRlYCBhcmd1bWVudCBpbmRpY2F0ZXNcbm9uIHdoaWNoIHNpZGUgb2YgdGhlIHBvc2l0aW9uIHRoZSBwb2ludGVyIGlzXHUyMDE0aXQgd2lsbCBiZSAtMSBpZiB0aGVcbnBvaW50ZXIgaXMgYmVmb3JlIHRoZSBwb3NpdGlvbiwgMSBpZiBhZnRlciB0aGUgcG9zaXRpb24uXG5cbk5vdGUgdGhhdCBhbGwgaG92ZXIgdG9vbHRpcHMgYXJlIGhvc3RlZCB3aXRoaW4gYSBzaW5nbGUgdG9vbHRpcFxuY29udGFpbmVyIGVsZW1lbnQuIFRoaXMgYWxsb3dzIG11bHRpcGxlIHRvb2x0aXBzIG92ZXIgdGhlIHNhbWVcbnJhbmdlIHRvIGJlIFwibWVyZ2VkXCIgdG9nZXRoZXIgd2l0aG91dCBvdmVybGFwcGluZy5cbiovXG5mdW5jdGlvbiBob3ZlclRvb2x0aXAoc291cmNlLCBvcHRpb25zID0ge30pIHtcbiAgICBsZXQgc2V0SG92ZXIgPSBTdGF0ZUVmZmVjdC5kZWZpbmUoKTtcbiAgICBsZXQgaG92ZXJTdGF0ZSA9IFN0YXRlRmllbGQuZGVmaW5lKHtcbiAgICAgICAgY3JlYXRlKCkgeyByZXR1cm4gbnVsbDsgfSxcbiAgICAgICAgdXBkYXRlKHZhbHVlLCB0cikge1xuICAgICAgICAgICAgaWYgKHZhbHVlICYmIChvcHRpb25zLmhpZGVPbkNoYW5nZSAmJiAodHIuZG9jQ2hhbmdlZCB8fCB0ci5zZWxlY3Rpb24pIHx8XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5oaWRlT24gJiYgb3B0aW9ucy5oaWRlT24odHIsIHZhbHVlKSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBpZiAodmFsdWUgJiYgdHIuZG9jQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgIGxldCBuZXdQb3MgPSB0ci5jaGFuZ2VzLm1hcFBvcyh2YWx1ZS5wb3MsIC0xLCBNYXBNb2RlLlRyYWNrRGVsKTtcbiAgICAgICAgICAgICAgICBpZiAobmV3UG9zID09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIGxldCBjb3B5ID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKG51bGwpLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgY29weS5wb3MgPSBuZXdQb3M7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlLmVuZCAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICBjb3B5LmVuZCA9IHRyLmNoYW5nZXMubWFwUG9zKHZhbHVlLmVuZCk7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBjb3B5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgZWZmZWN0IG9mIHRyLmVmZmVjdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWZmZWN0LmlzKHNldEhvdmVyKSlcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBlZmZlY3QudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKGVmZmVjdC5pcyhjbG9zZUhvdmVyVG9vbHRpcEVmZmVjdCkpXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgcHJvdmlkZTogZiA9PiBzaG93SG92ZXJUb29sdGlwLmZyb20oZilcbiAgICB9KTtcbiAgICByZXR1cm4gW1xuICAgICAgICBob3ZlclN0YXRlLFxuICAgICAgICBWaWV3UGx1Z2luLmRlZmluZSh2aWV3ID0+IG5ldyBIb3ZlclBsdWdpbih2aWV3LCBzb3VyY2UsIGhvdmVyU3RhdGUsIHNldEhvdmVyLCBvcHRpb25zLmhvdmVyVGltZSB8fCAzMDAgLyogSG92ZXIuVGltZSAqLykpLFxuICAgICAgICBzaG93SG92ZXJUb29sdGlwSG9zdFxuICAgIF07XG59XG4vKipcbkdldCB0aGUgYWN0aXZlIHRvb2x0aXAgdmlldyBmb3IgYSBnaXZlbiB0b29sdGlwLCBpZiBhdmFpbGFibGUuXG4qL1xuZnVuY3Rpb24gZ2V0VG9vbHRpcCh2aWV3LCB0b29sdGlwKSB7XG4gICAgbGV0IHBsdWdpbiA9IHZpZXcucGx1Z2luKHRvb2x0aXBQbHVnaW4pO1xuICAgIGlmICghcGx1Z2luKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgZm91bmQgPSBwbHVnaW4ubWFuYWdlci50b29sdGlwcy5pbmRleE9mKHRvb2x0aXApO1xuICAgIHJldHVybiBmb3VuZCA8IDAgPyBudWxsIDogcGx1Z2luLm1hbmFnZXIudG9vbHRpcFZpZXdzW2ZvdW5kXTtcbn1cbi8qKlxuUmV0dXJucyB0cnVlIGlmIGFueSBob3ZlciB0b29sdGlwcyBhcmUgY3VycmVudGx5IGFjdGl2ZS5cbiovXG5mdW5jdGlvbiBoYXNIb3ZlclRvb2x0aXBzKHN0YXRlKSB7XG4gICAgcmV0dXJuIHN0YXRlLmZhY2V0KHNob3dIb3ZlclRvb2x0aXApLnNvbWUoeCA9PiB4KTtcbn1cbmNvbnN0IGNsb3NlSG92ZXJUb29sdGlwRWZmZWN0ID0gLypAX19QVVJFX18qL1N0YXRlRWZmZWN0LmRlZmluZSgpO1xuLyoqXG5UcmFuc2FjdGlvbiBlZmZlY3QgdGhhdCBjbG9zZXMgYWxsIGhvdmVyIHRvb2x0aXBzLlxuKi9cbmNvbnN0IGNsb3NlSG92ZXJUb29sdGlwcyA9IC8qQF9fUFVSRV9fKi9jbG9zZUhvdmVyVG9vbHRpcEVmZmVjdC5vZihudWxsKTtcbi8qKlxuVGVsbCB0aGUgdG9vbHRpcCBleHRlbnNpb24gdG8gcmVjb21wdXRlIHRoZSBwb3NpdGlvbiBvZiB0aGUgYWN0aXZlXG50b29sdGlwcy4gVGhpcyBjYW4gYmUgdXNlZnVsIHdoZW4gc29tZXRoaW5nIGhhcHBlbnMgKHN1Y2ggYXMgYVxucmUtcG9zaXRpb25pbmcgb3IgQ1NTIGNoYW5nZSBhZmZlY3RpbmcgdGhlIGVkaXRvcikgdGhhdCBjb3VsZFxuaW52YWxpZGF0ZSB0aGUgZXhpc3RpbmcgdG9vbHRpcCBwb3NpdGlvbnMuXG4qL1xuZnVuY3Rpb24gcmVwb3NpdGlvblRvb2x0aXBzKHZpZXcpIHtcbiAgICB2YXIgX2E7XG4gICAgKF9hID0gdmlldy5wbHVnaW4odG9vbHRpcFBsdWdpbikpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tYXliZU1lYXN1cmUoKTtcbn1cblxuY29uc3QgcGFuZWxDb25maWcgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21iaW5lKGNvbmZpZ3MpIHtcbiAgICAgICAgbGV0IHRvcENvbnRhaW5lciwgYm90dG9tQ29udGFpbmVyO1xuICAgICAgICBmb3IgKGxldCBjIG9mIGNvbmZpZ3MpIHtcbiAgICAgICAgICAgIHRvcENvbnRhaW5lciA9IHRvcENvbnRhaW5lciB8fCBjLnRvcENvbnRhaW5lcjtcbiAgICAgICAgICAgIGJvdHRvbUNvbnRhaW5lciA9IGJvdHRvbUNvbnRhaW5lciB8fCBjLmJvdHRvbUNvbnRhaW5lcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB0b3BDb250YWluZXIsIGJvdHRvbUNvbnRhaW5lciB9O1xuICAgIH1cbn0pO1xuLyoqXG5Db25maWd1cmVzIHRoZSBwYW5lbC1tYW5hZ2luZyBleHRlbnNpb24uXG4qL1xuZnVuY3Rpb24gcGFuZWxzKGNvbmZpZykge1xuICAgIHJldHVybiBjb25maWcgPyBbcGFuZWxDb25maWcub2YoY29uZmlnKV0gOiBbXTtcbn1cbi8qKlxuR2V0IHRoZSBhY3RpdmUgcGFuZWwgY3JlYXRlZCBieSB0aGUgZ2l2ZW4gY29uc3RydWN0b3IsIGlmIGFueS5cblRoaXMgY2FuIGJlIHVzZWZ1bCB3aGVuIHlvdSBuZWVkIGFjY2VzcyB0byB5b3VyIHBhbmVscycgRE9NXG5zdHJ1Y3R1cmUuXG4qL1xuZnVuY3Rpb24gZ2V0UGFuZWwodmlldywgcGFuZWwpIHtcbiAgICBsZXQgcGx1Z2luID0gdmlldy5wbHVnaW4ocGFuZWxQbHVnaW4pO1xuICAgIGxldCBpbmRleCA9IHBsdWdpbiA/IHBsdWdpbi5zcGVjcy5pbmRleE9mKHBhbmVsKSA6IC0xO1xuICAgIHJldHVybiBpbmRleCA+IC0xID8gcGx1Z2luLnBhbmVsc1tpbmRleF0gOiBudWxsO1xufVxuY29uc3QgcGFuZWxQbHVnaW4gPSAvKkBfX1BVUkVfXyovVmlld1BsdWdpbi5mcm9tQ2xhc3MoY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcpIHtcbiAgICAgICAgdGhpcy5pbnB1dCA9IHZpZXcuc3RhdGUuZmFjZXQoc2hvd1BhbmVsKTtcbiAgICAgICAgdGhpcy5zcGVjcyA9IHRoaXMuaW5wdXQuZmlsdGVyKHMgPT4gcyk7XG4gICAgICAgIHRoaXMucGFuZWxzID0gdGhpcy5zcGVjcy5tYXAoc3BlYyA9PiBzcGVjKHZpZXcpKTtcbiAgICAgICAgbGV0IGNvbmYgPSB2aWV3LnN0YXRlLmZhY2V0KHBhbmVsQ29uZmlnKTtcbiAgICAgICAgdGhpcy50b3AgPSBuZXcgUGFuZWxHcm91cCh2aWV3LCB0cnVlLCBjb25mLnRvcENvbnRhaW5lcik7XG4gICAgICAgIHRoaXMuYm90dG9tID0gbmV3IFBhbmVsR3JvdXAodmlldywgZmFsc2UsIGNvbmYuYm90dG9tQ29udGFpbmVyKTtcbiAgICAgICAgdGhpcy50b3Auc3luYyh0aGlzLnBhbmVscy5maWx0ZXIocCA9PiBwLnRvcCkpO1xuICAgICAgICB0aGlzLmJvdHRvbS5zeW5jKHRoaXMucGFuZWxzLmZpbHRlcihwID0+ICFwLnRvcCkpO1xuICAgICAgICBmb3IgKGxldCBwIG9mIHRoaXMucGFuZWxzKSB7XG4gICAgICAgICAgICBwLmRvbS5jbGFzc0xpc3QuYWRkKFwiY20tcGFuZWxcIik7XG4gICAgICAgICAgICBpZiAocC5tb3VudClcbiAgICAgICAgICAgICAgICBwLm1vdW50KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICBsZXQgY29uZiA9IHVwZGF0ZS5zdGF0ZS5mYWNldChwYW5lbENvbmZpZyk7XG4gICAgICAgIGlmICh0aGlzLnRvcC5jb250YWluZXIgIT0gY29uZi50b3BDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMudG9wLnN5bmMoW10pO1xuICAgICAgICAgICAgdGhpcy50b3AgPSBuZXcgUGFuZWxHcm91cCh1cGRhdGUudmlldywgdHJ1ZSwgY29uZi50b3BDb250YWluZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmJvdHRvbS5jb250YWluZXIgIT0gY29uZi5ib3R0b21Db250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMuYm90dG9tLnN5bmMoW10pO1xuICAgICAgICAgICAgdGhpcy5ib3R0b20gPSBuZXcgUGFuZWxHcm91cCh1cGRhdGUudmlldywgZmFsc2UsIGNvbmYuYm90dG9tQ29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRvcC5zeW5jQ2xhc3NlcygpO1xuICAgICAgICB0aGlzLmJvdHRvbS5zeW5jQ2xhc3NlcygpO1xuICAgICAgICBsZXQgaW5wdXQgPSB1cGRhdGUuc3RhdGUuZmFjZXQoc2hvd1BhbmVsKTtcbiAgICAgICAgaWYgKGlucHV0ICE9IHRoaXMuaW5wdXQpIHtcbiAgICAgICAgICAgIGxldCBzcGVjcyA9IGlucHV0LmZpbHRlcih4ID0+IHgpO1xuICAgICAgICAgICAgbGV0IHBhbmVscyA9IFtdLCB0b3AgPSBbXSwgYm90dG9tID0gW10sIG1vdW50ID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBzcGVjIG9mIHNwZWNzKSB7XG4gICAgICAgICAgICAgICAgbGV0IGtub3duID0gdGhpcy5zcGVjcy5pbmRleE9mKHNwZWMpLCBwYW5lbDtcbiAgICAgICAgICAgICAgICBpZiAoa25vd24gPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhbmVsID0gc3BlYyh1cGRhdGUudmlldyk7XG4gICAgICAgICAgICAgICAgICAgIG1vdW50LnB1c2gocGFuZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGFuZWwgPSB0aGlzLnBhbmVsc1trbm93bl07XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYW5lbC51cGRhdGUpXG4gICAgICAgICAgICAgICAgICAgICAgICBwYW5lbC51cGRhdGUodXBkYXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGFuZWxzLnB1c2gocGFuZWwpO1xuICAgICAgICAgICAgICAgIChwYW5lbC50b3AgPyB0b3AgOiBib3R0b20pLnB1c2gocGFuZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zcGVjcyA9IHNwZWNzO1xuICAgICAgICAgICAgdGhpcy5wYW5lbHMgPSBwYW5lbHM7XG4gICAgICAgICAgICB0aGlzLnRvcC5zeW5jKHRvcCk7XG4gICAgICAgICAgICB0aGlzLmJvdHRvbS5zeW5jKGJvdHRvbSk7XG4gICAgICAgICAgICBmb3IgKGxldCBwIG9mIG1vdW50KSB7XG4gICAgICAgICAgICAgICAgcC5kb20uY2xhc3NMaXN0LmFkZChcImNtLXBhbmVsXCIpO1xuICAgICAgICAgICAgICAgIGlmIChwLm1vdW50KVxuICAgICAgICAgICAgICAgICAgICBwLm1vdW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGxldCBwIG9mIHRoaXMucGFuZWxzKVxuICAgICAgICAgICAgICAgIGlmIChwLnVwZGF0ZSlcbiAgICAgICAgICAgICAgICAgICAgcC51cGRhdGUodXBkYXRlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLnRvcC5zeW5jKFtdKTtcbiAgICAgICAgdGhpcy5ib3R0b20uc3luYyhbXSk7XG4gICAgfVxufSwge1xuICAgIHByb3ZpZGU6IHBsdWdpbiA9PiBFZGl0b3JWaWV3LnNjcm9sbE1hcmdpbnMub2YodmlldyA9PiB7XG4gICAgICAgIGxldCB2YWx1ZSA9IHZpZXcucGx1Z2luKHBsdWdpbik7XG4gICAgICAgIHJldHVybiB2YWx1ZSAmJiB7IHRvcDogdmFsdWUudG9wLnNjcm9sbE1hcmdpbigpLCBib3R0b206IHZhbHVlLmJvdHRvbS5zY3JvbGxNYXJnaW4oKSB9O1xuICAgIH0pXG59KTtcbmNsYXNzIFBhbmVsR3JvdXAge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcsIHRvcCwgY29udGFpbmVyKSB7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIHRoaXMudG9wID0gdG9wO1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgdGhpcy5kb20gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuY2xhc3NlcyA9IFwiXCI7XG4gICAgICAgIHRoaXMucGFuZWxzID0gW107XG4gICAgICAgIHRoaXMuc3luY0NsYXNzZXMoKTtcbiAgICB9XG4gICAgc3luYyhwYW5lbHMpIHtcbiAgICAgICAgZm9yIChsZXQgcCBvZiB0aGlzLnBhbmVscylcbiAgICAgICAgICAgIGlmIChwLmRlc3Ryb3kgJiYgcGFuZWxzLmluZGV4T2YocCkgPCAwKVxuICAgICAgICAgICAgICAgIHAuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLnBhbmVscyA9IHBhbmVscztcbiAgICAgICAgdGhpcy5zeW5jRE9NKCk7XG4gICAgfVxuICAgIHN5bmNET00oKSB7XG4gICAgICAgIGlmICh0aGlzLnBhbmVscy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZG9tKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kb20ucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kb20gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmRvbSkge1xuICAgICAgICAgICAgdGhpcy5kb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgdGhpcy5kb20uY2xhc3NOYW1lID0gdGhpcy50b3AgPyBcImNtLXBhbmVscyBjbS1wYW5lbHMtdG9wXCIgOiBcImNtLXBhbmVscyBjbS1wYW5lbHMtYm90dG9tXCI7XG4gICAgICAgICAgICB0aGlzLmRvbS5zdHlsZVt0aGlzLnRvcCA/IFwidG9wXCIgOiBcImJvdHRvbVwiXSA9IFwiMFwiO1xuICAgICAgICAgICAgbGV0IHBhcmVudCA9IHRoaXMuY29udGFpbmVyIHx8IHRoaXMudmlldy5kb207XG4gICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKHRoaXMuZG9tLCB0aGlzLnRvcCA/IHBhcmVudC5maXJzdENoaWxkIDogbnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGN1ckRPTSA9IHRoaXMuZG9tLmZpcnN0Q2hpbGQ7XG4gICAgICAgIGZvciAobGV0IHBhbmVsIG9mIHRoaXMucGFuZWxzKSB7XG4gICAgICAgICAgICBpZiAocGFuZWwuZG9tLnBhcmVudE5vZGUgPT0gdGhpcy5kb20pIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAoY3VyRE9NICE9IHBhbmVsLmRvbSlcbiAgICAgICAgICAgICAgICAgICAgY3VyRE9NID0gcm0oY3VyRE9NKTtcbiAgICAgICAgICAgICAgICBjdXJET00gPSBjdXJET00ubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRvbS5pbnNlcnRCZWZvcmUocGFuZWwuZG9tLCBjdXJET00pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChjdXJET00pXG4gICAgICAgICAgICBjdXJET00gPSBybShjdXJET00pO1xuICAgIH1cbiAgICBzY3JvbGxNYXJnaW4oKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5kb20gfHwgdGhpcy5jb250YWluZXIgPyAwXG4gICAgICAgICAgICA6IE1hdGgubWF4KDAsIHRoaXMudG9wID9cbiAgICAgICAgICAgICAgICB0aGlzLmRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20gLSBNYXRoLm1heCgwLCB0aGlzLnZpZXcuc2Nyb2xsRE9NLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCkgOlxuICAgICAgICAgICAgICAgIE1hdGgubWluKGlubmVySGVpZ2h0LCB0aGlzLnZpZXcuc2Nyb2xsRE9NLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbSkgLSB0aGlzLmRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3ApO1xuICAgIH1cbiAgICBzeW5jQ2xhc3NlcygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5lciB8fCB0aGlzLmNsYXNzZXMgPT0gdGhpcy52aWV3LnRoZW1lQ2xhc3NlcylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgZm9yIChsZXQgY2xzIG9mIHRoaXMuY2xhc3Nlcy5zcGxpdChcIiBcIikpXG4gICAgICAgICAgICBpZiAoY2xzKVxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoY2xzKTtcbiAgICAgICAgZm9yIChsZXQgY2xzIG9mICh0aGlzLmNsYXNzZXMgPSB0aGlzLnZpZXcudGhlbWVDbGFzc2VzKS5zcGxpdChcIiBcIikpXG4gICAgICAgICAgICBpZiAoY2xzKVxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoY2xzKTtcbiAgICB9XG59XG5mdW5jdGlvbiBybShub2RlKSB7XG4gICAgbGV0IG5leHQgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgIG5vZGUucmVtb3ZlKCk7XG4gICAgcmV0dXJuIG5leHQ7XG59XG4vKipcbk9wZW5pbmcgYSBwYW5lbCBpcyBkb25lIGJ5IHByb3ZpZGluZyBhIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIGZvclxudGhlIHBhbmVsIHRocm91Z2ggdGhpcyBmYWNldC4gKFRoZSBwYW5lbCBpcyBjbG9zZWQgYWdhaW4gd2hlbiBpdHNcbmNvbnN0cnVjdG9yIGlzIG5vIGxvbmdlciBwcm92aWRlZC4pIFZhbHVlcyBvZiBgbnVsbGAgYXJlIGlnbm9yZWQuXG4qL1xuY29uc3Qgc2hvd1BhbmVsID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgZW5hYmxlczogcGFuZWxQbHVnaW5cbn0pO1xuXG4vKipcbkEgZ3V0dGVyIG1hcmtlciByZXByZXNlbnRzIGEgYml0IG9mIGluZm9ybWF0aW9uIGF0dGFjaGVkIHRvIGEgbGluZVxuaW4gYSBzcGVjaWZpYyBndXR0ZXIuIFlvdXIgb3duIGN1c3RvbSBtYXJrZXJzIGhhdmUgdG8gZXh0ZW5kIHRoaXNcbmNsYXNzLlxuKi9cbmNsYXNzIEd1dHRlck1hcmtlciBleHRlbmRzIFJhbmdlVmFsdWUge1xuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29tcGFyZShvdGhlcikge1xuICAgICAgICByZXR1cm4gdGhpcyA9PSBvdGhlciB8fCB0aGlzLmNvbnN0cnVjdG9yID09IG90aGVyLmNvbnN0cnVjdG9yICYmIHRoaXMuZXEob3RoZXIpO1xuICAgIH1cbiAgICAvKipcbiAgICBDb21wYXJlIHRoaXMgbWFya2VyIHRvIGFub3RoZXIgbWFya2VyIG9mIHRoZSBzYW1lIHR5cGUuXG4gICAgKi9cbiAgICBlcShvdGhlcikgeyByZXR1cm4gZmFsc2U7IH1cbiAgICAvKipcbiAgICBDYWxsZWQgaWYgdGhlIG1hcmtlciBoYXMgYSBgdG9ET01gIG1ldGhvZCBhbmQgaXRzIHJlcHJlc2VudGF0aW9uXG4gICAgd2FzIHJlbW92ZWQgZnJvbSBhIGd1dHRlci5cbiAgICAqL1xuICAgIGRlc3Ryb3koZG9tKSB7IH1cbn1cbkd1dHRlck1hcmtlci5wcm90b3R5cGUuZWxlbWVudENsYXNzID0gXCJcIjtcbkd1dHRlck1hcmtlci5wcm90b3R5cGUudG9ET00gPSB1bmRlZmluZWQ7XG5HdXR0ZXJNYXJrZXIucHJvdG90eXBlLm1hcE1vZGUgPSBNYXBNb2RlLlRyYWNrQmVmb3JlO1xuR3V0dGVyTWFya2VyLnByb3RvdHlwZS5zdGFydFNpZGUgPSBHdXR0ZXJNYXJrZXIucHJvdG90eXBlLmVuZFNpZGUgPSAtMTtcbkd1dHRlck1hcmtlci5wcm90b3R5cGUucG9pbnQgPSB0cnVlO1xuLyoqXG5GYWNldCB1c2VkIHRvIGFkZCBhIGNsYXNzIHRvIGFsbCBndXR0ZXIgZWxlbWVudHMgZm9yIGEgZ2l2ZW4gbGluZS5cbk1hcmtlcnMgZ2l2ZW4gdG8gdGhpcyBmYWNldCBzaG91bGQgX29ubHlfIGRlZmluZSBhblxuW2BlbGVtZW50Y2xhc3NgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuR3V0dGVyTWFya2VyLmVsZW1lbnRDbGFzcyksIG5vdCBhXG5bYHRvRE9NYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3Lkd1dHRlck1hcmtlci50b0RPTSkgKG9yIHRoZSBtYXJrZXIgd2lsbCBhcHBlYXJcbmluIGFsbCBndXR0ZXJzIGZvciB0aGUgbGluZSkuXG4qL1xuY29uc3QgZ3V0dGVyTGluZUNsYXNzID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY29uc3QgZGVmYXVsdHMgPSB7XG4gICAgY2xhc3M6IFwiXCIsXG4gICAgcmVuZGVyRW1wdHlFbGVtZW50czogZmFsc2UsXG4gICAgZWxlbWVudFN0eWxlOiBcIlwiLFxuICAgIG1hcmtlcnM6ICgpID0+IFJhbmdlU2V0LmVtcHR5LFxuICAgIGxpbmVNYXJrZXI6ICgpID0+IG51bGwsXG4gICAgbGluZU1hcmtlckNoYW5nZTogbnVsbCxcbiAgICBpbml0aWFsU3BhY2VyOiBudWxsLFxuICAgIHVwZGF0ZVNwYWNlcjogbnVsbCxcbiAgICBkb21FdmVudEhhbmRsZXJzOiB7fVxufTtcbmNvbnN0IGFjdGl2ZUd1dHRlcnMgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG4vKipcbkRlZmluZSBhbiBlZGl0b3IgZ3V0dGVyLiBUaGUgb3JkZXIgaW4gd2hpY2ggdGhlIGd1dHRlcnMgYXBwZWFyIGlzXG5kZXRlcm1pbmVkIGJ5IHRoZWlyIGV4dGVuc2lvbiBwcmlvcml0eS5cbiovXG5mdW5jdGlvbiBndXR0ZXIoY29uZmlnKSB7XG4gICAgcmV0dXJuIFtndXR0ZXJzKCksIGFjdGl2ZUd1dHRlcnMub2YoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0cyksIGNvbmZpZykpXTtcbn1cbmNvbnN0IHVuZml4R3V0dGVycyA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmU6IHZhbHVlcyA9PiB2YWx1ZXMuc29tZSh4ID0+IHgpXG59KTtcbi8qKlxuVGhlIGd1dHRlci1kcmF3aW5nIHBsdWdpbiBpcyBhdXRvbWF0aWNhbGx5IGVuYWJsZWQgd2hlbiB5b3UgYWRkIGFcbmd1dHRlciwgYnV0IHlvdSBjYW4gdXNlIHRoaXMgZnVuY3Rpb24gdG8gZXhwbGljaXRseSBjb25maWd1cmUgaXQuXG5cblVubGVzcyBgZml4ZWRgIGlzIGV4cGxpY2l0bHkgc2V0IHRvIGBmYWxzZWAsIHRoZSBndXR0ZXJzIGFyZVxuZml4ZWQsIG1lYW5pbmcgdGhleSBkb24ndCBzY3JvbGwgYWxvbmcgd2l0aCB0aGUgY29udGVudFxuaG9yaXpvbnRhbGx5IChleGNlcHQgb24gSW50ZXJuZXQgRXhwbG9yZXIsIHdoaWNoIGRvZXNuJ3Qgc3VwcG9ydFxuQ1NTIFtgcG9zaXRpb246XG5zdGlja3lgXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvcG9zaXRpb24jc3RpY2t5KSkuXG4qL1xuZnVuY3Rpb24gZ3V0dGVycyhjb25maWcpIHtcbiAgICBsZXQgcmVzdWx0ID0gW1xuICAgICAgICBndXR0ZXJWaWV3LFxuICAgIF07XG4gICAgaWYgKGNvbmZpZyAmJiBjb25maWcuZml4ZWQgPT09IGZhbHNlKVxuICAgICAgICByZXN1bHQucHVzaCh1bmZpeEd1dHRlcnMub2YodHJ1ZSkpO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5jb25zdCBndXR0ZXJWaWV3ID0gLypAX19QVVJFX18qL1ZpZXdQbHVnaW4uZnJvbUNsYXNzKGNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3KSB7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIHRoaXMucHJldlZpZXdwb3J0ID0gdmlldy52aWV3cG9ydDtcbiAgICAgICAgdGhpcy5kb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLmRvbS5jbGFzc05hbWUgPSBcImNtLWd1dHRlcnNcIjtcbiAgICAgICAgdGhpcy5kb20uc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgXCJ0cnVlXCIpO1xuICAgICAgICB0aGlzLmRvbS5zdHlsZS5taW5IZWlnaHQgPSB0aGlzLnZpZXcuY29udGVudEhlaWdodCArIFwicHhcIjtcbiAgICAgICAgdGhpcy5ndXR0ZXJzID0gdmlldy5zdGF0ZS5mYWNldChhY3RpdmVHdXR0ZXJzKS5tYXAoY29uZiA9PiBuZXcgU2luZ2xlR3V0dGVyVmlldyh2aWV3LCBjb25mKSk7XG4gICAgICAgIGZvciAobGV0IGd1dHRlciBvZiB0aGlzLmd1dHRlcnMpXG4gICAgICAgICAgICB0aGlzLmRvbS5hcHBlbmRDaGlsZChndXR0ZXIuZG9tKTtcbiAgICAgICAgdGhpcy5maXhlZCA9ICF2aWV3LnN0YXRlLmZhY2V0KHVuZml4R3V0dGVycyk7XG4gICAgICAgIGlmICh0aGlzLmZpeGVkKSB7XG4gICAgICAgICAgICAvLyBGSVhNRSBJRTExIGZhbGxiYWNrLCB3aGljaCBkb2Vzbid0IHN1cHBvcnQgcG9zaXRpb246IHN0aWNreSxcbiAgICAgICAgICAgIC8vIGJ5IHVzaW5nIHBvc2l0aW9uOiByZWxhdGl2ZSArIGV2ZW50IGhhbmRsZXJzIHRoYXQgcmVhbGlnbiB0aGVcbiAgICAgICAgICAgIC8vIGd1dHRlciAob3IganVzdCBmb3JjZSBmaXhlZD1mYWxzZSBvbiBJRTExPylcbiAgICAgICAgICAgIHRoaXMuZG9tLnN0eWxlLnBvc2l0aW9uID0gXCJzdGlja3lcIjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN5bmNHdXR0ZXJzKGZhbHNlKTtcbiAgICAgICAgdmlldy5zY3JvbGxET00uaW5zZXJ0QmVmb3JlKHRoaXMuZG9tLCB2aWV3LmNvbnRlbnRET00pO1xuICAgIH1cbiAgICB1cGRhdGUodXBkYXRlKSB7XG4gICAgICAgIGlmICh0aGlzLnVwZGF0ZUd1dHRlcnModXBkYXRlKSkge1xuICAgICAgICAgICAgLy8gRGV0YWNoIGR1cmluZyBzeW5jIHdoZW4gdGhlIHZpZXdwb3J0IGNoYW5nZWQgc2lnbmlmaWNhbnRseVxuICAgICAgICAgICAgLy8gKHN1Y2ggYXMgZHVyaW5nIHNjcm9sbGluZyksIHNpbmNlIGZvciBsYXJnZSB1cGRhdGVzIHRoYXQgaXNcbiAgICAgICAgICAgIC8vIGZhc3Rlci5cbiAgICAgICAgICAgIGxldCB2cEEgPSB0aGlzLnByZXZWaWV3cG9ydCwgdnBCID0gdXBkYXRlLnZpZXcudmlld3BvcnQ7XG4gICAgICAgICAgICBsZXQgdnBPdmVybGFwID0gTWF0aC5taW4odnBBLnRvLCB2cEIudG8pIC0gTWF0aC5tYXgodnBBLmZyb20sIHZwQi5mcm9tKTtcbiAgICAgICAgICAgIHRoaXMuc3luY0d1dHRlcnModnBPdmVybGFwIDwgKHZwQi50byAtIHZwQi5mcm9tKSAqIDAuOCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVwZGF0ZS5nZW9tZXRyeUNoYW5nZWQpXG4gICAgICAgICAgICB0aGlzLmRvbS5zdHlsZS5taW5IZWlnaHQgPSB0aGlzLnZpZXcuY29udGVudEhlaWdodCArIFwicHhcIjtcbiAgICAgICAgaWYgKHRoaXMudmlldy5zdGF0ZS5mYWNldCh1bmZpeEd1dHRlcnMpICE9ICF0aGlzLmZpeGVkKSB7XG4gICAgICAgICAgICB0aGlzLmZpeGVkID0gIXRoaXMuZml4ZWQ7XG4gICAgICAgICAgICB0aGlzLmRvbS5zdHlsZS5wb3NpdGlvbiA9IHRoaXMuZml4ZWQgPyBcInN0aWNreVwiIDogXCJcIjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByZXZWaWV3cG9ydCA9IHVwZGF0ZS52aWV3LnZpZXdwb3J0O1xuICAgIH1cbiAgICBzeW5jR3V0dGVycyhkZXRhY2gpIHtcbiAgICAgICAgbGV0IGFmdGVyID0gdGhpcy5kb20ubmV4dFNpYmxpbmc7XG4gICAgICAgIGlmIChkZXRhY2gpXG4gICAgICAgICAgICB0aGlzLmRvbS5yZW1vdmUoKTtcbiAgICAgICAgbGV0IGxpbmVDbGFzc2VzID0gUmFuZ2VTZXQuaXRlcih0aGlzLnZpZXcuc3RhdGUuZmFjZXQoZ3V0dGVyTGluZUNsYXNzKSwgdGhpcy52aWV3LnZpZXdwb3J0LmZyb20pO1xuICAgICAgICBsZXQgY2xhc3NTZXQgPSBbXTtcbiAgICAgICAgbGV0IGNvbnRleHRzID0gdGhpcy5ndXR0ZXJzLm1hcChndXR0ZXIgPT4gbmV3IFVwZGF0ZUNvbnRleHQoZ3V0dGVyLCB0aGlzLnZpZXcudmlld3BvcnQsIC10aGlzLnZpZXcuZG9jdW1lbnRQYWRkaW5nLnRvcCkpO1xuICAgICAgICBmb3IgKGxldCBsaW5lIG9mIHRoaXMudmlldy52aWV3cG9ydExpbmVCbG9ja3MpIHtcbiAgICAgICAgICAgIGxldCB0ZXh0O1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobGluZS50eXBlKSkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGIgb2YgbGluZS50eXBlKVxuICAgICAgICAgICAgICAgICAgICBpZiAoYi50eXBlID09IEJsb2NrVHlwZS5UZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gYjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0ZXh0ID0gbGluZS50eXBlID09IEJsb2NrVHlwZS5UZXh0ID8gbGluZSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGV4dClcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGlmIChjbGFzc1NldC5sZW5ndGgpXG4gICAgICAgICAgICAgICAgY2xhc3NTZXQgPSBbXTtcbiAgICAgICAgICAgIGFkdmFuY2VDdXJzb3IobGluZUNsYXNzZXMsIGNsYXNzU2V0LCBsaW5lLmZyb20pO1xuICAgICAgICAgICAgZm9yIChsZXQgY3ggb2YgY29udGV4dHMpXG4gICAgICAgICAgICAgICAgY3gubGluZSh0aGlzLnZpZXcsIHRleHQsIGNsYXNzU2V0KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBjeCBvZiBjb250ZXh0cylcbiAgICAgICAgICAgIGN4LmZpbmlzaCgpO1xuICAgICAgICBpZiAoZGV0YWNoKVxuICAgICAgICAgICAgdGhpcy52aWV3LnNjcm9sbERPTS5pbnNlcnRCZWZvcmUodGhpcy5kb20sIGFmdGVyKTtcbiAgICB9XG4gICAgdXBkYXRlR3V0dGVycyh1cGRhdGUpIHtcbiAgICAgICAgbGV0IHByZXYgPSB1cGRhdGUuc3RhcnRTdGF0ZS5mYWNldChhY3RpdmVHdXR0ZXJzKSwgY3VyID0gdXBkYXRlLnN0YXRlLmZhY2V0KGFjdGl2ZUd1dHRlcnMpO1xuICAgICAgICBsZXQgY2hhbmdlID0gdXBkYXRlLmRvY0NoYW5nZWQgfHwgdXBkYXRlLmhlaWdodENoYW5nZWQgfHwgdXBkYXRlLnZpZXdwb3J0Q2hhbmdlZCB8fFxuICAgICAgICAgICAgIVJhbmdlU2V0LmVxKHVwZGF0ZS5zdGFydFN0YXRlLmZhY2V0KGd1dHRlckxpbmVDbGFzcyksIHVwZGF0ZS5zdGF0ZS5mYWNldChndXR0ZXJMaW5lQ2xhc3MpLCB1cGRhdGUudmlldy52aWV3cG9ydC5mcm9tLCB1cGRhdGUudmlldy52aWV3cG9ydC50byk7XG4gICAgICAgIGlmIChwcmV2ID09IGN1cikge1xuICAgICAgICAgICAgZm9yIChsZXQgZ3V0dGVyIG9mIHRoaXMuZ3V0dGVycylcbiAgICAgICAgICAgICAgICBpZiAoZ3V0dGVyLnVwZGF0ZSh1cGRhdGUpKVxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2UgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2hhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgIGxldCBndXR0ZXJzID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBjb25mIG9mIGN1cikge1xuICAgICAgICAgICAgICAgIGxldCBrbm93biA9IHByZXYuaW5kZXhPZihjb25mKTtcbiAgICAgICAgICAgICAgICBpZiAoa25vd24gPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGd1dHRlcnMucHVzaChuZXcgU2luZ2xlR3V0dGVyVmlldyh0aGlzLnZpZXcsIGNvbmYpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ3V0dGVyc1trbm93bl0udXBkYXRlKHVwZGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGd1dHRlcnMucHVzaCh0aGlzLmd1dHRlcnNba25vd25dKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCBnIG9mIHRoaXMuZ3V0dGVycykge1xuICAgICAgICAgICAgICAgIGcuZG9tLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIGlmIChndXR0ZXJzLmluZGV4T2YoZykgPCAwKVxuICAgICAgICAgICAgICAgICAgICBnLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IGcgb2YgZ3V0dGVycylcbiAgICAgICAgICAgICAgICB0aGlzLmRvbS5hcHBlbmRDaGlsZChnLmRvbSk7XG4gICAgICAgICAgICB0aGlzLmd1dHRlcnMgPSBndXR0ZXJzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjaGFuZ2U7XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGZvciAobGV0IHZpZXcgb2YgdGhpcy5ndXR0ZXJzKVxuICAgICAgICAgICAgdmlldy5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMuZG9tLnJlbW92ZSgpO1xuICAgIH1cbn0sIHtcbiAgICBwcm92aWRlOiBwbHVnaW4gPT4gRWRpdG9yVmlldy5zY3JvbGxNYXJnaW5zLm9mKHZpZXcgPT4ge1xuICAgICAgICBsZXQgdmFsdWUgPSB2aWV3LnBsdWdpbihwbHVnaW4pO1xuICAgICAgICBpZiAoIXZhbHVlIHx8IHZhbHVlLmd1dHRlcnMubGVuZ3RoID09IDAgfHwgIXZhbHVlLmZpeGVkKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiB2aWV3LnRleHREaXJlY3Rpb24gPT0gRGlyZWN0aW9uLkxUUiA/IHsgbGVmdDogdmFsdWUuZG9tLm9mZnNldFdpZHRoIH0gOiB7IHJpZ2h0OiB2YWx1ZS5kb20ub2Zmc2V0V2lkdGggfTtcbiAgICB9KVxufSk7XG5mdW5jdGlvbiBhc0FycmF5KHZhbCkgeyByZXR1cm4gKEFycmF5LmlzQXJyYXkodmFsKSA/IHZhbCA6IFt2YWxdKTsgfVxuZnVuY3Rpb24gYWR2YW5jZUN1cnNvcihjdXJzb3IsIGNvbGxlY3QsIHBvcykge1xuICAgIHdoaWxlIChjdXJzb3IudmFsdWUgJiYgY3Vyc29yLmZyb20gPD0gcG9zKSB7XG4gICAgICAgIGlmIChjdXJzb3IuZnJvbSA9PSBwb3MpXG4gICAgICAgICAgICBjb2xsZWN0LnB1c2goY3Vyc29yLnZhbHVlKTtcbiAgICAgICAgY3Vyc29yLm5leHQoKTtcbiAgICB9XG59XG5jbGFzcyBVcGRhdGVDb250ZXh0IHtcbiAgICBjb25zdHJ1Y3RvcihndXR0ZXIsIHZpZXdwb3J0LCBoZWlnaHQpIHtcbiAgICAgICAgdGhpcy5ndXR0ZXIgPSBndXR0ZXI7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB0aGlzLmxvY2FsTWFya2VycyA9IFtdO1xuICAgICAgICB0aGlzLmkgPSAwO1xuICAgICAgICB0aGlzLmN1cnNvciA9IFJhbmdlU2V0Lml0ZXIoZ3V0dGVyLm1hcmtlcnMsIHZpZXdwb3J0LmZyb20pO1xuICAgIH1cbiAgICBsaW5lKHZpZXcsIGxpbmUsIGV4dHJhTWFya2Vycykge1xuICAgICAgICBpZiAodGhpcy5sb2NhbE1hcmtlcnMubGVuZ3RoKVxuICAgICAgICAgICAgdGhpcy5sb2NhbE1hcmtlcnMgPSBbXTtcbiAgICAgICAgYWR2YW5jZUN1cnNvcih0aGlzLmN1cnNvciwgdGhpcy5sb2NhbE1hcmtlcnMsIGxpbmUuZnJvbSk7XG4gICAgICAgIGxldCBsb2NhbE1hcmtlcnMgPSBleHRyYU1hcmtlcnMubGVuZ3RoID8gdGhpcy5sb2NhbE1hcmtlcnMuY29uY2F0KGV4dHJhTWFya2VycykgOiB0aGlzLmxvY2FsTWFya2VycztcbiAgICAgICAgbGV0IGZvckxpbmUgPSB0aGlzLmd1dHRlci5jb25maWcubGluZU1hcmtlcih2aWV3LCBsaW5lLCBsb2NhbE1hcmtlcnMpO1xuICAgICAgICBpZiAoZm9yTGluZSlcbiAgICAgICAgICAgIGxvY2FsTWFya2Vycy51bnNoaWZ0KGZvckxpbmUpO1xuICAgICAgICBsZXQgZ3V0dGVyID0gdGhpcy5ndXR0ZXI7XG4gICAgICAgIGlmIChsb2NhbE1hcmtlcnMubGVuZ3RoID09IDAgJiYgIWd1dHRlci5jb25maWcucmVuZGVyRW1wdHlFbGVtZW50cylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IGFib3ZlID0gbGluZS50b3AgLSB0aGlzLmhlaWdodDtcbiAgICAgICAgaWYgKHRoaXMuaSA9PSBndXR0ZXIuZWxlbWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBsZXQgbmV3RWx0ID0gbmV3IEd1dHRlckVsZW1lbnQodmlldywgbGluZS5oZWlnaHQsIGFib3ZlLCBsb2NhbE1hcmtlcnMpO1xuICAgICAgICAgICAgZ3V0dGVyLmVsZW1lbnRzLnB1c2gobmV3RWx0KTtcbiAgICAgICAgICAgIGd1dHRlci5kb20uYXBwZW5kQ2hpbGQobmV3RWx0LmRvbSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBndXR0ZXIuZWxlbWVudHNbdGhpcy5pXS51cGRhdGUodmlldywgbGluZS5oZWlnaHQsIGFib3ZlLCBsb2NhbE1hcmtlcnMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gbGluZS5ib3R0b207XG4gICAgICAgIHRoaXMuaSsrO1xuICAgIH1cbiAgICBmaW5pc2goKSB7XG4gICAgICAgIGxldCBndXR0ZXIgPSB0aGlzLmd1dHRlcjtcbiAgICAgICAgd2hpbGUgKGd1dHRlci5lbGVtZW50cy5sZW5ndGggPiB0aGlzLmkpIHtcbiAgICAgICAgICAgIGxldCBsYXN0ID0gZ3V0dGVyLmVsZW1lbnRzLnBvcCgpO1xuICAgICAgICAgICAgZ3V0dGVyLmRvbS5yZW1vdmVDaGlsZChsYXN0LmRvbSk7XG4gICAgICAgICAgICBsYXN0LmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmNsYXNzIFNpbmdsZUd1dHRlclZpZXcge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcsIGNvbmZpZykge1xuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy5lbGVtZW50cyA9IFtdO1xuICAgICAgICB0aGlzLnNwYWNlciA9IG51bGw7XG4gICAgICAgIHRoaXMuZG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5kb20uY2xhc3NOYW1lID0gXCJjbS1ndXR0ZXJcIiArICh0aGlzLmNvbmZpZy5jbGFzcyA/IFwiIFwiICsgdGhpcy5jb25maWcuY2xhc3MgOiBcIlwiKTtcbiAgICAgICAgZm9yIChsZXQgcHJvcCBpbiBjb25maWcuZG9tRXZlbnRIYW5kbGVycykge1xuICAgICAgICAgICAgdGhpcy5kb20uYWRkRXZlbnRMaXN0ZW5lcihwcm9wLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgbGluZSA9IHZpZXcubGluZUJsb2NrQXRIZWlnaHQoZXZlbnQuY2xpZW50WSAtIHZpZXcuZG9jdW1lbnRUb3ApO1xuICAgICAgICAgICAgICAgIGlmIChjb25maWcuZG9tRXZlbnRIYW5kbGVyc1twcm9wXSh2aWV3LCBsaW5lLCBldmVudCkpXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1hcmtlcnMgPSBhc0FycmF5KGNvbmZpZy5tYXJrZXJzKHZpZXcpKTtcbiAgICAgICAgaWYgKGNvbmZpZy5pbml0aWFsU3BhY2VyKSB7XG4gICAgICAgICAgICB0aGlzLnNwYWNlciA9IG5ldyBHdXR0ZXJFbGVtZW50KHZpZXcsIDAsIDAsIFtjb25maWcuaW5pdGlhbFNwYWNlcih2aWV3KV0pO1xuICAgICAgICAgICAgdGhpcy5kb20uYXBwZW5kQ2hpbGQodGhpcy5zcGFjZXIuZG9tKTtcbiAgICAgICAgICAgIHRoaXMuc3BhY2VyLmRvbS5zdHlsZS5jc3NUZXh0ICs9IFwidmlzaWJpbGl0eTogaGlkZGVuOyBwb2ludGVyLWV2ZW50czogbm9uZVwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgbGV0IHByZXZNYXJrZXJzID0gdGhpcy5tYXJrZXJzO1xuICAgICAgICB0aGlzLm1hcmtlcnMgPSBhc0FycmF5KHRoaXMuY29uZmlnLm1hcmtlcnModXBkYXRlLnZpZXcpKTtcbiAgICAgICAgaWYgKHRoaXMuc3BhY2VyICYmIHRoaXMuY29uZmlnLnVwZGF0ZVNwYWNlcikge1xuICAgICAgICAgICAgbGV0IHVwZGF0ZWQgPSB0aGlzLmNvbmZpZy51cGRhdGVTcGFjZXIodGhpcy5zcGFjZXIubWFya2Vyc1swXSwgdXBkYXRlKTtcbiAgICAgICAgICAgIGlmICh1cGRhdGVkICE9IHRoaXMuc3BhY2VyLm1hcmtlcnNbMF0pXG4gICAgICAgICAgICAgICAgdGhpcy5zcGFjZXIudXBkYXRlKHVwZGF0ZS52aWV3LCAwLCAwLCBbdXBkYXRlZF0pO1xuICAgICAgICB9XG4gICAgICAgIGxldCB2cCA9IHVwZGF0ZS52aWV3LnZpZXdwb3J0O1xuICAgICAgICByZXR1cm4gIVJhbmdlU2V0LmVxKHRoaXMubWFya2VycywgcHJldk1hcmtlcnMsIHZwLmZyb20sIHZwLnRvKSB8fFxuICAgICAgICAgICAgKHRoaXMuY29uZmlnLmxpbmVNYXJrZXJDaGFuZ2UgPyB0aGlzLmNvbmZpZy5saW5lTWFya2VyQ2hhbmdlKHVwZGF0ZSkgOiBmYWxzZSk7XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGZvciAobGV0IGVsdCBvZiB0aGlzLmVsZW1lbnRzKVxuICAgICAgICAgICAgZWx0LmRlc3Ryb3koKTtcbiAgICB9XG59XG5jbGFzcyBHdXR0ZXJFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3LCBoZWlnaHQsIGFib3ZlLCBtYXJrZXJzKSB7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gLTE7XG4gICAgICAgIHRoaXMuYWJvdmUgPSAwO1xuICAgICAgICB0aGlzLm1hcmtlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5kb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLmRvbS5jbGFzc05hbWUgPSBcImNtLWd1dHRlckVsZW1lbnRcIjtcbiAgICAgICAgdGhpcy51cGRhdGUodmlldywgaGVpZ2h0LCBhYm92ZSwgbWFya2Vycyk7XG4gICAgfVxuICAgIHVwZGF0ZSh2aWV3LCBoZWlnaHQsIGFib3ZlLCBtYXJrZXJzKSB7XG4gICAgICAgIGlmICh0aGlzLmhlaWdodCAhPSBoZWlnaHQpXG4gICAgICAgICAgICB0aGlzLmRvbS5zdHlsZS5oZWlnaHQgPSAodGhpcy5oZWlnaHQgPSBoZWlnaHQpICsgXCJweFwiO1xuICAgICAgICBpZiAodGhpcy5hYm92ZSAhPSBhYm92ZSlcbiAgICAgICAgICAgIHRoaXMuZG9tLnN0eWxlLm1hcmdpblRvcCA9ICh0aGlzLmFib3ZlID0gYWJvdmUpID8gYWJvdmUgKyBcInB4XCIgOiBcIlwiO1xuICAgICAgICBpZiAoIXNhbWVNYXJrZXJzKHRoaXMubWFya2VycywgbWFya2VycykpXG4gICAgICAgICAgICB0aGlzLnNldE1hcmtlcnModmlldywgbWFya2Vycyk7XG4gICAgfVxuICAgIHNldE1hcmtlcnModmlldywgbWFya2Vycykge1xuICAgICAgICBsZXQgY2xzID0gXCJjbS1ndXR0ZXJFbGVtZW50XCIsIGRvbVBvcyA9IHRoaXMuZG9tLmZpcnN0Q2hpbGQ7XG4gICAgICAgIGZvciAobGV0IGlOZXcgPSAwLCBpT2xkID0gMDs7KSB7XG4gICAgICAgICAgICBsZXQgc2tpcFRvID0gaU9sZCwgbWFya2VyID0gaU5ldyA8IG1hcmtlcnMubGVuZ3RoID8gbWFya2Vyc1tpTmV3KytdIDogbnVsbCwgbWF0Y2hlZCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKG1hcmtlcikge1xuICAgICAgICAgICAgICAgIGxldCBjID0gbWFya2VyLmVsZW1lbnRDbGFzcztcbiAgICAgICAgICAgICAgICBpZiAoYylcbiAgICAgICAgICAgICAgICAgICAgY2xzICs9IFwiIFwiICsgYztcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gaU9sZDsgaSA8IHRoaXMubWFya2Vycy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWFya2Vyc1tpXS5jb21wYXJlKG1hcmtlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNraXBUbyA9IGk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBza2lwVG8gPSB0aGlzLm1hcmtlcnMubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKGlPbGQgPCBza2lwVG8pIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IHRoaXMubWFya2Vyc1tpT2xkKytdO1xuICAgICAgICAgICAgICAgIGlmIChuZXh0LnRvRE9NKSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHQuZGVzdHJveShkb21Qb3MpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgYWZ0ZXIgPSBkb21Qb3MubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgICAgIGRvbVBvcy5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgZG9tUG9zID0gYWZ0ZXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFtYXJrZXIpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBpZiAobWFya2VyLnRvRE9NKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoZWQpXG4gICAgICAgICAgICAgICAgICAgIGRvbVBvcyA9IGRvbVBvcy5uZXh0U2libGluZztcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZG9tLmluc2VydEJlZm9yZShtYXJrZXIudG9ET00odmlldyksIGRvbVBvcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWF0Y2hlZClcbiAgICAgICAgICAgICAgICBpT2xkKys7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kb20uY2xhc3NOYW1lID0gY2xzO1xuICAgICAgICB0aGlzLm1hcmtlcnMgPSBtYXJrZXJzO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLnNldE1hcmtlcnMobnVsbCwgW10pOyAvLyBGaXJzdCBhcmd1bWVudCBub3QgdXNlZCB1bmxlc3MgY3JlYXRpbmcgbWFya2Vyc1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNhbWVNYXJrZXJzKGEsIGIpIHtcbiAgICBpZiAoYS5sZW5ndGggIT0gYi5sZW5ndGgpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspXG4gICAgICAgIGlmICghYVtpXS5jb21wYXJlKGJbaV0pKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xufVxuLyoqXG5GYWNldCB1c2VkIHRvIHByb3ZpZGUgbWFya2VycyB0byB0aGUgbGluZSBudW1iZXIgZ3V0dGVyLlxuKi9cbmNvbnN0IGxpbmVOdW1iZXJNYXJrZXJzID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY29uc3QgbGluZU51bWJlckNvbmZpZyA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmUodmFsdWVzKSB7XG4gICAgICAgIHJldHVybiBjb21iaW5lQ29uZmlnKHZhbHVlcywgeyBmb3JtYXROdW1iZXI6IFN0cmluZywgZG9tRXZlbnRIYW5kbGVyczoge30gfSwge1xuICAgICAgICAgICAgZG9tRXZlbnRIYW5kbGVycyhhLCBiKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IE9iamVjdC5hc3NpZ24oe30sIGEpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGV2ZW50IGluIGIpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGV4aXN0cyA9IHJlc3VsdFtldmVudF0sIGFkZCA9IGJbZXZlbnRdO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRbZXZlbnRdID0gZXhpc3RzID8gKHZpZXcsIGxpbmUsIGV2ZW50KSA9PiBleGlzdHModmlldywgbGluZSwgZXZlbnQpIHx8IGFkZCh2aWV3LCBsaW5lLCBldmVudCkgOiBhZGQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuY2xhc3MgTnVtYmVyTWFya2VyIGV4dGVuZHMgR3V0dGVyTWFya2VyIHtcbiAgICBjb25zdHJ1Y3RvcihudW1iZXIpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5udW1iZXIgPSBudW1iZXI7XG4gICAgfVxuICAgIGVxKG90aGVyKSB7IHJldHVybiB0aGlzLm51bWJlciA9PSBvdGhlci5udW1iZXI7IH1cbiAgICB0b0RPTSgpIHsgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRoaXMubnVtYmVyKTsgfVxufVxuZnVuY3Rpb24gZm9ybWF0TnVtYmVyKHZpZXcsIG51bWJlcikge1xuICAgIHJldHVybiB2aWV3LnN0YXRlLmZhY2V0KGxpbmVOdW1iZXJDb25maWcpLmZvcm1hdE51bWJlcihudW1iZXIsIHZpZXcuc3RhdGUpO1xufVxuY29uc3QgbGluZU51bWJlckd1dHRlciA9IC8qQF9fUFVSRV9fKi9hY3RpdmVHdXR0ZXJzLmNvbXB1dGUoW2xpbmVOdW1iZXJDb25maWddLCBzdGF0ZSA9PiAoe1xuICAgIGNsYXNzOiBcImNtLWxpbmVOdW1iZXJzXCIsXG4gICAgcmVuZGVyRW1wdHlFbGVtZW50czogZmFsc2UsXG4gICAgbWFya2Vycyh2aWV3KSB7IHJldHVybiB2aWV3LnN0YXRlLmZhY2V0KGxpbmVOdW1iZXJNYXJrZXJzKTsgfSxcbiAgICBsaW5lTWFya2VyKHZpZXcsIGxpbmUsIG90aGVycykge1xuICAgICAgICBpZiAob3RoZXJzLnNvbWUobSA9PiBtLnRvRE9NKSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gbmV3IE51bWJlck1hcmtlcihmb3JtYXROdW1iZXIodmlldywgdmlldy5zdGF0ZS5kb2MubGluZUF0KGxpbmUuZnJvbSkubnVtYmVyKSk7XG4gICAgfSxcbiAgICBsaW5lTWFya2VyQ2hhbmdlOiB1cGRhdGUgPT4gdXBkYXRlLnN0YXJ0U3RhdGUuZmFjZXQobGluZU51bWJlckNvbmZpZykgIT0gdXBkYXRlLnN0YXRlLmZhY2V0KGxpbmVOdW1iZXJDb25maWcpLFxuICAgIGluaXRpYWxTcGFjZXIodmlldykge1xuICAgICAgICByZXR1cm4gbmV3IE51bWJlck1hcmtlcihmb3JtYXROdW1iZXIodmlldywgbWF4TGluZU51bWJlcih2aWV3LnN0YXRlLmRvYy5saW5lcykpKTtcbiAgICB9LFxuICAgIHVwZGF0ZVNwYWNlcihzcGFjZXIsIHVwZGF0ZSkge1xuICAgICAgICBsZXQgbWF4ID0gZm9ybWF0TnVtYmVyKHVwZGF0ZS52aWV3LCBtYXhMaW5lTnVtYmVyKHVwZGF0ZS52aWV3LnN0YXRlLmRvYy5saW5lcykpO1xuICAgICAgICByZXR1cm4gbWF4ID09IHNwYWNlci5udW1iZXIgPyBzcGFjZXIgOiBuZXcgTnVtYmVyTWFya2VyKG1heCk7XG4gICAgfSxcbiAgICBkb21FdmVudEhhbmRsZXJzOiBzdGF0ZS5mYWNldChsaW5lTnVtYmVyQ29uZmlnKS5kb21FdmVudEhhbmRsZXJzXG59KSk7XG4vKipcbkNyZWF0ZSBhIGxpbmUgbnVtYmVyIGd1dHRlciBleHRlbnNpb24uXG4qL1xuZnVuY3Rpb24gbGluZU51bWJlcnMoY29uZmlnID0ge30pIHtcbiAgICByZXR1cm4gW1xuICAgICAgICBsaW5lTnVtYmVyQ29uZmlnLm9mKGNvbmZpZyksXG4gICAgICAgIGd1dHRlcnMoKSxcbiAgICAgICAgbGluZU51bWJlckd1dHRlclxuICAgIF07XG59XG5mdW5jdGlvbiBtYXhMaW5lTnVtYmVyKGxpbmVzKSB7XG4gICAgbGV0IGxhc3QgPSA5O1xuICAgIHdoaWxlIChsYXN0IDwgbGluZXMpXG4gICAgICAgIGxhc3QgPSBsYXN0ICogMTAgKyA5O1xuICAgIHJldHVybiBsYXN0O1xufVxuY29uc3QgYWN0aXZlTGluZUd1dHRlck1hcmtlciA9IC8qQF9fUFVSRV9fKi9uZXcgY2xhc3MgZXh0ZW5kcyBHdXR0ZXJNYXJrZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLmVsZW1lbnRDbGFzcyA9IFwiY20tYWN0aXZlTGluZUd1dHRlclwiO1xuICAgIH1cbn07XG5jb25zdCBhY3RpdmVMaW5lR3V0dGVySGlnaGxpZ2h0ZXIgPSAvKkBfX1BVUkVfXyovZ3V0dGVyTGluZUNsYXNzLmNvbXB1dGUoW1wic2VsZWN0aW9uXCJdLCBzdGF0ZSA9PiB7XG4gICAgbGV0IG1hcmtzID0gW10sIGxhc3QgPSAtMTtcbiAgICBmb3IgKGxldCByYW5nZSBvZiBzdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzKSB7XG4gICAgICAgIGxldCBsaW5lUG9zID0gc3RhdGUuZG9jLmxpbmVBdChyYW5nZS5oZWFkKS5mcm9tO1xuICAgICAgICBpZiAobGluZVBvcyA+IGxhc3QpIHtcbiAgICAgICAgICAgIGxhc3QgPSBsaW5lUG9zO1xuICAgICAgICAgICAgbWFya3MucHVzaChhY3RpdmVMaW5lR3V0dGVyTWFya2VyLnJhbmdlKGxpbmVQb3MpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gUmFuZ2VTZXQub2YobWFya3MpO1xufSk7XG4vKipcblJldHVybnMgYW4gZXh0ZW5zaW9uIHRoYXQgYWRkcyBhIGBjbS1hY3RpdmVMaW5lR3V0dGVyYCBjbGFzcyB0b1xuYWxsIGd1dHRlciBlbGVtZW50cyBvbiB0aGUgW2FjdGl2ZVxubGluZV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LmhpZ2hsaWdodEFjdGl2ZUxpbmUpLlxuKi9cbmZ1bmN0aW9uIGhpZ2hsaWdodEFjdGl2ZUxpbmVHdXR0ZXIoKSB7XG4gICAgcmV0dXJuIGFjdGl2ZUxpbmVHdXR0ZXJIaWdobGlnaHRlcjtcbn1cblxuLyoqXG5AaW50ZXJuYWxcbiovXG5jb25zdCBfX3Rlc3QgPSB7IEhlaWdodE1hcCwgSGVpZ2h0T3JhY2xlLCBNZWFzdXJlZEhlaWdodHMsIFF1ZXJ5VHlwZSwgQ2hhbmdlZFJhbmdlLCBjb21wdXRlT3JkZXIsIG1vdmVWaXN1YWxseSB9O1xuXG5leHBvcnQgeyBCaWRpU3BhbiwgQmxvY2tJbmZvLCBCbG9ja1R5cGUsIERlY29yYXRpb24sIERpcmVjdGlvbiwgRWRpdG9yVmlldywgR3V0dGVyTWFya2VyLCBNYXRjaERlY29yYXRvciwgVmlld1BsdWdpbiwgVmlld1VwZGF0ZSwgV2lkZ2V0VHlwZSwgX190ZXN0LCBjbG9zZUhvdmVyVG9vbHRpcHMsIGNyb3NzaGFpckN1cnNvciwgZHJhd1NlbGVjdGlvbiwgZHJvcEN1cnNvciwgZ2V0UGFuZWwsIGdldFRvb2x0aXAsIGd1dHRlciwgZ3V0dGVyTGluZUNsYXNzLCBndXR0ZXJzLCBoYXNIb3ZlclRvb2x0aXBzLCBoaWdobGlnaHRBY3RpdmVMaW5lLCBoaWdobGlnaHRBY3RpdmVMaW5lR3V0dGVyLCBoaWdobGlnaHRTcGVjaWFsQ2hhcnMsIGhvdmVyVG9vbHRpcCwga2V5bWFwLCBsaW5lTnVtYmVyTWFya2VycywgbGluZU51bWJlcnMsIGxvZ0V4Y2VwdGlvbiwgcGFuZWxzLCBwbGFjZWhvbGRlciwgcmVjdGFuZ3VsYXJTZWxlY3Rpb24sIHJlcG9zaXRpb25Ub29sdGlwcywgcnVuU2NvcGVIYW5kbGVycywgc2Nyb2xsUGFzdEVuZCwgc2hvd1BhbmVsLCBzaG93VG9vbHRpcCwgdG9vbHRpcHMgfTtcbiIsICIvLyBGSVhNRSBwcm9maWxlIGFkZGluZyBhIHBlci1UcmVlIFRyZWVOb2RlIGNhY2hlLCB2YWxpZGF0aW5nIGl0IGJ5XG4vLyBwYXJlbnQgcG9pbnRlclxuLy8vIFRoZSBkZWZhdWx0IG1heGltdW0gbGVuZ3RoIG9mIGEgYFRyZWVCdWZmZXJgIG5vZGUuXG5jb25zdCBEZWZhdWx0QnVmZmVyTGVuZ3RoID0gMTAyNDtcbmxldCBuZXh0UHJvcElEID0gMDtcbmNsYXNzIFJhbmdlIHtcbiAgICBjb25zdHJ1Y3Rvcihmcm9tLCB0bykge1xuICAgICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgICAgICB0aGlzLnRvID0gdG87XG4gICAgfVxufVxuLy8vIEVhY2ggW25vZGUgdHlwZV0oI2NvbW1vbi5Ob2RlVHlwZSkgb3IgW2luZGl2aWR1YWwgdHJlZV0oI2NvbW1vbi5UcmVlKVxuLy8vIGNhbiBoYXZlIG1ldGFkYXRhIGFzc29jaWF0ZWQgd2l0aCBpdCBpbiBwcm9wcy4gSW5zdGFuY2VzIG9mIHRoaXNcbi8vLyBjbGFzcyByZXByZXNlbnQgcHJvcCBuYW1lcy5cbmNsYXNzIE5vZGVQcm9wIHtcbiAgICAvLy8gQ3JlYXRlIGEgbmV3IG5vZGUgcHJvcCB0eXBlLlxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7XG4gICAgICAgIHRoaXMuaWQgPSBuZXh0UHJvcElEKys7XG4gICAgICAgIHRoaXMucGVyTm9kZSA9ICEhY29uZmlnLnBlck5vZGU7XG4gICAgICAgIHRoaXMuZGVzZXJpYWxpemUgPSBjb25maWcuZGVzZXJpYWxpemUgfHwgKCgpID0+IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgbm9kZSB0eXBlIGRvZXNuJ3QgZGVmaW5lIGEgZGVzZXJpYWxpemUgZnVuY3Rpb25cIik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLy8gVGhpcyBpcyBtZWFudCB0byBiZSB1c2VkIHdpdGhcbiAgICAvLy8gW2BOb2RlU2V0LmV4dGVuZGBdKCNjb21tb24uTm9kZVNldC5leHRlbmQpIG9yXG4gICAgLy8vIFtgTFJQYXJzZXIuY29uZmlndXJlYF0oI2xyLlBhcnNlckNvbmZpZy5wcm9wcykgdG8gY29tcHV0ZVxuICAgIC8vLyBwcm9wIHZhbHVlcyBmb3IgZWFjaCBub2RlIHR5cGUgaW4gdGhlIHNldC4gVGFrZXMgYSBbbWF0Y2hcbiAgICAvLy8gb2JqZWN0XSgjY29tbW9uLk5vZGVUeXBlXm1hdGNoKSBvciBmdW5jdGlvbiB0aGF0IHJldHVybnMgdW5kZWZpbmVkXG4gICAgLy8vIGlmIHRoZSBub2RlIHR5cGUgZG9lc24ndCBnZXQgdGhpcyBwcm9wLCBhbmQgdGhlIHByb3AncyB2YWx1ZSBpZlxuICAgIC8vLyBpdCBkb2VzLlxuICAgIGFkZChtYXRjaCkge1xuICAgICAgICBpZiAodGhpcy5wZXJOb2RlKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJDYW4ndCBhZGQgcGVyLW5vZGUgcHJvcHMgdG8gbm9kZSB0eXBlc1wiKTtcbiAgICAgICAgaWYgKHR5cGVvZiBtYXRjaCAhPSBcImZ1bmN0aW9uXCIpXG4gICAgICAgICAgICBtYXRjaCA9IE5vZGVUeXBlLm1hdGNoKG1hdGNoKTtcbiAgICAgICAgcmV0dXJuICh0eXBlKSA9PiB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gbWF0Y2godHlwZSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0ID09PSB1bmRlZmluZWQgPyBudWxsIDogW3RoaXMsIHJlc3VsdF07XG4gICAgICAgIH07XG4gICAgfVxufVxuLy8vIFByb3AgdGhhdCBpcyB1c2VkIHRvIGRlc2NyaWJlIG1hdGNoaW5nIGRlbGltaXRlcnMuIEZvciBvcGVuaW5nXG4vLy8gZGVsaW1pdGVycywgdGhpcyBob2xkcyBhbiBhcnJheSBvZiBub2RlIG5hbWVzICh3cml0dGVuIGFzIGFcbi8vLyBzcGFjZS1zZXBhcmF0ZWQgc3RyaW5nIHdoZW4gZGVjbGFyaW5nIHRoaXMgcHJvcCBpbiBhIGdyYW1tYXIpXG4vLy8gZm9yIHRoZSBub2RlIHR5cGVzIG9mIGNsb3NpbmcgZGVsaW1pdGVycyB0aGF0IG1hdGNoIGl0LlxuTm9kZVByb3AuY2xvc2VkQnkgPSBuZXcgTm9kZVByb3AoeyBkZXNlcmlhbGl6ZTogc3RyID0+IHN0ci5zcGxpdChcIiBcIikgfSk7XG4vLy8gVGhlIGludmVyc2Ugb2YgW2BjbG9zZWRCeWBdKCNjb21tb24uTm9kZVByb3BeY2xvc2VkQnkpLiBUaGlzIGlzXG4vLy8gYXR0YWNoZWQgdG8gY2xvc2luZyBkZWxpbWl0ZXJzLCBob2xkaW5nIGFuIGFycmF5IG9mIG5vZGUgbmFtZXNcbi8vLyBvZiB0eXBlcyBvZiBtYXRjaGluZyBvcGVuaW5nIGRlbGltaXRlcnMuXG5Ob2RlUHJvcC5vcGVuZWRCeSA9IG5ldyBOb2RlUHJvcCh7IGRlc2VyaWFsaXplOiBzdHIgPT4gc3RyLnNwbGl0KFwiIFwiKSB9KTtcbi8vLyBVc2VkIHRvIGFzc2lnbiBub2RlIHR5cGVzIHRvIGdyb3VwcyAoZm9yIGV4YW1wbGUsIGFsbCBub2RlXG4vLy8gdHlwZXMgdGhhdCByZXByZXNlbnQgYW4gZXhwcmVzc2lvbiBjb3VsZCBiZSB0YWdnZWQgd2l0aCBhblxuLy8vIGBcIkV4cHJlc3Npb25cImAgZ3JvdXApLlxuTm9kZVByb3AuZ3JvdXAgPSBuZXcgTm9kZVByb3AoeyBkZXNlcmlhbGl6ZTogc3RyID0+IHN0ci5zcGxpdChcIiBcIikgfSk7XG4vLy8gVGhlIGhhc2ggb2YgdGhlIFtjb250ZXh0XSgjbHIuQ29udGV4dFRyYWNrZXIuY29uc3RydWN0b3IpXG4vLy8gdGhhdCB0aGUgbm9kZSB3YXMgcGFyc2VkIGluLCBpZiBhbnkuIFVzZWQgdG8gbGltaXQgcmV1c2Ugb2Zcbi8vLyBjb250ZXh0dWFsIG5vZGVzLlxuTm9kZVByb3AuY29udGV4dEhhc2ggPSBuZXcgTm9kZVByb3AoeyBwZXJOb2RlOiB0cnVlIH0pO1xuLy8vIFRoZSBkaXN0YW5jZSBiZXlvbmQgdGhlIGVuZCBvZiB0aGUgbm9kZSB0aGF0IHRoZSB0b2tlbml6ZXJcbi8vLyBsb29rZWQgYWhlYWQgZm9yIGFueSBvZiB0aGUgdG9rZW5zIGluc2lkZSB0aGUgbm9kZS4gKFRoZSBMUlxuLy8vIHBhcnNlciBvbmx5IHN0b3JlcyB0aGlzIHdoZW4gaXQgaXMgbGFyZ2VyIHRoYW4gMjUsIGZvclxuLy8vIGVmZmljaWVuY3kgcmVhc29ucy4pXG5Ob2RlUHJvcC5sb29rQWhlYWQgPSBuZXcgTm9kZVByb3AoeyBwZXJOb2RlOiB0cnVlIH0pO1xuLy8vIFRoaXMgcGVyLW5vZGUgcHJvcCBpcyB1c2VkIHRvIHJlcGxhY2UgYSBnaXZlbiBub2RlLCBvciBwYXJ0IG9mIGFcbi8vLyBub2RlLCB3aXRoIGFub3RoZXIgdHJlZS4gVGhpcyBpcyB1c2VmdWwgdG8gaW5jbHVkZSB0cmVlcyBmcm9tXG4vLy8gZGlmZmVyZW50IGxhbmd1YWdlcyBpbiBtaXhlZC1sYW5ndWFnZSBwYXJzZXJzLlxuTm9kZVByb3AubW91bnRlZCA9IG5ldyBOb2RlUHJvcCh7IHBlck5vZGU6IHRydWUgfSk7XG4vLy8gQSBtb3VudGVkIHRyZWUsIHdoaWNoIGNhbiBiZSBbc3RvcmVkXSgjY29tbW9uLk5vZGVQcm9wXm1vdW50ZWQpIG9uXG4vLy8gYSB0cmVlIG5vZGUgdG8gaW5kaWNhdGUgdGhhdCBwYXJ0cyBvZiBpdHMgY29udGVudCBhcmVcbi8vLyByZXByZXNlbnRlZCBieSBhbm90aGVyIHRyZWUuXG5jbGFzcyBNb3VudGVkVHJlZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLy8vIFRoZSBpbm5lciB0cmVlLlxuICAgIHRyZWUsIFxuICAgIC8vLyBJZiB0aGlzIGlzIG51bGwsIHRoaXMgdHJlZSByZXBsYWNlcyB0aGUgZW50aXJlIG5vZGUgKGl0IHdpbGxcbiAgICAvLy8gYmUgaW5jbHVkZWQgaW4gdGhlIHJlZ3VsYXIgaXRlcmF0aW9uIGluc3RlYWQgb2YgaXRzIGhvc3RcbiAgICAvLy8gbm9kZSkuIElmIG5vdCwgb25seSB0aGUgZ2l2ZW4gcmFuZ2VzIGFyZSBjb25zaWRlcmVkIHRvIGJlXG4gICAgLy8vIGNvdmVyZWQgYnkgdGhpcyB0cmVlLiBUaGlzIGlzIHVzZWQgZm9yIHRyZWVzIHRoYXQgYXJlIG1peGVkIGluXG4gICAgLy8vIGEgd2F5IHRoYXQgaXNuJ3Qgc3RyaWN0bHkgaGllcmFyY2hpY2FsLiBTdWNoIG1vdW50ZWQgdHJlZXMgYXJlXG4gICAgLy8vIG9ubHkgZW50ZXJlZCBieSBbYHJlc29sdmVJbm5lcmBdKCNjb21tb24uVHJlZS5yZXNvbHZlSW5uZXIpXG4gICAgLy8vIGFuZCBbYGVudGVyYF0oI2NvbW1vbi5TeW50YXhOb2RlLmVudGVyKS5cbiAgICBvdmVybGF5LCBcbiAgICAvLy8gVGhlIHBhcnNlciB1c2VkIHRvIGNyZWF0ZSB0aGlzIHN1YnRyZWUuXG4gICAgcGFyc2VyKSB7XG4gICAgICAgIHRoaXMudHJlZSA9IHRyZWU7XG4gICAgICAgIHRoaXMub3ZlcmxheSA9IG92ZXJsYXk7XG4gICAgICAgIHRoaXMucGFyc2VyID0gcGFyc2VyO1xuICAgIH1cbn1cbmNvbnN0IG5vUHJvcHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuLy8vIEVhY2ggbm9kZSBpbiBhIHN5bnRheCB0cmVlIGhhcyBhIG5vZGUgdHlwZSBhc3NvY2lhdGVkIHdpdGggaXQuXG5jbGFzcyBOb2RlVHlwZSB7XG4gICAgLy8vIEBpbnRlcm5hbFxuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8vLyBUaGUgbmFtZSBvZiB0aGUgbm9kZSB0eXBlLiBOb3QgbmVjZXNzYXJpbHkgdW5pcXVlLCBidXQgaWYgdGhlXG4gICAgLy8vIGdyYW1tYXIgd2FzIHdyaXR0ZW4gcHJvcGVybHksIGRpZmZlcmVudCBub2RlIHR5cGVzIHdpdGggdGhlXG4gICAgLy8vIHNhbWUgbmFtZSB3aXRoaW4gYSBub2RlIHNldCBzaG91bGQgcGxheSB0aGUgc2FtZSBzZW1hbnRpY1xuICAgIC8vLyByb2xlLlxuICAgIG5hbWUsIFxuICAgIC8vLyBAaW50ZXJuYWxcbiAgICBwcm9wcywgXG4gICAgLy8vIFRoZSBpZCBvZiB0aGlzIG5vZGUgaW4gaXRzIHNldC4gQ29ycmVzcG9uZHMgdG8gdGhlIHRlcm0gaWRzXG4gICAgLy8vIHVzZWQgaW4gdGhlIHBhcnNlci5cbiAgICBpZCwgXG4gICAgLy8vIEBpbnRlcm5hbFxuICAgIGZsYWdzID0gMCkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLnByb3BzID0gcHJvcHM7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy5mbGFncyA9IGZsYWdzO1xuICAgIH1cbiAgICAvLy8gRGVmaW5lIGEgbm9kZSB0eXBlLlxuICAgIHN0YXRpYyBkZWZpbmUoc3BlYykge1xuICAgICAgICBsZXQgcHJvcHMgPSBzcGVjLnByb3BzICYmIHNwZWMucHJvcHMubGVuZ3RoID8gT2JqZWN0LmNyZWF0ZShudWxsKSA6IG5vUHJvcHM7XG4gICAgICAgIGxldCBmbGFncyA9IChzcGVjLnRvcCA/IDEgLyogVG9wICovIDogMCkgfCAoc3BlYy5za2lwcGVkID8gMiAvKiBTa2lwcGVkICovIDogMCkgfFxuICAgICAgICAgICAgKHNwZWMuZXJyb3IgPyA0IC8qIEVycm9yICovIDogMCkgfCAoc3BlYy5uYW1lID09IG51bGwgPyA4IC8qIEFub255bW91cyAqLyA6IDApO1xuICAgICAgICBsZXQgdHlwZSA9IG5ldyBOb2RlVHlwZShzcGVjLm5hbWUgfHwgXCJcIiwgcHJvcHMsIHNwZWMuaWQsIGZsYWdzKTtcbiAgICAgICAgaWYgKHNwZWMucHJvcHMpXG4gICAgICAgICAgICBmb3IgKGxldCBzcmMgb2Ygc3BlYy5wcm9wcykge1xuICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShzcmMpKVxuICAgICAgICAgICAgICAgICAgICBzcmMgPSBzcmModHlwZSk7XG4gICAgICAgICAgICAgICAgaWYgKHNyYykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3JjWzBdLnBlck5vZGUpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkNhbid0IHN0b3JlIGEgcGVyLW5vZGUgcHJvcCBvbiBhIG5vZGUgdHlwZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgcHJvcHNbc3JjWzBdLmlkXSA9IHNyY1sxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiB0eXBlO1xuICAgIH1cbiAgICAvLy8gUmV0cmlldmVzIGEgbm9kZSBwcm9wIGZvciB0aGlzIHR5cGUuIFdpbGwgcmV0dXJuIGB1bmRlZmluZWRgIGlmXG4gICAgLy8vIHRoZSBwcm9wIGlzbid0IHByZXNlbnQgb24gdGhpcyBub2RlLlxuICAgIHByb3AocHJvcCkgeyByZXR1cm4gdGhpcy5wcm9wc1twcm9wLmlkXTsgfVxuICAgIC8vLyBUcnVlIHdoZW4gdGhpcyBpcyB0aGUgdG9wIG5vZGUgb2YgYSBncmFtbWFyLlxuICAgIGdldCBpc1RvcCgpIHsgcmV0dXJuICh0aGlzLmZsYWdzICYgMSAvKiBUb3AgKi8pID4gMDsgfVxuICAgIC8vLyBUcnVlIHdoZW4gdGhpcyBub2RlIGlzIHByb2R1Y2VkIGJ5IGEgc2tpcCBydWxlLlxuICAgIGdldCBpc1NraXBwZWQoKSB7IHJldHVybiAodGhpcy5mbGFncyAmIDIgLyogU2tpcHBlZCAqLykgPiAwOyB9XG4gICAgLy8vIEluZGljYXRlcyB3aGV0aGVyIHRoaXMgaXMgYW4gZXJyb3Igbm9kZS5cbiAgICBnZXQgaXNFcnJvcigpIHsgcmV0dXJuICh0aGlzLmZsYWdzICYgNCAvKiBFcnJvciAqLykgPiAwOyB9XG4gICAgLy8vIFdoZW4gdHJ1ZSwgdGhpcyBub2RlIHR5cGUgZG9lc24ndCBjb3JyZXNwb25kIHRvIGEgdXNlci1kZWNsYXJlZFxuICAgIC8vLyBuYW1lZCBub2RlLCBmb3IgZXhhbXBsZSBiZWNhdXNlIGl0IGlzIHVzZWQgdG8gY2FjaGUgcmVwZXRpdGlvbi5cbiAgICBnZXQgaXNBbm9ueW1vdXMoKSB7IHJldHVybiAodGhpcy5mbGFncyAmIDggLyogQW5vbnltb3VzICovKSA+IDA7IH1cbiAgICAvLy8gUmV0dXJucyB0cnVlIHdoZW4gdGhpcyBub2RlJ3MgbmFtZSBvciBvbmUgb2YgaXRzXG4gICAgLy8vIFtncm91cHNdKCNjb21tb24uTm9kZVByb3BeZ3JvdXApIG1hdGNoZXMgdGhlIGdpdmVuIHN0cmluZy5cbiAgICBpcyhuYW1lKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbmFtZSA9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgaWYgKHRoaXMubmFtZSA9PSBuYW1lKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgbGV0IGdyb3VwID0gdGhpcy5wcm9wKE5vZGVQcm9wLmdyb3VwKTtcbiAgICAgICAgICAgIHJldHVybiBncm91cCA/IGdyb3VwLmluZGV4T2YobmFtZSkgPiAtMSA6IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmlkID09IG5hbWU7XG4gICAgfVxuICAgIC8vLyBDcmVhdGUgYSBmdW5jdGlvbiBmcm9tIG5vZGUgdHlwZXMgdG8gYXJiaXRyYXJ5IHZhbHVlcyBieVxuICAgIC8vLyBzcGVjaWZ5aW5nIGFuIG9iamVjdCB3aG9zZSBwcm9wZXJ0eSBuYW1lcyBhcmUgbm9kZSBvclxuICAgIC8vLyBbZ3JvdXBdKCNjb21tb24uTm9kZVByb3BeZ3JvdXApIG5hbWVzLiBPZnRlbiB1c2VmdWwgd2l0aFxuICAgIC8vLyBbYE5vZGVQcm9wLmFkZGBdKCNjb21tb24uTm9kZVByb3AuYWRkKS4gWW91IGNhbiBwdXQgbXVsdGlwbGVcbiAgICAvLy8gbmFtZXMsIHNlcGFyYXRlZCBieSBzcGFjZXMsIGluIGEgc2luZ2xlIHByb3BlcnR5IG5hbWUgdG8gbWFwXG4gICAgLy8vIG11bHRpcGxlIG5vZGUgbmFtZXMgdG8gYSBzaW5nbGUgdmFsdWUuXG4gICAgc3RhdGljIG1hdGNoKG1hcCkge1xuICAgICAgICBsZXQgZGlyZWN0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgZm9yIChsZXQgcHJvcCBpbiBtYXApXG4gICAgICAgICAgICBmb3IgKGxldCBuYW1lIG9mIHByb3Auc3BsaXQoXCIgXCIpKVxuICAgICAgICAgICAgICAgIGRpcmVjdFtuYW1lXSA9IG1hcFtwcm9wXTtcbiAgICAgICAgcmV0dXJuIChub2RlKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGxldCBncm91cHMgPSBub2RlLnByb3AoTm9kZVByb3AuZ3JvdXApLCBpID0gLTE7IGkgPCAoZ3JvdXBzID8gZ3JvdXBzLmxlbmd0aCA6IDApOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgZm91bmQgPSBkaXJlY3RbaSA8IDAgPyBub2RlLm5hbWUgOiBncm91cHNbaV1dO1xuICAgICAgICAgICAgICAgIGlmIChmb3VuZClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZvdW5kO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbn1cbi8vLyBBbiBlbXB0eSBkdW1teSBub2RlIHR5cGUgdG8gdXNlIHdoZW4gbm8gYWN0dWFsIHR5cGUgaXMgYXZhaWxhYmxlLlxuTm9kZVR5cGUubm9uZSA9IG5ldyBOb2RlVHlwZShcIlwiLCBPYmplY3QuY3JlYXRlKG51bGwpLCAwLCA4IC8qIEFub255bW91cyAqLyk7XG4vLy8gQSBub2RlIHNldCBob2xkcyBhIGNvbGxlY3Rpb24gb2Ygbm9kZSB0eXBlcy4gSXQgaXMgdXNlZCB0b1xuLy8vIGNvbXBhY3RseSByZXByZXNlbnQgdHJlZXMgYnkgc3RvcmluZyB0aGVpciB0eXBlIGlkcywgcmF0aGVyIHRoYW4gYVxuLy8vIGZ1bGwgcG9pbnRlciB0byB0aGUgdHlwZSBvYmplY3QsIGluIGEgbnVtZXJpYyBhcnJheS4gRWFjaCBwYXJzZXJcbi8vLyBbaGFzXSgjbHIuTFJQYXJzZXIubm9kZVNldCkgYSBub2RlIHNldCwgYW5kIFt0cmVlXG4vLy8gYnVmZmVyc10oI2NvbW1vbi5UcmVlQnVmZmVyKSBjYW4gb25seSBzdG9yZSBjb2xsZWN0aW9ucyBvZiBub2Rlc1xuLy8vIGZyb20gdGhlIHNhbWUgc2V0LiBBIHNldCBjYW4gaGF2ZSBhIG1heGltdW0gb2YgMioqMTYgKDY1NTM2KSBub2RlXG4vLy8gdHlwZXMgaW4gaXQsIHNvIHRoYXQgdGhlIGlkcyBmaXQgaW50byAxNi1iaXQgdHlwZWQgYXJyYXkgc2xvdHMuXG5jbGFzcyBOb2RlU2V0IHtcbiAgICAvLy8gQ3JlYXRlIGEgc2V0IHdpdGggdGhlIGdpdmVuIHR5cGVzLiBUaGUgYGlkYCBwcm9wZXJ0eSBvZiBlYWNoXG4gICAgLy8vIHR5cGUgc2hvdWxkIGNvcnJlc3BvbmQgdG8gaXRzIHBvc2l0aW9uIHdpdGhpbiB0aGUgYXJyYXkuXG4gICAgY29uc3RydWN0b3IoXG4gICAgLy8vIFRoZSBub2RlIHR5cGVzIGluIHRoaXMgc2V0LCBieSBpZC5cbiAgICB0eXBlcykge1xuICAgICAgICB0aGlzLnR5cGVzID0gdHlwZXM7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHlwZXMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBpZiAodHlwZXNbaV0uaWQgIT0gaSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIk5vZGUgdHlwZSBpZHMgc2hvdWxkIGNvcnJlc3BvbmQgdG8gYXJyYXkgcG9zaXRpb25zIHdoZW4gY3JlYXRpbmcgYSBub2RlIHNldFwiKTtcbiAgICB9XG4gICAgLy8vIENyZWF0ZSBhIGNvcHkgb2YgdGhpcyBzZXQgd2l0aCBzb21lIG5vZGUgcHJvcGVydGllcyBhZGRlZC4gVGhlXG4gICAgLy8vIGFyZ3VtZW50cyB0byB0aGlzIG1ldGhvZCBjYW4gYmUgY3JlYXRlZCB3aXRoXG4gICAgLy8vIFtgTm9kZVByb3AuYWRkYF0oI2NvbW1vbi5Ob2RlUHJvcC5hZGQpLlxuICAgIGV4dGVuZCguLi5wcm9wcykge1xuICAgICAgICBsZXQgbmV3VHlwZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgdHlwZSBvZiB0aGlzLnR5cGVzKSB7XG4gICAgICAgICAgICBsZXQgbmV3UHJvcHMgPSBudWxsO1xuICAgICAgICAgICAgZm9yIChsZXQgc291cmNlIG9mIHByb3BzKSB7XG4gICAgICAgICAgICAgICAgbGV0IGFkZCA9IHNvdXJjZSh0eXBlKTtcbiAgICAgICAgICAgICAgICBpZiAoYWRkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghbmV3UHJvcHMpXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdQcm9wcyA9IE9iamVjdC5hc3NpZ24oe30sIHR5cGUucHJvcHMpO1xuICAgICAgICAgICAgICAgICAgICBuZXdQcm9wc1thZGRbMF0uaWRdID0gYWRkWzFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5ld1R5cGVzLnB1c2gobmV3UHJvcHMgPyBuZXcgTm9kZVR5cGUodHlwZS5uYW1lLCBuZXdQcm9wcywgdHlwZS5pZCwgdHlwZS5mbGFncykgOiB0eXBlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IE5vZGVTZXQobmV3VHlwZXMpO1xuICAgIH1cbn1cbmNvbnN0IENhY2hlZE5vZGUgPSBuZXcgV2Vha01hcCgpLCBDYWNoZWRJbm5lck5vZGUgPSBuZXcgV2Vha01hcCgpO1xuLy8vIE9wdGlvbnMgdGhhdCBjb250cm9sIGl0ZXJhdGlvbi4gQ2FuIGJlIGNvbWJpbmVkIHdpdGggdGhlIGB8YFxuLy8vIG9wZXJhdG9yIHRvIGVuYWJsZSBtdWx0aXBsZSBvbmVzLlxudmFyIEl0ZXJNb2RlO1xuKGZ1bmN0aW9uIChJdGVyTW9kZSkge1xuICAgIC8vLyBXaGVuIGVuYWJsZWQsIGl0ZXJhdGlvbiB3aWxsIG9ubHkgdmlzaXQgW2BUcmVlYF0oI2NvbW1vbi5UcmVlKVxuICAgIC8vLyBvYmplY3RzLCBub3Qgbm9kZXMgcGFja2VkIGludG9cbiAgICAvLy8gW2BUcmVlQnVmZmVyYF0oI2NvbW1vbi5UcmVlQnVmZmVyKXMuXG4gICAgSXRlck1vZGVbSXRlck1vZGVbXCJFeGNsdWRlQnVmZmVyc1wiXSA9IDFdID0gXCJFeGNsdWRlQnVmZmVyc1wiO1xuICAgIC8vLyBFbmFibGUgdGhpcyB0byBtYWtlIGl0ZXJhdGlvbiBpbmNsdWRlIGFub255bW91cyBub2RlcyAoc3VjaCBhc1xuICAgIC8vLyB0aGUgbm9kZXMgdGhhdCB3cmFwIHJlcGVhdGVkIGdyYW1tYXIgY29uc3RydWN0cyBpbnRvIGEgYmFsYW5jZWRcbiAgICAvLy8gdHJlZSkuXG4gICAgSXRlck1vZGVbSXRlck1vZGVbXCJJbmNsdWRlQW5vbnltb3VzXCJdID0gMl0gPSBcIkluY2x1ZGVBbm9ueW1vdXNcIjtcbiAgICAvLy8gQnkgZGVmYXVsdCwgcmVndWxhciBbbW91bnRlZF0oI2NvbW1vbi5Ob2RlUHJvcF5tb3VudGVkKSBub2Rlc1xuICAgIC8vLyByZXBsYWNlIHRoZWlyIGJhc2Ugbm9kZSBpbiBpdGVyYXRpb24uIEVuYWJsZSB0aGlzIHRvIGlnbm9yZSB0aGVtXG4gICAgLy8vIGluc3RlYWQuXG4gICAgSXRlck1vZGVbSXRlck1vZGVbXCJJZ25vcmVNb3VudHNcIl0gPSA0XSA9IFwiSWdub3JlTW91bnRzXCI7XG4gICAgLy8vIFRoaXMgb3B0aW9uIG9ubHkgYXBwbGllcyBpblxuICAgIC8vLyBbYGVudGVyYF0oI2NvbW1vbi5TeW50YXhOb2RlLmVudGVyKS1zdHlsZSBtZXRob2RzLiBJdCB0ZWxscyB0aGVcbiAgICAvLy8gbGlicmFyeSB0byBub3QgZW50ZXIgbW91bnRlZCBvdmVybGF5cyBpZiBvbmUgY292ZXJzIHRoZSBnaXZlblxuICAgIC8vLyBwb3NpdGlvbi5cbiAgICBJdGVyTW9kZVtJdGVyTW9kZVtcIklnbm9yZU92ZXJsYXlzXCJdID0gOF0gPSBcIklnbm9yZU92ZXJsYXlzXCI7XG59KShJdGVyTW9kZSB8fCAoSXRlck1vZGUgPSB7fSkpO1xuLy8vIEEgcGllY2Ugb2Ygc3ludGF4IHRyZWUuIFRoZXJlIGFyZSB0d28gd2F5cyB0byBhcHByb2FjaCB0aGVzZVxuLy8vIHRyZWVzOiB0aGUgd2F5IHRoZXkgYXJlIGFjdHVhbGx5IHN0b3JlZCBpbiBtZW1vcnksIGFuZCB0aGVcbi8vLyBjb252ZW5pZW50IHdheS5cbi8vL1xuLy8vIFN5bnRheCB0cmVlcyBhcmUgc3RvcmVkIGFzIGEgdHJlZSBvZiBgVHJlZWAgYW5kIGBUcmVlQnVmZmVyYFxuLy8vIG9iamVjdHMuIEJ5IHBhY2tpbmcgZGV0YWlsIGluZm9ybWF0aW9uIGludG8gYFRyZWVCdWZmZXJgIGxlYWZcbi8vLyBub2RlcywgdGhlIHJlcHJlc2VudGF0aW9uIGlzIG1hZGUgYSBsb3QgbW9yZSBtZW1vcnktZWZmaWNpZW50LlxuLy8vXG4vLy8gSG93ZXZlciwgd2hlbiB5b3Ugd2FudCB0byBhY3R1YWxseSB3b3JrIHdpdGggdHJlZSBub2RlcywgdGhpc1xuLy8vIHJlcHJlc2VudGF0aW9uIGlzIHZlcnkgYXdrd2FyZCwgc28gbW9zdCBjbGllbnQgY29kZSB3aWxsIHdhbnQgdG9cbi8vLyB1c2UgdGhlIFtgVHJlZUN1cnNvcmBdKCNjb21tb24uVHJlZUN1cnNvcikgb3Jcbi8vLyBbYFN5bnRheE5vZGVgXSgjY29tbW9uLlN5bnRheE5vZGUpIGludGVyZmFjZSBpbnN0ZWFkLCB3aGljaCBwcm92aWRlc1xuLy8vIGEgdmlldyBvbiBzb21lIHBhcnQgb2YgdGhpcyBkYXRhIHN0cnVjdHVyZSwgYW5kIGNhbiBiZSB1c2VkIHRvXG4vLy8gbW92ZSBhcm91bmQgdG8gYWRqYWNlbnQgbm9kZXMuXG5jbGFzcyBUcmVlIHtcbiAgICAvLy8gQ29uc3RydWN0IGEgbmV3IHRyZWUuIFNlZSBhbHNvIFtgVHJlZS5idWlsZGBdKCNjb21tb24uVHJlZV5idWlsZCkuXG4gICAgY29uc3RydWN0b3IoXG4gICAgLy8vIFRoZSB0eXBlIG9mIHRoZSB0b3Agbm9kZS5cbiAgICB0eXBlLCBcbiAgICAvLy8gVGhpcyBub2RlJ3MgY2hpbGQgbm9kZXMuXG4gICAgY2hpbGRyZW4sIFxuICAgIC8vLyBUaGUgcG9zaXRpb25zIChvZmZzZXRzIHJlbGF0aXZlIHRvIHRoZSBzdGFydCBvZiB0aGlzIHRyZWUpIG9mXG4gICAgLy8vIHRoZSBjaGlsZHJlbi5cbiAgICBwb3NpdGlvbnMsIFxuICAgIC8vLyBUaGUgdG90YWwgbGVuZ3RoIG9mIHRoaXMgdHJlZVxuICAgIGxlbmd0aCwgXG4gICAgLy8vIFBlci1ub2RlIFtub2RlIHByb3BzXSgjY29tbW9uLk5vZGVQcm9wKSB0byBhc3NvY2lhdGUgd2l0aCB0aGlzIG5vZGUuXG4gICAgcHJvcHMpIHtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuICAgICAgICB0aGlzLnBvc2l0aW9ucyA9IHBvc2l0aW9ucztcbiAgICAgICAgdGhpcy5sZW5ndGggPSBsZW5ndGg7XG4gICAgICAgIC8vLyBAaW50ZXJuYWxcbiAgICAgICAgdGhpcy5wcm9wcyA9IG51bGw7XG4gICAgICAgIGlmIChwcm9wcyAmJiBwcm9wcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgICAgZm9yIChsZXQgW3Byb3AsIHZhbHVlXSBvZiBwcm9wcylcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzW3R5cGVvZiBwcm9wID09IFwibnVtYmVyXCIgPyBwcm9wIDogcHJvcC5pZF0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLy8gQGludGVybmFsXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGxldCBtb3VudGVkID0gdGhpcy5wcm9wKE5vZGVQcm9wLm1vdW50ZWQpO1xuICAgICAgICBpZiAobW91bnRlZCAmJiAhbW91bnRlZC5vdmVybGF5KVxuICAgICAgICAgICAgcmV0dXJuIG1vdW50ZWQudHJlZS50b1N0cmluZygpO1xuICAgICAgICBsZXQgY2hpbGRyZW4gPSBcIlwiO1xuICAgICAgICBmb3IgKGxldCBjaCBvZiB0aGlzLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICBsZXQgc3RyID0gY2gudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGlmIChzdHIpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRyZW4pXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuICs9IFwiLFwiO1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuICs9IHN0cjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gIXRoaXMudHlwZS5uYW1lID8gY2hpbGRyZW4gOlxuICAgICAgICAgICAgKC9cXFcvLnRlc3QodGhpcy50eXBlLm5hbWUpICYmICF0aGlzLnR5cGUuaXNFcnJvciA/IEpTT04uc3RyaW5naWZ5KHRoaXMudHlwZS5uYW1lKSA6IHRoaXMudHlwZS5uYW1lKSArXG4gICAgICAgICAgICAgICAgKGNoaWxkcmVuLmxlbmd0aCA/IFwiKFwiICsgY2hpbGRyZW4gKyBcIilcIiA6IFwiXCIpO1xuICAgIH1cbiAgICAvLy8gR2V0IGEgW3RyZWUgY3Vyc29yXSgjY29tbW9uLlRyZWVDdXJzb3IpIHBvc2l0aW9uZWQgYXQgdGhlIHRvcCBvZlxuICAgIC8vLyB0aGUgdHJlZS4gTW9kZSBjYW4gYmUgdXNlZCB0byBbY29udHJvbF0oI2NvbW1vbi5JdGVyTW9kZSkgd2hpY2hcbiAgICAvLy8gbm9kZXMgdGhlIGN1cnNvciB2aXNpdHMuXG4gICAgY3Vyc29yKG1vZGUgPSAwKSB7XG4gICAgICAgIHJldHVybiBuZXcgVHJlZUN1cnNvcih0aGlzLnRvcE5vZGUsIG1vZGUpO1xuICAgIH1cbiAgICAvLy8gR2V0IGEgW3RyZWUgY3Vyc29yXSgjY29tbW9uLlRyZWVDdXJzb3IpIHBvaW50aW5nIGludG8gdGhpcyB0cmVlXG4gICAgLy8vIGF0IHRoZSBnaXZlbiBwb3NpdGlvbiBhbmQgc2lkZSAoc2VlXG4gICAgLy8vIFtgbW92ZVRvYF0oI2NvbW1vbi5UcmVlQ3Vyc29yLm1vdmVUbykuXG4gICAgY3Vyc29yQXQocG9zLCBzaWRlID0gMCwgbW9kZSA9IDApIHtcbiAgICAgICAgbGV0IHNjb3BlID0gQ2FjaGVkTm9kZS5nZXQodGhpcykgfHwgdGhpcy50b3BOb2RlO1xuICAgICAgICBsZXQgY3Vyc29yID0gbmV3IFRyZWVDdXJzb3Ioc2NvcGUpO1xuICAgICAgICBjdXJzb3IubW92ZVRvKHBvcywgc2lkZSk7XG4gICAgICAgIENhY2hlZE5vZGUuc2V0KHRoaXMsIGN1cnNvci5fdHJlZSk7XG4gICAgICAgIHJldHVybiBjdXJzb3I7XG4gICAgfVxuICAgIC8vLyBHZXQgYSBbc3ludGF4IG5vZGVdKCNjb21tb24uU3ludGF4Tm9kZSkgb2JqZWN0IGZvciB0aGUgdG9wIG9mIHRoZVxuICAgIC8vLyB0cmVlLlxuICAgIGdldCB0b3BOb2RlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFRyZWVOb2RlKHRoaXMsIDAsIDAsIG51bGwpO1xuICAgIH1cbiAgICAvLy8gR2V0IHRoZSBbc3ludGF4IG5vZGVdKCNjb21tb24uU3ludGF4Tm9kZSkgYXQgdGhlIGdpdmVuIHBvc2l0aW9uLlxuICAgIC8vLyBJZiBgc2lkZWAgaXMgLTEsIHRoaXMgd2lsbCBtb3ZlIGludG8gbm9kZXMgdGhhdCBlbmQgYXQgdGhlXG4gICAgLy8vIHBvc2l0aW9uLiBJZiAxLCBpdCdsbCBtb3ZlIGludG8gbm9kZXMgdGhhdCBzdGFydCBhdCB0aGVcbiAgICAvLy8gcG9zaXRpb24uIFdpdGggMCwgaXQnbGwgb25seSBlbnRlciBub2RlcyB0aGF0IGNvdmVyIHRoZSBwb3NpdGlvblxuICAgIC8vLyBmcm9tIGJvdGggc2lkZXMuXG4gICAgLy8vXG4gICAgLy8vIE5vdGUgdGhhdCB0aGlzIHdpbGwgbm90IGVudGVyXG4gICAgLy8vIFtvdmVybGF5c10oI2NvbW1vbi5Nb3VudGVkVHJlZS5vdmVybGF5KSwgYW5kIHlvdSBvZnRlbiB3YW50XG4gICAgLy8vIFtgcmVzb2x2ZUlubmVyYF0oI2NvbW1vbi5UcmVlLnJlc29sdmVJbm5lcikgaW5zdGVhZC5cbiAgICByZXNvbHZlKHBvcywgc2lkZSA9IDApIHtcbiAgICAgICAgbGV0IG5vZGUgPSByZXNvbHZlTm9kZShDYWNoZWROb2RlLmdldCh0aGlzKSB8fCB0aGlzLnRvcE5vZGUsIHBvcywgc2lkZSwgZmFsc2UpO1xuICAgICAgICBDYWNoZWROb2RlLnNldCh0aGlzLCBub2RlKTtcbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxuICAgIC8vLyBMaWtlIFtgcmVzb2x2ZWBdKCNjb21tb24uVHJlZS5yZXNvbHZlKSwgYnV0IHdpbGwgZW50ZXJcbiAgICAvLy8gW292ZXJsYWlkXSgjY29tbW9uLk1vdW50ZWRUcmVlLm92ZXJsYXkpIG5vZGVzLCBwcm9kdWNpbmcgYSBzeW50YXggbm9kZVxuICAgIC8vLyBwb2ludGluZyBpbnRvIHRoZSBpbm5lcm1vc3Qgb3ZlcmxhaWQgdHJlZSBhdCB0aGUgZ2l2ZW4gcG9zaXRpb25cbiAgICAvLy8gKHdpdGggcGFyZW50IGxpbmtzIGdvaW5nIHRocm91Z2ggYWxsIHBhcmVudCBzdHJ1Y3R1cmUsIGluY2x1ZGluZ1xuICAgIC8vLyB0aGUgaG9zdCB0cmVlcykuXG4gICAgcmVzb2x2ZUlubmVyKHBvcywgc2lkZSA9IDApIHtcbiAgICAgICAgbGV0IG5vZGUgPSByZXNvbHZlTm9kZShDYWNoZWRJbm5lck5vZGUuZ2V0KHRoaXMpIHx8IHRoaXMudG9wTm9kZSwgcG9zLCBzaWRlLCB0cnVlKTtcbiAgICAgICAgQ2FjaGVkSW5uZXJOb2RlLnNldCh0aGlzLCBub2RlKTtcbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxuICAgIC8vLyBJdGVyYXRlIG92ZXIgdGhlIHRyZWUgYW5kIGl0cyBjaGlsZHJlbiwgY2FsbGluZyBgZW50ZXJgIGZvciBhbnlcbiAgICAvLy8gbm9kZSB0aGF0IHRvdWNoZXMgdGhlIGBmcm9tYC9gdG9gIHJlZ2lvbiAoaWYgZ2l2ZW4pIGJlZm9yZVxuICAgIC8vLyBydW5uaW5nIG92ZXIgc3VjaCBhIG5vZGUncyBjaGlsZHJlbiwgYW5kIGBsZWF2ZWAgKGlmIGdpdmVuKSB3aGVuXG4gICAgLy8vIGxlYXZpbmcgdGhlIG5vZGUuIFdoZW4gYGVudGVyYCByZXR1cm5zIGBmYWxzZWAsIHRoYXQgbm9kZSB3aWxsXG4gICAgLy8vIG5vdCBoYXZlIGl0cyBjaGlsZHJlbiBpdGVyYXRlZCBvdmVyIChvciBgbGVhdmVgIGNhbGxlZCkuXG4gICAgaXRlcmF0ZShzcGVjKSB7XG4gICAgICAgIGxldCB7IGVudGVyLCBsZWF2ZSwgZnJvbSA9IDAsIHRvID0gdGhpcy5sZW5ndGggfSA9IHNwZWM7XG4gICAgICAgIGZvciAobGV0IGMgPSB0aGlzLmN1cnNvcigoc3BlYy5tb2RlIHx8IDApIHwgSXRlck1vZGUuSW5jbHVkZUFub255bW91cyk7Oykge1xuICAgICAgICAgICAgbGV0IGVudGVyZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChjLmZyb20gPD0gdG8gJiYgYy50byA+PSBmcm9tICYmIChjLnR5cGUuaXNBbm9ueW1vdXMgfHwgZW50ZXIoYykgIT09IGZhbHNlKSkge1xuICAgICAgICAgICAgICAgIGlmIChjLmZpcnN0Q2hpbGQoKSlcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgZW50ZXJlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICAgICAgaWYgKGVudGVyZWQgJiYgbGVhdmUgJiYgIWMudHlwZS5pc0Fub255bW91cylcbiAgICAgICAgICAgICAgICAgICAgbGVhdmUoYyk7XG4gICAgICAgICAgICAgICAgaWYgKGMubmV4dFNpYmxpbmcoKSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgaWYgKCFjLnBhcmVudCgpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgZW50ZXJlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8vIEdldCB0aGUgdmFsdWUgb2YgdGhlIGdpdmVuIFtub2RlIHByb3BdKCNjb21tb24uTm9kZVByb3ApIGZvciB0aGlzXG4gICAgLy8vIG5vZGUuIFdvcmtzIHdpdGggYm90aCBwZXItbm9kZSBhbmQgcGVyLXR5cGUgcHJvcHMuXG4gICAgcHJvcChwcm9wKSB7XG4gICAgICAgIHJldHVybiAhcHJvcC5wZXJOb2RlID8gdGhpcy50eXBlLnByb3AocHJvcCkgOiB0aGlzLnByb3BzID8gdGhpcy5wcm9wc1twcm9wLmlkXSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLy8vIFJldHVybnMgdGhlIG5vZGUncyBbcGVyLW5vZGUgcHJvcHNdKCNjb21tb24uTm9kZVByb3AucGVyTm9kZSkgaW4gYVxuICAgIC8vLyBmb3JtYXQgdGhhdCBjYW4gYmUgcGFzc2VkIHRvIHRoZSBbYFRyZWVgXSgjY29tbW9uLlRyZWUpXG4gICAgLy8vIGNvbnN0cnVjdG9yLlxuICAgIGdldCBwcm9wVmFsdWVzKCkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgICAgIGlmICh0aGlzLnByb3BzKVxuICAgICAgICAgICAgZm9yIChsZXQgaWQgaW4gdGhpcy5wcm9wcylcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChbK2lkLCB0aGlzLnByb3BzW2lkXV0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvLy8gQmFsYW5jZSB0aGUgZGlyZWN0IGNoaWxkcmVuIG9mIHRoaXMgdHJlZSwgcHJvZHVjaW5nIGEgY29weSBvZlxuICAgIC8vLyB3aGljaCBtYXkgaGF2ZSBjaGlsZHJlbiBncm91cGVkIGludG8gc3VidHJlZXMgd2l0aCB0eXBlXG4gICAgLy8vIFtgTm9kZVR5cGUubm9uZWBdKCNjb21tb24uTm9kZVR5cGVebm9uZSkuXG4gICAgYmFsYW5jZShjb25maWcgPSB7fSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbi5sZW5ndGggPD0gOCAvKiBCcmFuY2hGYWN0b3IgKi8gPyB0aGlzIDpcbiAgICAgICAgICAgIGJhbGFuY2VSYW5nZShOb2RlVHlwZS5ub25lLCB0aGlzLmNoaWxkcmVuLCB0aGlzLnBvc2l0aW9ucywgMCwgdGhpcy5jaGlsZHJlbi5sZW5ndGgsIDAsIHRoaXMubGVuZ3RoLCAoY2hpbGRyZW4sIHBvc2l0aW9ucywgbGVuZ3RoKSA9PiBuZXcgVHJlZSh0aGlzLnR5cGUsIGNoaWxkcmVuLCBwb3NpdGlvbnMsIGxlbmd0aCwgdGhpcy5wcm9wVmFsdWVzKSwgY29uZmlnLm1ha2VUcmVlIHx8ICgoY2hpbGRyZW4sIHBvc2l0aW9ucywgbGVuZ3RoKSA9PiBuZXcgVHJlZShOb2RlVHlwZS5ub25lLCBjaGlsZHJlbiwgcG9zaXRpb25zLCBsZW5ndGgpKSk7XG4gICAgfVxuICAgIC8vLyBCdWlsZCBhIHRyZWUgZnJvbSBhIHBvc3RmaXgtb3JkZXJlZCBidWZmZXIgb2Ygbm9kZSBpbmZvcm1hdGlvbixcbiAgICAvLy8gb3IgYSBjdXJzb3Igb3ZlciBzdWNoIGEgYnVmZmVyLlxuICAgIHN0YXRpYyBidWlsZChkYXRhKSB7IHJldHVybiBidWlsZFRyZWUoZGF0YSk7IH1cbn1cbi8vLyBUaGUgZW1wdHkgdHJlZVxuVHJlZS5lbXB0eSA9IG5ldyBUcmVlKE5vZGVUeXBlLm5vbmUsIFtdLCBbXSwgMCk7XG5jbGFzcyBGbGF0QnVmZmVyQ3Vyc29yIHtcbiAgICBjb25zdHJ1Y3RvcihidWZmZXIsIGluZGV4KSB7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gYnVmZmVyO1xuICAgICAgICB0aGlzLmluZGV4ID0gaW5kZXg7XG4gICAgfVxuICAgIGdldCBpZCgpIHsgcmV0dXJuIHRoaXMuYnVmZmVyW3RoaXMuaW5kZXggLSA0XTsgfVxuICAgIGdldCBzdGFydCgpIHsgcmV0dXJuIHRoaXMuYnVmZmVyW3RoaXMuaW5kZXggLSAzXTsgfVxuICAgIGdldCBlbmQoKSB7IHJldHVybiB0aGlzLmJ1ZmZlclt0aGlzLmluZGV4IC0gMl07IH1cbiAgICBnZXQgc2l6ZSgpIHsgcmV0dXJuIHRoaXMuYnVmZmVyW3RoaXMuaW5kZXggLSAxXTsgfVxuICAgIGdldCBwb3MoKSB7IHJldHVybiB0aGlzLmluZGV4OyB9XG4gICAgbmV4dCgpIHsgdGhpcy5pbmRleCAtPSA0OyB9XG4gICAgZm9yaygpIHsgcmV0dXJuIG5ldyBGbGF0QnVmZmVyQ3Vyc29yKHRoaXMuYnVmZmVyLCB0aGlzLmluZGV4KTsgfVxufVxuLy8vIFRyZWUgYnVmZmVycyBjb250YWluICh0eXBlLCBzdGFydCwgZW5kLCBlbmRJbmRleCkgcXVhZHMgZm9yIGVhY2hcbi8vLyBub2RlLiBJbiBzdWNoIGEgYnVmZmVyLCBub2RlcyBhcmUgc3RvcmVkIGluIHByZWZpeCBvcmRlciAocGFyZW50c1xuLy8vIGJlZm9yZSBjaGlsZHJlbiwgd2l0aCB0aGUgZW5kSW5kZXggb2YgdGhlIHBhcmVudCBpbmRpY2F0aW5nIHdoaWNoXG4vLy8gY2hpbGRyZW4gYmVsb25nIHRvIGl0KS5cbmNsYXNzIFRyZWVCdWZmZXIge1xuICAgIC8vLyBDcmVhdGUgYSB0cmVlIGJ1ZmZlci5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvLy8gVGhlIGJ1ZmZlcidzIGNvbnRlbnQuXG4gICAgYnVmZmVyLCBcbiAgICAvLy8gVGhlIHRvdGFsIGxlbmd0aCBvZiB0aGUgZ3JvdXAgb2Ygbm9kZXMgaW4gdGhlIGJ1ZmZlci5cbiAgICBsZW5ndGgsIFxuICAgIC8vLyBUaGUgbm9kZSBzZXQgdXNlZCBpbiB0aGlzIGJ1ZmZlci5cbiAgICBzZXQpIHtcbiAgICAgICAgdGhpcy5idWZmZXIgPSBidWZmZXI7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gbGVuZ3RoO1xuICAgICAgICB0aGlzLnNldCA9IHNldDtcbiAgICB9XG4gICAgLy8vIEBpbnRlcm5hbFxuICAgIGdldCB0eXBlKCkgeyByZXR1cm4gTm9kZVR5cGUubm9uZTsgfVxuICAgIC8vLyBAaW50ZXJuYWxcbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5idWZmZXIubGVuZ3RoOykge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2godGhpcy5jaGlsZFN0cmluZyhpbmRleCkpO1xuICAgICAgICAgICAgaW5kZXggPSB0aGlzLmJ1ZmZlcltpbmRleCArIDNdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQuam9pbihcIixcIik7XG4gICAgfVxuICAgIC8vLyBAaW50ZXJuYWxcbiAgICBjaGlsZFN0cmluZyhpbmRleCkge1xuICAgICAgICBsZXQgaWQgPSB0aGlzLmJ1ZmZlcltpbmRleF0sIGVuZEluZGV4ID0gdGhpcy5idWZmZXJbaW5kZXggKyAzXTtcbiAgICAgICAgbGV0IHR5cGUgPSB0aGlzLnNldC50eXBlc1tpZF0sIHJlc3VsdCA9IHR5cGUubmFtZTtcbiAgICAgICAgaWYgKC9cXFcvLnRlc3QocmVzdWx0KSAmJiAhdHlwZS5pc0Vycm9yKVxuICAgICAgICAgICAgcmVzdWx0ID0gSlNPTi5zdHJpbmdpZnkocmVzdWx0KTtcbiAgICAgICAgaW5kZXggKz0gNDtcbiAgICAgICAgaWYgKGVuZEluZGV4ID09IGluZGV4KVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgbGV0IGNoaWxkcmVuID0gW107XG4gICAgICAgIHdoaWxlIChpbmRleCA8IGVuZEluZGV4KSB7XG4gICAgICAgICAgICBjaGlsZHJlbi5wdXNoKHRoaXMuY2hpbGRTdHJpbmcoaW5kZXgpKTtcbiAgICAgICAgICAgIGluZGV4ID0gdGhpcy5idWZmZXJbaW5kZXggKyAzXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0ICsgXCIoXCIgKyBjaGlsZHJlbi5qb2luKFwiLFwiKSArIFwiKVwiO1xuICAgIH1cbiAgICAvLy8gQGludGVybmFsXG4gICAgZmluZENoaWxkKHN0YXJ0SW5kZXgsIGVuZEluZGV4LCBkaXIsIHBvcywgc2lkZSkge1xuICAgICAgICBsZXQgeyBidWZmZXIgfSA9IHRoaXMsIHBpY2sgPSAtMTtcbiAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0SW5kZXg7IGkgIT0gZW5kSW5kZXg7IGkgPSBidWZmZXJbaSArIDNdKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2tTaWRlKHNpZGUsIHBvcywgYnVmZmVyW2kgKyAxXSwgYnVmZmVyW2kgKyAyXSkpIHtcbiAgICAgICAgICAgICAgICBwaWNrID0gaTtcbiAgICAgICAgICAgICAgICBpZiAoZGlyID4gMClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBpY2s7XG4gICAgfVxuICAgIC8vLyBAaW50ZXJuYWxcbiAgICBzbGljZShzdGFydEksIGVuZEksIGZyb20sIHRvKSB7XG4gICAgICAgIGxldCBiID0gdGhpcy5idWZmZXI7XG4gICAgICAgIGxldCBjb3B5ID0gbmV3IFVpbnQxNkFycmF5KGVuZEkgLSBzdGFydEkpO1xuICAgICAgICBmb3IgKGxldCBpID0gc3RhcnRJLCBqID0gMDsgaSA8IGVuZEk7KSB7XG4gICAgICAgICAgICBjb3B5W2orK10gPSBiW2krK107XG4gICAgICAgICAgICBjb3B5W2orK10gPSBiW2krK10gLSBmcm9tO1xuICAgICAgICAgICAgY29weVtqKytdID0gYltpKytdIC0gZnJvbTtcbiAgICAgICAgICAgIGNvcHlbaisrXSA9IGJbaSsrXSAtIHN0YXJ0STtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFRyZWVCdWZmZXIoY29weSwgdG8gLSBmcm9tLCB0aGlzLnNldCk7XG4gICAgfVxufVxuZnVuY3Rpb24gY2hlY2tTaWRlKHNpZGUsIHBvcywgZnJvbSwgdG8pIHtcbiAgICBzd2l0Y2ggKHNpZGUpIHtcbiAgICAgICAgY2FzZSAtMiAvKiBCZWZvcmUgKi86IHJldHVybiBmcm9tIDwgcG9zO1xuICAgICAgICBjYXNlIC0xIC8qIEF0T3JCZWZvcmUgKi86IHJldHVybiB0byA+PSBwb3MgJiYgZnJvbSA8IHBvcztcbiAgICAgICAgY2FzZSAwIC8qIEFyb3VuZCAqLzogcmV0dXJuIGZyb20gPCBwb3MgJiYgdG8gPiBwb3M7XG4gICAgICAgIGNhc2UgMSAvKiBBdE9yQWZ0ZXIgKi86IHJldHVybiBmcm9tIDw9IHBvcyAmJiB0byA+IHBvcztcbiAgICAgICAgY2FzZSAyIC8qIEFmdGVyICovOiByZXR1cm4gdG8gPiBwb3M7XG4gICAgICAgIGNhc2UgNCAvKiBEb250Q2FyZSAqLzogcmV0dXJuIHRydWU7XG4gICAgfVxufVxuZnVuY3Rpb24gZW50ZXJVbmZpbmlzaGVkTm9kZXNCZWZvcmUobm9kZSwgcG9zKSB7XG4gICAgbGV0IHNjYW4gPSBub2RlLmNoaWxkQmVmb3JlKHBvcyk7XG4gICAgd2hpbGUgKHNjYW4pIHtcbiAgICAgICAgbGV0IGxhc3QgPSBzY2FuLmxhc3RDaGlsZDtcbiAgICAgICAgaWYgKCFsYXN0IHx8IGxhc3QudG8gIT0gc2Nhbi50bylcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBpZiAobGFzdC50eXBlLmlzRXJyb3IgJiYgbGFzdC5mcm9tID09IGxhc3QudG8pIHtcbiAgICAgICAgICAgIG5vZGUgPSBzY2FuO1xuICAgICAgICAgICAgc2NhbiA9IGxhc3QucHJldlNpYmxpbmc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzY2FuID0gbGFzdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbm9kZTtcbn1cbmZ1bmN0aW9uIHJlc29sdmVOb2RlKG5vZGUsIHBvcywgc2lkZSwgb3ZlcmxheXMpIHtcbiAgICB2YXIgX2E7XG4gICAgLy8gTW92ZSB1cCB0byBhIG5vZGUgdGhhdCBhY3R1YWxseSBob2xkcyB0aGUgcG9zaXRpb24sIGlmIHBvc3NpYmxlXG4gICAgd2hpbGUgKG5vZGUuZnJvbSA9PSBub2RlLnRvIHx8XG4gICAgICAgIChzaWRlIDwgMSA/IG5vZGUuZnJvbSA+PSBwb3MgOiBub2RlLmZyb20gPiBwb3MpIHx8XG4gICAgICAgIChzaWRlID4gLTEgPyBub2RlLnRvIDw9IHBvcyA6IG5vZGUudG8gPCBwb3MpKSB7XG4gICAgICAgIGxldCBwYXJlbnQgPSAhb3ZlcmxheXMgJiYgbm9kZSBpbnN0YW5jZW9mIFRyZWVOb2RlICYmIG5vZGUuaW5kZXggPCAwID8gbnVsbCA6IG5vZGUucGFyZW50O1xuICAgICAgICBpZiAoIXBhcmVudClcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICBub2RlID0gcGFyZW50O1xuICAgIH1cbiAgICBsZXQgbW9kZSA9IG92ZXJsYXlzID8gMCA6IEl0ZXJNb2RlLklnbm9yZU92ZXJsYXlzO1xuICAgIC8vIE11c3QgZ28gdXAgb3V0IG9mIG92ZXJsYXlzIHdoZW4gdGhvc2UgZG8gbm90IG92ZXJsYXAgd2l0aCBwb3NcbiAgICBpZiAob3ZlcmxheXMpXG4gICAgICAgIGZvciAobGV0IHNjYW4gPSBub2RlLCBwYXJlbnQgPSBzY2FuLnBhcmVudDsgcGFyZW50OyBzY2FuID0gcGFyZW50LCBwYXJlbnQgPSBzY2FuLnBhcmVudCkge1xuICAgICAgICAgICAgaWYgKHNjYW4gaW5zdGFuY2VvZiBUcmVlTm9kZSAmJiBzY2FuLmluZGV4IDwgMCAmJiAoKF9hID0gcGFyZW50LmVudGVyKHBvcywgc2lkZSwgbW9kZSkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5mcm9tKSAhPSBzY2FuLmZyb20pXG4gICAgICAgICAgICAgICAgbm9kZSA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgIGZvciAoOzspIHtcbiAgICAgICAgbGV0IGlubmVyID0gbm9kZS5lbnRlcihwb3MsIHNpZGUsIG1vZGUpO1xuICAgICAgICBpZiAoIWlubmVyKVxuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIG5vZGUgPSBpbm5lcjtcbiAgICB9XG59XG5jbGFzcyBUcmVlTm9kZSB7XG4gICAgY29uc3RydWN0b3IoX3RyZWUsIGZyb20sIFxuICAgIC8vIEluZGV4IGluIHBhcmVudCBub2RlLCBzZXQgdG8gLTEgaWYgdGhlIG5vZGUgaXMgbm90IGEgZGlyZWN0IGNoaWxkIG9mIF9wYXJlbnQubm9kZSAob3ZlcmxheSlcbiAgICBpbmRleCwgX3BhcmVudCkge1xuICAgICAgICB0aGlzLl90cmVlID0gX3RyZWU7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMuaW5kZXggPSBpbmRleDtcbiAgICAgICAgdGhpcy5fcGFyZW50ID0gX3BhcmVudDtcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7IHJldHVybiB0aGlzLl90cmVlLnR5cGU7IH1cbiAgICBnZXQgbmFtZSgpIHsgcmV0dXJuIHRoaXMuX3RyZWUudHlwZS5uYW1lOyB9XG4gICAgZ2V0IHRvKCkgeyByZXR1cm4gdGhpcy5mcm9tICsgdGhpcy5fdHJlZS5sZW5ndGg7IH1cbiAgICBuZXh0Q2hpbGQoaSwgZGlyLCBwb3MsIHNpZGUsIG1vZGUgPSAwKSB7XG4gICAgICAgIGZvciAobGV0IHBhcmVudCA9IHRoaXM7Oykge1xuICAgICAgICAgICAgZm9yIChsZXQgeyBjaGlsZHJlbiwgcG9zaXRpb25zIH0gPSBwYXJlbnQuX3RyZWUsIGUgPSBkaXIgPiAwID8gY2hpbGRyZW4ubGVuZ3RoIDogLTE7IGkgIT0gZTsgaSArPSBkaXIpIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IGNoaWxkcmVuW2ldLCBzdGFydCA9IHBvc2l0aW9uc1tpXSArIHBhcmVudC5mcm9tO1xuICAgICAgICAgICAgICAgIGlmICghY2hlY2tTaWRlKHNpZGUsIHBvcywgc3RhcnQsIHN0YXJ0ICsgbmV4dC5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBpZiAobmV4dCBpbnN0YW5jZW9mIFRyZWVCdWZmZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGUgJiBJdGVyTW9kZS5FeGNsdWRlQnVmZmVycylcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBuZXh0LmZpbmRDaGlsZCgwLCBuZXh0LmJ1ZmZlci5sZW5ndGgsIGRpciwgcG9zIC0gc3RhcnQsIHNpZGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPiAtMSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQnVmZmVyTm9kZShuZXcgQnVmZmVyQ29udGV4dChwYXJlbnQsIG5leHQsIGksIHN0YXJ0KSwgbnVsbCwgaW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgobW9kZSAmIEl0ZXJNb2RlLkluY2x1ZGVBbm9ueW1vdXMpIHx8ICghbmV4dC50eXBlLmlzQW5vbnltb3VzIHx8IGhhc0NoaWxkKG5leHQpKSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbW91bnRlZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEobW9kZSAmIEl0ZXJNb2RlLklnbm9yZU1vdW50cykgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQucHJvcHMgJiYgKG1vdW50ZWQgPSBuZXh0LnByb3AoTm9kZVByb3AubW91bnRlZCkpICYmICFtb3VudGVkLm92ZXJsYXkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFRyZWVOb2RlKG1vdW50ZWQudHJlZSwgc3RhcnQsIGksIHBhcmVudCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpbm5lciA9IG5ldyBUcmVlTm9kZShuZXh0LCBzdGFydCwgaSwgcGFyZW50KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChtb2RlICYgSXRlck1vZGUuSW5jbHVkZUFub255bW91cykgfHwgIWlubmVyLnR5cGUuaXNBbm9ueW1vdXMgPyBpbm5lclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBpbm5lci5uZXh0Q2hpbGQoZGlyIDwgMCA/IG5leHQuY2hpbGRyZW4ubGVuZ3RoIC0gMSA6IDAsIGRpciwgcG9zLCBzaWRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKG1vZGUgJiBJdGVyTW9kZS5JbmNsdWRlQW5vbnltb3VzKSB8fCAhcGFyZW50LnR5cGUuaXNBbm9ueW1vdXMpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBpZiAocGFyZW50LmluZGV4ID49IDApXG4gICAgICAgICAgICAgICAgaSA9IHBhcmVudC5pbmRleCArIGRpcjtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBpID0gZGlyIDwgMCA/IC0xIDogcGFyZW50Ll9wYXJlbnQuX3RyZWUuY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50Ll9wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoIXBhcmVudClcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgZmlyc3RDaGlsZCgpIHsgcmV0dXJuIHRoaXMubmV4dENoaWxkKDAsIDEsIDAsIDQgLyogRG9udENhcmUgKi8pOyB9XG4gICAgZ2V0IGxhc3RDaGlsZCgpIHsgcmV0dXJuIHRoaXMubmV4dENoaWxkKHRoaXMuX3RyZWUuY2hpbGRyZW4ubGVuZ3RoIC0gMSwgLTEsIDAsIDQgLyogRG9udENhcmUgKi8pOyB9XG4gICAgY2hpbGRBZnRlcihwb3MpIHsgcmV0dXJuIHRoaXMubmV4dENoaWxkKDAsIDEsIHBvcywgMiAvKiBBZnRlciAqLyk7IH1cbiAgICBjaGlsZEJlZm9yZShwb3MpIHsgcmV0dXJuIHRoaXMubmV4dENoaWxkKHRoaXMuX3RyZWUuY2hpbGRyZW4ubGVuZ3RoIC0gMSwgLTEsIHBvcywgLTIgLyogQmVmb3JlICovKTsgfVxuICAgIGVudGVyKHBvcywgc2lkZSwgbW9kZSA9IDApIHtcbiAgICAgICAgbGV0IG1vdW50ZWQ7XG4gICAgICAgIGlmICghKG1vZGUgJiBJdGVyTW9kZS5JZ25vcmVPdmVybGF5cykgJiYgKG1vdW50ZWQgPSB0aGlzLl90cmVlLnByb3AoTm9kZVByb3AubW91bnRlZCkpICYmIG1vdW50ZWQub3ZlcmxheSkge1xuICAgICAgICAgICAgbGV0IHJQb3MgPSBwb3MgLSB0aGlzLmZyb207XG4gICAgICAgICAgICBmb3IgKGxldCB7IGZyb20sIHRvIH0gb2YgbW91bnRlZC5vdmVybGF5KSB7XG4gICAgICAgICAgICAgICAgaWYgKChzaWRlID4gMCA/IGZyb20gPD0gclBvcyA6IGZyb20gPCByUG9zKSAmJlxuICAgICAgICAgICAgICAgICAgICAoc2lkZSA8IDAgPyB0byA+PSByUG9zIDogdG8gPiByUG9zKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBUcmVlTm9kZShtb3VudGVkLnRyZWUsIG1vdW50ZWQub3ZlcmxheVswXS5mcm9tICsgdGhpcy5mcm9tLCAtMSwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubmV4dENoaWxkKDAsIDEsIHBvcywgc2lkZSwgbW9kZSk7XG4gICAgfVxuICAgIG5leHRTaWduaWZpY2FudFBhcmVudCgpIHtcbiAgICAgICAgbGV0IHZhbCA9IHRoaXM7XG4gICAgICAgIHdoaWxlICh2YWwudHlwZS5pc0Fub255bW91cyAmJiB2YWwuX3BhcmVudClcbiAgICAgICAgICAgIHZhbCA9IHZhbC5fcGFyZW50O1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH1cbiAgICBnZXQgcGFyZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGFyZW50ID8gdGhpcy5fcGFyZW50Lm5leHRTaWduaWZpY2FudFBhcmVudCgpIDogbnVsbDtcbiAgICB9XG4gICAgZ2V0IG5leHRTaWJsaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGFyZW50ICYmIHRoaXMuaW5kZXggPj0gMCA/IHRoaXMuX3BhcmVudC5uZXh0Q2hpbGQodGhpcy5pbmRleCArIDEsIDEsIDAsIDQgLyogRG9udENhcmUgKi8pIDogbnVsbDtcbiAgICB9XG4gICAgZ2V0IHByZXZTaWJsaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGFyZW50ICYmIHRoaXMuaW5kZXggPj0gMCA/IHRoaXMuX3BhcmVudC5uZXh0Q2hpbGQodGhpcy5pbmRleCAtIDEsIC0xLCAwLCA0IC8qIERvbnRDYXJlICovKSA6IG51bGw7XG4gICAgfVxuICAgIGN1cnNvcihtb2RlID0gMCkgeyByZXR1cm4gbmV3IFRyZWVDdXJzb3IodGhpcywgbW9kZSk7IH1cbiAgICBnZXQgdHJlZSgpIHsgcmV0dXJuIHRoaXMuX3RyZWU7IH1cbiAgICB0b1RyZWUoKSB7IHJldHVybiB0aGlzLl90cmVlOyB9XG4gICAgcmVzb2x2ZShwb3MsIHNpZGUgPSAwKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlTm9kZSh0aGlzLCBwb3MsIHNpZGUsIGZhbHNlKTtcbiAgICB9XG4gICAgcmVzb2x2ZUlubmVyKHBvcywgc2lkZSA9IDApIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmVOb2RlKHRoaXMsIHBvcywgc2lkZSwgdHJ1ZSk7XG4gICAgfVxuICAgIGVudGVyVW5maW5pc2hlZE5vZGVzQmVmb3JlKHBvcykgeyByZXR1cm4gZW50ZXJVbmZpbmlzaGVkTm9kZXNCZWZvcmUodGhpcywgcG9zKTsgfVxuICAgIGdldENoaWxkKHR5cGUsIGJlZm9yZSA9IG51bGwsIGFmdGVyID0gbnVsbCkge1xuICAgICAgICBsZXQgciA9IGdldENoaWxkcmVuKHRoaXMsIHR5cGUsIGJlZm9yZSwgYWZ0ZXIpO1xuICAgICAgICByZXR1cm4gci5sZW5ndGggPyByWzBdIDogbnVsbDtcbiAgICB9XG4gICAgZ2V0Q2hpbGRyZW4odHlwZSwgYmVmb3JlID0gbnVsbCwgYWZ0ZXIgPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBnZXRDaGlsZHJlbih0aGlzLCB0eXBlLCBiZWZvcmUsIGFmdGVyKTtcbiAgICB9XG4gICAgLy8vIEBpbnRlcm5hbFxuICAgIHRvU3RyaW5nKCkgeyByZXR1cm4gdGhpcy5fdHJlZS50b1N0cmluZygpOyB9XG4gICAgZ2V0IG5vZGUoKSB7IHJldHVybiB0aGlzOyB9XG4gICAgbWF0Y2hDb250ZXh0KGNvbnRleHQpIHsgcmV0dXJuIG1hdGNoTm9kZUNvbnRleHQodGhpcywgY29udGV4dCk7IH1cbn1cbmZ1bmN0aW9uIGdldENoaWxkcmVuKG5vZGUsIHR5cGUsIGJlZm9yZSwgYWZ0ZXIpIHtcbiAgICBsZXQgY3VyID0gbm9kZS5jdXJzb3IoKSwgcmVzdWx0ID0gW107XG4gICAgaWYgKCFjdXIuZmlyc3RDaGlsZCgpKVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIGlmIChiZWZvcmUgIT0gbnVsbClcbiAgICAgICAgd2hpbGUgKCFjdXIudHlwZS5pcyhiZWZvcmUpKVxuICAgICAgICAgICAgaWYgKCFjdXIubmV4dFNpYmxpbmcoKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIGZvciAoOzspIHtcbiAgICAgICAgaWYgKGFmdGVyICE9IG51bGwgJiYgY3VyLnR5cGUuaXMoYWZ0ZXIpKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgaWYgKGN1ci50eXBlLmlzKHR5cGUpKVxuICAgICAgICAgICAgcmVzdWx0LnB1c2goY3VyLm5vZGUpO1xuICAgICAgICBpZiAoIWN1ci5uZXh0U2libGluZygpKVxuICAgICAgICAgICAgcmV0dXJuIGFmdGVyID09IG51bGwgPyByZXN1bHQgOiBbXTtcbiAgICB9XG59XG5mdW5jdGlvbiBtYXRjaE5vZGVDb250ZXh0KG5vZGUsIGNvbnRleHQsIGkgPSBjb250ZXh0Lmxlbmd0aCAtIDEpIHtcbiAgICBmb3IgKGxldCBwID0gbm9kZS5wYXJlbnQ7IGkgPj0gMDsgcCA9IHAucGFyZW50KSB7XG4gICAgICAgIGlmICghcClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKCFwLnR5cGUuaXNBbm9ueW1vdXMpIHtcbiAgICAgICAgICAgIGlmIChjb250ZXh0W2ldICYmIGNvbnRleHRbaV0gIT0gcC5uYW1lKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGktLTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmNsYXNzIEJ1ZmZlckNvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudCwgYnVmZmVyLCBpbmRleCwgc3RhcnQpIHtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gYnVmZmVyO1xuICAgICAgICB0aGlzLmluZGV4ID0gaW5kZXg7XG4gICAgICAgIHRoaXMuc3RhcnQgPSBzdGFydDtcbiAgICB9XG59XG5jbGFzcyBCdWZmZXJOb2RlIHtcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0LCBfcGFyZW50LCBpbmRleCkge1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICB0aGlzLl9wYXJlbnQgPSBfcGFyZW50O1xuICAgICAgICB0aGlzLmluZGV4ID0gaW5kZXg7XG4gICAgICAgIHRoaXMudHlwZSA9IGNvbnRleHQuYnVmZmVyLnNldC50eXBlc1tjb250ZXh0LmJ1ZmZlci5idWZmZXJbaW5kZXhdXTtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7IHJldHVybiB0aGlzLnR5cGUubmFtZTsgfVxuICAgIGdldCBmcm9tKCkgeyByZXR1cm4gdGhpcy5jb250ZXh0LnN0YXJ0ICsgdGhpcy5jb250ZXh0LmJ1ZmZlci5idWZmZXJbdGhpcy5pbmRleCArIDFdOyB9XG4gICAgZ2V0IHRvKCkgeyByZXR1cm4gdGhpcy5jb250ZXh0LnN0YXJ0ICsgdGhpcy5jb250ZXh0LmJ1ZmZlci5idWZmZXJbdGhpcy5pbmRleCArIDJdOyB9XG4gICAgY2hpbGQoZGlyLCBwb3MsIHNpZGUpIHtcbiAgICAgICAgbGV0IHsgYnVmZmVyIH0gPSB0aGlzLmNvbnRleHQ7XG4gICAgICAgIGxldCBpbmRleCA9IGJ1ZmZlci5maW5kQ2hpbGQodGhpcy5pbmRleCArIDQsIGJ1ZmZlci5idWZmZXJbdGhpcy5pbmRleCArIDNdLCBkaXIsIHBvcyAtIHRoaXMuY29udGV4dC5zdGFydCwgc2lkZSk7XG4gICAgICAgIHJldHVybiBpbmRleCA8IDAgPyBudWxsIDogbmV3IEJ1ZmZlck5vZGUodGhpcy5jb250ZXh0LCB0aGlzLCBpbmRleCk7XG4gICAgfVxuICAgIGdldCBmaXJzdENoaWxkKCkgeyByZXR1cm4gdGhpcy5jaGlsZCgxLCAwLCA0IC8qIERvbnRDYXJlICovKTsgfVxuICAgIGdldCBsYXN0Q2hpbGQoKSB7IHJldHVybiB0aGlzLmNoaWxkKC0xLCAwLCA0IC8qIERvbnRDYXJlICovKTsgfVxuICAgIGNoaWxkQWZ0ZXIocG9zKSB7IHJldHVybiB0aGlzLmNoaWxkKDEsIHBvcywgMiAvKiBBZnRlciAqLyk7IH1cbiAgICBjaGlsZEJlZm9yZShwb3MpIHsgcmV0dXJuIHRoaXMuY2hpbGQoLTEsIHBvcywgLTIgLyogQmVmb3JlICovKTsgfVxuICAgIGVudGVyKHBvcywgc2lkZSwgbW9kZSA9IDApIHtcbiAgICAgICAgaWYgKG1vZGUgJiBJdGVyTW9kZS5FeGNsdWRlQnVmZmVycylcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBsZXQgeyBidWZmZXIgfSA9IHRoaXMuY29udGV4dDtcbiAgICAgICAgbGV0IGluZGV4ID0gYnVmZmVyLmZpbmRDaGlsZCh0aGlzLmluZGV4ICsgNCwgYnVmZmVyLmJ1ZmZlclt0aGlzLmluZGV4ICsgM10sIHNpZGUgPiAwID8gMSA6IC0xLCBwb3MgLSB0aGlzLmNvbnRleHQuc3RhcnQsIHNpZGUpO1xuICAgICAgICByZXR1cm4gaW5kZXggPCAwID8gbnVsbCA6IG5ldyBCdWZmZXJOb2RlKHRoaXMuY29udGV4dCwgdGhpcywgaW5kZXgpO1xuICAgIH1cbiAgICBnZXQgcGFyZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGFyZW50IHx8IHRoaXMuY29udGV4dC5wYXJlbnQubmV4dFNpZ25pZmljYW50UGFyZW50KCk7XG4gICAgfVxuICAgIGV4dGVybmFsU2libGluZyhkaXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcmVudCA/IG51bGwgOiB0aGlzLmNvbnRleHQucGFyZW50Lm5leHRDaGlsZCh0aGlzLmNvbnRleHQuaW5kZXggKyBkaXIsIGRpciwgMCwgNCAvKiBEb250Q2FyZSAqLyk7XG4gICAgfVxuICAgIGdldCBuZXh0U2libGluZygpIHtcbiAgICAgICAgbGV0IHsgYnVmZmVyIH0gPSB0aGlzLmNvbnRleHQ7XG4gICAgICAgIGxldCBhZnRlciA9IGJ1ZmZlci5idWZmZXJbdGhpcy5pbmRleCArIDNdO1xuICAgICAgICBpZiAoYWZ0ZXIgPCAodGhpcy5fcGFyZW50ID8gYnVmZmVyLmJ1ZmZlclt0aGlzLl9wYXJlbnQuaW5kZXggKyAzXSA6IGJ1ZmZlci5idWZmZXIubGVuZ3RoKSlcbiAgICAgICAgICAgIHJldHVybiBuZXcgQnVmZmVyTm9kZSh0aGlzLmNvbnRleHQsIHRoaXMuX3BhcmVudCwgYWZ0ZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5leHRlcm5hbFNpYmxpbmcoMSk7XG4gICAgfVxuICAgIGdldCBwcmV2U2libGluZygpIHtcbiAgICAgICAgbGV0IHsgYnVmZmVyIH0gPSB0aGlzLmNvbnRleHQ7XG4gICAgICAgIGxldCBwYXJlbnRTdGFydCA9IHRoaXMuX3BhcmVudCA/IHRoaXMuX3BhcmVudC5pbmRleCArIDQgOiAwO1xuICAgICAgICBpZiAodGhpcy5pbmRleCA9PSBwYXJlbnRTdGFydClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4dGVybmFsU2libGluZygtMSk7XG4gICAgICAgIHJldHVybiBuZXcgQnVmZmVyTm9kZSh0aGlzLmNvbnRleHQsIHRoaXMuX3BhcmVudCwgYnVmZmVyLmZpbmRDaGlsZChwYXJlbnRTdGFydCwgdGhpcy5pbmRleCwgLTEsIDAsIDQgLyogRG9udENhcmUgKi8pKTtcbiAgICB9XG4gICAgY3Vyc29yKG1vZGUgPSAwKSB7IHJldHVybiBuZXcgVHJlZUN1cnNvcih0aGlzLCBtb2RlKTsgfVxuICAgIGdldCB0cmVlKCkgeyByZXR1cm4gbnVsbDsgfVxuICAgIHRvVHJlZSgpIHtcbiAgICAgICAgbGV0IGNoaWxkcmVuID0gW10sIHBvc2l0aW9ucyA9IFtdO1xuICAgICAgICBsZXQgeyBidWZmZXIgfSA9IHRoaXMuY29udGV4dDtcbiAgICAgICAgbGV0IHN0YXJ0SSA9IHRoaXMuaW5kZXggKyA0LCBlbmRJID0gYnVmZmVyLmJ1ZmZlclt0aGlzLmluZGV4ICsgM107XG4gICAgICAgIGlmIChlbmRJID4gc3RhcnRJKSB7XG4gICAgICAgICAgICBsZXQgZnJvbSA9IGJ1ZmZlci5idWZmZXJbdGhpcy5pbmRleCArIDFdLCB0byA9IGJ1ZmZlci5idWZmZXJbdGhpcy5pbmRleCArIDJdO1xuICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChidWZmZXIuc2xpY2Uoc3RhcnRJLCBlbmRJLCBmcm9tLCB0bykpO1xuICAgICAgICAgICAgcG9zaXRpb25zLnB1c2goMCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBUcmVlKHRoaXMudHlwZSwgY2hpbGRyZW4sIHBvc2l0aW9ucywgdGhpcy50byAtIHRoaXMuZnJvbSk7XG4gICAgfVxuICAgIHJlc29sdmUocG9zLCBzaWRlID0gMCkge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZU5vZGUodGhpcywgcG9zLCBzaWRlLCBmYWxzZSk7XG4gICAgfVxuICAgIHJlc29sdmVJbm5lcihwb3MsIHNpZGUgPSAwKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlTm9kZSh0aGlzLCBwb3MsIHNpZGUsIHRydWUpO1xuICAgIH1cbiAgICBlbnRlclVuZmluaXNoZWROb2Rlc0JlZm9yZShwb3MpIHsgcmV0dXJuIGVudGVyVW5maW5pc2hlZE5vZGVzQmVmb3JlKHRoaXMsIHBvcyk7IH1cbiAgICAvLy8gQGludGVybmFsXG4gICAgdG9TdHJpbmcoKSB7IHJldHVybiB0aGlzLmNvbnRleHQuYnVmZmVyLmNoaWxkU3RyaW5nKHRoaXMuaW5kZXgpOyB9XG4gICAgZ2V0Q2hpbGQodHlwZSwgYmVmb3JlID0gbnVsbCwgYWZ0ZXIgPSBudWxsKSB7XG4gICAgICAgIGxldCByID0gZ2V0Q2hpbGRyZW4odGhpcywgdHlwZSwgYmVmb3JlLCBhZnRlcik7XG4gICAgICAgIHJldHVybiByLmxlbmd0aCA/IHJbMF0gOiBudWxsO1xuICAgIH1cbiAgICBnZXRDaGlsZHJlbih0eXBlLCBiZWZvcmUgPSBudWxsLCBhZnRlciA9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGdldENoaWxkcmVuKHRoaXMsIHR5cGUsIGJlZm9yZSwgYWZ0ZXIpO1xuICAgIH1cbiAgICBnZXQgbm9kZSgpIHsgcmV0dXJuIHRoaXM7IH1cbiAgICBtYXRjaENvbnRleHQoY29udGV4dCkgeyByZXR1cm4gbWF0Y2hOb2RlQ29udGV4dCh0aGlzLCBjb250ZXh0KTsgfVxufVxuLy8vIEEgdHJlZSBjdXJzb3Igb2JqZWN0IGZvY3VzZXMgb24gYSBnaXZlbiBub2RlIGluIGEgc3ludGF4IHRyZWUsIGFuZFxuLy8vIGFsbG93cyB5b3UgdG8gbW92ZSB0byBhZGphY2VudCBub2Rlcy5cbmNsYXNzIFRyZWVDdXJzb3Ige1xuICAgIC8vLyBAaW50ZXJuYWxcbiAgICBjb25zdHJ1Y3Rvcihub2RlLCBcbiAgICAvLy8gQGludGVybmFsXG4gICAgbW9kZSA9IDApIHtcbiAgICAgICAgdGhpcy5tb2RlID0gbW9kZTtcbiAgICAgICAgLy8vIEBpbnRlcm5hbFxuICAgICAgICB0aGlzLmJ1ZmZlciA9IG51bGw7XG4gICAgICAgIHRoaXMuc3RhY2sgPSBbXTtcbiAgICAgICAgLy8vIEBpbnRlcm5hbFxuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5idWZmZXJOb2RlID0gbnVsbDtcbiAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBUcmVlTm9kZSkge1xuICAgICAgICAgICAgdGhpcy55aWVsZE5vZGUobm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl90cmVlID0gbm9kZS5jb250ZXh0LnBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyID0gbm9kZS5jb250ZXh0O1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IG5vZGUuX3BhcmVudDsgbjsgbiA9IG4uX3BhcmVudClcbiAgICAgICAgICAgICAgICB0aGlzLnN0YWNrLnVuc2hpZnQobi5pbmRleCk7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlck5vZGUgPSBub2RlO1xuICAgICAgICAgICAgdGhpcy55aWVsZEJ1Zihub2RlLmluZGV4KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLy8gU2hvcnRoYW5kIGZvciBgLnR5cGUubmFtZWAuXG4gICAgZ2V0IG5hbWUoKSB7IHJldHVybiB0aGlzLnR5cGUubmFtZTsgfVxuICAgIHlpZWxkTm9kZShub2RlKSB7XG4gICAgICAgIGlmICghbm9kZSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdGhpcy5fdHJlZSA9IG5vZGU7XG4gICAgICAgIHRoaXMudHlwZSA9IG5vZGUudHlwZTtcbiAgICAgICAgdGhpcy5mcm9tID0gbm9kZS5mcm9tO1xuICAgICAgICB0aGlzLnRvID0gbm9kZS50bztcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHlpZWxkQnVmKGluZGV4LCB0eXBlKSB7XG4gICAgICAgIHRoaXMuaW5kZXggPSBpbmRleDtcbiAgICAgICAgbGV0IHsgc3RhcnQsIGJ1ZmZlciB9ID0gdGhpcy5idWZmZXI7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGUgfHwgYnVmZmVyLnNldC50eXBlc1tidWZmZXIuYnVmZmVyW2luZGV4XV07XG4gICAgICAgIHRoaXMuZnJvbSA9IHN0YXJ0ICsgYnVmZmVyLmJ1ZmZlcltpbmRleCArIDFdO1xuICAgICAgICB0aGlzLnRvID0gc3RhcnQgKyBidWZmZXIuYnVmZmVyW2luZGV4ICsgMl07XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICB5aWVsZChub2RlKSB7XG4gICAgICAgIGlmICghbm9kZSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBUcmVlTm9kZSkge1xuICAgICAgICAgICAgdGhpcy5idWZmZXIgPSBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMueWllbGROb2RlKG5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYnVmZmVyID0gbm9kZS5jb250ZXh0O1xuICAgICAgICByZXR1cm4gdGhpcy55aWVsZEJ1Zihub2RlLmluZGV4LCBub2RlLnR5cGUpO1xuICAgIH1cbiAgICAvLy8gQGludGVybmFsXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlciA/IHRoaXMuYnVmZmVyLmJ1ZmZlci5jaGlsZFN0cmluZyh0aGlzLmluZGV4KSA6IHRoaXMuX3RyZWUudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgLy8vIEBpbnRlcm5hbFxuICAgIGVudGVyQ2hpbGQoZGlyLCBwb3MsIHNpZGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmJ1ZmZlcilcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnlpZWxkKHRoaXMuX3RyZWUubmV4dENoaWxkKGRpciA8IDAgPyB0aGlzLl90cmVlLl90cmVlLmNoaWxkcmVuLmxlbmd0aCAtIDEgOiAwLCBkaXIsIHBvcywgc2lkZSwgdGhpcy5tb2RlKSk7XG4gICAgICAgIGxldCB7IGJ1ZmZlciB9ID0gdGhpcy5idWZmZXI7XG4gICAgICAgIGxldCBpbmRleCA9IGJ1ZmZlci5maW5kQ2hpbGQodGhpcy5pbmRleCArIDQsIGJ1ZmZlci5idWZmZXJbdGhpcy5pbmRleCArIDNdLCBkaXIsIHBvcyAtIHRoaXMuYnVmZmVyLnN0YXJ0LCBzaWRlKTtcbiAgICAgICAgaWYgKGluZGV4IDwgMClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdGhpcy5zdGFjay5wdXNoKHRoaXMuaW5kZXgpO1xuICAgICAgICByZXR1cm4gdGhpcy55aWVsZEJ1ZihpbmRleCk7XG4gICAgfVxuICAgIC8vLyBNb3ZlIHRoZSBjdXJzb3IgdG8gdGhpcyBub2RlJ3MgZmlyc3QgY2hpbGQuIFdoZW4gdGhpcyByZXR1cm5zXG4gICAgLy8vIGZhbHNlLCB0aGUgbm9kZSBoYXMgbm8gY2hpbGQsIGFuZCB0aGUgY3Vyc29yIGhhcyBub3QgYmVlbiBtb3ZlZC5cbiAgICBmaXJzdENoaWxkKCkgeyByZXR1cm4gdGhpcy5lbnRlckNoaWxkKDEsIDAsIDQgLyogRG9udENhcmUgKi8pOyB9XG4gICAgLy8vIE1vdmUgdGhlIGN1cnNvciB0byB0aGlzIG5vZGUncyBsYXN0IGNoaWxkLlxuICAgIGxhc3RDaGlsZCgpIHsgcmV0dXJuIHRoaXMuZW50ZXJDaGlsZCgtMSwgMCwgNCAvKiBEb250Q2FyZSAqLyk7IH1cbiAgICAvLy8gTW92ZSB0aGUgY3Vyc29yIHRvIHRoZSBmaXJzdCBjaGlsZCB0aGF0IGVuZHMgYWZ0ZXIgYHBvc2AuXG4gICAgY2hpbGRBZnRlcihwb3MpIHsgcmV0dXJuIHRoaXMuZW50ZXJDaGlsZCgxLCBwb3MsIDIgLyogQWZ0ZXIgKi8pOyB9XG4gICAgLy8vIE1vdmUgdG8gdGhlIGxhc3QgY2hpbGQgdGhhdCBzdGFydHMgYmVmb3JlIGBwb3NgLlxuICAgIGNoaWxkQmVmb3JlKHBvcykgeyByZXR1cm4gdGhpcy5lbnRlckNoaWxkKC0xLCBwb3MsIC0yIC8qIEJlZm9yZSAqLyk7IH1cbiAgICAvLy8gTW92ZSB0aGUgY3Vyc29yIHRvIHRoZSBjaGlsZCBhcm91bmQgYHBvc2AuIElmIHNpZGUgaXMgLTEgdGhlXG4gICAgLy8vIGNoaWxkIG1heSBlbmQgYXQgdGhhdCBwb3NpdGlvbiwgd2hlbiAxIGl0IG1heSBzdGFydCB0aGVyZS4gVGhpc1xuICAgIC8vLyB3aWxsIGFsc28gZW50ZXIgW292ZXJsYWlkXSgjY29tbW9uLk1vdW50ZWRUcmVlLm92ZXJsYXkpXG4gICAgLy8vIFttb3VudGVkXSgjY29tbW9uLk5vZGVQcm9wXm1vdW50ZWQpIHRyZWVzIHVubGVzcyBgb3ZlcmxheXNgIGlzXG4gICAgLy8vIHNldCB0byBmYWxzZS5cbiAgICBlbnRlcihwb3MsIHNpZGUsIG1vZGUgPSB0aGlzLm1vZGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmJ1ZmZlcilcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnlpZWxkKHRoaXMuX3RyZWUuZW50ZXIocG9zLCBzaWRlLCBtb2RlKSk7XG4gICAgICAgIHJldHVybiBtb2RlICYgSXRlck1vZGUuRXhjbHVkZUJ1ZmZlcnMgPyBmYWxzZSA6IHRoaXMuZW50ZXJDaGlsZCgxLCBwb3MsIHNpZGUpO1xuICAgIH1cbiAgICAvLy8gTW92ZSB0byB0aGUgbm9kZSdzIHBhcmVudCBub2RlLCBpZiB0aGlzIGlzbid0IHRoZSB0b3Agbm9kZS5cbiAgICBwYXJlbnQoKSB7XG4gICAgICAgIGlmICghdGhpcy5idWZmZXIpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy55aWVsZE5vZGUoKHRoaXMubW9kZSAmIEl0ZXJNb2RlLkluY2x1ZGVBbm9ueW1vdXMpID8gdGhpcy5fdHJlZS5fcGFyZW50IDogdGhpcy5fdHJlZS5wYXJlbnQpO1xuICAgICAgICBpZiAodGhpcy5zdGFjay5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy55aWVsZEJ1Zih0aGlzLnN0YWNrLnBvcCgpKTtcbiAgICAgICAgbGV0IHBhcmVudCA9ICh0aGlzLm1vZGUgJiBJdGVyTW9kZS5JbmNsdWRlQW5vbnltb3VzKSA/IHRoaXMuYnVmZmVyLnBhcmVudCA6IHRoaXMuYnVmZmVyLnBhcmVudC5uZXh0U2lnbmlmaWNhbnRQYXJlbnQoKTtcbiAgICAgICAgdGhpcy5idWZmZXIgPSBudWxsO1xuICAgICAgICByZXR1cm4gdGhpcy55aWVsZE5vZGUocGFyZW50KTtcbiAgICB9XG4gICAgLy8vIEBpbnRlcm5hbFxuICAgIHNpYmxpbmcoZGlyKSB7XG4gICAgICAgIGlmICghdGhpcy5idWZmZXIpXG4gICAgICAgICAgICByZXR1cm4gIXRoaXMuX3RyZWUuX3BhcmVudCA/IGZhbHNlXG4gICAgICAgICAgICAgICAgOiB0aGlzLnlpZWxkKHRoaXMuX3RyZWUuaW5kZXggPCAwID8gbnVsbFxuICAgICAgICAgICAgICAgICAgICA6IHRoaXMuX3RyZWUuX3BhcmVudC5uZXh0Q2hpbGQodGhpcy5fdHJlZS5pbmRleCArIGRpciwgZGlyLCAwLCA0IC8qIERvbnRDYXJlICovLCB0aGlzLm1vZGUpKTtcbiAgICAgICAgbGV0IHsgYnVmZmVyIH0gPSB0aGlzLmJ1ZmZlciwgZCA9IHRoaXMuc3RhY2subGVuZ3RoIC0gMTtcbiAgICAgICAgaWYgKGRpciA8IDApIHtcbiAgICAgICAgICAgIGxldCBwYXJlbnRTdGFydCA9IGQgPCAwID8gMCA6IHRoaXMuc3RhY2tbZF0gKyA0O1xuICAgICAgICAgICAgaWYgKHRoaXMuaW5kZXggIT0gcGFyZW50U3RhcnQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMueWllbGRCdWYoYnVmZmVyLmZpbmRDaGlsZChwYXJlbnRTdGFydCwgdGhpcy5pbmRleCwgLTEsIDAsIDQgLyogRG9udENhcmUgKi8pKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBhZnRlciA9IGJ1ZmZlci5idWZmZXJbdGhpcy5pbmRleCArIDNdO1xuICAgICAgICAgICAgaWYgKGFmdGVyIDwgKGQgPCAwID8gYnVmZmVyLmJ1ZmZlci5sZW5ndGggOiBidWZmZXIuYnVmZmVyW3RoaXMuc3RhY2tbZF0gKyAzXSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMueWllbGRCdWYoYWZ0ZXIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkIDwgMCA/IHRoaXMueWllbGQodGhpcy5idWZmZXIucGFyZW50Lm5leHRDaGlsZCh0aGlzLmJ1ZmZlci5pbmRleCArIGRpciwgZGlyLCAwLCA0IC8qIERvbnRDYXJlICovLCB0aGlzLm1vZGUpKSA6IGZhbHNlO1xuICAgIH1cbiAgICAvLy8gTW92ZSB0byB0aGlzIG5vZGUncyBuZXh0IHNpYmxpbmcsIGlmIGFueS5cbiAgICBuZXh0U2libGluZygpIHsgcmV0dXJuIHRoaXMuc2libGluZygxKTsgfVxuICAgIC8vLyBNb3ZlIHRvIHRoaXMgbm9kZSdzIHByZXZpb3VzIHNpYmxpbmcsIGlmIGFueS5cbiAgICBwcmV2U2libGluZygpIHsgcmV0dXJuIHRoaXMuc2libGluZygtMSk7IH1cbiAgICBhdExhc3ROb2RlKGRpcikge1xuICAgICAgICBsZXQgaW5kZXgsIHBhcmVudCwgeyBidWZmZXIgfSA9IHRoaXM7XG4gICAgICAgIGlmIChidWZmZXIpIHtcbiAgICAgICAgICAgIGlmIChkaXIgPiAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5kZXggPCBidWZmZXIuYnVmZmVyLmJ1ZmZlci5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbmRleDsgaSsrKVxuICAgICAgICAgICAgICAgICAgICBpZiAoYnVmZmVyLmJ1ZmZlci5idWZmZXJbaSArIDNdIDwgdGhpcy5pbmRleClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICh7IGluZGV4LCBwYXJlbnQgfSA9IGJ1ZmZlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAoeyBpbmRleCwgX3BhcmVudDogcGFyZW50IH0gPSB0aGlzLl90cmVlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKDsgcGFyZW50OyB7IGluZGV4LCBfcGFyZW50OiBwYXJlbnQgfSA9IHBhcmVudCkge1xuICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4ICsgZGlyLCBlID0gZGlyIDwgMCA/IC0xIDogcGFyZW50Ll90cmVlLmNoaWxkcmVuLmxlbmd0aDsgaSAhPSBlOyBpICs9IGRpcikge1xuICAgICAgICAgICAgICAgICAgICBsZXQgY2hpbGQgPSBwYXJlbnQuX3RyZWUuY2hpbGRyZW5baV07XG4gICAgICAgICAgICAgICAgICAgIGlmICgodGhpcy5tb2RlICYgSXRlck1vZGUuSW5jbHVkZUFub255bW91cykgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkIGluc3RhbmNlb2YgVHJlZUJ1ZmZlciB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIWNoaWxkLnR5cGUuaXNBbm9ueW1vdXMgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0NoaWxkKGNoaWxkKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIG1vdmUoZGlyLCBlbnRlcikge1xuICAgICAgICBpZiAoZW50ZXIgJiYgdGhpcy5lbnRlckNoaWxkKGRpciwgMCwgNCAvKiBEb250Q2FyZSAqLykpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2libGluZyhkaXIpKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMuYXRMYXN0Tm9kZShkaXIpIHx8ICF0aGlzLnBhcmVudCgpKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLy8gTW92ZSB0byB0aGUgbmV4dCBub2RlIGluIGFcbiAgICAvLy8gW3ByZS1vcmRlcl0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVHJlZV90cmF2ZXJzYWwjUHJlLW9yZGVyXyhOTFIpKVxuICAgIC8vLyB0cmF2ZXJzYWwsIGdvaW5nIGZyb20gYSBub2RlIHRvIGl0cyBmaXJzdCBjaGlsZCBvciwgaWYgdGhlXG4gICAgLy8vIGN1cnJlbnQgbm9kZSBpcyBlbXB0eSBvciBgZW50ZXJgIGlzIGZhbHNlLCBpdHMgbmV4dCBzaWJsaW5nIG9yXG4gICAgLy8vIHRoZSBuZXh0IHNpYmxpbmcgb2YgdGhlIGZpcnN0IHBhcmVudCBub2RlIHRoYXQgaGFzIG9uZS5cbiAgICBuZXh0KGVudGVyID0gdHJ1ZSkgeyByZXR1cm4gdGhpcy5tb3ZlKDEsIGVudGVyKTsgfVxuICAgIC8vLyBNb3ZlIHRvIHRoZSBuZXh0IG5vZGUgaW4gYSBsYXN0LXRvLWZpcnN0IHByZS1vcmRlciB0cmF2ZXJhbC4gQVxuICAgIC8vLyBub2RlIGlzIGZvbGxvd2VkIGJ5IGl0cyBsYXN0IGNoaWxkIG9yLCBpZiBpdCBoYXMgbm9uZSwgaXRzXG4gICAgLy8vIHByZXZpb3VzIHNpYmxpbmcgb3IgdGhlIHByZXZpb3VzIHNpYmxpbmcgb2YgdGhlIGZpcnN0IHBhcmVudFxuICAgIC8vLyBub2RlIHRoYXQgaGFzIG9uZS5cbiAgICBwcmV2KGVudGVyID0gdHJ1ZSkgeyByZXR1cm4gdGhpcy5tb3ZlKC0xLCBlbnRlcik7IH1cbiAgICAvLy8gTW92ZSB0aGUgY3Vyc29yIHRvIHRoZSBpbm5lcm1vc3Qgbm9kZSB0aGF0IGNvdmVycyBgcG9zYC4gSWZcbiAgICAvLy8gYHNpZGVgIGlzIC0xLCBpdCB3aWxsIGVudGVyIG5vZGVzIHRoYXQgZW5kIGF0IGBwb3NgLiBJZiBpdCBpcyAxLFxuICAgIC8vLyBpdCB3aWxsIGVudGVyIG5vZGVzIHRoYXQgc3RhcnQgYXQgYHBvc2AuXG4gICAgbW92ZVRvKHBvcywgc2lkZSA9IDApIHtcbiAgICAgICAgLy8gTW92ZSB1cCB0byBhIG5vZGUgdGhhdCBhY3R1YWxseSBob2xkcyB0aGUgcG9zaXRpb24sIGlmIHBvc3NpYmxlXG4gICAgICAgIHdoaWxlICh0aGlzLmZyb20gPT0gdGhpcy50byB8fFxuICAgICAgICAgICAgKHNpZGUgPCAxID8gdGhpcy5mcm9tID49IHBvcyA6IHRoaXMuZnJvbSA+IHBvcykgfHxcbiAgICAgICAgICAgIChzaWRlID4gLTEgPyB0aGlzLnRvIDw9IHBvcyA6IHRoaXMudG8gPCBwb3MpKVxuICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudCgpKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAvLyBUaGVuIHNjYW4gZG93biBpbnRvIGNoaWxkIG5vZGVzIGFzIGZhciBhcyBwb3NzaWJsZVxuICAgICAgICB3aGlsZSAodGhpcy5lbnRlckNoaWxkKDEsIHBvcywgc2lkZSkpIHsgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLy8vIEdldCBhIFtzeW50YXggbm9kZV0oI2NvbW1vbi5TeW50YXhOb2RlKSBhdCB0aGUgY3Vyc29yJ3MgY3VycmVudFxuICAgIC8vLyBwb3NpdGlvbi5cbiAgICBnZXQgbm9kZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmJ1ZmZlcilcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90cmVlO1xuICAgICAgICBsZXQgY2FjaGUgPSB0aGlzLmJ1ZmZlck5vZGUsIHJlc3VsdCA9IG51bGwsIGRlcHRoID0gMDtcbiAgICAgICAgaWYgKGNhY2hlICYmIGNhY2hlLmNvbnRleHQgPT0gdGhpcy5idWZmZXIpIHtcbiAgICAgICAgICAgIHNjYW46IGZvciAobGV0IGluZGV4ID0gdGhpcy5pbmRleCwgZCA9IHRoaXMuc3RhY2subGVuZ3RoOyBkID49IDA7KSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgYyA9IGNhY2hlOyBjOyBjID0gYy5fcGFyZW50KVxuICAgICAgICAgICAgICAgICAgICBpZiAoYy5pbmRleCA9PSBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID09IHRoaXMuaW5kZXgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGM7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBjO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVwdGggPSBkICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIHNjYW47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuc3RhY2tbLS1kXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gZGVwdGg7IGkgPCB0aGlzLnN0YWNrLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgcmVzdWx0ID0gbmV3IEJ1ZmZlck5vZGUodGhpcy5idWZmZXIsIHJlc3VsdCwgdGhpcy5zdGFja1tpXSk7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlck5vZGUgPSBuZXcgQnVmZmVyTm9kZSh0aGlzLmJ1ZmZlciwgcmVzdWx0LCB0aGlzLmluZGV4KTtcbiAgICB9XG4gICAgLy8vIEdldCB0aGUgW3RyZWVdKCNjb21tb24uVHJlZSkgdGhhdCByZXByZXNlbnRzIHRoZSBjdXJyZW50IG5vZGUsIGlmXG4gICAgLy8vIGFueS4gV2lsbCByZXR1cm4gbnVsbCB3aGVuIHRoZSBub2RlIGlzIGluIGEgW3RyZWVcbiAgICAvLy8gYnVmZmVyXSgjY29tbW9uLlRyZWVCdWZmZXIpLlxuICAgIGdldCB0cmVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIgPyBudWxsIDogdGhpcy5fdHJlZS5fdHJlZTtcbiAgICB9XG4gICAgLy8vIEl0ZXJhdGUgb3ZlciB0aGUgY3VycmVudCBub2RlIGFuZCBhbGwgaXRzIGRlc2NlbmRhbnRzLCBjYWxsaW5nXG4gICAgLy8vIGBlbnRlcmAgd2hlbiBlbnRlcmluZyBhIG5vZGUgYW5kIGBsZWF2ZWAsIGlmIGdpdmVuLCB3aGVuIGxlYXZpbmdcbiAgICAvLy8gb25lLiBXaGVuIGBlbnRlcmAgcmV0dXJucyBgZmFsc2VgLCBhbnkgY2hpbGRyZW4gb2YgdGhhdCBub2RlIGFyZVxuICAgIC8vLyBza2lwcGVkLCBhbmQgYGxlYXZlYCBpc24ndCBjYWxsZWQgZm9yIGl0LlxuICAgIGl0ZXJhdGUoZW50ZXIsIGxlYXZlKSB7XG4gICAgICAgIGZvciAobGV0IGRlcHRoID0gMDs7KSB7XG4gICAgICAgICAgICBsZXQgbXVzdExlYXZlID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAodGhpcy50eXBlLmlzQW5vbnltb3VzIHx8IGVudGVyKHRoaXMpICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZpcnN0Q2hpbGQoKSkge1xuICAgICAgICAgICAgICAgICAgICBkZXB0aCsrO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnR5cGUuaXNBbm9ueW1vdXMpXG4gICAgICAgICAgICAgICAgICAgIG11c3RMZWF2ZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICAgICAgaWYgKG11c3RMZWF2ZSAmJiBsZWF2ZSlcbiAgICAgICAgICAgICAgICAgICAgbGVhdmUodGhpcyk7XG4gICAgICAgICAgICAgICAgbXVzdExlYXZlID0gdGhpcy50eXBlLmlzQW5vbnltb3VzO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm5leHRTaWJsaW5nKCkpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGlmICghZGVwdGgpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudCgpO1xuICAgICAgICAgICAgICAgIGRlcHRoLS07XG4gICAgICAgICAgICAgICAgbXVzdExlYXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLy8gVGVzdCB3aGV0aGVyIHRoZSBjdXJyZW50IG5vZGUgbWF0Y2hlcyBhIGdpdmVuIGNvbnRleHRcdTIwMTRhIHNlcXVlbmNlXG4gICAgLy8vIG9mIGRpcmVjdCBwYXJlbnQgbm9kZSBuYW1lcy4gRW1wdHkgc3RyaW5ncyBpbiB0aGUgY29udGV4dCBhcnJheVxuICAgIC8vLyBhcmUgdHJlYXRlZCBhcyB3aWxkY2FyZHMuXG4gICAgbWF0Y2hDb250ZXh0KGNvbnRleHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmJ1ZmZlcilcbiAgICAgICAgICAgIHJldHVybiBtYXRjaE5vZGVDb250ZXh0KHRoaXMubm9kZSwgY29udGV4dCk7XG4gICAgICAgIGxldCB7IGJ1ZmZlciB9ID0gdGhpcy5idWZmZXIsIHsgdHlwZXMgfSA9IGJ1ZmZlci5zZXQ7XG4gICAgICAgIGZvciAobGV0IGkgPSBjb250ZXh0Lmxlbmd0aCAtIDEsIGQgPSB0aGlzLnN0YWNrLmxlbmd0aCAtIDE7IGkgPj0gMDsgZC0tKSB7XG4gICAgICAgICAgICBpZiAoZCA8IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoTm9kZUNvbnRleHQodGhpcy5ub2RlLCBjb250ZXh0LCBpKTtcbiAgICAgICAgICAgIGxldCB0eXBlID0gdHlwZXNbYnVmZmVyLmJ1ZmZlclt0aGlzLnN0YWNrW2RdXV07XG4gICAgICAgICAgICBpZiAoIXR5cGUuaXNBbm9ueW1vdXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29udGV4dFtpXSAmJiBjb250ZXh0W2ldICE9IHR5cGUubmFtZSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5mdW5jdGlvbiBoYXNDaGlsZCh0cmVlKSB7XG4gICAgcmV0dXJuIHRyZWUuY2hpbGRyZW4uc29tZShjaCA9PiBjaCBpbnN0YW5jZW9mIFRyZWVCdWZmZXIgfHwgIWNoLnR5cGUuaXNBbm9ueW1vdXMgfHwgaGFzQ2hpbGQoY2gpKTtcbn1cbmZ1bmN0aW9uIGJ1aWxkVHJlZShkYXRhKSB7XG4gICAgdmFyIF9hO1xuICAgIGxldCB7IGJ1ZmZlciwgbm9kZVNldCwgbWF4QnVmZmVyTGVuZ3RoID0gRGVmYXVsdEJ1ZmZlckxlbmd0aCwgcmV1c2VkID0gW10sIG1pblJlcGVhdFR5cGUgPSBub2RlU2V0LnR5cGVzLmxlbmd0aCB9ID0gZGF0YTtcbiAgICBsZXQgY3Vyc29yID0gQXJyYXkuaXNBcnJheShidWZmZXIpID8gbmV3IEZsYXRCdWZmZXJDdXJzb3IoYnVmZmVyLCBidWZmZXIubGVuZ3RoKSA6IGJ1ZmZlcjtcbiAgICBsZXQgdHlwZXMgPSBub2RlU2V0LnR5cGVzO1xuICAgIGxldCBjb250ZXh0SGFzaCA9IDAsIGxvb2tBaGVhZCA9IDA7XG4gICAgZnVuY3Rpb24gdGFrZU5vZGUocGFyZW50U3RhcnQsIG1pblBvcywgY2hpbGRyZW4sIHBvc2l0aW9ucywgaW5SZXBlYXQpIHtcbiAgICAgICAgbGV0IHsgaWQsIHN0YXJ0LCBlbmQsIHNpemUgfSA9IGN1cnNvcjtcbiAgICAgICAgbGV0IGxvb2tBaGVhZEF0U3RhcnQgPSBsb29rQWhlYWQ7XG4gICAgICAgIHdoaWxlIChzaXplIDwgMCkge1xuICAgICAgICAgICAgY3Vyc29yLm5leHQoKTtcbiAgICAgICAgICAgIGlmIChzaXplID09IC0xIC8qIFJldXNlICovKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5vZGUgPSByZXVzZWRbaWRdO1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuLnB1c2gobm9kZSk7XG4gICAgICAgICAgICAgICAgcG9zaXRpb25zLnB1c2goc3RhcnQgLSBwYXJlbnRTdGFydCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2l6ZSA9PSAtMyAvKiBDb250ZXh0Q2hhbmdlICovKSB7IC8vIENvbnRleHQgY2hhbmdlXG4gICAgICAgICAgICAgICAgY29udGV4dEhhc2ggPSBpZDtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzaXplID09IC00IC8qIExvb2tBaGVhZCAqLykge1xuICAgICAgICAgICAgICAgIGxvb2tBaGVhZCA9IGlkO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBVbnJlY29nbml6ZWQgcmVjb3JkIHNpemU6ICR7c2l6ZX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgdHlwZSA9IHR5cGVzW2lkXSwgbm9kZSwgYnVmZmVyO1xuICAgICAgICBsZXQgc3RhcnRQb3MgPSBzdGFydCAtIHBhcmVudFN0YXJ0O1xuICAgICAgICBpZiAoZW5kIC0gc3RhcnQgPD0gbWF4QnVmZmVyTGVuZ3RoICYmIChidWZmZXIgPSBmaW5kQnVmZmVyU2l6ZShjdXJzb3IucG9zIC0gbWluUG9zLCBpblJlcGVhdCkpKSB7XG4gICAgICAgICAgICAvLyBTbWFsbCBlbm91Z2ggZm9yIGEgYnVmZmVyLCBhbmQgbm8gcmV1c2VkIG5vZGVzIGluc2lkZVxuICAgICAgICAgICAgbGV0IGRhdGEgPSBuZXcgVWludDE2QXJyYXkoYnVmZmVyLnNpemUgLSBidWZmZXIuc2tpcCk7XG4gICAgICAgICAgICBsZXQgZW5kUG9zID0gY3Vyc29yLnBvcyAtIGJ1ZmZlci5zaXplLCBpbmRleCA9IGRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUgKGN1cnNvci5wb3MgPiBlbmRQb3MpXG4gICAgICAgICAgICAgICAgaW5kZXggPSBjb3B5VG9CdWZmZXIoYnVmZmVyLnN0YXJ0LCBkYXRhLCBpbmRleCk7XG4gICAgICAgICAgICBub2RlID0gbmV3IFRyZWVCdWZmZXIoZGF0YSwgZW5kIC0gYnVmZmVyLnN0YXJ0LCBub2RlU2V0KTtcbiAgICAgICAgICAgIHN0YXJ0UG9zID0gYnVmZmVyLnN0YXJ0IC0gcGFyZW50U3RhcnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7IC8vIE1ha2UgaXQgYSBub2RlXG4gICAgICAgICAgICBsZXQgZW5kUG9zID0gY3Vyc29yLnBvcyAtIHNpemU7XG4gICAgICAgICAgICBjdXJzb3IubmV4dCgpO1xuICAgICAgICAgICAgbGV0IGxvY2FsQ2hpbGRyZW4gPSBbXSwgbG9jYWxQb3NpdGlvbnMgPSBbXTtcbiAgICAgICAgICAgIGxldCBsb2NhbEluUmVwZWF0ID0gaWQgPj0gbWluUmVwZWF0VHlwZSA/IGlkIDogLTE7XG4gICAgICAgICAgICBsZXQgbGFzdEdyb3VwID0gMCwgbGFzdEVuZCA9IGVuZDtcbiAgICAgICAgICAgIHdoaWxlIChjdXJzb3IucG9zID4gZW5kUG9zKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxvY2FsSW5SZXBlYXQgPj0gMCAmJiBjdXJzb3IuaWQgPT0gbG9jYWxJblJlcGVhdCAmJiBjdXJzb3Iuc2l6ZSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJzb3IuZW5kIDw9IGxhc3RFbmQgLSBtYXhCdWZmZXJMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VSZXBlYXRMZWFmKGxvY2FsQ2hpbGRyZW4sIGxvY2FsUG9zaXRpb25zLCBzdGFydCwgbGFzdEdyb3VwLCBjdXJzb3IuZW5kLCBsYXN0RW5kLCBsb2NhbEluUmVwZWF0LCBsb29rQWhlYWRBdFN0YXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RHcm91cCA9IGxvY2FsQ2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEVuZCA9IGN1cnNvci5lbmQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yLm5leHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRha2VOb2RlKHN0YXJ0LCBlbmRQb3MsIGxvY2FsQ2hpbGRyZW4sIGxvY2FsUG9zaXRpb25zLCBsb2NhbEluUmVwZWF0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobG9jYWxJblJlcGVhdCA+PSAwICYmIGxhc3RHcm91cCA+IDAgJiYgbGFzdEdyb3VwIDwgbG9jYWxDaGlsZHJlbi5sZW5ndGgpXG4gICAgICAgICAgICAgICAgbWFrZVJlcGVhdExlYWYobG9jYWxDaGlsZHJlbiwgbG9jYWxQb3NpdGlvbnMsIHN0YXJ0LCBsYXN0R3JvdXAsIHN0YXJ0LCBsYXN0RW5kLCBsb2NhbEluUmVwZWF0LCBsb29rQWhlYWRBdFN0YXJ0KTtcbiAgICAgICAgICAgIGxvY2FsQ2hpbGRyZW4ucmV2ZXJzZSgpO1xuICAgICAgICAgICAgbG9jYWxQb3NpdGlvbnMucmV2ZXJzZSgpO1xuICAgICAgICAgICAgaWYgKGxvY2FsSW5SZXBlYXQgPiAtMSAmJiBsYXN0R3JvdXAgPiAwKSB7XG4gICAgICAgICAgICAgICAgbGV0IG1ha2UgPSBtYWtlQmFsYW5jZWQodHlwZSk7XG4gICAgICAgICAgICAgICAgbm9kZSA9IGJhbGFuY2VSYW5nZSh0eXBlLCBsb2NhbENoaWxkcmVuLCBsb2NhbFBvc2l0aW9ucywgMCwgbG9jYWxDaGlsZHJlbi5sZW5ndGgsIDAsIGVuZCAtIHN0YXJ0LCBtYWtlLCBtYWtlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5vZGUgPSBtYWtlVHJlZSh0eXBlLCBsb2NhbENoaWxkcmVuLCBsb2NhbFBvc2l0aW9ucywgZW5kIC0gc3RhcnQsIGxvb2tBaGVhZEF0U3RhcnQgLSBlbmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNoaWxkcmVuLnB1c2gobm9kZSk7XG4gICAgICAgIHBvc2l0aW9ucy5wdXNoKHN0YXJ0UG9zKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbWFrZUJhbGFuY2VkKHR5cGUpIHtcbiAgICAgICAgcmV0dXJuIChjaGlsZHJlbiwgcG9zaXRpb25zLCBsZW5ndGgpID0+IHtcbiAgICAgICAgICAgIGxldCBsb29rQWhlYWQgPSAwLCBsYXN0SSA9IGNoaWxkcmVuLmxlbmd0aCAtIDEsIGxhc3QsIGxvb2tBaGVhZFByb3A7XG4gICAgICAgICAgICBpZiAobGFzdEkgPj0gMCAmJiAobGFzdCA9IGNoaWxkcmVuW2xhc3RJXSkgaW5zdGFuY2VvZiBUcmVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFsYXN0SSAmJiBsYXN0LnR5cGUgPT0gdHlwZSAmJiBsYXN0Lmxlbmd0aCA9PSBsZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsYXN0O1xuICAgICAgICAgICAgICAgIGlmIChsb29rQWhlYWRQcm9wID0gbGFzdC5wcm9wKE5vZGVQcm9wLmxvb2tBaGVhZCkpXG4gICAgICAgICAgICAgICAgICAgIGxvb2tBaGVhZCA9IHBvc2l0aW9uc1tsYXN0SV0gKyBsYXN0Lmxlbmd0aCArIGxvb2tBaGVhZFByb3A7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWFrZVRyZWUodHlwZSwgY2hpbGRyZW4sIHBvc2l0aW9ucywgbGVuZ3RoLCBsb29rQWhlYWQpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBtYWtlUmVwZWF0TGVhZihjaGlsZHJlbiwgcG9zaXRpb25zLCBiYXNlLCBpLCBmcm9tLCB0bywgdHlwZSwgbG9va0FoZWFkKSB7XG4gICAgICAgIGxldCBsb2NhbENoaWxkcmVuID0gW10sIGxvY2FsUG9zaXRpb25zID0gW107XG4gICAgICAgIHdoaWxlIChjaGlsZHJlbi5sZW5ndGggPiBpKSB7XG4gICAgICAgICAgICBsb2NhbENoaWxkcmVuLnB1c2goY2hpbGRyZW4ucG9wKCkpO1xuICAgICAgICAgICAgbG9jYWxQb3NpdGlvbnMucHVzaChwb3NpdGlvbnMucG9wKCkgKyBiYXNlIC0gZnJvbSk7XG4gICAgICAgIH1cbiAgICAgICAgY2hpbGRyZW4ucHVzaChtYWtlVHJlZShub2RlU2V0LnR5cGVzW3R5cGVdLCBsb2NhbENoaWxkcmVuLCBsb2NhbFBvc2l0aW9ucywgdG8gLSBmcm9tLCBsb29rQWhlYWQgLSB0bykpO1xuICAgICAgICBwb3NpdGlvbnMucHVzaChmcm9tIC0gYmFzZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1ha2VUcmVlKHR5cGUsIGNoaWxkcmVuLCBwb3NpdGlvbnMsIGxlbmd0aCwgbG9va0FoZWFkID0gMCwgcHJvcHMpIHtcbiAgICAgICAgaWYgKGNvbnRleHRIYXNoKSB7XG4gICAgICAgICAgICBsZXQgcGFpciA9IFtOb2RlUHJvcC5jb250ZXh0SGFzaCwgY29udGV4dEhhc2hdO1xuICAgICAgICAgICAgcHJvcHMgPSBwcm9wcyA/IFtwYWlyXS5jb25jYXQocHJvcHMpIDogW3BhaXJdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsb29rQWhlYWQgPiAyNSkge1xuICAgICAgICAgICAgbGV0IHBhaXIgPSBbTm9kZVByb3AubG9va0FoZWFkLCBsb29rQWhlYWRdO1xuICAgICAgICAgICAgcHJvcHMgPSBwcm9wcyA/IFtwYWlyXS5jb25jYXQocHJvcHMpIDogW3BhaXJdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgVHJlZSh0eXBlLCBjaGlsZHJlbiwgcG9zaXRpb25zLCBsZW5ndGgsIHByb3BzKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZmluZEJ1ZmZlclNpemUobWF4U2l6ZSwgaW5SZXBlYXQpIHtcbiAgICAgICAgLy8gU2NhbiB0aHJvdWdoIHRoZSBidWZmZXIgdG8gZmluZCBwcmV2aW91cyBzaWJsaW5ncyB0aGF0IGZpdFxuICAgICAgICAvLyB0b2dldGhlciBpbiBhIFRyZWVCdWZmZXIsIGFuZCBkb24ndCBjb250YWluIGFueSByZXVzZWQgbm9kZXNcbiAgICAgICAgLy8gKHdoaWNoIGNhbid0IGJlIHN0b3JlZCBpbiBhIGJ1ZmZlcikuXG4gICAgICAgIC8vIElmIGBpblJlcGVhdGAgaXMgPiAtMSwgaWdub3JlIG5vZGUgYm91bmRhcmllcyBvZiB0aGF0IHR5cGUgZm9yXG4gICAgICAgIC8vIG5lc3RpbmcsIGJ1dCBtYWtlIHN1cmUgdGhlIGVuZCBmYWxscyBlaXRoZXIgYXQgdGhlIHN0YXJ0XG4gICAgICAgIC8vIChgbWF4U2l6ZWApIG9yIGJlZm9yZSBzdWNoIGEgbm9kZS5cbiAgICAgICAgbGV0IGZvcmsgPSBjdXJzb3IuZm9yaygpO1xuICAgICAgICBsZXQgc2l6ZSA9IDAsIHN0YXJ0ID0gMCwgc2tpcCA9IDAsIG1pblN0YXJ0ID0gZm9yay5lbmQgLSBtYXhCdWZmZXJMZW5ndGg7XG4gICAgICAgIGxldCByZXN1bHQgPSB7IHNpemU6IDAsIHN0YXJ0OiAwLCBza2lwOiAwIH07XG4gICAgICAgIHNjYW46IGZvciAobGV0IG1pblBvcyA9IGZvcmsucG9zIC0gbWF4U2l6ZTsgZm9yay5wb3MgPiBtaW5Qb3M7KSB7XG4gICAgICAgICAgICBsZXQgbm9kZVNpemUgPSBmb3JrLnNpemU7XG4gICAgICAgICAgICAvLyBQcmV0ZW5kIG5lc3RlZCByZXBlYXQgbm9kZXMgb2YgdGhlIHNhbWUgdHlwZSBkb24ndCBleGlzdFxuICAgICAgICAgICAgaWYgKGZvcmsuaWQgPT0gaW5SZXBlYXQgJiYgbm9kZVNpemUgPj0gMCkge1xuICAgICAgICAgICAgICAgIC8vIEV4Y2VwdCB0aGF0IHdlIHN0b3JlIHRoZSBjdXJyZW50IHN0YXRlIGFzIGEgdmFsaWQgcmV0dXJuXG4gICAgICAgICAgICAgICAgLy8gdmFsdWUuXG4gICAgICAgICAgICAgICAgcmVzdWx0LnNpemUgPSBzaXplO1xuICAgICAgICAgICAgICAgIHJlc3VsdC5zdGFydCA9IHN0YXJ0O1xuICAgICAgICAgICAgICAgIHJlc3VsdC5za2lwID0gc2tpcDtcbiAgICAgICAgICAgICAgICBza2lwICs9IDQ7XG4gICAgICAgICAgICAgICAgc2l6ZSArPSA0O1xuICAgICAgICAgICAgICAgIGZvcmsubmV4dCgpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHN0YXJ0UG9zID0gZm9yay5wb3MgLSBub2RlU2l6ZTtcbiAgICAgICAgICAgIGlmIChub2RlU2l6ZSA8IDAgfHwgc3RhcnRQb3MgPCBtaW5Qb3MgfHwgZm9yay5zdGFydCA8IG1pblN0YXJ0KVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgbGV0IGxvY2FsU2tpcHBlZCA9IGZvcmsuaWQgPj0gbWluUmVwZWF0VHlwZSA/IDQgOiAwO1xuICAgICAgICAgICAgbGV0IG5vZGVTdGFydCA9IGZvcmsuc3RhcnQ7XG4gICAgICAgICAgICBmb3JrLm5leHQoKTtcbiAgICAgICAgICAgIHdoaWxlIChmb3JrLnBvcyA+IHN0YXJ0UG9zKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZvcmsuc2l6ZSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvcmsuc2l6ZSA9PSAtMyAvKiBDb250ZXh0Q2hhbmdlICovKVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTa2lwcGVkICs9IDQ7XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIHNjYW47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZvcmsuaWQgPj0gbWluUmVwZWF0VHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBsb2NhbFNraXBwZWQgKz0gNDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yay5uZXh0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdGFydCA9IG5vZGVTdGFydDtcbiAgICAgICAgICAgIHNpemUgKz0gbm9kZVNpemU7XG4gICAgICAgICAgICBza2lwICs9IGxvY2FsU2tpcHBlZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5SZXBlYXQgPCAwIHx8IHNpemUgPT0gbWF4U2l6ZSkge1xuICAgICAgICAgICAgcmVzdWx0LnNpemUgPSBzaXplO1xuICAgICAgICAgICAgcmVzdWx0LnN0YXJ0ID0gc3RhcnQ7XG4gICAgICAgICAgICByZXN1bHQuc2tpcCA9IHNraXA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdC5zaXplID4gNCA/IHJlc3VsdCA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZnVuY3Rpb24gY29weVRvQnVmZmVyKGJ1ZmZlclN0YXJ0LCBidWZmZXIsIGluZGV4KSB7XG4gICAgICAgIGxldCB7IGlkLCBzdGFydCwgZW5kLCBzaXplIH0gPSBjdXJzb3I7XG4gICAgICAgIGN1cnNvci5uZXh0KCk7XG4gICAgICAgIGlmIChzaXplID49IDAgJiYgaWQgPCBtaW5SZXBlYXRUeXBlKSB7XG4gICAgICAgICAgICBsZXQgc3RhcnRJbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgaWYgKHNpemUgPiA0KSB7XG4gICAgICAgICAgICAgICAgbGV0IGVuZFBvcyA9IGN1cnNvci5wb3MgLSAoc2l6ZSAtIDQpO1xuICAgICAgICAgICAgICAgIHdoaWxlIChjdXJzb3IucG9zID4gZW5kUG9zKVxuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGNvcHlUb0J1ZmZlcihidWZmZXJTdGFydCwgYnVmZmVyLCBpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBidWZmZXJbLS1pbmRleF0gPSBzdGFydEluZGV4O1xuICAgICAgICAgICAgYnVmZmVyWy0taW5kZXhdID0gZW5kIC0gYnVmZmVyU3RhcnQ7XG4gICAgICAgICAgICBidWZmZXJbLS1pbmRleF0gPSBzdGFydCAtIGJ1ZmZlclN0YXJ0O1xuICAgICAgICAgICAgYnVmZmVyWy0taW5kZXhdID0gaWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc2l6ZSA9PSAtMyAvKiBDb250ZXh0Q2hhbmdlICovKSB7XG4gICAgICAgICAgICBjb250ZXh0SGFzaCA9IGlkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNpemUgPT0gLTQgLyogTG9va0FoZWFkICovKSB7XG4gICAgICAgICAgICBsb29rQWhlYWQgPSBpZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgfVxuICAgIGxldCBjaGlsZHJlbiA9IFtdLCBwb3NpdGlvbnMgPSBbXTtcbiAgICB3aGlsZSAoY3Vyc29yLnBvcyA+IDApXG4gICAgICAgIHRha2VOb2RlKGRhdGEuc3RhcnQgfHwgMCwgZGF0YS5idWZmZXJTdGFydCB8fCAwLCBjaGlsZHJlbiwgcG9zaXRpb25zLCAtMSk7XG4gICAgbGV0IGxlbmd0aCA9IChfYSA9IGRhdGEubGVuZ3RoKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAoY2hpbGRyZW4ubGVuZ3RoID8gcG9zaXRpb25zWzBdICsgY2hpbGRyZW5bMF0ubGVuZ3RoIDogMCk7XG4gICAgcmV0dXJuIG5ldyBUcmVlKHR5cGVzW2RhdGEudG9wSURdLCBjaGlsZHJlbi5yZXZlcnNlKCksIHBvc2l0aW9ucy5yZXZlcnNlKCksIGxlbmd0aCk7XG59XG5jb25zdCBub2RlU2l6ZUNhY2hlID0gbmV3IFdlYWtNYXA7XG5mdW5jdGlvbiBub2RlU2l6ZShiYWxhbmNlVHlwZSwgbm9kZSkge1xuICAgIGlmICghYmFsYW5jZVR5cGUuaXNBbm9ueW1vdXMgfHwgbm9kZSBpbnN0YW5jZW9mIFRyZWVCdWZmZXIgfHwgbm9kZS50eXBlICE9IGJhbGFuY2VUeXBlKVxuICAgICAgICByZXR1cm4gMTtcbiAgICBsZXQgc2l6ZSA9IG5vZGVTaXplQ2FjaGUuZ2V0KG5vZGUpO1xuICAgIGlmIChzaXplID09IG51bGwpIHtcbiAgICAgICAgc2l6ZSA9IDE7XG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIG5vZGUuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGlmIChjaGlsZC50eXBlICE9IGJhbGFuY2VUeXBlIHx8ICEoY2hpbGQgaW5zdGFuY2VvZiBUcmVlKSkge1xuICAgICAgICAgICAgICAgIHNpemUgPSAxO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2l6ZSArPSBub2RlU2l6ZShiYWxhbmNlVHlwZSwgY2hpbGQpO1xuICAgICAgICB9XG4gICAgICAgIG5vZGVTaXplQ2FjaGUuc2V0KG5vZGUsIHNpemUpO1xuICAgIH1cbiAgICByZXR1cm4gc2l6ZTtcbn1cbmZ1bmN0aW9uIGJhbGFuY2VSYW5nZShcbi8vIFRoZSB0eXBlIHRoZSBiYWxhbmNlZCB0cmVlJ3MgaW5uZXIgbm9kZXMuXG5iYWxhbmNlVHlwZSwgXG4vLyBUaGUgZGlyZWN0IGNoaWxkcmVuIGFuZCB0aGVpciBwb3NpdGlvbnNcbmNoaWxkcmVuLCBwb3NpdGlvbnMsIFxuLy8gVGhlIGluZGV4IHJhbmdlIGluIGNoaWxkcmVuL3Bvc2l0aW9ucyB0byB1c2VcbmZyb20sIHRvLCBcbi8vIFRoZSBzdGFydCBwb3NpdGlvbiBvZiB0aGUgbm9kZXMsIHJlbGF0aXZlIHRvIHRoZWlyIHBhcmVudC5cbnN0YXJ0LCBcbi8vIExlbmd0aCBvZiB0aGUgb3V0ZXIgbm9kZVxubGVuZ3RoLCBcbi8vIEZ1bmN0aW9uIHRvIGJ1aWxkIHRoZSB0b3Agbm9kZSBvZiB0aGUgYmFsYW5jZWQgdHJlZVxubWtUb3AsIFxuLy8gRnVuY3Rpb24gdG8gYnVpbGQgaW50ZXJuYWwgbm9kZXMgZm9yIHRoZSBiYWxhbmNlZCB0cmVlXG5ta1RyZWUpIHtcbiAgICBsZXQgdG90YWwgPSAwO1xuICAgIGZvciAobGV0IGkgPSBmcm9tOyBpIDwgdG87IGkrKylcbiAgICAgICAgdG90YWwgKz0gbm9kZVNpemUoYmFsYW5jZVR5cGUsIGNoaWxkcmVuW2ldKTtcbiAgICBsZXQgbWF4Q2hpbGQgPSBNYXRoLmNlaWwoKHRvdGFsICogMS41KSAvIDggLyogQnJhbmNoRmFjdG9yICovKTtcbiAgICBsZXQgbG9jYWxDaGlsZHJlbiA9IFtdLCBsb2NhbFBvc2l0aW9ucyA9IFtdO1xuICAgIGZ1bmN0aW9uIGRpdmlkZShjaGlsZHJlbiwgcG9zaXRpb25zLCBmcm9tLCB0bywgb2Zmc2V0KSB7XG4gICAgICAgIGZvciAobGV0IGkgPSBmcm9tOyBpIDwgdG87KSB7XG4gICAgICAgICAgICBsZXQgZ3JvdXBGcm9tID0gaSwgZ3JvdXBTdGFydCA9IHBvc2l0aW9uc1tpXSwgZ3JvdXBTaXplID0gbm9kZVNpemUoYmFsYW5jZVR5cGUsIGNoaWxkcmVuW2ldKTtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIGZvciAoOyBpIDwgdG87IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCBuZXh0U2l6ZSA9IG5vZGVTaXplKGJhbGFuY2VUeXBlLCBjaGlsZHJlbltpXSk7XG4gICAgICAgICAgICAgICAgaWYgKGdyb3VwU2l6ZSArIG5leHRTaXplID49IG1heENoaWxkKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBncm91cFNpemUgKz0gbmV4dFNpemU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaSA9PSBncm91cEZyb20gKyAxKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdyb3VwU2l6ZSA+IG1heENoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBvbmx5ID0gY2hpbGRyZW5bZ3JvdXBGcm9tXTsgLy8gT25seSB0cmVlcyBjYW4gaGF2ZSBhIHNpemUgPiAxXG4gICAgICAgICAgICAgICAgICAgIGRpdmlkZShvbmx5LmNoaWxkcmVuLCBvbmx5LnBvc2l0aW9ucywgMCwgb25seS5jaGlsZHJlbi5sZW5ndGgsIHBvc2l0aW9uc1tncm91cEZyb21dICsgb2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxvY2FsQ2hpbGRyZW4ucHVzaChjaGlsZHJlbltncm91cEZyb21dKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBsZW5ndGggPSBwb3NpdGlvbnNbaSAtIDFdICsgY2hpbGRyZW5baSAtIDFdLmxlbmd0aCAtIGdyb3VwU3RhcnQ7XG4gICAgICAgICAgICAgICAgbG9jYWxDaGlsZHJlbi5wdXNoKGJhbGFuY2VSYW5nZShiYWxhbmNlVHlwZSwgY2hpbGRyZW4sIHBvc2l0aW9ucywgZ3JvdXBGcm9tLCBpLCBncm91cFN0YXJ0LCBsZW5ndGgsIG51bGwsIG1rVHJlZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9jYWxQb3NpdGlvbnMucHVzaChncm91cFN0YXJ0ICsgb2Zmc2V0IC0gc3RhcnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRpdmlkZShjaGlsZHJlbiwgcG9zaXRpb25zLCBmcm9tLCB0bywgMCk7XG4gICAgcmV0dXJuIChta1RvcCB8fCBta1RyZWUpKGxvY2FsQ2hpbGRyZW4sIGxvY2FsUG9zaXRpb25zLCBsZW5ndGgpO1xufVxuLy8vIFByb3ZpZGVzIGEgd2F5IHRvIGFzc29jaWF0ZSB2YWx1ZXMgd2l0aCBwaWVjZXMgb2YgdHJlZXMuIEFzIGxvbmdcbi8vLyBhcyB0aGF0IHBhcnQgb2YgdGhlIHRyZWUgaXMgcmV1c2VkLCB0aGUgYXNzb2NpYXRlZCB2YWx1ZXMgY2FuIGJlXG4vLy8gcmV0cmlldmVkIGZyb20gYW4gdXBkYXRlZCB0cmVlLlxuY2xhc3MgTm9kZVdlYWtNYXAge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLm1hcCA9IG5ldyBXZWFrTWFwKCk7XG4gICAgfVxuICAgIHNldEJ1ZmZlcihidWZmZXIsIGluZGV4LCB2YWx1ZSkge1xuICAgICAgICBsZXQgaW5uZXIgPSB0aGlzLm1hcC5nZXQoYnVmZmVyKTtcbiAgICAgICAgaWYgKCFpbm5lcilcbiAgICAgICAgICAgIHRoaXMubWFwLnNldChidWZmZXIsIGlubmVyID0gbmV3IE1hcCk7XG4gICAgICAgIGlubmVyLnNldChpbmRleCwgdmFsdWUpO1xuICAgIH1cbiAgICBnZXRCdWZmZXIoYnVmZmVyLCBpbmRleCkge1xuICAgICAgICBsZXQgaW5uZXIgPSB0aGlzLm1hcC5nZXQoYnVmZmVyKTtcbiAgICAgICAgcmV0dXJuIGlubmVyICYmIGlubmVyLmdldChpbmRleCk7XG4gICAgfVxuICAgIC8vLyBTZXQgdGhlIHZhbHVlIGZvciB0aGlzIHN5bnRheCBub2RlLlxuICAgIHNldChub2RlLCB2YWx1ZSkge1xuICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIEJ1ZmZlck5vZGUpXG4gICAgICAgICAgICB0aGlzLnNldEJ1ZmZlcihub2RlLmNvbnRleHQuYnVmZmVyLCBub2RlLmluZGV4LCB2YWx1ZSk7XG4gICAgICAgIGVsc2UgaWYgKG5vZGUgaW5zdGFuY2VvZiBUcmVlTm9kZSlcbiAgICAgICAgICAgIHRoaXMubWFwLnNldChub2RlLnRyZWUsIHZhbHVlKTtcbiAgICB9XG4gICAgLy8vIFJldHJpZXZlIHZhbHVlIGZvciB0aGlzIHN5bnRheCBub2RlLCBpZiBpdCBleGlzdHMgaW4gdGhlIG1hcC5cbiAgICBnZXQobm9kZSkge1xuICAgICAgICByZXR1cm4gbm9kZSBpbnN0YW5jZW9mIEJ1ZmZlck5vZGUgPyB0aGlzLmdldEJ1ZmZlcihub2RlLmNvbnRleHQuYnVmZmVyLCBub2RlLmluZGV4KVxuICAgICAgICAgICAgOiBub2RlIGluc3RhbmNlb2YgVHJlZU5vZGUgPyB0aGlzLm1hcC5nZXQobm9kZS50cmVlKSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLy8vIFNldCB0aGUgdmFsdWUgZm9yIHRoZSBub2RlIHRoYXQgYSBjdXJzb3IgY3VycmVudGx5IHBvaW50cyB0by5cbiAgICBjdXJzb3JTZXQoY3Vyc29yLCB2YWx1ZSkge1xuICAgICAgICBpZiAoY3Vyc29yLmJ1ZmZlcilcbiAgICAgICAgICAgIHRoaXMuc2V0QnVmZmVyKGN1cnNvci5idWZmZXIuYnVmZmVyLCBjdXJzb3IuaW5kZXgsIHZhbHVlKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGhpcy5tYXAuc2V0KGN1cnNvci50cmVlLCB2YWx1ZSk7XG4gICAgfVxuICAgIC8vLyBSZXRyaWV2ZSB0aGUgdmFsdWUgZm9yIHRoZSBub2RlIHRoYXQgYSBjdXJzb3IgY3VycmVudGx5IHBvaW50c1xuICAgIC8vLyB0by5cbiAgICBjdXJzb3JHZXQoY3Vyc29yKSB7XG4gICAgICAgIHJldHVybiBjdXJzb3IuYnVmZmVyID8gdGhpcy5nZXRCdWZmZXIoY3Vyc29yLmJ1ZmZlci5idWZmZXIsIGN1cnNvci5pbmRleCkgOiB0aGlzLm1hcC5nZXQoY3Vyc29yLnRyZWUpO1xuICAgIH1cbn1cblxuLy8vIFRyZWUgZnJhZ21lbnRzIGFyZSB1c2VkIGR1cmluZyBbaW5jcmVtZW50YWxcbi8vLyBwYXJzaW5nXSgjY29tbW9uLlBhcnNlci5zdGFydFBhcnNlKSB0byB0cmFjayBwYXJ0cyBvZiBvbGQgdHJlZXNcbi8vLyB0aGF0IGNhbiBiZSByZXVzZWQgaW4gYSBuZXcgcGFyc2UuIEFuIGFycmF5IG9mIGZyYWdtZW50cyBpcyB1c2VkXG4vLy8gdG8gdHJhY2sgcmVnaW9ucyBvZiBhbiBvbGQgdHJlZSB3aG9zZSBub2RlcyBtaWdodCBiZSByZXVzZWQgaW4gbmV3XG4vLy8gcGFyc2VzLiBVc2UgdGhlIHN0YXRpY1xuLy8vIFtgYXBwbHlDaGFuZ2VzYF0oI2NvbW1vbi5UcmVlRnJhZ21lbnReYXBwbHlDaGFuZ2VzKSBtZXRob2QgdG9cbi8vLyB1cGRhdGUgZnJhZ21lbnRzIGZvciBkb2N1bWVudCBjaGFuZ2VzLlxuY2xhc3MgVHJlZUZyYWdtZW50IHtcbiAgICAvLy8gQ29uc3RydWN0IGEgdHJlZSBmcmFnbWVudC4gWW91J2xsIHVzdWFsbHkgd2FudCB0byB1c2VcbiAgICAvLy8gW2BhZGRUcmVlYF0oI2NvbW1vbi5UcmVlRnJhZ21lbnReYWRkVHJlZSkgYW5kXG4gICAgLy8vIFtgYXBwbHlDaGFuZ2VzYF0oI2NvbW1vbi5UcmVlRnJhZ21lbnReYXBwbHlDaGFuZ2VzKSBpbnN0ZWFkIG9mXG4gICAgLy8vIGNhbGxpbmcgdGhpcyBkaXJlY3RseS5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvLy8gVGhlIHN0YXJ0IG9mIHRoZSB1bmNoYW5nZWQgcmFuZ2UgcG9pbnRlZCB0byBieSB0aGlzIGZyYWdtZW50LlxuICAgIC8vLyBUaGlzIHJlZmVycyB0byBhbiBvZmZzZXQgaW4gdGhlIF91cGRhdGVkXyBkb2N1bWVudCAoYXMgb3Bwb3NlZFxuICAgIC8vLyB0byB0aGUgb3JpZ2luYWwgdHJlZSkuXG4gICAgZnJvbSwgXG4gICAgLy8vIFRoZSBlbmQgb2YgdGhlIHVuY2hhbmdlZCByYW5nZS5cbiAgICB0bywgXG4gICAgLy8vIFRoZSB0cmVlIHRoYXQgdGhpcyBmcmFnbWVudCBpcyBiYXNlZCBvbi5cbiAgICB0cmVlLCBcbiAgICAvLy8gVGhlIG9mZnNldCBiZXR3ZWVuIHRoZSBmcmFnbWVudCdzIHRyZWUgYW5kIHRoZSBkb2N1bWVudCB0aGF0XG4gICAgLy8vIHRoaXMgZnJhZ21lbnQgY2FuIGJlIHVzZWQgYWdhaW5zdC4gQWRkIHRoaXMgd2hlbiBnb2luZyBmcm9tXG4gICAgLy8vIGRvY3VtZW50IHRvIHRyZWUgcG9zaXRpb25zLCBzdWJ0cmFjdCBpdCB0byBnbyBmcm9tIHRyZWUgdG9cbiAgICAvLy8gZG9jdW1lbnQgcG9zaXRpb25zLlxuICAgIG9mZnNldCwgb3BlblN0YXJ0ID0gZmFsc2UsIG9wZW5FbmQgPSBmYWxzZSkge1xuICAgICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgICAgICB0aGlzLnRvID0gdG87XG4gICAgICAgIHRoaXMudHJlZSA9IHRyZWU7XG4gICAgICAgIHRoaXMub2Zmc2V0ID0gb2Zmc2V0O1xuICAgICAgICB0aGlzLm9wZW4gPSAob3BlblN0YXJ0ID8gMSAvKiBTdGFydCAqLyA6IDApIHwgKG9wZW5FbmQgPyAyIC8qIEVuZCAqLyA6IDApO1xuICAgIH1cbiAgICAvLy8gV2hldGhlciB0aGUgc3RhcnQgb2YgdGhlIGZyYWdtZW50IHJlcHJlc2VudHMgdGhlIHN0YXJ0IG9mIGFcbiAgICAvLy8gcGFyc2UsIG9yIHRoZSBlbmQgb2YgYSBjaGFuZ2UuIChJbiB0aGUgc2Vjb25kIGNhc2UsIGl0IG1heSBub3RcbiAgICAvLy8gYmUgc2FmZSB0byByZXVzZSBzb21lIG5vZGVzIGF0IHRoZSBzdGFydCwgZGVwZW5kaW5nIG9uIHRoZVxuICAgIC8vLyBwYXJzaW5nIGFsZ29yaXRobS4pXG4gICAgZ2V0IG9wZW5TdGFydCgpIHsgcmV0dXJuICh0aGlzLm9wZW4gJiAxIC8qIFN0YXJ0ICovKSA+IDA7IH1cbiAgICAvLy8gV2hldGhlciB0aGUgZW5kIG9mIHRoZSBmcmFnbWVudCByZXByZXNlbnRzIHRoZSBlbmQgb2YgYVxuICAgIC8vLyBmdWxsLWRvY3VtZW50IHBhcnNlLCBvciB0aGUgc3RhcnQgb2YgYSBjaGFuZ2UuXG4gICAgZ2V0IG9wZW5FbmQoKSB7IHJldHVybiAodGhpcy5vcGVuICYgMiAvKiBFbmQgKi8pID4gMDsgfVxuICAgIC8vLyBDcmVhdGUgYSBzZXQgb2YgZnJhZ21lbnRzIGZyb20gYSBmcmVzaGx5IHBhcnNlZCB0cmVlLCBvciB1cGRhdGVcbiAgICAvLy8gYW4gZXhpc3Rpbmcgc2V0IG9mIGZyYWdtZW50cyBieSByZXBsYWNpbmcgdGhlIG9uZXMgdGhhdCBvdmVybGFwXG4gICAgLy8vIHdpdGggYSB0cmVlIHdpdGggY29udGVudCBmcm9tIHRoZSBuZXcgdHJlZS4gV2hlbiBgcGFydGlhbGAgaXNcbiAgICAvLy8gdHJ1ZSwgdGhlIHBhcnNlIGlzIHRyZWF0ZWQgYXMgaW5jb21wbGV0ZSwgYW5kIHRoZSByZXN1bHRpbmdcbiAgICAvLy8gZnJhZ21lbnQgaGFzIFtgb3BlbkVuZGBdKCNjb21tb24uVHJlZUZyYWdtZW50Lm9wZW5FbmQpIHNldCB0b1xuICAgIC8vLyB0cnVlLlxuICAgIHN0YXRpYyBhZGRUcmVlKHRyZWUsIGZyYWdtZW50cyA9IFtdLCBwYXJ0aWFsID0gZmFsc2UpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtuZXcgVHJlZUZyYWdtZW50KDAsIHRyZWUubGVuZ3RoLCB0cmVlLCAwLCBmYWxzZSwgcGFydGlhbCldO1xuICAgICAgICBmb3IgKGxldCBmIG9mIGZyYWdtZW50cylcbiAgICAgICAgICAgIGlmIChmLnRvID4gdHJlZS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goZik7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8vLyBBcHBseSBhIHNldCBvZiBlZGl0cyB0byBhbiBhcnJheSBvZiBmcmFnbWVudHMsIHJlbW92aW5nIG9yXG4gICAgLy8vIHNwbGl0dGluZyBmcmFnbWVudHMgYXMgbmVjZXNzYXJ5IHRvIHJlbW92ZSBlZGl0ZWQgcmFuZ2VzLCBhbmRcbiAgICAvLy8gYWRqdXN0aW5nIG9mZnNldHMgZm9yIGZyYWdtZW50cyB0aGF0IG1vdmVkLlxuICAgIHN0YXRpYyBhcHBseUNoYW5nZXMoZnJhZ21lbnRzLCBjaGFuZ2VzLCBtaW5HYXAgPSAxMjgpIHtcbiAgICAgICAgaWYgKCFjaGFuZ2VzLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBmcmFnbWVudHM7XG4gICAgICAgIGxldCByZXN1bHQgPSBbXTtcbiAgICAgICAgbGV0IGZJID0gMSwgbmV4dEYgPSBmcmFnbWVudHMubGVuZ3RoID8gZnJhZ21lbnRzWzBdIDogbnVsbDtcbiAgICAgICAgZm9yIChsZXQgY0kgPSAwLCBwb3MgPSAwLCBvZmYgPSAwOzsgY0krKykge1xuICAgICAgICAgICAgbGV0IG5leHRDID0gY0kgPCBjaGFuZ2VzLmxlbmd0aCA/IGNoYW5nZXNbY0ldIDogbnVsbDtcbiAgICAgICAgICAgIGxldCBuZXh0UG9zID0gbmV4dEMgPyBuZXh0Qy5mcm9tQSA6IDFlOTtcbiAgICAgICAgICAgIGlmIChuZXh0UG9zIC0gcG9zID49IG1pbkdhcClcbiAgICAgICAgICAgICAgICB3aGlsZSAobmV4dEYgJiYgbmV4dEYuZnJvbSA8IG5leHRQb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1dCA9IG5leHRGO1xuICAgICAgICAgICAgICAgICAgICBpZiAocG9zID49IGN1dC5mcm9tIHx8IG5leHRQb3MgPD0gY3V0LnRvIHx8IG9mZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZGcm9tID0gTWF0aC5tYXgoY3V0LmZyb20sIHBvcykgLSBvZmYsIGZUbyA9IE1hdGgubWluKGN1dC50bywgbmV4dFBvcykgLSBvZmY7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXQgPSBmRnJvbSA+PSBmVG8gPyBudWxsIDogbmV3IFRyZWVGcmFnbWVudChmRnJvbSwgZlRvLCBjdXQudHJlZSwgY3V0Lm9mZnNldCArIG9mZiwgY0kgPiAwLCAhIW5leHRDKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoY3V0KVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goY3V0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRGLnRvID4gbmV4dFBvcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBuZXh0RiA9IGZJIDwgZnJhZ21lbnRzLmxlbmd0aCA/IGZyYWdtZW50c1tmSSsrXSA6IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFuZXh0QylcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIHBvcyA9IG5leHRDLnRvQTtcbiAgICAgICAgICAgIG9mZiA9IG5leHRDLnRvQSAtIG5leHRDLnRvQjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cbi8vLyBBIHN1cGVyY2xhc3MgdGhhdCBwYXJzZXJzIHNob3VsZCBleHRlbmQuXG5jbGFzcyBQYXJzZXIge1xuICAgIC8vLyBTdGFydCBhIHBhcnNlLCByZXR1cm5pbmcgYSBbcGFydGlhbCBwYXJzZV0oI2NvbW1vbi5QYXJ0aWFsUGFyc2UpXG4gICAgLy8vIG9iamVjdC4gW2BmcmFnbWVudHNgXSgjY29tbW9uLlRyZWVGcmFnbWVudCkgY2FuIGJlIHBhc3NlZCBpbiB0b1xuICAgIC8vLyBtYWtlIHRoZSBwYXJzZSBpbmNyZW1lbnRhbC5cbiAgICAvLy9cbiAgICAvLy8gQnkgZGVmYXVsdCwgdGhlIGVudGlyZSBpbnB1dCBpcyBwYXJzZWQuIFlvdSBjYW4gcGFzcyBgcmFuZ2VzYCxcbiAgICAvLy8gd2hpY2ggc2hvdWxkIGJlIGEgc29ydGVkIGFycmF5IG9mIG5vbi1lbXB0eSwgbm9uLW92ZXJsYXBwaW5nXG4gICAgLy8vIHJhbmdlcywgdG8gcGFyc2Ugb25seSB0aG9zZSByYW5nZXMuIFRoZSB0cmVlIHJldHVybmVkIGluIHRoYXRcbiAgICAvLy8gY2FzZSB3aWxsIHN0YXJ0IGF0IGByYW5nZXNbMF0uZnJvbWAuXG4gICAgc3RhcnRQYXJzZShpbnB1dCwgZnJhZ21lbnRzLCByYW5nZXMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgaW5wdXQgPSBuZXcgU3RyaW5nSW5wdXQoaW5wdXQpO1xuICAgICAgICByYW5nZXMgPSAhcmFuZ2VzID8gW25ldyBSYW5nZSgwLCBpbnB1dC5sZW5ndGgpXSA6IHJhbmdlcy5sZW5ndGggPyByYW5nZXMubWFwKHIgPT4gbmV3IFJhbmdlKHIuZnJvbSwgci50bykpIDogW25ldyBSYW5nZSgwLCAwKV07XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVBhcnNlKGlucHV0LCBmcmFnbWVudHMgfHwgW10sIHJhbmdlcyk7XG4gICAgfVxuICAgIC8vLyBSdW4gYSBmdWxsIHBhcnNlLCByZXR1cm5pbmcgdGhlIHJlc3VsdGluZyB0cmVlLlxuICAgIHBhcnNlKGlucHV0LCBmcmFnbWVudHMsIHJhbmdlcykge1xuICAgICAgICBsZXQgcGFyc2UgPSB0aGlzLnN0YXJ0UGFyc2UoaW5wdXQsIGZyYWdtZW50cywgcmFuZ2VzKTtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgbGV0IGRvbmUgPSBwYXJzZS5hZHZhbmNlKCk7XG4gICAgICAgICAgICBpZiAoZG9uZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZG9uZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmNsYXNzIFN0cmluZ0lucHV0IHtcbiAgICBjb25zdHJ1Y3RvcihzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5zdHJpbmcgPSBzdHJpbmc7XG4gICAgfVxuICAgIGdldCBsZW5ndGgoKSB7IHJldHVybiB0aGlzLnN0cmluZy5sZW5ndGg7IH1cbiAgICBjaHVuayhmcm9tKSB7IHJldHVybiB0aGlzLnN0cmluZy5zbGljZShmcm9tKTsgfVxuICAgIGdldCBsaW5lQ2h1bmtzKCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICByZWFkKGZyb20sIHRvKSB7IHJldHVybiB0aGlzLnN0cmluZy5zbGljZShmcm9tLCB0byk7IH1cbn1cblxuLy8vIENyZWF0ZSBhIHBhcnNlIHdyYXBwZXIgdGhhdCwgYWZ0ZXIgdGhlIGlubmVyIHBhcnNlIGNvbXBsZXRlcyxcbi8vLyBzY2FucyBpdHMgdHJlZSBmb3IgbWl4ZWQgbGFuZ3VhZ2UgcmVnaW9ucyB3aXRoIHRoZSBgbmVzdGBcbi8vLyBmdW5jdGlvbiwgcnVucyB0aGUgcmVzdWx0aW5nIFtpbm5lciBwYXJzZXNdKCNjb21tb24uTmVzdGVkUGFyc2UpLFxuLy8vIGFuZCB0aGVuIFttb3VudHNdKCNjb21tb24uTm9kZVByb3BebW91bnRlZCkgdGhlaXIgcmVzdWx0cyBvbnRvIHRoZVxuLy8vIHRyZWUuXG5mdW5jdGlvbiBwYXJzZU1peGVkKG5lc3QpIHtcbiAgICByZXR1cm4gKHBhcnNlLCBpbnB1dCwgZnJhZ21lbnRzLCByYW5nZXMpID0+IG5ldyBNaXhlZFBhcnNlKHBhcnNlLCBuZXN0LCBpbnB1dCwgZnJhZ21lbnRzLCByYW5nZXMpO1xufVxuY2xhc3MgSW5uZXJQYXJzZSB7XG4gICAgY29uc3RydWN0b3IocGFyc2VyLCBwYXJzZSwgb3ZlcmxheSwgdGFyZ2V0LCByYW5nZXMpIHtcbiAgICAgICAgdGhpcy5wYXJzZXIgPSBwYXJzZXI7XG4gICAgICAgIHRoaXMucGFyc2UgPSBwYXJzZTtcbiAgICAgICAgdGhpcy5vdmVybGF5ID0gb3ZlcmxheTtcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgIHRoaXMucmFuZ2VzID0gcmFuZ2VzO1xuICAgIH1cbn1cbmNsYXNzIEFjdGl2ZU92ZXJsYXkge1xuICAgIGNvbnN0cnVjdG9yKHBhcnNlciwgcHJlZGljYXRlLCBtb3VudHMsIGluZGV4LCBzdGFydCwgdGFyZ2V0LCBwcmV2KSB7XG4gICAgICAgIHRoaXMucGFyc2VyID0gcGFyc2VyO1xuICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcbiAgICAgICAgdGhpcy5tb3VudHMgPSBtb3VudHM7XG4gICAgICAgIHRoaXMuaW5kZXggPSBpbmRleDtcbiAgICAgICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xuICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgICAgICAgdGhpcy5wcmV2ID0gcHJldjtcbiAgICAgICAgdGhpcy5kZXB0aCA9IDA7XG4gICAgICAgIHRoaXMucmFuZ2VzID0gW107XG4gICAgfVxufVxuY29uc3Qgc3RvcHBlZElubmVyID0gbmV3IE5vZGVQcm9wKHsgcGVyTm9kZTogdHJ1ZSB9KTtcbmNsYXNzIE1peGVkUGFyc2Uge1xuICAgIGNvbnN0cnVjdG9yKGJhc2UsIG5lc3QsIGlucHV0LCBmcmFnbWVudHMsIHJhbmdlcykge1xuICAgICAgICB0aGlzLm5lc3QgPSBuZXN0O1xuICAgICAgICB0aGlzLmlucHV0ID0gaW5wdXQ7XG4gICAgICAgIHRoaXMuZnJhZ21lbnRzID0gZnJhZ21lbnRzO1xuICAgICAgICB0aGlzLnJhbmdlcyA9IHJhbmdlcztcbiAgICAgICAgdGhpcy5pbm5lciA9IFtdO1xuICAgICAgICB0aGlzLmlubmVyRG9uZSA9IDA7XG4gICAgICAgIHRoaXMuYmFzZVRyZWUgPSBudWxsO1xuICAgICAgICB0aGlzLnN0b3BwZWRBdCA9IG51bGw7XG4gICAgICAgIHRoaXMuYmFzZVBhcnNlID0gYmFzZTtcbiAgICB9XG4gICAgYWR2YW5jZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuYmFzZVBhcnNlKSB7XG4gICAgICAgICAgICBsZXQgZG9uZSA9IHRoaXMuYmFzZVBhcnNlLmFkdmFuY2UoKTtcbiAgICAgICAgICAgIGlmICghZG9uZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuYmFzZVBhcnNlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuYmFzZVRyZWUgPSBkb25lO1xuICAgICAgICAgICAgdGhpcy5zdGFydElubmVyKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5zdG9wcGVkQXQgIT0gbnVsbClcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpbm5lciBvZiB0aGlzLmlubmVyKVxuICAgICAgICAgICAgICAgICAgICBpbm5lci5wYXJzZS5zdG9wQXQodGhpcy5zdG9wcGVkQXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlubmVyRG9uZSA9PSB0aGlzLmlubmVyLmxlbmd0aCkge1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IHRoaXMuYmFzZVRyZWU7XG4gICAgICAgICAgICBpZiAodGhpcy5zdG9wcGVkQXQgIT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXcgVHJlZShyZXN1bHQudHlwZSwgcmVzdWx0LmNoaWxkcmVuLCByZXN1bHQucG9zaXRpb25zLCByZXN1bHQubGVuZ3RoLCByZXN1bHQucHJvcFZhbHVlcy5jb25jYXQoW1tzdG9wcGVkSW5uZXIsIHRoaXMuc3RvcHBlZEF0XV0pKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGlubmVyID0gdGhpcy5pbm5lclt0aGlzLmlubmVyRG9uZV0sIGRvbmUgPSBpbm5lci5wYXJzZS5hZHZhbmNlKCk7XG4gICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICB0aGlzLmlubmVyRG9uZSsrO1xuICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHNvbWV3aGF0IGRvZGd5IGJ1dCBzdXBlciBoZWxwZnVsIGhhY2sgd2hlcmUgd2VcbiAgICAgICAgICAgIC8vIHBhdGNoIHVwIG5vZGVzIGNyZWF0ZWQgYnkgdGhlIGlubmVyIHBhcnNlIChhbmQgdGh1c1xuICAgICAgICAgICAgLy8gcHJlc3VtYWJseSBub3QgYWxpYXNlZCBhbnl3aGVyZSBlbHNlKSB0byBob2xkIHRoZSBpbmZvcm1hdGlvblxuICAgICAgICAgICAgLy8gYWJvdXQgdGhlIGlubmVyIHBhcnNlLlxuICAgICAgICAgICAgbGV0IHByb3BzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKG51bGwpLCBpbm5lci50YXJnZXQucHJvcHMpO1xuICAgICAgICAgICAgcHJvcHNbTm9kZVByb3AubW91bnRlZC5pZF0gPSBuZXcgTW91bnRlZFRyZWUoZG9uZSwgaW5uZXIub3ZlcmxheSwgaW5uZXIucGFyc2VyKTtcbiAgICAgICAgICAgIGlubmVyLnRhcmdldC5wcm9wcyA9IHByb3BzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBnZXQgcGFyc2VkUG9zKCkge1xuICAgICAgICBpZiAodGhpcy5iYXNlUGFyc2UpXG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgbGV0IHBvcyA9IHRoaXMuaW5wdXQubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5pbm5lckRvbmU7IGkgPCB0aGlzLmlubmVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pbm5lcltpXS5yYW5nZXNbMF0uZnJvbSA8IHBvcylcbiAgICAgICAgICAgICAgICBwb3MgPSBNYXRoLm1pbihwb3MsIHRoaXMuaW5uZXJbaV0ucGFyc2UucGFyc2VkUG9zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcG9zO1xuICAgIH1cbiAgICBzdG9wQXQocG9zKSB7XG4gICAgICAgIHRoaXMuc3RvcHBlZEF0ID0gcG9zO1xuICAgICAgICBpZiAodGhpcy5iYXNlUGFyc2UpXG4gICAgICAgICAgICB0aGlzLmJhc2VQYXJzZS5zdG9wQXQocG9zKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuaW5uZXJEb25lOyBpIDwgdGhpcy5pbm5lci5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICB0aGlzLmlubmVyW2ldLnBhcnNlLnN0b3BBdChwb3MpO1xuICAgIH1cbiAgICBzdGFydElubmVyKCkge1xuICAgICAgICBsZXQgZnJhZ21lbnRDdXJzb3IgPSBuZXcgRnJhZ21lbnRDdXJzb3IodGhpcy5mcmFnbWVudHMpO1xuICAgICAgICBsZXQgb3ZlcmxheSA9IG51bGw7XG4gICAgICAgIGxldCBjb3ZlcmVkID0gbnVsbDtcbiAgICAgICAgbGV0IGN1cnNvciA9IG5ldyBUcmVlQ3Vyc29yKG5ldyBUcmVlTm9kZSh0aGlzLmJhc2VUcmVlLCB0aGlzLnJhbmdlc1swXS5mcm9tLCAwLCBudWxsKSwgSXRlck1vZGUuSW5jbHVkZUFub255bW91cyB8IEl0ZXJNb2RlLklnbm9yZU1vdW50cyk7XG4gICAgICAgIHNjYW46IGZvciAobGV0IG5lc3QsIGlzQ292ZXJlZDsgdGhpcy5zdG9wcGVkQXQgPT0gbnVsbCB8fCBjdXJzb3IuZnJvbSA8IHRoaXMuc3RvcHBlZEF0Oykge1xuICAgICAgICAgICAgbGV0IGVudGVyID0gdHJ1ZSwgcmFuZ2U7XG4gICAgICAgICAgICBpZiAoZnJhZ21lbnRDdXJzb3IuaGFzTm9kZShjdXJzb3IpKSB7XG4gICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1hdGNoID0gb3ZlcmxheS5tb3VudHMuZmluZChtID0+IG0uZnJhZy5mcm9tIDw9IGN1cnNvci5mcm9tICYmIG0uZnJhZy50byA+PSBjdXJzb3IudG8gJiYgbS5tb3VudC5vdmVybGF5KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgciBvZiBtYXRjaC5tb3VudC5vdmVybGF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZyb20gPSByLmZyb20gKyBtYXRjaC5wb3MsIHRvID0gci50byArIG1hdGNoLnBvcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZnJvbSA+PSBjdXJzb3IuZnJvbSAmJiB0byA8PSBjdXJzb3IudG8gJiYgIW92ZXJsYXkucmFuZ2VzLnNvbWUociA9PiByLmZyb20gPCB0byAmJiByLnRvID4gZnJvbSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXkucmFuZ2VzLnB1c2goeyBmcm9tLCB0byB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZW50ZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvdmVyZWQgJiYgKGlzQ292ZXJlZCA9IGNoZWNrQ292ZXIoY292ZXJlZC5yYW5nZXMsIGN1cnNvci5mcm9tLCBjdXJzb3IudG8pKSkge1xuICAgICAgICAgICAgICAgIGVudGVyID0gaXNDb3ZlcmVkICE9IDIgLyogRnVsbCAqLztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFjdXJzb3IudHlwZS5pc0Fub255bW91cyAmJiBjdXJzb3IuZnJvbSA8IGN1cnNvci50byAmJiAobmVzdCA9IHRoaXMubmVzdChjdXJzb3IsIHRoaXMuaW5wdXQpKSkge1xuICAgICAgICAgICAgICAgIGlmICghY3Vyc29yLnRyZWUpXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsaXplKGN1cnNvcik7XG4gICAgICAgICAgICAgICAgbGV0IG9sZE1vdW50cyA9IGZyYWdtZW50Q3Vyc29yLmZpbmRNb3VudHMoY3Vyc29yLmZyb20sIG5lc3QucGFyc2VyKTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG5lc3Qub3ZlcmxheSA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmxheSA9IG5ldyBBY3RpdmVPdmVybGF5KG5lc3QucGFyc2VyLCBuZXN0Lm92ZXJsYXksIG9sZE1vdW50cywgdGhpcy5pbm5lci5sZW5ndGgsIGN1cnNvci5mcm9tLCBjdXJzb3IudHJlZSwgb3ZlcmxheSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcmFuZ2VzID0gcHVuY2hSYW5nZXModGhpcy5yYW5nZXMsIG5lc3Qub3ZlcmxheSB8fCBbbmV3IFJhbmdlKGN1cnNvci5mcm9tLCBjdXJzb3IudG8pXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyYW5nZXMubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbm5lci5wdXNoKG5ldyBJbm5lclBhcnNlKG5lc3QucGFyc2VyLCBuZXN0LnBhcnNlci5zdGFydFBhcnNlKHRoaXMuaW5wdXQsIGVudGVyRnJhZ21lbnRzKG9sZE1vdW50cywgcmFuZ2VzKSwgcmFuZ2VzKSwgbmVzdC5vdmVybGF5ID8gbmVzdC5vdmVybGF5Lm1hcChyID0+IG5ldyBSYW5nZShyLmZyb20gLSBjdXJzb3IuZnJvbSwgci50byAtIGN1cnNvci5mcm9tKSkgOiBudWxsLCBjdXJzb3IudHJlZSwgcmFuZ2VzKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghbmVzdC5vdmVybGF5KVxuICAgICAgICAgICAgICAgICAgICAgICAgZW50ZXIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocmFuZ2VzLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdmVyZWQgPSB7IHJhbmdlcywgZGVwdGg6IDAsIHByZXY6IGNvdmVyZWQgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChvdmVybGF5ICYmIChyYW5nZSA9IG92ZXJsYXkucHJlZGljYXRlKGN1cnNvcikpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJhbmdlID09PSB0cnVlKVxuICAgICAgICAgICAgICAgICAgICByYW5nZSA9IG5ldyBSYW5nZShjdXJzb3IuZnJvbSwgY3Vyc29yLnRvKTtcbiAgICAgICAgICAgICAgICBpZiAocmFuZ2UuZnJvbSA8IHJhbmdlLnRvKVxuICAgICAgICAgICAgICAgICAgICBvdmVybGF5LnJhbmdlcy5wdXNoKHJhbmdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlbnRlciAmJiBjdXJzb3IuZmlyc3RDaGlsZCgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpXG4gICAgICAgICAgICAgICAgICAgIG92ZXJsYXkuZGVwdGgrKztcbiAgICAgICAgICAgICAgICBpZiAoY292ZXJlZClcbiAgICAgICAgICAgICAgICAgICAgY292ZXJlZC5kZXB0aCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3Vyc29yLm5leHRTaWJsaW5nKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjdXJzb3IucGFyZW50KCkpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhayBzY2FuO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSAmJiAhLS1vdmVybGF5LmRlcHRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmFuZ2VzID0gcHVuY2hSYW5nZXModGhpcy5yYW5nZXMsIG92ZXJsYXkucmFuZ2VzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyYW5nZXMubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5uZXIuc3BsaWNlKG92ZXJsYXkuaW5kZXgsIDAsIG5ldyBJbm5lclBhcnNlKG92ZXJsYXkucGFyc2VyLCBvdmVybGF5LnBhcnNlci5zdGFydFBhcnNlKHRoaXMuaW5wdXQsIGVudGVyRnJhZ21lbnRzKG92ZXJsYXkubW91bnRzLCByYW5nZXMpLCByYW5nZXMpLCBvdmVybGF5LnJhbmdlcy5tYXAociA9PiBuZXcgUmFuZ2Uoci5mcm9tIC0gb3ZlcmxheS5zdGFydCwgci50byAtIG92ZXJsYXkuc3RhcnQpKSwgb3ZlcmxheS50YXJnZXQsIHJhbmdlcykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmxheSA9IG92ZXJsYXkucHJldjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoY292ZXJlZCAmJiAhLS1jb3ZlcmVkLmRlcHRoKVxuICAgICAgICAgICAgICAgICAgICAgICAgY292ZXJlZCA9IGNvdmVyZWQucHJldjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBjaGVja0NvdmVyKGNvdmVyZWQsIGZyb20sIHRvKSB7XG4gICAgZm9yIChsZXQgcmFuZ2Ugb2YgY292ZXJlZCkge1xuICAgICAgICBpZiAocmFuZ2UuZnJvbSA+PSB0bylcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBpZiAocmFuZ2UudG8gPiBmcm9tKVxuICAgICAgICAgICAgcmV0dXJuIHJhbmdlLmZyb20gPD0gZnJvbSAmJiByYW5nZS50byA+PSB0byA/IDIgLyogRnVsbCAqLyA6IDEgLyogUGFydGlhbCAqLztcbiAgICB9XG4gICAgcmV0dXJuIDAgLyogTm9uZSAqLztcbn1cbi8vIFRha2UgYSBwaWVjZSBvZiBidWZmZXIgYW5kIGNvbnZlcnQgaXQgaW50byBhIHN0YW5kLWFsb25lXG4vLyBUcmVlQnVmZmVyLlxuZnVuY3Rpb24gc2xpY2VCdWYoYnVmLCBzdGFydEksIGVuZEksIG5vZGVzLCBwb3NpdGlvbnMsIG9mZikge1xuICAgIGlmIChzdGFydEkgPCBlbmRJKSB7XG4gICAgICAgIGxldCBmcm9tID0gYnVmLmJ1ZmZlcltzdGFydEkgKyAxXSwgdG8gPSBidWYuYnVmZmVyW2VuZEkgLSAyXTtcbiAgICAgICAgbm9kZXMucHVzaChidWYuc2xpY2Uoc3RhcnRJLCBlbmRJLCBmcm9tLCB0bykpO1xuICAgICAgICBwb3NpdGlvbnMucHVzaChmcm9tIC0gb2ZmKTtcbiAgICB9XG59XG4vLyBUaGlzIGZ1bmN0aW9uIHRha2VzIGEgbm9kZSB0aGF0J3MgaW4gYSBidWZmZXIsIGFuZCBjb252ZXJ0cyBpdCwgYW5kXG4vLyBpdHMgcGFyZW50IGJ1ZmZlciBub2RlcywgaW50byBhIFRyZWUuIFRoaXMgaXMgYWdhaW4gYWN0aW5nIG9uIHRoZVxuLy8gYXNzdW1wdGlvbiB0aGF0IHRoZSB0cmVlcyBhbmQgYnVmZmVycyBoYXZlIGJlZW4gY29uc3RydWN0ZWQgYnkgdGhlXG4vLyBwYXJzZSB0aGF0IHdhcyByYW4gdmlhIHRoZSBtaXggcGFyc2VyLCBhbmQgdGh1cyBhcmVuJ3Qgc2hhcmVkIHdpdGhcbi8vIGFueSBvdGhlciBjb2RlLCBtYWtpbmcgdmlvbGF0aW9ucyBvZiB0aGUgaW1tdXRhYmlsaXR5IHNhZmUuXG5mdW5jdGlvbiBtYXRlcmlhbGl6ZShjdXJzb3IpIHtcbiAgICBsZXQgeyBub2RlIH0gPSBjdXJzb3IsIGRlcHRoID0gMDtcbiAgICAvLyBTY2FuIHVwIHRvIHRoZSBuZWFyZXN0IHRyZWVcbiAgICBkbyB7XG4gICAgICAgIGN1cnNvci5wYXJlbnQoKTtcbiAgICAgICAgZGVwdGgrKztcbiAgICB9IHdoaWxlICghY3Vyc29yLnRyZWUpO1xuICAgIC8vIEZpbmQgdGhlIGluZGV4IG9mIHRoZSBidWZmZXIgaW4gdGhhdCB0cmVlXG4gICAgbGV0IGkgPSAwLCBiYXNlID0gY3Vyc29yLnRyZWUsIG9mZiA9IDA7XG4gICAgZm9yICg7OyBpKyspIHtcbiAgICAgICAgb2ZmID0gYmFzZS5wb3NpdGlvbnNbaV0gKyBjdXJzb3IuZnJvbTtcbiAgICAgICAgaWYgKG9mZiA8PSBub2RlLmZyb20gJiYgb2ZmICsgYmFzZS5jaGlsZHJlbltpXS5sZW5ndGggPj0gbm9kZS50bylcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBsZXQgYnVmID0gYmFzZS5jaGlsZHJlbltpXSwgYiA9IGJ1Zi5idWZmZXI7XG4gICAgLy8gU3BsaXQgYSBsZXZlbCBpbiB0aGUgYnVmZmVyLCBwdXR0aW5nIHRoZSBub2RlcyBiZWZvcmUgYW5kIGFmdGVyXG4gICAgLy8gdGhlIGNoaWxkIHRoYXQgY29udGFpbnMgYG5vZGVgIGludG8gbmV3IGJ1ZmZlcnMuXG4gICAgZnVuY3Rpb24gc3BsaXQoc3RhcnRJLCBlbmRJLCB0eXBlLCBpbm5lck9mZnNldCwgbGVuZ3RoKSB7XG4gICAgICAgIGxldCBpID0gc3RhcnRJO1xuICAgICAgICB3aGlsZSAoYltpICsgMl0gKyBvZmYgPD0gbm9kZS5mcm9tKVxuICAgICAgICAgICAgaSA9IGJbaSArIDNdO1xuICAgICAgICBsZXQgY2hpbGRyZW4gPSBbXSwgcG9zaXRpb25zID0gW107XG4gICAgICAgIHNsaWNlQnVmKGJ1Ziwgc3RhcnRJLCBpLCBjaGlsZHJlbiwgcG9zaXRpb25zLCBpbm5lck9mZnNldCk7XG4gICAgICAgIGxldCBmcm9tID0gYltpICsgMV0sIHRvID0gYltpICsgMl07XG4gICAgICAgIGxldCBpc1RhcmdldCA9IGZyb20gKyBvZmYgPT0gbm9kZS5mcm9tICYmIHRvICsgb2ZmID09IG5vZGUudG8gJiYgYltpXSA9PSBub2RlLnR5cGUuaWQ7XG4gICAgICAgIGNoaWxkcmVuLnB1c2goaXNUYXJnZXQgPyBub2RlLnRvVHJlZSgpIDogc3BsaXQoaSArIDQsIGJbaSArIDNdLCBidWYuc2V0LnR5cGVzW2JbaV1dLCBmcm9tLCB0byAtIGZyb20pKTtcbiAgICAgICAgcG9zaXRpb25zLnB1c2goZnJvbSAtIGlubmVyT2Zmc2V0KTtcbiAgICAgICAgc2xpY2VCdWYoYnVmLCBiW2kgKyAzXSwgZW5kSSwgY2hpbGRyZW4sIHBvc2l0aW9ucywgaW5uZXJPZmZzZXQpO1xuICAgICAgICByZXR1cm4gbmV3IFRyZWUodHlwZSwgY2hpbGRyZW4sIHBvc2l0aW9ucywgbGVuZ3RoKTtcbiAgICB9XG4gICAgYmFzZS5jaGlsZHJlbltpXSA9IHNwbGl0KDAsIGIubGVuZ3RoLCBOb2RlVHlwZS5ub25lLCAwLCBidWYubGVuZ3RoKTtcbiAgICAvLyBNb3ZlIHRoZSBjdXJzb3IgYmFjayB0byB0aGUgdGFyZ2V0IG5vZGVcbiAgICBmb3IgKGxldCBkID0gMDsgZCA8PSBkZXB0aDsgZCsrKVxuICAgICAgICBjdXJzb3IuY2hpbGRBZnRlcihub2RlLmZyb20pO1xufVxuY2xhc3MgU3RydWN0dXJlQ3Vyc29yIHtcbiAgICBjb25zdHJ1Y3Rvcihyb290LCBvZmZzZXQpIHtcbiAgICAgICAgdGhpcy5vZmZzZXQgPSBvZmZzZXQ7XG4gICAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmN1cnNvciA9IHJvb3QuY3Vyc29yKEl0ZXJNb2RlLkluY2x1ZGVBbm9ueW1vdXMgfCBJdGVyTW9kZS5JZ25vcmVNb3VudHMpO1xuICAgIH1cbiAgICAvLyBNb3ZlIHRvIHRoZSBmaXJzdCBub2RlIChpbiBwcmUtb3JkZXIpIHRoYXQgc3RhcnRzIGF0IG9yIGFmdGVyIGBwb3NgLlxuICAgIG1vdmVUbyhwb3MpIHtcbiAgICAgICAgbGV0IHsgY3Vyc29yIH0gPSB0aGlzLCBwID0gcG9zIC0gdGhpcy5vZmZzZXQ7XG4gICAgICAgIHdoaWxlICghdGhpcy5kb25lICYmIGN1cnNvci5mcm9tIDwgcCkge1xuICAgICAgICAgICAgaWYgKGN1cnNvci50byA+PSBwb3MgJiYgY3Vyc29yLmVudGVyKHAsIDEsIEl0ZXJNb2RlLklnbm9yZU92ZXJsYXlzIHwgSXRlck1vZGUuRXhjbHVkZUJ1ZmZlcnMpKSA7XG4gICAgICAgICAgICBlbHNlIGlmICghY3Vyc29yLm5leHQoZmFsc2UpKVxuICAgICAgICAgICAgICAgIHRoaXMuZG9uZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFzTm9kZShjdXJzb3IpIHtcbiAgICAgICAgdGhpcy5tb3ZlVG8oY3Vyc29yLmZyb20pO1xuICAgICAgICBpZiAoIXRoaXMuZG9uZSAmJiB0aGlzLmN1cnNvci5mcm9tICsgdGhpcy5vZmZzZXQgPT0gY3Vyc29yLmZyb20gJiYgdGhpcy5jdXJzb3IudHJlZSkge1xuICAgICAgICAgICAgZm9yIChsZXQgdHJlZSA9IHRoaXMuY3Vyc29yLnRyZWU7Oykge1xuICAgICAgICAgICAgICAgIGlmICh0cmVlID09IGN1cnNvci50cmVlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAodHJlZS5jaGlsZHJlbi5sZW5ndGggJiYgdHJlZS5wb3NpdGlvbnNbMF0gPT0gMCAmJiB0cmVlLmNoaWxkcmVuWzBdIGluc3RhbmNlb2YgVHJlZSlcbiAgICAgICAgICAgICAgICAgICAgdHJlZSA9IHRyZWUuY2hpbGRyZW5bMF07XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuY2xhc3MgRnJhZ21lbnRDdXJzb3Ige1xuICAgIGNvbnN0cnVjdG9yKGZyYWdtZW50cykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHRoaXMuZnJhZ21lbnRzID0gZnJhZ21lbnRzO1xuICAgICAgICB0aGlzLmN1clRvID0gMDtcbiAgICAgICAgdGhpcy5mcmFnSSA9IDA7XG4gICAgICAgIGlmIChmcmFnbWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBsZXQgZmlyc3QgPSB0aGlzLmN1ckZyYWcgPSBmcmFnbWVudHNbMF07XG4gICAgICAgICAgICB0aGlzLmN1clRvID0gKF9hID0gZmlyc3QudHJlZS5wcm9wKHN0b3BwZWRJbm5lcikpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGZpcnN0LnRvO1xuICAgICAgICAgICAgdGhpcy5pbm5lciA9IG5ldyBTdHJ1Y3R1cmVDdXJzb3IoZmlyc3QudHJlZSwgLWZpcnN0Lm9mZnNldCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmN1ckZyYWcgPSB0aGlzLmlubmVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYXNOb2RlKG5vZGUpIHtcbiAgICAgICAgd2hpbGUgKHRoaXMuY3VyRnJhZyAmJiBub2RlLmZyb20gPj0gdGhpcy5jdXJUbylcbiAgICAgICAgICAgIHRoaXMubmV4dEZyYWcoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VyRnJhZyAmJiB0aGlzLmN1ckZyYWcuZnJvbSA8PSBub2RlLmZyb20gJiYgdGhpcy5jdXJUbyA+PSBub2RlLnRvICYmIHRoaXMuaW5uZXIuaGFzTm9kZShub2RlKTtcbiAgICB9XG4gICAgbmV4dEZyYWcoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdGhpcy5mcmFnSSsrO1xuICAgICAgICBpZiAodGhpcy5mcmFnSSA9PSB0aGlzLmZyYWdtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuY3VyRnJhZyA9IHRoaXMuaW5uZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IGZyYWcgPSB0aGlzLmN1ckZyYWcgPSB0aGlzLmZyYWdtZW50c1t0aGlzLmZyYWdJXTtcbiAgICAgICAgICAgIHRoaXMuY3VyVG8gPSAoX2EgPSBmcmFnLnRyZWUucHJvcChzdG9wcGVkSW5uZXIpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBmcmFnLnRvO1xuICAgICAgICAgICAgdGhpcy5pbm5lciA9IG5ldyBTdHJ1Y3R1cmVDdXJzb3IoZnJhZy50cmVlLCAtZnJhZy5vZmZzZXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZpbmRNb3VudHMocG9zLCBwYXJzZXIpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgICAgIGlmICh0aGlzLmlubmVyKSB7XG4gICAgICAgICAgICB0aGlzLmlubmVyLmN1cnNvci5tb3ZlVG8ocG9zLCAxKTtcbiAgICAgICAgICAgIGZvciAobGV0IHBvcyA9IHRoaXMuaW5uZXIuY3Vyc29yLm5vZGU7IHBvczsgcG9zID0gcG9zLnBhcmVudCkge1xuICAgICAgICAgICAgICAgIGxldCBtb3VudCA9IChfYSA9IHBvcy50cmVlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucHJvcChOb2RlUHJvcC5tb3VudGVkKTtcbiAgICAgICAgICAgICAgICBpZiAobW91bnQgJiYgbW91bnQucGFyc2VyID09IHBhcnNlcikge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5mcmFnSTsgaSA8IHRoaXMuZnJhZ21lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZnJhZyA9IHRoaXMuZnJhZ21lbnRzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZyYWcuZnJvbSA+PSBwb3MudG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZnJhZy50cmVlID09IHRoaXMuY3VyRnJhZy50cmVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJhZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zOiBwb3MuZnJvbSAtIGZyYWcub2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3VudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuZnVuY3Rpb24gcHVuY2hSYW5nZXMob3V0ZXIsIHJhbmdlcykge1xuICAgIGxldCBjb3B5ID0gbnVsbCwgY3VycmVudCA9IHJhbmdlcztcbiAgICBmb3IgKGxldCBpID0gMSwgaiA9IDA7IGkgPCBvdXRlci5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgZ2FwRnJvbSA9IG91dGVyW2kgLSAxXS50bywgZ2FwVG8gPSBvdXRlcltpXS5mcm9tO1xuICAgICAgICBmb3IgKDsgaiA8IGN1cnJlbnQubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGxldCByID0gY3VycmVudFtqXTtcbiAgICAgICAgICAgIGlmIChyLmZyb20gPj0gZ2FwVG8pXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBpZiAoci50byA8PSBnYXBGcm9tKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKCFjb3B5KVxuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBjb3B5ID0gcmFuZ2VzLnNsaWNlKCk7XG4gICAgICAgICAgICBpZiAoci5mcm9tIDwgZ2FwRnJvbSkge1xuICAgICAgICAgICAgICAgIGNvcHlbal0gPSBuZXcgUmFuZ2Uoci5mcm9tLCBnYXBGcm9tKTtcbiAgICAgICAgICAgICAgICBpZiAoci50byA+IGdhcFRvKVxuICAgICAgICAgICAgICAgICAgICBjb3B5LnNwbGljZShqICsgMSwgMCwgbmV3IFJhbmdlKGdhcFRvLCByLnRvKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChyLnRvID4gZ2FwVG8pIHtcbiAgICAgICAgICAgICAgICBjb3B5W2otLV0gPSBuZXcgUmFuZ2UoZ2FwVG8sIHIudG8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29weS5zcGxpY2Uoai0tLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY3VycmVudDtcbn1cbmZ1bmN0aW9uIGZpbmRDb3ZlckNoYW5nZXMoYSwgYiwgZnJvbSwgdG8pIHtcbiAgICBsZXQgaUEgPSAwLCBpQiA9IDAsIGluQSA9IGZhbHNlLCBpbkIgPSBmYWxzZSwgcG9zID0gLTFlOTtcbiAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgZm9yICg7Oykge1xuICAgICAgICBsZXQgbmV4dEEgPSBpQSA9PSBhLmxlbmd0aCA/IDFlOSA6IGluQSA/IGFbaUFdLnRvIDogYVtpQV0uZnJvbTtcbiAgICAgICAgbGV0IG5leHRCID0gaUIgPT0gYi5sZW5ndGggPyAxZTkgOiBpbkIgPyBiW2lCXS50byA6IGJbaUJdLmZyb207XG4gICAgICAgIGlmIChpbkEgIT0gaW5CKSB7XG4gICAgICAgICAgICBsZXQgc3RhcnQgPSBNYXRoLm1heChwb3MsIGZyb20pLCBlbmQgPSBNYXRoLm1pbihuZXh0QSwgbmV4dEIsIHRvKTtcbiAgICAgICAgICAgIGlmIChzdGFydCA8IGVuZClcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChuZXcgUmFuZ2Uoc3RhcnQsIGVuZCkpO1xuICAgICAgICB9XG4gICAgICAgIHBvcyA9IE1hdGgubWluKG5leHRBLCBuZXh0Qik7XG4gICAgICAgIGlmIChwb3MgPT0gMWU5KVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGlmIChuZXh0QSA9PSBwb3MpIHtcbiAgICAgICAgICAgIGlmICghaW5BKVxuICAgICAgICAgICAgICAgIGluQSA9IHRydWU7XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbkEgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpQSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChuZXh0QiA9PSBwb3MpIHtcbiAgICAgICAgICAgIGlmICghaW5CKVxuICAgICAgICAgICAgICAgIGluQiA9IHRydWU7XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbkIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpQisrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG4vLyBHaXZlbiBhIG51bWJlciBvZiBmcmFnbWVudHMgZm9yIHRoZSBvdXRlciB0cmVlLCBhbmQgYSBzZXQgb2YgcmFuZ2VzXG4vLyB0byBwYXJzZSwgZmluZCBmcmFnbWVudHMgZm9yIGlubmVyIHRyZWVzIG1vdW50ZWQgYXJvdW5kIHRob3NlXG4vLyByYW5nZXMsIGlmIGFueS5cbmZ1bmN0aW9uIGVudGVyRnJhZ21lbnRzKG1vdW50cywgcmFuZ2VzKSB7XG4gICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgIGZvciAobGV0IHsgcG9zLCBtb3VudCwgZnJhZyB9IG9mIG1vdW50cykge1xuICAgICAgICBsZXQgc3RhcnRQb3MgPSBwb3MgKyAobW91bnQub3ZlcmxheSA/IG1vdW50Lm92ZXJsYXlbMF0uZnJvbSA6IDApLCBlbmRQb3MgPSBzdGFydFBvcyArIG1vdW50LnRyZWUubGVuZ3RoO1xuICAgICAgICBsZXQgZnJvbSA9IE1hdGgubWF4KGZyYWcuZnJvbSwgc3RhcnRQb3MpLCB0byA9IE1hdGgubWluKGZyYWcudG8sIGVuZFBvcyk7XG4gICAgICAgIGlmIChtb3VudC5vdmVybGF5KSB7XG4gICAgICAgICAgICBsZXQgb3ZlcmxheSA9IG1vdW50Lm92ZXJsYXkubWFwKHIgPT4gbmV3IFJhbmdlKHIuZnJvbSArIHBvcywgci50byArIHBvcykpO1xuICAgICAgICAgICAgbGV0IGNoYW5nZXMgPSBmaW5kQ292ZXJDaGFuZ2VzKHJhbmdlcywgb3ZlcmxheSwgZnJvbSwgdG8pO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIHBvcyA9IGZyb207OyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgbGFzdCA9IGkgPT0gY2hhbmdlcy5sZW5ndGgsIGVuZCA9IGxhc3QgPyB0byA6IGNoYW5nZXNbaV0uZnJvbTtcbiAgICAgICAgICAgICAgICBpZiAoZW5kID4gcG9zKVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChuZXcgVHJlZUZyYWdtZW50KHBvcywgZW5kLCBtb3VudC50cmVlLCAtc3RhcnRQb3MsIGZyYWcuZnJvbSA+PSBwb3MgfHwgZnJhZy5vcGVuU3RhcnQsIGZyYWcudG8gPD0gZW5kIHx8IGZyYWcub3BlbkVuZCkpO1xuICAgICAgICAgICAgICAgIGlmIChsYXN0KVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBwb3MgPSBjaGFuZ2VzW2ldLnRvO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2gobmV3IFRyZWVGcmFnbWVudChmcm9tLCB0bywgbW91bnQudHJlZSwgLXN0YXJ0UG9zLCBmcmFnLmZyb20gPj0gc3RhcnRQb3MgfHwgZnJhZy5vcGVuU3RhcnQsIGZyYWcudG8gPD0gZW5kUG9zIHx8IGZyYWcub3BlbkVuZCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCB7IERlZmF1bHRCdWZmZXJMZW5ndGgsIEl0ZXJNb2RlLCBNb3VudGVkVHJlZSwgTm9kZVByb3AsIE5vZGVTZXQsIE5vZGVUeXBlLCBOb2RlV2Vha01hcCwgUGFyc2VyLCBUcmVlLCBUcmVlQnVmZmVyLCBUcmVlQ3Vyc29yLCBUcmVlRnJhZ21lbnQsIHBhcnNlTWl4ZWQgfTtcbiIsICJpbXBvcnQgeyBOb2RlUHJvcCB9IGZyb20gJ0BsZXplci9jb21tb24nO1xuXG5sZXQgbmV4dFRhZ0lEID0gMDtcbi8vLyBIaWdobGlnaHRpbmcgdGFncyBhcmUgbWFya2VycyB0aGF0IGRlbm90ZSBhIGhpZ2hsaWdodGluZyBjYXRlZ29yeS5cbi8vLyBUaGV5IGFyZSBbYXNzb2NpYXRlZF0oI2hpZ2hsaWdodC5zdHlsZVRhZ3MpIHdpdGggcGFydHMgb2YgYSBzeW50YXhcbi8vLyB0cmVlIGJ5IGEgbGFuZ3VhZ2UgbW9kZSwgYW5kIHRoZW4gbWFwcGVkIHRvIGFuIGFjdHVhbCBDU1Mgc3R5bGUgYnlcbi8vLyBhIFtoaWdobGlnaHRlcl0oI2hpZ2hsaWdodC5IaWdobGlnaHRlcikuXG4vLy9cbi8vLyBCZWNhdXNlIHN5bnRheCB0cmVlIG5vZGUgdHlwZXMgYW5kIGhpZ2hsaWdodCBzdHlsZXMgaGF2ZSB0byBiZVxuLy8vIGFibGUgdG8gdGFsayB0aGUgc2FtZSBsYW5ndWFnZSwgQ29kZU1pcnJvciB1c2VzIGEgbW9zdGx5IF9jbG9zZWRfXG4vLy8gW3ZvY2FidWxhcnldKCNoaWdobGlnaHQudGFncykgb2Ygc3ludGF4IHRhZ3MgKGFzIG9wcG9zZWQgdG9cbi8vLyB0cmFkaXRpb25hbCBvcGVuIHN0cmluZy1iYXNlZCBzeXN0ZW1zLCB3aGljaCBtYWtlIGl0IGhhcmQgZm9yXG4vLy8gaGlnaGxpZ2h0aW5nIHRoZW1lcyB0byBjb3ZlciBhbGwgdGhlIHRva2VucyBwcm9kdWNlZCBieSB0aGVcbi8vLyB2YXJpb3VzIGxhbmd1YWdlcykuXG4vLy9cbi8vLyBJdCBfaXNfIHBvc3NpYmxlIHRvIFtkZWZpbmVdKCNoaWdobGlnaHQuVGFnXmRlZmluZSkgeW91ciBvd25cbi8vLyBoaWdobGlnaHRpbmcgdGFncyBmb3Igc3lzdGVtLWludGVybmFsIHVzZSAod2hlcmUgeW91IGNvbnRyb2wgYm90aFxuLy8vIHRoZSBsYW5ndWFnZSBwYWNrYWdlIGFuZCB0aGUgaGlnaGxpZ2h0ZXIpLCBidXQgc3VjaCB0YWdzIHdpbGwgbm90XG4vLy8gYmUgcGlja2VkIHVwIGJ5IHJlZ3VsYXIgaGlnaGxpZ2h0ZXJzICh0aG91Z2ggeW91IGNhbiBkZXJpdmUgdGhlbVxuLy8vIGZyb20gc3RhbmRhcmQgdGFncyB0byBhbGxvdyBoaWdobGlnaHRlcnMgdG8gZmFsbCBiYWNrIHRvIHRob3NlKS5cbmNsYXNzIFRhZyB7XG4gICAgLy8vIEBpbnRlcm5hbFxuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8vLyBUaGUgc2V0IG9mIHRoaXMgdGFnIGFuZCBhbGwgaXRzIHBhcmVudCB0YWdzLCBzdGFydGluZyB3aXRoXG4gICAgLy8vIHRoaXMgb25lIGl0c2VsZiBhbmQgc29ydGVkIGluIG9yZGVyIG9mIGRlY3JlYXNpbmcgc3BlY2lmaWNpdHkuXG4gICAgc2V0LCBcbiAgICAvLy8gVGhlIGJhc2UgdW5tb2RpZmllZCB0YWcgdGhhdCB0aGlzIG9uZSBpcyBiYXNlZCBvbiwgaWYgaXQnc1xuICAgIC8vLyBtb2RpZmllZCBAaW50ZXJuYWxcbiAgICBiYXNlLCBcbiAgICAvLy8gVGhlIG1vZGlmaWVycyBhcHBsaWVkIHRvIHRoaXMuYmFzZSBAaW50ZXJuYWxcbiAgICBtb2RpZmllZCkge1xuICAgICAgICB0aGlzLnNldCA9IHNldDtcbiAgICAgICAgdGhpcy5iYXNlID0gYmFzZTtcbiAgICAgICAgdGhpcy5tb2RpZmllZCA9IG1vZGlmaWVkO1xuICAgICAgICAvLy8gQGludGVybmFsXG4gICAgICAgIHRoaXMuaWQgPSBuZXh0VGFnSUQrKztcbiAgICB9XG4gICAgLy8vIERlZmluZSBhIG5ldyB0YWcuIElmIGBwYXJlbnRgIGlzIGdpdmVuLCB0aGUgdGFnIGlzIHRyZWF0ZWQgYXMgYVxuICAgIC8vLyBzdWItdGFnIG9mIHRoYXQgcGFyZW50LCBhbmRcbiAgICAvLy8gW2hpZ2hsaWdodGVyc10oI2hpZ2hsaWdodC50YWdIaWdobGlnaHRlcikgdGhhdCBkb24ndCBtZW50aW9uXG4gICAgLy8vIHRoaXMgdGFnIHdpbGwgdHJ5IHRvIGZhbGwgYmFjayB0byB0aGUgcGFyZW50IHRhZyAob3IgZ3JhbmRwYXJlbnRcbiAgICAvLy8gdGFnLCBldGMpLlxuICAgIHN0YXRpYyBkZWZpbmUocGFyZW50KSB7XG4gICAgICAgIGlmIChwYXJlbnQgPT09IG51bGwgfHwgcGFyZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJlbnQuYmFzZSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbiBub3QgZGVyaXZlIGZyb20gYSBtb2RpZmllZCB0YWdcIik7XG4gICAgICAgIGxldCB0YWcgPSBuZXcgVGFnKFtdLCBudWxsLCBbXSk7XG4gICAgICAgIHRhZy5zZXQucHVzaCh0YWcpO1xuICAgICAgICBpZiAocGFyZW50KVxuICAgICAgICAgICAgZm9yIChsZXQgdCBvZiBwYXJlbnQuc2V0KVxuICAgICAgICAgICAgICAgIHRhZy5zZXQucHVzaCh0KTtcbiAgICAgICAgcmV0dXJuIHRhZztcbiAgICB9XG4gICAgLy8vIERlZmluZSBhIHRhZyBfbW9kaWZpZXJfLCB3aGljaCBpcyBhIGZ1bmN0aW9uIHRoYXQsIGdpdmVuIGEgdGFnLFxuICAgIC8vLyB3aWxsIHJldHVybiBhIHRhZyB0aGF0IGlzIGEgc3VidGFnIG9mIHRoZSBvcmlnaW5hbC4gQXBwbHlpbmcgdGhlXG4gICAgLy8vIHNhbWUgbW9kaWZpZXIgdG8gYSB0d2ljZSB0YWcgd2lsbCByZXR1cm4gdGhlIHNhbWUgdmFsdWUgKGBtMSh0MSlcbiAgICAvLy8gPT0gbTEodDEpYCkgYW5kIGFwcGx5aW5nIG11bHRpcGxlIG1vZGlmaWVycyB3aWxsLCByZWdhcmRsZXNzIG9yXG4gICAgLy8vIG9yZGVyLCBwcm9kdWNlIHRoZSBzYW1lIHRhZyAoYG0xKG0yKHQxKSkgPT0gbTIobTEodDEpKWApLlxuICAgIC8vL1xuICAgIC8vLyBXaGVuIG11bHRpcGxlIG1vZGlmaWVycyBhcmUgYXBwbGllZCB0byBhIGdpdmVuIGJhc2UgdGFnLCBlYWNoXG4gICAgLy8vIHNtYWxsZXIgc2V0IG9mIG1vZGlmaWVycyBpcyByZWdpc3RlcmVkIGFzIGEgcGFyZW50LCBzbyB0aGF0IGZvclxuICAgIC8vLyBleGFtcGxlIGBtMShtMihtMyh0MSkpKWAgaXMgYSBzdWJ0eXBlIG9mIGBtMShtMih0MSkpYCxcbiAgICAvLy8gYG0xKG0zKHQxKWAsIGFuZCBzbyBvbi5cbiAgICBzdGF0aWMgZGVmaW5lTW9kaWZpZXIoKSB7XG4gICAgICAgIGxldCBtb2QgPSBuZXcgTW9kaWZpZXI7XG4gICAgICAgIHJldHVybiAodGFnKSA9PiB7XG4gICAgICAgICAgICBpZiAodGFnLm1vZGlmaWVkLmluZGV4T2YobW9kKSA+IC0xKVxuICAgICAgICAgICAgICAgIHJldHVybiB0YWc7XG4gICAgICAgICAgICByZXR1cm4gTW9kaWZpZXIuZ2V0KHRhZy5iYXNlIHx8IHRhZywgdGFnLm1vZGlmaWVkLmNvbmNhdChtb2QpLnNvcnQoKGEsIGIpID0+IGEuaWQgLSBiLmlkKSk7XG4gICAgICAgIH07XG4gICAgfVxufVxubGV0IG5leHRNb2RpZmllcklEID0gMDtcbmNsYXNzIE1vZGlmaWVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMgPSBbXTtcbiAgICAgICAgdGhpcy5pZCA9IG5leHRNb2RpZmllcklEKys7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQoYmFzZSwgbW9kcykge1xuICAgICAgICBpZiAoIW1vZHMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGJhc2U7XG4gICAgICAgIGxldCBleGlzdHMgPSBtb2RzWzBdLmluc3RhbmNlcy5maW5kKHQgPT4gdC5iYXNlID09IGJhc2UgJiYgc2FtZUFycmF5KG1vZHMsIHQubW9kaWZpZWQpKTtcbiAgICAgICAgaWYgKGV4aXN0cylcbiAgICAgICAgICAgIHJldHVybiBleGlzdHM7XG4gICAgICAgIGxldCBzZXQgPSBbXSwgdGFnID0gbmV3IFRhZyhzZXQsIGJhc2UsIG1vZHMpO1xuICAgICAgICBmb3IgKGxldCBtIG9mIG1vZHMpXG4gICAgICAgICAgICBtLmluc3RhbmNlcy5wdXNoKHRhZyk7XG4gICAgICAgIGxldCBjb25maWdzID0gcG93ZXJTZXQobW9kcyk7XG4gICAgICAgIGZvciAobGV0IHBhcmVudCBvZiBiYXNlLnNldClcbiAgICAgICAgICAgIGlmICghcGFyZW50Lm1vZGlmaWVkLmxlbmd0aClcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBjb25maWcgb2YgY29uZmlncylcbiAgICAgICAgICAgICAgICAgICAgc2V0LnB1c2goTW9kaWZpZXIuZ2V0KHBhcmVudCwgY29uZmlnKSk7XG4gICAgICAgIHJldHVybiB0YWc7XG4gICAgfVxufVxuZnVuY3Rpb24gc2FtZUFycmF5KGEsIGIpIHtcbiAgICByZXR1cm4gYS5sZW5ndGggPT0gYi5sZW5ndGggJiYgYS5ldmVyeSgoeCwgaSkgPT4geCA9PSBiW2ldKTtcbn1cbmZ1bmN0aW9uIHBvd2VyU2V0KGFycmF5KSB7XG4gICAgbGV0IHNldHMgPSBbW11dO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZm9yIChsZXQgaiA9IDAsIGUgPSBzZXRzLmxlbmd0aDsgaiA8IGU7IGorKykge1xuICAgICAgICAgICAgc2V0cy5wdXNoKHNldHNbal0uY29uY2F0KGFycmF5W2ldKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNldHMuc29ydCgoYSwgYikgPT4gYi5sZW5ndGggLSBhLmxlbmd0aCk7XG59XG4vLy8gVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIGFkZCBhIHNldCBvZiB0YWdzIHRvIGEgbGFuZ3VhZ2Ugc3ludGF4XG4vLy8gdmlhIFtgTm9kZVNldC5leHRlbmRgXSgjY29tbW9uLk5vZGVTZXQuZXh0ZW5kKSBvclxuLy8vIFtgTFJQYXJzZXIuY29uZmlndXJlYF0oI2xyLkxSUGFyc2VyLmNvbmZpZ3VyZSkuXG4vLy9cbi8vLyBUaGUgYXJndW1lbnQgb2JqZWN0IG1hcHMgbm9kZSBzZWxlY3RvcnMgdG8gW2hpZ2hsaWdodGluZ1xuLy8vIHRhZ3NdKCNoaWdobGlnaHQuVGFnKSBvciBhcnJheXMgb2YgdGFncy5cbi8vL1xuLy8vIE5vZGUgc2VsZWN0b3JzIG1heSBob2xkIG9uZSBvciBtb3JlIChzcGFjZS1zZXBhcmF0ZWQpIG5vZGUgcGF0aHMuXG4vLy8gU3VjaCBhIHBhdGggY2FuIGJlIGEgW25vZGUgbmFtZV0oI2NvbW1vbi5Ob2RlVHlwZS5uYW1lKSwgb3Jcbi8vLyBtdWx0aXBsZSBub2RlIG5hbWVzIChvciBgKmAgd2lsZGNhcmRzKSBzZXBhcmF0ZWQgYnkgc2xhc2hcbi8vLyBjaGFyYWN0ZXJzLCBhcyBpbiBgXCJCbG9jay9EZWNsYXJhdGlvbi9WYXJpYWJsZU5hbWVcImAuIFN1Y2ggYSBwYXRoXG4vLy8gbWF0Y2hlcyB0aGUgZmluYWwgbm9kZSBidXQgb25seSBpZiBpdHMgZGlyZWN0IHBhcmVudCBub2RlcyBhcmUgdGhlXG4vLy8gb3RoZXIgbm9kZXMgbWVudGlvbmVkLiBBIGAqYCBpbiBzdWNoIGEgcGF0aCBtYXRjaGVzIGFueSBwYXJlbnQsXG4vLy8gYnV0IG9ubHkgYSBzaW5nbGUgbGV2ZWxcdTIwMTR3aWxkY2FyZHMgdGhhdCBtYXRjaCBtdWx0aXBsZSBwYXJlbnRzXG4vLy8gYXJlbid0IHN1cHBvcnRlZCwgYm90aCBmb3IgZWZmaWNpZW5jeSByZWFzb25zIGFuZCBiZWNhdXNlIExlemVyXG4vLy8gdHJlZXMgbWFrZSBpdCByYXRoZXIgaGFyZCB0byByZWFzb24gYWJvdXQgd2hhdCB0aGV5IHdvdWxkIG1hdGNoLilcbi8vL1xuLy8vIEEgcGF0aCBjYW4gYmUgZW5kZWQgd2l0aCBgLy4uLmAgdG8gaW5kaWNhdGUgdGhhdCB0aGUgdGFnIGFzc2lnbmVkXG4vLy8gdG8gdGhlIG5vZGUgc2hvdWxkIGFsc28gYXBwbHkgdG8gYWxsIGNoaWxkIG5vZGVzLCBldmVuIGlmIHRoZXlcbi8vLyBtYXRjaCB0aGVpciBvd24gc3R5bGUgKGJ5IGRlZmF1bHQsIG9ubHkgdGhlIGlubmVybW9zdCBzdHlsZSBpc1xuLy8vIHVzZWQpLlxuLy8vXG4vLy8gV2hlbiBhIHBhdGggZW5kcyBpbiBgIWAsIGFzIGluIGBBdHRyaWJ1dGUhYCwgbm8gZnVydGhlciBtYXRjaGluZ1xuLy8vIGhhcHBlbnMgZm9yIHRoZSBub2RlJ3MgY2hpbGQgbm9kZXMsIGFuZCB0aGUgZW50aXJlIG5vZGUgZ2V0cyB0aGVcbi8vLyBnaXZlbiBzdHlsZS5cbi8vL1xuLy8vIEluIHRoaXMgbm90YXRpb24sIG5vZGUgbmFtZXMgdGhhdCBjb250YWluIGAvYCwgYCFgLCBgKmAsIG9yIGAuLi5gXG4vLy8gbXVzdCBiZSBxdW90ZWQgYXMgSlNPTiBzdHJpbmdzLlxuLy8vXG4vLy8gRm9yIGV4YW1wbGU6XG4vLy9cbi8vLyBgYGBqYXZhc2NyaXB0XG4vLy8gcGFyc2VyLndpdGhQcm9wcyhcbi8vLyAgIHN0eWxlVGFncyh7XG4vLy8gICAgIC8vIFN0eWxlIE51bWJlciBhbmQgQmlnTnVtYmVyIG5vZGVzXG4vLy8gICAgIFwiTnVtYmVyIEJpZ051bWJlclwiOiB0YWdzLm51bWJlcixcbi8vLyAgICAgLy8gU3R5bGUgRXNjYXBlIG5vZGVzIHdob3NlIHBhcmVudCBpcyBTdHJpbmdcbi8vLyAgICAgXCJTdHJpbmcvRXNjYXBlXCI6IHRhZ3MuZXNjYXBlLFxuLy8vICAgICAvLyBTdHlsZSBhbnl0aGluZyBpbnNpZGUgQXR0cmlidXRlcyBub2Rlc1xuLy8vICAgICBcIkF0dHJpYnV0ZXMhXCI6IHRhZ3MubWV0YSxcbi8vLyAgICAgLy8gQWRkIGEgc3R5bGUgdG8gYWxsIGNvbnRlbnQgaW5zaWRlIEl0YWxpYyBub2Rlc1xuLy8vICAgICBcIkl0YWxpYy8uLi5cIjogdGFncy5lbXBoYXNpcyxcbi8vLyAgICAgLy8gU3R5bGUgSW52YWxpZFN0cmluZyBub2RlcyBhcyBib3RoIGBzdHJpbmdgIGFuZCBgaW52YWxpZGBcbi8vLyAgICAgXCJJbnZhbGlkU3RyaW5nXCI6IFt0YWdzLnN0cmluZywgdGFncy5pbnZhbGlkXSxcbi8vLyAgICAgLy8gU3R5bGUgdGhlIG5vZGUgbmFtZWQgXCIvXCIgYXMgcHVuY3R1YXRpb25cbi8vLyAgICAgJ1wiL1wiJzogdGFncy5wdW5jdHVhdGlvblxuLy8vICAgfSlcbi8vLyApXG4vLy8gYGBgXG5mdW5jdGlvbiBzdHlsZVRhZ3Moc3BlYykge1xuICAgIGxldCBieU5hbWUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIGZvciAobGV0IHByb3AgaW4gc3BlYykge1xuICAgICAgICBsZXQgdGFncyA9IHNwZWNbcHJvcF07XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0YWdzKSlcbiAgICAgICAgICAgIHRhZ3MgPSBbdGFnc107XG4gICAgICAgIGZvciAobGV0IHBhcnQgb2YgcHJvcC5zcGxpdChcIiBcIikpXG4gICAgICAgICAgICBpZiAocGFydCkge1xuICAgICAgICAgICAgICAgIGxldCBwaWVjZXMgPSBbXSwgbW9kZSA9IDIgLyogTm9ybWFsICovLCByZXN0ID0gcGFydDtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBwb3MgPSAwOzspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3QgPT0gXCIuLi5cIiAmJiBwb3MgPiAwICYmIHBvcyArIDMgPT0gcGFydC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGUgPSAxIC8qIEluaGVyaXQgKi87XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsZXQgbSA9IC9eXCIoPzpbXlwiXFxcXF18XFxcXC4pKj9cInxbXlxcLyFdKy8uZXhlYyhyZXN0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIHBhdGg6IFwiICsgcGFydCk7XG4gICAgICAgICAgICAgICAgICAgIHBpZWNlcy5wdXNoKG1bMF0gPT0gXCIqXCIgPyBcIlwiIDogbVswXVswXSA9PSAnXCInID8gSlNPTi5wYXJzZShtWzBdKSA6IG1bMF0pO1xuICAgICAgICAgICAgICAgICAgICBwb3MgKz0gbVswXS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3MgPT0gcGFydC5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5leHQgPSBwYXJ0W3BvcysrXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvcyA9PSBwYXJ0Lmxlbmd0aCAmJiBuZXh0ID09IFwiIVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlID0gMCAvKiBPcGFxdWUgKi87XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dCAhPSBcIi9cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCBwYXRoOiBcIiArIHBhcnQpO1xuICAgICAgICAgICAgICAgICAgICByZXN0ID0gcGFydC5zbGljZShwb3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgbGFzdCA9IHBpZWNlcy5sZW5ndGggLSAxLCBpbm5lciA9IHBpZWNlc1tsYXN0XTtcbiAgICAgICAgICAgICAgICBpZiAoIWlubmVyKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgcGF0aDogXCIgKyBwYXJ0KTtcbiAgICAgICAgICAgICAgICBsZXQgcnVsZSA9IG5ldyBSdWxlKHRhZ3MsIG1vZGUsIGxhc3QgPiAwID8gcGllY2VzLnNsaWNlKDAsIGxhc3QpIDogbnVsbCk7XG4gICAgICAgICAgICAgICAgYnlOYW1lW2lubmVyXSA9IHJ1bGUuc29ydChieU5hbWVbaW5uZXJdKTtcbiAgICAgICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJ1bGVOb2RlUHJvcC5hZGQoYnlOYW1lKTtcbn1cbmNvbnN0IHJ1bGVOb2RlUHJvcCA9IG5ldyBOb2RlUHJvcCgpO1xuY2xhc3MgUnVsZSB7XG4gICAgY29uc3RydWN0b3IodGFncywgbW9kZSwgY29udGV4dCwgbmV4dCkge1xuICAgICAgICB0aGlzLnRhZ3MgPSB0YWdzO1xuICAgICAgICB0aGlzLm1vZGUgPSBtb2RlO1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICB0aGlzLm5leHQgPSBuZXh0O1xuICAgIH1cbiAgICBnZXQgb3BhcXVlKCkgeyByZXR1cm4gdGhpcy5tb2RlID09IDAgLyogT3BhcXVlICovOyB9XG4gICAgZ2V0IGluaGVyaXQoKSB7IHJldHVybiB0aGlzLm1vZGUgPT0gMSAvKiBJbmhlcml0ICovOyB9XG4gICAgc29ydChvdGhlcikge1xuICAgICAgICBpZiAoIW90aGVyIHx8IG90aGVyLmRlcHRoIDwgdGhpcy5kZXB0aCkge1xuICAgICAgICAgICAgdGhpcy5uZXh0ID0gb3RoZXI7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBvdGhlci5uZXh0ID0gdGhpcy5zb3J0KG90aGVyLm5leHQpO1xuICAgICAgICByZXR1cm4gb3RoZXI7XG4gICAgfVxuICAgIGdldCBkZXB0aCgpIHsgcmV0dXJuIHRoaXMuY29udGV4dCA/IHRoaXMuY29udGV4dC5sZW5ndGggOiAwOyB9XG59XG5SdWxlLmVtcHR5ID0gbmV3IFJ1bGUoW10sIDIgLyogTm9ybWFsICovLCBudWxsKTtcbi8vLyBEZWZpbmUgYSBbaGlnaGxpZ2h0ZXJdKCNoaWdobGlnaHQuSGlnaGxpZ2h0ZXIpIGZyb20gYW4gYXJyYXkgb2Zcbi8vLyB0YWcvY2xhc3MgcGFpcnMuIENsYXNzZXMgYXNzb2NpYXRlZCB3aXRoIG1vcmUgc3BlY2lmaWMgdGFncyB3aWxsXG4vLy8gdGFrZSBwcmVjZWRlbmNlLlxuZnVuY3Rpb24gdGFnSGlnaGxpZ2h0ZXIodGFncywgb3B0aW9ucykge1xuICAgIGxldCBtYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIGZvciAobGV0IHN0eWxlIG9mIHRhZ3MpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHN0eWxlLnRhZykpXG4gICAgICAgICAgICBtYXBbc3R5bGUudGFnLmlkXSA9IHN0eWxlLmNsYXNzO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBmb3IgKGxldCB0YWcgb2Ygc3R5bGUudGFnKVxuICAgICAgICAgICAgICAgIG1hcFt0YWcuaWRdID0gc3R5bGUuY2xhc3M7XG4gICAgfVxuICAgIGxldCB7IHNjb3BlLCBhbGwgPSBudWxsIH0gPSBvcHRpb25zIHx8IHt9O1xuICAgIHJldHVybiB7XG4gICAgICAgIHN0eWxlOiAodGFncykgPT4ge1xuICAgICAgICAgICAgbGV0IGNscyA9IGFsbDtcbiAgICAgICAgICAgIGZvciAobGV0IHRhZyBvZiB0YWdzKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgc3ViIG9mIHRhZy5zZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhZ0NsYXNzID0gbWFwW3N1Yi5pZF07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YWdDbGFzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xzID0gY2xzID8gY2xzICsgXCIgXCIgKyB0YWdDbGFzcyA6IHRhZ0NsYXNzO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2xzO1xuICAgICAgICB9LFxuICAgICAgICBzY29wZVxuICAgIH07XG59XG5mdW5jdGlvbiBoaWdobGlnaHRUYWdzKGhpZ2hsaWdodGVycywgdGFncykge1xuICAgIGxldCByZXN1bHQgPSBudWxsO1xuICAgIGZvciAobGV0IGhpZ2hsaWdodGVyIG9mIGhpZ2hsaWdodGVycykge1xuICAgICAgICBsZXQgdmFsdWUgPSBoaWdobGlnaHRlci5zdHlsZSh0YWdzKTtcbiAgICAgICAgaWYgKHZhbHVlKVxuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0ID8gcmVzdWx0ICsgXCIgXCIgKyB2YWx1ZSA6IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLy8vIEhpZ2hsaWdodCB0aGUgZ2l2ZW4gW3RyZWVdKCNjb21tb24uVHJlZSkgd2l0aCB0aGUgZ2l2ZW5cbi8vLyBbaGlnaGxpZ2h0ZXJdKCNoaWdobGlnaHQuSGlnaGxpZ2h0ZXIpLlxuZnVuY3Rpb24gaGlnaGxpZ2h0VHJlZSh0cmVlLCBoaWdobGlnaHRlciwgXG4vLy8gQXNzaWduIHN0eWxpbmcgdG8gYSByZWdpb24gb2YgdGhlIHRleHQuIFdpbGwgYmUgY2FsbGVkLCBpbiBvcmRlclxuLy8vIG9mIHBvc2l0aW9uLCBmb3IgYW55IHJhbmdlcyB3aGVyZSBtb3JlIHRoYW4gemVybyBjbGFzc2VzIGFwcGx5LlxuLy8vIGBjbGFzc2VzYCBpcyBhIHNwYWNlIHNlcGFyYXRlZCBzdHJpbmcgb2YgQ1NTIGNsYXNzZXMuXG5wdXRTdHlsZSwgXG4vLy8gVGhlIHN0YXJ0IG9mIHRoZSByYW5nZSB0byBoaWdobGlnaHQuXG5mcm9tID0gMCwgXG4vLy8gVGhlIGVuZCBvZiB0aGUgcmFuZ2UuXG50byA9IHRyZWUubGVuZ3RoKSB7XG4gICAgbGV0IGJ1aWxkZXIgPSBuZXcgSGlnaGxpZ2h0QnVpbGRlcihmcm9tLCBBcnJheS5pc0FycmF5KGhpZ2hsaWdodGVyKSA/IGhpZ2hsaWdodGVyIDogW2hpZ2hsaWdodGVyXSwgcHV0U3R5bGUpO1xuICAgIGJ1aWxkZXIuaGlnaGxpZ2h0UmFuZ2UodHJlZS5jdXJzb3IoKSwgZnJvbSwgdG8sIFwiXCIsIGJ1aWxkZXIuaGlnaGxpZ2h0ZXJzKTtcbiAgICBidWlsZGVyLmZsdXNoKHRvKTtcbn1cbmNsYXNzIEhpZ2hsaWdodEJ1aWxkZXIge1xuICAgIGNvbnN0cnVjdG9yKGF0LCBoaWdobGlnaHRlcnMsIHNwYW4pIHtcbiAgICAgICAgdGhpcy5hdCA9IGF0O1xuICAgICAgICB0aGlzLmhpZ2hsaWdodGVycyA9IGhpZ2hsaWdodGVycztcbiAgICAgICAgdGhpcy5zcGFuID0gc3BhbjtcbiAgICAgICAgdGhpcy5jbGFzcyA9IFwiXCI7XG4gICAgfVxuICAgIHN0YXJ0U3BhbihhdCwgY2xzKSB7XG4gICAgICAgIGlmIChjbHMgIT0gdGhpcy5jbGFzcykge1xuICAgICAgICAgICAgdGhpcy5mbHVzaChhdCk7XG4gICAgICAgICAgICBpZiAoYXQgPiB0aGlzLmF0KVxuICAgICAgICAgICAgICAgIHRoaXMuYXQgPSBhdDtcbiAgICAgICAgICAgIHRoaXMuY2xhc3MgPSBjbHM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmx1c2godG8pIHtcbiAgICAgICAgaWYgKHRvID4gdGhpcy5hdCAmJiB0aGlzLmNsYXNzKVxuICAgICAgICAgICAgdGhpcy5zcGFuKHRoaXMuYXQsIHRvLCB0aGlzLmNsYXNzKTtcbiAgICB9XG4gICAgaGlnaGxpZ2h0UmFuZ2UoY3Vyc29yLCBmcm9tLCB0bywgaW5oZXJpdGVkQ2xhc3MsIGhpZ2hsaWdodGVycykge1xuICAgICAgICBsZXQgeyB0eXBlLCBmcm9tOiBzdGFydCwgdG86IGVuZCB9ID0gY3Vyc29yO1xuICAgICAgICBpZiAoc3RhcnQgPj0gdG8gfHwgZW5kIDw9IGZyb20pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICh0eXBlLmlzVG9wKVxuICAgICAgICAgICAgaGlnaGxpZ2h0ZXJzID0gdGhpcy5oaWdobGlnaHRlcnMuZmlsdGVyKGggPT4gIWguc2NvcGUgfHwgaC5zY29wZSh0eXBlKSk7XG4gICAgICAgIGxldCBjbHMgPSBpbmhlcml0ZWRDbGFzcztcbiAgICAgICAgbGV0IHJ1bGUgPSBnZXRTdHlsZVRhZ3MoY3Vyc29yKSB8fCBSdWxlLmVtcHR5O1xuICAgICAgICBsZXQgdGFnQ2xzID0gaGlnaGxpZ2h0VGFncyhoaWdobGlnaHRlcnMsIHJ1bGUudGFncyk7XG4gICAgICAgIGlmICh0YWdDbHMpIHtcbiAgICAgICAgICAgIGlmIChjbHMpXG4gICAgICAgICAgICAgICAgY2xzICs9IFwiIFwiO1xuICAgICAgICAgICAgY2xzICs9IHRhZ0NscztcbiAgICAgICAgICAgIGlmIChydWxlLm1vZGUgPT0gMSAvKiBJbmhlcml0ICovKVxuICAgICAgICAgICAgICAgIGluaGVyaXRlZENsYXNzICs9IChpbmhlcml0ZWRDbGFzcyA/IFwiIFwiIDogXCJcIikgKyB0YWdDbHM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGFydFNwYW4oY3Vyc29yLmZyb20sIGNscyk7XG4gICAgICAgIGlmIChydWxlLm9wYXF1ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IG1vdW50ZWQgPSBjdXJzb3IudHJlZSAmJiBjdXJzb3IudHJlZS5wcm9wKE5vZGVQcm9wLm1vdW50ZWQpO1xuICAgICAgICBpZiAobW91bnRlZCAmJiBtb3VudGVkLm92ZXJsYXkpIHtcbiAgICAgICAgICAgIGxldCBpbm5lciA9IGN1cnNvci5ub2RlLmVudGVyKG1vdW50ZWQub3ZlcmxheVswXS5mcm9tICsgc3RhcnQsIDEpO1xuICAgICAgICAgICAgbGV0IGlubmVySGlnaGxpZ2h0ZXJzID0gdGhpcy5oaWdobGlnaHRlcnMuZmlsdGVyKGggPT4gIWguc2NvcGUgfHwgaC5zY29wZShtb3VudGVkLnRyZWUudHlwZSkpO1xuICAgICAgICAgICAgbGV0IGhhc0NoaWxkID0gY3Vyc29yLmZpcnN0Q2hpbGQoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBwb3MgPSBzdGFydDs7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gaSA8IG1vdW50ZWQub3ZlcmxheS5sZW5ndGggPyBtb3VudGVkLm92ZXJsYXlbaV0gOiBudWxsO1xuICAgICAgICAgICAgICAgIGxldCBuZXh0UG9zID0gbmV4dCA/IG5leHQuZnJvbSArIHN0YXJ0IDogZW5kO1xuICAgICAgICAgICAgICAgIGxldCByYW5nZUZyb20gPSBNYXRoLm1heChmcm9tLCBwb3MpLCByYW5nZVRvID0gTWF0aC5taW4odG8sIG5leHRQb3MpO1xuICAgICAgICAgICAgICAgIGlmIChyYW5nZUZyb20gPCByYW5nZVRvICYmIGhhc0NoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChjdXJzb3IuZnJvbSA8IHJhbmdlVG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0UmFuZ2UoY3Vyc29yLCByYW5nZUZyb20sIHJhbmdlVG8sIGluaGVyaXRlZENsYXNzLCBoaWdobGlnaHRlcnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFNwYW4oTWF0aC5taW4odG8sIGN1cnNvci50byksIGNscyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3Vyc29yLnRvID49IG5leHRQb3MgfHwgIWN1cnNvci5uZXh0U2libGluZygpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghbmV4dCB8fCBuZXh0UG9zID4gdG8pXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIHBvcyA9IG5leHQudG8gKyBzdGFydDtcbiAgICAgICAgICAgICAgICBpZiAocG9zID4gZnJvbSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZ2hsaWdodFJhbmdlKGlubmVyLmN1cnNvcigpLCBNYXRoLm1heChmcm9tLCBuZXh0LmZyb20gKyBzdGFydCksIE1hdGgubWluKHRvLCBwb3MpLCBpbmhlcml0ZWRDbGFzcywgaW5uZXJIaWdobGlnaHRlcnMpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0U3Bhbihwb3MsIGNscyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhhc0NoaWxkKVxuICAgICAgICAgICAgICAgIGN1cnNvci5wYXJlbnQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjdXJzb3IuZmlyc3RDaGlsZCgpKSB7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnNvci50byA8PSBmcm9tKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBpZiAoY3Vyc29yLmZyb20gPj0gdG8pXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0UmFuZ2UoY3Vyc29yLCBmcm9tLCB0bywgaW5oZXJpdGVkQ2xhc3MsIGhpZ2hsaWdodGVycyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydFNwYW4oTWF0aC5taW4odG8sIGN1cnNvci50byksIGNscyk7XG4gICAgICAgICAgICB9IHdoaWxlIChjdXJzb3IubmV4dFNpYmxpbmcoKSk7XG4gICAgICAgICAgICBjdXJzb3IucGFyZW50KCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLy8gTWF0Y2ggYSBzeW50YXggbm9kZSdzIFtoaWdobGlnaHQgcnVsZXNdKCNoaWdobGlnaHQuc3R5bGVUYWdzKS4gSWZcbi8vLyB0aGVyZSdzIGEgbWF0Y2gsIHJldHVybiBpdHMgc2V0IG9mIHRhZ3MsIGFuZCB3aGV0aGVyIGl0IGlzXG4vLy8gb3BhcXVlICh1c2VzIGEgYCFgKSBvciBhcHBsaWVzIHRvIGFsbCBjaGlsZCBub2RlcyAoYC8uLi5gKS5cbmZ1bmN0aW9uIGdldFN0eWxlVGFncyhub2RlKSB7XG4gICAgbGV0IHJ1bGUgPSBub2RlLnR5cGUucHJvcChydWxlTm9kZVByb3ApO1xuICAgIHdoaWxlIChydWxlICYmIHJ1bGUuY29udGV4dCAmJiAhbm9kZS5tYXRjaENvbnRleHQocnVsZS5jb250ZXh0KSlcbiAgICAgICAgcnVsZSA9IHJ1bGUubmV4dDtcbiAgICByZXR1cm4gcnVsZSB8fCBudWxsO1xufVxuY29uc3QgdCA9IFRhZy5kZWZpbmU7XG5jb25zdCBjb21tZW50ID0gdCgpLCBuYW1lID0gdCgpLCB0eXBlTmFtZSA9IHQobmFtZSksIHByb3BlcnR5TmFtZSA9IHQobmFtZSksIGxpdGVyYWwgPSB0KCksIHN0cmluZyA9IHQobGl0ZXJhbCksIG51bWJlciA9IHQobGl0ZXJhbCksIGNvbnRlbnQgPSB0KCksIGhlYWRpbmcgPSB0KGNvbnRlbnQpLCBrZXl3b3JkID0gdCgpLCBvcGVyYXRvciA9IHQoKSwgcHVuY3R1YXRpb24gPSB0KCksIGJyYWNrZXQgPSB0KHB1bmN0dWF0aW9uKSwgbWV0YSA9IHQoKTtcbi8vLyBUaGUgZGVmYXVsdCBzZXQgb2YgaGlnaGxpZ2h0aW5nIFt0YWdzXSgjaGlnaGxpZ2h0LlRhZykuXG4vLy9cbi8vLyBUaGlzIGNvbGxlY3Rpb24gaXMgaGVhdmlseSBiaWFzZWQgdG93YXJkcyBwcm9ncmFtbWluZyBsYW5ndWFnZXMsXG4vLy8gYW5kIG5lY2Vzc2FyaWx5IGluY29tcGxldGUuIEEgZnVsbCBvbnRvbG9neSBvZiBzeW50YWN0aWNcbi8vLyBjb25zdHJ1Y3RzIHdvdWxkIGZpbGwgYSBzdGFjayBvZiBib29rcywgYW5kIGJlIGltcHJhY3RpY2FsIHRvXG4vLy8gd3JpdGUgdGhlbWVzIGZvci4gU28gdHJ5IHRvIG1ha2UgZG8gd2l0aCB0aGlzIHNldC4gSWYgYWxsIGVsc2Vcbi8vLyBmYWlscywgW29wZW4gYW5cbi8vLyBpc3N1ZV0oaHR0cHM6Ly9naXRodWIuY29tL2NvZGVtaXJyb3IvY29kZW1pcnJvci5uZXh0KSB0byBwcm9wb3NlIGFcbi8vLyBuZXcgdGFnLCBvciBbZGVmaW5lXSgjaGlnaGxpZ2h0LlRhZ15kZWZpbmUpIGEgbG9jYWwgY3VzdG9tIHRhZyBmb3Jcbi8vLyB5b3VyIHVzZSBjYXNlLlxuLy8vXG4vLy8gTm90ZSB0aGF0IGl0IGlzIG5vdCBvYmxpZ2F0b3J5IHRvIGFsd2F5cyBhdHRhY2ggdGhlIG1vc3Qgc3BlY2lmaWNcbi8vLyB0YWcgcG9zc2libGUgdG8gYW4gZWxlbWVudFx1MjAxNGlmIHlvdXIgZ3JhbW1hciBjYW4ndCBlYXNpbHlcbi8vLyBkaXN0aW5ndWlzaCBhIGNlcnRhaW4gdHlwZSBvZiBlbGVtZW50IChzdWNoIGFzIGEgbG9jYWwgdmFyaWFibGUpLFxuLy8vIGl0IGlzIG9rYXkgdG8gc3R5bGUgaXQgYXMgaXRzIG1vcmUgZ2VuZXJhbCB2YXJpYW50IChhIHZhcmlhYmxlKS5cbi8vLyBcbi8vLyBGb3IgdGFncyB0aGF0IGV4dGVuZCBzb21lIHBhcmVudCB0YWcsIHRoZSBkb2N1bWVudGF0aW9uIGxpbmtzIHRvXG4vLy8gdGhlIHBhcmVudC5cbmNvbnN0IHRhZ3MgPSB7XG4gICAgLy8vIEEgY29tbWVudC5cbiAgICBjb21tZW50LFxuICAgIC8vLyBBIGxpbmUgW2NvbW1lbnRdKCNoaWdobGlnaHQudGFncy5jb21tZW50KS5cbiAgICBsaW5lQ29tbWVudDogdChjb21tZW50KSxcbiAgICAvLy8gQSBibG9jayBbY29tbWVudF0oI2hpZ2hsaWdodC50YWdzLmNvbW1lbnQpLlxuICAgIGJsb2NrQ29tbWVudDogdChjb21tZW50KSxcbiAgICAvLy8gQSBkb2N1bWVudGF0aW9uIFtjb21tZW50XSgjaGlnaGxpZ2h0LnRhZ3MuY29tbWVudCkuXG4gICAgZG9jQ29tbWVudDogdChjb21tZW50KSxcbiAgICAvLy8gQW55IGtpbmQgb2YgaWRlbnRpZmllci5cbiAgICBuYW1lLFxuICAgIC8vLyBUaGUgW25hbWVdKCNoaWdobGlnaHQudGFncy5uYW1lKSBvZiBhIHZhcmlhYmxlLlxuICAgIHZhcmlhYmxlTmFtZTogdChuYW1lKSxcbiAgICAvLy8gQSB0eXBlIFtuYW1lXSgjaGlnaGxpZ2h0LnRhZ3MubmFtZSkuXG4gICAgdHlwZU5hbWU6IHR5cGVOYW1lLFxuICAgIC8vLyBBIHRhZyBuYW1lIChzdWJ0YWcgb2YgW2B0eXBlTmFtZWBdKCNoaWdobGlnaHQudGFncy50eXBlTmFtZSkpLlxuICAgIHRhZ05hbWU6IHQodHlwZU5hbWUpLFxuICAgIC8vLyBBIHByb3BlcnR5IG9yIGZpZWxkIFtuYW1lXSgjaGlnaGxpZ2h0LnRhZ3MubmFtZSkuXG4gICAgcHJvcGVydHlOYW1lOiBwcm9wZXJ0eU5hbWUsXG4gICAgLy8vIEFuIGF0dHJpYnV0ZSBuYW1lIChzdWJ0YWcgb2YgW2Bwcm9wZXJ0eU5hbWVgXSgjaGlnaGxpZ2h0LnRhZ3MucHJvcGVydHlOYW1lKSkuXG4gICAgYXR0cmlidXRlTmFtZTogdChwcm9wZXJ0eU5hbWUpLFxuICAgIC8vLyBUaGUgW25hbWVdKCNoaWdobGlnaHQudGFncy5uYW1lKSBvZiBhIGNsYXNzLlxuICAgIGNsYXNzTmFtZTogdChuYW1lKSxcbiAgICAvLy8gQSBsYWJlbCBbbmFtZV0oI2hpZ2hsaWdodC50YWdzLm5hbWUpLlxuICAgIGxhYmVsTmFtZTogdChuYW1lKSxcbiAgICAvLy8gQSBuYW1lc3BhY2UgW25hbWVdKCNoaWdobGlnaHQudGFncy5uYW1lKS5cbiAgICBuYW1lc3BhY2U6IHQobmFtZSksXG4gICAgLy8vIFRoZSBbbmFtZV0oI2hpZ2hsaWdodC50YWdzLm5hbWUpIG9mIGEgbWFjcm8uXG4gICAgbWFjcm9OYW1lOiB0KG5hbWUpLFxuICAgIC8vLyBBIGxpdGVyYWwgdmFsdWUuXG4gICAgbGl0ZXJhbCxcbiAgICAvLy8gQSBzdHJpbmcgW2xpdGVyYWxdKCNoaWdobGlnaHQudGFncy5saXRlcmFsKS5cbiAgICBzdHJpbmcsXG4gICAgLy8vIEEgZG9jdW1lbnRhdGlvbiBbc3RyaW5nXSgjaGlnaGxpZ2h0LnRhZ3Muc3RyaW5nKS5cbiAgICBkb2NTdHJpbmc6IHQoc3RyaW5nKSxcbiAgICAvLy8gQSBjaGFyYWN0ZXIgbGl0ZXJhbCAoc3VidGFnIG9mIFtzdHJpbmddKCNoaWdobGlnaHQudGFncy5zdHJpbmcpKS5cbiAgICBjaGFyYWN0ZXI6IHQoc3RyaW5nKSxcbiAgICAvLy8gQW4gYXR0cmlidXRlIHZhbHVlIChzdWJ0YWcgb2YgW3N0cmluZ10oI2hpZ2hsaWdodC50YWdzLnN0cmluZykpLlxuICAgIGF0dHJpYnV0ZVZhbHVlOiB0KHN0cmluZyksXG4gICAgLy8vIEEgbnVtYmVyIFtsaXRlcmFsXSgjaGlnaGxpZ2h0LnRhZ3MubGl0ZXJhbCkuXG4gICAgbnVtYmVyLFxuICAgIC8vLyBBbiBpbnRlZ2VyIFtudW1iZXJdKCNoaWdobGlnaHQudGFncy5udW1iZXIpIGxpdGVyYWwuXG4gICAgaW50ZWdlcjogdChudW1iZXIpLFxuICAgIC8vLyBBIGZsb2F0aW5nLXBvaW50IFtudW1iZXJdKCNoaWdobGlnaHQudGFncy5udW1iZXIpIGxpdGVyYWwuXG4gICAgZmxvYXQ6IHQobnVtYmVyKSxcbiAgICAvLy8gQSBib29sZWFuIFtsaXRlcmFsXSgjaGlnaGxpZ2h0LnRhZ3MubGl0ZXJhbCkuXG4gICAgYm9vbDogdChsaXRlcmFsKSxcbiAgICAvLy8gUmVndWxhciBleHByZXNzaW9uIFtsaXRlcmFsXSgjaGlnaGxpZ2h0LnRhZ3MubGl0ZXJhbCkuXG4gICAgcmVnZXhwOiB0KGxpdGVyYWwpLFxuICAgIC8vLyBBbiBlc2NhcGUgW2xpdGVyYWxdKCNoaWdobGlnaHQudGFncy5saXRlcmFsKSwgZm9yIGV4YW1wbGUgYVxuICAgIC8vLyBiYWNrc2xhc2ggZXNjYXBlIGluIGEgc3RyaW5nLlxuICAgIGVzY2FwZTogdChsaXRlcmFsKSxcbiAgICAvLy8gQSBjb2xvciBbbGl0ZXJhbF0oI2hpZ2hsaWdodC50YWdzLmxpdGVyYWwpLlxuICAgIGNvbG9yOiB0KGxpdGVyYWwpLFxuICAgIC8vLyBBIFVSTCBbbGl0ZXJhbF0oI2hpZ2hsaWdodC50YWdzLmxpdGVyYWwpLlxuICAgIHVybDogdChsaXRlcmFsKSxcbiAgICAvLy8gQSBsYW5ndWFnZSBrZXl3b3JkLlxuICAgIGtleXdvcmQsXG4gICAgLy8vIFRoZSBba2V5d29yZF0oI2hpZ2hsaWdodC50YWdzLmtleXdvcmQpIGZvciB0aGUgc2VsZiBvciB0aGlzXG4gICAgLy8vIG9iamVjdC5cbiAgICBzZWxmOiB0KGtleXdvcmQpLFxuICAgIC8vLyBUaGUgW2tleXdvcmRdKCNoaWdobGlnaHQudGFncy5rZXl3b3JkKSBmb3IgbnVsbC5cbiAgICBudWxsOiB0KGtleXdvcmQpLFxuICAgIC8vLyBBIFtrZXl3b3JkXSgjaGlnaGxpZ2h0LnRhZ3Mua2V5d29yZCkgZGVub3Rpbmcgc29tZSBhdG9taWMgdmFsdWUuXG4gICAgYXRvbTogdChrZXl3b3JkKSxcbiAgICAvLy8gQSBba2V5d29yZF0oI2hpZ2hsaWdodC50YWdzLmtleXdvcmQpIHRoYXQgcmVwcmVzZW50cyBhIHVuaXQuXG4gICAgdW5pdDogdChrZXl3b3JkKSxcbiAgICAvLy8gQSBtb2RpZmllciBba2V5d29yZF0oI2hpZ2hsaWdodC50YWdzLmtleXdvcmQpLlxuICAgIG1vZGlmaWVyOiB0KGtleXdvcmQpLFxuICAgIC8vLyBBIFtrZXl3b3JkXSgjaGlnaGxpZ2h0LnRhZ3Mua2V5d29yZCkgdGhhdCBhY3RzIGFzIGFuIG9wZXJhdG9yLlxuICAgIG9wZXJhdG9yS2V5d29yZDogdChrZXl3b3JkKSxcbiAgICAvLy8gQSBjb250cm9sLWZsb3cgcmVsYXRlZCBba2V5d29yZF0oI2hpZ2hsaWdodC50YWdzLmtleXdvcmQpLlxuICAgIGNvbnRyb2xLZXl3b3JkOiB0KGtleXdvcmQpLFxuICAgIC8vLyBBIFtrZXl3b3JkXSgjaGlnaGxpZ2h0LnRhZ3Mua2V5d29yZCkgdGhhdCBkZWZpbmVzIHNvbWV0aGluZy5cbiAgICBkZWZpbml0aW9uS2V5d29yZDogdChrZXl3b3JkKSxcbiAgICAvLy8gQSBba2V5d29yZF0oI2hpZ2hsaWdodC50YWdzLmtleXdvcmQpIHJlbGF0ZWQgdG8gZGVmaW5pbmcgb3JcbiAgICAvLy8gaW50ZXJmYWNpbmcgd2l0aCBtb2R1bGVzLlxuICAgIG1vZHVsZUtleXdvcmQ6IHQoa2V5d29yZCksXG4gICAgLy8vIEFuIG9wZXJhdG9yLlxuICAgIG9wZXJhdG9yLFxuICAgIC8vLyBBbiBbb3BlcmF0b3JdKCNoaWdobGlnaHQudGFncy5vcGVyYXRvcikgdGhhdCBkZXJlZmVyZW5jZXMgc29tZXRoaW5nLlxuICAgIGRlcmVmT3BlcmF0b3I6IHQob3BlcmF0b3IpLFxuICAgIC8vLyBBcml0aG1ldGljLXJlbGF0ZWQgW29wZXJhdG9yXSgjaGlnaGxpZ2h0LnRhZ3Mub3BlcmF0b3IpLlxuICAgIGFyaXRobWV0aWNPcGVyYXRvcjogdChvcGVyYXRvciksXG4gICAgLy8vIExvZ2ljYWwgW29wZXJhdG9yXSgjaGlnaGxpZ2h0LnRhZ3Mub3BlcmF0b3IpLlxuICAgIGxvZ2ljT3BlcmF0b3I6IHQob3BlcmF0b3IpLFxuICAgIC8vLyBCaXQgW29wZXJhdG9yXSgjaGlnaGxpZ2h0LnRhZ3Mub3BlcmF0b3IpLlxuICAgIGJpdHdpc2VPcGVyYXRvcjogdChvcGVyYXRvciksXG4gICAgLy8vIENvbXBhcmlzb24gW29wZXJhdG9yXSgjaGlnaGxpZ2h0LnRhZ3Mub3BlcmF0b3IpLlxuICAgIGNvbXBhcmVPcGVyYXRvcjogdChvcGVyYXRvciksXG4gICAgLy8vIFtPcGVyYXRvcl0oI2hpZ2hsaWdodC50YWdzLm9wZXJhdG9yKSB0aGF0IHVwZGF0ZXMgaXRzIG9wZXJhbmQuXG4gICAgdXBkYXRlT3BlcmF0b3I6IHQob3BlcmF0b3IpLFxuICAgIC8vLyBbT3BlcmF0b3JdKCNoaWdobGlnaHQudGFncy5vcGVyYXRvcikgdGhhdCBkZWZpbmVzIHNvbWV0aGluZy5cbiAgICBkZWZpbml0aW9uT3BlcmF0b3I6IHQob3BlcmF0b3IpLFxuICAgIC8vLyBUeXBlLXJlbGF0ZWQgW29wZXJhdG9yXSgjaGlnaGxpZ2h0LnRhZ3Mub3BlcmF0b3IpLlxuICAgIHR5cGVPcGVyYXRvcjogdChvcGVyYXRvciksXG4gICAgLy8vIENvbnRyb2wtZmxvdyBbb3BlcmF0b3JdKCNoaWdobGlnaHQudGFncy5vcGVyYXRvcikuXG4gICAgY29udHJvbE9wZXJhdG9yOiB0KG9wZXJhdG9yKSxcbiAgICAvLy8gUHJvZ3JhbSBvciBtYXJrdXAgcHVuY3R1YXRpb24uXG4gICAgcHVuY3R1YXRpb24sXG4gICAgLy8vIFtQdW5jdHVhdGlvbl0oI2hpZ2hsaWdodC50YWdzLnB1bmN0dWF0aW9uKSB0aGF0IHNlcGFyYXRlc1xuICAgIC8vLyB0aGluZ3MuXG4gICAgc2VwYXJhdG9yOiB0KHB1bmN0dWF0aW9uKSxcbiAgICAvLy8gQnJhY2tldC1zdHlsZSBbcHVuY3R1YXRpb25dKCNoaWdobGlnaHQudGFncy5wdW5jdHVhdGlvbikuXG4gICAgYnJhY2tldCxcbiAgICAvLy8gQW5nbGUgW2JyYWNrZXRzXSgjaGlnaGxpZ2h0LnRhZ3MuYnJhY2tldCkgKHVzdWFsbHkgYDxgIGFuZCBgPmBcbiAgICAvLy8gdG9rZW5zKS5cbiAgICBhbmdsZUJyYWNrZXQ6IHQoYnJhY2tldCksXG4gICAgLy8vIFNxdWFyZSBbYnJhY2tldHNdKCNoaWdobGlnaHQudGFncy5icmFja2V0KSAodXN1YWxseSBgW2AgYW5kIGBdYFxuICAgIC8vLyB0b2tlbnMpLlxuICAgIHNxdWFyZUJyYWNrZXQ6IHQoYnJhY2tldCksXG4gICAgLy8vIFBhcmVudGhlc2VzICh1c3VhbGx5IGAoYCBhbmQgYClgIHRva2VucykuIFN1YnRhZyBvZlxuICAgIC8vLyBbYnJhY2tldF0oI2hpZ2hsaWdodC50YWdzLmJyYWNrZXQpLlxuICAgIHBhcmVuOiB0KGJyYWNrZXQpLFxuICAgIC8vLyBCcmFjZXMgKHVzdWFsbHkgYHtgIGFuZCBgfWAgdG9rZW5zKS4gU3VidGFnIG9mXG4gICAgLy8vIFticmFja2V0XSgjaGlnaGxpZ2h0LnRhZ3MuYnJhY2tldCkuXG4gICAgYnJhY2U6IHQoYnJhY2tldCksXG4gICAgLy8vIENvbnRlbnQsIGZvciBleGFtcGxlIHBsYWluIHRleHQgaW4gWE1MIG9yIG1hcmt1cCBkb2N1bWVudHMuXG4gICAgY29udGVudCxcbiAgICAvLy8gW0NvbnRlbnRdKCNoaWdobGlnaHQudGFncy5jb250ZW50KSB0aGF0IHJlcHJlc2VudHMgYSBoZWFkaW5nLlxuICAgIGhlYWRpbmcsXG4gICAgLy8vIEEgbGV2ZWwgMSBbaGVhZGluZ10oI2hpZ2hsaWdodC50YWdzLmhlYWRpbmcpLlxuICAgIGhlYWRpbmcxOiB0KGhlYWRpbmcpLFxuICAgIC8vLyBBIGxldmVsIDIgW2hlYWRpbmddKCNoaWdobGlnaHQudGFncy5oZWFkaW5nKS5cbiAgICBoZWFkaW5nMjogdChoZWFkaW5nKSxcbiAgICAvLy8gQSBsZXZlbCAzIFtoZWFkaW5nXSgjaGlnaGxpZ2h0LnRhZ3MuaGVhZGluZykuXG4gICAgaGVhZGluZzM6IHQoaGVhZGluZyksXG4gICAgLy8vIEEgbGV2ZWwgNCBbaGVhZGluZ10oI2hpZ2hsaWdodC50YWdzLmhlYWRpbmcpLlxuICAgIGhlYWRpbmc0OiB0KGhlYWRpbmcpLFxuICAgIC8vLyBBIGxldmVsIDUgW2hlYWRpbmddKCNoaWdobGlnaHQudGFncy5oZWFkaW5nKS5cbiAgICBoZWFkaW5nNTogdChoZWFkaW5nKSxcbiAgICAvLy8gQSBsZXZlbCA2IFtoZWFkaW5nXSgjaGlnaGxpZ2h0LnRhZ3MuaGVhZGluZykuXG4gICAgaGVhZGluZzY6IHQoaGVhZGluZyksXG4gICAgLy8vIEEgcHJvc2Ugc2VwYXJhdG9yIChzdWNoIGFzIGEgaG9yaXpvbnRhbCBydWxlKS5cbiAgICBjb250ZW50U2VwYXJhdG9yOiB0KGNvbnRlbnQpLFxuICAgIC8vLyBbQ29udGVudF0oI2hpZ2hsaWdodC50YWdzLmNvbnRlbnQpIHRoYXQgcmVwcmVzZW50cyBhIGxpc3QuXG4gICAgbGlzdDogdChjb250ZW50KSxcbiAgICAvLy8gW0NvbnRlbnRdKCNoaWdobGlnaHQudGFncy5jb250ZW50KSB0aGF0IHJlcHJlc2VudHMgYSBxdW90ZS5cbiAgICBxdW90ZTogdChjb250ZW50KSxcbiAgICAvLy8gW0NvbnRlbnRdKCNoaWdobGlnaHQudGFncy5jb250ZW50KSB0aGF0IGlzIGVtcGhhc2l6ZWQuXG4gICAgZW1waGFzaXM6IHQoY29udGVudCksXG4gICAgLy8vIFtDb250ZW50XSgjaGlnaGxpZ2h0LnRhZ3MuY29udGVudCkgdGhhdCBpcyBzdHlsZWQgc3Ryb25nLlxuICAgIHN0cm9uZzogdChjb250ZW50KSxcbiAgICAvLy8gW0NvbnRlbnRdKCNoaWdobGlnaHQudGFncy5jb250ZW50KSB0aGF0IGlzIHBhcnQgb2YgYSBsaW5rLlxuICAgIGxpbms6IHQoY29udGVudCksXG4gICAgLy8vIFtDb250ZW50XSgjaGlnaGxpZ2h0LnRhZ3MuY29udGVudCkgdGhhdCBpcyBzdHlsZWQgYXMgY29kZSBvclxuICAgIC8vLyBtb25vc3BhY2UuXG4gICAgbW9ub3NwYWNlOiB0KGNvbnRlbnQpLFxuICAgIC8vLyBbQ29udGVudF0oI2hpZ2hsaWdodC50YWdzLmNvbnRlbnQpIHRoYXQgaGFzIGEgc3RyaWtlLXRocm91Z2hcbiAgICAvLy8gc3R5bGUuXG4gICAgc3RyaWtldGhyb3VnaDogdChjb250ZW50KSxcbiAgICAvLy8gSW5zZXJ0ZWQgdGV4dCBpbiBhIGNoYW5nZS10cmFja2luZyBmb3JtYXQuXG4gICAgaW5zZXJ0ZWQ6IHQoKSxcbiAgICAvLy8gRGVsZXRlZCB0ZXh0LlxuICAgIGRlbGV0ZWQ6IHQoKSxcbiAgICAvLy8gQ2hhbmdlZCB0ZXh0LlxuICAgIGNoYW5nZWQ6IHQoKSxcbiAgICAvLy8gQW4gaW52YWxpZCBvciB1bnN5bnRhY3RpYyBlbGVtZW50LlxuICAgIGludmFsaWQ6IHQoKSxcbiAgICAvLy8gTWV0YWRhdGEgb3IgbWV0YS1pbnN0cnVjdGlvbi5cbiAgICBtZXRhLFxuICAgIC8vLyBbTWV0YWRhdGFdKCNoaWdobGlnaHQudGFncy5tZXRhKSB0aGF0IGFwcGxpZXMgdG8gdGhlIGVudGlyZVxuICAgIC8vLyBkb2N1bWVudC5cbiAgICBkb2N1bWVudE1ldGE6IHQobWV0YSksXG4gICAgLy8vIFtNZXRhZGF0YV0oI2hpZ2hsaWdodC50YWdzLm1ldGEpIHRoYXQgYW5ub3RhdGVzIG9yIGFkZHNcbiAgICAvLy8gYXR0cmlidXRlcyB0byBhIGdpdmVuIHN5bnRhY3RpYyBlbGVtZW50LlxuICAgIGFubm90YXRpb246IHQobWV0YSksXG4gICAgLy8vIFByb2Nlc3NpbmcgaW5zdHJ1Y3Rpb24gb3IgcHJlcHJvY2Vzc29yIGRpcmVjdGl2ZS4gU3VidGFnIG9mXG4gICAgLy8vIFttZXRhXSgjaGlnaGxpZ2h0LnRhZ3MubWV0YSkuXG4gICAgcHJvY2Vzc2luZ0luc3RydWN0aW9uOiB0KG1ldGEpLFxuICAgIC8vLyBbTW9kaWZpZXJdKCNoaWdobGlnaHQuVGFnXmRlZmluZU1vZGlmaWVyKSB0aGF0IGluZGljYXRlcyB0aGF0IGFcbiAgICAvLy8gZ2l2ZW4gZWxlbWVudCBpcyBiZWluZyBkZWZpbmVkLiBFeHBlY3RlZCB0byBiZSB1c2VkIHdpdGggdGhlXG4gICAgLy8vIHZhcmlvdXMgW25hbWVdKCNoaWdobGlnaHQudGFncy5uYW1lKSB0YWdzLlxuICAgIGRlZmluaXRpb246IFRhZy5kZWZpbmVNb2RpZmllcigpLFxuICAgIC8vLyBbTW9kaWZpZXJdKCNoaWdobGlnaHQuVGFnXmRlZmluZU1vZGlmaWVyKSB0aGF0IGluZGljYXRlcyB0aGF0XG4gICAgLy8vIHNvbWV0aGluZyBpcyBjb25zdGFudC4gTW9zdGx5IGV4cGVjdGVkIHRvIGJlIHVzZWQgd2l0aFxuICAgIC8vLyBbdmFyaWFibGUgbmFtZXNdKCNoaWdobGlnaHQudGFncy52YXJpYWJsZU5hbWUpLlxuICAgIGNvbnN0YW50OiBUYWcuZGVmaW5lTW9kaWZpZXIoKSxcbiAgICAvLy8gW01vZGlmaWVyXSgjaGlnaGxpZ2h0LlRhZ15kZWZpbmVNb2RpZmllcikgdXNlZCB0byBpbmRpY2F0ZSB0aGF0XG4gICAgLy8vIGEgW3ZhcmlhYmxlXSgjaGlnaGxpZ2h0LnRhZ3MudmFyaWFibGVOYW1lKSBvciBbcHJvcGVydHlcbiAgICAvLy8gbmFtZV0oI2hpZ2hsaWdodC50YWdzLnByb3BlcnR5TmFtZSkgaXMgYmVpbmcgY2FsbGVkIG9yIGRlZmluZWRcbiAgICAvLy8gYXMgYSBmdW5jdGlvbi5cbiAgICBmdW5jdGlvbjogVGFnLmRlZmluZU1vZGlmaWVyKCksXG4gICAgLy8vIFtNb2RpZmllcl0oI2hpZ2hsaWdodC5UYWdeZGVmaW5lTW9kaWZpZXIpIHRoYXQgY2FuIGJlIGFwcGxpZWQgdG9cbiAgICAvLy8gW25hbWVzXSgjaGlnaGxpZ2h0LnRhZ3MubmFtZSkgdG8gaW5kaWNhdGUgdGhhdCB0aGV5IGJlbG9uZyB0b1xuICAgIC8vLyB0aGUgbGFuZ3VhZ2UncyBzdGFuZGFyZCBlbnZpcm9ubWVudC5cbiAgICBzdGFuZGFyZDogVGFnLmRlZmluZU1vZGlmaWVyKCksXG4gICAgLy8vIFtNb2RpZmllcl0oI2hpZ2hsaWdodC5UYWdeZGVmaW5lTW9kaWZpZXIpIHRoYXQgaW5kaWNhdGVzIGEgZ2l2ZW5cbiAgICAvLy8gW25hbWVzXSgjaGlnaGxpZ2h0LnRhZ3MubmFtZSkgaXMgbG9jYWwgdG8gc29tZSBzY29wZS5cbiAgICBsb2NhbDogVGFnLmRlZmluZU1vZGlmaWVyKCksXG4gICAgLy8vIEEgZ2VuZXJpYyB2YXJpYW50IFttb2RpZmllcl0oI2hpZ2hsaWdodC5UYWdeZGVmaW5lTW9kaWZpZXIpIHRoYXRcbiAgICAvLy8gY2FuIGJlIHVzZWQgdG8gdGFnIGxhbmd1YWdlLXNwZWNpZmljIGFsdGVybmF0aXZlIHZhcmlhbnRzIG9mXG4gICAgLy8vIHNvbWUgY29tbW9uIHRhZy4gSXQgaXMgcmVjb21tZW5kZWQgZm9yIHRoZW1lcyB0byBkZWZpbmUgc3BlY2lhbFxuICAgIC8vLyBmb3JtcyBvZiBhdCBsZWFzdCB0aGUgW3N0cmluZ10oI2hpZ2hsaWdodC50YWdzLnN0cmluZykgYW5kXG4gICAgLy8vIFt2YXJpYWJsZSBuYW1lXSgjaGlnaGxpZ2h0LnRhZ3MudmFyaWFibGVOYW1lKSB0YWdzLCBzaW5jZSB0aG9zZVxuICAgIC8vLyBjb21lIHVwIGEgbG90LlxuICAgIHNwZWNpYWw6IFRhZy5kZWZpbmVNb2RpZmllcigpXG59O1xuLy8vIFRoaXMgaXMgYSBoaWdobGlnaHRlciB0aGF0IGFkZHMgc3RhYmxlLCBwcmVkaWN0YWJsZSBjbGFzc2VzIHRvXG4vLy8gdG9rZW5zLCBmb3Igc3R5bGluZyB3aXRoIGV4dGVybmFsIENTUy5cbi8vL1xuLy8vIFRoZSBmb2xsb3dpbmcgdGFncyBhcmUgbWFwcGVkIHRvIHRoZWlyIG5hbWUgcHJlZml4ZWQgd2l0aCBgXCJ0b2stXCJgXG4vLy8gKGZvciBleGFtcGxlIGBcInRvay1jb21tZW50XCJgKTpcbi8vL1xuLy8vICogW2BsaW5rYF0oI2hpZ2hsaWdodC50YWdzLmxpbmspXG4vLy8gKiBbYGhlYWRpbmdgXSgjaGlnaGxpZ2h0LnRhZ3MuaGVhZGluZylcbi8vLyAqIFtgZW1waGFzaXNgXSgjaGlnaGxpZ2h0LnRhZ3MuZW1waGFzaXMpXG4vLy8gKiBbYHN0cm9uZ2BdKCNoaWdobGlnaHQudGFncy5zdHJvbmcpXG4vLy8gKiBbYGtleXdvcmRgXSgjaGlnaGxpZ2h0LnRhZ3Mua2V5d29yZClcbi8vLyAqIFtgYXRvbWBdKCNoaWdobGlnaHQudGFncy5hdG9tKVxuLy8vICogW2Bib29sYF0oI2hpZ2hsaWdodC50YWdzLmJvb2wpXG4vLy8gKiBbYHVybGBdKCNoaWdobGlnaHQudGFncy51cmwpXG4vLy8gKiBbYGxhYmVsTmFtZWBdKCNoaWdobGlnaHQudGFncy5sYWJlbE5hbWUpXG4vLy8gKiBbYGluc2VydGVkYF0oI2hpZ2hsaWdodC50YWdzLmluc2VydGVkKVxuLy8vICogW2BkZWxldGVkYF0oI2hpZ2hsaWdodC50YWdzLmRlbGV0ZWQpXG4vLy8gKiBbYGxpdGVyYWxgXSgjaGlnaGxpZ2h0LnRhZ3MubGl0ZXJhbClcbi8vLyAqIFtgc3RyaW5nYF0oI2hpZ2hsaWdodC50YWdzLnN0cmluZylcbi8vLyAqIFtgbnVtYmVyYF0oI2hpZ2hsaWdodC50YWdzLm51bWJlcilcbi8vLyAqIFtgdmFyaWFibGVOYW1lYF0oI2hpZ2hsaWdodC50YWdzLnZhcmlhYmxlTmFtZSlcbi8vLyAqIFtgdHlwZU5hbWVgXSgjaGlnaGxpZ2h0LnRhZ3MudHlwZU5hbWUpXG4vLy8gKiBbYG5hbWVzcGFjZWBdKCNoaWdobGlnaHQudGFncy5uYW1lc3BhY2UpXG4vLy8gKiBbYGNsYXNzTmFtZWBdKCNoaWdobGlnaHQudGFncy5jbGFzc05hbWUpXG4vLy8gKiBbYG1hY3JvTmFtZWBdKCNoaWdobGlnaHQudGFncy5tYWNyb05hbWUpXG4vLy8gKiBbYHByb3BlcnR5TmFtZWBdKCNoaWdobGlnaHQudGFncy5wcm9wZXJ0eU5hbWUpXG4vLy8gKiBbYG9wZXJhdG9yYF0oI2hpZ2hsaWdodC50YWdzLm9wZXJhdG9yKVxuLy8vICogW2Bjb21tZW50YF0oI2hpZ2hsaWdodC50YWdzLmNvbW1lbnQpXG4vLy8gKiBbYG1ldGFgXSgjaGlnaGxpZ2h0LnRhZ3MubWV0YSlcbi8vLyAqIFtgcHVuY3R1YXRpb25gXSgjaGlnaGxpZ2h0LnRhZ3MucHVuY3R1YXRpb24pXG4vLy8gKiBbYGludmFsaWRgXSgjaGlnaGxpZ2h0LnRhZ3MuaW52YWxpZClcbi8vL1xuLy8vIEluIGFkZGl0aW9uLCB0aGVzZSBtYXBwaW5ncyBhcmUgcHJvdmlkZWQ6XG4vLy9cbi8vLyAqIFtgcmVnZXhwYF0oI2hpZ2hsaWdodC50YWdzLnJlZ2V4cCksXG4vLy8gICBbYGVzY2FwZWBdKCNoaWdobGlnaHQudGFncy5lc2NhcGUpLCBhbmRcbi8vLyAgIFtgc3BlY2lhbGBdKCNoaWdobGlnaHQudGFncy5zcGVjaWFsKVtgKHN0cmluZylgXSgjaGlnaGxpZ2h0LnRhZ3Muc3RyaW5nKVxuLy8vICAgYXJlIG1hcHBlZCB0byBgXCJ0b2stc3RyaW5nMlwiYFxuLy8vICogW2BzcGVjaWFsYF0oI2hpZ2hsaWdodC50YWdzLnNwZWNpYWwpW2AodmFyaWFibGVOYW1lKWBdKCNoaWdobGlnaHQudGFncy52YXJpYWJsZU5hbWUpXG4vLy8gICB0byBgXCJ0b2stdmFyaWFibGVOYW1lMlwiYFxuLy8vICogW2Bsb2NhbGBdKCNoaWdobGlnaHQudGFncy5sb2NhbClbYCh2YXJpYWJsZU5hbWUpYF0oI2hpZ2hsaWdodC50YWdzLnZhcmlhYmxlTmFtZSlcbi8vLyAgIHRvIGBcInRvay12YXJpYWJsZU5hbWUgdG9rLWxvY2FsXCJgXG4vLy8gKiBbYGRlZmluaXRpb25gXSgjaGlnaGxpZ2h0LnRhZ3MuZGVmaW5pdGlvbilbYCh2YXJpYWJsZU5hbWUpYF0oI2hpZ2hsaWdodC50YWdzLnZhcmlhYmxlTmFtZSlcbi8vLyAgIHRvIGBcInRvay12YXJpYWJsZU5hbWUgdG9rLWRlZmluaXRpb25cImBcbi8vLyAqIFtgZGVmaW5pdGlvbmBdKCNoaWdobGlnaHQudGFncy5kZWZpbml0aW9uKVtgKHByb3BlcnR5TmFtZSlgXSgjaGlnaGxpZ2h0LnRhZ3MucHJvcGVydHlOYW1lKVxuLy8vICAgdG8gYFwidG9rLXByb3BlcnR5TmFtZSB0b2stZGVmaW5pdGlvblwiYFxuY29uc3QgY2xhc3NIaWdobGlnaHRlciA9IHRhZ0hpZ2hsaWdodGVyKFtcbiAgICB7IHRhZzogdGFncy5saW5rLCBjbGFzczogXCJ0b2stbGlua1wiIH0sXG4gICAgeyB0YWc6IHRhZ3MuaGVhZGluZywgY2xhc3M6IFwidG9rLWhlYWRpbmdcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmVtcGhhc2lzLCBjbGFzczogXCJ0b2stZW1waGFzaXNcIiB9LFxuICAgIHsgdGFnOiB0YWdzLnN0cm9uZywgY2xhc3M6IFwidG9rLXN0cm9uZ1wiIH0sXG4gICAgeyB0YWc6IHRhZ3Mua2V5d29yZCwgY2xhc3M6IFwidG9rLWtleXdvcmRcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmF0b20sIGNsYXNzOiBcInRvay1hdG9tXCIgfSxcbiAgICB7IHRhZzogdGFncy5ib29sLCBjbGFzczogXCJ0b2stYm9vbFwiIH0sXG4gICAgeyB0YWc6IHRhZ3MudXJsLCBjbGFzczogXCJ0b2stdXJsXCIgfSxcbiAgICB7IHRhZzogdGFncy5sYWJlbE5hbWUsIGNsYXNzOiBcInRvay1sYWJlbE5hbWVcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmluc2VydGVkLCBjbGFzczogXCJ0b2staW5zZXJ0ZWRcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmRlbGV0ZWQsIGNsYXNzOiBcInRvay1kZWxldGVkXCIgfSxcbiAgICB7IHRhZzogdGFncy5saXRlcmFsLCBjbGFzczogXCJ0b2stbGl0ZXJhbFwiIH0sXG4gICAgeyB0YWc6IHRhZ3Muc3RyaW5nLCBjbGFzczogXCJ0b2stc3RyaW5nXCIgfSxcbiAgICB7IHRhZzogdGFncy5udW1iZXIsIGNsYXNzOiBcInRvay1udW1iZXJcIiB9LFxuICAgIHsgdGFnOiBbdGFncy5yZWdleHAsIHRhZ3MuZXNjYXBlLCB0YWdzLnNwZWNpYWwodGFncy5zdHJpbmcpXSwgY2xhc3M6IFwidG9rLXN0cmluZzJcIiB9LFxuICAgIHsgdGFnOiB0YWdzLnZhcmlhYmxlTmFtZSwgY2xhc3M6IFwidG9rLXZhcmlhYmxlTmFtZVwiIH0sXG4gICAgeyB0YWc6IHRhZ3MubG9jYWwodGFncy52YXJpYWJsZU5hbWUpLCBjbGFzczogXCJ0b2stdmFyaWFibGVOYW1lIHRvay1sb2NhbFwiIH0sXG4gICAgeyB0YWc6IHRhZ3MuZGVmaW5pdGlvbih0YWdzLnZhcmlhYmxlTmFtZSksIGNsYXNzOiBcInRvay12YXJpYWJsZU5hbWUgdG9rLWRlZmluaXRpb25cIiB9LFxuICAgIHsgdGFnOiB0YWdzLnNwZWNpYWwodGFncy52YXJpYWJsZU5hbWUpLCBjbGFzczogXCJ0b2stdmFyaWFibGVOYW1lMlwiIH0sXG4gICAgeyB0YWc6IHRhZ3MuZGVmaW5pdGlvbih0YWdzLnByb3BlcnR5TmFtZSksIGNsYXNzOiBcInRvay1wcm9wZXJ0eU5hbWUgdG9rLWRlZmluaXRpb25cIiB9LFxuICAgIHsgdGFnOiB0YWdzLnR5cGVOYW1lLCBjbGFzczogXCJ0b2stdHlwZU5hbWVcIiB9LFxuICAgIHsgdGFnOiB0YWdzLm5hbWVzcGFjZSwgY2xhc3M6IFwidG9rLW5hbWVzcGFjZVwiIH0sXG4gICAgeyB0YWc6IHRhZ3MuY2xhc3NOYW1lLCBjbGFzczogXCJ0b2stY2xhc3NOYW1lXCIgfSxcbiAgICB7IHRhZzogdGFncy5tYWNyb05hbWUsIGNsYXNzOiBcInRvay1tYWNyb05hbWVcIiB9LFxuICAgIHsgdGFnOiB0YWdzLnByb3BlcnR5TmFtZSwgY2xhc3M6IFwidG9rLXByb3BlcnR5TmFtZVwiIH0sXG4gICAgeyB0YWc6IHRhZ3Mub3BlcmF0b3IsIGNsYXNzOiBcInRvay1vcGVyYXRvclwiIH0sXG4gICAgeyB0YWc6IHRhZ3MuY29tbWVudCwgY2xhc3M6IFwidG9rLWNvbW1lbnRcIiB9LFxuICAgIHsgdGFnOiB0YWdzLm1ldGEsIGNsYXNzOiBcInRvay1tZXRhXCIgfSxcbiAgICB7IHRhZzogdGFncy5pbnZhbGlkLCBjbGFzczogXCJ0b2staW52YWxpZFwiIH0sXG4gICAgeyB0YWc6IHRhZ3MucHVuY3R1YXRpb24sIGNsYXNzOiBcInRvay1wdW5jdHVhdGlvblwiIH1cbl0pO1xuXG5leHBvcnQgeyBUYWcsIGNsYXNzSGlnaGxpZ2h0ZXIsIGdldFN0eWxlVGFncywgaGlnaGxpZ2h0VHJlZSwgc3R5bGVUYWdzLCB0YWdIaWdobGlnaHRlciwgdGFncyB9O1xuIiwgImltcG9ydCB7IE5vZGVQcm9wLCBJdGVyTW9kZSwgVHJlZSwgVHJlZUZyYWdtZW50LCBQYXJzZXIsIE5vZGVUeXBlLCBOb2RlU2V0IH0gZnJvbSAnQGxlemVyL2NvbW1vbic7XG5pbXBvcnQgeyBTdGF0ZUVmZmVjdCwgU3RhdGVGaWVsZCwgRmFjZXQsIEVkaXRvclN0YXRlLCBjb3VudENvbHVtbiwgY29tYmluZUNvbmZpZywgUmFuZ2VTZXQsIFJhbmdlU2V0QnVpbGRlciwgUHJlYyB9IGZyb20gJ0Bjb2RlbWlycm9yL3N0YXRlJztcbmltcG9ydCB7IFZpZXdQbHVnaW4sIGxvZ0V4Y2VwdGlvbiwgRWRpdG9yVmlldywgRGVjb3JhdGlvbiwgV2lkZ2V0VHlwZSwgZ3V0dGVyLCBHdXR0ZXJNYXJrZXIgfSBmcm9tICdAY29kZW1pcnJvci92aWV3JztcbmltcG9ydCB7IHRhZ3MsIHRhZ0hpZ2hsaWdodGVyLCBoaWdobGlnaHRUcmVlLCBzdHlsZVRhZ3MgfSBmcm9tICdAbGV6ZXIvaGlnaGxpZ2h0JztcbmltcG9ydCB7IFN0eWxlTW9kdWxlIH0gZnJvbSAnc3R5bGUtbW9kJztcblxudmFyIF9hO1xuLyoqXG5Ob2RlIHByb3Agc3RvcmVkIGluIGEgcGFyc2VyJ3MgdG9wIHN5bnRheCBub2RlIHRvIHByb3ZpZGUgdGhlXG5mYWNldCB0aGF0IHN0b3JlcyBsYW5ndWFnZS1zcGVjaWZpYyBkYXRhIGZvciB0aGF0IGxhbmd1YWdlLlxuKi9cbmNvbnN0IGxhbmd1YWdlRGF0YVByb3AgPSAvKkBfX1BVUkVfXyovbmV3IE5vZGVQcm9wKCk7XG4vKipcbkhlbHBlciBmdW5jdGlvbiB0byBkZWZpbmUgYSBmYWNldCAodG8gYmUgYWRkZWQgdG8gdGhlIHRvcCBzeW50YXhcbm5vZGUocykgZm9yIGEgbGFuZ3VhZ2UgdmlhXG5bYGxhbmd1YWdlRGF0YVByb3BgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLmxhbmd1YWdlRGF0YVByb3ApKSwgdGhhdCB3aWxsIGJlXG51c2VkIHRvIGFzc29jaWF0ZSBsYW5ndWFnZSBkYXRhIHdpdGggdGhlIGxhbmd1YWdlLiBZb3VcbnByb2JhYmx5IG9ubHkgbmVlZCB0aGlzIHdoZW4gc3ViY2xhc3NpbmdcbltgTGFuZ3VhZ2VgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLkxhbmd1YWdlKS5cbiovXG5mdW5jdGlvbiBkZWZpbmVMYW5ndWFnZUZhY2V0KGJhc2VEYXRhKSB7XG4gICAgcmV0dXJuIEZhY2V0LmRlZmluZSh7XG4gICAgICAgIGNvbWJpbmU6IGJhc2VEYXRhID8gdmFsdWVzID0+IHZhbHVlcy5jb25jYXQoYmFzZURhdGEpIDogdW5kZWZpbmVkXG4gICAgfSk7XG59XG4vKipcbkEgbGFuZ3VhZ2Ugb2JqZWN0IG1hbmFnZXMgcGFyc2luZyBhbmQgcGVyLWxhbmd1YWdlXG5bbWV0YWRhdGFdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUubGFuZ3VhZ2VEYXRhQXQpLiBQYXJzZSBkYXRhIGlzXG5tYW5hZ2VkIGFzIGEgW0xlemVyXShodHRwczovL2xlemVyLmNvZGVtaXJyb3IubmV0KSB0cmVlLiBUaGUgY2xhc3NcbmNhbiBiZSB1c2VkIGRpcmVjdGx5LCB2aWEgdGhlIFtgTFJMYW5ndWFnZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuTFJMYW5ndWFnZSlcbnN1YmNsYXNzIGZvciBbTGV6ZXJdKGh0dHBzOi8vbGV6ZXIuY29kZW1pcnJvci5uZXQvKSBMUiBwYXJzZXJzLCBvclxudmlhIHRoZSBbYFN0cmVhbUxhbmd1YWdlYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5TdHJlYW1MYW5ndWFnZSkgc3ViY2xhc3NcbmZvciBzdHJlYW0gcGFyc2Vycy5cbiovXG5jbGFzcyBMYW5ndWFnZSB7XG4gICAgLyoqXG4gICAgQ29uc3RydWN0IGEgbGFuZ3VhZ2Ugb2JqZWN0LiBJZiB5b3UgbmVlZCB0byBpbnZva2UgdGhpc1xuICAgIGRpcmVjdGx5LCBmaXJzdCBkZWZpbmUgYSBkYXRhIGZhY2V0IHdpdGhcbiAgICBbYGRlZmluZUxhbmd1YWdlRmFjZXRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLmRlZmluZUxhbmd1YWdlRmFjZXQpLCBhbmQgdGhlblxuICAgIGNvbmZpZ3VyZSB5b3VyIHBhcnNlciB0byBbYXR0YWNoXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLmxhbmd1YWdlRGF0YVByb3ApIGl0XG4gICAgdG8gdGhlIGxhbmd1YWdlJ3Mgb3V0ZXIgc3ludGF4IG5vZGUuXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgW2xhbmd1YWdlIGRhdGFdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUubGFuZ3VhZ2VEYXRhQXQpIGZhY2V0XG4gICAgdXNlZCBmb3IgdGhpcyBsYW5ndWFnZS5cbiAgICAqL1xuICAgIGRhdGEsIHBhcnNlciwgZXh0cmFFeHRlbnNpb25zID0gW10sIFxuICAgIC8qKlxuICAgIEEgbGFuZ3VhZ2UgbmFtZS5cbiAgICAqL1xuICAgIG5hbWUgPSBcIlwiKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIC8vIEtsdWRnZSB0byBkZWZpbmUgRWRpdG9yU3RhdGUudHJlZSBhcyBhIGRlYnVnZ2luZyBoZWxwZXIsXG4gICAgICAgIC8vIHdpdGhvdXQgdGhlIEVkaXRvclN0YXRlIHBhY2thZ2UgYWN0dWFsbHkga25vd2luZyBhYm91dFxuICAgICAgICAvLyBsYW5ndWFnZXMgYW5kIGxlemVyIHRyZWVzLlxuICAgICAgICBpZiAoIUVkaXRvclN0YXRlLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eShcInRyZWVcIikpXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRWRpdG9yU3RhdGUucHJvdG90eXBlLCBcInRyZWVcIiwgeyBnZXQoKSB7IHJldHVybiBzeW50YXhUcmVlKHRoaXMpOyB9IH0pO1xuICAgICAgICB0aGlzLnBhcnNlciA9IHBhcnNlcjtcbiAgICAgICAgdGhpcy5leHRlbnNpb24gPSBbXG4gICAgICAgICAgICBsYW5ndWFnZS5vZih0aGlzKSxcbiAgICAgICAgICAgIEVkaXRvclN0YXRlLmxhbmd1YWdlRGF0YS5vZigoc3RhdGUsIHBvcywgc2lkZSkgPT4gc3RhdGUuZmFjZXQobGFuZ3VhZ2VEYXRhRmFjZXRBdChzdGF0ZSwgcG9zLCBzaWRlKSkpXG4gICAgICAgIF0uY29uY2F0KGV4dHJhRXh0ZW5zaW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgIFF1ZXJ5IHdoZXRoZXIgdGhpcyBsYW5ndWFnZSBpcyBhY3RpdmUgYXQgdGhlIGdpdmVuIHBvc2l0aW9uLlxuICAgICovXG4gICAgaXNBY3RpdmVBdChzdGF0ZSwgcG9zLCBzaWRlID0gLTEpIHtcbiAgICAgICAgcmV0dXJuIGxhbmd1YWdlRGF0YUZhY2V0QXQoc3RhdGUsIHBvcywgc2lkZSkgPT0gdGhpcy5kYXRhO1xuICAgIH1cbiAgICAvKipcbiAgICBGaW5kIHRoZSBkb2N1bWVudCByZWdpb25zIHRoYXQgd2VyZSBwYXJzZWQgdXNpbmcgdGhpcyBsYW5ndWFnZS5cbiAgICBUaGUgcmV0dXJuZWQgcmVnaW9ucyB3aWxsIF9pbmNsdWRlXyBhbnkgbmVzdGVkIGxhbmd1YWdlcyByb290ZWRcbiAgICBpbiB0aGlzIGxhbmd1YWdlLCB3aGVuIHRob3NlIGV4aXN0LlxuICAgICovXG4gICAgZmluZFJlZ2lvbnMoc3RhdGUpIHtcbiAgICAgICAgbGV0IGxhbmcgPSBzdGF0ZS5mYWNldChsYW5ndWFnZSk7XG4gICAgICAgIGlmICgobGFuZyA9PT0gbnVsbCB8fCBsYW5nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBsYW5nLmRhdGEpID09IHRoaXMuZGF0YSlcbiAgICAgICAgICAgIHJldHVybiBbeyBmcm9tOiAwLCB0bzogc3RhdGUuZG9jLmxlbmd0aCB9XTtcbiAgICAgICAgaWYgKCFsYW5nIHx8ICFsYW5nLmFsbG93c05lc3RpbmcpXG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIGxldCByZXN1bHQgPSBbXTtcbiAgICAgICAgbGV0IGV4cGxvcmUgPSAodHJlZSwgZnJvbSkgPT4ge1xuICAgICAgICAgICAgaWYgKHRyZWUucHJvcChsYW5ndWFnZURhdGFQcm9wKSA9PSB0aGlzLmRhdGEpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh7IGZyb20sIHRvOiBmcm9tICsgdHJlZS5sZW5ndGggfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IG1vdW50ID0gdHJlZS5wcm9wKE5vZGVQcm9wLm1vdW50ZWQpO1xuICAgICAgICAgICAgaWYgKG1vdW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKG1vdW50LnRyZWUucHJvcChsYW5ndWFnZURhdGFQcm9wKSA9PSB0aGlzLmRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vdW50Lm92ZXJsYXkpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCByIG9mIG1vdW50Lm92ZXJsYXkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goeyBmcm9tOiByLmZyb20gKyBmcm9tLCB0bzogci50byArIGZyb20gfSk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHsgZnJvbTogZnJvbSwgdG86IGZyb20gKyB0cmVlLmxlbmd0aCB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChtb3VudC5vdmVybGF5KSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzaXplID0gcmVzdWx0Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgZXhwbG9yZShtb3VudC50cmVlLCBtb3VudC5vdmVybGF5WzBdLmZyb20gKyBmcm9tKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPiBzaXplKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJlZS5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCBjaCA9IHRyZWUuY2hpbGRyZW5baV07XG4gICAgICAgICAgICAgICAgaWYgKGNoIGluc3RhbmNlb2YgVHJlZSlcbiAgICAgICAgICAgICAgICAgICAgZXhwbG9yZShjaCwgdHJlZS5wb3NpdGlvbnNbaV0gKyBmcm9tKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZXhwbG9yZShzeW50YXhUcmVlKHN0YXRlKSwgMCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgIEluZGljYXRlcyB3aGV0aGVyIHRoaXMgbGFuZ3VhZ2UgYWxsb3dzIG5lc3RlZCBsYW5ndWFnZXMuIFRoZVxuICAgIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gcmV0dXJucyB0cnVlLlxuICAgICovXG4gICAgZ2V0IGFsbG93c05lc3RpbmcoKSB7IHJldHVybiB0cnVlOyB9XG59XG4vKipcbkBpbnRlcm5hbFxuKi9cbkxhbmd1YWdlLnNldFN0YXRlID0gLypAX19QVVJFX18qL1N0YXRlRWZmZWN0LmRlZmluZSgpO1xuZnVuY3Rpb24gbGFuZ3VhZ2VEYXRhRmFjZXRBdChzdGF0ZSwgcG9zLCBzaWRlKSB7XG4gICAgbGV0IHRvcExhbmcgPSBzdGF0ZS5mYWNldChsYW5ndWFnZSk7XG4gICAgaWYgKCF0b3BMYW5nKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgZmFjZXQgPSB0b3BMYW5nLmRhdGE7XG4gICAgaWYgKHRvcExhbmcuYWxsb3dzTmVzdGluZykge1xuICAgICAgICBmb3IgKGxldCBub2RlID0gc3ludGF4VHJlZShzdGF0ZSkudG9wTm9kZTsgbm9kZTsgbm9kZSA9IG5vZGUuZW50ZXIocG9zLCBzaWRlLCBJdGVyTW9kZS5FeGNsdWRlQnVmZmVycykpXG4gICAgICAgICAgICBmYWNldCA9IG5vZGUudHlwZS5wcm9wKGxhbmd1YWdlRGF0YVByb3ApIHx8IGZhY2V0O1xuICAgIH1cbiAgICByZXR1cm4gZmFjZXQ7XG59XG4vKipcbkEgc3ViY2xhc3Mgb2YgW2BMYW5ndWFnZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuTGFuZ3VhZ2UpIGZvciB1c2Ugd2l0aCBMZXplclxuW0xSIHBhcnNlcnNdKGh0dHBzOi8vbGV6ZXIuY29kZW1pcnJvci5uZXQvZG9jcy9yZWYjbHIuTFJQYXJzZXIpXG5wYXJzZXJzLlxuKi9cbmNsYXNzIExSTGFuZ3VhZ2UgZXh0ZW5kcyBMYW5ndWFnZSB7XG4gICAgY29uc3RydWN0b3IoZGF0YSwgcGFyc2VyLCBuYW1lKSB7XG4gICAgICAgIHN1cGVyKGRhdGEsIHBhcnNlciwgW10sIG5hbWUpO1xuICAgICAgICB0aGlzLnBhcnNlciA9IHBhcnNlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgRGVmaW5lIGEgbGFuZ3VhZ2UgZnJvbSBhIHBhcnNlci5cbiAgICAqL1xuICAgIHN0YXRpYyBkZWZpbmUoc3BlYykge1xuICAgICAgICBsZXQgZGF0YSA9IGRlZmluZUxhbmd1YWdlRmFjZXQoc3BlYy5sYW5ndWFnZURhdGEpO1xuICAgICAgICByZXR1cm4gbmV3IExSTGFuZ3VhZ2UoZGF0YSwgc3BlYy5wYXJzZXIuY29uZmlndXJlKHtcbiAgICAgICAgICAgIHByb3BzOiBbbGFuZ3VhZ2VEYXRhUHJvcC5hZGQodHlwZSA9PiB0eXBlLmlzVG9wID8gZGF0YSA6IHVuZGVmaW5lZCldXG4gICAgICAgIH0pLCBzcGVjLm5hbWUpO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgdGhpcyBsYW5ndWFnZSB3aXRoIGEgcmVjb25maWd1cmVkXG4gICAgdmVyc2lvbiBvZiBpdHMgcGFyc2VyIGFuZCBvcHRpb25hbGx5IGEgbmV3IG5hbWUuXG4gICAgKi9cbiAgICBjb25maWd1cmUob3B0aW9ucywgbmFtZSkge1xuICAgICAgICByZXR1cm4gbmV3IExSTGFuZ3VhZ2UodGhpcy5kYXRhLCB0aGlzLnBhcnNlci5jb25maWd1cmUob3B0aW9ucyksIG5hbWUgfHwgdGhpcy5uYW1lKTtcbiAgICB9XG4gICAgZ2V0IGFsbG93c05lc3RpbmcoKSB7IHJldHVybiB0aGlzLnBhcnNlci5oYXNXcmFwcGVycygpOyB9XG59XG4vKipcbkdldCB0aGUgc3ludGF4IHRyZWUgZm9yIGEgc3RhdGUsIHdoaWNoIGlzIHRoZSBjdXJyZW50IChwb3NzaWJseVxuaW5jb21wbGV0ZSkgcGFyc2UgdHJlZSBvZiB0aGUgYWN0aXZlXG5bbGFuZ3VhZ2VdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuTGFuZ3VhZ2UpLCBvciB0aGUgZW1wdHkgdHJlZSBpZiB0aGVyZSBpcyBub1xubGFuZ3VhZ2UgYXZhaWxhYmxlLlxuKi9cbmZ1bmN0aW9uIHN5bnRheFRyZWUoc3RhdGUpIHtcbiAgICBsZXQgZmllbGQgPSBzdGF0ZS5maWVsZChMYW5ndWFnZS5zdGF0ZSwgZmFsc2UpO1xuICAgIHJldHVybiBmaWVsZCA/IGZpZWxkLnRyZWUgOiBUcmVlLmVtcHR5O1xufVxuLyoqXG5UcnkgdG8gZ2V0IGEgcGFyc2UgdHJlZSB0aGF0IHNwYW5zIGF0IGxlYXN0IHVwIHRvIGB1cHRvYC4gVGhlXG5tZXRob2Qgd2lsbCBkbyBhdCBtb3N0IGB0aW1lb3V0YCBtaWxsaXNlY29uZHMgb2Ygd29yayB0byBwYXJzZVxudXAgdG8gdGhhdCBwb2ludCBpZiB0aGUgdHJlZSBpc24ndCBhbHJlYWR5IGF2YWlsYWJsZS5cbiovXG5mdW5jdGlvbiBlbnN1cmVTeW50YXhUcmVlKHN0YXRlLCB1cHRvLCB0aW1lb3V0ID0gNTApIHtcbiAgICB2YXIgX2E7XG4gICAgbGV0IHBhcnNlID0gKF9hID0gc3RhdGUuZmllbGQoTGFuZ3VhZ2Uuc3RhdGUsIGZhbHNlKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNvbnRleHQ7XG4gICAgcmV0dXJuICFwYXJzZSA/IG51bGwgOiBwYXJzZS5pc0RvbmUodXB0bykgfHwgcGFyc2Uud29yayh0aW1lb3V0LCB1cHRvKSA/IHBhcnNlLnRyZWUgOiBudWxsO1xufVxuLyoqXG5RdWVyaWVzIHdoZXRoZXIgdGhlcmUgaXMgYSBmdWxsIHN5bnRheCB0cmVlIGF2YWlsYWJsZSB1cCB0byB0aGVcbmdpdmVuIGRvY3VtZW50IHBvc2l0aW9uLiBJZiB0aGVyZSBpc24ndCwgdGhlIGJhY2tncm91bmQgcGFyc2VcbnByb2Nlc3MgX21pZ2h0XyBzdGlsbCBiZSB3b3JraW5nIGFuZCB1cGRhdGUgdGhlIHRyZWUgZnVydGhlciwgYnV0XG50aGVyZSBpcyBubyBndWFyYW50ZWUgb2YgdGhhdFx1MjAxNHRoZSBwYXJzZXIgd2lsbCBbc3RvcFxud29ya2luZ10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5zeW50YXhQYXJzZXJSdW5uaW5nKSB3aGVuIGl0IGhhcyBzcGVudCBhXG5jZXJ0YWluIGFtb3VudCBvZiB0aW1lIG9yIGhhcyBtb3ZlZCBiZXlvbmQgdGhlIHZpc2libGUgdmlld3BvcnQuXG5BbHdheXMgcmV0dXJucyBmYWxzZSBpZiBubyBsYW5ndWFnZSBoYXMgYmVlbiBlbmFibGVkLlxuKi9cbmZ1bmN0aW9uIHN5bnRheFRyZWVBdmFpbGFibGUoc3RhdGUsIHVwdG8gPSBzdGF0ZS5kb2MubGVuZ3RoKSB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiAoKF9hID0gc3RhdGUuZmllbGQoTGFuZ3VhZ2Uuc3RhdGUsIGZhbHNlKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNvbnRleHQuaXNEb25lKHVwdG8pKSB8fCBmYWxzZTtcbn1cbi8qKlxuTW92ZSBwYXJzaW5nIGZvcndhcmQsIGFuZCB1cGRhdGUgdGhlIGVkaXRvciBzdGF0ZSBhZnRlcndhcmRzIHRvXG5yZWZsZWN0IHRoZSBuZXcgdHJlZS4gV2lsbCB3b3JrIGZvciBhdCBtb3N0IGB0aW1lb3V0YFxubWlsbGlzZWNvbmRzLiBSZXR1cm5zIHRydWUgaWYgdGhlIHBhcnNlciBtYW5hZ2VkIGdldCB0byB0aGUgZ2l2ZW5cbnBvc2l0aW9uIGluIHRoYXQgdGltZS5cbiovXG5mdW5jdGlvbiBmb3JjZVBhcnNpbmcodmlldywgdXB0byA9IHZpZXcudmlld3BvcnQudG8sIHRpbWVvdXQgPSAxMDApIHtcbiAgICBsZXQgc3VjY2VzcyA9IGVuc3VyZVN5bnRheFRyZWUodmlldy5zdGF0ZSwgdXB0bywgdGltZW91dCk7XG4gICAgaWYgKHN1Y2Nlc3MgIT0gc3ludGF4VHJlZSh2aWV3LnN0YXRlKSlcbiAgICAgICAgdmlldy5kaXNwYXRjaCh7fSk7XG4gICAgcmV0dXJuICEhc3VjY2Vzcztcbn1cbi8qKlxuVGVsbHMgeW91IHdoZXRoZXIgdGhlIGxhbmd1YWdlIHBhcnNlciBpcyBwbGFubmluZyB0byBkbyBtb3JlXG5wYXJzaW5nIHdvcmsgKGluIGEgYHJlcXVlc3RJZGxlQ2FsbGJhY2tgIHBzZXVkby10aHJlYWQpIG9yIGhhc1xuc3RvcHBlZCBydW5uaW5nLCBlaXRoZXIgYmVjYXVzZSBpdCBwYXJzZWQgdGhlIGVudGlyZSBkb2N1bWVudCxcbmJlY2F1c2UgaXQgc3BlbnQgdG9vIG11Y2ggdGltZSBhbmQgd2FzIGN1dCBvZmYsIG9yIGJlY2F1c2UgdGhlcmVcbmlzIG5vIGxhbmd1YWdlIHBhcnNlciBlbmFibGVkLlxuKi9cbmZ1bmN0aW9uIHN5bnRheFBhcnNlclJ1bm5pbmcodmlldykge1xuICAgIHZhciBfYTtcbiAgICByZXR1cm4gKChfYSA9IHZpZXcucGx1Z2luKHBhcnNlV29ya2VyKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmlzV29ya2luZygpKSB8fCBmYWxzZTtcbn1cbi8vIExlemVyLXN0eWxlIElucHV0IG9iamVjdCBmb3IgYSBUZXh0IGRvY3VtZW50LlxuY2xhc3MgRG9jSW5wdXQge1xuICAgIGNvbnN0cnVjdG9yKGRvYywgbGVuZ3RoID0gZG9jLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmRvYyA9IGRvYztcbiAgICAgICAgdGhpcy5sZW5ndGggPSBsZW5ndGg7XG4gICAgICAgIHRoaXMuY3Vyc29yUG9zID0gMDtcbiAgICAgICAgdGhpcy5zdHJpbmcgPSBcIlwiO1xuICAgICAgICB0aGlzLmN1cnNvciA9IGRvYy5pdGVyKCk7XG4gICAgfVxuICAgIHN5bmNUbyhwb3MpIHtcbiAgICAgICAgdGhpcy5zdHJpbmcgPSB0aGlzLmN1cnNvci5uZXh0KHBvcyAtIHRoaXMuY3Vyc29yUG9zKS52YWx1ZTtcbiAgICAgICAgdGhpcy5jdXJzb3JQb3MgPSBwb3MgKyB0aGlzLnN0cmluZy5sZW5ndGg7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnNvclBvcyAtIHRoaXMuc3RyaW5nLmxlbmd0aDtcbiAgICB9XG4gICAgY2h1bmsocG9zKSB7XG4gICAgICAgIHRoaXMuc3luY1RvKHBvcyk7XG4gICAgICAgIHJldHVybiB0aGlzLnN0cmluZztcbiAgICB9XG4gICAgZ2V0IGxpbmVDaHVua3MoKSB7IHJldHVybiB0cnVlOyB9XG4gICAgcmVhZChmcm9tLCB0bykge1xuICAgICAgICBsZXQgc3RyaW5nU3RhcnQgPSB0aGlzLmN1cnNvclBvcyAtIHRoaXMuc3RyaW5nLmxlbmd0aDtcbiAgICAgICAgaWYgKGZyb20gPCBzdHJpbmdTdGFydCB8fCB0byA+PSB0aGlzLmN1cnNvclBvcylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRvYy5zbGljZVN0cmluZyhmcm9tLCB0byk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0cmluZy5zbGljZShmcm9tIC0gc3RyaW5nU3RhcnQsIHRvIC0gc3RyaW5nU3RhcnQpO1xuICAgIH1cbn1cbmxldCBjdXJyZW50Q29udGV4dCA9IG51bGw7XG4vKipcbkEgcGFyc2UgY29udGV4dCBwcm92aWRlZCB0byBwYXJzZXJzIHdvcmtpbmcgb24gdGhlIGVkaXRvciBjb250ZW50LlxuKi9cbmNsYXNzIFBhcnNlQ29udGV4dCB7XG4gICAgY29uc3RydWN0b3IocGFyc2VyLCBcbiAgICAvKipcbiAgICBUaGUgY3VycmVudCBlZGl0b3Igc3RhdGUuXG4gICAgKi9cbiAgICBzdGF0ZSwgXG4gICAgLyoqXG4gICAgVHJlZSBmcmFnbWVudHMgdGhhdCBjYW4gYmUgcmV1c2VkIGJ5IGluY3JlbWVudGFsIHJlLXBhcnNlcy5cbiAgICAqL1xuICAgIGZyYWdtZW50cyA9IFtdLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHRyZWUsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgdHJlZUxlbiwgXG4gICAgLyoqXG4gICAgVGhlIGN1cnJlbnQgZWRpdG9yIHZpZXdwb3J0IChvciBzb21lIG92ZXJhcHByb3hpbWF0aW9uXG4gICAgdGhlcmVvZikuIEludGVuZGVkIHRvIGJlIHVzZWQgZm9yIG9wcG9ydHVuaXN0aWNhbGx5IGF2b2lkaW5nXG4gICAgd29yayAoaW4gd2hpY2ggY2FzZVxuICAgIFtgc2tpcFVudGlsSW5WaWV3YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5QYXJzZUNvbnRleHQuc2tpcFVudGlsSW5WaWV3KVxuICAgIHNob3VsZCBiZSBjYWxsZWQgdG8gbWFrZSBzdXJlIHRoZSBwYXJzZXIgaXMgcmVzdGFydGVkIHdoZW4gdGhlXG4gICAgc2tpcHBlZCByZWdpb24gYmVjb21lcyB2aXNpYmxlKS5cbiAgICAqL1xuICAgIHZpZXdwb3J0LCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHNraXBwZWQsIFxuICAgIC8qKlxuICAgIFRoaXMgaXMgd2hlcmUgc2tpcHBpbmcgcGFyc2VycyBjYW4gcmVnaXN0ZXIgYSBwcm9taXNlIHRoYXQsXG4gICAgd2hlbiByZXNvbHZlZCwgd2lsbCBzY2hlZHVsZSBhIG5ldyBwYXJzZS4gSXQgaXMgY2xlYXJlZCB3aGVuXG4gICAgdGhlIHBhcnNlIHdvcmtlciBwaWNrcyB1cCB0aGUgcHJvbWlzZS4gQGludGVybmFsXG4gICAgKi9cbiAgICBzY2hlZHVsZU9uKSB7XG4gICAgICAgIHRoaXMucGFyc2VyID0gcGFyc2VyO1xuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgICAgIHRoaXMuZnJhZ21lbnRzID0gZnJhZ21lbnRzO1xuICAgICAgICB0aGlzLnRyZWUgPSB0cmVlO1xuICAgICAgICB0aGlzLnRyZWVMZW4gPSB0cmVlTGVuO1xuICAgICAgICB0aGlzLnZpZXdwb3J0ID0gdmlld3BvcnQ7XG4gICAgICAgIHRoaXMuc2tpcHBlZCA9IHNraXBwZWQ7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVPbiA9IHNjaGVkdWxlT247XG4gICAgICAgIHRoaXMucGFyc2UgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgQGludGVybmFsXG4gICAgICAgICovXG4gICAgICAgIHRoaXMudGVtcFNraXBwZWQgPSBbXTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKHBhcnNlciwgc3RhdGUsIHZpZXdwb3J0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUGFyc2VDb250ZXh0KHBhcnNlciwgc3RhdGUsIFtdLCBUcmVlLmVtcHR5LCAwLCB2aWV3cG9ydCwgW10sIG51bGwpO1xuICAgIH1cbiAgICBzdGFydFBhcnNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZXIuc3RhcnRQYXJzZShuZXcgRG9jSW5wdXQodGhpcy5zdGF0ZS5kb2MpLCB0aGlzLmZyYWdtZW50cyk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgd29yayh1bnRpbCwgdXB0bykge1xuICAgICAgICBpZiAodXB0byAhPSBudWxsICYmIHVwdG8gPj0gdGhpcy5zdGF0ZS5kb2MubGVuZ3RoKVxuICAgICAgICAgICAgdXB0byA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHRoaXMudHJlZSAhPSBUcmVlLmVtcHR5ICYmIHRoaXMuaXNEb25lKHVwdG8gIT09IG51bGwgJiYgdXB0byAhPT0gdm9pZCAwID8gdXB0byA6IHRoaXMuc3RhdGUuZG9jLmxlbmd0aCkpIHtcbiAgICAgICAgICAgIHRoaXMudGFrZVRyZWUoKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhDb250ZXh0KCgpID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdW50aWwgPT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgIGxldCBlbmRUaW1lID0gRGF0ZS5ub3coKSArIHVudGlsO1xuICAgICAgICAgICAgICAgIHVudGlsID0gKCkgPT4gRGF0ZS5ub3coKSA+IGVuZFRpbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMucGFyc2UpXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJzZSA9IHRoaXMuc3RhcnRQYXJzZSgpO1xuICAgICAgICAgICAgaWYgKHVwdG8gIT0gbnVsbCAmJiAodGhpcy5wYXJzZS5zdG9wcGVkQXQgPT0gbnVsbCB8fCB0aGlzLnBhcnNlLnN0b3BwZWRBdCA+IHVwdG8pICYmXG4gICAgICAgICAgICAgICAgdXB0byA8IHRoaXMuc3RhdGUuZG9jLmxlbmd0aClcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlLnN0b3BBdCh1cHRvKTtcbiAgICAgICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgICAgICBsZXQgZG9uZSA9IHRoaXMucGFyc2UuYWR2YW5jZSgpO1xuICAgICAgICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZnJhZ21lbnRzID0gdGhpcy53aXRob3V0VGVtcFNraXBwZWQoVHJlZUZyYWdtZW50LmFkZFRyZWUoZG9uZSwgdGhpcy5mcmFnbWVudHMsIHRoaXMucGFyc2Uuc3RvcHBlZEF0ICE9IG51bGwpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmVlTGVuID0gKF9hID0gdGhpcy5wYXJzZS5zdG9wcGVkQXQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHRoaXMuc3RhdGUuZG9jLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmVlID0gZG9uZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRyZWVMZW4gPCAodXB0byAhPT0gbnVsbCAmJiB1cHRvICE9PSB2b2lkIDAgPyB1cHRvIDogdGhpcy5zdGF0ZS5kb2MubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyc2UgPSB0aGlzLnN0YXJ0UGFyc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh1bnRpbCgpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHRha2VUcmVlKCkge1xuICAgICAgICBsZXQgcG9zLCB0cmVlO1xuICAgICAgICBpZiAodGhpcy5wYXJzZSAmJiAocG9zID0gdGhpcy5wYXJzZS5wYXJzZWRQb3MpID49IHRoaXMudHJlZUxlbikge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyc2Uuc3RvcHBlZEF0ID09IG51bGwgfHwgdGhpcy5wYXJzZS5zdG9wcGVkQXQgPiBwb3MpXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJzZS5zdG9wQXQocG9zKTtcbiAgICAgICAgICAgIHRoaXMud2l0aENvbnRleHQoKCkgPT4geyB3aGlsZSAoISh0cmVlID0gdGhpcy5wYXJzZS5hZHZhbmNlKCkpKSB7IH0gfSk7XG4gICAgICAgICAgICB0aGlzLnRyZWVMZW4gPSBwb3M7XG4gICAgICAgICAgICB0aGlzLnRyZWUgPSB0cmVlO1xuICAgICAgICAgICAgdGhpcy5mcmFnbWVudHMgPSB0aGlzLndpdGhvdXRUZW1wU2tpcHBlZChUcmVlRnJhZ21lbnQuYWRkVHJlZSh0aGlzLnRyZWUsIHRoaXMuZnJhZ21lbnRzLCB0cnVlKSk7XG4gICAgICAgICAgICB0aGlzLnBhcnNlID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3aXRoQ29udGV4dChmKSB7XG4gICAgICAgIGxldCBwcmV2ID0gY3VycmVudENvbnRleHQ7XG4gICAgICAgIGN1cnJlbnRDb250ZXh0ID0gdGhpcztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBmKCk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBjdXJyZW50Q29udGV4dCA9IHByZXY7XG4gICAgICAgIH1cbiAgICB9XG4gICAgd2l0aG91dFRlbXBTa2lwcGVkKGZyYWdtZW50cykge1xuICAgICAgICBmb3IgKGxldCByOyByID0gdGhpcy50ZW1wU2tpcHBlZC5wb3AoKTspXG4gICAgICAgICAgICBmcmFnbWVudHMgPSBjdXRGcmFnbWVudHMoZnJhZ21lbnRzLCByLmZyb20sIHIudG8pO1xuICAgICAgICByZXR1cm4gZnJhZ21lbnRzO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNoYW5nZXMoY2hhbmdlcywgbmV3U3RhdGUpIHtcbiAgICAgICAgbGV0IHsgZnJhZ21lbnRzLCB0cmVlLCB0cmVlTGVuLCB2aWV3cG9ydCwgc2tpcHBlZCB9ID0gdGhpcztcbiAgICAgICAgdGhpcy50YWtlVHJlZSgpO1xuICAgICAgICBpZiAoIWNoYW5nZXMuZW1wdHkpIHtcbiAgICAgICAgICAgIGxldCByYW5nZXMgPSBbXTtcbiAgICAgICAgICAgIGNoYW5nZXMuaXRlckNoYW5nZWRSYW5nZXMoKGZyb21BLCB0b0EsIGZyb21CLCB0b0IpID0+IHJhbmdlcy5wdXNoKHsgZnJvbUEsIHRvQSwgZnJvbUIsIHRvQiB9KSk7XG4gICAgICAgICAgICBmcmFnbWVudHMgPSBUcmVlRnJhZ21lbnQuYXBwbHlDaGFuZ2VzKGZyYWdtZW50cywgcmFuZ2VzKTtcbiAgICAgICAgICAgIHRyZWUgPSBUcmVlLmVtcHR5O1xuICAgICAgICAgICAgdHJlZUxlbiA9IDA7XG4gICAgICAgICAgICB2aWV3cG9ydCA9IHsgZnJvbTogY2hhbmdlcy5tYXBQb3Modmlld3BvcnQuZnJvbSwgLTEpLCB0bzogY2hhbmdlcy5tYXBQb3Modmlld3BvcnQudG8sIDEpIH07XG4gICAgICAgICAgICBpZiAodGhpcy5za2lwcGVkLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHNraXBwZWQgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCByIG9mIHRoaXMuc2tpcHBlZCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZnJvbSA9IGNoYW5nZXMubWFwUG9zKHIuZnJvbSwgMSksIHRvID0gY2hhbmdlcy5tYXBQb3Moci50bywgLTEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZnJvbSA8IHRvKVxuICAgICAgICAgICAgICAgICAgICAgICAgc2tpcHBlZC5wdXNoKHsgZnJvbSwgdG8gfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUGFyc2VDb250ZXh0KHRoaXMucGFyc2VyLCBuZXdTdGF0ZSwgZnJhZ21lbnRzLCB0cmVlLCB0cmVlTGVuLCB2aWV3cG9ydCwgc2tpcHBlZCwgdGhpcy5zY2hlZHVsZU9uKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICB1cGRhdGVWaWV3cG9ydCh2aWV3cG9ydCkge1xuICAgICAgICBpZiAodGhpcy52aWV3cG9ydC5mcm9tID09IHZpZXdwb3J0LmZyb20gJiYgdGhpcy52aWV3cG9ydC50byA9PSB2aWV3cG9ydC50bylcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdGhpcy52aWV3cG9ydCA9IHZpZXdwb3J0O1xuICAgICAgICBsZXQgc3RhcnRMZW4gPSB0aGlzLnNraXBwZWQubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2tpcHBlZC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHsgZnJvbSwgdG8gfSA9IHRoaXMuc2tpcHBlZFtpXTtcbiAgICAgICAgICAgIGlmIChmcm9tIDwgdmlld3BvcnQudG8gJiYgdG8gPiB2aWV3cG9ydC5mcm9tKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mcmFnbWVudHMgPSBjdXRGcmFnbWVudHModGhpcy5mcmFnbWVudHMsIGZyb20sIHRvKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNraXBwZWQuc3BsaWNlKGktLSwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc2tpcHBlZC5sZW5ndGggPj0gc3RhcnRMZW4pXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIGlmICh0aGlzLnBhcnNlKSB7XG4gICAgICAgICAgICB0aGlzLnRha2VUcmVlKCk7XG4gICAgICAgICAgICB0aGlzLnBhcnNlID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBOb3RpZnkgdGhlIHBhcnNlIHNjaGVkdWxlciB0aGF0IHRoZSBnaXZlbiByZWdpb24gd2FzIHNraXBwZWRcbiAgICBiZWNhdXNlIGl0IHdhc24ndCBpbiB2aWV3LCBhbmQgdGhlIHBhcnNlIHNob3VsZCBiZSByZXN0YXJ0ZWRcbiAgICB3aGVuIGl0IGNvbWVzIGludG8gdmlldy5cbiAgICAqL1xuICAgIHNraXBVbnRpbEluVmlldyhmcm9tLCB0bykge1xuICAgICAgICB0aGlzLnNraXBwZWQucHVzaCh7IGZyb20sIHRvIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm5zIGEgcGFyc2VyIGludGVuZGVkIHRvIGJlIHVzZWQgYXMgcGxhY2Vob2xkZXIgd2hlblxuICAgIGFzeW5jaHJvbm91c2x5IGxvYWRpbmcgYSBuZXN0ZWQgcGFyc2VyLiBJdCdsbCBza2lwIGl0cyBpbnB1dCBhbmRcbiAgICBtYXJrIGl0IGFzIG5vdC1yZWFsbHktcGFyc2VkLCBzbyB0aGF0IHRoZSBuZXh0IHVwZGF0ZSB3aWxsIHBhcnNlXG4gICAgaXQgYWdhaW4uXG4gICAgXG4gICAgV2hlbiBgdW50aWxgIGlzIGdpdmVuLCBhIHJlcGFyc2Ugd2lsbCBiZSBzY2hlZHVsZWQgd2hlbiB0aGF0XG4gICAgcHJvbWlzZSByZXNvbHZlcy5cbiAgICAqL1xuICAgIHN0YXRpYyBnZXRTa2lwcGluZ1BhcnNlcih1bnRpbCkge1xuICAgICAgICByZXR1cm4gbmV3IGNsYXNzIGV4dGVuZHMgUGFyc2VyIHtcbiAgICAgICAgICAgIGNyZWF0ZVBhcnNlKGlucHV0LCBmcmFnbWVudHMsIHJhbmdlcykge1xuICAgICAgICAgICAgICAgIGxldCBmcm9tID0gcmFuZ2VzWzBdLmZyb20sIHRvID0gcmFuZ2VzW3Jhbmdlcy5sZW5ndGggLSAxXS50bztcbiAgICAgICAgICAgICAgICBsZXQgcGFyc2VyID0ge1xuICAgICAgICAgICAgICAgICAgICBwYXJzZWRQb3M6IGZyb20sXG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2UoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY3ggPSBjdXJyZW50Q29udGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHIgb2YgcmFuZ2VzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjeC50ZW1wU2tpcHBlZC5wdXNoKHIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1bnRpbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3guc2NoZWR1bGVPbiA9IGN4LnNjaGVkdWxlT24gPyBQcm9taXNlLmFsbChbY3guc2NoZWR1bGVPbiwgdW50aWxdKSA6IHVudGlsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZWRQb3MgPSB0bztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVHJlZShOb2RlVHlwZS5ub25lLCBbXSwgW10sIHRvIC0gZnJvbSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHN0b3BwZWRBdDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgc3RvcEF0KCkgeyB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGlzRG9uZSh1cHRvKSB7XG4gICAgICAgIHVwdG8gPSBNYXRoLm1pbih1cHRvLCB0aGlzLnN0YXRlLmRvYy5sZW5ndGgpO1xuICAgICAgICBsZXQgZnJhZ3MgPSB0aGlzLmZyYWdtZW50cztcbiAgICAgICAgcmV0dXJuIHRoaXMudHJlZUxlbiA+PSB1cHRvICYmIGZyYWdzLmxlbmd0aCAmJiBmcmFnc1swXS5mcm9tID09IDAgJiYgZnJhZ3NbMF0udG8gPj0gdXB0bztcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSBjb250ZXh0IGZvciB0aGUgY3VycmVudCBwYXJzZSwgb3IgYG51bGxgIGlmIG5vIGVkaXRvclxuICAgIHBhcnNlIGlzIGluIHByb2dyZXNzLlxuICAgICovXG4gICAgc3RhdGljIGdldCgpIHsgcmV0dXJuIGN1cnJlbnRDb250ZXh0OyB9XG59XG5mdW5jdGlvbiBjdXRGcmFnbWVudHMoZnJhZ21lbnRzLCBmcm9tLCB0bykge1xuICAgIHJldHVybiBUcmVlRnJhZ21lbnQuYXBwbHlDaGFuZ2VzKGZyYWdtZW50cywgW3sgZnJvbUE6IGZyb20sIHRvQTogdG8sIGZyb21COiBmcm9tLCB0b0I6IHRvIH1dKTtcbn1cbmNsYXNzIExhbmd1YWdlU3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8vIEEgbXV0YWJsZSBwYXJzZSBzdGF0ZSB0aGF0IGlzIHVzZWQgdG8gcHJlc2VydmUgd29yayBkb25lIGR1cmluZ1xuICAgIC8vIHRoZSBsaWZldGltZSBvZiBhIHN0YXRlIHdoZW4gbW92aW5nIHRvIHRoZSBuZXh0IHN0YXRlLlxuICAgIGNvbnRleHQpIHtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgdGhpcy50cmVlID0gY29udGV4dC50cmVlO1xuICAgIH1cbiAgICBhcHBseSh0cikge1xuICAgICAgICBpZiAoIXRyLmRvY0NoYW5nZWQgJiYgdGhpcy50cmVlID09IHRoaXMuY29udGV4dC50cmVlKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIGxldCBuZXdDeCA9IHRoaXMuY29udGV4dC5jaGFuZ2VzKHRyLmNoYW5nZXMsIHRyLnN0YXRlKTtcbiAgICAgICAgLy8gSWYgdGhlIHByZXZpb3VzIHBhcnNlIHdhc24ndCBkb25lLCBnbyBmb3J3YXJkIG9ubHkgdXAgdG8gaXRzXG4gICAgICAgIC8vIGVuZCBwb3NpdGlvbiBvciB0aGUgZW5kIG9mIHRoZSB2aWV3cG9ydCwgdG8gYXZvaWQgc2xvd2luZyBkb3duXG4gICAgICAgIC8vIHN0YXRlIHVwZGF0ZXMgd2l0aCBwYXJzZSB3b3JrIGJleW9uZCB0aGUgdmlld3BvcnQuXG4gICAgICAgIGxldCB1cHRvID0gdGhpcy5jb250ZXh0LnRyZWVMZW4gPT0gdHIuc3RhcnRTdGF0ZS5kb2MubGVuZ3RoID8gdW5kZWZpbmVkXG4gICAgICAgICAgICA6IE1hdGgubWF4KHRyLmNoYW5nZXMubWFwUG9zKHRoaXMuY29udGV4dC50cmVlTGVuKSwgbmV3Q3gudmlld3BvcnQudG8pO1xuICAgICAgICBpZiAoIW5ld0N4LndvcmsoMjAgLyogV29yay5BcHBseSAqLywgdXB0bykpXG4gICAgICAgICAgICBuZXdDeC50YWtlVHJlZSgpO1xuICAgICAgICByZXR1cm4gbmV3IExhbmd1YWdlU3RhdGUobmV3Q3gpO1xuICAgIH1cbiAgICBzdGF0aWMgaW5pdChzdGF0ZSkge1xuICAgICAgICBsZXQgdnBUbyA9IE1hdGgubWluKDMwMDAgLyogV29yay5Jbml0Vmlld3BvcnQgKi8sIHN0YXRlLmRvYy5sZW5ndGgpO1xuICAgICAgICBsZXQgcGFyc2VTdGF0ZSA9IFBhcnNlQ29udGV4dC5jcmVhdGUoc3RhdGUuZmFjZXQobGFuZ3VhZ2UpLnBhcnNlciwgc3RhdGUsIHsgZnJvbTogMCwgdG86IHZwVG8gfSk7XG4gICAgICAgIGlmICghcGFyc2VTdGF0ZS53b3JrKDIwIC8qIFdvcmsuQXBwbHkgKi8sIHZwVG8pKVxuICAgICAgICAgICAgcGFyc2VTdGF0ZS50YWtlVHJlZSgpO1xuICAgICAgICByZXR1cm4gbmV3IExhbmd1YWdlU3RhdGUocGFyc2VTdGF0ZSk7XG4gICAgfVxufVxuTGFuZ3VhZ2Uuc3RhdGUgPSAvKkBfX1BVUkVfXyovU3RhdGVGaWVsZC5kZWZpbmUoe1xuICAgIGNyZWF0ZTogTGFuZ3VhZ2VTdGF0ZS5pbml0LFxuICAgIHVwZGF0ZSh2YWx1ZSwgdHIpIHtcbiAgICAgICAgZm9yIChsZXQgZSBvZiB0ci5lZmZlY3RzKVxuICAgICAgICAgICAgaWYgKGUuaXMoTGFuZ3VhZ2Uuc2V0U3RhdGUpKVxuICAgICAgICAgICAgICAgIHJldHVybiBlLnZhbHVlO1xuICAgICAgICBpZiAodHIuc3RhcnRTdGF0ZS5mYWNldChsYW5ndWFnZSkgIT0gdHIuc3RhdGUuZmFjZXQobGFuZ3VhZ2UpKVxuICAgICAgICAgICAgcmV0dXJuIExhbmd1YWdlU3RhdGUuaW5pdCh0ci5zdGF0ZSk7XG4gICAgICAgIHJldHVybiB2YWx1ZS5hcHBseSh0cik7XG4gICAgfVxufSk7XG5sZXQgcmVxdWVzdElkbGUgPSAoY2FsbGJhY2spID0+IHtcbiAgICBsZXQgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gY2FsbGJhY2soKSwgNTAwIC8qIFdvcmsuTWF4UGF1c2UgKi8pO1xuICAgIHJldHVybiAoKSA9PiBjbGVhclRpbWVvdXQodGltZW91dCk7XG59O1xuaWYgKHR5cGVvZiByZXF1ZXN0SWRsZUNhbGxiYWNrICE9IFwidW5kZWZpbmVkXCIpXG4gICAgcmVxdWVzdElkbGUgPSAoY2FsbGJhY2spID0+IHtcbiAgICAgICAgbGV0IGlkbGUgPSAtMSwgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaWRsZSA9IHJlcXVlc3RJZGxlQ2FsbGJhY2soY2FsbGJhY2ssIHsgdGltZW91dDogNTAwIC8qIFdvcmsuTWF4UGF1c2UgKi8gLSAxMDAgLyogV29yay5NaW5QYXVzZSAqLyB9KTtcbiAgICAgICAgfSwgMTAwIC8qIFdvcmsuTWluUGF1c2UgKi8pO1xuICAgICAgICByZXR1cm4gKCkgPT4gaWRsZSA8IDAgPyBjbGVhclRpbWVvdXQodGltZW91dCkgOiBjYW5jZWxJZGxlQ2FsbGJhY2soaWRsZSk7XG4gICAgfTtcbmNvbnN0IGlzSW5wdXRQZW5kaW5nID0gdHlwZW9mIG5hdmlnYXRvciAhPSBcInVuZGVmaW5lZFwiICYmICgoX2EgPSBuYXZpZ2F0b3Iuc2NoZWR1bGluZykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmlzSW5wdXRQZW5kaW5nKVxuICAgID8gKCkgPT4gbmF2aWdhdG9yLnNjaGVkdWxpbmcuaXNJbnB1dFBlbmRpbmcoKSA6IG51bGw7XG5jb25zdCBwYXJzZVdvcmtlciA9IC8qQF9fUFVSRV9fKi9WaWV3UGx1Z2luLmZyb21DbGFzcyhjbGFzcyBQYXJzZVdvcmtlciB7XG4gICAgY29uc3RydWN0b3Iodmlldykge1xuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgICAgICB0aGlzLndvcmtpbmcgPSBudWxsO1xuICAgICAgICB0aGlzLndvcmtTY2hlZHVsZWQgPSAwO1xuICAgICAgICAvLyBFbmQgb2YgdGhlIGN1cnJlbnQgdGltZSBjaHVua1xuICAgICAgICB0aGlzLmNodW5rRW5kID0gLTE7XG4gICAgICAgIC8vIE1pbGxpc2Vjb25kcyBvZiBidWRnZXQgbGVmdCBmb3IgdGhpcyBjaHVua1xuICAgICAgICB0aGlzLmNodW5rQnVkZ2V0ID0gLTE7XG4gICAgICAgIHRoaXMud29yayA9IHRoaXMud29yay5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNjaGVkdWxlV29yaygpO1xuICAgIH1cbiAgICB1cGRhdGUodXBkYXRlKSB7XG4gICAgICAgIGxldCBjeCA9IHRoaXMudmlldy5zdGF0ZS5maWVsZChMYW5ndWFnZS5zdGF0ZSkuY29udGV4dDtcbiAgICAgICAgaWYgKGN4LnVwZGF0ZVZpZXdwb3J0KHVwZGF0ZS52aWV3LnZpZXdwb3J0KSB8fCB0aGlzLnZpZXcudmlld3BvcnQudG8gPiBjeC50cmVlTGVuKVxuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZVdvcmsoKTtcbiAgICAgICAgaWYgKHVwZGF0ZS5kb2NDaGFuZ2VkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy52aWV3Lmhhc0ZvY3VzKVxuICAgICAgICAgICAgICAgIHRoaXMuY2h1bmtCdWRnZXQgKz0gNTAgLyogV29yay5DaGFuZ2VCb251cyAqLztcbiAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVXb3JrKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jaGVja0FzeW5jU2NoZWR1bGUoY3gpO1xuICAgIH1cbiAgICBzY2hlZHVsZVdvcmsoKSB7XG4gICAgICAgIGlmICh0aGlzLndvcmtpbmcpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCB7IHN0YXRlIH0gPSB0aGlzLnZpZXcsIGZpZWxkID0gc3RhdGUuZmllbGQoTGFuZ3VhZ2Uuc3RhdGUpO1xuICAgICAgICBpZiAoZmllbGQudHJlZSAhPSBmaWVsZC5jb250ZXh0LnRyZWUgfHwgIWZpZWxkLmNvbnRleHQuaXNEb25lKHN0YXRlLmRvYy5sZW5ndGgpKVxuICAgICAgICAgICAgdGhpcy53b3JraW5nID0gcmVxdWVzdElkbGUodGhpcy53b3JrKTtcbiAgICB9XG4gICAgd29yayhkZWFkbGluZSkge1xuICAgICAgICB0aGlzLndvcmtpbmcgPSBudWxsO1xuICAgICAgICBsZXQgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgaWYgKHRoaXMuY2h1bmtFbmQgPCBub3cgJiYgKHRoaXMuY2h1bmtFbmQgPCAwIHx8IHRoaXMudmlldy5oYXNGb2N1cykpIHsgLy8gU3RhcnQgYSBuZXcgY2h1bmtcbiAgICAgICAgICAgIHRoaXMuY2h1bmtFbmQgPSBub3cgKyAzMDAwMCAvKiBXb3JrLkNodW5rVGltZSAqLztcbiAgICAgICAgICAgIHRoaXMuY2h1bmtCdWRnZXQgPSAzMDAwIC8qIFdvcmsuQ2h1bmtCdWRnZXQgKi87XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY2h1bmtCdWRnZXQgPD0gMClcbiAgICAgICAgICAgIHJldHVybjsgLy8gTm8gbW9yZSBidWRnZXRcbiAgICAgICAgbGV0IHsgc3RhdGUsIHZpZXdwb3J0OiB7IHRvOiB2cFRvIH0gfSA9IHRoaXMudmlldywgZmllbGQgPSBzdGF0ZS5maWVsZChMYW5ndWFnZS5zdGF0ZSk7XG4gICAgICAgIGlmIChmaWVsZC50cmVlID09IGZpZWxkLmNvbnRleHQudHJlZSAmJiBmaWVsZC5jb250ZXh0LmlzRG9uZSh2cFRvICsgMTAwMDAwIC8qIFdvcmsuTWF4UGFyc2VBaGVhZCAqLykpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCBlbmRUaW1lID0gRGF0ZS5ub3coKSArIE1hdGgubWluKHRoaXMuY2h1bmtCdWRnZXQsIDEwMCAvKiBXb3JrLlNsaWNlICovLCBkZWFkbGluZSAmJiAhaXNJbnB1dFBlbmRpbmcgPyBNYXRoLm1heCgyNSAvKiBXb3JrLk1pblNsaWNlICovLCBkZWFkbGluZS50aW1lUmVtYWluaW5nKCkgLSA1KSA6IDFlOSk7XG4gICAgICAgIGxldCB2aWV3cG9ydEZpcnN0ID0gZmllbGQuY29udGV4dC50cmVlTGVuIDwgdnBUbyAmJiBzdGF0ZS5kb2MubGVuZ3RoID4gdnBUbyArIDEwMDA7XG4gICAgICAgIGxldCBkb25lID0gZmllbGQuY29udGV4dC53b3JrKCgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBpc0lucHV0UGVuZGluZyAmJiBpc0lucHV0UGVuZGluZygpIHx8IERhdGUubm93KCkgPiBlbmRUaW1lO1xuICAgICAgICB9LCB2cFRvICsgKHZpZXdwb3J0Rmlyc3QgPyAwIDogMTAwMDAwIC8qIFdvcmsuTWF4UGFyc2VBaGVhZCAqLykpO1xuICAgICAgICB0aGlzLmNodW5rQnVkZ2V0IC09IERhdGUubm93KCkgLSBub3c7XG4gICAgICAgIGlmIChkb25lIHx8IHRoaXMuY2h1bmtCdWRnZXQgPD0gMCkge1xuICAgICAgICAgICAgZmllbGQuY29udGV4dC50YWtlVHJlZSgpO1xuICAgICAgICAgICAgdGhpcy52aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogTGFuZ3VhZ2Uuc2V0U3RhdGUub2YobmV3IExhbmd1YWdlU3RhdGUoZmllbGQuY29udGV4dCkpIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNodW5rQnVkZ2V0ID4gMCAmJiAhKGRvbmUgJiYgIXZpZXdwb3J0Rmlyc3QpKVxuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZVdvcmsoKTtcbiAgICAgICAgdGhpcy5jaGVja0FzeW5jU2NoZWR1bGUoZmllbGQuY29udGV4dCk7XG4gICAgfVxuICAgIGNoZWNrQXN5bmNTY2hlZHVsZShjeCkge1xuICAgICAgICBpZiAoY3guc2NoZWR1bGVPbikge1xuICAgICAgICAgICAgdGhpcy53b3JrU2NoZWR1bGVkKys7XG4gICAgICAgICAgICBjeC5zY2hlZHVsZU9uXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy5zY2hlZHVsZVdvcmsoKSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IGxvZ0V4Y2VwdGlvbih0aGlzLnZpZXcuc3RhdGUsIGVycikpXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy53b3JrU2NoZWR1bGVkLS0pO1xuICAgICAgICAgICAgY3guc2NoZWR1bGVPbiA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgaWYgKHRoaXMud29ya2luZylcbiAgICAgICAgICAgIHRoaXMud29ya2luZygpO1xuICAgIH1cbiAgICBpc1dvcmtpbmcoKSB7XG4gICAgICAgIHJldHVybiAhISh0aGlzLndvcmtpbmcgfHwgdGhpcy53b3JrU2NoZWR1bGVkID4gMCk7XG4gICAgfVxufSwge1xuICAgIGV2ZW50SGFuZGxlcnM6IHsgZm9jdXMoKSB7IHRoaXMuc2NoZWR1bGVXb3JrKCk7IH0gfVxufSk7XG4vKipcblRoZSBmYWNldCB1c2VkIHRvIGFzc29jaWF0ZSBhIGxhbmd1YWdlIHdpdGggYW4gZWRpdG9yIHN0YXRlLiBVc2VkXG5ieSBgTGFuZ3VhZ2VgIG9iamVjdCdzIGBleHRlbnNpb25gIHByb3BlcnR5IChzbyB5b3UgZG9uJ3QgbmVlZCB0b1xubWFudWFsbHkgd3JhcCB5b3VyIGxhbmd1YWdlcyBpbiB0aGlzKS4gQ2FuIGJlIHVzZWQgdG8gYWNjZXNzIHRoZVxuY3VycmVudCBsYW5ndWFnZSBvbiBhIHN0YXRlLlxuKi9cbmNvbnN0IGxhbmd1YWdlID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgY29tYmluZShsYW5ndWFnZXMpIHsgcmV0dXJuIGxhbmd1YWdlcy5sZW5ndGggPyBsYW5ndWFnZXNbMF0gOiBudWxsOyB9LFxuICAgIGVuYWJsZXM6IGxhbmd1YWdlID0+IFtcbiAgICAgICAgTGFuZ3VhZ2Uuc3RhdGUsXG4gICAgICAgIHBhcnNlV29ya2VyLFxuICAgICAgICBFZGl0b3JWaWV3LmNvbnRlbnRBdHRyaWJ1dGVzLmNvbXB1dGUoW2xhbmd1YWdlXSwgc3RhdGUgPT4ge1xuICAgICAgICAgICAgbGV0IGxhbmcgPSBzdGF0ZS5mYWNldChsYW5ndWFnZSk7XG4gICAgICAgICAgICByZXR1cm4gbGFuZyAmJiBsYW5nLm5hbWUgPyB7IFwiZGF0YS1sYW5ndWFnZVwiOiBsYW5nLm5hbWUgfSA6IHt9O1xuICAgICAgICB9KVxuICAgIF1cbn0pO1xuLyoqXG5UaGlzIGNsYXNzIGJ1bmRsZXMgYSBbbGFuZ3VhZ2VdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuTGFuZ3VhZ2UpIHdpdGggYW5cbm9wdGlvbmFsIHNldCBvZiBzdXBwb3J0aW5nIGV4dGVuc2lvbnMuIExhbmd1YWdlIHBhY2thZ2VzIGFyZVxuZW5jb3VyYWdlZCB0byBleHBvcnQgYSBmdW5jdGlvbiB0aGF0IG9wdGlvbmFsbHkgdGFrZXMgYVxuY29uZmlndXJhdGlvbiBvYmplY3QgYW5kIHJldHVybnMgYSBgTGFuZ3VhZ2VTdXBwb3J0YCBpbnN0YW5jZSwgYXNcbnRoZSBtYWluIHdheSBmb3IgY2xpZW50IGNvZGUgdG8gdXNlIHRoZSBwYWNrYWdlLlxuKi9cbmNsYXNzIExhbmd1YWdlU3VwcG9ydCB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgbGFuZ3VhZ2Ugc3VwcG9ydCBvYmplY3QuXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgbGFuZ3VhZ2Ugb2JqZWN0LlxuICAgICovXG4gICAgbGFuZ3VhZ2UsIFxuICAgIC8qKlxuICAgIEFuIG9wdGlvbmFsIHNldCBvZiBzdXBwb3J0aW5nIGV4dGVuc2lvbnMuIFdoZW4gbmVzdGluZyBhXG4gICAgbGFuZ3VhZ2UgaW4gYW5vdGhlciBsYW5ndWFnZSwgdGhlIG91dGVyIGxhbmd1YWdlIGlzIGVuY291cmFnZWRcbiAgICB0byBpbmNsdWRlIHRoZSBzdXBwb3J0aW5nIGV4dGVuc2lvbnMgZm9yIGl0cyBpbm5lciBsYW5ndWFnZXNcbiAgICBpbiBpdHMgb3duIHNldCBvZiBzdXBwb3J0IGV4dGVuc2lvbnMuXG4gICAgKi9cbiAgICBzdXBwb3J0ID0gW10pIHtcbiAgICAgICAgdGhpcy5sYW5ndWFnZSA9IGxhbmd1YWdlO1xuICAgICAgICB0aGlzLnN1cHBvcnQgPSBzdXBwb3J0O1xuICAgICAgICB0aGlzLmV4dGVuc2lvbiA9IFtsYW5ndWFnZSwgc3VwcG9ydF07XG4gICAgfVxufVxuLyoqXG5MYW5ndWFnZSBkZXNjcmlwdGlvbnMgYXJlIHVzZWQgdG8gc3RvcmUgbWV0YWRhdGEgYWJvdXQgbGFuZ3VhZ2VzXG5hbmQgdG8gZHluYW1pY2FsbHkgbG9hZCB0aGVtLiBUaGVpciBtYWluIHJvbGUgaXMgZmluZGluZyB0aGVcbmFwcHJvcHJpYXRlIGxhbmd1YWdlIGZvciBhIGZpbGVuYW1lIG9yIGR5bmFtaWNhbGx5IGxvYWRpbmcgbmVzdGVkXG5wYXJzZXJzLlxuKi9cbmNsYXNzIExhbmd1YWdlRGVzY3JpcHRpb24ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBuYW1lIG9mIHRoaXMgbGFuZ3VhZ2UuXG4gICAgKi9cbiAgICBuYW1lLCBcbiAgICAvKipcbiAgICBBbHRlcm5hdGl2ZSBuYW1lcyBmb3IgdGhlIG1vZGUgKGxvd2VyY2FzZWQsIGluY2x1ZGVzIGB0aGlzLm5hbWVgKS5cbiAgICAqL1xuICAgIGFsaWFzLCBcbiAgICAvKipcbiAgICBGaWxlIGV4dGVuc2lvbnMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgbGFuZ3VhZ2UuXG4gICAgKi9cbiAgICBleHRlbnNpb25zLCBcbiAgICAvKipcbiAgICBPcHRpb25hbCBmaWxlbmFtZSBwYXR0ZXJuIHRoYXQgc2hvdWxkIGJlIGFzc29jaWF0ZWQgd2l0aCB0aGlzXG4gICAgbGFuZ3VhZ2UuXG4gICAgKi9cbiAgICBmaWxlbmFtZSwgbG9hZEZ1bmMsIFxuICAgIC8qKlxuICAgIElmIHRoZSBsYW5ndWFnZSBoYXMgYmVlbiBsb2FkZWQsIHRoaXMgd2lsbCBob2xkIGl0cyB2YWx1ZS5cbiAgICAqL1xuICAgIHN1cHBvcnQgPSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5hbGlhcyA9IGFsaWFzO1xuICAgICAgICB0aGlzLmV4dGVuc2lvbnMgPSBleHRlbnNpb25zO1xuICAgICAgICB0aGlzLmZpbGVuYW1lID0gZmlsZW5hbWU7XG4gICAgICAgIHRoaXMubG9hZEZ1bmMgPSBsb2FkRnVuYztcbiAgICAgICAgdGhpcy5zdXBwb3J0ID0gc3VwcG9ydDtcbiAgICAgICAgdGhpcy5sb2FkaW5nID0gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgU3RhcnQgbG9hZGluZyB0aGUgdGhlIGxhbmd1YWdlLiBXaWxsIHJldHVybiBhIHByb21pc2UgdGhhdFxuICAgIHJlc29sdmVzIHRvIGEgW2BMYW5ndWFnZVN1cHBvcnRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLkxhbmd1YWdlU3VwcG9ydClcbiAgICBvYmplY3Qgd2hlbiB0aGUgbGFuZ3VhZ2Ugc3VjY2Vzc2Z1bGx5IGxvYWRzLlxuICAgICovXG4gICAgbG9hZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9hZGluZyB8fCAodGhpcy5sb2FkaW5nID0gdGhpcy5sb2FkRnVuYygpLnRoZW4oc3VwcG9ydCA9PiB0aGlzLnN1cHBvcnQgPSBzdXBwb3J0LCBlcnIgPT4geyB0aGlzLmxvYWRpbmcgPSBudWxsOyB0aHJvdyBlcnI7IH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgbGFuZ3VhZ2UgZGVzY3JpcHRpb24uXG4gICAgKi9cbiAgICBzdGF0aWMgb2Yoc3BlYykge1xuICAgICAgICBsZXQgeyBsb2FkLCBzdXBwb3J0IH0gPSBzcGVjO1xuICAgICAgICBpZiAoIWxvYWQpIHtcbiAgICAgICAgICAgIGlmICghc3VwcG9ydClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIk11c3QgcGFzcyBlaXRoZXIgJ2xvYWQnIG9yICdzdXBwb3J0JyB0byBMYW5ndWFnZURlc2NyaXB0aW9uLm9mXCIpO1xuICAgICAgICAgICAgbG9hZCA9ICgpID0+IFByb21pc2UucmVzb2x2ZShzdXBwb3J0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IExhbmd1YWdlRGVzY3JpcHRpb24oc3BlYy5uYW1lLCAoc3BlYy5hbGlhcyB8fCBbXSkuY29uY2F0KHNwZWMubmFtZSkubWFwKHMgPT4gcy50b0xvd2VyQ2FzZSgpKSwgc3BlYy5leHRlbnNpb25zIHx8IFtdLCBzcGVjLmZpbGVuYW1lLCBsb2FkLCBzdXBwb3J0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgTG9vayBmb3IgYSBsYW5ndWFnZSBpbiB0aGUgZ2l2ZW4gYXJyYXkgb2YgZGVzY3JpcHRpb25zIHRoYXRcbiAgICBtYXRjaGVzIHRoZSBmaWxlbmFtZS4gV2lsbCBmaXJzdCBtYXRjaFxuICAgIFtgZmlsZW5hbWVgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLkxhbmd1YWdlRGVzY3JpcHRpb24uZmlsZW5hbWUpIHBhdHRlcm5zLFxuICAgIGFuZCB0aGVuIFtleHRlbnNpb25zXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLkxhbmd1YWdlRGVzY3JpcHRpb24uZXh0ZW5zaW9ucyksXG4gICAgYW5kIHJldHVybiB0aGUgZmlyc3QgbGFuZ3VhZ2UgdGhhdCBtYXRjaGVzLlxuICAgICovXG4gICAgc3RhdGljIG1hdGNoRmlsZW5hbWUoZGVzY3MsIGZpbGVuYW1lKSB7XG4gICAgICAgIGZvciAobGV0IGQgb2YgZGVzY3MpXG4gICAgICAgICAgICBpZiAoZC5maWxlbmFtZSAmJiBkLmZpbGVuYW1lLnRlc3QoZmlsZW5hbWUpKVxuICAgICAgICAgICAgICAgIHJldHVybiBkO1xuICAgICAgICBsZXQgZXh0ID0gL1xcLihbXi5dKykkLy5leGVjKGZpbGVuYW1lKTtcbiAgICAgICAgaWYgKGV4dClcbiAgICAgICAgICAgIGZvciAobGV0IGQgb2YgZGVzY3MpXG4gICAgICAgICAgICAgICAgaWYgKGQuZXh0ZW5zaW9ucy5pbmRleE9mKGV4dFsxXSkgPiAtMSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQ7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICBMb29rIGZvciBhIGxhbmd1YWdlIHdob3NlIG5hbWUgb3IgYWxpYXMgbWF0Y2hlcyB0aGUgdGhlIGdpdmVuXG4gICAgbmFtZSAoY2FzZS1pbnNlbnNpdGl2ZWx5KS4gSWYgYGZ1enp5YCBpcyB0cnVlLCBhbmQgbm8gZGlyZWN0XG4gICAgbWF0Y2hzIGlzIGZvdW5kLCB0aGlzJ2xsIGFsc28gc2VhcmNoIGZvciBhIGxhbmd1YWdlIHdob3NlIG5hbWVcbiAgICBvciBhbGlhcyBvY2N1cnMgaW4gdGhlIHN0cmluZyAoZm9yIG5hbWVzIHNob3J0ZXIgdGhhbiB0aHJlZVxuICAgIGNoYXJhY3RlcnMsIG9ubHkgd2hlbiBzdXJyb3VuZGVkIGJ5IG5vbi13b3JkIGNoYXJhY3RlcnMpLlxuICAgICovXG4gICAgc3RhdGljIG1hdGNoTGFuZ3VhZ2VOYW1lKGRlc2NzLCBuYW1lLCBmdXp6eSA9IHRydWUpIHtcbiAgICAgICAgbmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgZm9yIChsZXQgZCBvZiBkZXNjcylcbiAgICAgICAgICAgIGlmIChkLmFsaWFzLnNvbWUoYSA9PiBhID09IG5hbWUpKVxuICAgICAgICAgICAgICAgIHJldHVybiBkO1xuICAgICAgICBpZiAoZnV6enkpXG4gICAgICAgICAgICBmb3IgKGxldCBkIG9mIGRlc2NzKVxuICAgICAgICAgICAgICAgIGZvciAobGV0IGEgb2YgZC5hbGlhcykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZm91bmQgPSBuYW1lLmluZGV4T2YoYSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmb3VuZCA+IC0xICYmIChhLmxlbmd0aCA+IDIgfHwgIS9cXHcvLnRlc3QobmFtZVtmb3VuZCAtIDFdKSAmJiAhL1xcdy8udGVzdChuYW1lW2ZvdW5kICsgYS5sZW5ndGhdKSkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuLyoqXG5GYWNldCB0aGF0IGRlZmluZXMgYSB3YXkgdG8gcHJvdmlkZSBhIGZ1bmN0aW9uIHRoYXQgY29tcHV0ZXMgdGhlXG5hcHByb3ByaWF0ZSBpbmRlbnRhdGlvbiBkZXB0aCwgYXMgYSBjb2x1bW4gbnVtYmVyIChzZWVcbltgaW5kZW50U3RyaW5nYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5pbmRlbnRTdHJpbmcpKSwgYXQgdGhlIHN0YXJ0IG9mIGEgZ2l2ZW5cbmxpbmUuIEEgcmV0dXJuIHZhbHVlIG9mIGBudWxsYCBpbmRpY2F0ZXMgbm8gaW5kZW50YXRpb24gY2FuIGJlXG5kZXRlcm1pbmVkLCBhbmQgdGhlIGxpbmUgc2hvdWxkIGluaGVyaXQgdGhlIGluZGVudGF0aW9uIG9mIHRoZSBvbmVcbmFib3ZlIGl0LiBBIHJldHVybiB2YWx1ZSBvZiBgdW5kZWZpbmVkYCBkZWZlcnMgdG8gdGhlIG5leHQgaW5kZW50XG5zZXJ2aWNlLlxuKi9cbmNvbnN0IGluZGVudFNlcnZpY2UgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG4vKipcbkZhY2V0IGZvciBvdmVycmlkaW5nIHRoZSB1bml0IGJ5IHdoaWNoIGluZGVudGF0aW9uIGhhcHBlbnMuXG5TaG91bGQgYmUgYSBzdHJpbmcgY29uc2lzdGluZyBlaXRoZXIgZW50aXJlbHkgb2Ygc3BhY2VzIG9yXG5lbnRpcmVseSBvZiB0YWJzLiBXaGVuIG5vdCBzZXQsIHRoaXMgZGVmYXVsdHMgdG8gMiBzcGFjZXMuXG4qL1xuY29uc3QgaW5kZW50VW5pdCA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmU6IHZhbHVlcyA9PiB7XG4gICAgICAgIGlmICghdmFsdWVzLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBcIiAgXCI7XG4gICAgICAgIGlmICghL14oPzogK3xcXHQrKSQvLnRlc3QodmFsdWVzWzBdKSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgaW5kZW50IHVuaXQ6IFwiICsgSlNPTi5zdHJpbmdpZnkodmFsdWVzWzBdKSk7XG4gICAgICAgIHJldHVybiB2YWx1ZXNbMF07XG4gICAgfVxufSk7XG4vKipcblJldHVybiB0aGUgX2NvbHVtbiB3aWR0aF8gb2YgYW4gaW5kZW50IHVuaXQgaW4gdGhlIHN0YXRlLlxuRGV0ZXJtaW5lZCBieSB0aGUgW2BpbmRlbnRVbml0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5pbmRlbnRVbml0KVxuZmFjZXQsIGFuZCBbYHRhYlNpemVgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlXnRhYlNpemUpIHdoZW4gdGhhdFxuY29udGFpbnMgdGFicy5cbiovXG5mdW5jdGlvbiBnZXRJbmRlbnRVbml0KHN0YXRlKSB7XG4gICAgbGV0IHVuaXQgPSBzdGF0ZS5mYWNldChpbmRlbnRVbml0KTtcbiAgICByZXR1cm4gdW5pdC5jaGFyQ29kZUF0KDApID09IDkgPyBzdGF0ZS50YWJTaXplICogdW5pdC5sZW5ndGggOiB1bml0Lmxlbmd0aDtcbn1cbi8qKlxuQ3JlYXRlIGFuIGluZGVudGF0aW9uIHN0cmluZyB0aGF0IGNvdmVycyBjb2x1bW5zIDAgdG8gYGNvbHNgLlxuV2lsbCB1c2UgdGFicyBmb3IgYXMgbXVjaCBvZiB0aGUgY29sdW1ucyBhcyBwb3NzaWJsZSB3aGVuIHRoZVxuW2BpbmRlbnRVbml0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5pbmRlbnRVbml0KSBmYWNldCBjb250YWluc1xudGFicy5cbiovXG5mdW5jdGlvbiBpbmRlbnRTdHJpbmcoc3RhdGUsIGNvbHMpIHtcbiAgICBsZXQgcmVzdWx0ID0gXCJcIiwgdHMgPSBzdGF0ZS50YWJTaXplO1xuICAgIGlmIChzdGF0ZS5mYWNldChpbmRlbnRVbml0KS5jaGFyQ29kZUF0KDApID09IDkpXG4gICAgICAgIHdoaWxlIChjb2xzID49IHRzKSB7XG4gICAgICAgICAgICByZXN1bHQgKz0gXCJcXHRcIjtcbiAgICAgICAgICAgIGNvbHMgLT0gdHM7XG4gICAgICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbHM7IGkrKylcbiAgICAgICAgcmVzdWx0ICs9IFwiIFwiO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG4vKipcbkdldCB0aGUgaW5kZW50YXRpb24sIGFzIGEgY29sdW1uIG51bWJlciwgYXQgdGhlIGdpdmVuIHBvc2l0aW9uLlxuV2lsbCBmaXJzdCBjb25zdWx0IGFueSBbaW5kZW50IHNlcnZpY2VzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLmluZGVudFNlcnZpY2UpXG50aGF0IGFyZSByZWdpc3RlcmVkLCBhbmQgaWYgbm9uZSBvZiB0aG9zZSByZXR1cm4gYW4gaW5kZW50YXRpb24sXG50aGlzIHdpbGwgY2hlY2sgdGhlIHN5bnRheCB0cmVlIGZvciB0aGUgW2luZGVudCBub2RlXG5wcm9wXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLmluZGVudE5vZGVQcm9wKSBhbmQgdXNlIHRoYXQgaWYgZm91bmQuIFJldHVybnMgYVxubnVtYmVyIHdoZW4gYW4gaW5kZW50YXRpb24gY291bGQgYmUgZGV0ZXJtaW5lZCwgYW5kIG51bGxcbm90aGVyd2lzZS5cbiovXG5mdW5jdGlvbiBnZXRJbmRlbnRhdGlvbihjb250ZXh0LCBwb3MpIHtcbiAgICBpZiAoY29udGV4dCBpbnN0YW5jZW9mIEVkaXRvclN0YXRlKVxuICAgICAgICBjb250ZXh0ID0gbmV3IEluZGVudENvbnRleHQoY29udGV4dCk7XG4gICAgZm9yIChsZXQgc2VydmljZSBvZiBjb250ZXh0LnN0YXRlLmZhY2V0KGluZGVudFNlcnZpY2UpKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBzZXJ2aWNlKGNvbnRleHQsIHBvcyk7XG4gICAgICAgIGlmIChyZXN1bHQgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGxldCB0cmVlID0gc3ludGF4VHJlZShjb250ZXh0LnN0YXRlKTtcbiAgICByZXR1cm4gdHJlZSA/IHN5bnRheEluZGVudGF0aW9uKGNvbnRleHQsIHRyZWUsIHBvcykgOiBudWxsO1xufVxuLyoqXG5DcmVhdGUgYSBjaGFuZ2Ugc2V0IHRoYXQgYXV0by1pbmRlbnRzIGFsbCBsaW5lcyB0b3VjaGVkIGJ5IHRoZVxuZ2l2ZW4gZG9jdW1lbnQgcmFuZ2UuXG4qL1xuZnVuY3Rpb24gaW5kZW50UmFuZ2Uoc3RhdGUsIGZyb20sIHRvKSB7XG4gICAgbGV0IHVwZGF0ZWQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIGxldCBjb250ZXh0ID0gbmV3IEluZGVudENvbnRleHQoc3RhdGUsIHsgb3ZlcnJpZGVJbmRlbnRhdGlvbjogc3RhcnQgPT4geyB2YXIgX2E7IHJldHVybiAoX2EgPSB1cGRhdGVkW3N0YXJ0XSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogLTE7IH0gfSk7XG4gICAgbGV0IGNoYW5nZXMgPSBbXTtcbiAgICBmb3IgKGxldCBwb3MgPSBmcm9tOyBwb3MgPD0gdG87KSB7XG4gICAgICAgIGxldCBsaW5lID0gc3RhdGUuZG9jLmxpbmVBdChwb3MpO1xuICAgICAgICBwb3MgPSBsaW5lLnRvICsgMTtcbiAgICAgICAgbGV0IGluZGVudCA9IGdldEluZGVudGF0aW9uKGNvbnRleHQsIGxpbmUuZnJvbSk7XG4gICAgICAgIGlmIChpbmRlbnQgPT0gbnVsbClcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBpZiAoIS9cXFMvLnRlc3QobGluZS50ZXh0KSlcbiAgICAgICAgICAgIGluZGVudCA9IDA7XG4gICAgICAgIGxldCBjdXIgPSAvXlxccyovLmV4ZWMobGluZS50ZXh0KVswXTtcbiAgICAgICAgbGV0IG5vcm0gPSBpbmRlbnRTdHJpbmcoc3RhdGUsIGluZGVudCk7XG4gICAgICAgIGlmIChjdXIgIT0gbm9ybSkge1xuICAgICAgICAgICAgdXBkYXRlZFtsaW5lLmZyb21dID0gaW5kZW50O1xuICAgICAgICAgICAgY2hhbmdlcy5wdXNoKHsgZnJvbTogbGluZS5mcm9tLCB0bzogbGluZS5mcm9tICsgY3VyLmxlbmd0aCwgaW5zZXJ0OiBub3JtIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzdGF0ZS5jaGFuZ2VzKGNoYW5nZXMpO1xufVxuLyoqXG5JbmRlbnRhdGlvbiBjb250ZXh0cyBhcmUgdXNlZCB3aGVuIGNhbGxpbmcgW2luZGVudGF0aW9uXG5zZXJ2aWNlc10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5pbmRlbnRTZXJ2aWNlKS4gVGhleSBwcm92aWRlIGhlbHBlciB1dGlsaXRpZXNcbnVzZWZ1bCBpbiBpbmRlbnRhdGlvbiBsb2dpYywgYW5kIGNhbiBzZWxlY3RpdmVseSBvdmVycmlkZSB0aGVcbmluZGVudGF0aW9uIHJlcG9ydGVkIGZvciBzb21lIGxpbmVzLlxuKi9cbmNsYXNzIEluZGVudENvbnRleHQge1xuICAgIC8qKlxuICAgIENyZWF0ZSBhbiBpbmRlbnQgY29udGV4dC5cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBlZGl0b3Igc3RhdGUuXG4gICAgKi9cbiAgICBzdGF0ZSwgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBvcHRpb25zID0ge30pIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLnVuaXQgPSBnZXRJbmRlbnRVbml0KHN0YXRlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IGEgZGVzY3JpcHRpb24gb2YgdGhlIGxpbmUgYXQgdGhlIGdpdmVuIHBvc2l0aW9uLCB0YWtpbmdcbiAgICBbc2ltdWxhdGVkIGxpbmVcbiAgICBicmVha3NdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuSW5kZW50Q29udGV4dC5jb25zdHJ1Y3Rvcl5vcHRpb25zLnNpbXVsYXRlQnJlYWspXG4gICAgaW50byBhY2NvdW50LiBJZiB0aGVyZSBpcyBzdWNoIGEgYnJlYWsgYXQgYHBvc2AsIHRoZSBgYmlhc2BcbiAgICBhcmd1bWVudCBkZXRlcm1pbmVzIHdoZXRoZXIgdGhlIHBhcnQgb2YgdGhlIGxpbmUgbGluZSBiZWZvcmUgb3JcbiAgICBhZnRlciB0aGUgYnJlYWsgaXMgdXNlZC5cbiAgICAqL1xuICAgIGxpbmVBdChwb3MsIGJpYXMgPSAxKSB7XG4gICAgICAgIGxldCBsaW5lID0gdGhpcy5zdGF0ZS5kb2MubGluZUF0KHBvcyk7XG4gICAgICAgIGxldCB7IHNpbXVsYXRlQnJlYWssIHNpbXVsYXRlRG91YmxlQnJlYWsgfSA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgaWYgKHNpbXVsYXRlQnJlYWsgIT0gbnVsbCAmJiBzaW11bGF0ZUJyZWFrID49IGxpbmUuZnJvbSAmJiBzaW11bGF0ZUJyZWFrIDw9IGxpbmUudG8pIHtcbiAgICAgICAgICAgIGlmIChzaW11bGF0ZURvdWJsZUJyZWFrICYmIHNpbXVsYXRlQnJlYWsgPT0gcG9zKVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHRleHQ6IFwiXCIsIGZyb206IHBvcyB9O1xuICAgICAgICAgICAgZWxzZSBpZiAoYmlhcyA8IDAgPyBzaW11bGF0ZUJyZWFrIDwgcG9zIDogc2ltdWxhdGVCcmVhayA8PSBwb3MpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdGV4dDogbGluZS50ZXh0LnNsaWNlKHNpbXVsYXRlQnJlYWsgLSBsaW5lLmZyb20pLCBmcm9tOiBzaW11bGF0ZUJyZWFrIH07XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdGV4dDogbGluZS50ZXh0LnNsaWNlKDAsIHNpbXVsYXRlQnJlYWsgLSBsaW5lLmZyb20pLCBmcm9tOiBsaW5lLmZyb20gfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGluZTtcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSB0ZXh0IGRpcmVjdGx5IGFmdGVyIGBwb3NgLCBlaXRoZXIgdGhlIGVudGlyZSBsaW5lXG4gICAgb3IgdGhlIG5leHQgMTAwIGNoYXJhY3RlcnMsIHdoaWNoZXZlciBpcyBzaG9ydGVyLlxuICAgICovXG4gICAgdGV4dEFmdGVyUG9zKHBvcywgYmlhcyA9IDEpIHtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zaW11bGF0ZURvdWJsZUJyZWFrICYmIHBvcyA9PSB0aGlzLm9wdGlvbnMuc2ltdWxhdGVCcmVhaylcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICBsZXQgeyB0ZXh0LCBmcm9tIH0gPSB0aGlzLmxpbmVBdChwb3MsIGJpYXMpO1xuICAgICAgICByZXR1cm4gdGV4dC5zbGljZShwb3MgLSBmcm9tLCBNYXRoLm1pbih0ZXh0Lmxlbmd0aCwgcG9zICsgMTAwIC0gZnJvbSkpO1xuICAgIH1cbiAgICAvKipcbiAgICBGaW5kIHRoZSBjb2x1bW4gZm9yIHRoZSBnaXZlbiBwb3NpdGlvbi5cbiAgICAqL1xuICAgIGNvbHVtbihwb3MsIGJpYXMgPSAxKSB7XG4gICAgICAgIGxldCB7IHRleHQsIGZyb20gfSA9IHRoaXMubGluZUF0KHBvcywgYmlhcyk7XG4gICAgICAgIGxldCByZXN1bHQgPSB0aGlzLmNvdW50Q29sdW1uKHRleHQsIHBvcyAtIGZyb20pO1xuICAgICAgICBsZXQgb3ZlcnJpZGUgPSB0aGlzLm9wdGlvbnMub3ZlcnJpZGVJbmRlbnRhdGlvbiA/IHRoaXMub3B0aW9ucy5vdmVycmlkZUluZGVudGF0aW9uKGZyb20pIDogLTE7XG4gICAgICAgIGlmIChvdmVycmlkZSA+IC0xKVxuICAgICAgICAgICAgcmVzdWx0ICs9IG92ZXJyaWRlIC0gdGhpcy5jb3VudENvbHVtbih0ZXh0LCB0ZXh0LnNlYXJjaCgvXFxTfCQvKSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgIEZpbmQgdGhlIGNvbHVtbiBwb3NpdGlvbiAodGFraW5nIHRhYnMgaW50byBhY2NvdW50KSBvZiB0aGUgZ2l2ZW5cbiAgICBwb3NpdGlvbiBpbiB0aGUgZ2l2ZW4gc3RyaW5nLlxuICAgICovXG4gICAgY291bnRDb2x1bW4obGluZSwgcG9zID0gbGluZS5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGNvdW50Q29sdW1uKGxpbmUsIHRoaXMuc3RhdGUudGFiU2l6ZSwgcG9zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgRmluZCB0aGUgaW5kZW50YXRpb24gY29sdW1uIG9mIHRoZSBsaW5lIGF0IHRoZSBnaXZlbiBwb2ludC5cbiAgICAqL1xuICAgIGxpbmVJbmRlbnQocG9zLCBiaWFzID0gMSkge1xuICAgICAgICBsZXQgeyB0ZXh0LCBmcm9tIH0gPSB0aGlzLmxpbmVBdChwb3MsIGJpYXMpO1xuICAgICAgICBsZXQgb3ZlcnJpZGUgPSB0aGlzLm9wdGlvbnMub3ZlcnJpZGVJbmRlbnRhdGlvbjtcbiAgICAgICAgaWYgKG92ZXJyaWRlKSB7XG4gICAgICAgICAgICBsZXQgb3ZlcnJpZGVuID0gb3ZlcnJpZGUoZnJvbSk7XG4gICAgICAgICAgICBpZiAob3ZlcnJpZGVuID4gLTEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG92ZXJyaWRlbjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jb3VudENvbHVtbih0ZXh0LCB0ZXh0LnNlYXJjaCgvXFxTfCQvKSk7XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHVybnMgdGhlIFtzaW11bGF0ZWQgbGluZVxuICAgIGJyZWFrXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLkluZGVudENvbnRleHQuY29uc3RydWN0b3Jeb3B0aW9ucy5zaW11bGF0ZUJyZWFrKVxuICAgIGZvciB0aGlzIGNvbnRleHQsIGlmIGFueS5cbiAgICAqL1xuICAgIGdldCBzaW11bGF0ZWRCcmVhaygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5zaW11bGF0ZUJyZWFrIHx8IG51bGw7XG4gICAgfVxufVxuLyoqXG5BIHN5bnRheCB0cmVlIG5vZGUgcHJvcCB1c2VkIHRvIGFzc29jaWF0ZSBpbmRlbnRhdGlvbiBzdHJhdGVnaWVzXG53aXRoIG5vZGUgdHlwZXMuIFN1Y2ggYSBzdHJhdGVneSBpcyBhIGZ1bmN0aW9uIGZyb20gYW4gaW5kZW50YXRpb25cbmNvbnRleHQgdG8gYSBjb2x1bW4gbnVtYmVyIChzZWUgYWxzb1xuW2BpbmRlbnRTdHJpbmdgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLmluZGVudFN0cmluZykpIG9yIG51bGwsIHdoZXJlIG51bGxcbmluZGljYXRlcyB0aGF0IG5vIGRlZmluaXRpdmUgaW5kZW50YXRpb24gY2FuIGJlIGRldGVybWluZWQuXG4qL1xuY29uc3QgaW5kZW50Tm9kZVByb3AgPSAvKkBfX1BVUkVfXyovbmV3IE5vZGVQcm9wKCk7XG4vLyBDb21wdXRlIHRoZSBpbmRlbnRhdGlvbiBmb3IgYSBnaXZlbiBwb3NpdGlvbiBmcm9tIHRoZSBzeW50YXggdHJlZS5cbmZ1bmN0aW9uIHN5bnRheEluZGVudGF0aW9uKGN4LCBhc3QsIHBvcykge1xuICAgIHJldHVybiBpbmRlbnRGcm9tKGFzdC5yZXNvbHZlSW5uZXIocG9zKS5lbnRlclVuZmluaXNoZWROb2Rlc0JlZm9yZShwb3MpLCBwb3MsIGN4KTtcbn1cbmZ1bmN0aW9uIGlnbm9yZUNsb3NlZChjeCkge1xuICAgIHJldHVybiBjeC5wb3MgPT0gY3gub3B0aW9ucy5zaW11bGF0ZUJyZWFrICYmIGN4Lm9wdGlvbnMuc2ltdWxhdGVEb3VibGVCcmVhaztcbn1cbmZ1bmN0aW9uIGluZGVudFN0cmF0ZWd5KHRyZWUpIHtcbiAgICBsZXQgc3RyYXRlZ3kgPSB0cmVlLnR5cGUucHJvcChpbmRlbnROb2RlUHJvcCk7XG4gICAgaWYgKHN0cmF0ZWd5KVxuICAgICAgICByZXR1cm4gc3RyYXRlZ3k7XG4gICAgbGV0IGZpcnN0ID0gdHJlZS5maXJzdENoaWxkLCBjbG9zZTtcbiAgICBpZiAoZmlyc3QgJiYgKGNsb3NlID0gZmlyc3QudHlwZS5wcm9wKE5vZGVQcm9wLmNsb3NlZEJ5KSkpIHtcbiAgICAgICAgbGV0IGxhc3QgPSB0cmVlLmxhc3RDaGlsZCwgY2xvc2VkID0gbGFzdCAmJiBjbG9zZS5pbmRleE9mKGxhc3QubmFtZSkgPiAtMTtcbiAgICAgICAgcmV0dXJuIGN4ID0+IGRlbGltaXRlZFN0cmF0ZWd5KGN4LCB0cnVlLCAxLCB1bmRlZmluZWQsIGNsb3NlZCAmJiAhaWdub3JlQ2xvc2VkKGN4KSA/IGxhc3QuZnJvbSA6IHVuZGVmaW5lZCk7XG4gICAgfVxuICAgIHJldHVybiB0cmVlLnBhcmVudCA9PSBudWxsID8gdG9wSW5kZW50IDogbnVsbDtcbn1cbmZ1bmN0aW9uIGluZGVudEZyb20obm9kZSwgcG9zLCBiYXNlKSB7XG4gICAgZm9yICg7IG5vZGU7IG5vZGUgPSBub2RlLnBhcmVudCkge1xuICAgICAgICBsZXQgc3RyYXRlZ3kgPSBpbmRlbnRTdHJhdGVneShub2RlKTtcbiAgICAgICAgaWYgKHN0cmF0ZWd5KVxuICAgICAgICAgICAgcmV0dXJuIHN0cmF0ZWd5KFRyZWVJbmRlbnRDb250ZXh0LmNyZWF0ZShiYXNlLCBwb3MsIG5vZGUpKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiB0b3BJbmRlbnQoKSB7IHJldHVybiAwOyB9XG4vKipcbk9iamVjdHMgb2YgdGhpcyB0eXBlIHByb3ZpZGUgY29udGV4dCBpbmZvcm1hdGlvbiBhbmQgaGVscGVyXG5tZXRob2RzIHRvIGluZGVudGF0aW9uIGZ1bmN0aW9ucyByZWdpc3RlcmVkIG9uIHN5bnRheCBub2Rlcy5cbiovXG5jbGFzcyBUcmVlSW5kZW50Q29udGV4dCBleHRlbmRzIEluZGVudENvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yKGJhc2UsIFxuICAgIC8qKlxuICAgIFRoZSBwb3NpdGlvbiBhdCB3aGljaCBpbmRlbnRhdGlvbiBpcyBiZWluZyBjb21wdXRlZC5cbiAgICAqL1xuICAgIHBvcywgXG4gICAgLyoqXG4gICAgVGhlIHN5bnRheCB0cmVlIG5vZGUgdG8gd2hpY2ggdGhlIGluZGVudGF0aW9uIHN0cmF0ZWd5XG4gICAgYXBwbGllcy5cbiAgICAqL1xuICAgIG5vZGUpIHtcbiAgICAgICAgc3VwZXIoYmFzZS5zdGF0ZSwgYmFzZS5vcHRpb25zKTtcbiAgICAgICAgdGhpcy5iYXNlID0gYmFzZTtcbiAgICAgICAgdGhpcy5wb3MgPSBwb3M7XG4gICAgICAgIHRoaXMubm9kZSA9IG5vZGU7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShiYXNlLCBwb3MsIG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmVlSW5kZW50Q29udGV4dChiYXNlLCBwb3MsIG5vZGUpO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIHRleHQgZGlyZWN0bHkgYWZ0ZXIgYHRoaXMucG9zYCwgZWl0aGVyIHRoZSBlbnRpcmUgbGluZVxuICAgIG9yIHRoZSBuZXh0IDEwMCBjaGFyYWN0ZXJzLCB3aGljaGV2ZXIgaXMgc2hvcnRlci5cbiAgICAqL1xuICAgIGdldCB0ZXh0QWZ0ZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRleHRBZnRlclBvcyh0aGlzLnBvcyk7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgaW5kZW50YXRpb24gYXQgdGhlIHJlZmVyZW5jZSBsaW5lIGZvciBgdGhpcy5ub2RlYCwgd2hpY2hcbiAgICBpcyB0aGUgbGluZSBvbiB3aGljaCBpdCBzdGFydHMsIHVubGVzcyB0aGVyZSBpcyBhIG5vZGUgdGhhdCBpc1xuICAgIF9ub3RfIGEgcGFyZW50IG9mIHRoaXMgbm9kZSBjb3ZlcmluZyB0aGUgc3RhcnQgb2YgdGhhdCBsaW5lLiBJZlxuICAgIHNvLCB0aGUgbGluZSBhdCB0aGUgc3RhcnQgb2YgdGhhdCBub2RlIGlzIHRyaWVkLCBhZ2FpbiBza2lwcGluZ1xuICAgIG9uIGlmIGl0IGlzIGNvdmVyZWQgYnkgYW5vdGhlciBzdWNoIG5vZGUuXG4gICAgKi9cbiAgICBnZXQgYmFzZUluZGVudCgpIHtcbiAgICAgICAgbGV0IGxpbmUgPSB0aGlzLnN0YXRlLmRvYy5saW5lQXQodGhpcy5ub2RlLmZyb20pO1xuICAgICAgICAvLyBTa2lwIGxpbmUgc3RhcnRzIHRoYXQgYXJlIGNvdmVyZWQgYnkgYSBzaWJsaW5nIChvciBjb3VzaW4sIGV0YylcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgbGV0IGF0QnJlYWsgPSB0aGlzLm5vZGUucmVzb2x2ZShsaW5lLmZyb20pO1xuICAgICAgICAgICAgd2hpbGUgKGF0QnJlYWsucGFyZW50ICYmIGF0QnJlYWsucGFyZW50LmZyb20gPT0gYXRCcmVhay5mcm9tKVxuICAgICAgICAgICAgICAgIGF0QnJlYWsgPSBhdEJyZWFrLnBhcmVudDtcbiAgICAgICAgICAgIGlmIChpc1BhcmVudChhdEJyZWFrLCB0aGlzLm5vZGUpKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgbGluZSA9IHRoaXMuc3RhdGUuZG9jLmxpbmVBdChhdEJyZWFrLmZyb20pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmxpbmVJbmRlbnQobGluZS5mcm9tKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ29udGludWUgbG9va2luZyBmb3IgaW5kZW50YXRpb25zIGluIHRoZSBub2RlJ3MgcGFyZW50IG5vZGVzLFxuICAgIGFuZCByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGF0LlxuICAgICovXG4gICAgY29udGludWUoKSB7XG4gICAgICAgIGxldCBwYXJlbnQgPSB0aGlzLm5vZGUucGFyZW50O1xuICAgICAgICByZXR1cm4gcGFyZW50ID8gaW5kZW50RnJvbShwYXJlbnQsIHRoaXMucG9zLCB0aGlzLmJhc2UpIDogMDtcbiAgICB9XG59XG5mdW5jdGlvbiBpc1BhcmVudChwYXJlbnQsIG9mKSB7XG4gICAgZm9yIChsZXQgY3VyID0gb2Y7IGN1cjsgY3VyID0gY3VyLnBhcmVudClcbiAgICAgICAgaWYgKHBhcmVudCA9PSBjdXIpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gZmFsc2U7XG59XG4vLyBDaGVjayB3aGV0aGVyIGEgZGVsaW1pdGVkIG5vZGUgaXMgYWxpZ25lZCAobWVhbmluZyB0aGVyZSBhcmVcbi8vIG5vbi1za2lwcGVkIG5vZGVzIG9uIHRoZSBzYW1lIGxpbmUgYXMgdGhlIG9wZW5pbmcgZGVsaW1pdGVyKS4gQW5kXG4vLyBpZiBzbywgcmV0dXJuIHRoZSBvcGVuaW5nIHRva2VuLlxuZnVuY3Rpb24gYnJhY2tldGVkQWxpZ25lZChjb250ZXh0KSB7XG4gICAgbGV0IHRyZWUgPSBjb250ZXh0Lm5vZGU7XG4gICAgbGV0IG9wZW5Ub2tlbiA9IHRyZWUuY2hpbGRBZnRlcih0cmVlLmZyb20pLCBsYXN0ID0gdHJlZS5sYXN0Q2hpbGQ7XG4gICAgaWYgKCFvcGVuVG9rZW4pXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGxldCBzaW0gPSBjb250ZXh0Lm9wdGlvbnMuc2ltdWxhdGVCcmVhaztcbiAgICBsZXQgb3BlbkxpbmUgPSBjb250ZXh0LnN0YXRlLmRvYy5saW5lQXQob3BlblRva2VuLmZyb20pO1xuICAgIGxldCBsaW5lRW5kID0gc2ltID09IG51bGwgfHwgc2ltIDw9IG9wZW5MaW5lLmZyb20gPyBvcGVuTGluZS50byA6IE1hdGgubWluKG9wZW5MaW5lLnRvLCBzaW0pO1xuICAgIGZvciAobGV0IHBvcyA9IG9wZW5Ub2tlbi50bzs7KSB7XG4gICAgICAgIGxldCBuZXh0ID0gdHJlZS5jaGlsZEFmdGVyKHBvcyk7XG4gICAgICAgIGlmICghbmV4dCB8fCBuZXh0ID09IGxhc3QpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKCFuZXh0LnR5cGUuaXNTa2lwcGVkKVxuICAgICAgICAgICAgcmV0dXJuIG5leHQuZnJvbSA8IGxpbmVFbmQgPyBvcGVuVG9rZW4gOiBudWxsO1xuICAgICAgICBwb3MgPSBuZXh0LnRvO1xuICAgIH1cbn1cbi8qKlxuQW4gaW5kZW50YXRpb24gc3RyYXRlZ3kgZm9yIGRlbGltaXRlZCAodXN1YWxseSBicmFja2V0ZWQpIG5vZGVzLlxuV2lsbCwgYnkgZGVmYXVsdCwgaW5kZW50IG9uZSB1bml0IG1vcmUgdGhhbiB0aGUgcGFyZW50J3MgYmFzZVxuaW5kZW50IHVubGVzcyB0aGUgbGluZSBzdGFydHMgd2l0aCBhIGNsb3NpbmcgdG9rZW4uIFdoZW4gYGFsaWduYFxuaXMgdHJ1ZSBhbmQgdGhlcmUgYXJlIG5vbi1za2lwcGVkIG5vZGVzIG9uIHRoZSBub2RlJ3Mgb3BlbmluZ1xubGluZSwgdGhlIGNvbnRlbnQgb2YgdGhlIG5vZGUgd2lsbCBiZSBhbGlnbmVkIHdpdGggdGhlIGVuZCBvZiB0aGVcbm9wZW5pbmcgbm9kZSwgbGlrZSB0aGlzOlxuXG4gICAgZm9vKGJhcixcbiAgICAgICAgYmF6KVxuKi9cbmZ1bmN0aW9uIGRlbGltaXRlZEluZGVudCh7IGNsb3NpbmcsIGFsaWduID0gdHJ1ZSwgdW5pdHMgPSAxIH0pIHtcbiAgICByZXR1cm4gKGNvbnRleHQpID0+IGRlbGltaXRlZFN0cmF0ZWd5KGNvbnRleHQsIGFsaWduLCB1bml0cywgY2xvc2luZyk7XG59XG5mdW5jdGlvbiBkZWxpbWl0ZWRTdHJhdGVneShjb250ZXh0LCBhbGlnbiwgdW5pdHMsIGNsb3NpbmcsIGNsb3NlZEF0KSB7XG4gICAgbGV0IGFmdGVyID0gY29udGV4dC50ZXh0QWZ0ZXIsIHNwYWNlID0gYWZ0ZXIubWF0Y2goL15cXHMqLylbMF0ubGVuZ3RoO1xuICAgIGxldCBjbG9zZWQgPSBjbG9zaW5nICYmIGFmdGVyLnNsaWNlKHNwYWNlLCBzcGFjZSArIGNsb3NpbmcubGVuZ3RoKSA9PSBjbG9zaW5nIHx8IGNsb3NlZEF0ID09IGNvbnRleHQucG9zICsgc3BhY2U7XG4gICAgbGV0IGFsaWduZWQgPSBhbGlnbiA/IGJyYWNrZXRlZEFsaWduZWQoY29udGV4dCkgOiBudWxsO1xuICAgIGlmIChhbGlnbmVkKVxuICAgICAgICByZXR1cm4gY2xvc2VkID8gY29udGV4dC5jb2x1bW4oYWxpZ25lZC5mcm9tKSA6IGNvbnRleHQuY29sdW1uKGFsaWduZWQudG8pO1xuICAgIHJldHVybiBjb250ZXh0LmJhc2VJbmRlbnQgKyAoY2xvc2VkID8gMCA6IGNvbnRleHQudW5pdCAqIHVuaXRzKTtcbn1cbi8qKlxuQW4gaW5kZW50YXRpb24gc3RyYXRlZ3kgdGhhdCBhbGlnbnMgYSBub2RlJ3MgY29udGVudCB0byBpdHMgYmFzZVxuaW5kZW50YXRpb24uXG4qL1xuY29uc3QgZmxhdEluZGVudCA9IChjb250ZXh0KSA9PiBjb250ZXh0LmJhc2VJbmRlbnQ7XG4vKipcbkNyZWF0ZXMgYW4gaW5kZW50YXRpb24gc3RyYXRlZ3kgdGhhdCwgYnkgZGVmYXVsdCwgaW5kZW50c1xuY29udGludWVkIGxpbmVzIG9uZSB1bml0IG1vcmUgdGhhbiB0aGUgbm9kZSdzIGJhc2UgaW5kZW50YXRpb24uXG5Zb3UgY2FuIHByb3ZpZGUgYGV4Y2VwdGAgdG8gcHJldmVudCBpbmRlbnRhdGlvbiBvZiBsaW5lcyB0aGF0XG5tYXRjaCBhIHBhdHRlcm4gKGZvciBleGFtcGxlIGAvXmVsc2VcXGIvYCBpbiBgaWZgL2BlbHNlYFxuY29uc3RydWN0cyksIGFuZCB5b3UgY2FuIGNoYW5nZSB0aGUgYW1vdW50IG9mIHVuaXRzIHVzZWQgd2l0aCB0aGVcbmB1bml0c2Agb3B0aW9uLlxuKi9cbmZ1bmN0aW9uIGNvbnRpbnVlZEluZGVudCh7IGV4Y2VwdCwgdW5pdHMgPSAxIH0gPSB7fSkge1xuICAgIHJldHVybiAoY29udGV4dCkgPT4ge1xuICAgICAgICBsZXQgbWF0Y2hFeGNlcHQgPSBleGNlcHQgJiYgZXhjZXB0LnRlc3QoY29udGV4dC50ZXh0QWZ0ZXIpO1xuICAgICAgICByZXR1cm4gY29udGV4dC5iYXNlSW5kZW50ICsgKG1hdGNoRXhjZXB0ID8gMCA6IHVuaXRzICogY29udGV4dC51bml0KTtcbiAgICB9O1xufVxuY29uc3QgRG9udEluZGVudEJleW9uZCA9IDIwMDtcbi8qKlxuRW5hYmxlcyByZWluZGVudGF0aW9uIG9uIGlucHV0LiBXaGVuIGEgbGFuZ3VhZ2UgZGVmaW5lcyBhblxuYGluZGVudE9uSW5wdXRgIGZpZWxkIGluIGl0cyBbbGFuZ3VhZ2VcbmRhdGFdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUubGFuZ3VhZ2VEYXRhQXQpLCB3aGljaCBtdXN0IGhvbGQgYSByZWd1bGFyXG5leHByZXNzaW9uLCB0aGUgbGluZSBhdCB0aGUgY3Vyc29yIHdpbGwgYmUgcmVpbmRlbnRlZCB3aGVuZXZlciBuZXdcbnRleHQgaXMgdHlwZWQgYW5kIHRoZSBpbnB1dCBmcm9tIHRoZSBzdGFydCBvZiB0aGUgbGluZSB1cCB0byB0aGVcbmN1cnNvciBtYXRjaGVzIHRoYXQgcmVnZXhwLlxuXG5UbyBhdm9pZCB1bm5lY2Nlc2FyeSByZWluZGVudHMsIGl0IGlzIHJlY29tbWVuZGVkIHRvIHN0YXJ0IHRoZVxucmVnZXhwIHdpdGggYF5gICh1c3VhbGx5IGZvbGxvd2VkIGJ5IGBcXHMqYCksIGFuZCBlbmQgaXQgd2l0aCBgJGAuXG5Gb3IgZXhhbXBsZSwgYC9eXFxzKlxcfSQvYCB3aWxsIHJlaW5kZW50IHdoZW4gYSBjbG9zaW5nIGJyYWNlIGlzXG5hZGRlZCBhdCB0aGUgc3RhcnQgb2YgYSBsaW5lLlxuKi9cbmZ1bmN0aW9uIGluZGVudE9uSW5wdXQoKSB7XG4gICAgcmV0dXJuIEVkaXRvclN0YXRlLnRyYW5zYWN0aW9uRmlsdGVyLm9mKHRyID0+IHtcbiAgICAgICAgaWYgKCF0ci5kb2NDaGFuZ2VkIHx8ICF0ci5pc1VzZXJFdmVudChcImlucHV0LnR5cGVcIikgJiYgIXRyLmlzVXNlckV2ZW50KFwiaW5wdXQuY29tcGxldGVcIikpXG4gICAgICAgICAgICByZXR1cm4gdHI7XG4gICAgICAgIGxldCBydWxlcyA9IHRyLnN0YXJ0U3RhdGUubGFuZ3VhZ2VEYXRhQXQoXCJpbmRlbnRPbklucHV0XCIsIHRyLnN0YXJ0U3RhdGUuc2VsZWN0aW9uLm1haW4uaGVhZCk7XG4gICAgICAgIGlmICghcnVsZXMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIHRyO1xuICAgICAgICBsZXQgZG9jID0gdHIubmV3RG9jLCB7IGhlYWQgfSA9IHRyLm5ld1NlbGVjdGlvbi5tYWluLCBsaW5lID0gZG9jLmxpbmVBdChoZWFkKTtcbiAgICAgICAgaWYgKGhlYWQgPiBsaW5lLmZyb20gKyBEb250SW5kZW50QmV5b25kKVxuICAgICAgICAgICAgcmV0dXJuIHRyO1xuICAgICAgICBsZXQgbGluZVN0YXJ0ID0gZG9jLnNsaWNlU3RyaW5nKGxpbmUuZnJvbSwgaGVhZCk7XG4gICAgICAgIGlmICghcnVsZXMuc29tZShyID0+IHIudGVzdChsaW5lU3RhcnQpKSlcbiAgICAgICAgICAgIHJldHVybiB0cjtcbiAgICAgICAgbGV0IHsgc3RhdGUgfSA9IHRyLCBsYXN0ID0gLTEsIGNoYW5nZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgeyBoZWFkIH0gb2Ygc3RhdGUuc2VsZWN0aW9uLnJhbmdlcykge1xuICAgICAgICAgICAgbGV0IGxpbmUgPSBzdGF0ZS5kb2MubGluZUF0KGhlYWQpO1xuICAgICAgICAgICAgaWYgKGxpbmUuZnJvbSA9PSBsYXN0KVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgbGFzdCA9IGxpbmUuZnJvbTtcbiAgICAgICAgICAgIGxldCBpbmRlbnQgPSBnZXRJbmRlbnRhdGlvbihzdGF0ZSwgbGluZS5mcm9tKTtcbiAgICAgICAgICAgIGlmIChpbmRlbnQgPT0gbnVsbClcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGxldCBjdXIgPSAvXlxccyovLmV4ZWMobGluZS50ZXh0KVswXTtcbiAgICAgICAgICAgIGxldCBub3JtID0gaW5kZW50U3RyaW5nKHN0YXRlLCBpbmRlbnQpO1xuICAgICAgICAgICAgaWYgKGN1ciAhPSBub3JtKVxuICAgICAgICAgICAgICAgIGNoYW5nZXMucHVzaCh7IGZyb206IGxpbmUuZnJvbSwgdG86IGxpbmUuZnJvbSArIGN1ci5sZW5ndGgsIGluc2VydDogbm9ybSB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2hhbmdlcy5sZW5ndGggPyBbdHIsIHsgY2hhbmdlcywgc2VxdWVudGlhbDogdHJ1ZSB9XSA6IHRyO1xuICAgIH0pO1xufVxuXG4vKipcbkEgZmFjZXQgdGhhdCByZWdpc3RlcnMgYSBjb2RlIGZvbGRpbmcgc2VydmljZS4gV2hlbiBjYWxsZWQgd2l0aFxudGhlIGV4dGVudCBvZiBhIGxpbmUsIHN1Y2ggYSBmdW5jdGlvbiBzaG91bGQgcmV0dXJuIGEgZm9sZGFibGVcbnJhbmdlIHRoYXQgc3RhcnRzIG9uIHRoYXQgbGluZSAoYnV0IGNvbnRpbnVlcyBiZXlvbmQgaXQpLCBpZiBvbmVcbmNhbiBiZSBmb3VuZC5cbiovXG5jb25zdCBmb2xkU2VydmljZSA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbi8qKlxuVGhpcyBub2RlIHByb3AgaXMgdXNlZCB0byBhc3NvY2lhdGUgZm9sZGluZyBpbmZvcm1hdGlvbiB3aXRoXG5zeW50YXggbm9kZSB0eXBlcy4gR2l2ZW4gYSBzeW50YXggbm9kZSwgaXQgc2hvdWxkIGNoZWNrIHdoZXRoZXJcbnRoYXQgdHJlZSBpcyBmb2xkYWJsZSBhbmQgcmV0dXJuIHRoZSByYW5nZSB0aGF0IGNhbiBiZSBjb2xsYXBzZWRcbndoZW4gaXQgaXMuXG4qL1xuY29uc3QgZm9sZE5vZGVQcm9wID0gLypAX19QVVJFX18qL25ldyBOb2RlUHJvcCgpO1xuLyoqXG5bRm9sZF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5mb2xkTm9kZVByb3ApIGZ1bmN0aW9uIHRoYXQgZm9sZHMgZXZlcnl0aGluZyBidXRcbnRoZSBmaXJzdCBhbmQgdGhlIGxhc3QgY2hpbGQgb2YgYSBzeW50YXggbm9kZS4gVXNlZnVsIGZvciBub2Rlc1xudGhhdCBzdGFydCBhbmQgZW5kIHdpdGggZGVsaW1pdGVycy5cbiovXG5mdW5jdGlvbiBmb2xkSW5zaWRlKG5vZGUpIHtcbiAgICBsZXQgZmlyc3QgPSBub2RlLmZpcnN0Q2hpbGQsIGxhc3QgPSBub2RlLmxhc3RDaGlsZDtcbiAgICByZXR1cm4gZmlyc3QgJiYgZmlyc3QudG8gPCBsYXN0LmZyb20gPyB7IGZyb206IGZpcnN0LnRvLCB0bzogbGFzdC50eXBlLmlzRXJyb3IgPyBub2RlLnRvIDogbGFzdC5mcm9tIH0gOiBudWxsO1xufVxuZnVuY3Rpb24gc3ludGF4Rm9sZGluZyhzdGF0ZSwgc3RhcnQsIGVuZCkge1xuICAgIGxldCB0cmVlID0gc3ludGF4VHJlZShzdGF0ZSk7XG4gICAgaWYgKHRyZWUubGVuZ3RoIDwgZW5kKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgaW5uZXIgPSB0cmVlLnJlc29sdmVJbm5lcihlbmQsIDEpO1xuICAgIGxldCBmb3VuZCA9IG51bGw7XG4gICAgZm9yIChsZXQgY3VyID0gaW5uZXI7IGN1cjsgY3VyID0gY3VyLnBhcmVudCkge1xuICAgICAgICBpZiAoY3VyLnRvIDw9IGVuZCB8fCBjdXIuZnJvbSA+IGVuZClcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBpZiAoZm91bmQgJiYgY3VyLmZyb20gPCBzdGFydClcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBsZXQgcHJvcCA9IGN1ci50eXBlLnByb3AoZm9sZE5vZGVQcm9wKTtcbiAgICAgICAgaWYgKHByb3AgJiYgKGN1ci50byA8IHRyZWUubGVuZ3RoIC0gNTAgfHwgdHJlZS5sZW5ndGggPT0gc3RhdGUuZG9jLmxlbmd0aCB8fCAhaXNVbmZpbmlzaGVkKGN1cikpKSB7XG4gICAgICAgICAgICBsZXQgdmFsdWUgPSBwcm9wKGN1ciwgc3RhdGUpO1xuICAgICAgICAgICAgaWYgKHZhbHVlICYmIHZhbHVlLmZyb20gPD0gZW5kICYmIHZhbHVlLmZyb20gPj0gc3RhcnQgJiYgdmFsdWUudG8gPiBlbmQpXG4gICAgICAgICAgICAgICAgZm91bmQgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZm91bmQ7XG59XG5mdW5jdGlvbiBpc1VuZmluaXNoZWQobm9kZSkge1xuICAgIGxldCBjaCA9IG5vZGUubGFzdENoaWxkO1xuICAgIHJldHVybiBjaCAmJiBjaC50byA9PSBub2RlLnRvICYmIGNoLnR5cGUuaXNFcnJvcjtcbn1cbi8qKlxuQ2hlY2sgd2hldGhlciB0aGUgZ2l2ZW4gbGluZSBpcyBmb2xkYWJsZS4gRmlyc3QgYXNrcyBhbnkgZm9sZFxuc2VydmljZXMgcmVnaXN0ZXJlZCB0aHJvdWdoXG5bYGZvbGRTZXJ2aWNlYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5mb2xkU2VydmljZSksIGFuZCBpZiBub25lIG9mIHRoZW0gcmV0dXJuXG5hIHJlc3VsdCwgdHJpZXMgdG8gcXVlcnkgdGhlIFtmb2xkIG5vZGVcbnByb3BdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuZm9sZE5vZGVQcm9wKSBvZiBzeW50YXggbm9kZXMgdGhhdCBjb3ZlciB0aGUgZW5kXG5vZiB0aGUgbGluZS5cbiovXG5mdW5jdGlvbiBmb2xkYWJsZShzdGF0ZSwgbGluZVN0YXJ0LCBsaW5lRW5kKSB7XG4gICAgZm9yIChsZXQgc2VydmljZSBvZiBzdGF0ZS5mYWNldChmb2xkU2VydmljZSkpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IHNlcnZpY2Uoc3RhdGUsIGxpbmVTdGFydCwgbGluZUVuZCk7XG4gICAgICAgIGlmIChyZXN1bHQpXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICByZXR1cm4gc3ludGF4Rm9sZGluZyhzdGF0ZSwgbGluZVN0YXJ0LCBsaW5lRW5kKTtcbn1cbmZ1bmN0aW9uIG1hcFJhbmdlKHJhbmdlLCBtYXBwaW5nKSB7XG4gICAgbGV0IGZyb20gPSBtYXBwaW5nLm1hcFBvcyhyYW5nZS5mcm9tLCAxKSwgdG8gPSBtYXBwaW5nLm1hcFBvcyhyYW5nZS50bywgLTEpO1xuICAgIHJldHVybiBmcm9tID49IHRvID8gdW5kZWZpbmVkIDogeyBmcm9tLCB0byB9O1xufVxuLyoqXG5TdGF0ZSBlZmZlY3QgdGhhdCBjYW4gYmUgYXR0YWNoZWQgdG8gYSB0cmFuc2FjdGlvbiB0byBmb2xkIHRoZVxuZ2l2ZW4gcmFuZ2UuIChZb3UgcHJvYmFibHkgb25seSBuZWVkIHRoaXMgaW4gZXhjZXB0aW9uYWxcbmNpcmN1bXN0YW5jZXNcdTIwMTR1c3VhbGx5IHlvdSdsbCBqdXN0IHdhbnQgdG8gbGV0XG5bYGZvbGRDb2RlYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5mb2xkQ29kZSkgYW5kIHRoZSBbZm9sZFxuZ3V0dGVyXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLmZvbGRHdXR0ZXIpIGNyZWF0ZSB0aGUgdHJhbnNhY3Rpb25zLilcbiovXG5jb25zdCBmb2xkRWZmZWN0ID0gLypAX19QVVJFX18qL1N0YXRlRWZmZWN0LmRlZmluZSh7IG1hcDogbWFwUmFuZ2UgfSk7XG4vKipcblN0YXRlIGVmZmVjdCB0aGF0IHVuZm9sZHMgdGhlIGdpdmVuIHJhbmdlIChpZiBpdCB3YXMgZm9sZGVkKS5cbiovXG5jb25zdCB1bmZvbGRFZmZlY3QgPSAvKkBfX1BVUkVfXyovU3RhdGVFZmZlY3QuZGVmaW5lKHsgbWFwOiBtYXBSYW5nZSB9KTtcbmZ1bmN0aW9uIHNlbGVjdGVkTGluZXModmlldykge1xuICAgIGxldCBsaW5lcyA9IFtdO1xuICAgIGZvciAobGV0IHsgaGVhZCB9IG9mIHZpZXcuc3RhdGUuc2VsZWN0aW9uLnJhbmdlcykge1xuICAgICAgICBpZiAobGluZXMuc29tZShsID0+IGwuZnJvbSA8PSBoZWFkICYmIGwudG8gPj0gaGVhZCkpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgbGluZXMucHVzaCh2aWV3LmxpbmVCbG9ja0F0KGhlYWQpKTtcbiAgICB9XG4gICAgcmV0dXJuIGxpbmVzO1xufVxuLyoqXG5UaGUgc3RhdGUgZmllbGQgdGhhdCBzdG9yZXMgdGhlIGZvbGRlZCByYW5nZXMgKGFzIGEgW2RlY29yYXRpb25cbnNldF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkRlY29yYXRpb25TZXQpKS4gQ2FuIGJlIHBhc3NlZCB0b1xuW2BFZGl0b3JTdGF0ZS50b0pTT05gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlLnRvSlNPTikgYW5kXG5bYGZyb21KU09OYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZV5mcm9tSlNPTikgdG8gc2VyaWFsaXplIHRoZSBmb2xkXG5zdGF0ZS5cbiovXG5jb25zdCBmb2xkU3RhdGUgPSAvKkBfX1BVUkVfXyovU3RhdGVGaWVsZC5kZWZpbmUoe1xuICAgIGNyZWF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIERlY29yYXRpb24ubm9uZTtcbiAgICB9LFxuICAgIHVwZGF0ZShmb2xkZWQsIHRyKSB7XG4gICAgICAgIGZvbGRlZCA9IGZvbGRlZC5tYXAodHIuY2hhbmdlcyk7XG4gICAgICAgIGZvciAobGV0IGUgb2YgdHIuZWZmZWN0cykge1xuICAgICAgICAgICAgaWYgKGUuaXMoZm9sZEVmZmVjdCkgJiYgIWZvbGRFeGlzdHMoZm9sZGVkLCBlLnZhbHVlLmZyb20sIGUudmFsdWUudG8pKVxuICAgICAgICAgICAgICAgIGZvbGRlZCA9IGZvbGRlZC51cGRhdGUoeyBhZGQ6IFtmb2xkV2lkZ2V0LnJhbmdlKGUudmFsdWUuZnJvbSwgZS52YWx1ZS50byldIH0pO1xuICAgICAgICAgICAgZWxzZSBpZiAoZS5pcyh1bmZvbGRFZmZlY3QpKVxuICAgICAgICAgICAgICAgIGZvbGRlZCA9IGZvbGRlZC51cGRhdGUoeyBmaWx0ZXI6IChmcm9tLCB0bykgPT4gZS52YWx1ZS5mcm9tICE9IGZyb20gfHwgZS52YWx1ZS50byAhPSB0byxcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyRnJvbTogZS52YWx1ZS5mcm9tLCBmaWx0ZXJUbzogZS52YWx1ZS50byB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDbGVhciBmb2xkZWQgcmFuZ2VzIHRoYXQgY292ZXIgdGhlIHNlbGVjdGlvbiBoZWFkXG4gICAgICAgIGlmICh0ci5zZWxlY3Rpb24pIHtcbiAgICAgICAgICAgIGxldCBvblNlbGVjdGlvbiA9IGZhbHNlLCB7IGhlYWQgfSA9IHRyLnNlbGVjdGlvbi5tYWluO1xuICAgICAgICAgICAgZm9sZGVkLmJldHdlZW4oaGVhZCwgaGVhZCwgKGEsIGIpID0+IHsgaWYgKGEgPCBoZWFkICYmIGIgPiBoZWFkKVxuICAgICAgICAgICAgICAgIG9uU2VsZWN0aW9uID0gdHJ1ZTsgfSk7XG4gICAgICAgICAgICBpZiAob25TZWxlY3Rpb24pXG4gICAgICAgICAgICAgICAgZm9sZGVkID0gZm9sZGVkLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlckZyb206IGhlYWQsXG4gICAgICAgICAgICAgICAgICAgIGZpbHRlclRvOiBoZWFkLFxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXI6IChhLCBiKSA9PiBiIDw9IGhlYWQgfHwgYSA+PSBoZWFkXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZvbGRlZDtcbiAgICB9LFxuICAgIHByb3ZpZGU6IGYgPT4gRWRpdG9yVmlldy5kZWNvcmF0aW9ucy5mcm9tKGYpLFxuICAgIHRvSlNPTihmb2xkZWQsIHN0YXRlKSB7XG4gICAgICAgIGxldCByYW5nZXMgPSBbXTtcbiAgICAgICAgZm9sZGVkLmJldHdlZW4oMCwgc3RhdGUuZG9jLmxlbmd0aCwgKGZyb20sIHRvKSA9PiB7IHJhbmdlcy5wdXNoKGZyb20sIHRvKTsgfSk7XG4gICAgICAgIHJldHVybiByYW5nZXM7XG4gICAgfSxcbiAgICBmcm9tSlNPTih2YWx1ZSkge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpIHx8IHZhbHVlLmxlbmd0aCAlIDIpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgSlNPTiBmb3IgZm9sZCBzdGF0ZVwiKTtcbiAgICAgICAgbGV0IHJhbmdlcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDspIHtcbiAgICAgICAgICAgIGxldCBmcm9tID0gdmFsdWVbaSsrXSwgdG8gPSB2YWx1ZVtpKytdO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBmcm9tICE9IFwibnVtYmVyXCIgfHwgdHlwZW9mIHRvICE9IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIEpTT04gZm9yIGZvbGQgc3RhdGVcIik7XG4gICAgICAgICAgICByYW5nZXMucHVzaChmb2xkV2lkZ2V0LnJhbmdlKGZyb20sIHRvKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIERlY29yYXRpb24uc2V0KHJhbmdlcywgdHJ1ZSk7XG4gICAgfVxufSk7XG4vKipcbkdldCBhIFtyYW5nZSBzZXRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuUmFuZ2VTZXQpIGNvbnRhaW5pbmcgdGhlIGZvbGRlZCByYW5nZXNcbmluIHRoZSBnaXZlbiBzdGF0ZS5cbiovXG5mdW5jdGlvbiBmb2xkZWRSYW5nZXMoc3RhdGUpIHtcbiAgICByZXR1cm4gc3RhdGUuZmllbGQoZm9sZFN0YXRlLCBmYWxzZSkgfHwgUmFuZ2VTZXQuZW1wdHk7XG59XG5mdW5jdGlvbiBmaW5kRm9sZChzdGF0ZSwgZnJvbSwgdG8pIHtcbiAgICB2YXIgX2E7XG4gICAgbGV0IGZvdW5kID0gbnVsbDtcbiAgICAoX2EgPSBzdGF0ZS5maWVsZChmb2xkU3RhdGUsIGZhbHNlKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmJldHdlZW4oZnJvbSwgdG8sIChmcm9tLCB0bykgPT4ge1xuICAgICAgICBpZiAoIWZvdW5kIHx8IGZvdW5kLmZyb20gPiBmcm9tKVxuICAgICAgICAgICAgZm91bmQgPSB7IGZyb20sIHRvIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIGZvdW5kO1xufVxuZnVuY3Rpb24gZm9sZEV4aXN0cyhmb2xkZWQsIGZyb20sIHRvKSB7XG4gICAgbGV0IGZvdW5kID0gZmFsc2U7XG4gICAgZm9sZGVkLmJldHdlZW4oZnJvbSwgZnJvbSwgKGEsIGIpID0+IHsgaWYgKGEgPT0gZnJvbSAmJiBiID09IHRvKVxuICAgICAgICBmb3VuZCA9IHRydWU7IH0pO1xuICAgIHJldHVybiBmb3VuZDtcbn1cbmZ1bmN0aW9uIG1heWJlRW5hYmxlKHN0YXRlLCBvdGhlcikge1xuICAgIHJldHVybiBzdGF0ZS5maWVsZChmb2xkU3RhdGUsIGZhbHNlKSA/IG90aGVyIDogb3RoZXIuY29uY2F0KFN0YXRlRWZmZWN0LmFwcGVuZENvbmZpZy5vZihjb2RlRm9sZGluZygpKSk7XG59XG4vKipcbkZvbGQgdGhlIGxpbmVzIHRoYXQgYXJlIHNlbGVjdGVkLCBpZiBwb3NzaWJsZS5cbiovXG5jb25zdCBmb2xkQ29kZSA9IHZpZXcgPT4ge1xuICAgIGZvciAobGV0IGxpbmUgb2Ygc2VsZWN0ZWRMaW5lcyh2aWV3KSkge1xuICAgICAgICBsZXQgcmFuZ2UgPSBmb2xkYWJsZSh2aWV3LnN0YXRlLCBsaW5lLmZyb20sIGxpbmUudG8pO1xuICAgICAgICBpZiAocmFuZ2UpIHtcbiAgICAgICAgICAgIHZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiBtYXliZUVuYWJsZSh2aWV3LnN0YXRlLCBbZm9sZEVmZmVjdC5vZihyYW5nZSksIGFubm91bmNlRm9sZCh2aWV3LCByYW5nZSldKSB9KTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG4vKipcblVuZm9sZCBmb2xkZWQgcmFuZ2VzIG9uIHNlbGVjdGVkIGxpbmVzLlxuKi9cbmNvbnN0IHVuZm9sZENvZGUgPSB2aWV3ID0+IHtcbiAgICBpZiAoIXZpZXcuc3RhdGUuZmllbGQoZm9sZFN0YXRlLCBmYWxzZSkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgZWZmZWN0cyA9IFtdO1xuICAgIGZvciAobGV0IGxpbmUgb2Ygc2VsZWN0ZWRMaW5lcyh2aWV3KSkge1xuICAgICAgICBsZXQgZm9sZGVkID0gZmluZEZvbGQodmlldy5zdGF0ZSwgbGluZS5mcm9tLCBsaW5lLnRvKTtcbiAgICAgICAgaWYgKGZvbGRlZClcbiAgICAgICAgICAgIGVmZmVjdHMucHVzaCh1bmZvbGRFZmZlY3Qub2YoZm9sZGVkKSwgYW5ub3VuY2VGb2xkKHZpZXcsIGZvbGRlZCwgZmFsc2UpKTtcbiAgICB9XG4gICAgaWYgKGVmZmVjdHMubGVuZ3RoKVxuICAgICAgICB2aWV3LmRpc3BhdGNoKHsgZWZmZWN0cyB9KTtcbiAgICByZXR1cm4gZWZmZWN0cy5sZW5ndGggPiAwO1xufTtcbmZ1bmN0aW9uIGFubm91bmNlRm9sZCh2aWV3LCByYW5nZSwgZm9sZCA9IHRydWUpIHtcbiAgICBsZXQgbGluZUZyb20gPSB2aWV3LnN0YXRlLmRvYy5saW5lQXQocmFuZ2UuZnJvbSkubnVtYmVyLCBsaW5lVG8gPSB2aWV3LnN0YXRlLmRvYy5saW5lQXQocmFuZ2UudG8pLm51bWJlcjtcbiAgICByZXR1cm4gRWRpdG9yVmlldy5hbm5vdW5jZS5vZihgJHt2aWV3LnN0YXRlLnBocmFzZShmb2xkID8gXCJGb2xkZWQgbGluZXNcIiA6IFwiVW5mb2xkZWQgbGluZXNcIil9ICR7bGluZUZyb219ICR7dmlldy5zdGF0ZS5waHJhc2UoXCJ0b1wiKX0gJHtsaW5lVG99LmApO1xufVxuLyoqXG5Gb2xkIGFsbCB0b3AtbGV2ZWwgZm9sZGFibGUgcmFuZ2VzLiBOb3RlIHRoYXQsIGluIG1vc3QgY2FzZXMsXG5mb2xkaW5nIGluZm9ybWF0aW9uIHdpbGwgZGVwZW5kIG9uIHRoZSBbc3ludGF4XG50cmVlXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLnN5bnRheFRyZWUpLCBhbmQgZm9sZGluZyBldmVyeXRoaW5nIG1heSBub3Qgd29ya1xucmVsaWFibHkgd2hlbiB0aGUgZG9jdW1lbnQgaGFzbid0IGJlZW4gZnVsbHkgcGFyc2VkIChlaXRoZXJcbmJlY2F1c2UgdGhlIGVkaXRvciBzdGF0ZSB3YXMgb25seSBqdXN0IGluaXRpYWxpemVkLCBvciBiZWNhdXNlIHRoZVxuZG9jdW1lbnQgaXMgc28gYmlnIHRoYXQgdGhlIHBhcnNlciBkZWNpZGVkIG5vdCB0byBwYXJzZSBpdFxuZW50aXJlbHkpLlxuKi9cbmNvbnN0IGZvbGRBbGwgPSB2aWV3ID0+IHtcbiAgICBsZXQgeyBzdGF0ZSB9ID0gdmlldywgZWZmZWN0cyA9IFtdO1xuICAgIGZvciAobGV0IHBvcyA9IDA7IHBvcyA8IHN0YXRlLmRvYy5sZW5ndGg7KSB7XG4gICAgICAgIGxldCBsaW5lID0gdmlldy5saW5lQmxvY2tBdChwb3MpLCByYW5nZSA9IGZvbGRhYmxlKHN0YXRlLCBsaW5lLmZyb20sIGxpbmUudG8pO1xuICAgICAgICBpZiAocmFuZ2UpXG4gICAgICAgICAgICBlZmZlY3RzLnB1c2goZm9sZEVmZmVjdC5vZihyYW5nZSkpO1xuICAgICAgICBwb3MgPSAocmFuZ2UgPyB2aWV3LmxpbmVCbG9ja0F0KHJhbmdlLnRvKSA6IGxpbmUpLnRvICsgMTtcbiAgICB9XG4gICAgaWYgKGVmZmVjdHMubGVuZ3RoKVxuICAgICAgICB2aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogbWF5YmVFbmFibGUodmlldy5zdGF0ZSwgZWZmZWN0cykgfSk7XG4gICAgcmV0dXJuICEhZWZmZWN0cy5sZW5ndGg7XG59O1xuLyoqXG5VbmZvbGQgYWxsIGZvbGRlZCBjb2RlLlxuKi9cbmNvbnN0IHVuZm9sZEFsbCA9IHZpZXcgPT4ge1xuICAgIGxldCBmaWVsZCA9IHZpZXcuc3RhdGUuZmllbGQoZm9sZFN0YXRlLCBmYWxzZSk7XG4gICAgaWYgKCFmaWVsZCB8fCAhZmllbGQuc2l6ZSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBlZmZlY3RzID0gW107XG4gICAgZmllbGQuYmV0d2VlbigwLCB2aWV3LnN0YXRlLmRvYy5sZW5ndGgsIChmcm9tLCB0bykgPT4geyBlZmZlY3RzLnB1c2godW5mb2xkRWZmZWN0Lm9mKHsgZnJvbSwgdG8gfSkpOyB9KTtcbiAgICB2aWV3LmRpc3BhdGNoKHsgZWZmZWN0cyB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcbkRlZmF1bHQgZm9sZC1yZWxhdGVkIGtleSBiaW5kaW5ncy5cblxuIC0gQ3RybC1TaGlmdC1bIChDbWQtQWx0LVsgb24gbWFjT1MpOiBbYGZvbGRDb2RlYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5mb2xkQ29kZSkuXG4gLSBDdHJsLVNoaWZ0LV0gKENtZC1BbHQtXSBvbiBtYWNPUyk6IFtgdW5mb2xkQ29kZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UudW5mb2xkQ29kZSkuXG4gLSBDdHJsLUFsdC1bOiBbYGZvbGRBbGxgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLmZvbGRBbGwpLlxuIC0gQ3RybC1BbHQtXTogW2B1bmZvbGRBbGxgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLnVuZm9sZEFsbCkuXG4qL1xuY29uc3QgZm9sZEtleW1hcCA9IFtcbiAgICB7IGtleTogXCJDdHJsLVNoaWZ0LVtcIiwgbWFjOiBcIkNtZC1BbHQtW1wiLCBydW46IGZvbGRDb2RlIH0sXG4gICAgeyBrZXk6IFwiQ3RybC1TaGlmdC1dXCIsIG1hYzogXCJDbWQtQWx0LV1cIiwgcnVuOiB1bmZvbGRDb2RlIH0sXG4gICAgeyBrZXk6IFwiQ3RybC1BbHQtW1wiLCBydW46IGZvbGRBbGwgfSxcbiAgICB7IGtleTogXCJDdHJsLUFsdC1dXCIsIHJ1bjogdW5mb2xkQWxsIH1cbl07XG5jb25zdCBkZWZhdWx0Q29uZmlnID0ge1xuICAgIHBsYWNlaG9sZGVyRE9NOiBudWxsLFxuICAgIHBsYWNlaG9sZGVyVGV4dDogXCJcdTIwMjZcIlxufTtcbmNvbnN0IGZvbGRDb25maWcgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21iaW5lKHZhbHVlcykgeyByZXR1cm4gY29tYmluZUNvbmZpZyh2YWx1ZXMsIGRlZmF1bHRDb25maWcpOyB9XG59KTtcbi8qKlxuQ3JlYXRlIGFuIGV4dGVuc2lvbiB0aGF0IGNvbmZpZ3VyZXMgY29kZSBmb2xkaW5nLlxuKi9cbmZ1bmN0aW9uIGNvZGVGb2xkaW5nKGNvbmZpZykge1xuICAgIGxldCByZXN1bHQgPSBbZm9sZFN0YXRlLCBiYXNlVGhlbWUkMV07XG4gICAgaWYgKGNvbmZpZylcbiAgICAgICAgcmVzdWx0LnB1c2goZm9sZENvbmZpZy5vZihjb25maWcpKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuY29uc3QgZm9sZFdpZGdldCA9IC8qQF9fUFVSRV9fKi9EZWNvcmF0aW9uLnJlcGxhY2UoeyB3aWRnZXQ6IC8qQF9fUFVSRV9fKi9uZXcgY2xhc3MgZXh0ZW5kcyBXaWRnZXRUeXBlIHtcbiAgICAgICAgdG9ET00odmlldykge1xuICAgICAgICAgICAgbGV0IHsgc3RhdGUgfSA9IHZpZXcsIGNvbmYgPSBzdGF0ZS5mYWNldChmb2xkQ29uZmlnKTtcbiAgICAgICAgICAgIGxldCBvbmNsaWNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGxpbmUgPSB2aWV3LmxpbmVCbG9ja0F0KHZpZXcucG9zQXRET00oZXZlbnQudGFyZ2V0KSk7XG4gICAgICAgICAgICAgICAgbGV0IGZvbGRlZCA9IGZpbmRGb2xkKHZpZXcuc3RhdGUsIGxpbmUuZnJvbSwgbGluZS50byk7XG4gICAgICAgICAgICAgICAgaWYgKGZvbGRlZClcbiAgICAgICAgICAgICAgICAgICAgdmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IHVuZm9sZEVmZmVjdC5vZihmb2xkZWQpIH0pO1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGNvbmYucGxhY2Vob2xkZXJET00pXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbmYucGxhY2Vob2xkZXJET00odmlldywgb25jbGljayk7XG4gICAgICAgICAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICAgICAgZWxlbWVudC50ZXh0Q29udGVudCA9IGNvbmYucGxhY2Vob2xkZXJUZXh0O1xuICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIHN0YXRlLnBocmFzZShcImZvbGRlZCBjb2RlXCIpKTtcbiAgICAgICAgICAgIGVsZW1lbnQudGl0bGUgPSBzdGF0ZS5waHJhc2UoXCJ1bmZvbGRcIik7XG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IFwiY20tZm9sZFBsYWNlaG9sZGVyXCI7XG4gICAgICAgICAgICBlbGVtZW50Lm9uY2xpY2sgPSBvbmNsaWNrO1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICB9IH0pO1xuY29uc3QgZm9sZEd1dHRlckRlZmF1bHRzID0ge1xuICAgIG9wZW5UZXh0OiBcIlx1MjMwNFwiLFxuICAgIGNsb3NlZFRleHQ6IFwiXHUyMDNBXCIsXG4gICAgbWFya2VyRE9NOiBudWxsLFxuICAgIGRvbUV2ZW50SGFuZGxlcnM6IHt9LFxuICAgIGZvbGRpbmdDaGFuZ2VkOiAoKSA9PiBmYWxzZVxufTtcbmNsYXNzIEZvbGRNYXJrZXIgZXh0ZW5kcyBHdXR0ZXJNYXJrZXIge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZywgb3Blbikge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy5vcGVuID0gb3BlbjtcbiAgICB9XG4gICAgZXEob3RoZXIpIHsgcmV0dXJuIHRoaXMuY29uZmlnID09IG90aGVyLmNvbmZpZyAmJiB0aGlzLm9wZW4gPT0gb3RoZXIub3BlbjsgfVxuICAgIHRvRE9NKHZpZXcpIHtcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLm1hcmtlckRPTSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbmZpZy5tYXJrZXJET00odGhpcy5vcGVuKTtcbiAgICAgICAgbGV0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgc3Bhbi50ZXh0Q29udGVudCA9IHRoaXMub3BlbiA/IHRoaXMuY29uZmlnLm9wZW5UZXh0IDogdGhpcy5jb25maWcuY2xvc2VkVGV4dDtcbiAgICAgICAgc3Bhbi50aXRsZSA9IHZpZXcuc3RhdGUucGhyYXNlKHRoaXMub3BlbiA/IFwiRm9sZCBsaW5lXCIgOiBcIlVuZm9sZCBsaW5lXCIpO1xuICAgICAgICByZXR1cm4gc3BhbjtcbiAgICB9XG59XG4vKipcbkNyZWF0ZSBhbiBleHRlbnNpb24gdGhhdCByZWdpc3RlcnMgYSBmb2xkIGd1dHRlciwgd2hpY2ggc2hvd3MgYVxuZm9sZCBzdGF0dXMgaW5kaWNhdG9yIGJlZm9yZSBmb2xkYWJsZSBsaW5lcyAod2hpY2ggY2FuIGJlIGNsaWNrZWRcbnRvIGZvbGQgb3IgdW5mb2xkIHRoZSBsaW5lKS5cbiovXG5mdW5jdGlvbiBmb2xkR3V0dGVyKGNvbmZpZyA9IHt9KSB7XG4gICAgbGV0IGZ1bGxDb25maWcgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGZvbGRHdXR0ZXJEZWZhdWx0cyksIGNvbmZpZyk7XG4gICAgbGV0IGNhbkZvbGQgPSBuZXcgRm9sZE1hcmtlcihmdWxsQ29uZmlnLCB0cnVlKSwgY2FuVW5mb2xkID0gbmV3IEZvbGRNYXJrZXIoZnVsbENvbmZpZywgZmFsc2UpO1xuICAgIGxldCBtYXJrZXJzID0gVmlld1BsdWdpbi5mcm9tQ2xhc3MoY2xhc3Mge1xuICAgICAgICBjb25zdHJ1Y3Rvcih2aWV3KSB7XG4gICAgICAgICAgICB0aGlzLmZyb20gPSB2aWV3LnZpZXdwb3J0LmZyb207XG4gICAgICAgICAgICB0aGlzLm1hcmtlcnMgPSB0aGlzLmJ1aWxkTWFya2Vycyh2aWV3KTtcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGUodXBkYXRlKSB7XG4gICAgICAgICAgICBpZiAodXBkYXRlLmRvY0NoYW5nZWQgfHwgdXBkYXRlLnZpZXdwb3J0Q2hhbmdlZCB8fFxuICAgICAgICAgICAgICAgIHVwZGF0ZS5zdGFydFN0YXRlLmZhY2V0KGxhbmd1YWdlKSAhPSB1cGRhdGUuc3RhdGUuZmFjZXQobGFuZ3VhZ2UpIHx8XG4gICAgICAgICAgICAgICAgdXBkYXRlLnN0YXJ0U3RhdGUuZmllbGQoZm9sZFN0YXRlLCBmYWxzZSkgIT0gdXBkYXRlLnN0YXRlLmZpZWxkKGZvbGRTdGF0ZSwgZmFsc2UpIHx8XG4gICAgICAgICAgICAgICAgc3ludGF4VHJlZSh1cGRhdGUuc3RhcnRTdGF0ZSkgIT0gc3ludGF4VHJlZSh1cGRhdGUuc3RhdGUpIHx8XG4gICAgICAgICAgICAgICAgZnVsbENvbmZpZy5mb2xkaW5nQ2hhbmdlZCh1cGRhdGUpKVxuICAgICAgICAgICAgICAgIHRoaXMubWFya2VycyA9IHRoaXMuYnVpbGRNYXJrZXJzKHVwZGF0ZS52aWV3KTtcbiAgICAgICAgfVxuICAgICAgICBidWlsZE1hcmtlcnModmlldykge1xuICAgICAgICAgICAgbGV0IGJ1aWxkZXIgPSBuZXcgUmFuZ2VTZXRCdWlsZGVyKCk7XG4gICAgICAgICAgICBmb3IgKGxldCBsaW5lIG9mIHZpZXcudmlld3BvcnRMaW5lQmxvY2tzKSB7XG4gICAgICAgICAgICAgICAgbGV0IG1hcmsgPSBmaW5kRm9sZCh2aWV3LnN0YXRlLCBsaW5lLmZyb20sIGxpbmUudG8pID8gY2FuVW5mb2xkXG4gICAgICAgICAgICAgICAgICAgIDogZm9sZGFibGUodmlldy5zdGF0ZSwgbGluZS5mcm9tLCBsaW5lLnRvKSA/IGNhbkZvbGQgOiBudWxsO1xuICAgICAgICAgICAgICAgIGlmIChtYXJrKVxuICAgICAgICAgICAgICAgICAgICBidWlsZGVyLmFkZChsaW5lLmZyb20sIGxpbmUuZnJvbSwgbWFyayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRlci5maW5pc2goKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGxldCB7IGRvbUV2ZW50SGFuZGxlcnMgfSA9IGZ1bGxDb25maWc7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgbWFya2VycyxcbiAgICAgICAgZ3V0dGVyKHtcbiAgICAgICAgICAgIGNsYXNzOiBcImNtLWZvbGRHdXR0ZXJcIixcbiAgICAgICAgICAgIG1hcmtlcnModmlldykgeyB2YXIgX2E7IHJldHVybiAoKF9hID0gdmlldy5wbHVnaW4obWFya2VycykpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tYXJrZXJzKSB8fCBSYW5nZVNldC5lbXB0eTsgfSxcbiAgICAgICAgICAgIGluaXRpYWxTcGFjZXIoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGb2xkTWFya2VyKGZ1bGxDb25maWcsIGZhbHNlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkb21FdmVudEhhbmRsZXJzOiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGRvbUV2ZW50SGFuZGxlcnMpLCB7IGNsaWNrOiAodmlldywgbGluZSwgZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvbUV2ZW50SGFuZGxlcnMuY2xpY2sgJiYgZG9tRXZlbnRIYW5kbGVycy5jbGljayh2aWV3LCBsaW5lLCBldmVudCkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZvbGRlZCA9IGZpbmRGb2xkKHZpZXcuc3RhdGUsIGxpbmUuZnJvbSwgbGluZS50byk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmb2xkZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiB1bmZvbGRFZmZlY3Qub2YoZm9sZGVkKSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxldCByYW5nZSA9IGZvbGRhYmxlKHZpZXcuc3RhdGUsIGxpbmUuZnJvbSwgbGluZS50byk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IGZvbGRFZmZlY3Qub2YocmFuZ2UpIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH0gfSlcbiAgICAgICAgfSksXG4gICAgICAgIGNvZGVGb2xkaW5nKClcbiAgICBdO1xufVxuY29uc3QgYmFzZVRoZW1lJDEgPSAvKkBfX1BVUkVfXyovRWRpdG9yVmlldy5iYXNlVGhlbWUoe1xuICAgIFwiLmNtLWZvbGRQbGFjZWhvbGRlclwiOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjZWVlXCIsXG4gICAgICAgIGJvcmRlcjogXCIxcHggc29saWQgI2RkZFwiLFxuICAgICAgICBjb2xvcjogXCIjODg4XCIsXG4gICAgICAgIGJvcmRlclJhZGl1czogXCIuMmVtXCIsXG4gICAgICAgIG1hcmdpbjogXCIwIDFweFwiLFxuICAgICAgICBwYWRkaW5nOiBcIjAgMXB4XCIsXG4gICAgICAgIGN1cnNvcjogXCJwb2ludGVyXCJcbiAgICB9LFxuICAgIFwiLmNtLWZvbGRHdXR0ZXIgc3BhblwiOiB7XG4gICAgICAgIHBhZGRpbmc6IFwiMCAxcHhcIixcbiAgICAgICAgY3Vyc29yOiBcInBvaW50ZXJcIlxuICAgIH1cbn0pO1xuXG4vKipcbkEgaGlnaGxpZ2h0IHN0eWxlIGFzc29jaWF0ZXMgQ1NTIHN0eWxlcyB3aXRoIGhpZ2xpZ2h0aW5nXG5bdGFnc10oaHR0cHM6Ly9sZXplci5jb2RlbWlycm9yLm5ldC9kb2NzL3JlZiNoaWdobGlnaHQuVGFnKS5cbiovXG5jbGFzcyBIaWdobGlnaHRTdHlsZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIHRhZyBzdHlsZXMgdXNlZCB0byBjcmVhdGUgdGhpcyBoaWdobGlnaHQgc3R5bGUuXG4gICAgKi9cbiAgICBzcGVjcywgb3B0aW9ucykge1xuICAgICAgICB0aGlzLnNwZWNzID0gc3BlY3M7XG4gICAgICAgIGxldCBtb2RTcGVjO1xuICAgICAgICBmdW5jdGlvbiBkZWYoc3BlYykge1xuICAgICAgICAgICAgbGV0IGNscyA9IFN0eWxlTW9kdWxlLm5ld05hbWUoKTtcbiAgICAgICAgICAgIChtb2RTcGVjIHx8IChtb2RTcGVjID0gT2JqZWN0LmNyZWF0ZShudWxsKSkpW1wiLlwiICsgY2xzXSA9IHNwZWM7XG4gICAgICAgICAgICByZXR1cm4gY2xzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFsbCA9IHR5cGVvZiBvcHRpb25zLmFsbCA9PSBcInN0cmluZ1wiID8gb3B0aW9ucy5hbGwgOiBvcHRpb25zLmFsbCA/IGRlZihvcHRpb25zLmFsbCkgOiB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IHNjb3BlT3B0ID0gb3B0aW9ucy5zY29wZTtcbiAgICAgICAgdGhpcy5zY29wZSA9IHNjb3BlT3B0IGluc3RhbmNlb2YgTGFuZ3VhZ2UgPyAodHlwZSkgPT4gdHlwZS5wcm9wKGxhbmd1YWdlRGF0YVByb3ApID09IHNjb3BlT3B0LmRhdGFcbiAgICAgICAgICAgIDogc2NvcGVPcHQgPyAodHlwZSkgPT4gdHlwZSA9PSBzY29wZU9wdCA6IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5zdHlsZSA9IHRhZ0hpZ2hsaWdodGVyKHNwZWNzLm1hcChzdHlsZSA9PiAoe1xuICAgICAgICAgICAgdGFnOiBzdHlsZS50YWcsXG4gICAgICAgICAgICBjbGFzczogc3R5bGUuY2xhc3MgfHwgZGVmKE9iamVjdC5hc3NpZ24oe30sIHN0eWxlLCB7IHRhZzogbnVsbCB9KSlcbiAgICAgICAgfSkpLCB7XG4gICAgICAgICAgICBhbGwsXG4gICAgICAgIH0pLnN0eWxlO1xuICAgICAgICB0aGlzLm1vZHVsZSA9IG1vZFNwZWMgPyBuZXcgU3R5bGVNb2R1bGUobW9kU3BlYykgOiBudWxsO1xuICAgICAgICB0aGlzLnRoZW1lVHlwZSA9IG9wdGlvbnMudGhlbWVUeXBlO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBoaWdobGlnaHRlciBzdHlsZSB0aGF0IGFzc29jaWF0ZXMgdGhlIGdpdmVuIHN0eWxlcyB0b1xuICAgIHRoZSBnaXZlbiB0YWdzLiBUaGUgc3BlY3MgbXVzdCBiZSBvYmplY3RzIHRoYXQgaG9sZCBhIHN0eWxlIHRhZ1xuICAgIG9yIGFycmF5IG9mIHRhZ3MgaW4gdGhlaXIgYHRhZ2AgcHJvcGVydHksIGFuZCBlaXRoZXIgYSBzaW5nbGVcbiAgICBgY2xhc3NgIHByb3BlcnR5IHByb3ZpZGluZyBhIHN0YXRpYyBDU1MgY2xhc3MgKGZvciBoaWdobGlnaHRlclxuICAgIHRoYXQgcmVseSBvbiBleHRlcm5hbCBzdHlsaW5nKSwgb3IgYVxuICAgIFtgc3R5bGUtbW9kYF0oaHR0cHM6Ly9naXRodWIuY29tL21hcmlqbmgvc3R5bGUtbW9kI2RvY3VtZW50YXRpb24pLXN0eWxlXG4gICAgc2V0IG9mIENTUyBwcm9wZXJ0aWVzICh3aGljaCBkZWZpbmUgdGhlIHN0eWxpbmcgZm9yIHRob3NlIHRhZ3MpLlxuICAgIFxuICAgIFRoZSBDU1MgcnVsZXMgY3JlYXRlZCBmb3IgYSBoaWdobGlnaHRlciB3aWxsIGJlIGVtaXR0ZWQgaW4gdGhlXG4gICAgb3JkZXIgb2YgdGhlIHNwZWMncyBwcm9wZXJ0aWVzLiBUaGF0IG1lYW5zIHRoYXQgZm9yIGVsZW1lbnRzIHRoYXRcbiAgICBoYXZlIG11bHRpcGxlIHRhZ3MgYXNzb2NpYXRlZCB3aXRoIHRoZW0sIHN0eWxlcyBkZWZpbmVkIGZ1cnRoZXJcbiAgICBkb3duIGluIHRoZSBsaXN0IHdpbGwgaGF2ZSBhIGhpZ2hlciBDU1MgcHJlY2VkZW5jZSB0aGFuIHN0eWxlc1xuICAgIGRlZmluZWQgZWFybGllci5cbiAgICAqL1xuICAgIHN0YXRpYyBkZWZpbmUoc3BlY3MsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIaWdobGlnaHRTdHlsZShzcGVjcywgb3B0aW9ucyB8fCB7fSk7XG4gICAgfVxufVxuY29uc3QgaGlnaGxpZ2h0ZXJGYWNldCA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmNvbnN0IGZhbGxiYWNrSGlnaGxpZ2h0ZXIgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21iaW5lKHZhbHVlcykgeyByZXR1cm4gdmFsdWVzLmxlbmd0aCA/IFt2YWx1ZXNbMF1dIDogbnVsbDsgfVxufSk7XG5mdW5jdGlvbiBnZXRIaWdobGlnaHRlcnMoc3RhdGUpIHtcbiAgICBsZXQgbWFpbiA9IHN0YXRlLmZhY2V0KGhpZ2hsaWdodGVyRmFjZXQpO1xuICAgIHJldHVybiBtYWluLmxlbmd0aCA/IG1haW4gOiBzdGF0ZS5mYWNldChmYWxsYmFja0hpZ2hsaWdodGVyKTtcbn1cbi8qKlxuV3JhcCBhIGhpZ2hsaWdodGVyIGluIGFuIGVkaXRvciBleHRlbnNpb24gdGhhdCB1c2VzIGl0IHRvIGFwcGx5XG5zeW50YXggaGlnaGxpZ2h0aW5nIHRvIHRoZSBlZGl0b3IgY29udGVudC5cblxuV2hlbiBtdWx0aXBsZSAobm9uLWZhbGxiYWNrKSBzdHlsZXMgYXJlIHByb3ZpZGVkLCB0aGUgc3R5bGluZ1xuYXBwbGllZCBpcyB0aGUgdW5pb24gb2YgdGhlIGNsYXNzZXMgdGhleSBlbWl0LlxuKi9cbmZ1bmN0aW9uIHN5bnRheEhpZ2hsaWdodGluZyhoaWdobGlnaHRlciwgb3B0aW9ucykge1xuICAgIGxldCBleHQgPSBbdHJlZUhpZ2hsaWdodGVyXSwgdGhlbWVUeXBlO1xuICAgIGlmIChoaWdobGlnaHRlciBpbnN0YW5jZW9mIEhpZ2hsaWdodFN0eWxlKSB7XG4gICAgICAgIGlmIChoaWdobGlnaHRlci5tb2R1bGUpXG4gICAgICAgICAgICBleHQucHVzaChFZGl0b3JWaWV3LnN0eWxlTW9kdWxlLm9mKGhpZ2hsaWdodGVyLm1vZHVsZSkpO1xuICAgICAgICB0aGVtZVR5cGUgPSBoaWdobGlnaHRlci50aGVtZVR5cGU7XG4gICAgfVxuICAgIGlmIChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuZmFsbGJhY2spXG4gICAgICAgIGV4dC5wdXNoKGZhbGxiYWNrSGlnaGxpZ2h0ZXIub2YoaGlnaGxpZ2h0ZXIpKTtcbiAgICBlbHNlIGlmICh0aGVtZVR5cGUpXG4gICAgICAgIGV4dC5wdXNoKGhpZ2hsaWdodGVyRmFjZXQuY29tcHV0ZU4oW0VkaXRvclZpZXcuZGFya1RoZW1lXSwgc3RhdGUgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHN0YXRlLmZhY2V0KEVkaXRvclZpZXcuZGFya1RoZW1lKSA9PSAodGhlbWVUeXBlID09IFwiZGFya1wiKSA/IFtoaWdobGlnaHRlcl0gOiBbXTtcbiAgICAgICAgfSkpO1xuICAgIGVsc2VcbiAgICAgICAgZXh0LnB1c2goaGlnaGxpZ2h0ZXJGYWNldC5vZihoaWdobGlnaHRlcikpO1xuICAgIHJldHVybiBleHQ7XG59XG4vKipcblJldHVybnMgdGhlIENTUyBjbGFzc2VzIChpZiBhbnkpIHRoYXQgdGhlIGhpZ2hsaWdodGVycyBhY3RpdmUgaW5cbnRoZSBzdGF0ZSB3b3VsZCBhc3NpZ24gdG8gdGhlIGdpdmVuIHN0eWxlXG5bdGFnc10oaHR0cHM6Ly9sZXplci5jb2RlbWlycm9yLm5ldC9kb2NzL3JlZiNoaWdobGlnaHQuVGFnKSBhbmRcbihvcHRpb25hbCkgbGFuZ3VhZ2VcbltzY29wZV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5IaWdobGlnaHRTdHlsZV5kZWZpbmVeb3B0aW9ucy5zY29wZSkuXG4qL1xuZnVuY3Rpb24gaGlnaGxpZ2h0aW5nRm9yKHN0YXRlLCB0YWdzLCBzY29wZSkge1xuICAgIGxldCBoaWdobGlnaHRlcnMgPSBnZXRIaWdobGlnaHRlcnMoc3RhdGUpO1xuICAgIGxldCByZXN1bHQgPSBudWxsO1xuICAgIGlmIChoaWdobGlnaHRlcnMpXG4gICAgICAgIGZvciAobGV0IGhpZ2hsaWdodGVyIG9mIGhpZ2hsaWdodGVycykge1xuICAgICAgICAgICAgaWYgKCFoaWdobGlnaHRlci5zY29wZSB8fCBzY29wZSAmJiBoaWdobGlnaHRlci5zY29wZShzY29wZSkpIHtcbiAgICAgICAgICAgICAgICBsZXQgY2xzID0gaGlnaGxpZ2h0ZXIuc3R5bGUodGFncyk7XG4gICAgICAgICAgICAgICAgaWYgKGNscylcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0ID8gcmVzdWx0ICsgXCIgXCIgKyBjbHMgOiBjbHM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuY2xhc3MgVHJlZUhpZ2hsaWdodGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3KSB7XG4gICAgICAgIHRoaXMubWFya0NhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgdGhpcy50cmVlID0gc3ludGF4VHJlZSh2aWV3LnN0YXRlKTtcbiAgICAgICAgdGhpcy5kZWNvcmF0aW9ucyA9IHRoaXMuYnVpbGREZWNvKHZpZXcsIGdldEhpZ2hsaWdodGVycyh2aWV3LnN0YXRlKSk7XG4gICAgfVxuICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgbGV0IHRyZWUgPSBzeW50YXhUcmVlKHVwZGF0ZS5zdGF0ZSksIGhpZ2hsaWdodGVycyA9IGdldEhpZ2hsaWdodGVycyh1cGRhdGUuc3RhdGUpO1xuICAgICAgICBsZXQgc3R5bGVDaGFuZ2UgPSBoaWdobGlnaHRlcnMgIT0gZ2V0SGlnaGxpZ2h0ZXJzKHVwZGF0ZS5zdGFydFN0YXRlKTtcbiAgICAgICAgaWYgKHRyZWUubGVuZ3RoIDwgdXBkYXRlLnZpZXcudmlld3BvcnQudG8gJiYgIXN0eWxlQ2hhbmdlICYmIHRyZWUudHlwZSA9PSB0aGlzLnRyZWUudHlwZSkge1xuICAgICAgICAgICAgdGhpcy5kZWNvcmF0aW9ucyA9IHRoaXMuZGVjb3JhdGlvbnMubWFwKHVwZGF0ZS5jaGFuZ2VzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0cmVlICE9IHRoaXMudHJlZSB8fCB1cGRhdGUudmlld3BvcnRDaGFuZ2VkIHx8IHN0eWxlQ2hhbmdlKSB7XG4gICAgICAgICAgICB0aGlzLnRyZWUgPSB0cmVlO1xuICAgICAgICAgICAgdGhpcy5kZWNvcmF0aW9ucyA9IHRoaXMuYnVpbGREZWNvKHVwZGF0ZS52aWV3LCBoaWdobGlnaHRlcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGJ1aWxkRGVjbyh2aWV3LCBoaWdobGlnaHRlcnMpIHtcbiAgICAgICAgaWYgKCFoaWdobGlnaHRlcnMgfHwgIXRoaXMudHJlZS5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gRGVjb3JhdGlvbi5ub25lO1xuICAgICAgICBsZXQgYnVpbGRlciA9IG5ldyBSYW5nZVNldEJ1aWxkZXIoKTtcbiAgICAgICAgZm9yIChsZXQgeyBmcm9tLCB0byB9IG9mIHZpZXcudmlzaWJsZVJhbmdlcykge1xuICAgICAgICAgICAgaGlnaGxpZ2h0VHJlZSh0aGlzLnRyZWUsIGhpZ2hsaWdodGVycywgKGZyb20sIHRvLCBzdHlsZSkgPT4ge1xuICAgICAgICAgICAgICAgIGJ1aWxkZXIuYWRkKGZyb20sIHRvLCB0aGlzLm1hcmtDYWNoZVtzdHlsZV0gfHwgKHRoaXMubWFya0NhY2hlW3N0eWxlXSA9IERlY29yYXRpb24ubWFyayh7IGNsYXNzOiBzdHlsZSB9KSkpO1xuICAgICAgICAgICAgfSwgZnJvbSwgdG8pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBidWlsZGVyLmZpbmlzaCgpO1xuICAgIH1cbn1cbmNvbnN0IHRyZWVIaWdobGlnaHRlciA9IC8qQF9fUFVSRV9fKi9QcmVjLmhpZ2goLypAX19QVVJFX18qL1ZpZXdQbHVnaW4uZnJvbUNsYXNzKFRyZWVIaWdobGlnaHRlciwge1xuICAgIGRlY29yYXRpb25zOiB2ID0+IHYuZGVjb3JhdGlvbnNcbn0pKTtcbi8qKlxuQSBkZWZhdWx0IGhpZ2hsaWdodCBzdHlsZSAod29ya3Mgd2VsbCB3aXRoIGxpZ2h0IHRoZW1lcykuXG4qL1xuY29uc3QgZGVmYXVsdEhpZ2hsaWdodFN0eWxlID0gLypAX19QVVJFX18qL0hpZ2hsaWdodFN0eWxlLmRlZmluZShbXG4gICAgeyB0YWc6IHRhZ3MubWV0YSxcbiAgICAgICAgY29sb3I6IFwiIzdhNzU3YVwiIH0sXG4gICAgeyB0YWc6IHRhZ3MubGluayxcbiAgICAgICAgdGV4dERlY29yYXRpb246IFwidW5kZXJsaW5lXCIgfSxcbiAgICB7IHRhZzogdGFncy5oZWFkaW5nLFxuICAgICAgICB0ZXh0RGVjb3JhdGlvbjogXCJ1bmRlcmxpbmVcIixcbiAgICAgICAgZm9udFdlaWdodDogXCJib2xkXCIgfSxcbiAgICB7IHRhZzogdGFncy5lbXBoYXNpcyxcbiAgICAgICAgZm9udFN0eWxlOiBcIml0YWxpY1wiIH0sXG4gICAgeyB0YWc6IHRhZ3Muc3Ryb25nLFxuICAgICAgICBmb250V2VpZ2h0OiBcImJvbGRcIiB9LFxuICAgIHsgdGFnOiB0YWdzLnN0cmlrZXRocm91Z2gsXG4gICAgICAgIHRleHREZWNvcmF0aW9uOiBcImxpbmUtdGhyb3VnaFwiIH0sXG4gICAgeyB0YWc6IHRhZ3Mua2V5d29yZCxcbiAgICAgICAgY29sb3I6IFwiIzcwOFwiIH0sXG4gICAgeyB0YWc6IFt0YWdzLmF0b20sIHRhZ3MuYm9vbCwgdGFncy51cmwsIHRhZ3MuY29udGVudFNlcGFyYXRvciwgdGFncy5sYWJlbE5hbWVdLFxuICAgICAgICBjb2xvcjogXCIjMjE5XCIgfSxcbiAgICB7IHRhZzogW3RhZ3MubGl0ZXJhbCwgdGFncy5pbnNlcnRlZF0sXG4gICAgICAgIGNvbG9yOiBcIiMxNjRcIiB9LFxuICAgIHsgdGFnOiBbdGFncy5zdHJpbmcsIHRhZ3MuZGVsZXRlZF0sXG4gICAgICAgIGNvbG9yOiBcIiNhMTFcIiB9LFxuICAgIHsgdGFnOiBbdGFncy5yZWdleHAsIHRhZ3MuZXNjYXBlLCAvKkBfX1BVUkVfXyovdGFncy5zcGVjaWFsKHRhZ3Muc3RyaW5nKV0sXG4gICAgICAgIGNvbG9yOiBcIiNlNDBcIiB9LFxuICAgIHsgdGFnOiAvKkBfX1BVUkVfXyovdGFncy5kZWZpbml0aW9uKHRhZ3MudmFyaWFibGVOYW1lKSxcbiAgICAgICAgY29sb3I6IFwiIzAwZlwiIH0sXG4gICAgeyB0YWc6IC8qQF9fUFVSRV9fKi90YWdzLmxvY2FsKHRhZ3MudmFyaWFibGVOYW1lKSxcbiAgICAgICAgY29sb3I6IFwiIzMwYVwiIH0sXG4gICAgeyB0YWc6IFt0YWdzLnR5cGVOYW1lLCB0YWdzLm5hbWVzcGFjZV0sXG4gICAgICAgIGNvbG9yOiBcIiMwODVcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmNsYXNzTmFtZSxcbiAgICAgICAgY29sb3I6IFwiIzE2N1wiIH0sXG4gICAgeyB0YWc6IFsvKkBfX1BVUkVfXyovdGFncy5zcGVjaWFsKHRhZ3MudmFyaWFibGVOYW1lKSwgdGFncy5tYWNyb05hbWVdLFxuICAgICAgICBjb2xvcjogXCIjMjU2XCIgfSxcbiAgICB7IHRhZzogLypAX19QVVJFX18qL3RhZ3MuZGVmaW5pdGlvbih0YWdzLnByb3BlcnR5TmFtZSksXG4gICAgICAgIGNvbG9yOiBcIiMwMGNcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmNvbW1lbnQsXG4gICAgICAgIGNvbG9yOiBcIiM5NDBcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmludmFsaWQsXG4gICAgICAgIGNvbG9yOiBcIiNmMDBcIiB9XG5dKTtcblxuY29uc3QgYmFzZVRoZW1lID0gLypAX19QVVJFX18qL0VkaXRvclZpZXcuYmFzZVRoZW1lKHtcbiAgICBcIiYuY20tZm9jdXNlZCAuY20tbWF0Y2hpbmdCcmFja2V0XCI6IHsgYmFja2dyb3VuZENvbG9yOiBcIiMzMjhjODI1MlwiIH0sXG4gICAgXCImLmNtLWZvY3VzZWQgLmNtLW5vbm1hdGNoaW5nQnJhY2tldFwiOiB7IGJhY2tncm91bmRDb2xvcjogXCIjYmI1NTU1NDRcIiB9XG59KTtcbmNvbnN0IERlZmF1bHRTY2FuRGlzdCA9IDEwMDAwLCBEZWZhdWx0QnJhY2tldHMgPSBcIigpW117fVwiO1xuY29uc3QgYnJhY2tldE1hdGNoaW5nQ29uZmlnID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgY29tYmluZShjb25maWdzKSB7XG4gICAgICAgIHJldHVybiBjb21iaW5lQ29uZmlnKGNvbmZpZ3MsIHtcbiAgICAgICAgICAgIGFmdGVyQ3Vyc29yOiB0cnVlLFxuICAgICAgICAgICAgYnJhY2tldHM6IERlZmF1bHRCcmFja2V0cyxcbiAgICAgICAgICAgIG1heFNjYW5EaXN0YW5jZTogRGVmYXVsdFNjYW5EaXN0LFxuICAgICAgICAgICAgcmVuZGVyTWF0Y2g6IGRlZmF1bHRSZW5kZXJNYXRjaFxuICAgICAgICB9KTtcbiAgICB9XG59KTtcbmNvbnN0IG1hdGNoaW5nTWFyayA9IC8qQF9fUFVSRV9fKi9EZWNvcmF0aW9uLm1hcmsoeyBjbGFzczogXCJjbS1tYXRjaGluZ0JyYWNrZXRcIiB9KSwgbm9ubWF0Y2hpbmdNYXJrID0gLypAX19QVVJFX18qL0RlY29yYXRpb24ubWFyayh7IGNsYXNzOiBcImNtLW5vbm1hdGNoaW5nQnJhY2tldFwiIH0pO1xuZnVuY3Rpb24gZGVmYXVsdFJlbmRlck1hdGNoKG1hdGNoKSB7XG4gICAgbGV0IGRlY29yYXRpb25zID0gW107XG4gICAgbGV0IG1hcmsgPSBtYXRjaC5tYXRjaGVkID8gbWF0Y2hpbmdNYXJrIDogbm9ubWF0Y2hpbmdNYXJrO1xuICAgIGRlY29yYXRpb25zLnB1c2gobWFyay5yYW5nZShtYXRjaC5zdGFydC5mcm9tLCBtYXRjaC5zdGFydC50bykpO1xuICAgIGlmIChtYXRjaC5lbmQpXG4gICAgICAgIGRlY29yYXRpb25zLnB1c2gobWFyay5yYW5nZShtYXRjaC5lbmQuZnJvbSwgbWF0Y2guZW5kLnRvKSk7XG4gICAgcmV0dXJuIGRlY29yYXRpb25zO1xufVxuY29uc3QgYnJhY2tldE1hdGNoaW5nU3RhdGUgPSAvKkBfX1BVUkVfXyovU3RhdGVGaWVsZC5kZWZpbmUoe1xuICAgIGNyZWF0ZSgpIHsgcmV0dXJuIERlY29yYXRpb24ubm9uZTsgfSxcbiAgICB1cGRhdGUoZGVjbywgdHIpIHtcbiAgICAgICAgaWYgKCF0ci5kb2NDaGFuZ2VkICYmICF0ci5zZWxlY3Rpb24pXG4gICAgICAgICAgICByZXR1cm4gZGVjbztcbiAgICAgICAgbGV0IGRlY29yYXRpb25zID0gW107XG4gICAgICAgIGxldCBjb25maWcgPSB0ci5zdGF0ZS5mYWNldChicmFja2V0TWF0Y2hpbmdDb25maWcpO1xuICAgICAgICBmb3IgKGxldCByYW5nZSBvZiB0ci5zdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzKSB7XG4gICAgICAgICAgICBpZiAoIXJhbmdlLmVtcHR5KVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgbGV0IG1hdGNoID0gbWF0Y2hCcmFja2V0cyh0ci5zdGF0ZSwgcmFuZ2UuaGVhZCwgLTEsIGNvbmZpZylcbiAgICAgICAgICAgICAgICB8fCAocmFuZ2UuaGVhZCA+IDAgJiYgbWF0Y2hCcmFja2V0cyh0ci5zdGF0ZSwgcmFuZ2UuaGVhZCAtIDEsIDEsIGNvbmZpZykpXG4gICAgICAgICAgICAgICAgfHwgKGNvbmZpZy5hZnRlckN1cnNvciAmJlxuICAgICAgICAgICAgICAgICAgICAobWF0Y2hCcmFja2V0cyh0ci5zdGF0ZSwgcmFuZ2UuaGVhZCwgMSwgY29uZmlnKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKHJhbmdlLmhlYWQgPCB0ci5zdGF0ZS5kb2MubGVuZ3RoICYmIG1hdGNoQnJhY2tldHModHIuc3RhdGUsIHJhbmdlLmhlYWQgKyAxLCAtMSwgY29uZmlnKSkpKTtcbiAgICAgICAgICAgIGlmIChtYXRjaClcbiAgICAgICAgICAgICAgICBkZWNvcmF0aW9ucyA9IGRlY29yYXRpb25zLmNvbmNhdChjb25maWcucmVuZGVyTWF0Y2gobWF0Y2gsIHRyLnN0YXRlKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIERlY29yYXRpb24uc2V0KGRlY29yYXRpb25zLCB0cnVlKTtcbiAgICB9LFxuICAgIHByb3ZpZGU6IGYgPT4gRWRpdG9yVmlldy5kZWNvcmF0aW9ucy5mcm9tKGYpXG59KTtcbmNvbnN0IGJyYWNrZXRNYXRjaGluZ1VuaXF1ZSA9IFtcbiAgICBicmFja2V0TWF0Y2hpbmdTdGF0ZSxcbiAgICBiYXNlVGhlbWVcbl07XG4vKipcbkNyZWF0ZSBhbiBleHRlbnNpb24gdGhhdCBlbmFibGVzIGJyYWNrZXQgbWF0Y2hpbmcuIFdoZW5ldmVyIHRoZVxuY3Vyc29yIGlzIG5leHQgdG8gYSBicmFja2V0LCB0aGF0IGJyYWNrZXQgYW5kIHRoZSBvbmUgaXQgbWF0Y2hlc1xuYXJlIGhpZ2hsaWdodGVkLiBPciwgd2hlbiBubyBtYXRjaGluZyBicmFja2V0IGlzIGZvdW5kLCBhbm90aGVyXG5oaWdobGlnaHRpbmcgc3R5bGUgaXMgdXNlZCB0byBpbmRpY2F0ZSB0aGlzLlxuKi9cbmZ1bmN0aW9uIGJyYWNrZXRNYXRjaGluZyhjb25maWcgPSB7fSkge1xuICAgIHJldHVybiBbYnJhY2tldE1hdGNoaW5nQ29uZmlnLm9mKGNvbmZpZyksIGJyYWNrZXRNYXRjaGluZ1VuaXF1ZV07XG59XG5mdW5jdGlvbiBtYXRjaGluZ05vZGVzKG5vZGUsIGRpciwgYnJhY2tldHMpIHtcbiAgICBsZXQgYnlQcm9wID0gbm9kZS5wcm9wKGRpciA8IDAgPyBOb2RlUHJvcC5vcGVuZWRCeSA6IE5vZGVQcm9wLmNsb3NlZEJ5KTtcbiAgICBpZiAoYnlQcm9wKVxuICAgICAgICByZXR1cm4gYnlQcm9wO1xuICAgIGlmIChub2RlLm5hbWUubGVuZ3RoID09IDEpIHtcbiAgICAgICAgbGV0IGluZGV4ID0gYnJhY2tldHMuaW5kZXhPZihub2RlLm5hbWUpO1xuICAgICAgICBpZiAoaW5kZXggPiAtMSAmJiBpbmRleCAlIDIgPT0gKGRpciA8IDAgPyAxIDogMCkpXG4gICAgICAgICAgICByZXR1cm4gW2JyYWNrZXRzW2luZGV4ICsgZGlyXV07XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuLyoqXG5GaW5kIHRoZSBtYXRjaGluZyBicmFja2V0IGZvciB0aGUgdG9rZW4gYXQgYHBvc2AsIHNjYW5uaW5nXG5kaXJlY3Rpb24gYGRpcmAuIE9ubHkgdGhlIGBicmFja2V0c2AgYW5kIGBtYXhTY2FuRGlzdGFuY2VgXG5wcm9wZXJ0aWVzIGFyZSB1c2VkIGZyb20gYGNvbmZpZ2AsIGlmIGdpdmVuLiBSZXR1cm5zIG51bGwgaWYgbm9cbmJyYWNrZXQgd2FzIGZvdW5kIGF0IGBwb3NgLCBvciBhIG1hdGNoIHJlc3VsdCBvdGhlcndpc2UuXG4qL1xuZnVuY3Rpb24gbWF0Y2hCcmFja2V0cyhzdGF0ZSwgcG9zLCBkaXIsIGNvbmZpZyA9IHt9KSB7XG4gICAgbGV0IG1heFNjYW5EaXN0YW5jZSA9IGNvbmZpZy5tYXhTY2FuRGlzdGFuY2UgfHwgRGVmYXVsdFNjYW5EaXN0LCBicmFja2V0cyA9IGNvbmZpZy5icmFja2V0cyB8fCBEZWZhdWx0QnJhY2tldHM7XG4gICAgbGV0IHRyZWUgPSBzeW50YXhUcmVlKHN0YXRlKSwgbm9kZSA9IHRyZWUucmVzb2x2ZUlubmVyKHBvcywgZGlyKTtcbiAgICBmb3IgKGxldCBjdXIgPSBub2RlOyBjdXI7IGN1ciA9IGN1ci5wYXJlbnQpIHtcbiAgICAgICAgbGV0IG1hdGNoZXMgPSBtYXRjaGluZ05vZGVzKGN1ci50eXBlLCBkaXIsIGJyYWNrZXRzKTtcbiAgICAgICAgaWYgKG1hdGNoZXMgJiYgY3VyLmZyb20gPCBjdXIudG8pXG4gICAgICAgICAgICByZXR1cm4gbWF0Y2hNYXJrZWRCcmFja2V0cyhzdGF0ZSwgcG9zLCBkaXIsIGN1ciwgbWF0Y2hlcywgYnJhY2tldHMpO1xuICAgIH1cbiAgICByZXR1cm4gbWF0Y2hQbGFpbkJyYWNrZXRzKHN0YXRlLCBwb3MsIGRpciwgdHJlZSwgbm9kZS50eXBlLCBtYXhTY2FuRGlzdGFuY2UsIGJyYWNrZXRzKTtcbn1cbmZ1bmN0aW9uIG1hdGNoTWFya2VkQnJhY2tldHMoX3N0YXRlLCBfcG9zLCBkaXIsIHRva2VuLCBtYXRjaGluZywgYnJhY2tldHMpIHtcbiAgICBsZXQgcGFyZW50ID0gdG9rZW4ucGFyZW50LCBmaXJzdFRva2VuID0geyBmcm9tOiB0b2tlbi5mcm9tLCB0bzogdG9rZW4udG8gfTtcbiAgICBsZXQgZGVwdGggPSAwLCBjdXJzb3IgPSBwYXJlbnQgPT09IG51bGwgfHwgcGFyZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJlbnQuY3Vyc29yKCk7XG4gICAgaWYgKGN1cnNvciAmJiAoZGlyIDwgMCA/IGN1cnNvci5jaGlsZEJlZm9yZSh0b2tlbi5mcm9tKSA6IGN1cnNvci5jaGlsZEFmdGVyKHRva2VuLnRvKSkpXG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIGlmIChkaXIgPCAwID8gY3Vyc29yLnRvIDw9IHRva2VuLmZyb20gOiBjdXJzb3IuZnJvbSA+PSB0b2tlbi50bykge1xuICAgICAgICAgICAgICAgIGlmIChkZXB0aCA9PSAwICYmIG1hdGNoaW5nLmluZGV4T2YoY3Vyc29yLnR5cGUubmFtZSkgPiAtMSAmJiBjdXJzb3IuZnJvbSA8IGN1cnNvci50bykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzdGFydDogZmlyc3RUb2tlbiwgZW5kOiB7IGZyb206IGN1cnNvci5mcm9tLCB0bzogY3Vyc29yLnRvIH0sIG1hdGNoZWQ6IHRydWUgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobWF0Y2hpbmdOb2RlcyhjdXJzb3IudHlwZSwgZGlyLCBicmFja2V0cykpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVwdGgrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobWF0Y2hpbmdOb2RlcyhjdXJzb3IudHlwZSwgLWRpciwgYnJhY2tldHMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkZXB0aCA9PSAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydDogZmlyc3RUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGN1cnNvci5mcm9tID09IGN1cnNvci50byA/IHVuZGVmaW5lZCA6IHsgZnJvbTogY3Vyc29yLmZyb20sIHRvOiBjdXJzb3IudG8gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVkOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgZGVwdGgtLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gd2hpbGUgKGRpciA8IDAgPyBjdXJzb3IucHJldlNpYmxpbmcoKSA6IGN1cnNvci5uZXh0U2libGluZygpKTtcbiAgICByZXR1cm4geyBzdGFydDogZmlyc3RUb2tlbiwgbWF0Y2hlZDogZmFsc2UgfTtcbn1cbmZ1bmN0aW9uIG1hdGNoUGxhaW5CcmFja2V0cyhzdGF0ZSwgcG9zLCBkaXIsIHRyZWUsIHRva2VuVHlwZSwgbWF4U2NhbkRpc3RhbmNlLCBicmFja2V0cykge1xuICAgIGxldCBzdGFydENoID0gZGlyIDwgMCA/IHN0YXRlLnNsaWNlRG9jKHBvcyAtIDEsIHBvcykgOiBzdGF0ZS5zbGljZURvYyhwb3MsIHBvcyArIDEpO1xuICAgIGxldCBicmFja2V0ID0gYnJhY2tldHMuaW5kZXhPZihzdGFydENoKTtcbiAgICBpZiAoYnJhY2tldCA8IDAgfHwgKGJyYWNrZXQgJSAyID09IDApICE9IChkaXIgPiAwKSlcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgbGV0IHN0YXJ0VG9rZW4gPSB7IGZyb206IGRpciA8IDAgPyBwb3MgLSAxIDogcG9zLCB0bzogZGlyID4gMCA/IHBvcyArIDEgOiBwb3MgfTtcbiAgICBsZXQgaXRlciA9IHN0YXRlLmRvYy5pdGVyUmFuZ2UocG9zLCBkaXIgPiAwID8gc3RhdGUuZG9jLmxlbmd0aCA6IDApLCBkZXB0aCA9IDA7XG4gICAgZm9yIChsZXQgZGlzdGFuY2UgPSAwOyAhKGl0ZXIubmV4dCgpKS5kb25lICYmIGRpc3RhbmNlIDw9IG1heFNjYW5EaXN0YW5jZTspIHtcbiAgICAgICAgbGV0IHRleHQgPSBpdGVyLnZhbHVlO1xuICAgICAgICBpZiAoZGlyIDwgMClcbiAgICAgICAgICAgIGRpc3RhbmNlICs9IHRleHQubGVuZ3RoO1xuICAgICAgICBsZXQgYmFzZVBvcyA9IHBvcyArIGRpc3RhbmNlICogZGlyO1xuICAgICAgICBmb3IgKGxldCBwb3MgPSBkaXIgPiAwID8gMCA6IHRleHQubGVuZ3RoIC0gMSwgZW5kID0gZGlyID4gMCA/IHRleHQubGVuZ3RoIDogLTE7IHBvcyAhPSBlbmQ7IHBvcyArPSBkaXIpIHtcbiAgICAgICAgICAgIGxldCBmb3VuZCA9IGJyYWNrZXRzLmluZGV4T2YodGV4dFtwb3NdKTtcbiAgICAgICAgICAgIGlmIChmb3VuZCA8IDAgfHwgdHJlZS5yZXNvbHZlSW5uZXIoYmFzZVBvcyArIHBvcywgMSkudHlwZSAhPSB0b2tlblR5cGUpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBpZiAoKGZvdW5kICUgMiA9PSAwKSA9PSAoZGlyID4gMCkpIHtcbiAgICAgICAgICAgICAgICBkZXB0aCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZGVwdGggPT0gMSkgeyAvLyBDbG9zaW5nXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3RhcnQ6IHN0YXJ0VG9rZW4sIGVuZDogeyBmcm9tOiBiYXNlUG9zICsgcG9zLCB0bzogYmFzZVBvcyArIHBvcyArIDEgfSwgbWF0Y2hlZDogKGZvdW5kID4+IDEpID09IChicmFja2V0ID4+IDEpIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkZXB0aC0tO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkaXIgPiAwKVxuICAgICAgICAgICAgZGlzdGFuY2UgKz0gdGV4dC5sZW5ndGg7XG4gICAgfVxuICAgIHJldHVybiBpdGVyLmRvbmUgPyB7IHN0YXJ0OiBzdGFydFRva2VuLCBtYXRjaGVkOiBmYWxzZSB9IDogbnVsbDtcbn1cblxuLy8gQ291bnRzIHRoZSBjb2x1bW4gb2Zmc2V0IGluIGEgc3RyaW5nLCB0YWtpbmcgdGFicyBpbnRvIGFjY291bnQuXG4vLyBVc2VkIG1vc3RseSB0byBmaW5kIGluZGVudGF0aW9uLlxuZnVuY3Rpb24gY291bnRDb2woc3RyaW5nLCBlbmQsIHRhYlNpemUsIHN0YXJ0SW5kZXggPSAwLCBzdGFydFZhbHVlID0gMCkge1xuICAgIGlmIChlbmQgPT0gbnVsbCkge1xuICAgICAgICBlbmQgPSBzdHJpbmcuc2VhcmNoKC9bXlxcc1xcdTAwYTBdLyk7XG4gICAgICAgIGlmIChlbmQgPT0gLTEpXG4gICAgICAgICAgICBlbmQgPSBzdHJpbmcubGVuZ3RoO1xuICAgIH1cbiAgICBsZXQgbiA9IHN0YXJ0VmFsdWU7XG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0SW5kZXg7IGkgPCBlbmQ7IGkrKykge1xuICAgICAgICBpZiAoc3RyaW5nLmNoYXJDb2RlQXQoaSkgPT0gOSlcbiAgICAgICAgICAgIG4gKz0gdGFiU2l6ZSAtIChuICUgdGFiU2l6ZSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIG4rKztcbiAgICB9XG4gICAgcmV0dXJuIG47XG59XG4vKipcbkVuY2Fwc3VsYXRlcyBhIHNpbmdsZSBsaW5lIG9mIGlucHV0LiBHaXZlbiB0byBzdHJlYW0gc3ludGF4IGNvZGUsXG53aGljaCB1c2VzIGl0IHRvIHRva2VuaXplIHRoZSBjb250ZW50LlxuKi9cbmNsYXNzIFN0cmluZ1N0cmVhbSB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgc3RyZWFtLlxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIGxpbmUuXG4gICAgKi9cbiAgICBzdHJpbmcsIHRhYlNpemUsIFxuICAgIC8qKlxuICAgIFRoZSBjdXJyZW50IGluZGVudCB1bml0IHNpemUuXG4gICAgKi9cbiAgICBpbmRlbnRVbml0KSB7XG4gICAgICAgIHRoaXMuc3RyaW5nID0gc3RyaW5nO1xuICAgICAgICB0aGlzLnRhYlNpemUgPSB0YWJTaXplO1xuICAgICAgICB0aGlzLmluZGVudFVuaXQgPSBpbmRlbnRVbml0O1xuICAgICAgICAvKipcbiAgICAgICAgVGhlIGN1cnJlbnQgcG9zaXRpb24gb24gdGhlIGxpbmUuXG4gICAgICAgICovXG4gICAgICAgIHRoaXMucG9zID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgIFRoZSBzdGFydCBwb3NpdGlvbiBvZiB0aGUgY3VycmVudCB0b2tlbi5cbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdGFydCA9IDA7XG4gICAgICAgIHRoaXMubGFzdENvbHVtblBvcyA9IDA7XG4gICAgICAgIHRoaXMubGFzdENvbHVtblZhbHVlID0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgVHJ1ZSBpZiB3ZSBhcmUgYXQgdGhlIGVuZCBvZiB0aGUgbGluZS5cbiAgICAqL1xuICAgIGVvbCgpIHsgcmV0dXJuIHRoaXMucG9zID49IHRoaXMuc3RyaW5nLmxlbmd0aDsgfVxuICAgIC8qKlxuICAgIFRydWUgaWYgd2UgYXJlIGF0IHRoZSBzdGFydCBvZiB0aGUgbGluZS5cbiAgICAqL1xuICAgIHNvbCgpIHsgcmV0dXJuIHRoaXMucG9zID09IDA7IH1cbiAgICAvKipcbiAgICBHZXQgdGhlIG5leHQgY29kZSB1bml0IGFmdGVyIHRoZSBjdXJyZW50IHBvc2l0aW9uLCBvciB1bmRlZmluZWRcbiAgICBpZiB3ZSdyZSBhdCB0aGUgZW5kIG9mIHRoZSBsaW5lLlxuICAgICovXG4gICAgcGVlaygpIHsgcmV0dXJuIHRoaXMuc3RyaW5nLmNoYXJBdCh0aGlzLnBvcykgfHwgdW5kZWZpbmVkOyB9XG4gICAgLyoqXG4gICAgUmVhZCB0aGUgbmV4dCBjb2RlIHVuaXQgYW5kIGFkdmFuY2UgYHRoaXMucG9zYC5cbiAgICAqL1xuICAgIG5leHQoKSB7XG4gICAgICAgIGlmICh0aGlzLnBvcyA8IHRoaXMuc3RyaW5nLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0cmluZy5jaGFyQXQodGhpcy5wb3MrKyk7XG4gICAgfVxuICAgIC8qKlxuICAgIE1hdGNoIHRoZSBuZXh0IGNoYXJhY3RlciBhZ2FpbnN0IHRoZSBnaXZlbiBzdHJpbmcsIHJlZ3VsYXJcbiAgICBleHByZXNzaW9uLCBvciBwcmVkaWNhdGUuIENvbnN1bWUgYW5kIHJldHVybiBpdCBpZiBpdCBtYXRjaGVzLlxuICAgICovXG4gICAgZWF0KG1hdGNoKSB7XG4gICAgICAgIGxldCBjaCA9IHRoaXMuc3RyaW5nLmNoYXJBdCh0aGlzLnBvcyk7XG4gICAgICAgIGxldCBvaztcbiAgICAgICAgaWYgKHR5cGVvZiBtYXRjaCA9PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgb2sgPSBjaCA9PSBtYXRjaDtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgb2sgPSBjaCAmJiAobWF0Y2ggaW5zdGFuY2VvZiBSZWdFeHAgPyBtYXRjaC50ZXN0KGNoKSA6IG1hdGNoKGNoKSk7XG4gICAgICAgIGlmIChvaykge1xuICAgICAgICAgICAgKyt0aGlzLnBvcztcbiAgICAgICAgICAgIHJldHVybiBjaDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBDb250aW51ZSBtYXRjaGluZyBjaGFyYWN0ZXJzIHRoYXQgbWF0Y2ggdGhlIGdpdmVuIHN0cmluZyxcbiAgICByZWd1bGFyIGV4cHJlc3Npb24sIG9yIHByZWRpY2F0ZSBmdW5jdGlvbi4gUmV0dXJuIHRydWUgaWYgYW55XG4gICAgY2hhcmFjdGVycyB3ZXJlIGNvbnN1bWVkLlxuICAgICovXG4gICAgZWF0V2hpbGUobWF0Y2gpIHtcbiAgICAgICAgbGV0IHN0YXJ0ID0gdGhpcy5wb3M7XG4gICAgICAgIHdoaWxlICh0aGlzLmVhdChtYXRjaCkpIHsgfVxuICAgICAgICByZXR1cm4gdGhpcy5wb3MgPiBzdGFydDtcbiAgICB9XG4gICAgLyoqXG4gICAgQ29uc3VtZSB3aGl0ZXNwYWNlIGFoZWFkIG9mIGB0aGlzLnBvc2AuIFJldHVybiB0cnVlIGlmIGFueSB3YXNcbiAgICBmb3VuZC5cbiAgICAqL1xuICAgIGVhdFNwYWNlKCkge1xuICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLnBvcztcbiAgICAgICAgd2hpbGUgKC9bXFxzXFx1MDBhMF0vLnRlc3QodGhpcy5zdHJpbmcuY2hhckF0KHRoaXMucG9zKSkpXG4gICAgICAgICAgICArK3RoaXMucG9zO1xuICAgICAgICByZXR1cm4gdGhpcy5wb3MgPiBzdGFydDtcbiAgICB9XG4gICAgLyoqXG4gICAgTW92ZSB0byB0aGUgZW5kIG9mIHRoZSBsaW5lLlxuICAgICovXG4gICAgc2tpcFRvRW5kKCkgeyB0aGlzLnBvcyA9IHRoaXMuc3RyaW5nLmxlbmd0aDsgfVxuICAgIC8qKlxuICAgIE1vdmUgdG8gZGlyZWN0bHkgYmVmb3JlIHRoZSBnaXZlbiBjaGFyYWN0ZXIsIGlmIGZvdW5kIG9uIHRoZVxuICAgIGN1cnJlbnQgbGluZS5cbiAgICAqL1xuICAgIHNraXBUbyhjaCkge1xuICAgICAgICBsZXQgZm91bmQgPSB0aGlzLnN0cmluZy5pbmRleE9mKGNoLCB0aGlzLnBvcyk7XG4gICAgICAgIGlmIChmb3VuZCA+IC0xKSB7XG4gICAgICAgICAgICB0aGlzLnBvcyA9IGZvdW5kO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgTW92ZSBiYWNrIGBuYCBjaGFyYWN0ZXJzLlxuICAgICovXG4gICAgYmFja1VwKG4pIHsgdGhpcy5wb3MgLT0gbjsgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgY29sdW1uIHBvc2l0aW9uIGF0IGB0aGlzLnBvc2AuXG4gICAgKi9cbiAgICBjb2x1bW4oKSB7XG4gICAgICAgIGlmICh0aGlzLmxhc3RDb2x1bW5Qb3MgPCB0aGlzLnN0YXJ0KSB7XG4gICAgICAgICAgICB0aGlzLmxhc3RDb2x1bW5WYWx1ZSA9IGNvdW50Q29sKHRoaXMuc3RyaW5nLCB0aGlzLnN0YXJ0LCB0aGlzLnRhYlNpemUsIHRoaXMubGFzdENvbHVtblBvcywgdGhpcy5sYXN0Q29sdW1uVmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5sYXN0Q29sdW1uUG9zID0gdGhpcy5zdGFydDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5sYXN0Q29sdW1uVmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgaW5kZW50YXRpb24gY29sdW1uIG9mIHRoZSBjdXJyZW50IGxpbmUuXG4gICAgKi9cbiAgICBpbmRlbnRhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGNvdW50Q29sKHRoaXMuc3RyaW5nLCBudWxsLCB0aGlzLnRhYlNpemUpO1xuICAgIH1cbiAgICAvKipcbiAgICBNYXRjaCB0aGUgaW5wdXQgYWdhaW5zdCB0aGUgZ2l2ZW4gc3RyaW5nIG9yIHJlZ3VsYXIgZXhwcmVzc2lvblxuICAgICh3aGljaCBzaG91bGQgc3RhcnQgd2l0aCBhIGBeYCkuIFJldHVybiB0cnVlIG9yIHRoZSByZWdleHAgbWF0Y2hcbiAgICBpZiBpdCBtYXRjaGVzLlxuICAgIFxuICAgIFVubGVzcyBgY29uc3VtZWAgaXMgc2V0IHRvIGBmYWxzZWAsIHRoaXMgd2lsbCBtb3ZlIGB0aGlzLnBvc2BcbiAgICBwYXN0IHRoZSBtYXRjaGVkIHRleHQuXG4gICAgXG4gICAgV2hlbiBtYXRjaGluZyBhIHN0cmluZyBgY2FzZUluc2Vuc2l0aXZlYCBjYW4gYmUgc2V0IHRvIHRydWUgdG9cbiAgICBtYWtlIHRoZSBtYXRjaCBjYXNlLWluc2Vuc2l0aXZlLlxuICAgICovXG4gICAgbWF0Y2gocGF0dGVybiwgY29uc3VtZSwgY2FzZUluc2Vuc2l0aXZlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcGF0dGVybiA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBsZXQgY2FzZWQgPSAoc3RyKSA9PiBjYXNlSW5zZW5zaXRpdmUgPyBzdHIudG9Mb3dlckNhc2UoKSA6IHN0cjtcbiAgICAgICAgICAgIGxldCBzdWJzdHIgPSB0aGlzLnN0cmluZy5zdWJzdHIodGhpcy5wb3MsIHBhdHRlcm4ubGVuZ3RoKTtcbiAgICAgICAgICAgIGlmIChjYXNlZChzdWJzdHIpID09IGNhc2VkKHBhdHRlcm4pKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnN1bWUgIT09IGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcyArPSBwYXR0ZXJuLmxlbmd0aDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBtYXRjaCA9IHRoaXMuc3RyaW5nLnNsaWNlKHRoaXMucG9zKS5tYXRjaChwYXR0ZXJuKTtcbiAgICAgICAgICAgIGlmIChtYXRjaCAmJiBtYXRjaC5pbmRleCA+IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBpZiAobWF0Y2ggJiYgY29uc3VtZSAhPT0gZmFsc2UpXG4gICAgICAgICAgICAgICAgdGhpcy5wb3MgKz0gbWF0Y2hbMF0ubGVuZ3RoO1xuICAgICAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgY3VycmVudCB0b2tlbi5cbiAgICAqL1xuICAgIGN1cnJlbnQoKSB7IHJldHVybiB0aGlzLnN0cmluZy5zbGljZSh0aGlzLnN0YXJ0LCB0aGlzLnBvcyk7IH1cbn1cblxuZnVuY3Rpb24gZnVsbFBhcnNlcihzcGVjKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogc3BlYy5uYW1lIHx8IFwiXCIsXG4gICAgICAgIHRva2VuOiBzcGVjLnRva2VuLFxuICAgICAgICBibGFua0xpbmU6IHNwZWMuYmxhbmtMaW5lIHx8ICgoKSA9PiB7IH0pLFxuICAgICAgICBzdGFydFN0YXRlOiBzcGVjLnN0YXJ0U3RhdGUgfHwgKCgpID0+IHRydWUpLFxuICAgICAgICBjb3B5U3RhdGU6IHNwZWMuY29weVN0YXRlIHx8IGRlZmF1bHRDb3B5U3RhdGUsXG4gICAgICAgIGluZGVudDogc3BlYy5pbmRlbnQgfHwgKCgpID0+IG51bGwpLFxuICAgICAgICBsYW5ndWFnZURhdGE6IHNwZWMubGFuZ3VhZ2VEYXRhIHx8IHt9LFxuICAgICAgICB0b2tlblRhYmxlOiBzcGVjLnRva2VuVGFibGUgfHwgbm9Ub2tlbnNcbiAgICB9O1xufVxuZnVuY3Rpb24gZGVmYXVsdENvcHlTdGF0ZShzdGF0ZSkge1xuICAgIGlmICh0eXBlb2Ygc3RhdGUgIT0gXCJvYmplY3RcIilcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIGxldCBuZXdTdGF0ZSA9IHt9O1xuICAgIGZvciAobGV0IHByb3AgaW4gc3RhdGUpIHtcbiAgICAgICAgbGV0IHZhbCA9IHN0YXRlW3Byb3BdO1xuICAgICAgICBuZXdTdGF0ZVtwcm9wXSA9ICh2YWwgaW5zdGFuY2VvZiBBcnJheSA/IHZhbC5zbGljZSgpIDogdmFsKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld1N0YXRlO1xufVxuLyoqXG5BIFtsYW5ndWFnZV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5MYW5ndWFnZSkgY2xhc3MgYmFzZWQgb24gYSBDb2RlTWlycm9yXG41LXN0eWxlIFtzdHJlYW1pbmcgcGFyc2VyXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLlN0cmVhbVBhcnNlcikuXG4qL1xuY2xhc3MgU3RyZWFtTGFuZ3VhZ2UgZXh0ZW5kcyBMYW5ndWFnZSB7XG4gICAgY29uc3RydWN0b3IocGFyc2VyKSB7XG4gICAgICAgIGxldCBkYXRhID0gZGVmaW5lTGFuZ3VhZ2VGYWNldChwYXJzZXIubGFuZ3VhZ2VEYXRhKTtcbiAgICAgICAgbGV0IHAgPSBmdWxsUGFyc2VyKHBhcnNlciksIHNlbGY7XG4gICAgICAgIGxldCBpbXBsID0gbmV3IGNsYXNzIGV4dGVuZHMgUGFyc2VyIHtcbiAgICAgICAgICAgIGNyZWF0ZVBhcnNlKGlucHV0LCBmcmFnbWVudHMsIHJhbmdlcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUGFyc2Uoc2VsZiwgaW5wdXQsIGZyYWdtZW50cywgcmFuZ2VzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgc3VwZXIoZGF0YSwgaW1wbCwgW2luZGVudFNlcnZpY2Uub2YoKGN4LCBwb3MpID0+IHRoaXMuZ2V0SW5kZW50KGN4LCBwb3MpKV0sIHBhcnNlci5uYW1lKTtcbiAgICAgICAgdGhpcy50b3BOb2RlID0gZG9jSUQoZGF0YSk7XG4gICAgICAgIHNlbGYgPSB0aGlzO1xuICAgICAgICB0aGlzLnN0cmVhbVBhcnNlciA9IHA7XG4gICAgICAgIHRoaXMuc3RhdGVBZnRlciA9IG5ldyBOb2RlUHJvcCh7IHBlck5vZGU6IHRydWUgfSk7XG4gICAgICAgIHRoaXMudG9rZW5UYWJsZSA9IHBhcnNlci50b2tlblRhYmxlID8gbmV3IFRva2VuVGFibGUocC50b2tlblRhYmxlKSA6IGRlZmF1bHRUb2tlblRhYmxlO1xuICAgIH1cbiAgICAvKipcbiAgICBEZWZpbmUgYSBzdHJlYW0gbGFuZ3VhZ2UuXG4gICAgKi9cbiAgICBzdGF0aWMgZGVmaW5lKHNwZWMpIHsgcmV0dXJuIG5ldyBTdHJlYW1MYW5ndWFnZShzcGVjKTsgfVxuICAgIGdldEluZGVudChjeCwgcG9zKSB7XG4gICAgICAgIGxldCB0cmVlID0gc3ludGF4VHJlZShjeC5zdGF0ZSksIGF0ID0gdHJlZS5yZXNvbHZlKHBvcyk7XG4gICAgICAgIHdoaWxlIChhdCAmJiBhdC50eXBlICE9IHRoaXMudG9wTm9kZSlcbiAgICAgICAgICAgIGF0ID0gYXQucGFyZW50O1xuICAgICAgICBpZiAoIWF0KVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGxldCBzdGFydCA9IGZpbmRTdGF0ZSh0aGlzLCB0cmVlLCAwLCBhdC5mcm9tLCBwb3MpLCBzdGF0ZVBvcywgc3RhdGU7XG4gICAgICAgIGlmIChzdGFydCkge1xuICAgICAgICAgICAgc3RhdGUgPSBzdGFydC5zdGF0ZTtcbiAgICAgICAgICAgIHN0YXRlUG9zID0gc3RhcnQucG9zICsgMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0YXRlID0gdGhpcy5zdHJlYW1QYXJzZXIuc3RhcnRTdGF0ZShjeC51bml0KTtcbiAgICAgICAgICAgIHN0YXRlUG9zID0gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAocG9zIC0gc3RhdGVQb3MgPiAxMDAwMCAvKiBDLk1heEluZGVudFNjYW5EaXN0ICovKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHdoaWxlIChzdGF0ZVBvcyA8IHBvcykge1xuICAgICAgICAgICAgbGV0IGxpbmUgPSBjeC5zdGF0ZS5kb2MubGluZUF0KHN0YXRlUG9zKSwgZW5kID0gTWF0aC5taW4ocG9zLCBsaW5lLnRvKTtcbiAgICAgICAgICAgIGlmIChsaW5lLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGxldCBzdHJlYW0gPSBuZXcgU3RyaW5nU3RyZWFtKGxpbmUudGV4dCwgY3guc3RhdGUudGFiU2l6ZSwgY3gudW5pdCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHN0cmVhbS5wb3MgPCBlbmQgLSBsaW5lLmZyb20pXG4gICAgICAgICAgICAgICAgICAgIHJlYWRUb2tlbih0aGlzLnN0cmVhbVBhcnNlci50b2tlbiwgc3RyZWFtLCBzdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0cmVhbVBhcnNlci5ibGFua0xpbmUoc3RhdGUsIGN4LnVuaXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVuZCA9PSBwb3MpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBzdGF0ZVBvcyA9IGxpbmUudG8gKyAxO1xuICAgICAgICB9XG4gICAgICAgIGxldCB7IHRleHQgfSA9IGN4LmxpbmVBdChwb3MpO1xuICAgICAgICByZXR1cm4gdGhpcy5zdHJlYW1QYXJzZXIuaW5kZW50KHN0YXRlLCAvXlxccyooLiopLy5leGVjKHRleHQpWzFdLCBjeCk7XG4gICAgfVxuICAgIGdldCBhbGxvd3NOZXN0aW5nKCkgeyByZXR1cm4gZmFsc2U7IH1cbn1cbmZ1bmN0aW9uIGZpbmRTdGF0ZShsYW5nLCB0cmVlLCBvZmYsIHN0YXJ0UG9zLCBiZWZvcmUpIHtcbiAgICBsZXQgc3RhdGUgPSBvZmYgPj0gc3RhcnRQb3MgJiYgb2ZmICsgdHJlZS5sZW5ndGggPD0gYmVmb3JlICYmIHRyZWUucHJvcChsYW5nLnN0YXRlQWZ0ZXIpO1xuICAgIGlmIChzdGF0ZSlcbiAgICAgICAgcmV0dXJuIHsgc3RhdGU6IGxhbmcuc3RyZWFtUGFyc2VyLmNvcHlTdGF0ZShzdGF0ZSksIHBvczogb2ZmICsgdHJlZS5sZW5ndGggfTtcbiAgICBmb3IgKGxldCBpID0gdHJlZS5jaGlsZHJlbi5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICBsZXQgY2hpbGQgPSB0cmVlLmNoaWxkcmVuW2ldLCBwb3MgPSBvZmYgKyB0cmVlLnBvc2l0aW9uc1tpXTtcbiAgICAgICAgbGV0IGZvdW5kID0gY2hpbGQgaW5zdGFuY2VvZiBUcmVlICYmIHBvcyA8IGJlZm9yZSAmJiBmaW5kU3RhdGUobGFuZywgY2hpbGQsIHBvcywgc3RhcnRQb3MsIGJlZm9yZSk7XG4gICAgICAgIGlmIChmb3VuZClcbiAgICAgICAgICAgIHJldHVybiBmb3VuZDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBjdXRUcmVlKGxhbmcsIHRyZWUsIGZyb20sIHRvLCBpbnNpZGUpIHtcbiAgICBpZiAoaW5zaWRlICYmIGZyb20gPD0gMCAmJiB0byA+PSB0cmVlLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIHRyZWU7XG4gICAgaWYgKCFpbnNpZGUgJiYgdHJlZS50eXBlID09IGxhbmcudG9wTm9kZSlcbiAgICAgICAgaW5zaWRlID0gdHJ1ZTtcbiAgICBmb3IgKGxldCBpID0gdHJlZS5jaGlsZHJlbi5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICBsZXQgcG9zID0gdHJlZS5wb3NpdGlvbnNbaV0sIGNoaWxkID0gdHJlZS5jaGlsZHJlbltpXSwgaW5uZXI7XG4gICAgICAgIGlmIChwb3MgPCB0byAmJiBjaGlsZCBpbnN0YW5jZW9mIFRyZWUpIHtcbiAgICAgICAgICAgIGlmICghKGlubmVyID0gY3V0VHJlZShsYW5nLCBjaGlsZCwgZnJvbSAtIHBvcywgdG8gLSBwb3MsIGluc2lkZSkpKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgcmV0dXJuICFpbnNpZGUgPyBpbm5lclxuICAgICAgICAgICAgICAgIDogbmV3IFRyZWUodHJlZS50eXBlLCB0cmVlLmNoaWxkcmVuLnNsaWNlKDAsIGkpLmNvbmNhdChpbm5lciksIHRyZWUucG9zaXRpb25zLnNsaWNlKDAsIGkgKyAxKSwgcG9zICsgaW5uZXIubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGZpbmRTdGFydEluRnJhZ21lbnRzKGxhbmcsIGZyYWdtZW50cywgc3RhcnRQb3MsIGVkaXRvclN0YXRlKSB7XG4gICAgZm9yIChsZXQgZiBvZiBmcmFnbWVudHMpIHtcbiAgICAgICAgbGV0IGZyb20gPSBmLmZyb20gKyAoZi5vcGVuU3RhcnQgPyAyNSA6IDApLCB0byA9IGYudG8gLSAoZi5vcGVuRW5kID8gMjUgOiAwKTtcbiAgICAgICAgbGV0IGZvdW5kID0gZnJvbSA8PSBzdGFydFBvcyAmJiB0byA+IHN0YXJ0UG9zICYmIGZpbmRTdGF0ZShsYW5nLCBmLnRyZWUsIDAgLSBmLm9mZnNldCwgc3RhcnRQb3MsIHRvKSwgdHJlZTtcbiAgICAgICAgaWYgKGZvdW5kICYmICh0cmVlID0gY3V0VHJlZShsYW5nLCBmLnRyZWUsIHN0YXJ0UG9zICsgZi5vZmZzZXQsIGZvdW5kLnBvcyArIGYub2Zmc2V0LCBmYWxzZSkpKVxuICAgICAgICAgICAgcmV0dXJuIHsgc3RhdGU6IGZvdW5kLnN0YXRlLCB0cmVlIH07XG4gICAgfVxuICAgIHJldHVybiB7IHN0YXRlOiBsYW5nLnN0cmVhbVBhcnNlci5zdGFydFN0YXRlKGVkaXRvclN0YXRlID8gZ2V0SW5kZW50VW5pdChlZGl0b3JTdGF0ZSkgOiA0KSwgdHJlZTogVHJlZS5lbXB0eSB9O1xufVxuY2xhc3MgUGFyc2Uge1xuICAgIGNvbnN0cnVjdG9yKGxhbmcsIGlucHV0LCBmcmFnbWVudHMsIHJhbmdlcykge1xuICAgICAgICB0aGlzLmxhbmcgPSBsYW5nO1xuICAgICAgICB0aGlzLmlucHV0ID0gaW5wdXQ7XG4gICAgICAgIHRoaXMuZnJhZ21lbnRzID0gZnJhZ21lbnRzO1xuICAgICAgICB0aGlzLnJhbmdlcyA9IHJhbmdlcztcbiAgICAgICAgdGhpcy5zdG9wcGVkQXQgPSBudWxsO1xuICAgICAgICB0aGlzLmNodW5rcyA9IFtdO1xuICAgICAgICB0aGlzLmNodW5rUG9zID0gW107XG4gICAgICAgIHRoaXMuY2h1bmsgPSBbXTtcbiAgICAgICAgdGhpcy5jaHVua1JldXNlZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5yYW5nZUluZGV4ID0gMDtcbiAgICAgICAgdGhpcy50byA9IHJhbmdlc1tyYW5nZXMubGVuZ3RoIC0gMV0udG87XG4gICAgICAgIGxldCBjb250ZXh0ID0gUGFyc2VDb250ZXh0LmdldCgpLCBmcm9tID0gcmFuZ2VzWzBdLmZyb207XG4gICAgICAgIGxldCB7IHN0YXRlLCB0cmVlIH0gPSBmaW5kU3RhcnRJbkZyYWdtZW50cyhsYW5nLCBmcmFnbWVudHMsIGZyb20sIGNvbnRleHQgPT09IG51bGwgfHwgY29udGV4dCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29udGV4dC5zdGF0ZSk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgdGhpcy5wYXJzZWRQb3MgPSB0aGlzLmNodW5rU3RhcnQgPSBmcm9tICsgdHJlZS5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJlZS5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5jaHVua3MucHVzaCh0cmVlLmNoaWxkcmVuW2ldKTtcbiAgICAgICAgICAgIHRoaXMuY2h1bmtQb3MucHVzaCh0cmVlLnBvc2l0aW9uc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRleHQgJiYgdGhpcy5wYXJzZWRQb3MgPCBjb250ZXh0LnZpZXdwb3J0LmZyb20gLSAxMDAwMDAgLyogQy5NYXhEaXN0YW5jZUJlZm9yZVZpZXdwb3J0ICovKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5sYW5nLnN0cmVhbVBhcnNlci5zdGFydFN0YXRlKGdldEluZGVudFVuaXQoY29udGV4dC5zdGF0ZSkpO1xuICAgICAgICAgICAgY29udGV4dC5za2lwVW50aWxJblZpZXcodGhpcy5wYXJzZWRQb3MsIGNvbnRleHQudmlld3BvcnQuZnJvbSk7XG4gICAgICAgICAgICB0aGlzLnBhcnNlZFBvcyA9IGNvbnRleHQudmlld3BvcnQuZnJvbTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1vdmVSYW5nZUluZGV4KCk7XG4gICAgfVxuICAgIGFkdmFuY2UoKSB7XG4gICAgICAgIGxldCBjb250ZXh0ID0gUGFyc2VDb250ZXh0LmdldCgpO1xuICAgICAgICBsZXQgcGFyc2VFbmQgPSB0aGlzLnN0b3BwZWRBdCA9PSBudWxsID8gdGhpcy50byA6IE1hdGgubWluKHRoaXMudG8sIHRoaXMuc3RvcHBlZEF0KTtcbiAgICAgICAgbGV0IGVuZCA9IE1hdGgubWluKHBhcnNlRW5kLCB0aGlzLmNodW5rU3RhcnQgKyAyMDQ4IC8qIEMuQ2h1bmtTaXplICovKTtcbiAgICAgICAgaWYgKGNvbnRleHQpXG4gICAgICAgICAgICBlbmQgPSBNYXRoLm1pbihlbmQsIGNvbnRleHQudmlld3BvcnQudG8pO1xuICAgICAgICB3aGlsZSAodGhpcy5wYXJzZWRQb3MgPCBlbmQpXG4gICAgICAgICAgICB0aGlzLnBhcnNlTGluZShjb250ZXh0KTtcbiAgICAgICAgaWYgKHRoaXMuY2h1bmtTdGFydCA8IHRoaXMucGFyc2VkUG9zKVxuICAgICAgICAgICAgdGhpcy5maW5pc2hDaHVuaygpO1xuICAgICAgICBpZiAodGhpcy5wYXJzZWRQb3MgPj0gcGFyc2VFbmQpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maW5pc2goKTtcbiAgICAgICAgaWYgKGNvbnRleHQgJiYgdGhpcy5wYXJzZWRQb3MgPj0gY29udGV4dC52aWV3cG9ydC50bykge1xuICAgICAgICAgICAgY29udGV4dC5za2lwVW50aWxJblZpZXcodGhpcy5wYXJzZWRQb3MsIHBhcnNlRW5kKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbmlzaCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBzdG9wQXQocG9zKSB7XG4gICAgICAgIHRoaXMuc3RvcHBlZEF0ID0gcG9zO1xuICAgIH1cbiAgICBsaW5lQWZ0ZXIocG9zKSB7XG4gICAgICAgIGxldCBjaHVuayA9IHRoaXMuaW5wdXQuY2h1bmsocG9zKTtcbiAgICAgICAgaWYgKCF0aGlzLmlucHV0LmxpbmVDaHVua3MpIHtcbiAgICAgICAgICAgIGxldCBlb2wgPSBjaHVuay5pbmRleE9mKFwiXFxuXCIpO1xuICAgICAgICAgICAgaWYgKGVvbCA+IC0xKVxuICAgICAgICAgICAgICAgIGNodW5rID0gY2h1bmsuc2xpY2UoMCwgZW9sKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjaHVuayA9PSBcIlxcblwiKSB7XG4gICAgICAgICAgICBjaHVuayA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBvcyArIGNodW5rLmxlbmd0aCA8PSB0aGlzLnRvID8gY2h1bmsgOiBjaHVuay5zbGljZSgwLCB0aGlzLnRvIC0gcG9zKTtcbiAgICB9XG4gICAgbmV4dExpbmUoKSB7XG4gICAgICAgIGxldCBmcm9tID0gdGhpcy5wYXJzZWRQb3MsIGxpbmUgPSB0aGlzLmxpbmVBZnRlcihmcm9tKSwgZW5kID0gZnJvbSArIGxpbmUubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IHRoaXMucmFuZ2VJbmRleDs7KSB7XG4gICAgICAgICAgICBsZXQgcmFuZ2VFbmQgPSB0aGlzLnJhbmdlc1tpbmRleF0udG87XG4gICAgICAgICAgICBpZiAocmFuZ2VFbmQgPj0gZW5kKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgbGluZSA9IGxpbmUuc2xpY2UoMCwgcmFuZ2VFbmQgLSAoZW5kIC0gbGluZS5sZW5ndGgpKTtcbiAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICBpZiAoaW5kZXggPT0gdGhpcy5yYW5nZXMubGVuZ3RoKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgbGV0IHJhbmdlU3RhcnQgPSB0aGlzLnJhbmdlc1tpbmRleF0uZnJvbTtcbiAgICAgICAgICAgIGxldCBhZnRlciA9IHRoaXMubGluZUFmdGVyKHJhbmdlU3RhcnQpO1xuICAgICAgICAgICAgbGluZSArPSBhZnRlcjtcbiAgICAgICAgICAgIGVuZCA9IHJhbmdlU3RhcnQgKyBhZnRlci5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgbGluZSwgZW5kIH07XG4gICAgfVxuICAgIHNraXBHYXBzVG8ocG9zLCBvZmZzZXQsIHNpZGUpIHtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgbGV0IGVuZCA9IHRoaXMucmFuZ2VzW3RoaXMucmFuZ2VJbmRleF0udG8sIG9mZlBvcyA9IHBvcyArIG9mZnNldDtcbiAgICAgICAgICAgIGlmIChzaWRlID4gMCA/IGVuZCA+IG9mZlBvcyA6IGVuZCA+PSBvZmZQb3MpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLnJhbmdlc1srK3RoaXMucmFuZ2VJbmRleF0uZnJvbTtcbiAgICAgICAgICAgIG9mZnNldCArPSBzdGFydCAtIGVuZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2Zmc2V0O1xuICAgIH1cbiAgICBtb3ZlUmFuZ2VJbmRleCgpIHtcbiAgICAgICAgd2hpbGUgKHRoaXMucmFuZ2VzW3RoaXMucmFuZ2VJbmRleF0udG8gPCB0aGlzLnBhcnNlZFBvcylcbiAgICAgICAgICAgIHRoaXMucmFuZ2VJbmRleCsrO1xuICAgIH1cbiAgICBlbWl0VG9rZW4oaWQsIGZyb20sIHRvLCBzaXplLCBvZmZzZXQpIHtcbiAgICAgICAgaWYgKHRoaXMucmFuZ2VzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIG9mZnNldCA9IHRoaXMuc2tpcEdhcHNUbyhmcm9tLCBvZmZzZXQsIDEpO1xuICAgICAgICAgICAgZnJvbSArPSBvZmZzZXQ7XG4gICAgICAgICAgICBsZXQgbGVuMCA9IHRoaXMuY2h1bmsubGVuZ3RoO1xuICAgICAgICAgICAgb2Zmc2V0ID0gdGhpcy5za2lwR2Fwc1RvKHRvLCBvZmZzZXQsIC0xKTtcbiAgICAgICAgICAgIHRvICs9IG9mZnNldDtcbiAgICAgICAgICAgIHNpemUgKz0gdGhpcy5jaHVuay5sZW5ndGggLSBsZW4wO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2h1bmsucHVzaChpZCwgZnJvbSwgdG8sIHNpemUpO1xuICAgICAgICByZXR1cm4gb2Zmc2V0O1xuICAgIH1cbiAgICBwYXJzZUxpbmUoY29udGV4dCkge1xuICAgICAgICBsZXQgeyBsaW5lLCBlbmQgfSA9IHRoaXMubmV4dExpbmUoKSwgb2Zmc2V0ID0gMCwgeyBzdHJlYW1QYXJzZXIgfSA9IHRoaXMubGFuZztcbiAgICAgICAgbGV0IHN0cmVhbSA9IG5ldyBTdHJpbmdTdHJlYW0obGluZSwgY29udGV4dCA/IGNvbnRleHQuc3RhdGUudGFiU2l6ZSA6IDQsIGNvbnRleHQgPyBnZXRJbmRlbnRVbml0KGNvbnRleHQuc3RhdGUpIDogMik7XG4gICAgICAgIGlmIChzdHJlYW0uZW9sKCkpIHtcbiAgICAgICAgICAgIHN0cmVhbVBhcnNlci5ibGFua0xpbmUodGhpcy5zdGF0ZSwgc3RyZWFtLmluZGVudFVuaXQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgd2hpbGUgKCFzdHJlYW0uZW9sKCkpIHtcbiAgICAgICAgICAgICAgICBsZXQgdG9rZW4gPSByZWFkVG9rZW4oc3RyZWFtUGFyc2VyLnRva2VuLCBzdHJlYW0sIHRoaXMuc3RhdGUpO1xuICAgICAgICAgICAgICAgIGlmICh0b2tlbilcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gdGhpcy5lbWl0VG9rZW4odGhpcy5sYW5nLnRva2VuVGFibGUucmVzb2x2ZSh0b2tlbiksIHRoaXMucGFyc2VkUG9zICsgc3RyZWFtLnN0YXJ0LCB0aGlzLnBhcnNlZFBvcyArIHN0cmVhbS5wb3MsIDQsIG9mZnNldCk7XG4gICAgICAgICAgICAgICAgaWYgKHN0cmVhbS5zdGFydCA+IDEwMDAwIC8qIEMuTWF4TGluZUxlbmd0aCAqLylcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXJzZWRQb3MgPSBlbmQ7XG4gICAgICAgIHRoaXMubW92ZVJhbmdlSW5kZXgoKTtcbiAgICAgICAgaWYgKHRoaXMucGFyc2VkUG9zIDwgdGhpcy50bylcbiAgICAgICAgICAgIHRoaXMucGFyc2VkUG9zKys7XG4gICAgfVxuICAgIGZpbmlzaENodW5rKCkge1xuICAgICAgICBsZXQgdHJlZSA9IFRyZWUuYnVpbGQoe1xuICAgICAgICAgICAgYnVmZmVyOiB0aGlzLmNodW5rLFxuICAgICAgICAgICAgc3RhcnQ6IHRoaXMuY2h1bmtTdGFydCxcbiAgICAgICAgICAgIGxlbmd0aDogdGhpcy5wYXJzZWRQb3MgLSB0aGlzLmNodW5rU3RhcnQsXG4gICAgICAgICAgICBub2RlU2V0LFxuICAgICAgICAgICAgdG9wSUQ6IDAsXG4gICAgICAgICAgICBtYXhCdWZmZXJMZW5ndGg6IDIwNDggLyogQy5DaHVua1NpemUgKi8sXG4gICAgICAgICAgICByZXVzZWQ6IHRoaXMuY2h1bmtSZXVzZWRcbiAgICAgICAgfSk7XG4gICAgICAgIHRyZWUgPSBuZXcgVHJlZSh0cmVlLnR5cGUsIHRyZWUuY2hpbGRyZW4sIHRyZWUucG9zaXRpb25zLCB0cmVlLmxlbmd0aCwgW1t0aGlzLmxhbmcuc3RhdGVBZnRlciwgdGhpcy5sYW5nLnN0cmVhbVBhcnNlci5jb3B5U3RhdGUodGhpcy5zdGF0ZSldXSk7XG4gICAgICAgIHRoaXMuY2h1bmtzLnB1c2godHJlZSk7XG4gICAgICAgIHRoaXMuY2h1bmtQb3MucHVzaCh0aGlzLmNodW5rU3RhcnQgLSB0aGlzLnJhbmdlc1swXS5mcm9tKTtcbiAgICAgICAgdGhpcy5jaHVuayA9IFtdO1xuICAgICAgICB0aGlzLmNodW5rUmV1c2VkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmNodW5rU3RhcnQgPSB0aGlzLnBhcnNlZFBvcztcbiAgICB9XG4gICAgZmluaXNoKCkge1xuICAgICAgICByZXR1cm4gbmV3IFRyZWUodGhpcy5sYW5nLnRvcE5vZGUsIHRoaXMuY2h1bmtzLCB0aGlzLmNodW5rUG9zLCB0aGlzLnBhcnNlZFBvcyAtIHRoaXMucmFuZ2VzWzBdLmZyb20pLmJhbGFuY2UoKTtcbiAgICB9XG59XG5mdW5jdGlvbiByZWFkVG9rZW4odG9rZW4sIHN0cmVhbSwgc3RhdGUpIHtcbiAgICBzdHJlYW0uc3RhcnQgPSBzdHJlYW0ucG9zO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xuICAgICAgICBsZXQgcmVzdWx0ID0gdG9rZW4oc3RyZWFtLCBzdGF0ZSk7XG4gICAgICAgIGlmIChzdHJlYW0ucG9zID4gc3RyZWFtLnN0YXJ0KVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiU3RyZWFtIHBhcnNlciBmYWlsZWQgdG8gYWR2YW5jZSBzdHJlYW0uXCIpO1xufVxuY29uc3Qgbm9Ub2tlbnMgPSAvKkBfX1BVUkVfXyovT2JqZWN0LmNyZWF0ZShudWxsKTtcbmNvbnN0IHR5cGVBcnJheSA9IFtOb2RlVHlwZS5ub25lXTtcbmNvbnN0IG5vZGVTZXQgPSAvKkBfX1BVUkVfXyovbmV3IE5vZGVTZXQodHlwZUFycmF5KTtcbmNvbnN0IHdhcm5lZCA9IFtdO1xuY29uc3QgZGVmYXVsdFRhYmxlID0gLypAX19QVVJFX18qL09iamVjdC5jcmVhdGUobnVsbCk7XG5mb3IgKGxldCBbbGVnYWN5TmFtZSwgbmFtZV0gb2YgW1xuICAgIFtcInZhcmlhYmxlXCIsIFwidmFyaWFibGVOYW1lXCJdLFxuICAgIFtcInZhcmlhYmxlLTJcIiwgXCJ2YXJpYWJsZU5hbWUuc3BlY2lhbFwiXSxcbiAgICBbXCJzdHJpbmctMlwiLCBcInN0cmluZy5zcGVjaWFsXCJdLFxuICAgIFtcImRlZlwiLCBcInZhcmlhYmxlTmFtZS5kZWZpbml0aW9uXCJdLFxuICAgIFtcInRhZ1wiLCBcInRhZ05hbWVcIl0sXG4gICAgW1wiYXR0cmlidXRlXCIsIFwiYXR0cmlidXRlTmFtZVwiXSxcbiAgICBbXCJ0eXBlXCIsIFwidHlwZU5hbWVcIl0sXG4gICAgW1wiYnVpbHRpblwiLCBcInZhcmlhYmxlTmFtZS5zdGFuZGFyZFwiXSxcbiAgICBbXCJxdWFsaWZpZXJcIiwgXCJtb2RpZmllclwiXSxcbiAgICBbXCJlcnJvclwiLCBcImludmFsaWRcIl0sXG4gICAgW1wiaGVhZGVyXCIsIFwiaGVhZGluZ1wiXSxcbiAgICBbXCJwcm9wZXJ0eVwiLCBcInByb3BlcnR5TmFtZVwiXVxuXSlcbiAgICBkZWZhdWx0VGFibGVbbGVnYWN5TmFtZV0gPSAvKkBfX1BVUkVfXyovY3JlYXRlVG9rZW5UeXBlKG5vVG9rZW5zLCBuYW1lKTtcbmNsYXNzIFRva2VuVGFibGUge1xuICAgIGNvbnN0cnVjdG9yKGV4dHJhKSB7XG4gICAgICAgIHRoaXMuZXh0cmEgPSBleHRyYTtcbiAgICAgICAgdGhpcy50YWJsZSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShudWxsKSwgZGVmYXVsdFRhYmxlKTtcbiAgICB9XG4gICAgcmVzb2x2ZSh0YWcpIHtcbiAgICAgICAgcmV0dXJuICF0YWcgPyAwIDogdGhpcy50YWJsZVt0YWddIHx8ICh0aGlzLnRhYmxlW3RhZ10gPSBjcmVhdGVUb2tlblR5cGUodGhpcy5leHRyYSwgdGFnKSk7XG4gICAgfVxufVxuY29uc3QgZGVmYXVsdFRva2VuVGFibGUgPSAvKkBfX1BVUkVfXyovbmV3IFRva2VuVGFibGUobm9Ub2tlbnMpO1xuZnVuY3Rpb24gd2FybkZvclBhcnQocGFydCwgbXNnKSB7XG4gICAgaWYgKHdhcm5lZC5pbmRleE9mKHBhcnQpID4gLTEpXG4gICAgICAgIHJldHVybjtcbiAgICB3YXJuZWQucHVzaChwYXJ0KTtcbiAgICBjb25zb2xlLndhcm4obXNnKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVRva2VuVHlwZShleHRyYSwgdGFnU3RyKSB7XG4gICAgbGV0IHRhZyA9IG51bGw7XG4gICAgZm9yIChsZXQgcGFydCBvZiB0YWdTdHIuc3BsaXQoXCIuXCIpKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IChleHRyYVtwYXJ0XSB8fCB0YWdzW3BhcnRdKTtcbiAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgICAgd2FybkZvclBhcnQocGFydCwgYFVua25vd24gaGlnaGxpZ2h0aW5nIHRhZyAke3BhcnR9YCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHZhbHVlID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgaWYgKCF0YWcpXG4gICAgICAgICAgICAgICAgd2FybkZvclBhcnQocGFydCwgYE1vZGlmaWVyICR7cGFydH0gdXNlZCBhdCBzdGFydCBvZiB0YWdgKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0YWcgPSB2YWx1ZSh0YWcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRhZylcbiAgICAgICAgICAgICAgICB3YXJuRm9yUGFydChwYXJ0LCBgVGFnICR7cGFydH0gdXNlZCBhcyBtb2RpZmllcmApO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRhZyA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICghdGFnKVxuICAgICAgICByZXR1cm4gMDtcbiAgICBsZXQgbmFtZSA9IHRhZ1N0ci5yZXBsYWNlKC8gL2csIFwiX1wiKSwgdHlwZSA9IE5vZGVUeXBlLmRlZmluZSh7XG4gICAgICAgIGlkOiB0eXBlQXJyYXkubGVuZ3RoLFxuICAgICAgICBuYW1lLFxuICAgICAgICBwcm9wczogW3N0eWxlVGFncyh7IFtuYW1lXTogdGFnIH0pXVxuICAgIH0pO1xuICAgIHR5cGVBcnJheS5wdXNoKHR5cGUpO1xuICAgIHJldHVybiB0eXBlLmlkO1xufVxuZnVuY3Rpb24gZG9jSUQoZGF0YSkge1xuICAgIGxldCB0eXBlID0gTm9kZVR5cGUuZGVmaW5lKHsgaWQ6IHR5cGVBcnJheS5sZW5ndGgsIG5hbWU6IFwiRG9jdW1lbnRcIiwgcHJvcHM6IFtsYW5ndWFnZURhdGFQcm9wLmFkZCgoKSA9PiBkYXRhKV0gfSk7XG4gICAgdHlwZUFycmF5LnB1c2godHlwZSk7XG4gICAgcmV0dXJuIHR5cGU7XG59XG5cbmV4cG9ydCB7IEhpZ2hsaWdodFN0eWxlLCBJbmRlbnRDb250ZXh0LCBMUkxhbmd1YWdlLCBMYW5ndWFnZSwgTGFuZ3VhZ2VEZXNjcmlwdGlvbiwgTGFuZ3VhZ2VTdXBwb3J0LCBQYXJzZUNvbnRleHQsIFN0cmVhbUxhbmd1YWdlLCBTdHJpbmdTdHJlYW0sIFRyZWVJbmRlbnRDb250ZXh0LCBicmFja2V0TWF0Y2hpbmcsIGNvZGVGb2xkaW5nLCBjb250aW51ZWRJbmRlbnQsIGRlZmF1bHRIaWdobGlnaHRTdHlsZSwgZGVmaW5lTGFuZ3VhZ2VGYWNldCwgZGVsaW1pdGVkSW5kZW50LCBlbnN1cmVTeW50YXhUcmVlLCBmbGF0SW5kZW50LCBmb2xkQWxsLCBmb2xkQ29kZSwgZm9sZEVmZmVjdCwgZm9sZEd1dHRlciwgZm9sZEluc2lkZSwgZm9sZEtleW1hcCwgZm9sZE5vZGVQcm9wLCBmb2xkU2VydmljZSwgZm9sZFN0YXRlLCBmb2xkYWJsZSwgZm9sZGVkUmFuZ2VzLCBmb3JjZVBhcnNpbmcsIGdldEluZGVudFVuaXQsIGdldEluZGVudGF0aW9uLCBoaWdobGlnaHRpbmdGb3IsIGluZGVudE5vZGVQcm9wLCBpbmRlbnRPbklucHV0LCBpbmRlbnRSYW5nZSwgaW5kZW50U2VydmljZSwgaW5kZW50U3RyaW5nLCBpbmRlbnRVbml0LCBsYW5ndWFnZSwgbGFuZ3VhZ2VEYXRhUHJvcCwgbWF0Y2hCcmFja2V0cywgc3ludGF4SGlnaGxpZ2h0aW5nLCBzeW50YXhQYXJzZXJSdW5uaW5nLCBzeW50YXhUcmVlLCBzeW50YXhUcmVlQXZhaWxhYmxlLCB1bmZvbGRBbGwsIHVuZm9sZENvZGUsIHVuZm9sZEVmZmVjdCB9O1xuIiwgImltcG9ydCB7IEFubm90YXRpb24sIEZhY2V0LCBjb21iaW5lQ29uZmlnLCBTdGF0ZUZpZWxkLCBFZGl0b3JTZWxlY3Rpb24sIFRyYW5zYWN0aW9uLCBDaGFuZ2VTZXQsIENoYW5nZURlc2MsIFN0YXRlRWZmZWN0LCBUZXh0LCBmaW5kQ2x1c3RlckJyZWFrLCBjb3VudENvbHVtbiwgQ2hhckNhdGVnb3J5IH0gZnJvbSAnQGNvZGVtaXJyb3Ivc3RhdGUnO1xuaW1wb3J0IHsgRWRpdG9yVmlldywgRGlyZWN0aW9uIH0gZnJvbSAnQGNvZGVtaXJyb3Ivdmlldyc7XG5pbXBvcnQgeyBJbmRlbnRDb250ZXh0LCBnZXRJbmRlbnRhdGlvbiwgaW5kZW50U3RyaW5nLCBpbmRlbnRVbml0LCBnZXRJbmRlbnRVbml0LCBtYXRjaEJyYWNrZXRzLCBzeW50YXhUcmVlIH0gZnJvbSAnQGNvZGVtaXJyb3IvbGFuZ3VhZ2UnO1xuaW1wb3J0IHsgTm9kZVByb3AgfSBmcm9tICdAbGV6ZXIvY29tbW9uJztcblxuLyoqXG5Db21tZW50IG9yIHVuY29tbWVudCB0aGUgY3VycmVudCBzZWxlY3Rpb24uIFdpbGwgdXNlIGxpbmUgY29tbWVudHNcbmlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIGZhbGxpbmcgYmFjayB0byBibG9jayBjb21tZW50cy5cbiovXG5jb25zdCB0b2dnbGVDb21tZW50ID0gdGFyZ2V0ID0+IHtcbiAgICBsZXQgY29uZmlnID0gZ2V0Q29uZmlnKHRhcmdldC5zdGF0ZSk7XG4gICAgcmV0dXJuIGNvbmZpZy5saW5lID8gdG9nZ2xlTGluZUNvbW1lbnQodGFyZ2V0KSA6IGNvbmZpZy5ibG9jayA/IHRvZ2dsZUJsb2NrQ29tbWVudEJ5TGluZSh0YXJnZXQpIDogZmFsc2U7XG59O1xuZnVuY3Rpb24gY29tbWFuZChmLCBvcHRpb24pIHtcbiAgICByZXR1cm4gKHsgc3RhdGUsIGRpc3BhdGNoIH0pID0+IHtcbiAgICAgICAgaWYgKHN0YXRlLnJlYWRPbmx5KVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBsZXQgdHIgPSBmKG9wdGlvbiwgc3RhdGUpO1xuICAgICAgICBpZiAoIXRyKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBkaXNwYXRjaChzdGF0ZS51cGRhdGUodHIpKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbn1cbi8qKlxuQ29tbWVudCBvciB1bmNvbW1lbnQgdGhlIGN1cnJlbnQgc2VsZWN0aW9uIHVzaW5nIGxpbmUgY29tbWVudHMuXG5UaGUgbGluZSBjb21tZW50IHN5bnRheCBpcyB0YWtlbiBmcm9tIHRoZVxuW2Bjb21tZW50VG9rZW5zYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5Db21tZW50VG9rZW5zKSBbbGFuZ3VhZ2VcbmRhdGFdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUubGFuZ3VhZ2VEYXRhQXQpLlxuKi9cbmNvbnN0IHRvZ2dsZUxpbmVDb21tZW50ID0gLypAX19QVVJFX18qL2NvbW1hbmQoY2hhbmdlTGluZUNvbW1lbnQsIDAgLyogQ29tbWVudE9wdGlvbi5Ub2dnbGUgKi8pO1xuLyoqXG5Db21tZW50IHRoZSBjdXJyZW50IHNlbGVjdGlvbiB1c2luZyBsaW5lIGNvbW1lbnRzLlxuKi9cbmNvbnN0IGxpbmVDb21tZW50ID0gLypAX19QVVJFX18qL2NvbW1hbmQoY2hhbmdlTGluZUNvbW1lbnQsIDEgLyogQ29tbWVudE9wdGlvbi5Db21tZW50ICovKTtcbi8qKlxuVW5jb21tZW50IHRoZSBjdXJyZW50IHNlbGVjdGlvbiB1c2luZyBsaW5lIGNvbW1lbnRzLlxuKi9cbmNvbnN0IGxpbmVVbmNvbW1lbnQgPSAvKkBfX1BVUkVfXyovY29tbWFuZChjaGFuZ2VMaW5lQ29tbWVudCwgMiAvKiBDb21tZW50T3B0aW9uLlVuY29tbWVudCAqLyk7XG4vKipcbkNvbW1lbnQgb3IgdW5jb21tZW50IHRoZSBjdXJyZW50IHNlbGVjdGlvbiB1c2luZyBibG9jayBjb21tZW50cy5cblRoZSBibG9jayBjb21tZW50IHN5bnRheCBpcyB0YWtlbiBmcm9tIHRoZVxuW2Bjb21tZW50VG9rZW5zYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5Db21tZW50VG9rZW5zKSBbbGFuZ3VhZ2VcbmRhdGFdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUubGFuZ3VhZ2VEYXRhQXQpLlxuKi9cbmNvbnN0IHRvZ2dsZUJsb2NrQ29tbWVudCA9IC8qQF9fUFVSRV9fKi9jb21tYW5kKGNoYW5nZUJsb2NrQ29tbWVudCwgMCAvKiBDb21tZW50T3B0aW9uLlRvZ2dsZSAqLyk7XG4vKipcbkNvbW1lbnQgdGhlIGN1cnJlbnQgc2VsZWN0aW9uIHVzaW5nIGJsb2NrIGNvbW1lbnRzLlxuKi9cbmNvbnN0IGJsb2NrQ29tbWVudCA9IC8qQF9fUFVSRV9fKi9jb21tYW5kKGNoYW5nZUJsb2NrQ29tbWVudCwgMSAvKiBDb21tZW50T3B0aW9uLkNvbW1lbnQgKi8pO1xuLyoqXG5VbmNvbW1lbnQgdGhlIGN1cnJlbnQgc2VsZWN0aW9uIHVzaW5nIGJsb2NrIGNvbW1lbnRzLlxuKi9cbmNvbnN0IGJsb2NrVW5jb21tZW50ID0gLypAX19QVVJFX18qL2NvbW1hbmQoY2hhbmdlQmxvY2tDb21tZW50LCAyIC8qIENvbW1lbnRPcHRpb24uVW5jb21tZW50ICovKTtcbi8qKlxuQ29tbWVudCBvciB1bmNvbW1lbnQgdGhlIGxpbmVzIGFyb3VuZCB0aGUgY3VycmVudCBzZWxlY3Rpb24gdXNpbmdcbmJsb2NrIGNvbW1lbnRzLlxuKi9cbmNvbnN0IHRvZ2dsZUJsb2NrQ29tbWVudEJ5TGluZSA9IC8qQF9fUFVSRV9fKi9jb21tYW5kKChvLCBzKSA9PiBjaGFuZ2VCbG9ja0NvbW1lbnQobywgcywgc2VsZWN0ZWRMaW5lUmFuZ2VzKHMpKSwgMCAvKiBDb21tZW50T3B0aW9uLlRvZ2dsZSAqLyk7XG5mdW5jdGlvbiBnZXRDb25maWcoc3RhdGUsIHBvcyA9IHN0YXRlLnNlbGVjdGlvbi5tYWluLmhlYWQpIHtcbiAgICBsZXQgZGF0YSA9IHN0YXRlLmxhbmd1YWdlRGF0YUF0KFwiY29tbWVudFRva2Vuc1wiLCBwb3MpO1xuICAgIHJldHVybiBkYXRhLmxlbmd0aCA/IGRhdGFbMF0gOiB7fTtcbn1cbmNvbnN0IFNlYXJjaE1hcmdpbiA9IDUwO1xuLyoqXG5EZXRlcm1pbmVzIGlmIHRoZSBnaXZlbiByYW5nZSBpcyBibG9jay1jb21tZW50ZWQgaW4gdGhlIGdpdmVuXG5zdGF0ZS5cbiovXG5mdW5jdGlvbiBmaW5kQmxvY2tDb21tZW50KHN0YXRlLCB7IG9wZW4sIGNsb3NlIH0sIGZyb20sIHRvKSB7XG4gICAgbGV0IHRleHRCZWZvcmUgPSBzdGF0ZS5zbGljZURvYyhmcm9tIC0gU2VhcmNoTWFyZ2luLCBmcm9tKTtcbiAgICBsZXQgdGV4dEFmdGVyID0gc3RhdGUuc2xpY2VEb2ModG8sIHRvICsgU2VhcmNoTWFyZ2luKTtcbiAgICBsZXQgc3BhY2VCZWZvcmUgPSAvXFxzKiQvLmV4ZWModGV4dEJlZm9yZSlbMF0ubGVuZ3RoLCBzcGFjZUFmdGVyID0gL15cXHMqLy5leGVjKHRleHRBZnRlcilbMF0ubGVuZ3RoO1xuICAgIGxldCBiZWZvcmVPZmYgPSB0ZXh0QmVmb3JlLmxlbmd0aCAtIHNwYWNlQmVmb3JlO1xuICAgIGlmICh0ZXh0QmVmb3JlLnNsaWNlKGJlZm9yZU9mZiAtIG9wZW4ubGVuZ3RoLCBiZWZvcmVPZmYpID09IG9wZW4gJiZcbiAgICAgICAgdGV4dEFmdGVyLnNsaWNlKHNwYWNlQWZ0ZXIsIHNwYWNlQWZ0ZXIgKyBjbG9zZS5sZW5ndGgpID09IGNsb3NlKSB7XG4gICAgICAgIHJldHVybiB7IG9wZW46IHsgcG9zOiBmcm9tIC0gc3BhY2VCZWZvcmUsIG1hcmdpbjogc3BhY2VCZWZvcmUgJiYgMSB9LFxuICAgICAgICAgICAgY2xvc2U6IHsgcG9zOiB0byArIHNwYWNlQWZ0ZXIsIG1hcmdpbjogc3BhY2VBZnRlciAmJiAxIH0gfTtcbiAgICB9XG4gICAgbGV0IHN0YXJ0VGV4dCwgZW5kVGV4dDtcbiAgICBpZiAodG8gLSBmcm9tIDw9IDIgKiBTZWFyY2hNYXJnaW4pIHtcbiAgICAgICAgc3RhcnRUZXh0ID0gZW5kVGV4dCA9IHN0YXRlLnNsaWNlRG9jKGZyb20sIHRvKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHN0YXJ0VGV4dCA9IHN0YXRlLnNsaWNlRG9jKGZyb20sIGZyb20gKyBTZWFyY2hNYXJnaW4pO1xuICAgICAgICBlbmRUZXh0ID0gc3RhdGUuc2xpY2VEb2ModG8gLSBTZWFyY2hNYXJnaW4sIHRvKTtcbiAgICB9XG4gICAgbGV0IHN0YXJ0U3BhY2UgPSAvXlxccyovLmV4ZWMoc3RhcnRUZXh0KVswXS5sZW5ndGgsIGVuZFNwYWNlID0gL1xccyokLy5leGVjKGVuZFRleHQpWzBdLmxlbmd0aDtcbiAgICBsZXQgZW5kT2ZmID0gZW5kVGV4dC5sZW5ndGggLSBlbmRTcGFjZSAtIGNsb3NlLmxlbmd0aDtcbiAgICBpZiAoc3RhcnRUZXh0LnNsaWNlKHN0YXJ0U3BhY2UsIHN0YXJ0U3BhY2UgKyBvcGVuLmxlbmd0aCkgPT0gb3BlbiAmJlxuICAgICAgICBlbmRUZXh0LnNsaWNlKGVuZE9mZiwgZW5kT2ZmICsgY2xvc2UubGVuZ3RoKSA9PSBjbG9zZSkge1xuICAgICAgICByZXR1cm4geyBvcGVuOiB7IHBvczogZnJvbSArIHN0YXJ0U3BhY2UgKyBvcGVuLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBtYXJnaW46IC9cXHMvLnRlc3Qoc3RhcnRUZXh0LmNoYXJBdChzdGFydFNwYWNlICsgb3Blbi5sZW5ndGgpKSA/IDEgOiAwIH0sXG4gICAgICAgICAgICBjbG9zZTogeyBwb3M6IHRvIC0gZW5kU3BhY2UgLSBjbG9zZS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgbWFyZ2luOiAvXFxzLy50ZXN0KGVuZFRleHQuY2hhckF0KGVuZE9mZiAtIDEpKSA/IDEgOiAwIH0gfTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBzZWxlY3RlZExpbmVSYW5nZXMoc3RhdGUpIHtcbiAgICBsZXQgcmFuZ2VzID0gW107XG4gICAgZm9yIChsZXQgciBvZiBzdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzKSB7XG4gICAgICAgIGxldCBmcm9tTGluZSA9IHN0YXRlLmRvYy5saW5lQXQoci5mcm9tKTtcbiAgICAgICAgbGV0IHRvTGluZSA9IHIudG8gPD0gZnJvbUxpbmUudG8gPyBmcm9tTGluZSA6IHN0YXRlLmRvYy5saW5lQXQoci50byk7XG4gICAgICAgIGxldCBsYXN0ID0gcmFuZ2VzLmxlbmd0aCAtIDE7XG4gICAgICAgIGlmIChsYXN0ID49IDAgJiYgcmFuZ2VzW2xhc3RdLnRvID4gZnJvbUxpbmUuZnJvbSlcbiAgICAgICAgICAgIHJhbmdlc1tsYXN0XS50byA9IHRvTGluZS50bztcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmFuZ2VzLnB1c2goeyBmcm9tOiBmcm9tTGluZS5mcm9tLCB0bzogdG9MaW5lLnRvIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmFuZ2VzO1xufVxuLy8gUGVyZm9ybXMgdG9nZ2xlLCBjb21tZW50IGFuZCB1bmNvbW1lbnQgb2YgYmxvY2sgY29tbWVudHMgaW5cbi8vIGxhbmd1YWdlcyB0aGF0IHN1cHBvcnQgdGhlbS5cbmZ1bmN0aW9uIGNoYW5nZUJsb2NrQ29tbWVudChvcHRpb24sIHN0YXRlLCByYW5nZXMgPSBzdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzKSB7XG4gICAgbGV0IHRva2VucyA9IHJhbmdlcy5tYXAociA9PiBnZXRDb25maWcoc3RhdGUsIHIuZnJvbSkuYmxvY2spO1xuICAgIGlmICghdG9rZW5zLmV2ZXJ5KGMgPT4gYykpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGxldCBjb21tZW50cyA9IHJhbmdlcy5tYXAoKHIsIGkpID0+IGZpbmRCbG9ja0NvbW1lbnQoc3RhdGUsIHRva2Vuc1tpXSwgci5mcm9tLCByLnRvKSk7XG4gICAgaWYgKG9wdGlvbiAhPSAyIC8qIENvbW1lbnRPcHRpb24uVW5jb21tZW50ICovICYmICFjb21tZW50cy5ldmVyeShjID0+IGMpKSB7XG4gICAgICAgIHJldHVybiB7IGNoYW5nZXM6IHN0YXRlLmNoYW5nZXMocmFuZ2VzLm1hcCgocmFuZ2UsIGkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY29tbWVudHNbaV0pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gW3sgZnJvbTogcmFuZ2UuZnJvbSwgaW5zZXJ0OiB0b2tlbnNbaV0ub3BlbiArIFwiIFwiIH0sIHsgZnJvbTogcmFuZ2UudG8sIGluc2VydDogXCIgXCIgKyB0b2tlbnNbaV0uY2xvc2UgfV07XG4gICAgICAgICAgICB9KSkgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAob3B0aW9uICE9IDEgLyogQ29tbWVudE9wdGlvbi5Db21tZW50ICovICYmIGNvbW1lbnRzLnNvbWUoYyA9PiBjKSkge1xuICAgICAgICBsZXQgY2hhbmdlcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgY29tbWVudDsgaSA8IGNvbW1lbnRzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgaWYgKGNvbW1lbnQgPSBjb21tZW50c1tpXSkge1xuICAgICAgICAgICAgICAgIGxldCB0b2tlbiA9IHRva2Vuc1tpXSwgeyBvcGVuLCBjbG9zZSB9ID0gY29tbWVudDtcbiAgICAgICAgICAgICAgICBjaGFuZ2VzLnB1c2goeyBmcm9tOiBvcGVuLnBvcyAtIHRva2VuLm9wZW4ubGVuZ3RoLCB0bzogb3Blbi5wb3MgKyBvcGVuLm1hcmdpbiB9LCB7IGZyb206IGNsb3NlLnBvcyAtIGNsb3NlLm1hcmdpbiwgdG86IGNsb3NlLnBvcyArIHRva2VuLmNsb3NlLmxlbmd0aCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgY2hhbmdlcyB9O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbi8vIFBlcmZvcm1zIHRvZ2dsZSwgY29tbWVudCBhbmQgdW5jb21tZW50IG9mIGxpbmUgY29tbWVudHMuXG5mdW5jdGlvbiBjaGFuZ2VMaW5lQ29tbWVudChvcHRpb24sIHN0YXRlLCByYW5nZXMgPSBzdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzKSB7XG4gICAgbGV0IGxpbmVzID0gW107XG4gICAgbGV0IHByZXZMaW5lID0gLTE7XG4gICAgZm9yIChsZXQgeyBmcm9tLCB0byB9IG9mIHJhbmdlcykge1xuICAgICAgICBsZXQgc3RhcnRJID0gbGluZXMubGVuZ3RoLCBtaW5JbmRlbnQgPSAxZTk7XG4gICAgICAgIGZvciAobGV0IHBvcyA9IGZyb207IHBvcyA8PSB0bzspIHtcbiAgICAgICAgICAgIGxldCBsaW5lID0gc3RhdGUuZG9jLmxpbmVBdChwb3MpO1xuICAgICAgICAgICAgaWYgKGxpbmUuZnJvbSA+IHByZXZMaW5lICYmIChmcm9tID09IHRvIHx8IHRvID4gbGluZS5mcm9tKSkge1xuICAgICAgICAgICAgICAgIHByZXZMaW5lID0gbGluZS5mcm9tO1xuICAgICAgICAgICAgICAgIGxldCB0b2tlbiA9IGdldENvbmZpZyhzdGF0ZSwgcG9zKS5saW5lO1xuICAgICAgICAgICAgICAgIGlmICghdG9rZW4pXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGxldCBpbmRlbnQgPSAvXlxccyovLmV4ZWMobGluZS50ZXh0KVswXS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgbGV0IGVtcHR5ID0gaW5kZW50ID09IGxpbmUubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGxldCBjb21tZW50ID0gbGluZS50ZXh0LnNsaWNlKGluZGVudCwgaW5kZW50ICsgdG9rZW4ubGVuZ3RoKSA9PSB0b2tlbiA/IGluZGVudCA6IC0xO1xuICAgICAgICAgICAgICAgIGlmIChpbmRlbnQgPCBsaW5lLnRleHQubGVuZ3RoICYmIGluZGVudCA8IG1pbkluZGVudClcbiAgICAgICAgICAgICAgICAgICAgbWluSW5kZW50ID0gaW5kZW50O1xuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goeyBsaW5lLCBjb21tZW50LCB0b2tlbiwgaW5kZW50LCBlbXB0eSwgc2luZ2xlOiBmYWxzZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvcyA9IGxpbmUudG8gKyAxO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtaW5JbmRlbnQgPCAxZTkpXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gc3RhcnRJOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAgaWYgKGxpbmVzW2ldLmluZGVudCA8IGxpbmVzW2ldLmxpbmUudGV4dC5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIGxpbmVzW2ldLmluZGVudCA9IG1pbkluZGVudDtcbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA9PSBzdGFydEkgKyAxKVxuICAgICAgICAgICAgbGluZXNbc3RhcnRJXS5zaW5nbGUgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAob3B0aW9uICE9IDIgLyogQ29tbWVudE9wdGlvbi5VbmNvbW1lbnQgKi8gJiYgbGluZXMuc29tZShsID0+IGwuY29tbWVudCA8IDAgJiYgKCFsLmVtcHR5IHx8IGwuc2luZ2xlKSkpIHtcbiAgICAgICAgbGV0IGNoYW5nZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgeyBsaW5lLCB0b2tlbiwgaW5kZW50LCBlbXB0eSwgc2luZ2xlIH0gb2YgbGluZXMpXG4gICAgICAgICAgICBpZiAoc2luZ2xlIHx8ICFlbXB0eSlcbiAgICAgICAgICAgICAgICBjaGFuZ2VzLnB1c2goeyBmcm9tOiBsaW5lLmZyb20gKyBpbmRlbnQsIGluc2VydDogdG9rZW4gKyBcIiBcIiB9KTtcbiAgICAgICAgbGV0IGNoYW5nZVNldCA9IHN0YXRlLmNoYW5nZXMoY2hhbmdlcyk7XG4gICAgICAgIHJldHVybiB7IGNoYW5nZXM6IGNoYW5nZVNldCwgc2VsZWN0aW9uOiBzdGF0ZS5zZWxlY3Rpb24ubWFwKGNoYW5nZVNldCwgMSkgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAob3B0aW9uICE9IDEgLyogQ29tbWVudE9wdGlvbi5Db21tZW50ICovICYmIGxpbmVzLnNvbWUobCA9PiBsLmNvbW1lbnQgPj0gMCkpIHtcbiAgICAgICAgbGV0IGNoYW5nZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgeyBsaW5lLCBjb21tZW50LCB0b2tlbiB9IG9mIGxpbmVzKVxuICAgICAgICAgICAgaWYgKGNvbW1lbnQgPj0gMCkge1xuICAgICAgICAgICAgICAgIGxldCBmcm9tID0gbGluZS5mcm9tICsgY29tbWVudCwgdG8gPSBmcm9tICsgdG9rZW4ubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmIChsaW5lLnRleHRbdG8gLSBsaW5lLmZyb21dID09IFwiIFwiKVxuICAgICAgICAgICAgICAgICAgICB0bysrO1xuICAgICAgICAgICAgICAgIGNoYW5nZXMucHVzaCh7IGZyb20sIHRvIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBjaGFuZ2VzIH07XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuXG5jb25zdCBmcm9tSGlzdG9yeSA9IC8qQF9fUFVSRV9fKi9Bbm5vdGF0aW9uLmRlZmluZSgpO1xuLyoqXG5UcmFuc2FjdGlvbiBhbm5vdGF0aW9uIHRoYXQgd2lsbCBwcmV2ZW50IHRoYXQgdHJhbnNhY3Rpb24gZnJvbVxuYmVpbmcgY29tYmluZWQgd2l0aCBvdGhlciB0cmFuc2FjdGlvbnMgaW4gdGhlIHVuZG8gaGlzdG9yeS4gR2l2ZW5cbmBcImJlZm9yZVwiYCwgaXQnbGwgcHJldmVudCBtZXJnaW5nIHdpdGggcHJldmlvdXMgdHJhbnNhY3Rpb25zLiBXaXRoXG5gXCJhZnRlclwiYCwgc3Vic2VxdWVudCB0cmFuc2FjdGlvbnMgd29uJ3QgYmUgY29tYmluZWQgd2l0aCB0aGlzXG5vbmUuIFdpdGggYFwiZnVsbFwiYCwgdGhlIHRyYW5zYWN0aW9uIGlzIGlzb2xhdGVkIG9uIGJvdGggc2lkZXMuXG4qL1xuY29uc3QgaXNvbGF0ZUhpc3RvcnkgPSAvKkBfX1BVUkVfXyovQW5ub3RhdGlvbi5kZWZpbmUoKTtcbi8qKlxuVGhpcyBmYWNldCBwcm92aWRlcyBhIHdheSB0byByZWdpc3RlciBmdW5jdGlvbnMgdGhhdCwgZ2l2ZW4gYVxudHJhbnNhY3Rpb24sIHByb3ZpZGUgYSBzZXQgb2YgZWZmZWN0cyB0aGF0IHRoZSBoaXN0b3J5IHNob3VsZFxuc3RvcmUgd2hlbiBpbnZlcnRpbmcgdGhlIHRyYW5zYWN0aW9uLiBUaGlzIGNhbiBiZSB1c2VkIHRvXG5pbnRlZ3JhdGUgc29tZSBraW5kcyBvZiBlZmZlY3RzIGluIHRoZSBoaXN0b3J5LCBzbyB0aGF0IHRoZXkgY2FuXG5iZSB1bmRvbmUgKGFuZCByZWRvbmUgYWdhaW4pLlxuKi9cbmNvbnN0IGludmVydGVkRWZmZWN0cyA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmNvbnN0IGhpc3RvcnlDb25maWcgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21iaW5lKGNvbmZpZ3MpIHtcbiAgICAgICAgcmV0dXJuIGNvbWJpbmVDb25maWcoY29uZmlncywge1xuICAgICAgICAgICAgbWluRGVwdGg6IDEwMCxcbiAgICAgICAgICAgIG5ld0dyb3VwRGVsYXk6IDUwMFxuICAgICAgICB9LCB7IG1pbkRlcHRoOiBNYXRoLm1heCwgbmV3R3JvdXBEZWxheTogTWF0aC5taW4gfSk7XG4gICAgfVxufSk7XG5mdW5jdGlvbiBjaGFuZ2VFbmQoY2hhbmdlcykge1xuICAgIGxldCBlbmQgPSAwO1xuICAgIGNoYW5nZXMuaXRlckNoYW5nZWRSYW5nZXMoKF8sIHRvKSA9PiBlbmQgPSB0byk7XG4gICAgcmV0dXJuIGVuZDtcbn1cbmNvbnN0IGhpc3RvcnlGaWVsZF8gPSAvKkBfX1BVUkVfXyovU3RhdGVGaWVsZC5kZWZpbmUoe1xuICAgIGNyZWF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIEhpc3RvcnlTdGF0ZS5lbXB0eTtcbiAgICB9LFxuICAgIHVwZGF0ZShzdGF0ZSwgdHIpIHtcbiAgICAgICAgbGV0IGNvbmZpZyA9IHRyLnN0YXRlLmZhY2V0KGhpc3RvcnlDb25maWcpO1xuICAgICAgICBsZXQgZnJvbUhpc3QgPSB0ci5hbm5vdGF0aW9uKGZyb21IaXN0b3J5KTtcbiAgICAgICAgaWYgKGZyb21IaXN0KSB7XG4gICAgICAgICAgICBsZXQgc2VsZWN0aW9uID0gdHIuZG9jQ2hhbmdlZCA/IEVkaXRvclNlbGVjdGlvbi5zaW5nbGUoY2hhbmdlRW5kKHRyLmNoYW5nZXMpKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGxldCBpdGVtID0gSGlzdEV2ZW50LmZyb21UcmFuc2FjdGlvbih0ciwgc2VsZWN0aW9uKSwgZnJvbSA9IGZyb21IaXN0LnNpZGU7XG4gICAgICAgICAgICBsZXQgb3RoZXIgPSBmcm9tID09IDAgLyogQnJhbmNoTmFtZS5Eb25lICovID8gc3RhdGUudW5kb25lIDogc3RhdGUuZG9uZTtcbiAgICAgICAgICAgIGlmIChpdGVtKVxuICAgICAgICAgICAgICAgIG90aGVyID0gdXBkYXRlQnJhbmNoKG90aGVyLCBvdGhlci5sZW5ndGgsIGNvbmZpZy5taW5EZXB0aCwgaXRlbSk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgb3RoZXIgPSBhZGRTZWxlY3Rpb24ob3RoZXIsIHRyLnN0YXJ0U3RhdGUuc2VsZWN0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSGlzdG9yeVN0YXRlKGZyb20gPT0gMCAvKiBCcmFuY2hOYW1lLkRvbmUgKi8gPyBmcm9tSGlzdC5yZXN0IDogb3RoZXIsIGZyb20gPT0gMCAvKiBCcmFuY2hOYW1lLkRvbmUgKi8gPyBvdGhlciA6IGZyb21IaXN0LnJlc3QpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBpc29sYXRlID0gdHIuYW5ub3RhdGlvbihpc29sYXRlSGlzdG9yeSk7XG4gICAgICAgIGlmIChpc29sYXRlID09IFwiZnVsbFwiIHx8IGlzb2xhdGUgPT0gXCJiZWZvcmVcIilcbiAgICAgICAgICAgIHN0YXRlID0gc3RhdGUuaXNvbGF0ZSgpO1xuICAgICAgICBpZiAodHIuYW5ub3RhdGlvbihUcmFuc2FjdGlvbi5hZGRUb0hpc3RvcnkpID09PSBmYWxzZSlcbiAgICAgICAgICAgIHJldHVybiAhdHIuY2hhbmdlcy5lbXB0eSA/IHN0YXRlLmFkZE1hcHBpbmcodHIuY2hhbmdlcy5kZXNjKSA6IHN0YXRlO1xuICAgICAgICBsZXQgZXZlbnQgPSBIaXN0RXZlbnQuZnJvbVRyYW5zYWN0aW9uKHRyKTtcbiAgICAgICAgbGV0IHRpbWUgPSB0ci5hbm5vdGF0aW9uKFRyYW5zYWN0aW9uLnRpbWUpLCB1c2VyRXZlbnQgPSB0ci5hbm5vdGF0aW9uKFRyYW5zYWN0aW9uLnVzZXJFdmVudCk7XG4gICAgICAgIGlmIChldmVudClcbiAgICAgICAgICAgIHN0YXRlID0gc3RhdGUuYWRkQ2hhbmdlcyhldmVudCwgdGltZSwgdXNlckV2ZW50LCBjb25maWcubmV3R3JvdXBEZWxheSwgY29uZmlnLm1pbkRlcHRoKTtcbiAgICAgICAgZWxzZSBpZiAodHIuc2VsZWN0aW9uKVxuICAgICAgICAgICAgc3RhdGUgPSBzdGF0ZS5hZGRTZWxlY3Rpb24odHIuc3RhcnRTdGF0ZS5zZWxlY3Rpb24sIHRpbWUsIHVzZXJFdmVudCwgY29uZmlnLm5ld0dyb3VwRGVsYXkpO1xuICAgICAgICBpZiAoaXNvbGF0ZSA9PSBcImZ1bGxcIiB8fCBpc29sYXRlID09IFwiYWZ0ZXJcIilcbiAgICAgICAgICAgIHN0YXRlID0gc3RhdGUuaXNvbGF0ZSgpO1xuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfSxcbiAgICB0b0pTT04odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHsgZG9uZTogdmFsdWUuZG9uZS5tYXAoZSA9PiBlLnRvSlNPTigpKSwgdW5kb25lOiB2YWx1ZS51bmRvbmUubWFwKGUgPT4gZS50b0pTT04oKSkgfTtcbiAgICB9LFxuICAgIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIaXN0b3J5U3RhdGUoanNvbi5kb25lLm1hcChIaXN0RXZlbnQuZnJvbUpTT04pLCBqc29uLnVuZG9uZS5tYXAoSGlzdEV2ZW50LmZyb21KU09OKSk7XG4gICAgfVxufSk7XG4vKipcbkNyZWF0ZSBhIGhpc3RvcnkgZXh0ZW5zaW9uIHdpdGggdGhlIGdpdmVuIGNvbmZpZ3VyYXRpb24uXG4qL1xuZnVuY3Rpb24gaGlzdG9yeShjb25maWcgPSB7fSkge1xuICAgIHJldHVybiBbXG4gICAgICAgIGhpc3RvcnlGaWVsZF8sXG4gICAgICAgIGhpc3RvcnlDb25maWcub2YoY29uZmlnKSxcbiAgICAgICAgRWRpdG9yVmlldy5kb21FdmVudEhhbmRsZXJzKHtcbiAgICAgICAgICAgIGJlZm9yZWlucHV0KGUsIHZpZXcpIHtcbiAgICAgICAgICAgICAgICBsZXQgY29tbWFuZCA9IGUuaW5wdXRUeXBlID09IFwiaGlzdG9yeVVuZG9cIiA/IHVuZG8gOiBlLmlucHV0VHlwZSA9PSBcImhpc3RvcnlSZWRvXCIgPyByZWRvIDogbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbW1hbmQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1hbmQodmlldyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgXTtcbn1cbi8qKlxuVGhlIHN0YXRlIGZpZWxkIHVzZWQgdG8gc3RvcmUgdGhlIGhpc3RvcnkgZGF0YS4gU2hvdWxkIHByb2JhYmx5XG5vbmx5IGJlIHVzZWQgd2hlbiB5b3Ugd2FudCB0b1xuW3NlcmlhbGl6ZV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZS50b0pTT04pIG9yXG5bZGVzZXJpYWxpemVdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGVeZnJvbUpTT04pIHN0YXRlIG9iamVjdHMgaW4gYSB3YXlcbnRoYXQgcHJlc2VydmVzIGhpc3RvcnkuXG4qL1xuY29uc3QgaGlzdG9yeUZpZWxkID0gaGlzdG9yeUZpZWxkXztcbmZ1bmN0aW9uIGNtZChzaWRlLCBzZWxlY3Rpb24pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHsgc3RhdGUsIGRpc3BhdGNoIH0pIHtcbiAgICAgICAgaWYgKCFzZWxlY3Rpb24gJiYgc3RhdGUucmVhZE9ubHkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCBoaXN0b3J5U3RhdGUgPSBzdGF0ZS5maWVsZChoaXN0b3J5RmllbGRfLCBmYWxzZSk7XG4gICAgICAgIGlmICghaGlzdG9yeVN0YXRlKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBsZXQgdHIgPSBoaXN0b3J5U3RhdGUucG9wKHNpZGUsIHN0YXRlLCBzZWxlY3Rpb24pO1xuICAgICAgICBpZiAoIXRyKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBkaXNwYXRjaCh0cik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG59XG4vKipcblVuZG8gYSBzaW5nbGUgZ3JvdXAgb2YgaGlzdG9yeSBldmVudHMuIFJldHVybnMgZmFsc2UgaWYgbm8gZ3JvdXBcbndhcyBhdmFpbGFibGUuXG4qL1xuY29uc3QgdW5kbyA9IC8qQF9fUFVSRV9fKi9jbWQoMCAvKiBCcmFuY2hOYW1lLkRvbmUgKi8sIGZhbHNlKTtcbi8qKlxuUmVkbyBhIGdyb3VwIG9mIGhpc3RvcnkgZXZlbnRzLiBSZXR1cm5zIGZhbHNlIGlmIG5vIGdyb3VwIHdhc1xuYXZhaWxhYmxlLlxuKi9cbmNvbnN0IHJlZG8gPSAvKkBfX1BVUkVfXyovY21kKDEgLyogQnJhbmNoTmFtZS5VbmRvbmUgKi8sIGZhbHNlKTtcbi8qKlxuVW5kbyBhIGNoYW5nZSBvciBzZWxlY3Rpb24gY2hhbmdlLlxuKi9cbmNvbnN0IHVuZG9TZWxlY3Rpb24gPSAvKkBfX1BVUkVfXyovY21kKDAgLyogQnJhbmNoTmFtZS5Eb25lICovLCB0cnVlKTtcbi8qKlxuUmVkbyBhIGNoYW5nZSBvciBzZWxlY3Rpb24gY2hhbmdlLlxuKi9cbmNvbnN0IHJlZG9TZWxlY3Rpb24gPSAvKkBfX1BVUkVfXyovY21kKDEgLyogQnJhbmNoTmFtZS5VbmRvbmUgKi8sIHRydWUpO1xuZnVuY3Rpb24gZGVwdGgoc2lkZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgbGV0IGhpc3RTdGF0ZSA9IHN0YXRlLmZpZWxkKGhpc3RvcnlGaWVsZF8sIGZhbHNlKTtcbiAgICAgICAgaWYgKCFoaXN0U3RhdGUpXG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgbGV0IGJyYW5jaCA9IHNpZGUgPT0gMCAvKiBCcmFuY2hOYW1lLkRvbmUgKi8gPyBoaXN0U3RhdGUuZG9uZSA6IGhpc3RTdGF0ZS51bmRvbmU7XG4gICAgICAgIHJldHVybiBicmFuY2gubGVuZ3RoIC0gKGJyYW5jaC5sZW5ndGggJiYgIWJyYW5jaFswXS5jaGFuZ2VzID8gMSA6IDApO1xuICAgIH07XG59XG4vKipcblRoZSBhbW91bnQgb2YgdW5kb2FibGUgY2hhbmdlIGV2ZW50cyBhdmFpbGFibGUgaW4gYSBnaXZlbiBzdGF0ZS5cbiovXG5jb25zdCB1bmRvRGVwdGggPSAvKkBfX1BVUkVfXyovZGVwdGgoMCAvKiBCcmFuY2hOYW1lLkRvbmUgKi8pO1xuLyoqXG5UaGUgYW1vdW50IG9mIHJlZG9hYmxlIGNoYW5nZSBldmVudHMgYXZhaWxhYmxlIGluIGEgZ2l2ZW4gc3RhdGUuXG4qL1xuY29uc3QgcmVkb0RlcHRoID0gLypAX19QVVJFX18qL2RlcHRoKDEgLyogQnJhbmNoTmFtZS5VbmRvbmUgKi8pO1xuLy8gSGlzdG9yeSBldmVudHMgc3RvcmUgZ3JvdXBzIG9mIGNoYW5nZXMgb3IgZWZmZWN0cyB0aGF0IG5lZWQgdG8gYmVcbi8vIHVuZG9uZS9yZWRvbmUgdG9nZXRoZXIuXG5jbGFzcyBIaXN0RXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8vIFRoZSBjaGFuZ2VzIGluIHRoaXMgZXZlbnQuIE5vcm1hbCBldmVudHMgaG9sZCBhdCBsZWFzdCBvbmVcbiAgICAvLyBjaGFuZ2Ugb3IgZWZmZWN0LiBCdXQgaXQgbWF5IGJlIG5lY2Vzc2FyeSB0byBzdG9yZSBzZWxlY3Rpb25cbiAgICAvLyBldmVudHMgYmVmb3JlIHRoZSBmaXJzdCBjaGFuZ2UsIGluIHdoaWNoIGNhc2UgYSBzcGVjaWFsIHR5cGUgb2ZcbiAgICAvLyBpbnN0YW5jZSBpcyBjcmVhdGVkIHdoaWNoIGRvZXNuJ3QgaG9sZCBhbnkgY2hhbmdlcywgd2l0aFxuICAgIC8vIGNoYW5nZXMgPT0gc3RhcnRTZWxlY3Rpb24gPT0gdW5kZWZpbmVkXG4gICAgY2hhbmdlcywgXG4gICAgLy8gVGhlIGVmZmVjdHMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZXZlbnRcbiAgICBlZmZlY3RzLCBcbiAgICAvLyBBY2N1bXVsYXRlZCBtYXBwaW5nIChmcm9tIGFkZFRvSGlzdG9yeT09ZmFsc2UpIHRoYXQgc2hvdWxkIGJlXG4gICAgLy8gYXBwbGllZCB0byBldmVudHMgYmVsb3cgdGhpcyBvbmUuXG4gICAgbWFwcGVkLCBcbiAgICAvLyBUaGUgc2VsZWN0aW9uIGJlZm9yZSB0aGlzIGV2ZW50XG4gICAgc3RhcnRTZWxlY3Rpb24sIFxuICAgIC8vIFN0b3JlcyBzZWxlY3Rpb24gY2hhbmdlcyBhZnRlciB0aGlzIGV2ZW50LCB0byBiZSB1c2VkIGZvclxuICAgIC8vIHNlbGVjdGlvbiB1bmRvL3JlZG8uXG4gICAgc2VsZWN0aW9uc0FmdGVyKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlcyA9IGNoYW5nZXM7XG4gICAgICAgIHRoaXMuZWZmZWN0cyA9IGVmZmVjdHM7XG4gICAgICAgIHRoaXMubWFwcGVkID0gbWFwcGVkO1xuICAgICAgICB0aGlzLnN0YXJ0U2VsZWN0aW9uID0gc3RhcnRTZWxlY3Rpb247XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uc0FmdGVyID0gc2VsZWN0aW9uc0FmdGVyO1xuICAgIH1cbiAgICBzZXRTZWxBZnRlcihhZnRlcikge1xuICAgICAgICByZXR1cm4gbmV3IEhpc3RFdmVudCh0aGlzLmNoYW5nZXMsIHRoaXMuZWZmZWN0cywgdGhpcy5tYXBwZWQsIHRoaXMuc3RhcnRTZWxlY3Rpb24sIGFmdGVyKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNoYW5nZXM6IChfYSA9IHRoaXMuY2hhbmdlcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnRvSlNPTigpLFxuICAgICAgICAgICAgbWFwcGVkOiAoX2IgPSB0aGlzLm1hcHBlZCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnRvSlNPTigpLFxuICAgICAgICAgICAgc3RhcnRTZWxlY3Rpb246IChfYyA9IHRoaXMuc3RhcnRTZWxlY3Rpb24pID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy50b0pTT04oKSxcbiAgICAgICAgICAgIHNlbGVjdGlvbnNBZnRlcjogdGhpcy5zZWxlY3Rpb25zQWZ0ZXIubWFwKHMgPT4gcy50b0pTT04oKSlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIaXN0RXZlbnQoanNvbi5jaGFuZ2VzICYmIENoYW5nZVNldC5mcm9tSlNPTihqc29uLmNoYW5nZXMpLCBbXSwganNvbi5tYXBwZWQgJiYgQ2hhbmdlRGVzYy5mcm9tSlNPTihqc29uLm1hcHBlZCksIGpzb24uc3RhcnRTZWxlY3Rpb24gJiYgRWRpdG9yU2VsZWN0aW9uLmZyb21KU09OKGpzb24uc3RhcnRTZWxlY3Rpb24pLCBqc29uLnNlbGVjdGlvbnNBZnRlci5tYXAoRWRpdG9yU2VsZWN0aW9uLmZyb21KU09OKSk7XG4gICAgfVxuICAgIC8vIFRoaXMgZG9lcyBub3QgY2hlY2sgYGFkZFRvSGlzdG9yeWAgYW5kIHN1Y2gsIGl0IGFzc3VtZXMgdGhlXG4gICAgLy8gdHJhbnNhY3Rpb24gbmVlZHMgdG8gYmUgY29udmVydGVkIHRvIGFuIGl0ZW0uIFJldHVybnMgbnVsbCB3aGVuXG4gICAgLy8gdGhlcmUgYXJlIG5vIGNoYW5nZXMgb3IgZWZmZWN0cyBpbiB0aGUgdHJhbnNhY3Rpb24uXG4gICAgc3RhdGljIGZyb21UcmFuc2FjdGlvbih0ciwgc2VsZWN0aW9uKSB7XG4gICAgICAgIGxldCBlZmZlY3RzID0gbm9uZTtcbiAgICAgICAgZm9yIChsZXQgaW52ZXJ0IG9mIHRyLnN0YXJ0U3RhdGUuZmFjZXQoaW52ZXJ0ZWRFZmZlY3RzKSkge1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGludmVydCh0cik7XG4gICAgICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aClcbiAgICAgICAgICAgICAgICBlZmZlY3RzID0gZWZmZWN0cy5jb25jYXQocmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWVmZmVjdHMubGVuZ3RoICYmIHRyLmNoYW5nZXMuZW1wdHkpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIG5ldyBIaXN0RXZlbnQodHIuY2hhbmdlcy5pbnZlcnQodHIuc3RhcnRTdGF0ZS5kb2MpLCBlZmZlY3RzLCB1bmRlZmluZWQsIHNlbGVjdGlvbiB8fCB0ci5zdGFydFN0YXRlLnNlbGVjdGlvbiwgbm9uZSk7XG4gICAgfVxuICAgIHN0YXRpYyBzZWxlY3Rpb24oc2VsZWN0aW9ucykge1xuICAgICAgICByZXR1cm4gbmV3IEhpc3RFdmVudCh1bmRlZmluZWQsIG5vbmUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBzZWxlY3Rpb25zKTtcbiAgICB9XG59XG5mdW5jdGlvbiB1cGRhdGVCcmFuY2goYnJhbmNoLCB0bywgbWF4TGVuLCBuZXdFdmVudCkge1xuICAgIGxldCBzdGFydCA9IHRvICsgMSA+IG1heExlbiArIDIwID8gdG8gLSBtYXhMZW4gLSAxIDogMDtcbiAgICBsZXQgbmV3QnJhbmNoID0gYnJhbmNoLnNsaWNlKHN0YXJ0LCB0byk7XG4gICAgbmV3QnJhbmNoLnB1c2gobmV3RXZlbnQpO1xuICAgIHJldHVybiBuZXdCcmFuY2g7XG59XG5mdW5jdGlvbiBpc0FkamFjZW50KGEsIGIpIHtcbiAgICBsZXQgcmFuZ2VzID0gW10sIGlzQWRqYWNlbnQgPSBmYWxzZTtcbiAgICBhLml0ZXJDaGFuZ2VkUmFuZ2VzKChmLCB0KSA9PiByYW5nZXMucHVzaChmLCB0KSk7XG4gICAgYi5pdGVyQ2hhbmdlZFJhbmdlcygoX2YsIF90LCBmLCB0KSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDspIHtcbiAgICAgICAgICAgIGxldCBmcm9tID0gcmFuZ2VzW2krK10sIHRvID0gcmFuZ2VzW2krK107XG4gICAgICAgICAgICBpZiAodCA+PSBmcm9tICYmIGYgPD0gdG8pXG4gICAgICAgICAgICAgICAgaXNBZGphY2VudCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gaXNBZGphY2VudDtcbn1cbmZ1bmN0aW9uIGVxU2VsZWN0aW9uU2hhcGUoYSwgYikge1xuICAgIHJldHVybiBhLnJhbmdlcy5sZW5ndGggPT0gYi5yYW5nZXMubGVuZ3RoICYmXG4gICAgICAgIGEucmFuZ2VzLmZpbHRlcigociwgaSkgPT4gci5lbXB0eSAhPSBiLnJhbmdlc1tpXS5lbXB0eSkubGVuZ3RoID09PSAwO1xufVxuZnVuY3Rpb24gY29uYyhhLCBiKSB7XG4gICAgcmV0dXJuICFhLmxlbmd0aCA/IGIgOiAhYi5sZW5ndGggPyBhIDogYS5jb25jYXQoYik7XG59XG5jb25zdCBub25lID0gW107XG5jb25zdCBNYXhTZWxlY3Rpb25zUGVyRXZlbnQgPSAyMDA7XG5mdW5jdGlvbiBhZGRTZWxlY3Rpb24oYnJhbmNoLCBzZWxlY3Rpb24pIHtcbiAgICBpZiAoIWJyYW5jaC5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIFtIaXN0RXZlbnQuc2VsZWN0aW9uKFtzZWxlY3Rpb25dKV07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsZXQgbGFzdEV2ZW50ID0gYnJhbmNoW2JyYW5jaC5sZW5ndGggLSAxXTtcbiAgICAgICAgbGV0IHNlbHMgPSBsYXN0RXZlbnQuc2VsZWN0aW9uc0FmdGVyLnNsaWNlKE1hdGgubWF4KDAsIGxhc3RFdmVudC5zZWxlY3Rpb25zQWZ0ZXIubGVuZ3RoIC0gTWF4U2VsZWN0aW9uc1BlckV2ZW50KSk7XG4gICAgICAgIGlmIChzZWxzLmxlbmd0aCAmJiBzZWxzW3NlbHMubGVuZ3RoIC0gMV0uZXEoc2VsZWN0aW9uKSlcbiAgICAgICAgICAgIHJldHVybiBicmFuY2g7XG4gICAgICAgIHNlbHMucHVzaChzZWxlY3Rpb24pO1xuICAgICAgICByZXR1cm4gdXBkYXRlQnJhbmNoKGJyYW5jaCwgYnJhbmNoLmxlbmd0aCAtIDEsIDFlOSwgbGFzdEV2ZW50LnNldFNlbEFmdGVyKHNlbHMpKTtcbiAgICB9XG59XG4vLyBBc3N1bWVzIHRoZSB0b3AgaXRlbSBoYXMgb25lIG9yIG1vcmUgc2VsZWN0aW9uQWZ0ZXIgdmFsdWVzXG5mdW5jdGlvbiBwb3BTZWxlY3Rpb24oYnJhbmNoKSB7XG4gICAgbGV0IGxhc3QgPSBicmFuY2hbYnJhbmNoLmxlbmd0aCAtIDFdO1xuICAgIGxldCBuZXdCcmFuY2ggPSBicmFuY2guc2xpY2UoKTtcbiAgICBuZXdCcmFuY2hbYnJhbmNoLmxlbmd0aCAtIDFdID0gbGFzdC5zZXRTZWxBZnRlcihsYXN0LnNlbGVjdGlvbnNBZnRlci5zbGljZSgwLCBsYXN0LnNlbGVjdGlvbnNBZnRlci5sZW5ndGggLSAxKSk7XG4gICAgcmV0dXJuIG5ld0JyYW5jaDtcbn1cbi8vIEFkZCBhIG1hcHBpbmcgdG8gdGhlIHRvcCBldmVudCBpbiB0aGUgZ2l2ZW4gYnJhbmNoLiBJZiB0aGlzIG1hcHNcbi8vIGF3YXkgYWxsIHRoZSBjaGFuZ2VzIGFuZCBlZmZlY3RzIGluIHRoYXQgaXRlbSwgZHJvcCBpdCBhbmRcbi8vIHByb3BhZ2F0ZSB0aGUgbWFwcGluZyB0byB0aGUgbmV4dCBpdGVtLlxuZnVuY3Rpb24gYWRkTWFwcGluZ1RvQnJhbmNoKGJyYW5jaCwgbWFwcGluZykge1xuICAgIGlmICghYnJhbmNoLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIGJyYW5jaDtcbiAgICBsZXQgbGVuZ3RoID0gYnJhbmNoLmxlbmd0aCwgc2VsZWN0aW9ucyA9IG5vbmU7XG4gICAgd2hpbGUgKGxlbmd0aCkge1xuICAgICAgICBsZXQgZXZlbnQgPSBtYXBFdmVudChicmFuY2hbbGVuZ3RoIC0gMV0sIG1hcHBpbmcsIHNlbGVjdGlvbnMpO1xuICAgICAgICBpZiAoZXZlbnQuY2hhbmdlcyAmJiAhZXZlbnQuY2hhbmdlcy5lbXB0eSB8fCBldmVudC5lZmZlY3RzLmxlbmd0aCkgeyAvLyBFdmVudCBzdXJ2aXZlZCBtYXBwaW5nXG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gYnJhbmNoLnNsaWNlKDAsIGxlbmd0aCk7XG4gICAgICAgICAgICByZXN1bHRbbGVuZ3RoIC0gMV0gPSBldmVudDtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7IC8vIERyb3AgdGhpcyBldmVudCwgc2luY2UgdGhlcmUncyBubyBjaGFuZ2VzIG9yIGVmZmVjdHMgbGVmdFxuICAgICAgICAgICAgbWFwcGluZyA9IGV2ZW50Lm1hcHBlZDtcbiAgICAgICAgICAgIGxlbmd0aC0tO1xuICAgICAgICAgICAgc2VsZWN0aW9ucyA9IGV2ZW50LnNlbGVjdGlvbnNBZnRlcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2VsZWN0aW9ucy5sZW5ndGggPyBbSGlzdEV2ZW50LnNlbGVjdGlvbihzZWxlY3Rpb25zKV0gOiBub25lO1xufVxuZnVuY3Rpb24gbWFwRXZlbnQoZXZlbnQsIG1hcHBpbmcsIGV4dHJhU2VsZWN0aW9ucykge1xuICAgIGxldCBzZWxlY3Rpb25zID0gY29uYyhldmVudC5zZWxlY3Rpb25zQWZ0ZXIubGVuZ3RoID8gZXZlbnQuc2VsZWN0aW9uc0FmdGVyLm1hcChzID0+IHMubWFwKG1hcHBpbmcpKSA6IG5vbmUsIGV4dHJhU2VsZWN0aW9ucyk7XG4gICAgLy8gQ2hhbmdlLWxlc3MgZXZlbnRzIGRvbid0IHN0b3JlIG1hcHBpbmdzICh0aGV5IGFyZSBhbHdheXMgdGhlIGxhc3QgZXZlbnQgaW4gYSBicmFuY2gpXG4gICAgaWYgKCFldmVudC5jaGFuZ2VzKVxuICAgICAgICByZXR1cm4gSGlzdEV2ZW50LnNlbGVjdGlvbihzZWxlY3Rpb25zKTtcbiAgICBsZXQgbWFwcGVkQ2hhbmdlcyA9IGV2ZW50LmNoYW5nZXMubWFwKG1hcHBpbmcpLCBiZWZvcmUgPSBtYXBwaW5nLm1hcERlc2MoZXZlbnQuY2hhbmdlcywgdHJ1ZSk7XG4gICAgbGV0IGZ1bGxNYXBwaW5nID0gZXZlbnQubWFwcGVkID8gZXZlbnQubWFwcGVkLmNvbXBvc2VEZXNjKGJlZm9yZSkgOiBiZWZvcmU7XG4gICAgcmV0dXJuIG5ldyBIaXN0RXZlbnQobWFwcGVkQ2hhbmdlcywgU3RhdGVFZmZlY3QubWFwRWZmZWN0cyhldmVudC5lZmZlY3RzLCBtYXBwaW5nKSwgZnVsbE1hcHBpbmcsIGV2ZW50LnN0YXJ0U2VsZWN0aW9uLm1hcChiZWZvcmUpLCBzZWxlY3Rpb25zKTtcbn1cbmNvbnN0IGpvaW5hYmxlVXNlckV2ZW50ID0gL14oaW5wdXRcXC50eXBlfGRlbGV0ZSkoJHxcXC4pLztcbmNsYXNzIEhpc3RvcnlTdGF0ZSB7XG4gICAgY29uc3RydWN0b3IoZG9uZSwgdW5kb25lLCBwcmV2VGltZSA9IDAsIHByZXZVc2VyRXZlbnQgPSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5kb25lID0gZG9uZTtcbiAgICAgICAgdGhpcy51bmRvbmUgPSB1bmRvbmU7XG4gICAgICAgIHRoaXMucHJldlRpbWUgPSBwcmV2VGltZTtcbiAgICAgICAgdGhpcy5wcmV2VXNlckV2ZW50ID0gcHJldlVzZXJFdmVudDtcbiAgICB9XG4gICAgaXNvbGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJldlRpbWUgPyBuZXcgSGlzdG9yeVN0YXRlKHRoaXMuZG9uZSwgdGhpcy51bmRvbmUpIDogdGhpcztcbiAgICB9XG4gICAgYWRkQ2hhbmdlcyhldmVudCwgdGltZSwgdXNlckV2ZW50LCBuZXdHcm91cERlbGF5LCBtYXhMZW4pIHtcbiAgICAgICAgbGV0IGRvbmUgPSB0aGlzLmRvbmUsIGxhc3RFdmVudCA9IGRvbmVbZG9uZS5sZW5ndGggLSAxXTtcbiAgICAgICAgaWYgKGxhc3RFdmVudCAmJiBsYXN0RXZlbnQuY2hhbmdlcyAmJiAhbGFzdEV2ZW50LmNoYW5nZXMuZW1wdHkgJiYgZXZlbnQuY2hhbmdlcyAmJlxuICAgICAgICAgICAgKCF1c2VyRXZlbnQgfHwgam9pbmFibGVVc2VyRXZlbnQudGVzdCh1c2VyRXZlbnQpKSAmJlxuICAgICAgICAgICAgKCghbGFzdEV2ZW50LnNlbGVjdGlvbnNBZnRlci5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICB0aW1lIC0gdGhpcy5wcmV2VGltZSA8IG5ld0dyb3VwRGVsYXkgJiZcbiAgICAgICAgICAgICAgICBpc0FkamFjZW50KGxhc3RFdmVudC5jaGFuZ2VzLCBldmVudC5jaGFuZ2VzKSkgfHxcbiAgICAgICAgICAgICAgICAvLyBGb3IgY29tcG9zZSAoYnV0IG5vdCBjb21wb3NlLnN0YXJ0KSBldmVudHMsIGFsd2F5cyBqb2luIHdpdGggcHJldmlvdXMgZXZlbnRcbiAgICAgICAgICAgICAgICB1c2VyRXZlbnQgPT0gXCJpbnB1dC50eXBlLmNvbXBvc2VcIikpIHtcbiAgICAgICAgICAgIGRvbmUgPSB1cGRhdGVCcmFuY2goZG9uZSwgZG9uZS5sZW5ndGggLSAxLCBtYXhMZW4sIG5ldyBIaXN0RXZlbnQoZXZlbnQuY2hhbmdlcy5jb21wb3NlKGxhc3RFdmVudC5jaGFuZ2VzKSwgY29uYyhldmVudC5lZmZlY3RzLCBsYXN0RXZlbnQuZWZmZWN0cyksIGxhc3RFdmVudC5tYXBwZWQsIGxhc3RFdmVudC5zdGFydFNlbGVjdGlvbiwgbm9uZSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZG9uZSA9IHVwZGF0ZUJyYW5jaChkb25lLCBkb25lLmxlbmd0aCwgbWF4TGVuLCBldmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBIaXN0b3J5U3RhdGUoZG9uZSwgbm9uZSwgdGltZSwgdXNlckV2ZW50KTtcbiAgICB9XG4gICAgYWRkU2VsZWN0aW9uKHNlbGVjdGlvbiwgdGltZSwgdXNlckV2ZW50LCBuZXdHcm91cERlbGF5KSB7XG4gICAgICAgIGxldCBsYXN0ID0gdGhpcy5kb25lLmxlbmd0aCA/IHRoaXMuZG9uZVt0aGlzLmRvbmUubGVuZ3RoIC0gMV0uc2VsZWN0aW9uc0FmdGVyIDogbm9uZTtcbiAgICAgICAgaWYgKGxhc3QubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgdGltZSAtIHRoaXMucHJldlRpbWUgPCBuZXdHcm91cERlbGF5ICYmXG4gICAgICAgICAgICB1c2VyRXZlbnQgPT0gdGhpcy5wcmV2VXNlckV2ZW50ICYmIHVzZXJFdmVudCAmJiAvXnNlbGVjdCgkfFxcLikvLnRlc3QodXNlckV2ZW50KSAmJlxuICAgICAgICAgICAgZXFTZWxlY3Rpb25TaGFwZShsYXN0W2xhc3QubGVuZ3RoIC0gMV0sIHNlbGVjdGlvbikpXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgcmV0dXJuIG5ldyBIaXN0b3J5U3RhdGUoYWRkU2VsZWN0aW9uKHRoaXMuZG9uZSwgc2VsZWN0aW9uKSwgdGhpcy51bmRvbmUsIHRpbWUsIHVzZXJFdmVudCk7XG4gICAgfVxuICAgIGFkZE1hcHBpbmcobWFwcGluZykge1xuICAgICAgICByZXR1cm4gbmV3IEhpc3RvcnlTdGF0ZShhZGRNYXBwaW5nVG9CcmFuY2godGhpcy5kb25lLCBtYXBwaW5nKSwgYWRkTWFwcGluZ1RvQnJhbmNoKHRoaXMudW5kb25lLCBtYXBwaW5nKSwgdGhpcy5wcmV2VGltZSwgdGhpcy5wcmV2VXNlckV2ZW50KTtcbiAgICB9XG4gICAgcG9wKHNpZGUsIHN0YXRlLCBzZWxlY3Rpb24pIHtcbiAgICAgICAgbGV0IGJyYW5jaCA9IHNpZGUgPT0gMCAvKiBCcmFuY2hOYW1lLkRvbmUgKi8gPyB0aGlzLmRvbmUgOiB0aGlzLnVuZG9uZTtcbiAgICAgICAgaWYgKGJyYW5jaC5sZW5ndGggPT0gMClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBsZXQgZXZlbnQgPSBicmFuY2hbYnJhbmNoLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAoc2VsZWN0aW9uICYmIGV2ZW50LnNlbGVjdGlvbnNBZnRlci5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZS51cGRhdGUoe1xuICAgICAgICAgICAgICAgIHNlbGVjdGlvbjogZXZlbnQuc2VsZWN0aW9uc0FmdGVyW2V2ZW50LnNlbGVjdGlvbnNBZnRlci5sZW5ndGggLSAxXSxcbiAgICAgICAgICAgICAgICBhbm5vdGF0aW9uczogZnJvbUhpc3Rvcnkub2YoeyBzaWRlLCByZXN0OiBwb3BTZWxlY3Rpb24oYnJhbmNoKSB9KSxcbiAgICAgICAgICAgICAgICB1c2VyRXZlbnQ6IHNpZGUgPT0gMCAvKiBCcmFuY2hOYW1lLkRvbmUgKi8gPyBcInNlbGVjdC51bmRvXCIgOiBcInNlbGVjdC5yZWRvXCIsXG4gICAgICAgICAgICAgICAgc2Nyb2xsSW50b1ZpZXc6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFldmVudC5jaGFuZ2VzKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCByZXN0ID0gYnJhbmNoLmxlbmd0aCA9PSAxID8gbm9uZSA6IGJyYW5jaC5zbGljZSgwLCBicmFuY2gubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICBpZiAoZXZlbnQubWFwcGVkKVxuICAgICAgICAgICAgICAgIHJlc3QgPSBhZGRNYXBwaW5nVG9CcmFuY2gocmVzdCwgZXZlbnQubWFwcGVkKTtcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZS51cGRhdGUoe1xuICAgICAgICAgICAgICAgIGNoYW5nZXM6IGV2ZW50LmNoYW5nZXMsXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uOiBldmVudC5zdGFydFNlbGVjdGlvbixcbiAgICAgICAgICAgICAgICBlZmZlY3RzOiBldmVudC5lZmZlY3RzLFxuICAgICAgICAgICAgICAgIGFubm90YXRpb25zOiBmcm9tSGlzdG9yeS5vZih7IHNpZGUsIHJlc3QgfSksXG4gICAgICAgICAgICAgICAgZmlsdGVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB1c2VyRXZlbnQ6IHNpZGUgPT0gMCAvKiBCcmFuY2hOYW1lLkRvbmUgKi8gPyBcInVuZG9cIiA6IFwicmVkb1wiLFxuICAgICAgICAgICAgICAgIHNjcm9sbEludG9WaWV3OiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbkhpc3RvcnlTdGF0ZS5lbXB0eSA9IC8qQF9fUFVSRV9fKi9uZXcgSGlzdG9yeVN0YXRlKG5vbmUsIG5vbmUpO1xuLyoqXG5EZWZhdWx0IGtleSBiaW5kaW5ncyBmb3IgdGhlIHVuZG8gaGlzdG9yeS5cblxuLSBNb2QtejogW2B1bmRvYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy51bmRvKS5cbi0gTW9kLXkgKE1vZC1TaGlmdC16IG9uIG1hY09TKSArIEN0cmwtU2hpZnQteiBvbiBMaW51eDogW2ByZWRvYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5yZWRvKS5cbi0gTW9kLXU6IFtgdW5kb1NlbGVjdGlvbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMudW5kb1NlbGVjdGlvbikuXG4tIEFsdC11IChNb2QtU2hpZnQtdSBvbiBtYWNPUyk6IFtgcmVkb1NlbGVjdGlvbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMucmVkb1NlbGVjdGlvbikuXG4qL1xuY29uc3QgaGlzdG9yeUtleW1hcCA9IFtcbiAgICB7IGtleTogXCJNb2QtelwiLCBydW46IHVuZG8sIHByZXZlbnREZWZhdWx0OiB0cnVlIH0sXG4gICAgeyBrZXk6IFwiTW9kLXlcIiwgbWFjOiBcIk1vZC1TaGlmdC16XCIsIHJ1bjogcmVkbywgcHJldmVudERlZmF1bHQ6IHRydWUgfSxcbiAgICB7IGxpbnV4OiBcIkN0cmwtU2hpZnQtelwiLCBydW46IHJlZG8sIHByZXZlbnREZWZhdWx0OiB0cnVlIH0sXG4gICAgeyBrZXk6IFwiTW9kLXVcIiwgcnVuOiB1bmRvU2VsZWN0aW9uLCBwcmV2ZW50RGVmYXVsdDogdHJ1ZSB9LFxuICAgIHsga2V5OiBcIkFsdC11XCIsIG1hYzogXCJNb2QtU2hpZnQtdVwiLCBydW46IHJlZG9TZWxlY3Rpb24sIHByZXZlbnREZWZhdWx0OiB0cnVlIH1cbl07XG5cbmZ1bmN0aW9uIHVwZGF0ZVNlbChzZWwsIGJ5KSB7XG4gICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5jcmVhdGUoc2VsLnJhbmdlcy5tYXAoYnkpLCBzZWwubWFpbkluZGV4KTtcbn1cbmZ1bmN0aW9uIHNldFNlbChzdGF0ZSwgc2VsZWN0aW9uKSB7XG4gICAgcmV0dXJuIHN0YXRlLnVwZGF0ZSh7IHNlbGVjdGlvbiwgc2Nyb2xsSW50b1ZpZXc6IHRydWUsIHVzZXJFdmVudDogXCJzZWxlY3RcIiB9KTtcbn1cbmZ1bmN0aW9uIG1vdmVTZWwoeyBzdGF0ZSwgZGlzcGF0Y2ggfSwgaG93KSB7XG4gICAgbGV0IHNlbGVjdGlvbiA9IHVwZGF0ZVNlbChzdGF0ZS5zZWxlY3Rpb24sIGhvdyk7XG4gICAgaWYgKHNlbGVjdGlvbi5lcShzdGF0ZS5zZWxlY3Rpb24pKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgZGlzcGF0Y2goc2V0U2VsKHN0YXRlLCBzZWxlY3Rpb24pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIHJhbmdlRW5kKHJhbmdlLCBmb3J3YXJkKSB7XG4gICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5jdXJzb3IoZm9yd2FyZCA/IHJhbmdlLnRvIDogcmFuZ2UuZnJvbSk7XG59XG5mdW5jdGlvbiBjdXJzb3JCeUNoYXIodmlldywgZm9yd2FyZCkge1xuICAgIHJldHVybiBtb3ZlU2VsKHZpZXcsIHJhbmdlID0+IHJhbmdlLmVtcHR5ID8gdmlldy5tb3ZlQnlDaGFyKHJhbmdlLCBmb3J3YXJkKSA6IHJhbmdlRW5kKHJhbmdlLCBmb3J3YXJkKSk7XG59XG5mdW5jdGlvbiBsdHJBdEN1cnNvcih2aWV3KSB7XG4gICAgcmV0dXJuIHZpZXcudGV4dERpcmVjdGlvbkF0KHZpZXcuc3RhdGUuc2VsZWN0aW9uLm1haW4uaGVhZCkgPT0gRGlyZWN0aW9uLkxUUjtcbn1cbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIG9uZSBjaGFyYWN0ZXIgdG8gdGhlIGxlZnQgKHdoaWNoIGlzIGJhY2t3YXJkIGluXG5sZWZ0LXRvLXJpZ2h0IHRleHQsIGZvcndhcmQgaW4gcmlnaHQtdG8tbGVmdCB0ZXh0KS5cbiovXG5jb25zdCBjdXJzb3JDaGFyTGVmdCA9IHZpZXcgPT4gY3Vyc29yQnlDaGFyKHZpZXcsICFsdHJBdEN1cnNvcih2aWV3KSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBvbmUgY2hhcmFjdGVyIHRvIHRoZSByaWdodC5cbiovXG5jb25zdCBjdXJzb3JDaGFyUmlnaHQgPSB2aWV3ID0+IGN1cnNvckJ5Q2hhcih2aWV3LCBsdHJBdEN1cnNvcih2aWV3KSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBvbmUgY2hhcmFjdGVyIGZvcndhcmQuXG4qL1xuY29uc3QgY3Vyc29yQ2hhckZvcndhcmQgPSB2aWV3ID0+IGN1cnNvckJ5Q2hhcih2aWV3LCB0cnVlKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIG9uZSBjaGFyYWN0ZXIgYmFja3dhcmQuXG4qL1xuY29uc3QgY3Vyc29yQ2hhckJhY2t3YXJkID0gdmlldyA9PiBjdXJzb3JCeUNoYXIodmlldywgZmFsc2UpO1xuZnVuY3Rpb24gY3Vyc29yQnlHcm91cCh2aWV3LCBmb3J3YXJkKSB7XG4gICAgcmV0dXJuIG1vdmVTZWwodmlldywgcmFuZ2UgPT4gcmFuZ2UuZW1wdHkgPyB2aWV3Lm1vdmVCeUdyb3VwKHJhbmdlLCBmb3J3YXJkKSA6IHJhbmdlRW5kKHJhbmdlLCBmb3J3YXJkKSk7XG59XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiB0byB0aGUgbGVmdCBhY3Jvc3Mgb25lIGdyb3VwIG9mIHdvcmQgb3Jcbm5vbi13b3JkIChidXQgYWxzbyBub24tc3BhY2UpIGNoYXJhY3RlcnMuXG4qL1xuY29uc3QgY3Vyc29yR3JvdXBMZWZ0ID0gdmlldyA9PiBjdXJzb3JCeUdyb3VwKHZpZXcsICFsdHJBdEN1cnNvcih2aWV3KSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBvbmUgZ3JvdXAgdG8gdGhlIHJpZ2h0LlxuKi9cbmNvbnN0IGN1cnNvckdyb3VwUmlnaHQgPSB2aWV3ID0+IGN1cnNvckJ5R3JvdXAodmlldywgbHRyQXRDdXJzb3IodmlldykpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gb25lIGdyb3VwIGZvcndhcmQuXG4qL1xuY29uc3QgY3Vyc29yR3JvdXBGb3J3YXJkID0gdmlldyA9PiBjdXJzb3JCeUdyb3VwKHZpZXcsIHRydWUpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gb25lIGdyb3VwIGJhY2t3YXJkLlxuKi9cbmNvbnN0IGN1cnNvckdyb3VwQmFja3dhcmQgPSB2aWV3ID0+IGN1cnNvckJ5R3JvdXAodmlldywgZmFsc2UpO1xuZnVuY3Rpb24gbW92ZUJ5U3Vid29yZCh2aWV3LCByYW5nZSwgZm9yd2FyZCkge1xuICAgIGxldCBjYXRlZ29yaXplID0gdmlldy5zdGF0ZS5jaGFyQ2F0ZWdvcml6ZXIocmFuZ2UuZnJvbSk7XG4gICAgcmV0dXJuIHZpZXcubW92ZUJ5Q2hhcihyYW5nZSwgZm9yd2FyZCwgc3RhcnQgPT4ge1xuICAgICAgICBsZXQgY2F0ID0gQ2hhckNhdGVnb3J5LlNwYWNlLCBwb3MgPSByYW5nZS5mcm9tO1xuICAgICAgICBsZXQgZG9uZSA9IGZhbHNlLCBzYXdVcHBlciA9IGZhbHNlLCBzYXdMb3dlciA9IGZhbHNlO1xuICAgICAgICBsZXQgc3RlcCA9IChuZXh0KSA9PiB7XG4gICAgICAgICAgICBpZiAoZG9uZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBwb3MgKz0gZm9yd2FyZCA/IG5leHQubGVuZ3RoIDogLW5leHQubGVuZ3RoO1xuICAgICAgICAgICAgbGV0IG5leHRDYXQgPSBjYXRlZ29yaXplKG5leHQpLCBhaGVhZDtcbiAgICAgICAgICAgIGlmIChjYXQgPT0gQ2hhckNhdGVnb3J5LlNwYWNlKVxuICAgICAgICAgICAgICAgIGNhdCA9IG5leHRDYXQ7XG4gICAgICAgICAgICBpZiAoY2F0ICE9IG5leHRDYXQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgaWYgKGNhdCA9PSBDaGFyQ2F0ZWdvcnkuV29yZCkge1xuICAgICAgICAgICAgICAgIGlmIChuZXh0LnRvTG93ZXJDYXNlKCkgPT0gbmV4dCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZvcndhcmQgJiYgc2F3VXBwZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHNhd0xvd2VyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoc2F3TG93ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvcndhcmQpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNhd1VwcGVyICYmIGZvcndhcmQgJiYgY2F0ZWdvcml6ZShhaGVhZCA9IHZpZXcuc3RhdGUuc2xpY2VEb2MocG9zLCBwb3MgKyAxKSkgPT0gQ2hhckNhdGVnb3J5LldvcmQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGFoZWFkLnRvTG93ZXJDYXNlKCkgPT0gYWhlYWQpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHNhd1VwcGVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgc3RlcChzdGFydCk7XG4gICAgICAgIHJldHVybiBzdGVwO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gY3Vyc29yQnlTdWJ3b3JkKHZpZXcsIGZvcndhcmQpIHtcbiAgICByZXR1cm4gbW92ZVNlbCh2aWV3LCByYW5nZSA9PiByYW5nZS5lbXB0eSA/IG1vdmVCeVN1YndvcmQodmlldywgcmFuZ2UsIGZvcndhcmQpIDogcmFuZ2VFbmQocmFuZ2UsIGZvcndhcmQpKTtcbn1cbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIG9uZSBncm91cCBvciBjYW1lbC1jYXNlIHN1YndvcmQgZm9yd2FyZC5cbiovXG5jb25zdCBjdXJzb3JTdWJ3b3JkRm9yd2FyZCA9IHZpZXcgPT4gY3Vyc29yQnlTdWJ3b3JkKHZpZXcsIHRydWUpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gb25lIGdyb3VwIG9yIGNhbWVsLWNhc2Ugc3Vid29yZCBiYWNrd2FyZC5cbiovXG5jb25zdCBjdXJzb3JTdWJ3b3JkQmFja3dhcmQgPSB2aWV3ID0+IGN1cnNvckJ5U3Vid29yZCh2aWV3LCBmYWxzZSk7XG5mdW5jdGlvbiBpbnRlcmVzdGluZ05vZGUoc3RhdGUsIG5vZGUsIGJyYWNrZXRQcm9wKSB7XG4gICAgaWYgKG5vZGUudHlwZS5wcm9wKGJyYWNrZXRQcm9wKSlcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgbGV0IGxlbiA9IG5vZGUudG8gLSBub2RlLmZyb207XG4gICAgcmV0dXJuIGxlbiAmJiAobGVuID4gMiB8fCAvW15cXHMsLjs6XS8udGVzdChzdGF0ZS5zbGljZURvYyhub2RlLmZyb20sIG5vZGUudG8pKSkgfHwgbm9kZS5maXJzdENoaWxkO1xufVxuZnVuY3Rpb24gbW92ZUJ5U3ludGF4KHN0YXRlLCBzdGFydCwgZm9yd2FyZCkge1xuICAgIGxldCBwb3MgPSBzeW50YXhUcmVlKHN0YXRlKS5yZXNvbHZlSW5uZXIoc3RhcnQuaGVhZCk7XG4gICAgbGV0IGJyYWNrZXRQcm9wID0gZm9yd2FyZCA/IE5vZGVQcm9wLmNsb3NlZEJ5IDogTm9kZVByb3Aub3BlbmVkQnk7XG4gICAgLy8gU2NhbiBmb3J3YXJkIHRocm91Z2ggY2hpbGQgbm9kZXMgdG8gc2VlIGlmIHRoZXJlJ3MgYW4gaW50ZXJlc3RpbmdcbiAgICAvLyBub2RlIGFoZWFkLlxuICAgIGZvciAobGV0IGF0ID0gc3RhcnQuaGVhZDs7KSB7XG4gICAgICAgIGxldCBuZXh0ID0gZm9yd2FyZCA/IHBvcy5jaGlsZEFmdGVyKGF0KSA6IHBvcy5jaGlsZEJlZm9yZShhdCk7XG4gICAgICAgIGlmICghbmV4dClcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBpZiAoaW50ZXJlc3RpbmdOb2RlKHN0YXRlLCBuZXh0LCBicmFja2V0UHJvcCkpXG4gICAgICAgICAgICBwb3MgPSBuZXh0O1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBhdCA9IGZvcndhcmQgPyBuZXh0LnRvIDogbmV4dC5mcm9tO1xuICAgIH1cbiAgICBsZXQgYnJhY2tldCA9IHBvcy50eXBlLnByb3AoYnJhY2tldFByb3ApLCBtYXRjaCwgbmV3UG9zO1xuICAgIGlmIChicmFja2V0ICYmIChtYXRjaCA9IGZvcndhcmQgPyBtYXRjaEJyYWNrZXRzKHN0YXRlLCBwb3MuZnJvbSwgMSkgOiBtYXRjaEJyYWNrZXRzKHN0YXRlLCBwb3MudG8sIC0xKSkgJiYgbWF0Y2gubWF0Y2hlZClcbiAgICAgICAgbmV3UG9zID0gZm9yd2FyZCA/IG1hdGNoLmVuZC50byA6IG1hdGNoLmVuZC5mcm9tO1xuICAgIGVsc2VcbiAgICAgICAgbmV3UG9zID0gZm9yd2FyZCA/IHBvcy50byA6IHBvcy5mcm9tO1xuICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKG5ld1BvcywgZm9yd2FyZCA/IC0xIDogMSk7XG59XG4vKipcbk1vdmUgdGhlIGN1cnNvciBvdmVyIHRoZSBuZXh0IHN5bnRhY3RpYyBlbGVtZW50IHRvIHRoZSBsZWZ0LlxuKi9cbmNvbnN0IGN1cnNvclN5bnRheExlZnQgPSB2aWV3ID0+IG1vdmVTZWwodmlldywgcmFuZ2UgPT4gbW92ZUJ5U3ludGF4KHZpZXcuc3RhdGUsIHJhbmdlLCAhbHRyQXRDdXJzb3IodmlldykpKTtcbi8qKlxuTW92ZSB0aGUgY3Vyc29yIG92ZXIgdGhlIG5leHQgc3ludGFjdGljIGVsZW1lbnQgdG8gdGhlIHJpZ2h0LlxuKi9cbmNvbnN0IGN1cnNvclN5bnRheFJpZ2h0ID0gdmlldyA9PiBtb3ZlU2VsKHZpZXcsIHJhbmdlID0+IG1vdmVCeVN5bnRheCh2aWV3LnN0YXRlLCByYW5nZSwgbHRyQXRDdXJzb3IodmlldykpKTtcbmZ1bmN0aW9uIGN1cnNvckJ5TGluZSh2aWV3LCBmb3J3YXJkKSB7XG4gICAgcmV0dXJuIG1vdmVTZWwodmlldywgcmFuZ2UgPT4ge1xuICAgICAgICBpZiAoIXJhbmdlLmVtcHR5KVxuICAgICAgICAgICAgcmV0dXJuIHJhbmdlRW5kKHJhbmdlLCBmb3J3YXJkKTtcbiAgICAgICAgbGV0IG1vdmVkID0gdmlldy5tb3ZlVmVydGljYWxseShyYW5nZSwgZm9yd2FyZCk7XG4gICAgICAgIHJldHVybiBtb3ZlZC5oZWFkICE9IHJhbmdlLmhlYWQgPyBtb3ZlZCA6IHZpZXcubW92ZVRvTGluZUJvdW5kYXJ5KHJhbmdlLCBmb3J3YXJkKTtcbiAgICB9KTtcbn1cbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIG9uZSBsaW5lIHVwLlxuKi9cbmNvbnN0IGN1cnNvckxpbmVVcCA9IHZpZXcgPT4gY3Vyc29yQnlMaW5lKHZpZXcsIGZhbHNlKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIG9uZSBsaW5lIGRvd24uXG4qL1xuY29uc3QgY3Vyc29yTGluZURvd24gPSB2aWV3ID0+IGN1cnNvckJ5TGluZSh2aWV3LCB0cnVlKTtcbmZ1bmN0aW9uIHBhZ2VIZWlnaHQodmlldykge1xuICAgIHJldHVybiBNYXRoLm1heCh2aWV3LmRlZmF1bHRMaW5lSGVpZ2h0LCBNYXRoLm1pbih2aWV3LmRvbS5jbGllbnRIZWlnaHQsIGlubmVySGVpZ2h0KSAtIDUpO1xufVxuZnVuY3Rpb24gY3Vyc29yQnlQYWdlKHZpZXcsIGZvcndhcmQpIHtcbiAgICBsZXQgeyBzdGF0ZSB9ID0gdmlldywgc2VsZWN0aW9uID0gdXBkYXRlU2VsKHN0YXRlLnNlbGVjdGlvbiwgcmFuZ2UgPT4ge1xuICAgICAgICByZXR1cm4gcmFuZ2UuZW1wdHkgPyB2aWV3Lm1vdmVWZXJ0aWNhbGx5KHJhbmdlLCBmb3J3YXJkLCBwYWdlSGVpZ2h0KHZpZXcpKSA6IHJhbmdlRW5kKHJhbmdlLCBmb3J3YXJkKTtcbiAgICB9KTtcbiAgICBpZiAoc2VsZWN0aW9uLmVxKHN0YXRlLnNlbGVjdGlvbikpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgc3RhcnRQb3MgPSB2aWV3LmNvb3Jkc0F0UG9zKHN0YXRlLnNlbGVjdGlvbi5tYWluLmhlYWQpO1xuICAgIGxldCBzY3JvbGxSZWN0ID0gdmlldy5zY3JvbGxET00uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgbGV0IGVmZmVjdDtcbiAgICBpZiAoc3RhcnRQb3MgJiYgc3RhcnRQb3MudG9wID4gc2Nyb2xsUmVjdC50b3AgJiYgc3RhcnRQb3MuYm90dG9tIDwgc2Nyb2xsUmVjdC5ib3R0b20gJiZcbiAgICAgICAgc3RhcnRQb3MudG9wIC0gc2Nyb2xsUmVjdC50b3AgPD0gdmlldy5zY3JvbGxET00uc2Nyb2xsSGVpZ2h0IC0gdmlldy5zY3JvbGxET00uc2Nyb2xsVG9wIC0gdmlldy5zY3JvbGxET00uY2xpZW50SGVpZ2h0KVxuICAgICAgICBlZmZlY3QgPSBFZGl0b3JWaWV3LnNjcm9sbEludG9WaWV3KHNlbGVjdGlvbi5tYWluLmhlYWQsIHsgeTogXCJzdGFydFwiLCB5TWFyZ2luOiBzdGFydFBvcy50b3AgLSBzY3JvbGxSZWN0LnRvcCB9KTtcbiAgICB2aWV3LmRpc3BhdGNoKHNldFNlbChzdGF0ZSwgc2VsZWN0aW9uKSwgeyBlZmZlY3RzOiBlZmZlY3QgfSk7XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBvbmUgcGFnZSB1cC5cbiovXG5jb25zdCBjdXJzb3JQYWdlVXAgPSB2aWV3ID0+IGN1cnNvckJ5UGFnZSh2aWV3LCBmYWxzZSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBvbmUgcGFnZSBkb3duLlxuKi9cbmNvbnN0IGN1cnNvclBhZ2VEb3duID0gdmlldyA9PiBjdXJzb3JCeVBhZ2UodmlldywgdHJ1ZSk7XG5mdW5jdGlvbiBtb3ZlQnlMaW5lQm91bmRhcnkodmlldywgc3RhcnQsIGZvcndhcmQpIHtcbiAgICBsZXQgbGluZSA9IHZpZXcubGluZUJsb2NrQXQoc3RhcnQuaGVhZCksIG1vdmVkID0gdmlldy5tb3ZlVG9MaW5lQm91bmRhcnkoc3RhcnQsIGZvcndhcmQpO1xuICAgIGlmIChtb3ZlZC5oZWFkID09IHN0YXJ0LmhlYWQgJiYgbW92ZWQuaGVhZCAhPSAoZm9yd2FyZCA/IGxpbmUudG8gOiBsaW5lLmZyb20pKVxuICAgICAgICBtb3ZlZCA9IHZpZXcubW92ZVRvTGluZUJvdW5kYXJ5KHN0YXJ0LCBmb3J3YXJkLCBmYWxzZSk7XG4gICAgaWYgKCFmb3J3YXJkICYmIG1vdmVkLmhlYWQgPT0gbGluZS5mcm9tICYmIGxpbmUubGVuZ3RoKSB7XG4gICAgICAgIGxldCBzcGFjZSA9IC9eXFxzKi8uZXhlYyh2aWV3LnN0YXRlLnNsaWNlRG9jKGxpbmUuZnJvbSwgTWF0aC5taW4obGluZS5mcm9tICsgMTAwLCBsaW5lLnRvKSkpWzBdLmxlbmd0aDtcbiAgICAgICAgaWYgKHNwYWNlICYmIHN0YXJ0LmhlYWQgIT0gbGluZS5mcm9tICsgc3BhY2UpXG4gICAgICAgICAgICBtb3ZlZCA9IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IobGluZS5mcm9tICsgc3BhY2UpO1xuICAgIH1cbiAgICByZXR1cm4gbW92ZWQ7XG59XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiB0byB0aGUgbmV4dCBsaW5lIHdyYXAgcG9pbnQsIG9yIHRvIHRoZSBlbmQgb2ZcbnRoZSBsaW5lIGlmIHRoZXJlIGlzbid0IG9uZSBsZWZ0IG9uIHRoaXMgbGluZS5cbiovXG5jb25zdCBjdXJzb3JMaW5lQm91bmRhcnlGb3J3YXJkID0gdmlldyA9PiBtb3ZlU2VsKHZpZXcsIHJhbmdlID0+IG1vdmVCeUxpbmVCb3VuZGFyeSh2aWV3LCByYW5nZSwgdHJ1ZSkpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gdG8gcHJldmlvdXMgbGluZSB3cmFwIHBvaW50LCBvciBmYWlsaW5nIHRoYXQgdG9cbnRoZSBzdGFydCBvZiB0aGUgbGluZS4gSWYgdGhlIGxpbmUgaXMgaW5kZW50ZWQsIGFuZCB0aGUgY3Vyc29yXG5pc24ndCBhbHJlYWR5IGF0IHRoZSBlbmQgb2YgdGhlIGluZGVudGF0aW9uLCB0aGlzIHdpbGwgbW92ZSB0byB0aGVcbmVuZCBvZiB0aGUgaW5kZW50YXRpb24gaW5zdGVhZCBvZiB0aGUgc3RhcnQgb2YgdGhlIGxpbmUuXG4qL1xuY29uc3QgY3Vyc29yTGluZUJvdW5kYXJ5QmFja3dhcmQgPSB2aWV3ID0+IG1vdmVTZWwodmlldywgcmFuZ2UgPT4gbW92ZUJ5TGluZUJvdW5kYXJ5KHZpZXcsIHJhbmdlLCBmYWxzZSkpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gb25lIGxpbmUgd3JhcCBwb2ludCB0byB0aGUgbGVmdC5cbiovXG5jb25zdCBjdXJzb3JMaW5lQm91bmRhcnlMZWZ0ID0gdmlldyA9PiBtb3ZlU2VsKHZpZXcsIHJhbmdlID0+IG1vdmVCeUxpbmVCb3VuZGFyeSh2aWV3LCByYW5nZSwgIWx0ckF0Q3Vyc29yKHZpZXcpKSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBvbmUgbGluZSB3cmFwIHBvaW50IHRvIHRoZSByaWdodC5cbiovXG5jb25zdCBjdXJzb3JMaW5lQm91bmRhcnlSaWdodCA9IHZpZXcgPT4gbW92ZVNlbCh2aWV3LCByYW5nZSA9PiBtb3ZlQnlMaW5lQm91bmRhcnkodmlldywgcmFuZ2UsIGx0ckF0Q3Vyc29yKHZpZXcpKSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiB0byB0aGUgc3RhcnQgb2YgdGhlIGxpbmUuXG4qL1xuY29uc3QgY3Vyc29yTGluZVN0YXJ0ID0gdmlldyA9PiBtb3ZlU2VsKHZpZXcsIHJhbmdlID0+IEVkaXRvclNlbGVjdGlvbi5jdXJzb3Iodmlldy5saW5lQmxvY2tBdChyYW5nZS5oZWFkKS5mcm9tLCAxKSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiB0byB0aGUgZW5kIG9mIHRoZSBsaW5lLlxuKi9cbmNvbnN0IGN1cnNvckxpbmVFbmQgPSB2aWV3ID0+IG1vdmVTZWwodmlldywgcmFuZ2UgPT4gRWRpdG9yU2VsZWN0aW9uLmN1cnNvcih2aWV3LmxpbmVCbG9ja0F0KHJhbmdlLmhlYWQpLnRvLCAtMSkpO1xuZnVuY3Rpb24gdG9NYXRjaGluZ0JyYWNrZXQoc3RhdGUsIGRpc3BhdGNoLCBleHRlbmQpIHtcbiAgICBsZXQgZm91bmQgPSBmYWxzZSwgc2VsZWN0aW9uID0gdXBkYXRlU2VsKHN0YXRlLnNlbGVjdGlvbiwgcmFuZ2UgPT4ge1xuICAgICAgICBsZXQgbWF0Y2hpbmcgPSBtYXRjaEJyYWNrZXRzKHN0YXRlLCByYW5nZS5oZWFkLCAtMSlcbiAgICAgICAgICAgIHx8IG1hdGNoQnJhY2tldHMoc3RhdGUsIHJhbmdlLmhlYWQsIDEpXG4gICAgICAgICAgICB8fCAocmFuZ2UuaGVhZCA+IDAgJiYgbWF0Y2hCcmFja2V0cyhzdGF0ZSwgcmFuZ2UuaGVhZCAtIDEsIDEpKVxuICAgICAgICAgICAgfHwgKHJhbmdlLmhlYWQgPCBzdGF0ZS5kb2MubGVuZ3RoICYmIG1hdGNoQnJhY2tldHMoc3RhdGUsIHJhbmdlLmhlYWQgKyAxLCAtMSkpO1xuICAgICAgICBpZiAoIW1hdGNoaW5nIHx8ICFtYXRjaGluZy5lbmQpXG4gICAgICAgICAgICByZXR1cm4gcmFuZ2U7XG4gICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgbGV0IGhlYWQgPSBtYXRjaGluZy5zdGFydC5mcm9tID09IHJhbmdlLmhlYWQgPyBtYXRjaGluZy5lbmQudG8gOiBtYXRjaGluZy5lbmQuZnJvbTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZCA/IEVkaXRvclNlbGVjdGlvbi5yYW5nZShyYW5nZS5hbmNob3IsIGhlYWQpIDogRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihoZWFkKTtcbiAgICB9KTtcbiAgICBpZiAoIWZvdW5kKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgZGlzcGF0Y2goc2V0U2VsKHN0YXRlLCBzZWxlY3Rpb24pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIHRvIHRoZSBicmFja2V0IG1hdGNoaW5nIHRoZSBvbmUgaXQgaXMgY3VycmVudGx5XG5vbiwgaWYgYW55LlxuKi9cbmNvbnN0IGN1cnNvck1hdGNoaW5nQnJhY2tldCA9ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB0b01hdGNoaW5nQnJhY2tldChzdGF0ZSwgZGlzcGF0Y2gsIGZhbHNlKTtcbi8qKlxuRXh0ZW5kIHRoZSBzZWxlY3Rpb24gdG8gdGhlIGJyYWNrZXQgbWF0Y2hpbmcgdGhlIG9uZSB0aGUgc2VsZWN0aW9uXG5oZWFkIGlzIGN1cnJlbnRseSBvbiwgaWYgYW55LlxuKi9cbmNvbnN0IHNlbGVjdE1hdGNoaW5nQnJhY2tldCA9ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB0b01hdGNoaW5nQnJhY2tldChzdGF0ZSwgZGlzcGF0Y2gsIHRydWUpO1xuZnVuY3Rpb24gZXh0ZW5kU2VsKHZpZXcsIGhvdykge1xuICAgIGxldCBzZWxlY3Rpb24gPSB1cGRhdGVTZWwodmlldy5zdGF0ZS5zZWxlY3Rpb24sIHJhbmdlID0+IHtcbiAgICAgICAgbGV0IGhlYWQgPSBob3cocmFuZ2UpO1xuICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLnJhbmdlKHJhbmdlLmFuY2hvciwgaGVhZC5oZWFkLCBoZWFkLmdvYWxDb2x1bW4pO1xuICAgIH0pO1xuICAgIGlmIChzZWxlY3Rpb24uZXEodmlldy5zdGF0ZS5zZWxlY3Rpb24pKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdmlldy5kaXNwYXRjaChzZXRTZWwodmlldy5zdGF0ZSwgc2VsZWN0aW9uKSk7XG4gICAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBzZWxlY3RCeUNoYXIodmlldywgZm9yd2FyZCkge1xuICAgIHJldHVybiBleHRlbmRTZWwodmlldywgcmFuZ2UgPT4gdmlldy5tb3ZlQnlDaGFyKHJhbmdlLCBmb3J3YXJkKSk7XG59XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBoZWFkIG9uZSBjaGFyYWN0ZXIgdG8gdGhlIGxlZnQsIHdoaWxlIGxlYXZpbmdcbnRoZSBhbmNob3IgaW4gcGxhY2UuXG4qL1xuY29uc3Qgc2VsZWN0Q2hhckxlZnQgPSB2aWV3ID0+IHNlbGVjdEJ5Q2hhcih2aWV3LCAhbHRyQXRDdXJzb3IodmlldykpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gaGVhZCBvbmUgY2hhcmFjdGVyIHRvIHRoZSByaWdodC5cbiovXG5jb25zdCBzZWxlY3RDaGFyUmlnaHQgPSB2aWV3ID0+IHNlbGVjdEJ5Q2hhcih2aWV3LCBsdHJBdEN1cnNvcih2aWV3KSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBoZWFkIG9uZSBjaGFyYWN0ZXIgZm9yd2FyZC5cbiovXG5jb25zdCBzZWxlY3RDaGFyRm9yd2FyZCA9IHZpZXcgPT4gc2VsZWN0QnlDaGFyKHZpZXcsIHRydWUpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gaGVhZCBvbmUgY2hhcmFjdGVyIGJhY2t3YXJkLlxuKi9cbmNvbnN0IHNlbGVjdENoYXJCYWNrd2FyZCA9IHZpZXcgPT4gc2VsZWN0QnlDaGFyKHZpZXcsIGZhbHNlKTtcbmZ1bmN0aW9uIHNlbGVjdEJ5R3JvdXAodmlldywgZm9yd2FyZCkge1xuICAgIHJldHVybiBleHRlbmRTZWwodmlldywgcmFuZ2UgPT4gdmlldy5tb3ZlQnlHcm91cChyYW5nZSwgZm9yd2FyZCkpO1xufVxuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gaGVhZCBvbmUgW2dyb3VwXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmN1cnNvckdyb3VwTGVmdCkgdG9cbnRoZSBsZWZ0LlxuKi9cbmNvbnN0IHNlbGVjdEdyb3VwTGVmdCA9IHZpZXcgPT4gc2VsZWN0QnlHcm91cCh2aWV3LCAhbHRyQXRDdXJzb3IodmlldykpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gaGVhZCBvbmUgZ3JvdXAgdG8gdGhlIHJpZ2h0LlxuKi9cbmNvbnN0IHNlbGVjdEdyb3VwUmlnaHQgPSB2aWV3ID0+IHNlbGVjdEJ5R3JvdXAodmlldywgbHRyQXRDdXJzb3IodmlldykpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gaGVhZCBvbmUgZ3JvdXAgZm9yd2FyZC5cbiovXG5jb25zdCBzZWxlY3RHcm91cEZvcndhcmQgPSB2aWV3ID0+IHNlbGVjdEJ5R3JvdXAodmlldywgdHJ1ZSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBoZWFkIG9uZSBncm91cCBiYWNrd2FyZC5cbiovXG5jb25zdCBzZWxlY3RHcm91cEJhY2t3YXJkID0gdmlldyA9PiBzZWxlY3RCeUdyb3VwKHZpZXcsIGZhbHNlKTtcbmZ1bmN0aW9uIHNlbGVjdEJ5U3Vid29yZCh2aWV3LCBmb3J3YXJkKSB7XG4gICAgcmV0dXJuIGV4dGVuZFNlbCh2aWV3LCByYW5nZSA9PiBtb3ZlQnlTdWJ3b3JkKHZpZXcsIHJhbmdlLCBmb3J3YXJkKSk7XG59XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBoZWFkIG9uZSBncm91cCBvciBjYW1lbC1jYXNlIHN1YndvcmQgZm9yd2FyZC5cbiovXG5jb25zdCBzZWxlY3RTdWJ3b3JkRm9yd2FyZCA9IHZpZXcgPT4gc2VsZWN0QnlTdWJ3b3JkKHZpZXcsIHRydWUpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gaGVhZCBvbmUgZ3JvdXAgb3Igc3Vid29yZCBiYWNrd2FyZC5cbiovXG5jb25zdCBzZWxlY3RTdWJ3b3JkQmFja3dhcmQgPSB2aWV3ID0+IHNlbGVjdEJ5U3Vid29yZCh2aWV3LCBmYWxzZSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBoZWFkIG92ZXIgdGhlIG5leHQgc3ludGFjdGljIGVsZW1lbnQgdG8gdGhlIGxlZnQuXG4qL1xuY29uc3Qgc2VsZWN0U3ludGF4TGVmdCA9IHZpZXcgPT4gZXh0ZW5kU2VsKHZpZXcsIHJhbmdlID0+IG1vdmVCeVN5bnRheCh2aWV3LnN0YXRlLCByYW5nZSwgIWx0ckF0Q3Vyc29yKHZpZXcpKSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBoZWFkIG92ZXIgdGhlIG5leHQgc3ludGFjdGljIGVsZW1lbnQgdG8gdGhlIHJpZ2h0LlxuKi9cbmNvbnN0IHNlbGVjdFN5bnRheFJpZ2h0ID0gdmlldyA9PiBleHRlbmRTZWwodmlldywgcmFuZ2UgPT4gbW92ZUJ5U3ludGF4KHZpZXcuc3RhdGUsIHJhbmdlLCBsdHJBdEN1cnNvcih2aWV3KSkpO1xuZnVuY3Rpb24gc2VsZWN0QnlMaW5lKHZpZXcsIGZvcndhcmQpIHtcbiAgICByZXR1cm4gZXh0ZW5kU2VsKHZpZXcsIHJhbmdlID0+IHZpZXcubW92ZVZlcnRpY2FsbHkocmFuZ2UsIGZvcndhcmQpKTtcbn1cbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIGhlYWQgb25lIGxpbmUgdXAuXG4qL1xuY29uc3Qgc2VsZWN0TGluZVVwID0gdmlldyA9PiBzZWxlY3RCeUxpbmUodmlldywgZmFsc2UpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gaGVhZCBvbmUgbGluZSBkb3duLlxuKi9cbmNvbnN0IHNlbGVjdExpbmVEb3duID0gdmlldyA9PiBzZWxlY3RCeUxpbmUodmlldywgdHJ1ZSk7XG5mdW5jdGlvbiBzZWxlY3RCeVBhZ2UodmlldywgZm9yd2FyZCkge1xuICAgIHJldHVybiBleHRlbmRTZWwodmlldywgcmFuZ2UgPT4gdmlldy5tb3ZlVmVydGljYWxseShyYW5nZSwgZm9yd2FyZCwgcGFnZUhlaWdodCh2aWV3KSkpO1xufVxuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gaGVhZCBvbmUgcGFnZSB1cC5cbiovXG5jb25zdCBzZWxlY3RQYWdlVXAgPSB2aWV3ID0+IHNlbGVjdEJ5UGFnZSh2aWV3LCBmYWxzZSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBoZWFkIG9uZSBwYWdlIGRvd24uXG4qL1xuY29uc3Qgc2VsZWN0UGFnZURvd24gPSB2aWV3ID0+IHNlbGVjdEJ5UGFnZSh2aWV3LCB0cnVlKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIGhlYWQgdG8gdGhlIG5leHQgbGluZSBib3VuZGFyeS5cbiovXG5jb25zdCBzZWxlY3RMaW5lQm91bmRhcnlGb3J3YXJkID0gdmlldyA9PiBleHRlbmRTZWwodmlldywgcmFuZ2UgPT4gbW92ZUJ5TGluZUJvdW5kYXJ5KHZpZXcsIHJhbmdlLCB0cnVlKSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBoZWFkIHRvIHRoZSBwcmV2aW91cyBsaW5lIGJvdW5kYXJ5LlxuKi9cbmNvbnN0IHNlbGVjdExpbmVCb3VuZGFyeUJhY2t3YXJkID0gdmlldyA9PiBleHRlbmRTZWwodmlldywgcmFuZ2UgPT4gbW92ZUJ5TGluZUJvdW5kYXJ5KHZpZXcsIHJhbmdlLCBmYWxzZSkpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gaGVhZCBvbmUgbGluZSBib3VuZGFyeSB0byB0aGUgbGVmdC5cbiovXG5jb25zdCBzZWxlY3RMaW5lQm91bmRhcnlMZWZ0ID0gdmlldyA9PiBleHRlbmRTZWwodmlldywgcmFuZ2UgPT4gbW92ZUJ5TGluZUJvdW5kYXJ5KHZpZXcsIHJhbmdlLCAhbHRyQXRDdXJzb3IodmlldykpKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIGhlYWQgb25lIGxpbmUgYm91bmRhcnkgdG8gdGhlIHJpZ2h0LlxuKi9cbmNvbnN0IHNlbGVjdExpbmVCb3VuZGFyeVJpZ2h0ID0gdmlldyA9PiBleHRlbmRTZWwodmlldywgcmFuZ2UgPT4gbW92ZUJ5TGluZUJvdW5kYXJ5KHZpZXcsIHJhbmdlLCBsdHJBdEN1cnNvcih2aWV3KSkpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gaGVhZCB0byB0aGUgc3RhcnQgb2YgdGhlIGxpbmUuXG4qL1xuY29uc3Qgc2VsZWN0TGluZVN0YXJ0ID0gdmlldyA9PiBleHRlbmRTZWwodmlldywgcmFuZ2UgPT4gRWRpdG9yU2VsZWN0aW9uLmN1cnNvcih2aWV3LmxpbmVCbG9ja0F0KHJhbmdlLmhlYWQpLmZyb20pKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIGhlYWQgdG8gdGhlIGVuZCBvZiB0aGUgbGluZS5cbiovXG5jb25zdCBzZWxlY3RMaW5lRW5kID0gdmlldyA9PiBleHRlbmRTZWwodmlldywgcmFuZ2UgPT4gRWRpdG9yU2VsZWN0aW9uLmN1cnNvcih2aWV3LmxpbmVCbG9ja0F0KHJhbmdlLmhlYWQpLnRvKSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiB0byB0aGUgc3RhcnQgb2YgdGhlIGRvY3VtZW50LlxuKi9cbmNvbnN0IGN1cnNvckRvY1N0YXJ0ID0gKHsgc3RhdGUsIGRpc3BhdGNoIH0pID0+IHtcbiAgICBkaXNwYXRjaChzZXRTZWwoc3RhdGUsIHsgYW5jaG9yOiAwIH0pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiB0byB0aGUgZW5kIG9mIHRoZSBkb2N1bWVudC5cbiovXG5jb25zdCBjdXJzb3JEb2NFbmQgPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICAgIGRpc3BhdGNoKHNldFNlbChzdGF0ZSwgeyBhbmNob3I6IHN0YXRlLmRvYy5sZW5ndGggfSkpO1xuICAgIHJldHVybiB0cnVlO1xufTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIGhlYWQgdG8gdGhlIHN0YXJ0IG9mIHRoZSBkb2N1bWVudC5cbiovXG5jb25zdCBzZWxlY3REb2NTdGFydCA9ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gICAgZGlzcGF0Y2goc2V0U2VsKHN0YXRlLCB7IGFuY2hvcjogc3RhdGUuc2VsZWN0aW9uLm1haW4uYW5jaG9yLCBoZWFkOiAwIH0pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBoZWFkIHRvIHRoZSBlbmQgb2YgdGhlIGRvY3VtZW50LlxuKi9cbmNvbnN0IHNlbGVjdERvY0VuZCA9ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gICAgZGlzcGF0Y2goc2V0U2VsKHN0YXRlLCB7IGFuY2hvcjogc3RhdGUuc2VsZWN0aW9uLm1haW4uYW5jaG9yLCBoZWFkOiBzdGF0ZS5kb2MubGVuZ3RoIH0pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcblNlbGVjdCB0aGUgZW50aXJlIGRvY3VtZW50LlxuKi9cbmNvbnN0IHNlbGVjdEFsbCA9ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gICAgZGlzcGF0Y2goc3RhdGUudXBkYXRlKHsgc2VsZWN0aW9uOiB7IGFuY2hvcjogMCwgaGVhZDogc3RhdGUuZG9jLmxlbmd0aCB9LCB1c2VyRXZlbnQ6IFwic2VsZWN0XCIgfSkpO1xuICAgIHJldHVybiB0cnVlO1xufTtcbi8qKlxuRXhwYW5kIHRoZSBzZWxlY3Rpb24gdG8gY292ZXIgZW50aXJlIGxpbmVzLlxuKi9cbmNvbnN0IHNlbGVjdExpbmUgPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICAgIGxldCByYW5nZXMgPSBzZWxlY3RlZExpbmVCbG9ja3Moc3RhdGUpLm1hcCgoeyBmcm9tLCB0byB9KSA9PiBFZGl0b3JTZWxlY3Rpb24ucmFuZ2UoZnJvbSwgTWF0aC5taW4odG8gKyAxLCBzdGF0ZS5kb2MubGVuZ3RoKSkpO1xuICAgIGRpc3BhdGNoKHN0YXRlLnVwZGF0ZSh7IHNlbGVjdGlvbjogRWRpdG9yU2VsZWN0aW9uLmNyZWF0ZShyYW5nZXMpLCB1c2VyRXZlbnQ6IFwic2VsZWN0XCIgfSkpO1xuICAgIHJldHVybiB0cnVlO1xufTtcbi8qKlxuU2VsZWN0IHRoZSBuZXh0IHN5bnRhY3RpYyBjb25zdHJ1Y3QgdGhhdCBpcyBsYXJnZXIgdGhhbiB0aGVcbnNlbGVjdGlvbi4gTm90ZSB0aGF0IHRoaXMgd2lsbCBvbmx5IHdvcmsgaW5zb2ZhciBhcyB0aGUgbGFuZ3VhZ2Vcbltwcm92aWRlcl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5sYW5ndWFnZSkgeW91IHVzZSBidWlsZHMgdXAgYSBmdWxsXG5zeW50YXggdHJlZS5cbiovXG5jb25zdCBzZWxlY3RQYXJlbnRTeW50YXggPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICAgIGxldCBzZWxlY3Rpb24gPSB1cGRhdGVTZWwoc3RhdGUuc2VsZWN0aW9uLCByYW5nZSA9PiB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgbGV0IGNvbnRleHQgPSBzeW50YXhUcmVlKHN0YXRlKS5yZXNvbHZlSW5uZXIocmFuZ2UuaGVhZCwgMSk7XG4gICAgICAgIHdoaWxlICghKChjb250ZXh0LmZyb20gPCByYW5nZS5mcm9tICYmIGNvbnRleHQudG8gPj0gcmFuZ2UudG8pIHx8XG4gICAgICAgICAgICAoY29udGV4dC50byA+IHJhbmdlLnRvICYmIGNvbnRleHQuZnJvbSA8PSByYW5nZS5mcm9tKSB8fFxuICAgICAgICAgICAgISgoX2EgPSBjb250ZXh0LnBhcmVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnBhcmVudCkpKVxuICAgICAgICAgICAgY29udGV4dCA9IGNvbnRleHQucGFyZW50O1xuICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLnJhbmdlKGNvbnRleHQudG8sIGNvbnRleHQuZnJvbSk7XG4gICAgfSk7XG4gICAgZGlzcGF0Y2goc2V0U2VsKHN0YXRlLCBzZWxlY3Rpb24pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcblNpbXBsaWZ5IHRoZSBjdXJyZW50IHNlbGVjdGlvbi4gV2hlbiBtdWx0aXBsZSByYW5nZXMgYXJlIHNlbGVjdGVkLFxucmVkdWNlIGl0IHRvIGl0cyBtYWluIHJhbmdlLiBPdGhlcndpc2UsIGlmIHRoZSBzZWxlY3Rpb24gaXNcbm5vbi1lbXB0eSwgY29udmVydCBpdCB0byBhIGN1cnNvciBzZWxlY3Rpb24uXG4qL1xuY29uc3Qgc2ltcGxpZnlTZWxlY3Rpb24gPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICAgIGxldCBjdXIgPSBzdGF0ZS5zZWxlY3Rpb24sIHNlbGVjdGlvbiA9IG51bGw7XG4gICAgaWYgKGN1ci5yYW5nZXMubGVuZ3RoID4gMSlcbiAgICAgICAgc2VsZWN0aW9uID0gRWRpdG9yU2VsZWN0aW9uLmNyZWF0ZShbY3VyLm1haW5dKTtcbiAgICBlbHNlIGlmICghY3VyLm1haW4uZW1wdHkpXG4gICAgICAgIHNlbGVjdGlvbiA9IEVkaXRvclNlbGVjdGlvbi5jcmVhdGUoW0VkaXRvclNlbGVjdGlvbi5jdXJzb3IoY3VyLm1haW4uaGVhZCldKTtcbiAgICBpZiAoIXNlbGVjdGlvbilcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGRpc3BhdGNoKHNldFNlbChzdGF0ZSwgc2VsZWN0aW9uKSk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuZnVuY3Rpb24gZGVsZXRlQnkodGFyZ2V0LCBieSkge1xuICAgIGlmICh0YXJnZXQuc3RhdGUucmVhZE9ubHkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgZXZlbnQgPSBcImRlbGV0ZS5zZWxlY3Rpb25cIiwgeyBzdGF0ZSB9ID0gdGFyZ2V0O1xuICAgIGxldCBjaGFuZ2VzID0gc3RhdGUuY2hhbmdlQnlSYW5nZShyYW5nZSA9PiB7XG4gICAgICAgIGxldCB7IGZyb20sIHRvIH0gPSByYW5nZTtcbiAgICAgICAgaWYgKGZyb20gPT0gdG8pIHtcbiAgICAgICAgICAgIGxldCB0b3dhcmRzID0gYnkoZnJvbSk7XG4gICAgICAgICAgICBpZiAodG93YXJkcyA8IGZyb20pIHtcbiAgICAgICAgICAgICAgICBldmVudCA9IFwiZGVsZXRlLmJhY2t3YXJkXCI7XG4gICAgICAgICAgICAgICAgdG93YXJkcyA9IHNraXBBdG9taWModGFyZ2V0LCB0b3dhcmRzLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0b3dhcmRzID4gZnJvbSkge1xuICAgICAgICAgICAgICAgIGV2ZW50ID0gXCJkZWxldGUuZm9yd2FyZFwiO1xuICAgICAgICAgICAgICAgIHRvd2FyZHMgPSBza2lwQXRvbWljKHRhcmdldCwgdG93YXJkcywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmcm9tID0gTWF0aC5taW4oZnJvbSwgdG93YXJkcyk7XG4gICAgICAgICAgICB0byA9IE1hdGgubWF4KHRvLCB0b3dhcmRzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZyb20gPSBza2lwQXRvbWljKHRhcmdldCwgZnJvbSwgZmFsc2UpO1xuICAgICAgICAgICAgdG8gPSBza2lwQXRvbWljKHRhcmdldCwgdG8sIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmcm9tID09IHRvID8geyByYW5nZSB9IDogeyBjaGFuZ2VzOiB7IGZyb20sIHRvIH0sIHJhbmdlOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKGZyb20pIH07XG4gICAgfSk7XG4gICAgaWYgKGNoYW5nZXMuY2hhbmdlcy5lbXB0eSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHRhcmdldC5kaXNwYXRjaChzdGF0ZS51cGRhdGUoY2hhbmdlcywge1xuICAgICAgICBzY3JvbGxJbnRvVmlldzogdHJ1ZSxcbiAgICAgICAgdXNlckV2ZW50OiBldmVudCxcbiAgICAgICAgZWZmZWN0czogZXZlbnQgPT0gXCJkZWxldGUuc2VsZWN0aW9uXCIgPyBFZGl0b3JWaWV3LmFubm91bmNlLm9mKHN0YXRlLnBocmFzZShcIlNlbGVjdGlvbiBkZWxldGVkXCIpKSA6IHVuZGVmaW5lZFxuICAgIH0pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIHNraXBBdG9taWModGFyZ2V0LCBwb3MsIGZvcndhcmQpIHtcbiAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgRWRpdG9yVmlldylcbiAgICAgICAgZm9yIChsZXQgcmFuZ2VzIG9mIHRhcmdldC5zdGF0ZS5mYWNldChFZGl0b3JWaWV3LmF0b21pY1JhbmdlcykubWFwKGYgPT4gZih0YXJnZXQpKSlcbiAgICAgICAgICAgIHJhbmdlcy5iZXR3ZWVuKHBvcywgcG9zLCAoZnJvbSwgdG8pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZnJvbSA8IHBvcyAmJiB0byA+IHBvcylcbiAgICAgICAgICAgICAgICAgICAgcG9zID0gZm9yd2FyZCA/IHRvIDogZnJvbTtcbiAgICAgICAgICAgIH0pO1xuICAgIHJldHVybiBwb3M7XG59XG5jb25zdCBkZWxldGVCeUNoYXIgPSAodGFyZ2V0LCBmb3J3YXJkKSA9PiBkZWxldGVCeSh0YXJnZXQsIHBvcyA9PiB7XG4gICAgbGV0IHsgc3RhdGUgfSA9IHRhcmdldCwgbGluZSA9IHN0YXRlLmRvYy5saW5lQXQocG9zKSwgYmVmb3JlLCB0YXJnZXRQb3M7XG4gICAgaWYgKCFmb3J3YXJkICYmIHBvcyA+IGxpbmUuZnJvbSAmJiBwb3MgPCBsaW5lLmZyb20gKyAyMDAgJiZcbiAgICAgICAgIS9bXiBcXHRdLy50ZXN0KGJlZm9yZSA9IGxpbmUudGV4dC5zbGljZSgwLCBwb3MgLSBsaW5lLmZyb20pKSkge1xuICAgICAgICBpZiAoYmVmb3JlW2JlZm9yZS5sZW5ndGggLSAxXSA9PSBcIlxcdFwiKVxuICAgICAgICAgICAgcmV0dXJuIHBvcyAtIDE7XG4gICAgICAgIGxldCBjb2wgPSBjb3VudENvbHVtbihiZWZvcmUsIHN0YXRlLnRhYlNpemUpLCBkcm9wID0gY29sICUgZ2V0SW5kZW50VW5pdChzdGF0ZSkgfHwgZ2V0SW5kZW50VW5pdChzdGF0ZSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZHJvcCAmJiBiZWZvcmVbYmVmb3JlLmxlbmd0aCAtIDEgLSBpXSA9PSBcIiBcIjsgaSsrKVxuICAgICAgICAgICAgcG9zLS07XG4gICAgICAgIHRhcmdldFBvcyA9IHBvcztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRhcmdldFBvcyA9IGZpbmRDbHVzdGVyQnJlYWsobGluZS50ZXh0LCBwb3MgLSBsaW5lLmZyb20sIGZvcndhcmQsIGZvcndhcmQpICsgbGluZS5mcm9tO1xuICAgICAgICBpZiAodGFyZ2V0UG9zID09IHBvcyAmJiBsaW5lLm51bWJlciAhPSAoZm9yd2FyZCA/IHN0YXRlLmRvYy5saW5lcyA6IDEpKVxuICAgICAgICAgICAgdGFyZ2V0UG9zICs9IGZvcndhcmQgPyAxIDogLTE7XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXRQb3M7XG59KTtcbi8qKlxuRGVsZXRlIHRoZSBzZWxlY3Rpb24sIG9yLCBmb3IgY3Vyc29yIHNlbGVjdGlvbnMsIHRoZSBjaGFyYWN0ZXJcbmJlZm9yZSB0aGUgY3Vyc29yLlxuKi9cbmNvbnN0IGRlbGV0ZUNoYXJCYWNrd2FyZCA9IHZpZXcgPT4gZGVsZXRlQnlDaGFyKHZpZXcsIGZhbHNlKTtcbi8qKlxuRGVsZXRlIHRoZSBzZWxlY3Rpb24gb3IgdGhlIGNoYXJhY3RlciBhZnRlciB0aGUgY3Vyc29yLlxuKi9cbmNvbnN0IGRlbGV0ZUNoYXJGb3J3YXJkID0gdmlldyA9PiBkZWxldGVCeUNoYXIodmlldywgdHJ1ZSk7XG5jb25zdCBkZWxldGVCeUdyb3VwID0gKHRhcmdldCwgZm9yd2FyZCkgPT4gZGVsZXRlQnkodGFyZ2V0LCBzdGFydCA9PiB7XG4gICAgbGV0IHBvcyA9IHN0YXJ0LCB7IHN0YXRlIH0gPSB0YXJnZXQsIGxpbmUgPSBzdGF0ZS5kb2MubGluZUF0KHBvcyk7XG4gICAgbGV0IGNhdGVnb3JpemUgPSBzdGF0ZS5jaGFyQ2F0ZWdvcml6ZXIocG9zKTtcbiAgICBmb3IgKGxldCBjYXQgPSBudWxsOzspIHtcbiAgICAgICAgaWYgKHBvcyA9PSAoZm9yd2FyZCA/IGxpbmUudG8gOiBsaW5lLmZyb20pKSB7XG4gICAgICAgICAgICBpZiAocG9zID09IHN0YXJ0ICYmIGxpbmUubnVtYmVyICE9IChmb3J3YXJkID8gc3RhdGUuZG9jLmxpbmVzIDogMSkpXG4gICAgICAgICAgICAgICAgcG9zICs9IGZvcndhcmQgPyAxIDogLTE7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBsZXQgbmV4dCA9IGZpbmRDbHVzdGVyQnJlYWsobGluZS50ZXh0LCBwb3MgLSBsaW5lLmZyb20sIGZvcndhcmQpICsgbGluZS5mcm9tO1xuICAgICAgICBsZXQgbmV4dENoYXIgPSBsaW5lLnRleHQuc2xpY2UoTWF0aC5taW4ocG9zLCBuZXh0KSAtIGxpbmUuZnJvbSwgTWF0aC5tYXgocG9zLCBuZXh0KSAtIGxpbmUuZnJvbSk7XG4gICAgICAgIGxldCBuZXh0Q2F0ID0gY2F0ZWdvcml6ZShuZXh0Q2hhcik7XG4gICAgICAgIGlmIChjYXQgIT0gbnVsbCAmJiBuZXh0Q2F0ICE9IGNhdClcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBpZiAobmV4dENoYXIgIT0gXCIgXCIgfHwgcG9zICE9IHN0YXJ0KVxuICAgICAgICAgICAgY2F0ID0gbmV4dENhdDtcbiAgICAgICAgcG9zID0gbmV4dDtcbiAgICB9XG4gICAgcmV0dXJuIHBvcztcbn0pO1xuLyoqXG5EZWxldGUgdGhlIHNlbGVjdGlvbiBvciBiYWNrd2FyZCB1bnRpbCB0aGUgZW5kIG9mIHRoZSBuZXh0XG5bZ3JvdXBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3Lm1vdmVCeUdyb3VwKSwgb25seSBza2lwcGluZyBncm91cHMgb2ZcbndoaXRlc3BhY2Ugd2hlbiB0aGV5IGNvbnNpc3Qgb2YgYSBzaW5nbGUgc3BhY2UuXG4qL1xuY29uc3QgZGVsZXRlR3JvdXBCYWNrd2FyZCA9IHRhcmdldCA9PiBkZWxldGVCeUdyb3VwKHRhcmdldCwgZmFsc2UpO1xuLyoqXG5EZWxldGUgdGhlIHNlbGVjdGlvbiBvciBmb3J3YXJkIHVudGlsIHRoZSBlbmQgb2YgdGhlIG5leHQgZ3JvdXAuXG4qL1xuY29uc3QgZGVsZXRlR3JvdXBGb3J3YXJkID0gdGFyZ2V0ID0+IGRlbGV0ZUJ5R3JvdXAodGFyZ2V0LCB0cnVlKTtcbi8qKlxuRGVsZXRlIHRoZSBzZWxlY3Rpb24sIG9yLCBpZiBpdCBpcyBhIGN1cnNvciBzZWxlY3Rpb24sIGRlbGV0ZSB0b1xudGhlIGVuZCBvZiB0aGUgbGluZS4gSWYgdGhlIGN1cnNvciBpcyBkaXJlY3RseSBhdCB0aGUgZW5kIG9mIHRoZVxubGluZSwgZGVsZXRlIHRoZSBsaW5lIGJyZWFrIGFmdGVyIGl0LlxuKi9cbmNvbnN0IGRlbGV0ZVRvTGluZUVuZCA9IHZpZXcgPT4gZGVsZXRlQnkodmlldywgcG9zID0+IHtcbiAgICBsZXQgbGluZUVuZCA9IHZpZXcubGluZUJsb2NrQXQocG9zKS50bztcbiAgICByZXR1cm4gcG9zIDwgbGluZUVuZCA/IGxpbmVFbmQgOiBNYXRoLm1pbih2aWV3LnN0YXRlLmRvYy5sZW5ndGgsIHBvcyArIDEpO1xufSk7XG4vKipcbkRlbGV0ZSB0aGUgc2VsZWN0aW9uLCBvciwgaWYgaXQgaXMgYSBjdXJzb3Igc2VsZWN0aW9uLCBkZWxldGUgdG9cbnRoZSBzdGFydCBvZiB0aGUgbGluZS4gSWYgdGhlIGN1cnNvciBpcyBkaXJlY3RseSBhdCB0aGUgc3RhcnQgb2YgdGhlXG5saW5lLCBkZWxldGUgdGhlIGxpbmUgYnJlYWsgYmVmb3JlIGl0LlxuKi9cbmNvbnN0IGRlbGV0ZVRvTGluZVN0YXJ0ID0gdmlldyA9PiBkZWxldGVCeSh2aWV3LCBwb3MgPT4ge1xuICAgIGxldCBsaW5lU3RhcnQgPSB2aWV3LmxpbmVCbG9ja0F0KHBvcykuZnJvbTtcbiAgICByZXR1cm4gcG9zID4gbGluZVN0YXJ0ID8gbGluZVN0YXJ0IDogTWF0aC5tYXgoMCwgcG9zIC0gMSk7XG59KTtcbi8qKlxuRGVsZXRlIGFsbCB3aGl0ZXNwYWNlIGRpcmVjdGx5IGJlZm9yZSBhIGxpbmUgZW5kIGZyb20gdGhlXG5kb2N1bWVudC5cbiovXG5jb25zdCBkZWxldGVUcmFpbGluZ1doaXRlc3BhY2UgPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICAgIGlmIChzdGF0ZS5yZWFkT25seSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBjaGFuZ2VzID0gW107XG4gICAgZm9yIChsZXQgcG9zID0gMCwgcHJldiA9IFwiXCIsIGl0ZXIgPSBzdGF0ZS5kb2MuaXRlcigpOzspIHtcbiAgICAgICAgaXRlci5uZXh0KCk7XG4gICAgICAgIGlmIChpdGVyLmxpbmVCcmVhayB8fCBpdGVyLmRvbmUpIHtcbiAgICAgICAgICAgIGxldCB0cmFpbGluZyA9IHByZXYuc2VhcmNoKC9cXHMrJC8pO1xuICAgICAgICAgICAgaWYgKHRyYWlsaW5nID4gLTEpXG4gICAgICAgICAgICAgICAgY2hhbmdlcy5wdXNoKHsgZnJvbTogcG9zIC0gKHByZXYubGVuZ3RoIC0gdHJhaWxpbmcpLCB0bzogcG9zIH0pO1xuICAgICAgICAgICAgaWYgKGl0ZXIuZG9uZSlcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIHByZXYgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcHJldiA9IGl0ZXIudmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgcG9zICs9IGl0ZXIudmFsdWUubGVuZ3RoO1xuICAgIH1cbiAgICBpZiAoIWNoYW5nZXMubGVuZ3RoKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgZGlzcGF0Y2goc3RhdGUudXBkYXRlKHsgY2hhbmdlcywgdXNlckV2ZW50OiBcImRlbGV0ZVwiIH0pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcblJlcGxhY2UgZWFjaCBzZWxlY3Rpb24gcmFuZ2Ugd2l0aCBhIGxpbmUgYnJlYWssIGxlYXZpbmcgdGhlIGN1cnNvclxub24gdGhlIGxpbmUgYmVmb3JlIHRoZSBicmVhay5cbiovXG5jb25zdCBzcGxpdExpbmUgPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICAgIGlmIChzdGF0ZS5yZWFkT25seSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBjaGFuZ2VzID0gc3RhdGUuY2hhbmdlQnlSYW5nZShyYW5nZSA9PiB7XG4gICAgICAgIHJldHVybiB7IGNoYW5nZXM6IHsgZnJvbTogcmFuZ2UuZnJvbSwgdG86IHJhbmdlLnRvLCBpbnNlcnQ6IFRleHQub2YoW1wiXCIsIFwiXCJdKSB9LFxuICAgICAgICAgICAgcmFuZ2U6IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IocmFuZ2UuZnJvbSkgfTtcbiAgICB9KTtcbiAgICBkaXNwYXRjaChzdGF0ZS51cGRhdGUoY2hhbmdlcywgeyBzY3JvbGxJbnRvVmlldzogdHJ1ZSwgdXNlckV2ZW50OiBcImlucHV0XCIgfSkpO1xuICAgIHJldHVybiB0cnVlO1xufTtcbi8qKlxuRmxpcCB0aGUgY2hhcmFjdGVycyBiZWZvcmUgYW5kIGFmdGVyIHRoZSBjdXJzb3IocykuXG4qL1xuY29uc3QgdHJhbnNwb3NlQ2hhcnMgPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICAgIGlmIChzdGF0ZS5yZWFkT25seSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBjaGFuZ2VzID0gc3RhdGUuY2hhbmdlQnlSYW5nZShyYW5nZSA9PiB7XG4gICAgICAgIGlmICghcmFuZ2UuZW1wdHkgfHwgcmFuZ2UuZnJvbSA9PSAwIHx8IHJhbmdlLmZyb20gPT0gc3RhdGUuZG9jLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiB7IHJhbmdlIH07XG4gICAgICAgIGxldCBwb3MgPSByYW5nZS5mcm9tLCBsaW5lID0gc3RhdGUuZG9jLmxpbmVBdChwb3MpO1xuICAgICAgICBsZXQgZnJvbSA9IHBvcyA9PSBsaW5lLmZyb20gPyBwb3MgLSAxIDogZmluZENsdXN0ZXJCcmVhayhsaW5lLnRleHQsIHBvcyAtIGxpbmUuZnJvbSwgZmFsc2UpICsgbGluZS5mcm9tO1xuICAgICAgICBsZXQgdG8gPSBwb3MgPT0gbGluZS50byA/IHBvcyArIDEgOiBmaW5kQ2x1c3RlckJyZWFrKGxpbmUudGV4dCwgcG9zIC0gbGluZS5mcm9tLCB0cnVlKSArIGxpbmUuZnJvbTtcbiAgICAgICAgcmV0dXJuIHsgY2hhbmdlczogeyBmcm9tLCB0bywgaW5zZXJ0OiBzdGF0ZS5kb2Muc2xpY2UocG9zLCB0bykuYXBwZW5kKHN0YXRlLmRvYy5zbGljZShmcm9tLCBwb3MpKSB9LFxuICAgICAgICAgICAgcmFuZ2U6IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IodG8pIH07XG4gICAgfSk7XG4gICAgaWYgKGNoYW5nZXMuY2hhbmdlcy5lbXB0eSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGRpc3BhdGNoKHN0YXRlLnVwZGF0ZShjaGFuZ2VzLCB7IHNjcm9sbEludG9WaWV3OiB0cnVlLCB1c2VyRXZlbnQ6IFwibW92ZS5jaGFyYWN0ZXJcIiB9KSk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuZnVuY3Rpb24gc2VsZWN0ZWRMaW5lQmxvY2tzKHN0YXRlKSB7XG4gICAgbGV0IGJsb2NrcyA9IFtdLCB1cHRvID0gLTE7XG4gICAgZm9yIChsZXQgcmFuZ2Ugb2Ygc3RhdGUuc2VsZWN0aW9uLnJhbmdlcykge1xuICAgICAgICBsZXQgc3RhcnRMaW5lID0gc3RhdGUuZG9jLmxpbmVBdChyYW5nZS5mcm9tKSwgZW5kTGluZSA9IHN0YXRlLmRvYy5saW5lQXQocmFuZ2UudG8pO1xuICAgICAgICBpZiAoIXJhbmdlLmVtcHR5ICYmIHJhbmdlLnRvID09IGVuZExpbmUuZnJvbSlcbiAgICAgICAgICAgIGVuZExpbmUgPSBzdGF0ZS5kb2MubGluZUF0KHJhbmdlLnRvIC0gMSk7XG4gICAgICAgIGlmICh1cHRvID49IHN0YXJ0TGluZS5udW1iZXIpIHtcbiAgICAgICAgICAgIGxldCBwcmV2ID0gYmxvY2tzW2Jsb2Nrcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIHByZXYudG8gPSBlbmRMaW5lLnRvO1xuICAgICAgICAgICAgcHJldi5yYW5nZXMucHVzaChyYW5nZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBibG9ja3MucHVzaCh7IGZyb206IHN0YXJ0TGluZS5mcm9tLCB0bzogZW5kTGluZS50bywgcmFuZ2VzOiBbcmFuZ2VdIH0pO1xuICAgICAgICB9XG4gICAgICAgIHVwdG8gPSBlbmRMaW5lLm51bWJlciArIDE7XG4gICAgfVxuICAgIHJldHVybiBibG9ja3M7XG59XG5mdW5jdGlvbiBtb3ZlTGluZShzdGF0ZSwgZGlzcGF0Y2gsIGZvcndhcmQpIHtcbiAgICBpZiAoc3RhdGUucmVhZE9ubHkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgY2hhbmdlcyA9IFtdLCByYW5nZXMgPSBbXTtcbiAgICBmb3IgKGxldCBibG9jayBvZiBzZWxlY3RlZExpbmVCbG9ja3Moc3RhdGUpKSB7XG4gICAgICAgIGlmIChmb3J3YXJkID8gYmxvY2sudG8gPT0gc3RhdGUuZG9jLmxlbmd0aCA6IGJsb2NrLmZyb20gPT0gMClcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBsZXQgbmV4dExpbmUgPSBzdGF0ZS5kb2MubGluZUF0KGZvcndhcmQgPyBibG9jay50byArIDEgOiBibG9jay5mcm9tIC0gMSk7XG4gICAgICAgIGxldCBzaXplID0gbmV4dExpbmUubGVuZ3RoICsgMTtcbiAgICAgICAgaWYgKGZvcndhcmQpIHtcbiAgICAgICAgICAgIGNoYW5nZXMucHVzaCh7IGZyb206IGJsb2NrLnRvLCB0bzogbmV4dExpbmUudG8gfSwgeyBmcm9tOiBibG9jay5mcm9tLCBpbnNlcnQ6IG5leHRMaW5lLnRleHQgKyBzdGF0ZS5saW5lQnJlYWsgfSk7XG4gICAgICAgICAgICBmb3IgKGxldCByIG9mIGJsb2NrLnJhbmdlcylcbiAgICAgICAgICAgICAgICByYW5nZXMucHVzaChFZGl0b3JTZWxlY3Rpb24ucmFuZ2UoTWF0aC5taW4oc3RhdGUuZG9jLmxlbmd0aCwgci5hbmNob3IgKyBzaXplKSwgTWF0aC5taW4oc3RhdGUuZG9jLmxlbmd0aCwgci5oZWFkICsgc2l6ZSkpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNoYW5nZXMucHVzaCh7IGZyb206IG5leHRMaW5lLmZyb20sIHRvOiBibG9jay5mcm9tIH0sIHsgZnJvbTogYmxvY2sudG8sIGluc2VydDogc3RhdGUubGluZUJyZWFrICsgbmV4dExpbmUudGV4dCB9KTtcbiAgICAgICAgICAgIGZvciAobGV0IHIgb2YgYmxvY2sucmFuZ2VzKVxuICAgICAgICAgICAgICAgIHJhbmdlcy5wdXNoKEVkaXRvclNlbGVjdGlvbi5yYW5nZShyLmFuY2hvciAtIHNpemUsIHIuaGVhZCAtIHNpemUpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWNoYW5nZXMubGVuZ3RoKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgZGlzcGF0Y2goc3RhdGUudXBkYXRlKHtcbiAgICAgICAgY2hhbmdlcyxcbiAgICAgICAgc2Nyb2xsSW50b1ZpZXc6IHRydWUsXG4gICAgICAgIHNlbGVjdGlvbjogRWRpdG9yU2VsZWN0aW9uLmNyZWF0ZShyYW5nZXMsIHN0YXRlLnNlbGVjdGlvbi5tYWluSW5kZXgpLFxuICAgICAgICB1c2VyRXZlbnQ6IFwibW92ZS5saW5lXCJcbiAgICB9KSk7XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKipcbk1vdmUgdGhlIHNlbGVjdGVkIGxpbmVzIHVwIG9uZSBsaW5lLlxuKi9cbmNvbnN0IG1vdmVMaW5lVXAgPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4gbW92ZUxpbmUoc3RhdGUsIGRpc3BhdGNoLCBmYWxzZSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGVkIGxpbmVzIGRvd24gb25lIGxpbmUuXG4qL1xuY29uc3QgbW92ZUxpbmVEb3duID0gKHsgc3RhdGUsIGRpc3BhdGNoIH0pID0+IG1vdmVMaW5lKHN0YXRlLCBkaXNwYXRjaCwgdHJ1ZSk7XG5mdW5jdGlvbiBjb3B5TGluZShzdGF0ZSwgZGlzcGF0Y2gsIGZvcndhcmQpIHtcbiAgICBpZiAoc3RhdGUucmVhZE9ubHkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgY2hhbmdlcyA9IFtdO1xuICAgIGZvciAobGV0IGJsb2NrIG9mIHNlbGVjdGVkTGluZUJsb2NrcyhzdGF0ZSkpIHtcbiAgICAgICAgaWYgKGZvcndhcmQpXG4gICAgICAgICAgICBjaGFuZ2VzLnB1c2goeyBmcm9tOiBibG9jay5mcm9tLCBpbnNlcnQ6IHN0YXRlLmRvYy5zbGljZShibG9jay5mcm9tLCBibG9jay50bykgKyBzdGF0ZS5saW5lQnJlYWsgfSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGNoYW5nZXMucHVzaCh7IGZyb206IGJsb2NrLnRvLCBpbnNlcnQ6IHN0YXRlLmxpbmVCcmVhayArIHN0YXRlLmRvYy5zbGljZShibG9jay5mcm9tLCBibG9jay50bykgfSk7XG4gICAgfVxuICAgIGRpc3BhdGNoKHN0YXRlLnVwZGF0ZSh7IGNoYW5nZXMsIHNjcm9sbEludG9WaWV3OiB0cnVlLCB1c2VyRXZlbnQ6IFwiaW5wdXQuY29weWxpbmVcIiB9KSk7XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKipcbkNyZWF0ZSBhIGNvcHkgb2YgdGhlIHNlbGVjdGVkIGxpbmVzLiBLZWVwIHRoZSBzZWxlY3Rpb24gaW4gdGhlIHRvcCBjb3B5LlxuKi9cbmNvbnN0IGNvcHlMaW5lVXAgPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4gY29weUxpbmUoc3RhdGUsIGRpc3BhdGNoLCBmYWxzZSk7XG4vKipcbkNyZWF0ZSBhIGNvcHkgb2YgdGhlIHNlbGVjdGVkIGxpbmVzLiBLZWVwIHRoZSBzZWxlY3Rpb24gaW4gdGhlIGJvdHRvbSBjb3B5LlxuKi9cbmNvbnN0IGNvcHlMaW5lRG93biA9ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiBjb3B5TGluZShzdGF0ZSwgZGlzcGF0Y2gsIHRydWUpO1xuLyoqXG5EZWxldGUgc2VsZWN0ZWQgbGluZXMuXG4qL1xuY29uc3QgZGVsZXRlTGluZSA9IHZpZXcgPT4ge1xuICAgIGlmICh2aWV3LnN0YXRlLnJlYWRPbmx5KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IHsgc3RhdGUgfSA9IHZpZXcsIGNoYW5nZXMgPSBzdGF0ZS5jaGFuZ2VzKHNlbGVjdGVkTGluZUJsb2NrcyhzdGF0ZSkubWFwKCh7IGZyb20sIHRvIH0pID0+IHtcbiAgICAgICAgaWYgKGZyb20gPiAwKVxuICAgICAgICAgICAgZnJvbS0tO1xuICAgICAgICBlbHNlIGlmICh0byA8IHN0YXRlLmRvYy5sZW5ndGgpXG4gICAgICAgICAgICB0bysrO1xuICAgICAgICByZXR1cm4geyBmcm9tLCB0byB9O1xuICAgIH0pKTtcbiAgICBsZXQgc2VsZWN0aW9uID0gdXBkYXRlU2VsKHN0YXRlLnNlbGVjdGlvbiwgcmFuZ2UgPT4gdmlldy5tb3ZlVmVydGljYWxseShyYW5nZSwgdHJ1ZSkpLm1hcChjaGFuZ2VzKTtcbiAgICB2aWV3LmRpc3BhdGNoKHsgY2hhbmdlcywgc2VsZWN0aW9uLCBzY3JvbGxJbnRvVmlldzogdHJ1ZSwgdXNlckV2ZW50OiBcImRlbGV0ZS5saW5lXCIgfSk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuLyoqXG5SZXBsYWNlIHRoZSBzZWxlY3Rpb24gd2l0aCBhIG5ld2xpbmUuXG4qL1xuY29uc3QgaW5zZXJ0TmV3bGluZSA9ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gICAgZGlzcGF0Y2goc3RhdGUudXBkYXRlKHN0YXRlLnJlcGxhY2VTZWxlY3Rpb24oc3RhdGUubGluZUJyZWFrKSwgeyBzY3JvbGxJbnRvVmlldzogdHJ1ZSwgdXNlckV2ZW50OiBcImlucHV0XCIgfSkpO1xuICAgIHJldHVybiB0cnVlO1xufTtcbmZ1bmN0aW9uIGlzQmV0d2VlbkJyYWNrZXRzKHN0YXRlLCBwb3MpIHtcbiAgICBpZiAoL1xcKFxcKXxcXFtcXF18XFx7XFx9Ly50ZXN0KHN0YXRlLnNsaWNlRG9jKHBvcyAtIDEsIHBvcyArIDEpKSlcbiAgICAgICAgcmV0dXJuIHsgZnJvbTogcG9zLCB0bzogcG9zIH07XG4gICAgbGV0IGNvbnRleHQgPSBzeW50YXhUcmVlKHN0YXRlKS5yZXNvbHZlSW5uZXIocG9zKTtcbiAgICBsZXQgYmVmb3JlID0gY29udGV4dC5jaGlsZEJlZm9yZShwb3MpLCBhZnRlciA9IGNvbnRleHQuY2hpbGRBZnRlcihwb3MpLCBjbG9zZWRCeTtcbiAgICBpZiAoYmVmb3JlICYmIGFmdGVyICYmIGJlZm9yZS50byA8PSBwb3MgJiYgYWZ0ZXIuZnJvbSA+PSBwb3MgJiZcbiAgICAgICAgKGNsb3NlZEJ5ID0gYmVmb3JlLnR5cGUucHJvcChOb2RlUHJvcC5jbG9zZWRCeSkpICYmIGNsb3NlZEJ5LmluZGV4T2YoYWZ0ZXIubmFtZSkgPiAtMSAmJlxuICAgICAgICBzdGF0ZS5kb2MubGluZUF0KGJlZm9yZS50bykuZnJvbSA9PSBzdGF0ZS5kb2MubGluZUF0KGFmdGVyLmZyb20pLmZyb20pXG4gICAgICAgIHJldHVybiB7IGZyb206IGJlZm9yZS50bywgdG86IGFmdGVyLmZyb20gfTtcbiAgICByZXR1cm4gbnVsbDtcbn1cbi8qKlxuUmVwbGFjZSB0aGUgc2VsZWN0aW9uIHdpdGggYSBuZXdsaW5lIGFuZCBpbmRlbnQgdGhlIG5ld2x5IGNyZWF0ZWRcbmxpbmUocykuIElmIHRoZSBjdXJyZW50IGxpbmUgY29uc2lzdHMgb25seSBvZiB3aGl0ZXNwYWNlLCB0aGlzXG53aWxsIGFsc28gZGVsZXRlIHRoYXQgd2hpdGVzcGFjZS4gV2hlbiB0aGUgY3Vyc29yIGlzIGJldHdlZW5cbm1hdGNoaW5nIGJyYWNrZXRzLCBhbiBhZGRpdGlvbmFsIG5ld2xpbmUgd2lsbCBiZSBpbnNlcnRlZCBhZnRlclxudGhlIGN1cnNvci5cbiovXG5jb25zdCBpbnNlcnROZXdsaW5lQW5kSW5kZW50ID0gLypAX19QVVJFX18qL25ld2xpbmVBbmRJbmRlbnQoZmFsc2UpO1xuLyoqXG5DcmVhdGUgYSBibGFuaywgaW5kZW50ZWQgbGluZSBiZWxvdyB0aGUgY3VycmVudCBsaW5lLlxuKi9cbmNvbnN0IGluc2VydEJsYW5rTGluZSA9IC8qQF9fUFVSRV9fKi9uZXdsaW5lQW5kSW5kZW50KHRydWUpO1xuZnVuY3Rpb24gbmV3bGluZUFuZEluZGVudChhdEVvZikge1xuICAgIHJldHVybiAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICAgICAgICBpZiAoc3RhdGUucmVhZE9ubHkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCBjaGFuZ2VzID0gc3RhdGUuY2hhbmdlQnlSYW5nZShyYW5nZSA9PiB7XG4gICAgICAgICAgICBsZXQgeyBmcm9tLCB0byB9ID0gcmFuZ2UsIGxpbmUgPSBzdGF0ZS5kb2MubGluZUF0KGZyb20pO1xuICAgICAgICAgICAgbGV0IGV4cGxvZGUgPSAhYXRFb2YgJiYgZnJvbSA9PSB0byAmJiBpc0JldHdlZW5CcmFja2V0cyhzdGF0ZSwgZnJvbSk7XG4gICAgICAgICAgICBpZiAoYXRFb2YpXG4gICAgICAgICAgICAgICAgZnJvbSA9IHRvID0gKHRvIDw9IGxpbmUudG8gPyBsaW5lIDogc3RhdGUuZG9jLmxpbmVBdCh0bykpLnRvO1xuICAgICAgICAgICAgbGV0IGN4ID0gbmV3IEluZGVudENvbnRleHQoc3RhdGUsIHsgc2ltdWxhdGVCcmVhazogZnJvbSwgc2ltdWxhdGVEb3VibGVCcmVhazogISFleHBsb2RlIH0pO1xuICAgICAgICAgICAgbGV0IGluZGVudCA9IGdldEluZGVudGF0aW9uKGN4LCBmcm9tKTtcbiAgICAgICAgICAgIGlmIChpbmRlbnQgPT0gbnVsbClcbiAgICAgICAgICAgICAgICBpbmRlbnQgPSAvXlxccyovLmV4ZWMoc3RhdGUuZG9jLmxpbmVBdChmcm9tKS50ZXh0KVswXS5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAodG8gPCBsaW5lLnRvICYmIC9cXHMvLnRlc3QobGluZS50ZXh0W3RvIC0gbGluZS5mcm9tXSkpXG4gICAgICAgICAgICAgICAgdG8rKztcbiAgICAgICAgICAgIGlmIChleHBsb2RlKVxuICAgICAgICAgICAgICAgICh7IGZyb20sIHRvIH0gPSBleHBsb2RlKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGZyb20gPiBsaW5lLmZyb20gJiYgZnJvbSA8IGxpbmUuZnJvbSArIDEwMCAmJiAhL1xcUy8udGVzdChsaW5lLnRleHQuc2xpY2UoMCwgZnJvbSkpKVxuICAgICAgICAgICAgICAgIGZyb20gPSBsaW5lLmZyb207XG4gICAgICAgICAgICBsZXQgaW5zZXJ0ID0gW1wiXCIsIGluZGVudFN0cmluZyhzdGF0ZSwgaW5kZW50KV07XG4gICAgICAgICAgICBpZiAoZXhwbG9kZSlcbiAgICAgICAgICAgICAgICBpbnNlcnQucHVzaChpbmRlbnRTdHJpbmcoc3RhdGUsIGN4LmxpbmVJbmRlbnQobGluZS5mcm9tLCAtMSkpKTtcbiAgICAgICAgICAgIHJldHVybiB7IGNoYW5nZXM6IHsgZnJvbSwgdG8sIGluc2VydDogVGV4dC5vZihpbnNlcnQpIH0sXG4gICAgICAgICAgICAgICAgcmFuZ2U6IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IoZnJvbSArIDEgKyBpbnNlcnRbMV0ubGVuZ3RoKSB9O1xuICAgICAgICB9KTtcbiAgICAgICAgZGlzcGF0Y2goc3RhdGUudXBkYXRlKGNoYW5nZXMsIHsgc2Nyb2xsSW50b1ZpZXc6IHRydWUsIHVzZXJFdmVudDogXCJpbnB1dFwiIH0pKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNoYW5nZUJ5U2VsZWN0ZWRMaW5lKHN0YXRlLCBmKSB7XG4gICAgbGV0IGF0TGluZSA9IC0xO1xuICAgIHJldHVybiBzdGF0ZS5jaGFuZ2VCeVJhbmdlKHJhbmdlID0+IHtcbiAgICAgICAgbGV0IGNoYW5nZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgcG9zID0gcmFuZ2UuZnJvbTsgcG9zIDw9IHJhbmdlLnRvOykge1xuICAgICAgICAgICAgbGV0IGxpbmUgPSBzdGF0ZS5kb2MubGluZUF0KHBvcyk7XG4gICAgICAgICAgICBpZiAobGluZS5udW1iZXIgPiBhdExpbmUgJiYgKHJhbmdlLmVtcHR5IHx8IHJhbmdlLnRvID4gbGluZS5mcm9tKSkge1xuICAgICAgICAgICAgICAgIGYobGluZSwgY2hhbmdlcywgcmFuZ2UpO1xuICAgICAgICAgICAgICAgIGF0TGluZSA9IGxpbmUubnVtYmVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcG9zID0gbGluZS50byArIDE7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGNoYW5nZVNldCA9IHN0YXRlLmNoYW5nZXMoY2hhbmdlcyk7XG4gICAgICAgIHJldHVybiB7IGNoYW5nZXMsXG4gICAgICAgICAgICByYW5nZTogRWRpdG9yU2VsZWN0aW9uLnJhbmdlKGNoYW5nZVNldC5tYXBQb3MocmFuZ2UuYW5jaG9yLCAxKSwgY2hhbmdlU2V0Lm1hcFBvcyhyYW5nZS5oZWFkLCAxKSkgfTtcbiAgICB9KTtcbn1cbi8qKlxuQXV0by1pbmRlbnQgdGhlIHNlbGVjdGVkIGxpbmVzLiBUaGlzIHVzZXMgdGhlIFtpbmRlbnRhdGlvbiBzZXJ2aWNlXG5mYWNldF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5pbmRlbnRTZXJ2aWNlKSBhcyBzb3VyY2UgZm9yIGF1dG8taW5kZW50XG5pbmZvcm1hdGlvbi5cbiovXG5jb25zdCBpbmRlbnRTZWxlY3Rpb24gPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICAgIGlmIChzdGF0ZS5yZWFkT25seSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCB1cGRhdGVkID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBsZXQgY29udGV4dCA9IG5ldyBJbmRlbnRDb250ZXh0KHN0YXRlLCB7IG92ZXJyaWRlSW5kZW50YXRpb246IHN0YXJ0ID0+IHtcbiAgICAgICAgICAgIGxldCBmb3VuZCA9IHVwZGF0ZWRbc3RhcnRdO1xuICAgICAgICAgICAgcmV0dXJuIGZvdW5kID09IG51bGwgPyAtMSA6IGZvdW5kO1xuICAgICAgICB9IH0pO1xuICAgIGxldCBjaGFuZ2VzID0gY2hhbmdlQnlTZWxlY3RlZExpbmUoc3RhdGUsIChsaW5lLCBjaGFuZ2VzLCByYW5nZSkgPT4ge1xuICAgICAgICBsZXQgaW5kZW50ID0gZ2V0SW5kZW50YXRpb24oY29udGV4dCwgbGluZS5mcm9tKTtcbiAgICAgICAgaWYgKGluZGVudCA9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoIS9cXFMvLnRlc3QobGluZS50ZXh0KSlcbiAgICAgICAgICAgIGluZGVudCA9IDA7XG4gICAgICAgIGxldCBjdXIgPSAvXlxccyovLmV4ZWMobGluZS50ZXh0KVswXTtcbiAgICAgICAgbGV0IG5vcm0gPSBpbmRlbnRTdHJpbmcoc3RhdGUsIGluZGVudCk7XG4gICAgICAgIGlmIChjdXIgIT0gbm9ybSB8fCByYW5nZS5mcm9tIDwgbGluZS5mcm9tICsgY3VyLmxlbmd0aCkge1xuICAgICAgICAgICAgdXBkYXRlZFtsaW5lLmZyb21dID0gaW5kZW50O1xuICAgICAgICAgICAgY2hhbmdlcy5wdXNoKHsgZnJvbTogbGluZS5mcm9tLCB0bzogbGluZS5mcm9tICsgY3VyLmxlbmd0aCwgaW5zZXJ0OiBub3JtIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgaWYgKCFjaGFuZ2VzLmNoYW5nZXMuZW1wdHkpXG4gICAgICAgIGRpc3BhdGNoKHN0YXRlLnVwZGF0ZShjaGFuZ2VzLCB7IHVzZXJFdmVudDogXCJpbmRlbnRcIiB9KSk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuLyoqXG5BZGQgYSBbdW5pdF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5pbmRlbnRVbml0KSBvZiBpbmRlbnRhdGlvbiB0byBhbGwgc2VsZWN0ZWRcbmxpbmVzLlxuKi9cbmNvbnN0IGluZGVudE1vcmUgPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICAgIGlmIChzdGF0ZS5yZWFkT25seSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGRpc3BhdGNoKHN0YXRlLnVwZGF0ZShjaGFuZ2VCeVNlbGVjdGVkTGluZShzdGF0ZSwgKGxpbmUsIGNoYW5nZXMpID0+IHtcbiAgICAgICAgY2hhbmdlcy5wdXNoKHsgZnJvbTogbGluZS5mcm9tLCBpbnNlcnQ6IHN0YXRlLmZhY2V0KGluZGVudFVuaXQpIH0pO1xuICAgIH0pLCB7IHVzZXJFdmVudDogXCJpbnB1dC5pbmRlbnRcIiB9KSk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuLyoqXG5SZW1vdmUgYSBbdW5pdF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5pbmRlbnRVbml0KSBvZiBpbmRlbnRhdGlvbiBmcm9tIGFsbFxuc2VsZWN0ZWQgbGluZXMuXG4qL1xuY29uc3QgaW5kZW50TGVzcyA9ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gICAgaWYgKHN0YXRlLnJlYWRPbmx5KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgZGlzcGF0Y2goc3RhdGUudXBkYXRlKGNoYW5nZUJ5U2VsZWN0ZWRMaW5lKHN0YXRlLCAobGluZSwgY2hhbmdlcykgPT4ge1xuICAgICAgICBsZXQgc3BhY2UgPSAvXlxccyovLmV4ZWMobGluZS50ZXh0KVswXTtcbiAgICAgICAgaWYgKCFzcGFjZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IGNvbCA9IGNvdW50Q29sdW1uKHNwYWNlLCBzdGF0ZS50YWJTaXplKSwga2VlcCA9IDA7XG4gICAgICAgIGxldCBpbnNlcnQgPSBpbmRlbnRTdHJpbmcoc3RhdGUsIE1hdGgubWF4KDAsIGNvbCAtIGdldEluZGVudFVuaXQoc3RhdGUpKSk7XG4gICAgICAgIHdoaWxlIChrZWVwIDwgc3BhY2UubGVuZ3RoICYmIGtlZXAgPCBpbnNlcnQubGVuZ3RoICYmIHNwYWNlLmNoYXJDb2RlQXQoa2VlcCkgPT0gaW5zZXJ0LmNoYXJDb2RlQXQoa2VlcCkpXG4gICAgICAgICAgICBrZWVwKys7XG4gICAgICAgIGNoYW5nZXMucHVzaCh7IGZyb206IGxpbmUuZnJvbSArIGtlZXAsIHRvOiBsaW5lLmZyb20gKyBzcGFjZS5sZW5ndGgsIGluc2VydDogaW5zZXJ0LnNsaWNlKGtlZXApIH0pO1xuICAgIH0pLCB7IHVzZXJFdmVudDogXCJkZWxldGUuZGVkZW50XCIgfSkpO1xuICAgIHJldHVybiB0cnVlO1xufTtcbi8qKlxuSW5zZXJ0IGEgdGFiIGNoYXJhY3RlciBhdCB0aGUgY3Vyc29yIG9yLCBpZiBzb21ldGhpbmcgaXMgc2VsZWN0ZWQsXG51c2UgW2BpbmRlbnRNb3JlYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5pbmRlbnRNb3JlKSB0byBpbmRlbnQgdGhlIGVudGlyZVxuc2VsZWN0aW9uLlxuKi9cbmNvbnN0IGluc2VydFRhYiA9ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gICAgaWYgKHN0YXRlLnNlbGVjdGlvbi5yYW5nZXMuc29tZShyID0+ICFyLmVtcHR5KSlcbiAgICAgICAgcmV0dXJuIGluZGVudE1vcmUoeyBzdGF0ZSwgZGlzcGF0Y2ggfSk7XG4gICAgZGlzcGF0Y2goc3RhdGUudXBkYXRlKHN0YXRlLnJlcGxhY2VTZWxlY3Rpb24oXCJcXHRcIiksIHsgc2Nyb2xsSW50b1ZpZXc6IHRydWUsIHVzZXJFdmVudDogXCJpbnB1dFwiIH0pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcbkFycmF5IG9mIGtleSBiaW5kaW5ncyBjb250YWluaW5nIHRoZSBFbWFjcy1zdHlsZSBiaW5kaW5ncyB0aGF0IGFyZVxuYXZhaWxhYmxlIG9uIG1hY09TIGJ5IGRlZmF1bHQuXG5cbiAtIEN0cmwtYjogW2BjdXJzb3JDaGFyTGVmdGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuY3Vyc29yQ2hhckxlZnQpIChbYHNlbGVjdENoYXJMZWZ0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5zZWxlY3RDaGFyTGVmdCkgd2l0aCBTaGlmdClcbiAtIEN0cmwtZjogW2BjdXJzb3JDaGFyUmlnaHRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmN1cnNvckNoYXJSaWdodCkgKFtgc2VsZWN0Q2hhclJpZ2h0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5zZWxlY3RDaGFyUmlnaHQpIHdpdGggU2hpZnQpXG4gLSBDdHJsLXA6IFtgY3Vyc29yTGluZVVwYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jdXJzb3JMaW5lVXApIChbYHNlbGVjdExpbmVVcGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0TGluZVVwKSB3aXRoIFNoaWZ0KVxuIC0gQ3RybC1uOiBbYGN1cnNvckxpbmVEb3duYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jdXJzb3JMaW5lRG93bikgKFtgc2VsZWN0TGluZURvd25gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnNlbGVjdExpbmVEb3duKSB3aXRoIFNoaWZ0KVxuIC0gQ3RybC1hOiBbYGN1cnNvckxpbmVTdGFydGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuY3Vyc29yTGluZVN0YXJ0KSAoW2BzZWxlY3RMaW5lU3RhcnRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnNlbGVjdExpbmVTdGFydCkgd2l0aCBTaGlmdClcbiAtIEN0cmwtZTogW2BjdXJzb3JMaW5lRW5kYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jdXJzb3JMaW5lRW5kKSAoW2BzZWxlY3RMaW5lRW5kYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5zZWxlY3RMaW5lRW5kKSB3aXRoIFNoaWZ0KVxuIC0gQ3RybC1kOiBbYGRlbGV0ZUNoYXJGb3J3YXJkYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5kZWxldGVDaGFyRm9yd2FyZClcbiAtIEN0cmwtaDogW2BkZWxldGVDaGFyQmFja3dhcmRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmRlbGV0ZUNoYXJCYWNrd2FyZClcbiAtIEN0cmwtazogW2BkZWxldGVUb0xpbmVFbmRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmRlbGV0ZVRvTGluZUVuZClcbiAtIEN0cmwtQWx0LWg6IFtgZGVsZXRlR3JvdXBCYWNrd2FyZGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuZGVsZXRlR3JvdXBCYWNrd2FyZClcbiAtIEN0cmwtbzogW2BzcGxpdExpbmVgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnNwbGl0TGluZSlcbiAtIEN0cmwtdDogW2B0cmFuc3Bvc2VDaGFyc2BdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMudHJhbnNwb3NlQ2hhcnMpXG4gLSBDdHJsLXY6IFtgY3Vyc29yUGFnZURvd25gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmN1cnNvclBhZ2VEb3duKVxuIC0gQWx0LXY6IFtgY3Vyc29yUGFnZVVwYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jdXJzb3JQYWdlVXApXG4qL1xuY29uc3QgZW1hY3NTdHlsZUtleW1hcCA9IFtcbiAgICB7IGtleTogXCJDdHJsLWJcIiwgcnVuOiBjdXJzb3JDaGFyTGVmdCwgc2hpZnQ6IHNlbGVjdENoYXJMZWZ0LCBwcmV2ZW50RGVmYXVsdDogdHJ1ZSB9LFxuICAgIHsga2V5OiBcIkN0cmwtZlwiLCBydW46IGN1cnNvckNoYXJSaWdodCwgc2hpZnQ6IHNlbGVjdENoYXJSaWdodCB9LFxuICAgIHsga2V5OiBcIkN0cmwtcFwiLCBydW46IGN1cnNvckxpbmVVcCwgc2hpZnQ6IHNlbGVjdExpbmVVcCB9LFxuICAgIHsga2V5OiBcIkN0cmwtblwiLCBydW46IGN1cnNvckxpbmVEb3duLCBzaGlmdDogc2VsZWN0TGluZURvd24gfSxcbiAgICB7IGtleTogXCJDdHJsLWFcIiwgcnVuOiBjdXJzb3JMaW5lU3RhcnQsIHNoaWZ0OiBzZWxlY3RMaW5lU3RhcnQgfSxcbiAgICB7IGtleTogXCJDdHJsLWVcIiwgcnVuOiBjdXJzb3JMaW5lRW5kLCBzaGlmdDogc2VsZWN0TGluZUVuZCB9LFxuICAgIHsga2V5OiBcIkN0cmwtZFwiLCBydW46IGRlbGV0ZUNoYXJGb3J3YXJkIH0sXG4gICAgeyBrZXk6IFwiQ3RybC1oXCIsIHJ1bjogZGVsZXRlQ2hhckJhY2t3YXJkIH0sXG4gICAgeyBrZXk6IFwiQ3RybC1rXCIsIHJ1bjogZGVsZXRlVG9MaW5lRW5kIH0sXG4gICAgeyBrZXk6IFwiQ3RybC1BbHQtaFwiLCBydW46IGRlbGV0ZUdyb3VwQmFja3dhcmQgfSxcbiAgICB7IGtleTogXCJDdHJsLW9cIiwgcnVuOiBzcGxpdExpbmUgfSxcbiAgICB7IGtleTogXCJDdHJsLXRcIiwgcnVuOiB0cmFuc3Bvc2VDaGFycyB9LFxuICAgIHsga2V5OiBcIkN0cmwtdlwiLCBydW46IGN1cnNvclBhZ2VEb3duIH0sXG5dO1xuLyoqXG5BbiBhcnJheSBvZiBrZXkgYmluZGluZ3MgY2xvc2VseSBzdGlja2luZyB0byBwbGF0Zm9ybS1zdGFuZGFyZCBvclxud2lkZWx5IHVzZWQgYmluZGluZ3MuIChUaGlzIGluY2x1ZGVzIHRoZSBiaW5kaW5ncyBmcm9tXG5bYGVtYWNzU3R5bGVLZXltYXBgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmVtYWNzU3R5bGVLZXltYXApLCB3aXRoIHRoZWlyIGBrZXlgXG5wcm9wZXJ0eSBjaGFuZ2VkIHRvIGBtYWNgLilcblxuIC0gQXJyb3dMZWZ0OiBbYGN1cnNvckNoYXJMZWZ0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jdXJzb3JDaGFyTGVmdCkgKFtgc2VsZWN0Q2hhckxlZnRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnNlbGVjdENoYXJMZWZ0KSB3aXRoIFNoaWZ0KVxuIC0gQXJyb3dSaWdodDogW2BjdXJzb3JDaGFyUmlnaHRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmN1cnNvckNoYXJSaWdodCkgKFtgc2VsZWN0Q2hhclJpZ2h0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5zZWxlY3RDaGFyUmlnaHQpIHdpdGggU2hpZnQpXG4gLSBDdHJsLUFycm93TGVmdCAoQWx0LUFycm93TGVmdCBvbiBtYWNPUyk6IFtgY3Vyc29yR3JvdXBMZWZ0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jdXJzb3JHcm91cExlZnQpIChbYHNlbGVjdEdyb3VwTGVmdGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0R3JvdXBMZWZ0KSB3aXRoIFNoaWZ0KVxuIC0gQ3RybC1BcnJvd1JpZ2h0IChBbHQtQXJyb3dSaWdodCBvbiBtYWNPUyk6IFtgY3Vyc29yR3JvdXBSaWdodGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuY3Vyc29yR3JvdXBSaWdodCkgKFtgc2VsZWN0R3JvdXBSaWdodGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0R3JvdXBSaWdodCkgd2l0aCBTaGlmdClcbiAtIENtZC1BcnJvd0xlZnQgKG9uIG1hY09TKTogW2BjdXJzb3JMaW5lU3RhcnRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmN1cnNvckxpbmVTdGFydCkgKFtgc2VsZWN0TGluZVN0YXJ0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5zZWxlY3RMaW5lU3RhcnQpIHdpdGggU2hpZnQpXG4gLSBDbWQtQXJyb3dSaWdodCAob24gbWFjT1MpOiBbYGN1cnNvckxpbmVFbmRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmN1cnNvckxpbmVFbmQpIChbYHNlbGVjdExpbmVFbmRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnNlbGVjdExpbmVFbmQpIHdpdGggU2hpZnQpXG4gLSBBcnJvd1VwOiBbYGN1cnNvckxpbmVVcGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuY3Vyc29yTGluZVVwKSAoW2BzZWxlY3RMaW5lVXBgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnNlbGVjdExpbmVVcCkgd2l0aCBTaGlmdClcbiAtIEFycm93RG93bjogW2BjdXJzb3JMaW5lRG93bmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuY3Vyc29yTGluZURvd24pIChbYHNlbGVjdExpbmVEb3duYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5zZWxlY3RMaW5lRG93bikgd2l0aCBTaGlmdClcbiAtIENtZC1BcnJvd1VwIChvbiBtYWNPUyk6IFtgY3Vyc29yRG9jU3RhcnRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmN1cnNvckRvY1N0YXJ0KSAoW2BzZWxlY3REb2NTdGFydGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0RG9jU3RhcnQpIHdpdGggU2hpZnQpXG4gLSBDbWQtQXJyb3dEb3duIChvbiBtYWNPUyk6IFtgY3Vyc29yRG9jRW5kYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jdXJzb3JEb2NFbmQpIChbYHNlbGVjdERvY0VuZGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0RG9jRW5kKSB3aXRoIFNoaWZ0KVxuIC0gQ3RybC1BcnJvd1VwIChvbiBtYWNPUyk6IFtgY3Vyc29yUGFnZVVwYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jdXJzb3JQYWdlVXApIChbYHNlbGVjdFBhZ2VVcGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0UGFnZVVwKSB3aXRoIFNoaWZ0KVxuIC0gQ3RybC1BcnJvd0Rvd24gKG9uIG1hY09TKTogW2BjdXJzb3JQYWdlRG93bmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuY3Vyc29yUGFnZURvd24pIChbYHNlbGVjdFBhZ2VEb3duYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5zZWxlY3RQYWdlRG93bikgd2l0aCBTaGlmdClcbiAtIFBhZ2VVcDogW2BjdXJzb3JQYWdlVXBgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmN1cnNvclBhZ2VVcCkgKFtgc2VsZWN0UGFnZVVwYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5zZWxlY3RQYWdlVXApIHdpdGggU2hpZnQpXG4gLSBQYWdlRG93bjogW2BjdXJzb3JQYWdlRG93bmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuY3Vyc29yUGFnZURvd24pIChbYHNlbGVjdFBhZ2VEb3duYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5zZWxlY3RQYWdlRG93bikgd2l0aCBTaGlmdClcbiAtIEhvbWU6IFtgY3Vyc29yTGluZUJvdW5kYXJ5QmFja3dhcmRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmN1cnNvckxpbmVCb3VuZGFyeUJhY2t3YXJkKSAoW2BzZWxlY3RMaW5lQm91bmRhcnlCYWNrd2FyZGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0TGluZUJvdW5kYXJ5QmFja3dhcmQpIHdpdGggU2hpZnQpXG4gLSBFbmQ6IFtgY3Vyc29yTGluZUJvdW5kYXJ5Rm9yd2FyZGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuY3Vyc29yTGluZUJvdW5kYXJ5Rm9yd2FyZCkgKFtgc2VsZWN0TGluZUJvdW5kYXJ5Rm9yd2FyZGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0TGluZUJvdW5kYXJ5Rm9yd2FyZCkgd2l0aCBTaGlmdClcbiAtIEN0cmwtSG9tZSAoQ21kLUhvbWUgb24gbWFjT1MpOiBbYGN1cnNvckRvY1N0YXJ0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jdXJzb3JEb2NTdGFydCkgKFtgc2VsZWN0RG9jU3RhcnRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnNlbGVjdERvY1N0YXJ0KSB3aXRoIFNoaWZ0KVxuIC0gQ3RybC1FbmQgKENtZC1Ib21lIG9uIG1hY09TKTogW2BjdXJzb3JEb2NFbmRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmN1cnNvckRvY0VuZCkgKFtgc2VsZWN0RG9jRW5kYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5zZWxlY3REb2NFbmQpIHdpdGggU2hpZnQpXG4gLSBFbnRlcjogW2BpbnNlcnROZXdsaW5lQW5kSW5kZW50YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5pbnNlcnROZXdsaW5lQW5kSW5kZW50KVxuIC0gQ3RybC1hIChDbWQtYSBvbiBtYWNPUyk6IFtgc2VsZWN0QWxsYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5zZWxlY3RBbGwpXG4gLSBCYWNrc3BhY2U6IFtgZGVsZXRlQ2hhckJhY2t3YXJkYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5kZWxldGVDaGFyQmFja3dhcmQpXG4gLSBEZWxldGU6IFtgZGVsZXRlQ2hhckZvcndhcmRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmRlbGV0ZUNoYXJGb3J3YXJkKVxuIC0gQ3RybC1CYWNrc3BhY2UgKEFsdC1CYWNrc3BhY2Ugb24gbWFjT1MpOiBbYGRlbGV0ZUdyb3VwQmFja3dhcmRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmRlbGV0ZUdyb3VwQmFja3dhcmQpXG4gLSBDdHJsLURlbGV0ZSAoQWx0LURlbGV0ZSBvbiBtYWNPUyk6IFtgZGVsZXRlR3JvdXBGb3J3YXJkYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5kZWxldGVHcm91cEZvcndhcmQpXG4gLSBDbWQtQmFja3NwYWNlIChtYWNPUyk6IFtgZGVsZXRlVG9MaW5lU3RhcnRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmRlbGV0ZVRvTGluZVN0YXJ0KS5cbiAtIENtZC1EZWxldGUgKG1hY09TKTogW2BkZWxldGVUb0xpbmVFbmRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmRlbGV0ZVRvTGluZUVuZCkuXG4qL1xuY29uc3Qgc3RhbmRhcmRLZXltYXAgPSAvKkBfX1BVUkVfXyovW1xuICAgIHsga2V5OiBcIkFycm93TGVmdFwiLCBydW46IGN1cnNvckNoYXJMZWZ0LCBzaGlmdDogc2VsZWN0Q2hhckxlZnQsIHByZXZlbnREZWZhdWx0OiB0cnVlIH0sXG4gICAgeyBrZXk6IFwiTW9kLUFycm93TGVmdFwiLCBtYWM6IFwiQWx0LUFycm93TGVmdFwiLCBydW46IGN1cnNvckdyb3VwTGVmdCwgc2hpZnQ6IHNlbGVjdEdyb3VwTGVmdCwgcHJldmVudERlZmF1bHQ6IHRydWUgfSxcbiAgICB7IG1hYzogXCJDbWQtQXJyb3dMZWZ0XCIsIHJ1bjogY3Vyc29yTGluZUJvdW5kYXJ5TGVmdCwgc2hpZnQ6IHNlbGVjdExpbmVCb3VuZGFyeUxlZnQsIHByZXZlbnREZWZhdWx0OiB0cnVlIH0sXG4gICAgeyBrZXk6IFwiQXJyb3dSaWdodFwiLCBydW46IGN1cnNvckNoYXJSaWdodCwgc2hpZnQ6IHNlbGVjdENoYXJSaWdodCwgcHJldmVudERlZmF1bHQ6IHRydWUgfSxcbiAgICB7IGtleTogXCJNb2QtQXJyb3dSaWdodFwiLCBtYWM6IFwiQWx0LUFycm93UmlnaHRcIiwgcnVuOiBjdXJzb3JHcm91cFJpZ2h0LCBzaGlmdDogc2VsZWN0R3JvdXBSaWdodCwgcHJldmVudERlZmF1bHQ6IHRydWUgfSxcbiAgICB7IG1hYzogXCJDbWQtQXJyb3dSaWdodFwiLCBydW46IGN1cnNvckxpbmVCb3VuZGFyeVJpZ2h0LCBzaGlmdDogc2VsZWN0TGluZUJvdW5kYXJ5UmlnaHQsIHByZXZlbnREZWZhdWx0OiB0cnVlIH0sXG4gICAgeyBrZXk6IFwiQXJyb3dVcFwiLCBydW46IGN1cnNvckxpbmVVcCwgc2hpZnQ6IHNlbGVjdExpbmVVcCwgcHJldmVudERlZmF1bHQ6IHRydWUgfSxcbiAgICB7IG1hYzogXCJDbWQtQXJyb3dVcFwiLCBydW46IGN1cnNvckRvY1N0YXJ0LCBzaGlmdDogc2VsZWN0RG9jU3RhcnQgfSxcbiAgICB7IG1hYzogXCJDdHJsLUFycm93VXBcIiwgcnVuOiBjdXJzb3JQYWdlVXAsIHNoaWZ0OiBzZWxlY3RQYWdlVXAgfSxcbiAgICB7IGtleTogXCJBcnJvd0Rvd25cIiwgcnVuOiBjdXJzb3JMaW5lRG93biwgc2hpZnQ6IHNlbGVjdExpbmVEb3duLCBwcmV2ZW50RGVmYXVsdDogdHJ1ZSB9LFxuICAgIHsgbWFjOiBcIkNtZC1BcnJvd0Rvd25cIiwgcnVuOiBjdXJzb3JEb2NFbmQsIHNoaWZ0OiBzZWxlY3REb2NFbmQgfSxcbiAgICB7IG1hYzogXCJDdHJsLUFycm93RG93blwiLCBydW46IGN1cnNvclBhZ2VEb3duLCBzaGlmdDogc2VsZWN0UGFnZURvd24gfSxcbiAgICB7IGtleTogXCJQYWdlVXBcIiwgcnVuOiBjdXJzb3JQYWdlVXAsIHNoaWZ0OiBzZWxlY3RQYWdlVXAgfSxcbiAgICB7IGtleTogXCJQYWdlRG93blwiLCBydW46IGN1cnNvclBhZ2VEb3duLCBzaGlmdDogc2VsZWN0UGFnZURvd24gfSxcbiAgICB7IGtleTogXCJIb21lXCIsIHJ1bjogY3Vyc29yTGluZUJvdW5kYXJ5QmFja3dhcmQsIHNoaWZ0OiBzZWxlY3RMaW5lQm91bmRhcnlCYWNrd2FyZCwgcHJldmVudERlZmF1bHQ6IHRydWUgfSxcbiAgICB7IGtleTogXCJNb2QtSG9tZVwiLCBydW46IGN1cnNvckRvY1N0YXJ0LCBzaGlmdDogc2VsZWN0RG9jU3RhcnQgfSxcbiAgICB7IGtleTogXCJFbmRcIiwgcnVuOiBjdXJzb3JMaW5lQm91bmRhcnlGb3J3YXJkLCBzaGlmdDogc2VsZWN0TGluZUJvdW5kYXJ5Rm9yd2FyZCwgcHJldmVudERlZmF1bHQ6IHRydWUgfSxcbiAgICB7IGtleTogXCJNb2QtRW5kXCIsIHJ1bjogY3Vyc29yRG9jRW5kLCBzaGlmdDogc2VsZWN0RG9jRW5kIH0sXG4gICAgeyBrZXk6IFwiRW50ZXJcIiwgcnVuOiBpbnNlcnROZXdsaW5lQW5kSW5kZW50IH0sXG4gICAgeyBrZXk6IFwiTW9kLWFcIiwgcnVuOiBzZWxlY3RBbGwgfSxcbiAgICB7IGtleTogXCJCYWNrc3BhY2VcIiwgcnVuOiBkZWxldGVDaGFyQmFja3dhcmQsIHNoaWZ0OiBkZWxldGVDaGFyQmFja3dhcmQgfSxcbiAgICB7IGtleTogXCJEZWxldGVcIiwgcnVuOiBkZWxldGVDaGFyRm9yd2FyZCB9LFxuICAgIHsga2V5OiBcIk1vZC1CYWNrc3BhY2VcIiwgbWFjOiBcIkFsdC1CYWNrc3BhY2VcIiwgcnVuOiBkZWxldGVHcm91cEJhY2t3YXJkIH0sXG4gICAgeyBrZXk6IFwiTW9kLURlbGV0ZVwiLCBtYWM6IFwiQWx0LURlbGV0ZVwiLCBydW46IGRlbGV0ZUdyb3VwRm9yd2FyZCB9LFxuICAgIHsgbWFjOiBcIk1vZC1CYWNrc3BhY2VcIiwgcnVuOiBkZWxldGVUb0xpbmVTdGFydCB9LFxuICAgIHsgbWFjOiBcIk1vZC1EZWxldGVcIiwgcnVuOiBkZWxldGVUb0xpbmVFbmQgfVxuXS5jb25jYXQoLypAX19QVVJFX18qL2VtYWNzU3R5bGVLZXltYXAubWFwKGIgPT4gKHsgbWFjOiBiLmtleSwgcnVuOiBiLnJ1biwgc2hpZnQ6IGIuc2hpZnQgfSkpKTtcbi8qKlxuVGhlIGRlZmF1bHQga2V5bWFwLiBJbmNsdWRlcyBhbGwgYmluZGluZ3MgZnJvbVxuW2BzdGFuZGFyZEtleW1hcGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc3RhbmRhcmRLZXltYXApIHBsdXMgdGhlIGZvbGxvd2luZzpcblxuLSBBbHQtQXJyb3dMZWZ0IChDdHJsLUFycm93TGVmdCBvbiBtYWNPUyk6IFtgY3Vyc29yU3ludGF4TGVmdGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuY3Vyc29yU3ludGF4TGVmdCkgKFtgc2VsZWN0U3ludGF4TGVmdGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0U3ludGF4TGVmdCkgd2l0aCBTaGlmdClcbi0gQWx0LUFycm93UmlnaHQgKEN0cmwtQXJyb3dSaWdodCBvbiBtYWNPUyk6IFtgY3Vyc29yU3ludGF4UmlnaHRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmN1cnNvclN5bnRheFJpZ2h0KSAoW2BzZWxlY3RTeW50YXhSaWdodGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0U3ludGF4UmlnaHQpIHdpdGggU2hpZnQpXG4tIEFsdC1BcnJvd1VwOiBbYG1vdmVMaW5lVXBgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLm1vdmVMaW5lVXApXG4tIEFsdC1BcnJvd0Rvd246IFtgbW92ZUxpbmVEb3duYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5tb3ZlTGluZURvd24pXG4tIFNoaWZ0LUFsdC1BcnJvd1VwOiBbYGNvcHlMaW5lVXBgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmNvcHlMaW5lVXApXG4tIFNoaWZ0LUFsdC1BcnJvd0Rvd246IFtgY29weUxpbmVEb3duYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jb3B5TGluZURvd24pXG4tIEVzY2FwZTogW2BzaW1wbGlmeVNlbGVjdGlvbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2ltcGxpZnlTZWxlY3Rpb24pXG4tIEN0cmwtRW50ZXIgKENvbWQtRW50ZXIgb24gbWFjT1MpOiBbYGluc2VydEJsYW5rTGluZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuaW5zZXJ0QmxhbmtMaW5lKVxuLSBBbHQtbCAoQ3RybC1sIG9uIG1hY09TKTogW2BzZWxlY3RMaW5lYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5zZWxlY3RMaW5lKVxuLSBDdHJsLWkgKENtZC1pIG9uIG1hY09TKTogW2BzZWxlY3RQYXJlbnRTeW50YXhgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnNlbGVjdFBhcmVudFN5bnRheClcbi0gQ3RybC1bIChDbWQtWyBvbiBtYWNPUyk6IFtgaW5kZW50TGVzc2BdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuaW5kZW50TGVzcylcbi0gQ3RybC1dIChDbWQtXSBvbiBtYWNPUyk6IFtgaW5kZW50TW9yZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuaW5kZW50TW9yZSlcbi0gQ3RybC1BbHQtXFxcXCAoQ21kLUFsdC1cXFxcIG9uIG1hY09TKTogW2BpbmRlbnRTZWxlY3Rpb25gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmluZGVudFNlbGVjdGlvbilcbi0gU2hpZnQtQ3RybC1rIChTaGlmdC1DbWQtayBvbiBtYWNPUyk6IFtgZGVsZXRlTGluZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuZGVsZXRlTGluZSlcbi0gU2hpZnQtQ3RybC1cXFxcIChTaGlmdC1DbWQtXFxcXCBvbiBtYWNPUyk6IFtgY3Vyc29yTWF0Y2hpbmdCcmFja2V0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jdXJzb3JNYXRjaGluZ0JyYWNrZXQpXG4tIEN0cmwtLyAoQ21kLS8gb24gbWFjT1MpOiBbYHRvZ2dsZUNvbW1lbnRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnRvZ2dsZUNvbW1lbnQpLlxuLSBTaGlmdC1BbHQtYTogW2B0b2dnbGVCbG9ja0NvbW1lbnRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnRvZ2dsZUJsb2NrQ29tbWVudCkuXG4qL1xuY29uc3QgZGVmYXVsdEtleW1hcCA9IC8qQF9fUFVSRV9fKi9bXG4gICAgeyBrZXk6IFwiQWx0LUFycm93TGVmdFwiLCBtYWM6IFwiQ3RybC1BcnJvd0xlZnRcIiwgcnVuOiBjdXJzb3JTeW50YXhMZWZ0LCBzaGlmdDogc2VsZWN0U3ludGF4TGVmdCB9LFxuICAgIHsga2V5OiBcIkFsdC1BcnJvd1JpZ2h0XCIsIG1hYzogXCJDdHJsLUFycm93UmlnaHRcIiwgcnVuOiBjdXJzb3JTeW50YXhSaWdodCwgc2hpZnQ6IHNlbGVjdFN5bnRheFJpZ2h0IH0sXG4gICAgeyBrZXk6IFwiQWx0LUFycm93VXBcIiwgcnVuOiBtb3ZlTGluZVVwIH0sXG4gICAgeyBrZXk6IFwiU2hpZnQtQWx0LUFycm93VXBcIiwgcnVuOiBjb3B5TGluZVVwIH0sXG4gICAgeyBrZXk6IFwiQWx0LUFycm93RG93blwiLCBydW46IG1vdmVMaW5lRG93biB9LFxuICAgIHsga2V5OiBcIlNoaWZ0LUFsdC1BcnJvd0Rvd25cIiwgcnVuOiBjb3B5TGluZURvd24gfSxcbiAgICB7IGtleTogXCJFc2NhcGVcIiwgcnVuOiBzaW1wbGlmeVNlbGVjdGlvbiB9LFxuICAgIHsga2V5OiBcIk1vZC1FbnRlclwiLCBydW46IGluc2VydEJsYW5rTGluZSB9LFxuICAgIHsga2V5OiBcIkFsdC1sXCIsIG1hYzogXCJDdHJsLWxcIiwgcnVuOiBzZWxlY3RMaW5lIH0sXG4gICAgeyBrZXk6IFwiTW9kLWlcIiwgcnVuOiBzZWxlY3RQYXJlbnRTeW50YXgsIHByZXZlbnREZWZhdWx0OiB0cnVlIH0sXG4gICAgeyBrZXk6IFwiTW9kLVtcIiwgcnVuOiBpbmRlbnRMZXNzIH0sXG4gICAgeyBrZXk6IFwiTW9kLV1cIiwgcnVuOiBpbmRlbnRNb3JlIH0sXG4gICAgeyBrZXk6IFwiTW9kLUFsdC1cXFxcXCIsIHJ1bjogaW5kZW50U2VsZWN0aW9uIH0sXG4gICAgeyBrZXk6IFwiU2hpZnQtTW9kLWtcIiwgcnVuOiBkZWxldGVMaW5lIH0sXG4gICAgeyBrZXk6IFwiU2hpZnQtTW9kLVxcXFxcIiwgcnVuOiBjdXJzb3JNYXRjaGluZ0JyYWNrZXQgfSxcbiAgICB7IGtleTogXCJNb2QtL1wiLCBydW46IHRvZ2dsZUNvbW1lbnQgfSxcbiAgICB7IGtleTogXCJBbHQtQVwiLCBydW46IHRvZ2dsZUJsb2NrQ29tbWVudCB9XG5dLmNvbmNhdChzdGFuZGFyZEtleW1hcCk7XG4vKipcbkEgYmluZGluZyB0aGF0IGJpbmRzIFRhYiB0byBbYGluZGVudE1vcmVgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmluZGVudE1vcmUpIGFuZFxuU2hpZnQtVGFiIHRvIFtgaW5kZW50TGVzc2BdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuaW5kZW50TGVzcykuXG5QbGVhc2Ugc2VlIHRoZSBbVGFiIGV4YW1wbGVdKC4uLy4uL2V4YW1wbGVzL3RhYi8pIGJlZm9yZSB1c2luZ1xudGhpcy5cbiovXG5jb25zdCBpbmRlbnRXaXRoVGFiID0geyBrZXk6IFwiVGFiXCIsIHJ1bjogaW5kZW50TW9yZSwgc2hpZnQ6IGluZGVudExlc3MgfTtcblxuZXhwb3J0IHsgYmxvY2tDb21tZW50LCBibG9ja1VuY29tbWVudCwgY29weUxpbmVEb3duLCBjb3B5TGluZVVwLCBjdXJzb3JDaGFyQmFja3dhcmQsIGN1cnNvckNoYXJGb3J3YXJkLCBjdXJzb3JDaGFyTGVmdCwgY3Vyc29yQ2hhclJpZ2h0LCBjdXJzb3JEb2NFbmQsIGN1cnNvckRvY1N0YXJ0LCBjdXJzb3JHcm91cEJhY2t3YXJkLCBjdXJzb3JHcm91cEZvcndhcmQsIGN1cnNvckdyb3VwTGVmdCwgY3Vyc29yR3JvdXBSaWdodCwgY3Vyc29yTGluZUJvdW5kYXJ5QmFja3dhcmQsIGN1cnNvckxpbmVCb3VuZGFyeUZvcndhcmQsIGN1cnNvckxpbmVCb3VuZGFyeUxlZnQsIGN1cnNvckxpbmVCb3VuZGFyeVJpZ2h0LCBjdXJzb3JMaW5lRG93biwgY3Vyc29yTGluZUVuZCwgY3Vyc29yTGluZVN0YXJ0LCBjdXJzb3JMaW5lVXAsIGN1cnNvck1hdGNoaW5nQnJhY2tldCwgY3Vyc29yUGFnZURvd24sIGN1cnNvclBhZ2VVcCwgY3Vyc29yU3Vid29yZEJhY2t3YXJkLCBjdXJzb3JTdWJ3b3JkRm9yd2FyZCwgY3Vyc29yU3ludGF4TGVmdCwgY3Vyc29yU3ludGF4UmlnaHQsIGRlZmF1bHRLZXltYXAsIGRlbGV0ZUNoYXJCYWNrd2FyZCwgZGVsZXRlQ2hhckZvcndhcmQsIGRlbGV0ZUdyb3VwQmFja3dhcmQsIGRlbGV0ZUdyb3VwRm9yd2FyZCwgZGVsZXRlTGluZSwgZGVsZXRlVG9MaW5lRW5kLCBkZWxldGVUb0xpbmVTdGFydCwgZGVsZXRlVHJhaWxpbmdXaGl0ZXNwYWNlLCBlbWFjc1N0eWxlS2V5bWFwLCBoaXN0b3J5LCBoaXN0b3J5RmllbGQsIGhpc3RvcnlLZXltYXAsIGluZGVudExlc3MsIGluZGVudE1vcmUsIGluZGVudFNlbGVjdGlvbiwgaW5kZW50V2l0aFRhYiwgaW5zZXJ0QmxhbmtMaW5lLCBpbnNlcnROZXdsaW5lLCBpbnNlcnROZXdsaW5lQW5kSW5kZW50LCBpbnNlcnRUYWIsIGludmVydGVkRWZmZWN0cywgaXNvbGF0ZUhpc3RvcnksIGxpbmVDb21tZW50LCBsaW5lVW5jb21tZW50LCBtb3ZlTGluZURvd24sIG1vdmVMaW5lVXAsIHJlZG8sIHJlZG9EZXB0aCwgcmVkb1NlbGVjdGlvbiwgc2VsZWN0QWxsLCBzZWxlY3RDaGFyQmFja3dhcmQsIHNlbGVjdENoYXJGb3J3YXJkLCBzZWxlY3RDaGFyTGVmdCwgc2VsZWN0Q2hhclJpZ2h0LCBzZWxlY3REb2NFbmQsIHNlbGVjdERvY1N0YXJ0LCBzZWxlY3RHcm91cEJhY2t3YXJkLCBzZWxlY3RHcm91cEZvcndhcmQsIHNlbGVjdEdyb3VwTGVmdCwgc2VsZWN0R3JvdXBSaWdodCwgc2VsZWN0TGluZSwgc2VsZWN0TGluZUJvdW5kYXJ5QmFja3dhcmQsIHNlbGVjdExpbmVCb3VuZGFyeUZvcndhcmQsIHNlbGVjdExpbmVCb3VuZGFyeUxlZnQsIHNlbGVjdExpbmVCb3VuZGFyeVJpZ2h0LCBzZWxlY3RMaW5lRG93biwgc2VsZWN0TGluZUVuZCwgc2VsZWN0TGluZVN0YXJ0LCBzZWxlY3RMaW5lVXAsIHNlbGVjdE1hdGNoaW5nQnJhY2tldCwgc2VsZWN0UGFnZURvd24sIHNlbGVjdFBhZ2VVcCwgc2VsZWN0UGFyZW50U3ludGF4LCBzZWxlY3RTdWJ3b3JkQmFja3dhcmQsIHNlbGVjdFN1YndvcmRGb3J3YXJkLCBzZWxlY3RTeW50YXhMZWZ0LCBzZWxlY3RTeW50YXhSaWdodCwgc2ltcGxpZnlTZWxlY3Rpb24sIHNwbGl0TGluZSwgc3RhbmRhcmRLZXltYXAsIHRvZ2dsZUJsb2NrQ29tbWVudCwgdG9nZ2xlQmxvY2tDb21tZW50QnlMaW5lLCB0b2dnbGVDb21tZW50LCB0b2dnbGVMaW5lQ29tbWVudCwgdHJhbnNwb3NlQ2hhcnMsIHVuZG8sIHVuZG9EZXB0aCwgdW5kb1NlbGVjdGlvbiB9O1xuIiwgImltcG9ydCB7IEFubm90YXRpb24sIEVkaXRvclNlbGVjdGlvbiwgY29kZVBvaW50QXQsIGNvZGVQb2ludFNpemUsIGZyb21Db2RlUG9pbnQsIEZhY2V0LCBjb21iaW5lQ29uZmlnLCBTdGF0ZUVmZmVjdCwgU3RhdGVGaWVsZCwgUHJlYywgVGV4dCwgTWFwTW9kZSwgUmFuZ2VWYWx1ZSwgUmFuZ2VTZXQsIENoYXJDYXRlZ29yeSB9IGZyb20gJ0Bjb2RlbWlycm9yL3N0YXRlJztcbmltcG9ydCB7IGxvZ0V4Y2VwdGlvbiwgRGlyZWN0aW9uLCBzaG93VG9vbHRpcCwgRWRpdG9yVmlldywgVmlld1BsdWdpbiwgZ2V0VG9vbHRpcCwgRGVjb3JhdGlvbiwgV2lkZ2V0VHlwZSwga2V5bWFwIH0gZnJvbSAnQGNvZGVtaXJyb3Ivdmlldyc7XG5pbXBvcnQgeyBzeW50YXhUcmVlLCBpbmRlbnRVbml0IH0gZnJvbSAnQGNvZGVtaXJyb3IvbGFuZ3VhZ2UnO1xuXG4vKipcbkFuIGluc3RhbmNlIG9mIHRoaXMgaXMgcGFzc2VkIHRvIGNvbXBsZXRpb24gc291cmNlIGZ1bmN0aW9ucy5cbiovXG5jbGFzcyBDb21wbGV0aW9uQ29udGV4dCB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgbmV3IGNvbXBsZXRpb24gY29udGV4dC4gKE1vc3RseSB1c2VmdWwgZm9yIHRlc3RpbmdcbiAgICBjb21wbGV0aW9uIHNvdXJjZXNcdTIwMTRpbiB0aGUgZWRpdG9yLCB0aGUgZXh0ZW5zaW9uIHdpbGwgY3JlYXRlXG4gICAgdGhlc2UgZm9yIHlvdS4pXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgZWRpdG9yIHN0YXRlIHRoYXQgdGhlIGNvbXBsZXRpb24gaGFwcGVucyBpbi5cbiAgICAqL1xuICAgIHN0YXRlLCBcbiAgICAvKipcbiAgICBUaGUgcG9zaXRpb24gYXQgd2hpY2ggdGhlIGNvbXBsZXRpb24gaXMgaGFwcGVuaW5nLlxuICAgICovXG4gICAgcG9zLCBcbiAgICAvKipcbiAgICBJbmRpY2F0ZXMgd2hldGhlciBjb21wbGV0aW9uIHdhcyBhY3RpdmF0ZWQgZXhwbGljaXRseSwgb3JcbiAgICBpbXBsaWNpdGx5IGJ5IHR5cGluZy4gVGhlIHVzdWFsIHdheSB0byByZXNwb25kIHRvIHRoaXMgaXMgdG9cbiAgICBvbmx5IHJldHVybiBjb21wbGV0aW9ucyB3aGVuIGVpdGhlciB0aGVyZSBpcyBwYXJ0IG9mIGFcbiAgICBjb21wbGV0YWJsZSBlbnRpdHkgYmVmb3JlIHRoZSBjdXJzb3IsIG9yIGBleHBsaWNpdGAgaXMgdHJ1ZS5cbiAgICAqL1xuICAgIGV4cGxpY2l0KSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgdGhpcy5wb3MgPSBwb3M7XG4gICAgICAgIHRoaXMuZXhwbGljaXQgPSBleHBsaWNpdDtcbiAgICAgICAgLyoqXG4gICAgICAgIEBpbnRlcm5hbFxuICAgICAgICAqL1xuICAgICAgICB0aGlzLmFib3J0TGlzdGVuZXJzID0gW107XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgZXh0ZW50LCBjb250ZW50LCBhbmQgKGlmIHRoZXJlIGlzIGEgdG9rZW4pIHR5cGUgb2YgdGhlXG4gICAgdG9rZW4gYmVmb3JlIGB0aGlzLnBvc2AuXG4gICAgKi9cbiAgICB0b2tlbkJlZm9yZSh0eXBlcykge1xuICAgICAgICBsZXQgdG9rZW4gPSBzeW50YXhUcmVlKHRoaXMuc3RhdGUpLnJlc29sdmVJbm5lcih0aGlzLnBvcywgLTEpO1xuICAgICAgICB3aGlsZSAodG9rZW4gJiYgdHlwZXMuaW5kZXhPZih0b2tlbi5uYW1lKSA8IDApXG4gICAgICAgICAgICB0b2tlbiA9IHRva2VuLnBhcmVudDtcbiAgICAgICAgcmV0dXJuIHRva2VuID8geyBmcm9tOiB0b2tlbi5mcm9tLCB0bzogdGhpcy5wb3MsXG4gICAgICAgICAgICB0ZXh0OiB0aGlzLnN0YXRlLnNsaWNlRG9jKHRva2VuLmZyb20sIHRoaXMucG9zKSxcbiAgICAgICAgICAgIHR5cGU6IHRva2VuLnR5cGUgfSA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgbWF0Y2ggb2YgdGhlIGdpdmVuIGV4cHJlc3Npb24gZGlyZWN0bHkgYmVmb3JlIHRoZVxuICAgIGN1cnNvci5cbiAgICAqL1xuICAgIG1hdGNoQmVmb3JlKGV4cHIpIHtcbiAgICAgICAgbGV0IGxpbmUgPSB0aGlzLnN0YXRlLmRvYy5saW5lQXQodGhpcy5wb3MpO1xuICAgICAgICBsZXQgc3RhcnQgPSBNYXRoLm1heChsaW5lLmZyb20sIHRoaXMucG9zIC0gMjUwKTtcbiAgICAgICAgbGV0IHN0ciA9IGxpbmUudGV4dC5zbGljZShzdGFydCAtIGxpbmUuZnJvbSwgdGhpcy5wb3MgLSBsaW5lLmZyb20pO1xuICAgICAgICBsZXQgZm91bmQgPSBzdHIuc2VhcmNoKGVuc3VyZUFuY2hvcihleHByLCBmYWxzZSkpO1xuICAgICAgICByZXR1cm4gZm91bmQgPCAwID8gbnVsbCA6IHsgZnJvbTogc3RhcnQgKyBmb3VuZCwgdG86IHRoaXMucG9zLCB0ZXh0OiBzdHIuc2xpY2UoZm91bmQpIH07XG4gICAgfVxuICAgIC8qKlxuICAgIFlpZWxkcyB0cnVlIHdoZW4gdGhlIHF1ZXJ5IGhhcyBiZWVuIGFib3J0ZWQuIENhbiBiZSB1c2VmdWwgaW5cbiAgICBhc3luY2hyb25vdXMgcXVlcmllcyB0byBhdm9pZCBkb2luZyB3b3JrIHRoYXQgd2lsbCBiZSBpZ25vcmVkLlxuICAgICovXG4gICAgZ2V0IGFib3J0ZWQoKSB7IHJldHVybiB0aGlzLmFib3J0TGlzdGVuZXJzID09IG51bGw7IH1cbiAgICAvKipcbiAgICBBbGxvd3MgeW91IHRvIHJlZ2lzdGVyIGFib3J0IGhhbmRsZXJzLCB3aGljaCB3aWxsIGJlIGNhbGxlZCB3aGVuXG4gICAgdGhlIHF1ZXJ5IGlzXG4gICAgW2Fib3J0ZWRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jYXV0b2NvbXBsZXRlLkNvbXBsZXRpb25Db250ZXh0LmFib3J0ZWQpLlxuICAgICovXG4gICAgYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICBpZiAodHlwZSA9PSBcImFib3J0XCIgJiYgdGhpcy5hYm9ydExpc3RlbmVycylcbiAgICAgICAgICAgIHRoaXMuYWJvcnRMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gICAgfVxufVxuZnVuY3Rpb24gdG9TZXQoY2hhcnMpIHtcbiAgICBsZXQgZmxhdCA9IE9iamVjdC5rZXlzKGNoYXJzKS5qb2luKFwiXCIpO1xuICAgIGxldCB3b3JkcyA9IC9cXHcvLnRlc3QoZmxhdCk7XG4gICAgaWYgKHdvcmRzKVxuICAgICAgICBmbGF0ID0gZmxhdC5yZXBsYWNlKC9cXHcvZywgXCJcIik7XG4gICAgcmV0dXJuIGBbJHt3b3JkcyA/IFwiXFxcXHdcIiA6IFwiXCJ9JHtmbGF0LnJlcGxhY2UoL1teXFx3XFxzXS9nLCBcIlxcXFwkJlwiKX1dYDtcbn1cbmZ1bmN0aW9uIHByZWZpeE1hdGNoKG9wdGlvbnMpIHtcbiAgICBsZXQgZmlyc3QgPSBPYmplY3QuY3JlYXRlKG51bGwpLCByZXN0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBmb3IgKGxldCB7IGxhYmVsIH0gb2Ygb3B0aW9ucykge1xuICAgICAgICBmaXJzdFtsYWJlbFswXV0gPSB0cnVlO1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGxhYmVsLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgcmVzdFtsYWJlbFtpXV0gPSB0cnVlO1xuICAgIH1cbiAgICBsZXQgc291cmNlID0gdG9TZXQoZmlyc3QpICsgdG9TZXQocmVzdCkgKyBcIiokXCI7XG4gICAgcmV0dXJuIFtuZXcgUmVnRXhwKFwiXlwiICsgc291cmNlKSwgbmV3IFJlZ0V4cChzb3VyY2UpXTtcbn1cbi8qKlxuR2l2ZW4gYSBhIGZpeGVkIGFycmF5IG9mIG9wdGlvbnMsIHJldHVybiBhbiBhdXRvY29tcGxldGVyIHRoYXRcbmNvbXBsZXRlcyB0aGVtLlxuKi9cbmZ1bmN0aW9uIGNvbXBsZXRlRnJvbUxpc3QobGlzdCkge1xuICAgIGxldCBvcHRpb25zID0gbGlzdC5tYXAobyA9PiB0eXBlb2YgbyA9PSBcInN0cmluZ1wiID8geyBsYWJlbDogbyB9IDogbyk7XG4gICAgbGV0IFt2YWxpZEZvciwgbWF0Y2hdID0gb3B0aW9ucy5ldmVyeShvID0+IC9eXFx3KyQvLnRlc3Qoby5sYWJlbCkpID8gWy9cXHcqJC8sIC9cXHcrJC9dIDogcHJlZml4TWF0Y2gob3B0aW9ucyk7XG4gICAgcmV0dXJuIChjb250ZXh0KSA9PiB7XG4gICAgICAgIGxldCB0b2tlbiA9IGNvbnRleHQubWF0Y2hCZWZvcmUobWF0Y2gpO1xuICAgICAgICByZXR1cm4gdG9rZW4gfHwgY29udGV4dC5leHBsaWNpdCA/IHsgZnJvbTogdG9rZW4gPyB0b2tlbi5mcm9tIDogY29udGV4dC5wb3MsIG9wdGlvbnMsIHZhbGlkRm9yIH0gOiBudWxsO1xuICAgIH07XG59XG4vKipcbldyYXAgdGhlIGdpdmVuIGNvbXBsZXRpb24gc291cmNlIHNvIHRoYXQgaXQgd2lsbCBvbmx5IGZpcmUgd2hlbiB0aGVcbmN1cnNvciBpcyBpbiBhIHN5bnRheCBub2RlIHdpdGggb25lIG9mIHRoZSBnaXZlbiBuYW1lcy5cbiovXG5mdW5jdGlvbiBpZkluKG5vZGVzLCBzb3VyY2UpIHtcbiAgICByZXR1cm4gKGNvbnRleHQpID0+IHtcbiAgICAgICAgZm9yIChsZXQgcG9zID0gc3ludGF4VHJlZShjb250ZXh0LnN0YXRlKS5yZXNvbHZlSW5uZXIoY29udGV4dC5wb3MsIC0xKTsgcG9zOyBwb3MgPSBwb3MucGFyZW50KVxuICAgICAgICAgICAgaWYgKG5vZGVzLmluZGV4T2YocG9zLm5hbWUpID4gLTEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNvdXJjZShjb250ZXh0KTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbn1cbi8qKlxuV3JhcCB0aGUgZ2l2ZW4gY29tcGxldGlvbiBzb3VyY2Ugc28gdGhhdCBpdCB3aWxsIG5vdCBmaXJlIHdoZW4gdGhlXG5jdXJzb3IgaXMgaW4gYSBzeW50YXggbm9kZSB3aXRoIG9uZSBvZiB0aGUgZ2l2ZW4gbmFtZXMuXG4qL1xuZnVuY3Rpb24gaWZOb3RJbihub2Rlcywgc291cmNlKSB7XG4gICAgcmV0dXJuIChjb250ZXh0KSA9PiB7XG4gICAgICAgIGZvciAobGV0IHBvcyA9IHN5bnRheFRyZWUoY29udGV4dC5zdGF0ZSkucmVzb2x2ZUlubmVyKGNvbnRleHQucG9zLCAtMSk7IHBvczsgcG9zID0gcG9zLnBhcmVudClcbiAgICAgICAgICAgIGlmIChub2Rlcy5pbmRleE9mKHBvcy5uYW1lKSA+IC0xKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gc291cmNlKGNvbnRleHQpO1xuICAgIH07XG59XG5jbGFzcyBPcHRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGNvbXBsZXRpb24sIHNvdXJjZSwgbWF0Y2gpIHtcbiAgICAgICAgdGhpcy5jb21wbGV0aW9uID0gY29tcGxldGlvbjtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgIHRoaXMubWF0Y2ggPSBtYXRjaDtcbiAgICB9XG59XG5mdW5jdGlvbiBjdXIoc3RhdGUpIHsgcmV0dXJuIHN0YXRlLnNlbGVjdGlvbi5tYWluLmhlYWQ7IH1cbi8vIE1ha2Ugc3VyZSB0aGUgZ2l2ZW4gcmVnZXhwIGhhcyBhICQgYXQgaXRzIGVuZCBhbmQsIGlmIGBzdGFydGAgaXNcbi8vIHRydWUsIGEgXiBhdCBpdHMgc3RhcnQuXG5mdW5jdGlvbiBlbnN1cmVBbmNob3IoZXhwciwgc3RhcnQpIHtcbiAgICB2YXIgX2E7XG4gICAgbGV0IHsgc291cmNlIH0gPSBleHByO1xuICAgIGxldCBhZGRTdGFydCA9IHN0YXJ0ICYmIHNvdXJjZVswXSAhPSBcIl5cIiwgYWRkRW5kID0gc291cmNlW3NvdXJjZS5sZW5ndGggLSAxXSAhPSBcIiRcIjtcbiAgICBpZiAoIWFkZFN0YXJ0ICYmICFhZGRFbmQpXG4gICAgICAgIHJldHVybiBleHByO1xuICAgIHJldHVybiBuZXcgUmVnRXhwKGAke2FkZFN0YXJ0ID8gXCJeXCIgOiBcIlwifSg/OiR7c291cmNlfSkke2FkZEVuZCA/IFwiJFwiIDogXCJcIn1gLCAoX2EgPSBleHByLmZsYWdzKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAoZXhwci5pZ25vcmVDYXNlID8gXCJpXCIgOiBcIlwiKSk7XG59XG4vKipcblRoaXMgYW5ub3RhdGlvbiBpcyBhZGRlZCB0byB0cmFuc2FjdGlvbnMgdGhhdCBhcmUgcHJvZHVjZWQgYnlcbnBpY2tpbmcgYSBjb21wbGV0aW9uLlxuKi9cbmNvbnN0IHBpY2tlZENvbXBsZXRpb24gPSAvKkBfX1BVUkVfXyovQW5ub3RhdGlvbi5kZWZpbmUoKTtcbi8qKlxuSGVscGVyIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHRyYW5zYWN0aW9uIHNwZWMgd2hpY2ggaW5zZXJ0cyBhXG5jb21wbGV0aW9uJ3MgdGV4dCBpbiB0aGUgbWFpbiBzZWxlY3Rpb24gcmFuZ2UsIGFuZCBhbnkgb3RoZXJcbnNlbGVjdGlvbiByYW5nZSB0aGF0IGhhcyB0aGUgc2FtZSB0ZXh0IGluIGZyb250IG9mIGl0LlxuKi9cbmZ1bmN0aW9uIGluc2VydENvbXBsZXRpb25UZXh0KHN0YXRlLCB0ZXh0LCBmcm9tLCB0bykge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHN0YXRlLmNoYW5nZUJ5UmFuZ2UocmFuZ2UgPT4ge1xuICAgICAgICBpZiAocmFuZ2UgPT0gc3RhdGUuc2VsZWN0aW9uLm1haW4pXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGNoYW5nZXM6IHsgZnJvbTogZnJvbSwgdG86IHRvLCBpbnNlcnQ6IHRleHQgfSxcbiAgICAgICAgICAgICAgICByYW5nZTogRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihmcm9tICsgdGV4dC5sZW5ndGgpXG4gICAgICAgICAgICB9O1xuICAgICAgICBsZXQgbGVuID0gdG8gLSBmcm9tO1xuICAgICAgICBpZiAoIXJhbmdlLmVtcHR5IHx8XG4gICAgICAgICAgICBsZW4gJiYgc3RhdGUuc2xpY2VEb2MocmFuZ2UuZnJvbSAtIGxlbiwgcmFuZ2UuZnJvbSkgIT0gc3RhdGUuc2xpY2VEb2MoZnJvbSwgdG8pKVxuICAgICAgICAgICAgcmV0dXJuIHsgcmFuZ2UgfTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNoYW5nZXM6IHsgZnJvbTogcmFuZ2UuZnJvbSAtIGxlbiwgdG86IHJhbmdlLmZyb20sIGluc2VydDogdGV4dCB9LFxuICAgICAgICAgICAgcmFuZ2U6IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IocmFuZ2UuZnJvbSAtIGxlbiArIHRleHQubGVuZ3RoKVxuICAgICAgICB9O1xuICAgIH0pKSwgeyB1c2VyRXZlbnQ6IFwiaW5wdXQuY29tcGxldGVcIiB9KTtcbn1cbmZ1bmN0aW9uIGFwcGx5Q29tcGxldGlvbih2aWV3LCBvcHRpb24pIHtcbiAgICBjb25zdCBhcHBseSA9IG9wdGlvbi5jb21wbGV0aW9uLmFwcGx5IHx8IG9wdGlvbi5jb21wbGV0aW9uLmxhYmVsO1xuICAgIGxldCByZXN1bHQgPSBvcHRpb24uc291cmNlO1xuICAgIGlmICh0eXBlb2YgYXBwbHkgPT0gXCJzdHJpbmdcIilcbiAgICAgICAgdmlldy5kaXNwYXRjaChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGluc2VydENvbXBsZXRpb25UZXh0KHZpZXcuc3RhdGUsIGFwcGx5LCByZXN1bHQuZnJvbSwgcmVzdWx0LnRvKSksIHsgYW5ub3RhdGlvbnM6IHBpY2tlZENvbXBsZXRpb24ub2Yob3B0aW9uLmNvbXBsZXRpb24pIH0pKTtcbiAgICBlbHNlXG4gICAgICAgIGFwcGx5KHZpZXcsIG9wdGlvbi5jb21wbGV0aW9uLCByZXN1bHQuZnJvbSwgcmVzdWx0LnRvKTtcbn1cbmNvbnN0IFNvdXJjZUNhY2hlID0gLypAX19QVVJFX18qL25ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBhc1NvdXJjZShzb3VyY2UpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoc291cmNlKSlcbiAgICAgICAgcmV0dXJuIHNvdXJjZTtcbiAgICBsZXQga25vd24gPSBTb3VyY2VDYWNoZS5nZXQoc291cmNlKTtcbiAgICBpZiAoIWtub3duKVxuICAgICAgICBTb3VyY2VDYWNoZS5zZXQoc291cmNlLCBrbm93biA9IGNvbXBsZXRlRnJvbUxpc3Qoc291cmNlKSk7XG4gICAgcmV0dXJuIGtub3duO1xufVxuXG4vLyBBIHBhdHRlcm4gbWF0Y2hlciBmb3IgZnV6enkgY29tcGxldGlvbiBtYXRjaGluZy4gQ3JlYXRlIGFuIGluc3RhbmNlXG4vLyBvbmNlIGZvciBhIHBhdHRlcm4sIGFuZCB0aGVuIHVzZSB0aGF0IHRvIG1hdGNoIGFueSBudW1iZXIgb2Zcbi8vIGNvbXBsZXRpb25zLlxuY2xhc3MgRnV6enlNYXRjaGVyIHtcbiAgICBjb25zdHJ1Y3RvcihwYXR0ZXJuKSB7XG4gICAgICAgIHRoaXMucGF0dGVybiA9IHBhdHRlcm47XG4gICAgICAgIHRoaXMuY2hhcnMgPSBbXTtcbiAgICAgICAgdGhpcy5mb2xkZWQgPSBbXTtcbiAgICAgICAgLy8gQnVmZmVycyByZXVzZWQgYnkgY2FsbHMgdG8gYG1hdGNoYCB0byB0cmFjayBtYXRjaGVkIGNoYXJhY3RlclxuICAgICAgICAvLyBwb3NpdGlvbnMuXG4gICAgICAgIHRoaXMuYW55ID0gW107XG4gICAgICAgIHRoaXMucHJlY2lzZSA9IFtdO1xuICAgICAgICB0aGlzLmJ5V29yZCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBwID0gMDsgcCA8IHBhdHRlcm4ubGVuZ3RoOykge1xuICAgICAgICAgICAgbGV0IGNoYXIgPSBjb2RlUG9pbnRBdChwYXR0ZXJuLCBwKSwgc2l6ZSA9IGNvZGVQb2ludFNpemUoY2hhcik7XG4gICAgICAgICAgICB0aGlzLmNoYXJzLnB1c2goY2hhcik7XG4gICAgICAgICAgICBsZXQgcGFydCA9IHBhdHRlcm4uc2xpY2UocCwgcCArIHNpemUpLCB1cHBlciA9IHBhcnQudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIHRoaXMuZm9sZGVkLnB1c2goY29kZVBvaW50QXQodXBwZXIgPT0gcGFydCA/IHBhcnQudG9Mb3dlckNhc2UoKSA6IHVwcGVyLCAwKSk7XG4gICAgICAgICAgICBwICs9IHNpemU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hc3RyYWwgPSBwYXR0ZXJuLmxlbmd0aCAhPSB0aGlzLmNoYXJzLmxlbmd0aDtcbiAgICB9XG4gICAgLy8gTWF0Y2hlcyBhIGdpdmVuIHdvcmQgKGNvbXBsZXRpb24pIGFnYWluc3QgdGhlIHBhdHRlcm4gKGlucHV0KS5cbiAgICAvLyBXaWxsIHJldHVybiBudWxsIGZvciBubyBtYXRjaCwgYW5kIG90aGVyd2lzZSBhbiBhcnJheSB0aGF0IHN0YXJ0c1xuICAgIC8vIHdpdGggdGhlIG1hdGNoIHNjb3JlLCBmb2xsb3dlZCBieSBhbnkgbnVtYmVyIG9mIGBmcm9tLCB0b2AgcGFpcnNcbiAgICAvLyBpbmRpY2F0aW5nIHRoZSBtYXRjaGVkIHBhcnRzIG9mIGB3b3JkYC5cbiAgICAvL1xuICAgIC8vIFRoZSBzY29yZSBpcyBhIG51bWJlciB0aGF0IGlzIG1vcmUgbmVnYXRpdmUgdGhlIHdvcnNlIHRoZSBtYXRjaFxuICAgIC8vIGlzLiBTZWUgYFBlbmFsdHlgIGFib3ZlLlxuICAgIG1hdGNoKHdvcmQpIHtcbiAgICAgICAgaWYgKHRoaXMucGF0dGVybi5sZW5ndGggPT0gMClcbiAgICAgICAgICAgIHJldHVybiBbMF07XG4gICAgICAgIGlmICh3b3JkLmxlbmd0aCA8IHRoaXMucGF0dGVybi5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgbGV0IHsgY2hhcnMsIGZvbGRlZCwgYW55LCBwcmVjaXNlLCBieVdvcmQgfSA9IHRoaXM7XG4gICAgICAgIC8vIEZvciBzaW5nbGUtY2hhcmFjdGVyIHF1ZXJpZXMsIG9ubHkgbWF0Y2ggd2hlbiB0aGV5IG9jY3VyIHJpZ2h0XG4gICAgICAgIC8vIGF0IHRoZSBzdGFydFxuICAgICAgICBpZiAoY2hhcnMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgIGxldCBmaXJzdCA9IGNvZGVQb2ludEF0KHdvcmQsIDApO1xuICAgICAgICAgICAgcmV0dXJuIGZpcnN0ID09IGNoYXJzWzBdID8gWzAsIDAsIGNvZGVQb2ludFNpemUoZmlyc3QpXVxuICAgICAgICAgICAgICAgIDogZmlyc3QgPT0gZm9sZGVkWzBdID8gWy0yMDAgLyogUGVuYWx0eS5DYXNlRm9sZCAqLywgMCwgY29kZVBvaW50U2l6ZShmaXJzdCldIDogbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZGlyZWN0ID0gd29yZC5pbmRleE9mKHRoaXMucGF0dGVybik7XG4gICAgICAgIGlmIChkaXJlY3QgPT0gMClcbiAgICAgICAgICAgIHJldHVybiBbMCwgMCwgdGhpcy5wYXR0ZXJuLmxlbmd0aF07XG4gICAgICAgIGxldCBsZW4gPSBjaGFycy5sZW5ndGgsIGFueVRvID0gMDtcbiAgICAgICAgaWYgKGRpcmVjdCA8IDApIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBlID0gTWF0aC5taW4od29yZC5sZW5ndGgsIDIwMCk7IGkgPCBlICYmIGFueVRvIDwgbGVuOykge1xuICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gY29kZVBvaW50QXQod29yZCwgaSk7XG4gICAgICAgICAgICAgICAgaWYgKG5leHQgPT0gY2hhcnNbYW55VG9dIHx8IG5leHQgPT0gZm9sZGVkW2FueVRvXSlcbiAgICAgICAgICAgICAgICAgICAgYW55W2FueVRvKytdID0gaTtcbiAgICAgICAgICAgICAgICBpICs9IGNvZGVQb2ludFNpemUobmV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBObyBtYXRjaCwgZXhpdCBpbW1lZGlhdGVseVxuICAgICAgICAgICAgaWYgKGFueVRvIDwgbGVuKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoaXMgdHJhY2tzIHRoZSBleHRlbnQgb2YgdGhlIHByZWNpc2UgKG5vbi1mb2xkZWQsIG5vdFxuICAgICAgICAvLyBuZWNlc3NhcmlseSBhZGphY2VudCkgbWF0Y2hcbiAgICAgICAgbGV0IHByZWNpc2VUbyA9IDA7XG4gICAgICAgIC8vIFRyYWNrcyB3aGV0aGVyIHRoZXJlIGlzIGEgbWF0Y2ggdGhhdCBoaXRzIG9ubHkgY2hhcmFjdGVycyB0aGF0XG4gICAgICAgIC8vIGFwcGVhciB0byBiZSBzdGFydGluZyB3b3Jkcy4gYGJ5V29yZEZvbGRlZGAgaXMgc2V0IHRvIHRydWUgd2hlblxuICAgICAgICAvLyBhIGNhc2UgZm9sZGVkIGNoYXJhY3RlciBpcyBlbmNvdW50ZXJlZCBpbiBzdWNoIGEgbWF0Y2hcbiAgICAgICAgbGV0IGJ5V29yZFRvID0gMCwgYnlXb3JkRm9sZGVkID0gZmFsc2U7XG4gICAgICAgIC8vIElmIHdlJ3ZlIGZvdW5kIGEgcGFydGlhbCBhZGphY2VudCBtYXRjaCwgdGhlc2UgdHJhY2sgaXRzIHN0YXRlXG4gICAgICAgIGxldCBhZGphY2VudFRvID0gMCwgYWRqYWNlbnRTdGFydCA9IC0xLCBhZGphY2VudEVuZCA9IC0xO1xuICAgICAgICBsZXQgaGFzTG93ZXIgPSAvW2Etel0vLnRlc3Qod29yZCksIHdvcmRBZGphY2VudCA9IHRydWU7XG4gICAgICAgIC8vIEdvIG92ZXIgdGhlIG9wdGlvbidzIHRleHQsIHNjYW5uaW5nIGZvciB0aGUgdmFyaW91cyBraW5kcyBvZiBtYXRjaGVzXG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBlID0gTWF0aC5taW4od29yZC5sZW5ndGgsIDIwMCksIHByZXZUeXBlID0gMCAvKiBUcC5Ob25Xb3JkICovOyBpIDwgZSAmJiBieVdvcmRUbyA8IGxlbjspIHtcbiAgICAgICAgICAgIGxldCBuZXh0ID0gY29kZVBvaW50QXQod29yZCwgaSk7XG4gICAgICAgICAgICBpZiAoZGlyZWN0IDwgMCkge1xuICAgICAgICAgICAgICAgIGlmIChwcmVjaXNlVG8gPCBsZW4gJiYgbmV4dCA9PSBjaGFyc1twcmVjaXNlVG9dKVxuICAgICAgICAgICAgICAgICAgICBwcmVjaXNlW3ByZWNpc2VUbysrXSA9IGk7XG4gICAgICAgICAgICAgICAgaWYgKGFkamFjZW50VG8gPCBsZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQgPT0gY2hhcnNbYWRqYWNlbnRUb10gfHwgbmV4dCA9PSBmb2xkZWRbYWRqYWNlbnRUb10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhZGphY2VudFRvID09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRqYWNlbnRTdGFydCA9IGk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGphY2VudEVuZCA9IGkgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRqYWNlbnRUbysrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRqYWNlbnRUbyA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgY2gsIHR5cGUgPSBuZXh0IDwgMHhmZlxuICAgICAgICAgICAgICAgID8gKG5leHQgPj0gNDggJiYgbmV4dCA8PSA1NyB8fCBuZXh0ID49IDk3ICYmIG5leHQgPD0gMTIyID8gMiAvKiBUcC5Mb3dlciAqLyA6IG5leHQgPj0gNjUgJiYgbmV4dCA8PSA5MCA/IDEgLyogVHAuVXBwZXIgKi8gOiAwIC8qIFRwLk5vbldvcmQgKi8pXG4gICAgICAgICAgICAgICAgOiAoKGNoID0gZnJvbUNvZGVQb2ludChuZXh0KSkgIT0gY2gudG9Mb3dlckNhc2UoKSA/IDEgLyogVHAuVXBwZXIgKi8gOiBjaCAhPSBjaC50b1VwcGVyQ2FzZSgpID8gMiAvKiBUcC5Mb3dlciAqLyA6IDAgLyogVHAuTm9uV29yZCAqLyk7XG4gICAgICAgICAgICBpZiAoIWkgfHwgdHlwZSA9PSAxIC8qIFRwLlVwcGVyICovICYmIGhhc0xvd2VyIHx8IHByZXZUeXBlID09IDAgLyogVHAuTm9uV29yZCAqLyAmJiB0eXBlICE9IDAgLyogVHAuTm9uV29yZCAqLykge1xuICAgICAgICAgICAgICAgIGlmIChjaGFyc1tieVdvcmRUb10gPT0gbmV4dCB8fCAoZm9sZGVkW2J5V29yZFRvXSA9PSBuZXh0ICYmIChieVdvcmRGb2xkZWQgPSB0cnVlKSkpXG4gICAgICAgICAgICAgICAgICAgIGJ5V29yZFtieVdvcmRUbysrXSA9IGk7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYnlXb3JkLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgd29yZEFkamFjZW50ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcmV2VHlwZSA9IHR5cGU7XG4gICAgICAgICAgICBpICs9IGNvZGVQb2ludFNpemUobmV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJ5V29yZFRvID09IGxlbiAmJiBieVdvcmRbMF0gPT0gMCAmJiB3b3JkQWRqYWNlbnQpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHQoLTEwMCAvKiBQZW5hbHR5LkJ5V29yZCAqLyArIChieVdvcmRGb2xkZWQgPyAtMjAwIC8qIFBlbmFsdHkuQ2FzZUZvbGQgKi8gOiAwKSwgYnlXb3JkLCB3b3JkKTtcbiAgICAgICAgaWYgKGFkamFjZW50VG8gPT0gbGVuICYmIGFkamFjZW50U3RhcnQgPT0gMClcbiAgICAgICAgICAgIHJldHVybiBbLTIwMCAvKiBQZW5hbHR5LkNhc2VGb2xkICovIC0gd29yZC5sZW5ndGgsIDAsIGFkamFjZW50RW5kXTtcbiAgICAgICAgaWYgKGRpcmVjdCA+IC0xKVxuICAgICAgICAgICAgcmV0dXJuIFstNzAwIC8qIFBlbmFsdHkuTm90U3RhcnQgKi8gLSB3b3JkLmxlbmd0aCwgZGlyZWN0LCBkaXJlY3QgKyB0aGlzLnBhdHRlcm4ubGVuZ3RoXTtcbiAgICAgICAgaWYgKGFkamFjZW50VG8gPT0gbGVuKVxuICAgICAgICAgICAgcmV0dXJuIFstMjAwIC8qIFBlbmFsdHkuQ2FzZUZvbGQgKi8gKyAtNzAwIC8qIFBlbmFsdHkuTm90U3RhcnQgKi8gLSB3b3JkLmxlbmd0aCwgYWRqYWNlbnRTdGFydCwgYWRqYWNlbnRFbmRdO1xuICAgICAgICBpZiAoYnlXb3JkVG8gPT0gbGVuKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0KC0xMDAgLyogUGVuYWx0eS5CeVdvcmQgKi8gKyAoYnlXb3JkRm9sZGVkID8gLTIwMCAvKiBQZW5hbHR5LkNhc2VGb2xkICovIDogMCkgKyAtNzAwIC8qIFBlbmFsdHkuTm90U3RhcnQgKi8gK1xuICAgICAgICAgICAgICAgICh3b3JkQWRqYWNlbnQgPyAwIDogLTExMDAgLyogUGVuYWx0eS5HYXAgKi8pLCBieVdvcmQsIHdvcmQpO1xuICAgICAgICByZXR1cm4gY2hhcnMubGVuZ3RoID09IDIgPyBudWxsIDogdGhpcy5yZXN1bHQoKGFueVswXSA/IC03MDAgLyogUGVuYWx0eS5Ob3RTdGFydCAqLyA6IDApICsgLTIwMCAvKiBQZW5hbHR5LkNhc2VGb2xkICovICsgLTExMDAgLyogUGVuYWx0eS5HYXAgKi8sIGFueSwgd29yZCk7XG4gICAgfVxuICAgIHJlc3VsdChzY29yZSwgcG9zaXRpb25zLCB3b3JkKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBbc2NvcmUgLSB3b3JkLmxlbmd0aF0sIGkgPSAxO1xuICAgICAgICBmb3IgKGxldCBwb3Mgb2YgcG9zaXRpb25zKSB7XG4gICAgICAgICAgICBsZXQgdG8gPSBwb3MgKyAodGhpcy5hc3RyYWwgPyBjb2RlUG9pbnRTaXplKGNvZGVQb2ludEF0KHdvcmQsIHBvcykpIDogMSk7XG4gICAgICAgICAgICBpZiAoaSA+IDEgJiYgcmVzdWx0W2kgLSAxXSA9PSBwb3MpXG4gICAgICAgICAgICAgICAgcmVzdWx0W2kgLSAxXSA9IHRvO1xuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0W2krK10gPSBwb3M7XG4gICAgICAgICAgICAgICAgcmVzdWx0W2krK10gPSB0bztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cblxuY29uc3QgY29tcGxldGlvbkNvbmZpZyA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmUoY29uZmlncykge1xuICAgICAgICByZXR1cm4gY29tYmluZUNvbmZpZyhjb25maWdzLCB7XG4gICAgICAgICAgICBhY3RpdmF0ZU9uVHlwaW5nOiB0cnVlLFxuICAgICAgICAgICAgc2VsZWN0T25PcGVuOiB0cnVlLFxuICAgICAgICAgICAgb3ZlcnJpZGU6IG51bGwsXG4gICAgICAgICAgICBjbG9zZU9uQmx1cjogdHJ1ZSxcbiAgICAgICAgICAgIG1heFJlbmRlcmVkT3B0aW9uczogMTAwLFxuICAgICAgICAgICAgZGVmYXVsdEtleW1hcDogdHJ1ZSxcbiAgICAgICAgICAgIG9wdGlvbkNsYXNzOiAoKSA9PiBcIlwiLFxuICAgICAgICAgICAgYWJvdmVDdXJzb3I6IGZhbHNlLFxuICAgICAgICAgICAgaWNvbnM6IHRydWUsXG4gICAgICAgICAgICBhZGRUb09wdGlvbnM6IFtdLFxuICAgICAgICAgICAgY29tcGFyZUNvbXBsZXRpb25zOiAoYSwgYikgPT4gYS5sYWJlbC5sb2NhbGVDb21wYXJlKGIubGFiZWwpLFxuICAgICAgICAgICAgaW50ZXJhY3Rpb25EZWxheTogNzVcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgZGVmYXVsdEtleW1hcDogKGEsIGIpID0+IGEgJiYgYixcbiAgICAgICAgICAgIGNsb3NlT25CbHVyOiAoYSwgYikgPT4gYSAmJiBiLFxuICAgICAgICAgICAgaWNvbnM6IChhLCBiKSA9PiBhICYmIGIsXG4gICAgICAgICAgICBvcHRpb25DbGFzczogKGEsIGIpID0+IGMgPT4gam9pbkNsYXNzKGEoYyksIGIoYykpLFxuICAgICAgICAgICAgYWRkVG9PcHRpb25zOiAoYSwgYikgPT4gYS5jb25jYXQoYilcbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG5mdW5jdGlvbiBqb2luQ2xhc3MoYSwgYikge1xuICAgIHJldHVybiBhID8gYiA/IGEgKyBcIiBcIiArIGIgOiBhIDogYjtcbn1cblxuZnVuY3Rpb24gb3B0aW9uQ29udGVudChjb25maWcpIHtcbiAgICBsZXQgY29udGVudCA9IGNvbmZpZy5hZGRUb09wdGlvbnMuc2xpY2UoKTtcbiAgICBpZiAoY29uZmlnLmljb25zKVxuICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgcmVuZGVyKGNvbXBsZXRpb24pIHtcbiAgICAgICAgICAgICAgICBsZXQgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgaWNvbi5jbGFzc0xpc3QuYWRkKFwiY20tY29tcGxldGlvbkljb25cIik7XG4gICAgICAgICAgICAgICAgaWYgKGNvbXBsZXRpb24udHlwZSlcbiAgICAgICAgICAgICAgICAgICAgaWNvbi5jbGFzc0xpc3QuYWRkKC4uLmNvbXBsZXRpb24udHlwZS5zcGxpdCgvXFxzKy9nKS5tYXAoY2xzID0+IFwiY20tY29tcGxldGlvbkljb24tXCIgKyBjbHMpKTtcbiAgICAgICAgICAgICAgICBpY29uLnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaWNvbjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwb3NpdGlvbjogMjBcbiAgICAgICAgfSk7XG4gICAgY29udGVudC5wdXNoKHtcbiAgICAgICAgcmVuZGVyKGNvbXBsZXRpb24sIF9zLCBtYXRjaCkge1xuICAgICAgICAgICAgbGV0IGxhYmVsRWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgICAgICBsYWJlbEVsdC5jbGFzc05hbWUgPSBcImNtLWNvbXBsZXRpb25MYWJlbFwiO1xuICAgICAgICAgICAgbGV0IHsgbGFiZWwgfSA9IGNvbXBsZXRpb24sIG9mZiA9IDA7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMTsgaiA8IG1hdGNoLmxlbmd0aDspIHtcbiAgICAgICAgICAgICAgICBsZXQgZnJvbSA9IG1hdGNoW2orK10sIHRvID0gbWF0Y2hbaisrXTtcbiAgICAgICAgICAgICAgICBpZiAoZnJvbSA+IG9mZilcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxFbHQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobGFiZWwuc2xpY2Uob2ZmLCBmcm9tKSkpO1xuICAgICAgICAgICAgICAgIGxldCBzcGFuID0gbGFiZWxFbHQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIikpO1xuICAgICAgICAgICAgICAgIHNwYW4uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobGFiZWwuc2xpY2UoZnJvbSwgdG8pKSk7XG4gICAgICAgICAgICAgICAgc3Bhbi5jbGFzc05hbWUgPSBcImNtLWNvbXBsZXRpb25NYXRjaGVkVGV4dFwiO1xuICAgICAgICAgICAgICAgIG9mZiA9IHRvO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9mZiA8IGxhYmVsLmxlbmd0aClcbiAgICAgICAgICAgICAgICBsYWJlbEVsdC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShsYWJlbC5zbGljZShvZmYpKSk7XG4gICAgICAgICAgICByZXR1cm4gbGFiZWxFbHQ7XG4gICAgICAgIH0sXG4gICAgICAgIHBvc2l0aW9uOiA1MFxuICAgIH0sIHtcbiAgICAgICAgcmVuZGVyKGNvbXBsZXRpb24pIHtcbiAgICAgICAgICAgIGlmICghY29tcGxldGlvbi5kZXRhaWwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBsZXQgZGV0YWlsRWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgICAgICBkZXRhaWxFbHQuY2xhc3NOYW1lID0gXCJjbS1jb21wbGV0aW9uRGV0YWlsXCI7XG4gICAgICAgICAgICBkZXRhaWxFbHQudGV4dENvbnRlbnQgPSBjb21wbGV0aW9uLmRldGFpbDtcbiAgICAgICAgICAgIHJldHVybiBkZXRhaWxFbHQ7XG4gICAgICAgIH0sXG4gICAgICAgIHBvc2l0aW9uOiA4MFxuICAgIH0pO1xuICAgIHJldHVybiBjb250ZW50LnNvcnQoKGEsIGIpID0+IGEucG9zaXRpb24gLSBiLnBvc2l0aW9uKS5tYXAoYSA9PiBhLnJlbmRlcik7XG59XG5mdW5jdGlvbiByYW5nZUFyb3VuZFNlbGVjdGVkKHRvdGFsLCBzZWxlY3RlZCwgbWF4KSB7XG4gICAgaWYgKHRvdGFsIDw9IG1heClcbiAgICAgICAgcmV0dXJuIHsgZnJvbTogMCwgdG86IHRvdGFsIH07XG4gICAgaWYgKHNlbGVjdGVkIDwgMClcbiAgICAgICAgc2VsZWN0ZWQgPSAwO1xuICAgIGlmIChzZWxlY3RlZCA8PSAodG90YWwgPj4gMSkpIHtcbiAgICAgICAgbGV0IG9mZiA9IE1hdGguZmxvb3Ioc2VsZWN0ZWQgLyBtYXgpO1xuICAgICAgICByZXR1cm4geyBmcm9tOiBvZmYgKiBtYXgsIHRvOiAob2ZmICsgMSkgKiBtYXggfTtcbiAgICB9XG4gICAgbGV0IG9mZiA9IE1hdGguZmxvb3IoKHRvdGFsIC0gc2VsZWN0ZWQpIC8gbWF4KTtcbiAgICByZXR1cm4geyBmcm9tOiB0b3RhbCAtIChvZmYgKyAxKSAqIG1heCwgdG86IHRvdGFsIC0gb2ZmICogbWF4IH07XG59XG5jbGFzcyBDb21wbGV0aW9uVG9vbHRpcCB7XG4gICAgY29uc3RydWN0b3Iodmlldywgc3RhdGVGaWVsZCkge1xuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgICAgICB0aGlzLnN0YXRlRmllbGQgPSBzdGF0ZUZpZWxkO1xuICAgICAgICB0aGlzLmluZm8gPSBudWxsO1xuICAgICAgICB0aGlzLnBsYWNlSW5mbyA9IHtcbiAgICAgICAgICAgIHJlYWQ6ICgpID0+IHRoaXMubWVhc3VyZUluZm8oKSxcbiAgICAgICAgICAgIHdyaXRlOiAocG9zKSA9PiB0aGlzLnBvc2l0aW9uSW5mbyhwb3MpLFxuICAgICAgICAgICAga2V5OiB0aGlzXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc3BhY2UgPSBudWxsO1xuICAgICAgICBsZXQgY1N0YXRlID0gdmlldy5zdGF0ZS5maWVsZChzdGF0ZUZpZWxkKTtcbiAgICAgICAgbGV0IHsgb3B0aW9ucywgc2VsZWN0ZWQgfSA9IGNTdGF0ZS5vcGVuO1xuICAgICAgICBsZXQgY29uZmlnID0gdmlldy5zdGF0ZS5mYWNldChjb21wbGV0aW9uQ29uZmlnKTtcbiAgICAgICAgdGhpcy5vcHRpb25Db250ZW50ID0gb3B0aW9uQ29udGVudChjb25maWcpO1xuICAgICAgICB0aGlzLm9wdGlvbkNsYXNzID0gY29uZmlnLm9wdGlvbkNsYXNzO1xuICAgICAgICB0aGlzLnJhbmdlID0gcmFuZ2VBcm91bmRTZWxlY3RlZChvcHRpb25zLmxlbmd0aCwgc2VsZWN0ZWQsIGNvbmZpZy5tYXhSZW5kZXJlZE9wdGlvbnMpO1xuICAgICAgICB0aGlzLmRvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuZG9tLmNsYXNzTmFtZSA9IFwiY20tdG9vbHRpcC1hdXRvY29tcGxldGVcIjtcbiAgICAgICAgdGhpcy5kb20uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZSkgPT4ge1xuICAgICAgICAgICAgZm9yIChsZXQgZG9tID0gZS50YXJnZXQsIG1hdGNoOyBkb20gJiYgZG9tICE9IHRoaXMuZG9tOyBkb20gPSBkb20ucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgICAgIGlmIChkb20ubm9kZU5hbWUgPT0gXCJMSVwiICYmIChtYXRjaCA9IC8tKFxcZCspJC8uZXhlYyhkb20uaWQpKSAmJiArbWF0Y2hbMV0gPCBvcHRpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBhcHBseUNvbXBsZXRpb24odmlldywgb3B0aW9uc1srbWF0Y2hbMV1dKTtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5saXN0ID0gdGhpcy5kb20uYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVMaXN0Qm94KG9wdGlvbnMsIGNTdGF0ZS5pZCwgdGhpcy5yYW5nZSkpO1xuICAgICAgICB0aGlzLmxpc3QuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pbmZvKVxuICAgICAgICAgICAgICAgIHRoaXMudmlldy5yZXF1ZXN0TWVhc3VyZSh0aGlzLnBsYWNlSW5mbyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtb3VudCgpIHsgdGhpcy51cGRhdGVTZWwoKTsgfVxuICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIGxldCBjU3RhdGUgPSB1cGRhdGUuc3RhdGUuZmllbGQodGhpcy5zdGF0ZUZpZWxkKTtcbiAgICAgICAgbGV0IHByZXZTdGF0ZSA9IHVwZGF0ZS5zdGFydFN0YXRlLmZpZWxkKHRoaXMuc3RhdGVGaWVsZCk7XG4gICAgICAgIGlmIChjU3RhdGUgIT0gcHJldlN0YXRlKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNlbCgpO1xuICAgICAgICAgICAgaWYgKCgoX2EgPSBjU3RhdGUub3BlbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmRpc2FibGVkKSAhPSAoKF9iID0gcHJldlN0YXRlLm9wZW4pID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5kaXNhYmxlZCkpXG4gICAgICAgICAgICAgICAgdGhpcy5kb20uY2xhc3NMaXN0LnRvZ2dsZShcImNtLXRvb2x0aXAtYXV0b2NvbXBsZXRlLWRpc2FibGVkXCIsICEhKChfYyA9IGNTdGF0ZS5vcGVuKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MuZGlzYWJsZWQpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwb3NpdGlvbmVkKHNwYWNlKSB7XG4gICAgICAgIHRoaXMuc3BhY2UgPSBzcGFjZTtcbiAgICAgICAgaWYgKHRoaXMuaW5mbylcbiAgICAgICAgICAgIHRoaXMudmlldy5yZXF1ZXN0TWVhc3VyZSh0aGlzLnBsYWNlSW5mbyk7XG4gICAgfVxuICAgIHVwZGF0ZVNlbCgpIHtcbiAgICAgICAgbGV0IGNTdGF0ZSA9IHRoaXMudmlldy5zdGF0ZS5maWVsZCh0aGlzLnN0YXRlRmllbGQpLCBvcGVuID0gY1N0YXRlLm9wZW47XG4gICAgICAgIGlmIChvcGVuLnNlbGVjdGVkID4gLTEgJiYgb3Blbi5zZWxlY3RlZCA8IHRoaXMucmFuZ2UuZnJvbSB8fCBvcGVuLnNlbGVjdGVkID49IHRoaXMucmFuZ2UudG8pIHtcbiAgICAgICAgICAgIHRoaXMucmFuZ2UgPSByYW5nZUFyb3VuZFNlbGVjdGVkKG9wZW4ub3B0aW9ucy5sZW5ndGgsIG9wZW4uc2VsZWN0ZWQsIHRoaXMudmlldy5zdGF0ZS5mYWNldChjb21wbGV0aW9uQ29uZmlnKS5tYXhSZW5kZXJlZE9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5saXN0LnJlbW92ZSgpO1xuICAgICAgICAgICAgdGhpcy5saXN0ID0gdGhpcy5kb20uYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVMaXN0Qm94KG9wZW4ub3B0aW9ucywgY1N0YXRlLmlkLCB0aGlzLnJhbmdlKSk7XG4gICAgICAgICAgICB0aGlzLmxpc3QuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5mbylcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LnJlcXVlc3RNZWFzdXJlKHRoaXMucGxhY2VJbmZvKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnVwZGF0ZVNlbGVjdGVkT3B0aW9uKG9wZW4uc2VsZWN0ZWQpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pbmZvKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbmZvLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5mbyA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgeyBjb21wbGV0aW9uIH0gPSBvcGVuLm9wdGlvbnNbb3Blbi5zZWxlY3RlZF07XG4gICAgICAgICAgICBsZXQgeyBpbmZvIH0gPSBjb21wbGV0aW9uO1xuICAgICAgICAgICAgaWYgKCFpbmZvKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGxldCBpbmZvUmVzdWx0ID0gdHlwZW9mIGluZm8gPT09ICdzdHJpbmcnID8gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoaW5mbykgOiBpbmZvKGNvbXBsZXRpb24pO1xuICAgICAgICAgICAgaWYgKCFpbmZvUmVzdWx0KVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmICgndGhlbicgaW4gaW5mb1Jlc3VsdCkge1xuICAgICAgICAgICAgICAgIGluZm9SZXN1bHQudGhlbihub2RlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUgJiYgdGhpcy52aWV3LnN0YXRlLmZpZWxkKHRoaXMuc3RhdGVGaWVsZCwgZmFsc2UpID09IGNTdGF0ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkSW5mb1BhbmUobm9kZSk7XG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZSA9PiBsb2dFeGNlcHRpb24odGhpcy52aWV3LnN0YXRlLCBlLCBcImNvbXBsZXRpb24gaW5mb1wiKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEluZm9QYW5lKGluZm9SZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFkZEluZm9QYW5lKGNvbnRlbnQpIHtcbiAgICAgICAgbGV0IGRvbSA9IHRoaXMuaW5mbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGRvbS5jbGFzc05hbWUgPSBcImNtLXRvb2x0aXAgY20tY29tcGxldGlvbkluZm9cIjtcbiAgICAgICAgZG9tLmFwcGVuZENoaWxkKGNvbnRlbnQpO1xuICAgICAgICB0aGlzLmRvbS5hcHBlbmRDaGlsZChkb20pO1xuICAgICAgICB0aGlzLnZpZXcucmVxdWVzdE1lYXN1cmUodGhpcy5wbGFjZUluZm8pO1xuICAgIH1cbiAgICB1cGRhdGVTZWxlY3RlZE9wdGlvbihzZWxlY3RlZCkge1xuICAgICAgICBsZXQgc2V0ID0gbnVsbDtcbiAgICAgICAgZm9yIChsZXQgb3B0ID0gdGhpcy5saXN0LmZpcnN0Q2hpbGQsIGkgPSB0aGlzLnJhbmdlLmZyb207IG9wdDsgb3B0ID0gb3B0Lm5leHRTaWJsaW5nLCBpKyspIHtcbiAgICAgICAgICAgIGlmIChpID09IHNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvcHQuaGFzQXR0cmlidXRlKFwiYXJpYS1zZWxlY3RlZFwiKSkge1xuICAgICAgICAgICAgICAgICAgICBvcHQuc2V0QXR0cmlidXRlKFwiYXJpYS1zZWxlY3RlZFwiLCBcInRydWVcIik7XG4gICAgICAgICAgICAgICAgICAgIHNldCA9IG9wdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0Lmhhc0F0dHJpYnV0ZShcImFyaWEtc2VsZWN0ZWRcIikpXG4gICAgICAgICAgICAgICAgICAgIG9wdC5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLXNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzZXQpXG4gICAgICAgICAgICBzY3JvbGxJbnRvVmlldyh0aGlzLmxpc3QsIHNldCk7XG4gICAgICAgIHJldHVybiBzZXQ7XG4gICAgfVxuICAgIG1lYXN1cmVJbmZvKCkge1xuICAgICAgICBsZXQgc2VsID0gdGhpcy5kb20ucXVlcnlTZWxlY3RvcihcIlthcmlhLXNlbGVjdGVkXVwiKTtcbiAgICAgICAgaWYgKCFzZWwgfHwgIXRoaXMuaW5mbylcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBsZXQgbGlzdFJlY3QgPSB0aGlzLmRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgbGV0IGluZm9SZWN0ID0gdGhpcy5pbmZvLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBsZXQgc2VsUmVjdCA9IHNlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgbGV0IHNwYWNlID0gdGhpcy5zcGFjZTtcbiAgICAgICAgaWYgKCFzcGFjZSkge1xuICAgICAgICAgICAgbGV0IHdpbiA9IHRoaXMuZG9tLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcgfHwgd2luZG93O1xuICAgICAgICAgICAgc3BhY2UgPSB7IGxlZnQ6IDAsIHRvcDogMCwgcmlnaHQ6IHdpbi5pbm5lcldpZHRoLCBib3R0b206IHdpbi5pbm5lckhlaWdodCB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxSZWN0LnRvcCA+IE1hdGgubWluKHNwYWNlLmJvdHRvbSwgbGlzdFJlY3QuYm90dG9tKSAtIDEwIHx8XG4gICAgICAgICAgICBzZWxSZWN0LmJvdHRvbSA8IE1hdGgubWF4KHNwYWNlLnRvcCwgbGlzdFJlY3QudG9wKSArIDEwKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGxldCBydGwgPSB0aGlzLnZpZXcudGV4dERpcmVjdGlvbiA9PSBEaXJlY3Rpb24uUlRMLCBsZWZ0ID0gcnRsLCBuYXJyb3cgPSBmYWxzZSwgbWF4V2lkdGg7XG4gICAgICAgIGxldCB0b3AgPSBcIlwiLCBib3R0b20gPSBcIlwiO1xuICAgICAgICBsZXQgc3BhY2VMZWZ0ID0gbGlzdFJlY3QubGVmdCAtIHNwYWNlLmxlZnQsIHNwYWNlUmlnaHQgPSBzcGFjZS5yaWdodCAtIGxpc3RSZWN0LnJpZ2h0O1xuICAgICAgICBpZiAobGVmdCAmJiBzcGFjZUxlZnQgPCBNYXRoLm1pbihpbmZvUmVjdC53aWR0aCwgc3BhY2VSaWdodCkpXG4gICAgICAgICAgICBsZWZ0ID0gZmFsc2U7XG4gICAgICAgIGVsc2UgaWYgKCFsZWZ0ICYmIHNwYWNlUmlnaHQgPCBNYXRoLm1pbihpbmZvUmVjdC53aWR0aCwgc3BhY2VMZWZ0KSlcbiAgICAgICAgICAgIGxlZnQgPSB0cnVlO1xuICAgICAgICBpZiAoaW5mb1JlY3Qud2lkdGggPD0gKGxlZnQgPyBzcGFjZUxlZnQgOiBzcGFjZVJpZ2h0KSkge1xuICAgICAgICAgICAgdG9wID0gKE1hdGgubWF4KHNwYWNlLnRvcCwgTWF0aC5taW4oc2VsUmVjdC50b3AsIHNwYWNlLmJvdHRvbSAtIGluZm9SZWN0LmhlaWdodCkpIC0gbGlzdFJlY3QudG9wKSArIFwicHhcIjtcbiAgICAgICAgICAgIG1heFdpZHRoID0gTWF0aC5taW4oNDAwIC8qIEluZm8uV2lkdGggKi8sIGxlZnQgPyBzcGFjZUxlZnQgOiBzcGFjZVJpZ2h0KSArIFwicHhcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG5hcnJvdyA9IHRydWU7XG4gICAgICAgICAgICBtYXhXaWR0aCA9IE1hdGgubWluKDQwMCAvKiBJbmZvLldpZHRoICovLCAocnRsID8gbGlzdFJlY3QucmlnaHQgOiBzcGFjZS5yaWdodCAtIGxpc3RSZWN0LmxlZnQpIC0gMzAgLyogSW5mby5NYXJnaW4gKi8pICsgXCJweFwiO1xuICAgICAgICAgICAgbGV0IHNwYWNlQmVsb3cgPSBzcGFjZS5ib3R0b20gLSBsaXN0UmVjdC5ib3R0b207XG4gICAgICAgICAgICBpZiAoc3BhY2VCZWxvdyA+PSBpbmZvUmVjdC5oZWlnaHQgfHwgc3BhY2VCZWxvdyA+IGxpc3RSZWN0LnRvcCkgLy8gQmVsb3cgdGhlIGNvbXBsZXRpb25cbiAgICAgICAgICAgICAgICB0b3AgPSAoc2VsUmVjdC5ib3R0b20gLSBsaXN0UmVjdC50b3ApICsgXCJweFwiO1xuICAgICAgICAgICAgZWxzZSAvLyBBYm92ZSBpdFxuICAgICAgICAgICAgICAgIGJvdHRvbSA9IChsaXN0UmVjdC5ib3R0b20gLSBzZWxSZWN0LnRvcCkgKyBcInB4XCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRvcCwgYm90dG9tLCBtYXhXaWR0aCxcbiAgICAgICAgICAgIGNsYXNzOiBuYXJyb3cgPyAocnRsID8gXCJsZWZ0LW5hcnJvd1wiIDogXCJyaWdodC1uYXJyb3dcIikgOiBsZWZ0ID8gXCJsZWZ0XCIgOiBcInJpZ2h0XCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHBvc2l0aW9uSW5mbyhwb3MpIHtcbiAgICAgICAgaWYgKHRoaXMuaW5mbykge1xuICAgICAgICAgICAgaWYgKHBvcykge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5mby5zdHlsZS50b3AgPSBwb3MudG9wO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5mby5zdHlsZS5ib3R0b20gPSBwb3MuYm90dG9tO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5mby5zdHlsZS5tYXhXaWR0aCA9IHBvcy5tYXhXaWR0aDtcbiAgICAgICAgICAgICAgICB0aGlzLmluZm8uY2xhc3NOYW1lID0gXCJjbS10b29sdGlwIGNtLWNvbXBsZXRpb25JbmZvIGNtLWNvbXBsZXRpb25JbmZvLVwiICsgcG9zLmNsYXNzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbmZvLnN0eWxlLnRvcCA9IFwiLTFlNnB4XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY3JlYXRlTGlzdEJveChvcHRpb25zLCBpZCwgcmFuZ2UpIHtcbiAgICAgICAgY29uc3QgdWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidWxcIik7XG4gICAgICAgIHVsLmlkID0gaWQ7XG4gICAgICAgIHVsLnNldEF0dHJpYnV0ZShcInJvbGVcIiwgXCJsaXN0Ym94XCIpO1xuICAgICAgICB1bC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWV4cGFuZGVkXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgdWwuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCB0aGlzLnZpZXcuc3RhdGUucGhyYXNlKFwiQ29tcGxldGlvbnNcIikpO1xuICAgICAgICBmb3IgKGxldCBpID0gcmFuZ2UuZnJvbTsgaSA8IHJhbmdlLnRvOyBpKyspIHtcbiAgICAgICAgICAgIGxldCB7IGNvbXBsZXRpb24sIG1hdGNoIH0gPSBvcHRpb25zW2ldO1xuICAgICAgICAgICAgY29uc3QgbGkgPSB1bC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIikpO1xuICAgICAgICAgICAgbGkuaWQgPSBpZCArIFwiLVwiICsgaTtcbiAgICAgICAgICAgIGxpLnNldEF0dHJpYnV0ZShcInJvbGVcIiwgXCJvcHRpb25cIik7XG4gICAgICAgICAgICBsZXQgY2xzID0gdGhpcy5vcHRpb25DbGFzcyhjb21wbGV0aW9uKTtcbiAgICAgICAgICAgIGlmIChjbHMpXG4gICAgICAgICAgICAgICAgbGkuY2xhc3NOYW1lID0gY2xzO1xuICAgICAgICAgICAgZm9yIChsZXQgc291cmNlIG9mIHRoaXMub3B0aW9uQ29udGVudCkge1xuICAgICAgICAgICAgICAgIGxldCBub2RlID0gc291cmNlKGNvbXBsZXRpb24sIHRoaXMudmlldy5zdGF0ZSwgbWF0Y2gpO1xuICAgICAgICAgICAgICAgIGlmIChub2RlKVxuICAgICAgICAgICAgICAgICAgICBsaS5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocmFuZ2UuZnJvbSlcbiAgICAgICAgICAgIHVsLmNsYXNzTGlzdC5hZGQoXCJjbS1jb21wbGV0aW9uTGlzdEluY29tcGxldGVUb3BcIik7XG4gICAgICAgIGlmIChyYW5nZS50byA8IG9wdGlvbnMubGVuZ3RoKVxuICAgICAgICAgICAgdWwuY2xhc3NMaXN0LmFkZChcImNtLWNvbXBsZXRpb25MaXN0SW5jb21wbGV0ZUJvdHRvbVwiKTtcbiAgICAgICAgcmV0dXJuIHVsO1xuICAgIH1cbn1cbi8vIFdlIGFsbG9jYXRlIGEgbmV3IGZ1bmN0aW9uIGluc3RhbmNlIGV2ZXJ5IHRpbWUgdGhlIGNvbXBsZXRpb25cbi8vIGNoYW5nZXMgdG8gZm9yY2UgcmVkcmF3aW5nL3JlcG9zaXRpb25pbmcgb2YgdGhlIHRvb2x0aXBcbmZ1bmN0aW9uIGNvbXBsZXRpb25Ub29sdGlwKHN0YXRlRmllbGQpIHtcbiAgICByZXR1cm4gKHZpZXcpID0+IG5ldyBDb21wbGV0aW9uVG9vbHRpcCh2aWV3LCBzdGF0ZUZpZWxkKTtcbn1cbmZ1bmN0aW9uIHNjcm9sbEludG9WaWV3KGNvbnRhaW5lciwgZWxlbWVudCkge1xuICAgIGxldCBwYXJlbnQgPSBjb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgbGV0IHNlbGYgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGlmIChzZWxmLnRvcCA8IHBhcmVudC50b3ApXG4gICAgICAgIGNvbnRhaW5lci5zY3JvbGxUb3AgLT0gcGFyZW50LnRvcCAtIHNlbGYudG9wO1xuICAgIGVsc2UgaWYgKHNlbGYuYm90dG9tID4gcGFyZW50LmJvdHRvbSlcbiAgICAgICAgY29udGFpbmVyLnNjcm9sbFRvcCArPSBzZWxmLmJvdHRvbSAtIHBhcmVudC5ib3R0b207XG59XG5cbi8vIFVzZWQgdG8gcGljayBhIHByZWZlcnJlZCBvcHRpb24gd2hlbiB0d28gb3B0aW9ucyB3aXRoIHRoZSBzYW1lXG4vLyBsYWJlbCBvY2N1ciBpbiB0aGUgcmVzdWx0LlxuZnVuY3Rpb24gc2NvcmUob3B0aW9uKSB7XG4gICAgcmV0dXJuIChvcHRpb24uYm9vc3QgfHwgMCkgKiAxMDAgKyAob3B0aW9uLmFwcGx5ID8gMTAgOiAwKSArIChvcHRpb24uaW5mbyA/IDUgOiAwKSArXG4gICAgICAgIChvcHRpb24udHlwZSA/IDEgOiAwKTtcbn1cbmZ1bmN0aW9uIHNvcnRPcHRpb25zKGFjdGl2ZSwgc3RhdGUpIHtcbiAgICBsZXQgb3B0aW9ucyA9IFtdLCBpID0gMDtcbiAgICBmb3IgKGxldCBhIG9mIGFjdGl2ZSlcbiAgICAgICAgaWYgKGEuaGFzUmVzdWx0KCkpIHtcbiAgICAgICAgICAgIGlmIChhLnJlc3VsdC5maWx0ZXIgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgbGV0IGdldE1hdGNoID0gYS5yZXN1bHQuZ2V0TWF0Y2g7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgb3B0aW9uIG9mIGEucmVzdWx0Lm9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1hdGNoID0gWzFlOSAtIGkrK107XG4gICAgICAgICAgICAgICAgICAgIGlmIChnZXRNYXRjaClcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IG4gb2YgZ2V0TWF0Y2gob3B0aW9uKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaC5wdXNoKG4pO1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnB1c2gobmV3IE9wdGlvbihvcHRpb24sIGEsIG1hdGNoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IG1hdGNoZXIgPSBuZXcgRnV6enlNYXRjaGVyKHN0YXRlLnNsaWNlRG9jKGEuZnJvbSwgYS50bykpLCBtYXRjaDtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBvcHRpb24gb2YgYS5yZXN1bHQub3B0aW9ucylcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoID0gbWF0Y2hlci5tYXRjaChvcHRpb24ubGFiZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9uLmJvb3N0ICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hbMF0gKz0gb3B0aW9uLmJvb3N0O1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5wdXNoKG5ldyBPcHRpb24ob3B0aW9uLCBhLCBtYXRjaCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICBsZXQgcmVzdWx0ID0gW10sIHByZXYgPSBudWxsO1xuICAgIGxldCBjb21wYXJlID0gc3RhdGUuZmFjZXQoY29tcGxldGlvbkNvbmZpZykuY29tcGFyZUNvbXBsZXRpb25zO1xuICAgIGZvciAobGV0IG9wdCBvZiBvcHRpb25zLnNvcnQoKGEsIGIpID0+IChiLm1hdGNoWzBdIC0gYS5tYXRjaFswXSkgfHwgY29tcGFyZShhLmNvbXBsZXRpb24sIGIuY29tcGxldGlvbikpKSB7XG4gICAgICAgIGlmICghcHJldiB8fCBwcmV2LmxhYmVsICE9IG9wdC5jb21wbGV0aW9uLmxhYmVsIHx8IHByZXYuZGV0YWlsICE9IG9wdC5jb21wbGV0aW9uLmRldGFpbCB8fFxuICAgICAgICAgICAgKHByZXYudHlwZSAhPSBudWxsICYmIG9wdC5jb21wbGV0aW9uLnR5cGUgIT0gbnVsbCAmJiBwcmV2LnR5cGUgIT0gb3B0LmNvbXBsZXRpb24udHlwZSkgfHxcbiAgICAgICAgICAgIHByZXYuYXBwbHkgIT0gb3B0LmNvbXBsZXRpb24uYXBwbHkpXG4gICAgICAgICAgICByZXN1bHQucHVzaChvcHQpO1xuICAgICAgICBlbHNlIGlmIChzY29yZShvcHQuY29tcGxldGlvbikgPiBzY29yZShwcmV2KSlcbiAgICAgICAgICAgIHJlc3VsdFtyZXN1bHQubGVuZ3RoIC0gMV0gPSBvcHQ7XG4gICAgICAgIHByZXYgPSBvcHQuY29tcGxldGlvbjtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmNsYXNzIENvbXBsZXRpb25EaWFsb2cge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGF0dHJzLCB0b29sdGlwLCB0aW1lc3RhbXAsIHNlbGVjdGVkLCBkaXNhYmxlZCkge1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLmF0dHJzID0gYXR0cnM7XG4gICAgICAgIHRoaXMudG9vbHRpcCA9IHRvb2x0aXA7XG4gICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wO1xuICAgICAgICB0aGlzLnNlbGVjdGVkID0gc2VsZWN0ZWQ7XG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBkaXNhYmxlZDtcbiAgICB9XG4gICAgc2V0U2VsZWN0ZWQoc2VsZWN0ZWQsIGlkKSB7XG4gICAgICAgIHJldHVybiBzZWxlY3RlZCA9PSB0aGlzLnNlbGVjdGVkIHx8IHNlbGVjdGVkID49IHRoaXMub3B0aW9ucy5sZW5ndGggPyB0aGlzXG4gICAgICAgICAgICA6IG5ldyBDb21wbGV0aW9uRGlhbG9nKHRoaXMub3B0aW9ucywgbWFrZUF0dHJzKGlkLCBzZWxlY3RlZCksIHRoaXMudG9vbHRpcCwgdGhpcy50aW1lc3RhbXAsIHNlbGVjdGVkLCB0aGlzLmRpc2FibGVkKTtcbiAgICB9XG4gICAgc3RhdGljIGJ1aWxkKGFjdGl2ZSwgc3RhdGUsIGlkLCBwcmV2LCBjb25mKSB7XG4gICAgICAgIGxldCBvcHRpb25zID0gc29ydE9wdGlvbnMoYWN0aXZlLCBzdGF0ZSk7XG4gICAgICAgIGlmICghb3B0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBwcmV2ICYmIGFjdGl2ZS5zb21lKGEgPT4gYS5zdGF0ZSA9PSAxIC8qIFN0YXRlLlBlbmRpbmcgKi8pID9cbiAgICAgICAgICAgICAgICBuZXcgQ29tcGxldGlvbkRpYWxvZyhwcmV2Lm9wdGlvbnMsIHByZXYuYXR0cnMsIHByZXYudG9vbHRpcCwgcHJldi50aW1lc3RhbXAsIHByZXYuc2VsZWN0ZWQsIHRydWUpIDogbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc2VsZWN0ZWQgPSBzdGF0ZS5mYWNldChjb21wbGV0aW9uQ29uZmlnKS5zZWxlY3RPbk9wZW4gPyAwIDogLTE7XG4gICAgICAgIGlmIChwcmV2ICYmIHByZXYuc2VsZWN0ZWQgIT0gc2VsZWN0ZWQgJiYgcHJldi5zZWxlY3RlZCAhPSAtMSkge1xuICAgICAgICAgICAgbGV0IHNlbGVjdGVkVmFsdWUgPSBwcmV2Lm9wdGlvbnNbcHJldi5zZWxlY3RlZF0uY29tcGxldGlvbjtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3B0aW9ucy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uc1tpXS5jb21wbGV0aW9uID09IHNlbGVjdGVkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQgPSBpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBDb21wbGV0aW9uRGlhbG9nKG9wdGlvbnMsIG1ha2VBdHRycyhpZCwgc2VsZWN0ZWQpLCB7XG4gICAgICAgICAgICBwb3M6IGFjdGl2ZS5yZWR1Y2UoKGEsIGIpID0+IGIuaGFzUmVzdWx0KCkgPyBNYXRoLm1pbihhLCBiLmZyb20pIDogYSwgMWU4KSxcbiAgICAgICAgICAgIGNyZWF0ZTogY29tcGxldGlvblRvb2x0aXAoY29tcGxldGlvblN0YXRlKSxcbiAgICAgICAgICAgIGFib3ZlOiBjb25mLmFib3ZlQ3Vyc29yLFxuICAgICAgICB9LCBwcmV2ID8gcHJldi50aW1lc3RhbXAgOiBEYXRlLm5vdygpLCBzZWxlY3RlZCwgZmFsc2UpO1xuICAgIH1cbiAgICBtYXAoY2hhbmdlcykge1xuICAgICAgICByZXR1cm4gbmV3IENvbXBsZXRpb25EaWFsb2codGhpcy5vcHRpb25zLCB0aGlzLmF0dHJzLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMudG9vbHRpcCksIHsgcG9zOiBjaGFuZ2VzLm1hcFBvcyh0aGlzLnRvb2x0aXAucG9zKSB9KSwgdGhpcy50aW1lc3RhbXAsIHRoaXMuc2VsZWN0ZWQsIHRoaXMuZGlzYWJsZWQpO1xuICAgIH1cbn1cbmNsYXNzIENvbXBsZXRpb25TdGF0ZSB7XG4gICAgY29uc3RydWN0b3IoYWN0aXZlLCBpZCwgb3Blbikge1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IGFjdGl2ZTtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLm9wZW4gPSBvcGVuO1xuICAgIH1cbiAgICBzdGF0aWMgc3RhcnQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29tcGxldGlvblN0YXRlKG5vbmUsIFwiY20tYWMtXCIgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyZTYpLnRvU3RyaW5nKDM2KSwgbnVsbCk7XG4gICAgfVxuICAgIHVwZGF0ZSh0cikge1xuICAgICAgICBsZXQgeyBzdGF0ZSB9ID0gdHIsIGNvbmYgPSBzdGF0ZS5mYWNldChjb21wbGV0aW9uQ29uZmlnKTtcbiAgICAgICAgbGV0IHNvdXJjZXMgPSBjb25mLm92ZXJyaWRlIHx8XG4gICAgICAgICAgICBzdGF0ZS5sYW5ndWFnZURhdGFBdChcImF1dG9jb21wbGV0ZVwiLCBjdXIoc3RhdGUpKS5tYXAoYXNTb3VyY2UpO1xuICAgICAgICBsZXQgYWN0aXZlID0gc291cmNlcy5tYXAoc291cmNlID0+IHtcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IHRoaXMuYWN0aXZlLmZpbmQocyA9PiBzLnNvdXJjZSA9PSBzb3VyY2UpIHx8XG4gICAgICAgICAgICAgICAgbmV3IEFjdGl2ZVNvdXJjZShzb3VyY2UsIHRoaXMuYWN0aXZlLnNvbWUoYSA9PiBhLnN0YXRlICE9IDAgLyogU3RhdGUuSW5hY3RpdmUgKi8pID8gMSAvKiBTdGF0ZS5QZW5kaW5nICovIDogMCAvKiBTdGF0ZS5JbmFjdGl2ZSAqLyk7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUudXBkYXRlKHRyLCBjb25mKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChhY3RpdmUubGVuZ3RoID09IHRoaXMuYWN0aXZlLmxlbmd0aCAmJiBhY3RpdmUuZXZlcnkoKGEsIGkpID0+IGEgPT0gdGhpcy5hY3RpdmVbaV0pKVxuICAgICAgICAgICAgYWN0aXZlID0gdGhpcy5hY3RpdmU7XG4gICAgICAgIGxldCBvcGVuID0gdGhpcy5vcGVuO1xuICAgICAgICBpZiAodHIuc2VsZWN0aW9uIHx8IGFjdGl2ZS5zb21lKGEgPT4gYS5oYXNSZXN1bHQoKSAmJiB0ci5jaGFuZ2VzLnRvdWNoZXNSYW5nZShhLmZyb20sIGEudG8pKSB8fFxuICAgICAgICAgICAgIXNhbWVSZXN1bHRzKGFjdGl2ZSwgdGhpcy5hY3RpdmUpKVxuICAgICAgICAgICAgb3BlbiA9IENvbXBsZXRpb25EaWFsb2cuYnVpbGQoYWN0aXZlLCBzdGF0ZSwgdGhpcy5pZCwgdGhpcy5vcGVuLCBjb25mKTtcbiAgICAgICAgZWxzZSBpZiAob3BlbiAmJiBvcGVuLmRpc2FibGVkICYmICFhY3RpdmUuc29tZShhID0+IGEuc3RhdGUgPT0gMSAvKiBTdGF0ZS5QZW5kaW5nICovKSlcbiAgICAgICAgICAgIG9wZW4gPSBudWxsO1xuICAgICAgICBlbHNlIGlmIChvcGVuICYmIHRyLmRvY0NoYW5nZWQpXG4gICAgICAgICAgICBvcGVuID0gb3Blbi5tYXAodHIuY2hhbmdlcyk7XG4gICAgICAgIGlmICghb3BlbiAmJiBhY3RpdmUuZXZlcnkoYSA9PiBhLnN0YXRlICE9IDEgLyogU3RhdGUuUGVuZGluZyAqLykgJiYgYWN0aXZlLnNvbWUoYSA9PiBhLmhhc1Jlc3VsdCgpKSlcbiAgICAgICAgICAgIGFjdGl2ZSA9IGFjdGl2ZS5tYXAoYSA9PiBhLmhhc1Jlc3VsdCgpID8gbmV3IEFjdGl2ZVNvdXJjZShhLnNvdXJjZSwgMCAvKiBTdGF0ZS5JbmFjdGl2ZSAqLykgOiBhKTtcbiAgICAgICAgZm9yIChsZXQgZWZmZWN0IG9mIHRyLmVmZmVjdHMpXG4gICAgICAgICAgICBpZiAoZWZmZWN0LmlzKHNldFNlbGVjdGVkRWZmZWN0KSlcbiAgICAgICAgICAgICAgICBvcGVuID0gb3BlbiAmJiBvcGVuLnNldFNlbGVjdGVkKGVmZmVjdC52YWx1ZSwgdGhpcy5pZCk7XG4gICAgICAgIHJldHVybiBhY3RpdmUgPT0gdGhpcy5hY3RpdmUgJiYgb3BlbiA9PSB0aGlzLm9wZW4gPyB0aGlzIDogbmV3IENvbXBsZXRpb25TdGF0ZShhY3RpdmUsIHRoaXMuaWQsIG9wZW4pO1xuICAgIH1cbiAgICBnZXQgdG9vbHRpcCgpIHsgcmV0dXJuIHRoaXMub3BlbiA/IHRoaXMub3Blbi50b29sdGlwIDogbnVsbDsgfVxuICAgIGdldCBhdHRycygpIHsgcmV0dXJuIHRoaXMub3BlbiA/IHRoaXMub3Blbi5hdHRycyA6IGJhc2VBdHRyczsgfVxufVxuZnVuY3Rpb24gc2FtZVJlc3VsdHMoYSwgYikge1xuICAgIGlmIChhID09IGIpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGZvciAobGV0IGlBID0gMCwgaUIgPSAwOzspIHtcbiAgICAgICAgd2hpbGUgKGlBIDwgYS5sZW5ndGggJiYgIWFbaUFdLmhhc1Jlc3VsdClcbiAgICAgICAgICAgIGlBKys7XG4gICAgICAgIHdoaWxlIChpQiA8IGIubGVuZ3RoICYmICFiW2lCXS5oYXNSZXN1bHQpXG4gICAgICAgICAgICBpQisrO1xuICAgICAgICBsZXQgZW5kQSA9IGlBID09IGEubGVuZ3RoLCBlbmRCID0gaUIgPT0gYi5sZW5ndGg7XG4gICAgICAgIGlmIChlbmRBIHx8IGVuZEIpXG4gICAgICAgICAgICByZXR1cm4gZW5kQSA9PSBlbmRCO1xuICAgICAgICBpZiAoYVtpQSsrXS5yZXN1bHQgIT0gYltpQisrXS5yZXN1bHQpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuY29uc3QgYmFzZUF0dHJzID0ge1xuICAgIFwiYXJpYS1hdXRvY29tcGxldGVcIjogXCJsaXN0XCJcbn07XG5mdW5jdGlvbiBtYWtlQXR0cnMoaWQsIHNlbGVjdGVkKSB7XG4gICAgbGV0IHJlc3VsdCA9IHtcbiAgICAgICAgXCJhcmlhLWF1dG9jb21wbGV0ZVwiOiBcImxpc3RcIixcbiAgICAgICAgXCJhcmlhLWhhc3BvcHVwXCI6IFwibGlzdGJveFwiLFxuICAgICAgICBcImFyaWEtY29udHJvbHNcIjogaWRcbiAgICB9O1xuICAgIGlmIChzZWxlY3RlZCA+IC0xKVxuICAgICAgICByZXN1bHRbXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIl0gPSBpZCArIFwiLVwiICsgc2VsZWN0ZWQ7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmNvbnN0IG5vbmUgPSBbXTtcbmZ1bmN0aW9uIGdldFVzZXJFdmVudCh0cikge1xuICAgIHJldHVybiB0ci5pc1VzZXJFdmVudChcImlucHV0LnR5cGVcIikgPyBcImlucHV0XCIgOiB0ci5pc1VzZXJFdmVudChcImRlbGV0ZS5iYWNrd2FyZFwiKSA/IFwiZGVsZXRlXCIgOiBudWxsO1xufVxuY2xhc3MgQWN0aXZlU291cmNlIHtcbiAgICBjb25zdHJ1Y3Rvcihzb3VyY2UsIHN0YXRlLCBleHBsaWNpdFBvcyA9IC0xKSB7XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgICAgIHRoaXMuZXhwbGljaXRQb3MgPSBleHBsaWNpdFBvcztcbiAgICB9XG4gICAgaGFzUmVzdWx0KCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICB1cGRhdGUodHIsIGNvbmYpIHtcbiAgICAgICAgbGV0IGV2ZW50ID0gZ2V0VXNlckV2ZW50KHRyKSwgdmFsdWUgPSB0aGlzO1xuICAgICAgICBpZiAoZXZlbnQpXG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLmhhbmRsZVVzZXJFdmVudCh0ciwgZXZlbnQsIGNvbmYpO1xuICAgICAgICBlbHNlIGlmICh0ci5kb2NDaGFuZ2VkKVxuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5oYW5kbGVDaGFuZ2UodHIpO1xuICAgICAgICBlbHNlIGlmICh0ci5zZWxlY3Rpb24gJiYgdmFsdWUuc3RhdGUgIT0gMCAvKiBTdGF0ZS5JbmFjdGl2ZSAqLylcbiAgICAgICAgICAgIHZhbHVlID0gbmV3IEFjdGl2ZVNvdXJjZSh2YWx1ZS5zb3VyY2UsIDAgLyogU3RhdGUuSW5hY3RpdmUgKi8pO1xuICAgICAgICBmb3IgKGxldCBlZmZlY3Qgb2YgdHIuZWZmZWN0cykge1xuICAgICAgICAgICAgaWYgKGVmZmVjdC5pcyhzdGFydENvbXBsZXRpb25FZmZlY3QpKVxuICAgICAgICAgICAgICAgIHZhbHVlID0gbmV3IEFjdGl2ZVNvdXJjZSh2YWx1ZS5zb3VyY2UsIDEgLyogU3RhdGUuUGVuZGluZyAqLywgZWZmZWN0LnZhbHVlID8gY3VyKHRyLnN0YXRlKSA6IC0xKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGVmZmVjdC5pcyhjbG9zZUNvbXBsZXRpb25FZmZlY3QpKVxuICAgICAgICAgICAgICAgIHZhbHVlID0gbmV3IEFjdGl2ZVNvdXJjZSh2YWx1ZS5zb3VyY2UsIDAgLyogU3RhdGUuSW5hY3RpdmUgKi8pO1xuICAgICAgICAgICAgZWxzZSBpZiAoZWZmZWN0LmlzKHNldEFjdGl2ZUVmZmVjdCkpXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgYWN0aXZlIG9mIGVmZmVjdC52YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZS5zb3VyY2UgPT0gdmFsdWUuc291cmNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBhY3RpdmU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBoYW5kbGVVc2VyRXZlbnQodHIsIHR5cGUsIGNvbmYpIHtcbiAgICAgICAgcmV0dXJuIHR5cGUgPT0gXCJkZWxldGVcIiB8fCAhY29uZi5hY3RpdmF0ZU9uVHlwaW5nID8gdGhpcy5tYXAodHIuY2hhbmdlcykgOiBuZXcgQWN0aXZlU291cmNlKHRoaXMuc291cmNlLCAxIC8qIFN0YXRlLlBlbmRpbmcgKi8pO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UodHIpIHtcbiAgICAgICAgcmV0dXJuIHRyLmNoYW5nZXMudG91Y2hlc1JhbmdlKGN1cih0ci5zdGFydFN0YXRlKSkgPyBuZXcgQWN0aXZlU291cmNlKHRoaXMuc291cmNlLCAwIC8qIFN0YXRlLkluYWN0aXZlICovKSA6IHRoaXMubWFwKHRyLmNoYW5nZXMpO1xuICAgIH1cbiAgICBtYXAoY2hhbmdlcykge1xuICAgICAgICByZXR1cm4gY2hhbmdlcy5lbXB0eSB8fCB0aGlzLmV4cGxpY2l0UG9zIDwgMCA/IHRoaXMgOiBuZXcgQWN0aXZlU291cmNlKHRoaXMuc291cmNlLCB0aGlzLnN0YXRlLCBjaGFuZ2VzLm1hcFBvcyh0aGlzLmV4cGxpY2l0UG9zKSk7XG4gICAgfVxufVxuY2xhc3MgQWN0aXZlUmVzdWx0IGV4dGVuZHMgQWN0aXZlU291cmNlIHtcbiAgICBjb25zdHJ1Y3Rvcihzb3VyY2UsIGV4cGxpY2l0UG9zLCByZXN1bHQsIGZyb20sIHRvKSB7XG4gICAgICAgIHN1cGVyKHNvdXJjZSwgMiAvKiBTdGF0ZS5SZXN1bHQgKi8sIGV4cGxpY2l0UG9zKTtcbiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICB9XG4gICAgaGFzUmVzdWx0KCkgeyByZXR1cm4gdHJ1ZTsgfVxuICAgIGhhbmRsZVVzZXJFdmVudCh0ciwgdHlwZSwgY29uZikge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGxldCBmcm9tID0gdHIuY2hhbmdlcy5tYXBQb3ModGhpcy5mcm9tKSwgdG8gPSB0ci5jaGFuZ2VzLm1hcFBvcyh0aGlzLnRvLCAxKTtcbiAgICAgICAgbGV0IHBvcyA9IGN1cih0ci5zdGF0ZSk7XG4gICAgICAgIGlmICgodGhpcy5leHBsaWNpdFBvcyA8IDAgPyBwb3MgPD0gZnJvbSA6IHBvcyA8IHRoaXMuZnJvbSkgfHxcbiAgICAgICAgICAgIHBvcyA+IHRvIHx8XG4gICAgICAgICAgICB0eXBlID09IFwiZGVsZXRlXCIgJiYgY3VyKHRyLnN0YXJ0U3RhdGUpID09IHRoaXMuZnJvbSlcbiAgICAgICAgICAgIHJldHVybiBuZXcgQWN0aXZlU291cmNlKHRoaXMuc291cmNlLCB0eXBlID09IFwiaW5wdXRcIiAmJiBjb25mLmFjdGl2YXRlT25UeXBpbmcgPyAxIC8qIFN0YXRlLlBlbmRpbmcgKi8gOiAwIC8qIFN0YXRlLkluYWN0aXZlICovKTtcbiAgICAgICAgbGV0IGV4cGxpY2l0UG9zID0gdGhpcy5leHBsaWNpdFBvcyA8IDAgPyAtMSA6IHRyLmNoYW5nZXMubWFwUG9zKHRoaXMuZXhwbGljaXRQb3MpLCB1cGRhdGVkO1xuICAgICAgICBpZiAoY2hlY2tWYWxpZCh0aGlzLnJlc3VsdC52YWxpZEZvciwgdHIuc3RhdGUsIGZyb20sIHRvKSlcbiAgICAgICAgICAgIHJldHVybiBuZXcgQWN0aXZlUmVzdWx0KHRoaXMuc291cmNlLCBleHBsaWNpdFBvcywgdGhpcy5yZXN1bHQsIGZyb20sIHRvKTtcbiAgICAgICAgaWYgKHRoaXMucmVzdWx0LnVwZGF0ZSAmJlxuICAgICAgICAgICAgKHVwZGF0ZWQgPSB0aGlzLnJlc3VsdC51cGRhdGUodGhpcy5yZXN1bHQsIGZyb20sIHRvLCBuZXcgQ29tcGxldGlvbkNvbnRleHQodHIuc3RhdGUsIHBvcywgZXhwbGljaXRQb3MgPj0gMCkpKSlcbiAgICAgICAgICAgIHJldHVybiBuZXcgQWN0aXZlUmVzdWx0KHRoaXMuc291cmNlLCBleHBsaWNpdFBvcywgdXBkYXRlZCwgdXBkYXRlZC5mcm9tLCAoX2EgPSB1cGRhdGVkLnRvKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBjdXIodHIuc3RhdGUpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBBY3RpdmVTb3VyY2UodGhpcy5zb3VyY2UsIDEgLyogU3RhdGUuUGVuZGluZyAqLywgZXhwbGljaXRQb3MpO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UodHIpIHtcbiAgICAgICAgcmV0dXJuIHRyLmNoYW5nZXMudG91Y2hlc1JhbmdlKHRoaXMuZnJvbSwgdGhpcy50bykgPyBuZXcgQWN0aXZlU291cmNlKHRoaXMuc291cmNlLCAwIC8qIFN0YXRlLkluYWN0aXZlICovKSA6IHRoaXMubWFwKHRyLmNoYW5nZXMpO1xuICAgIH1cbiAgICBtYXAobWFwcGluZykge1xuICAgICAgICByZXR1cm4gbWFwcGluZy5lbXB0eSA/IHRoaXMgOlxuICAgICAgICAgICAgbmV3IEFjdGl2ZVJlc3VsdCh0aGlzLnNvdXJjZSwgdGhpcy5leHBsaWNpdFBvcyA8IDAgPyAtMSA6IG1hcHBpbmcubWFwUG9zKHRoaXMuZXhwbGljaXRQb3MpLCB0aGlzLnJlc3VsdCwgbWFwcGluZy5tYXBQb3ModGhpcy5mcm9tKSwgbWFwcGluZy5tYXBQb3ModGhpcy50bywgMSkpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNoZWNrVmFsaWQodmFsaWRGb3IsIHN0YXRlLCBmcm9tLCB0bykge1xuICAgIGlmICghdmFsaWRGb3IpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgdGV4dCA9IHN0YXRlLnNsaWNlRG9jKGZyb20sIHRvKTtcbiAgICByZXR1cm4gdHlwZW9mIHZhbGlkRm9yID09IFwiZnVuY3Rpb25cIiA/IHZhbGlkRm9yKHRleHQsIGZyb20sIHRvLCBzdGF0ZSkgOiBlbnN1cmVBbmNob3IodmFsaWRGb3IsIHRydWUpLnRlc3QodGV4dCk7XG59XG5jb25zdCBzdGFydENvbXBsZXRpb25FZmZlY3QgPSAvKkBfX1BVUkVfXyovU3RhdGVFZmZlY3QuZGVmaW5lKCk7XG5jb25zdCBjbG9zZUNvbXBsZXRpb25FZmZlY3QgPSAvKkBfX1BVUkVfXyovU3RhdGVFZmZlY3QuZGVmaW5lKCk7XG5jb25zdCBzZXRBY3RpdmVFZmZlY3QgPSAvKkBfX1BVUkVfXyovU3RhdGVFZmZlY3QuZGVmaW5lKHtcbiAgICBtYXAoc291cmNlcywgbWFwcGluZykgeyByZXR1cm4gc291cmNlcy5tYXAocyA9PiBzLm1hcChtYXBwaW5nKSk7IH1cbn0pO1xuY29uc3Qgc2V0U2VsZWN0ZWRFZmZlY3QgPSAvKkBfX1BVUkVfXyovU3RhdGVFZmZlY3QuZGVmaW5lKCk7XG5jb25zdCBjb21wbGV0aW9uU3RhdGUgPSAvKkBfX1BVUkVfXyovU3RhdGVGaWVsZC5kZWZpbmUoe1xuICAgIGNyZWF0ZSgpIHsgcmV0dXJuIENvbXBsZXRpb25TdGF0ZS5zdGFydCgpOyB9LFxuICAgIHVwZGF0ZSh2YWx1ZSwgdHIpIHsgcmV0dXJuIHZhbHVlLnVwZGF0ZSh0cik7IH0sXG4gICAgcHJvdmlkZTogZiA9PiBbXG4gICAgICAgIHNob3dUb29sdGlwLmZyb20oZiwgdmFsID0+IHZhbC50b29sdGlwKSxcbiAgICAgICAgRWRpdG9yVmlldy5jb250ZW50QXR0cmlidXRlcy5mcm9tKGYsIHN0YXRlID0+IHN0YXRlLmF0dHJzKVxuICAgIF1cbn0pO1xuXG4vKipcblJldHVybnMgYSBjb21tYW5kIHRoYXQgbW92ZXMgdGhlIGNvbXBsZXRpb24gc2VsZWN0aW9uIGZvcndhcmQgb3JcbmJhY2t3YXJkIGJ5IHRoZSBnaXZlbiBhbW91bnQuXG4qL1xuZnVuY3Rpb24gbW92ZUNvbXBsZXRpb25TZWxlY3Rpb24oZm9yd2FyZCwgYnkgPSBcIm9wdGlvblwiKSB7XG4gICAgcmV0dXJuICh2aWV3KSA9PiB7XG4gICAgICAgIGxldCBjU3RhdGUgPSB2aWV3LnN0YXRlLmZpZWxkKGNvbXBsZXRpb25TdGF0ZSwgZmFsc2UpO1xuICAgICAgICBpZiAoIWNTdGF0ZSB8fCAhY1N0YXRlLm9wZW4gfHwgY1N0YXRlLm9wZW4uZGlzYWJsZWQgfHxcbiAgICAgICAgICAgIERhdGUubm93KCkgLSBjU3RhdGUub3Blbi50aW1lc3RhbXAgPCB2aWV3LnN0YXRlLmZhY2V0KGNvbXBsZXRpb25Db25maWcpLmludGVyYWN0aW9uRGVsYXkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCBzdGVwID0gMSwgdG9vbHRpcDtcbiAgICAgICAgaWYgKGJ5ID09IFwicGFnZVwiICYmICh0b29sdGlwID0gZ2V0VG9vbHRpcCh2aWV3LCBjU3RhdGUub3Blbi50b29sdGlwKSkpXG4gICAgICAgICAgICBzdGVwID0gTWF0aC5tYXgoMiwgTWF0aC5mbG9vcih0b29sdGlwLmRvbS5vZmZzZXRIZWlnaHQgL1xuICAgICAgICAgICAgICAgIHRvb2x0aXAuZG9tLnF1ZXJ5U2VsZWN0b3IoXCJsaVwiKS5vZmZzZXRIZWlnaHQpIC0gMSk7XG4gICAgICAgIGxldCB7IGxlbmd0aCB9ID0gY1N0YXRlLm9wZW4ub3B0aW9ucztcbiAgICAgICAgbGV0IHNlbGVjdGVkID0gY1N0YXRlLm9wZW4uc2VsZWN0ZWQgPiAtMSA/IGNTdGF0ZS5vcGVuLnNlbGVjdGVkICsgc3RlcCAqIChmb3J3YXJkID8gMSA6IC0xKSA6IGZvcndhcmQgPyAwIDogbGVuZ3RoIC0gMTtcbiAgICAgICAgaWYgKHNlbGVjdGVkIDwgMClcbiAgICAgICAgICAgIHNlbGVjdGVkID0gYnkgPT0gXCJwYWdlXCIgPyAwIDogbGVuZ3RoIC0gMTtcbiAgICAgICAgZWxzZSBpZiAoc2VsZWN0ZWQgPj0gbGVuZ3RoKVxuICAgICAgICAgICAgc2VsZWN0ZWQgPSBieSA9PSBcInBhZ2VcIiA/IGxlbmd0aCAtIDEgOiAwO1xuICAgICAgICB2aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogc2V0U2VsZWN0ZWRFZmZlY3Qub2Yoc2VsZWN0ZWQpIH0pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xufVxuLyoqXG5BY2NlcHQgdGhlIGN1cnJlbnQgY29tcGxldGlvbi5cbiovXG5jb25zdCBhY2NlcHRDb21wbGV0aW9uID0gKHZpZXcpID0+IHtcbiAgICBsZXQgY1N0YXRlID0gdmlldy5zdGF0ZS5maWVsZChjb21wbGV0aW9uU3RhdGUsIGZhbHNlKTtcbiAgICBpZiAodmlldy5zdGF0ZS5yZWFkT25seSB8fCAhY1N0YXRlIHx8ICFjU3RhdGUub3BlbiB8fCBjU3RhdGUub3Blbi5zZWxlY3RlZCA8IDAgfHxcbiAgICAgICAgRGF0ZS5ub3coKSAtIGNTdGF0ZS5vcGVuLnRpbWVzdGFtcCA8IHZpZXcuc3RhdGUuZmFjZXQoY29tcGxldGlvbkNvbmZpZykuaW50ZXJhY3Rpb25EZWxheSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmICghY1N0YXRlLm9wZW4uZGlzYWJsZWQpXG4gICAgICAgIGFwcGx5Q29tcGxldGlvbih2aWV3LCBjU3RhdGUub3Blbi5vcHRpb25zW2NTdGF0ZS5vcGVuLnNlbGVjdGVkXSk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuLyoqXG5FeHBsaWNpdGx5IHN0YXJ0IGF1dG9jb21wbGV0aW9uLlxuKi9cbmNvbnN0IHN0YXJ0Q29tcGxldGlvbiA9ICh2aWV3KSA9PiB7XG4gICAgbGV0IGNTdGF0ZSA9IHZpZXcuc3RhdGUuZmllbGQoY29tcGxldGlvblN0YXRlLCBmYWxzZSk7XG4gICAgaWYgKCFjU3RhdGUpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB2aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogc3RhcnRDb21wbGV0aW9uRWZmZWN0Lm9mKHRydWUpIH0pO1xuICAgIHJldHVybiB0cnVlO1xufTtcbi8qKlxuQ2xvc2UgdGhlIGN1cnJlbnRseSBhY3RpdmUgY29tcGxldGlvbi5cbiovXG5jb25zdCBjbG9zZUNvbXBsZXRpb24gPSAodmlldykgPT4ge1xuICAgIGxldCBjU3RhdGUgPSB2aWV3LnN0YXRlLmZpZWxkKGNvbXBsZXRpb25TdGF0ZSwgZmFsc2UpO1xuICAgIGlmICghY1N0YXRlIHx8ICFjU3RhdGUuYWN0aXZlLnNvbWUoYSA9PiBhLnN0YXRlICE9IDAgLyogU3RhdGUuSW5hY3RpdmUgKi8pKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IGNsb3NlQ29tcGxldGlvbkVmZmVjdC5vZihudWxsKSB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG5jbGFzcyBSdW5uaW5nUXVlcnkge1xuICAgIGNvbnN0cnVjdG9yKGFjdGl2ZSwgY29udGV4dCkge1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IGFjdGl2ZTtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgdGhpcy50aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgdGhpcy51cGRhdGVzID0gW107XG4gICAgICAgIC8vIE5vdGUgdGhhdCAndW5kZWZpbmVkJyBtZWFucyAnbm90IGRvbmUgeWV0Jywgd2hlcmVhcyAnbnVsbCcgbWVhbnNcbiAgICAgICAgLy8gJ3F1ZXJ5IHJldHVybmVkIG51bGwnLlxuICAgICAgICB0aGlzLmRvbmUgPSB1bmRlZmluZWQ7XG4gICAgfVxufVxuY29uc3QgRGVib3VuY2VUaW1lID0gNTAsIE1heFVwZGF0ZUNvdW50ID0gNTAsIE1pbkFib3J0VGltZSA9IDEwMDA7XG5jb25zdCBjb21wbGV0aW9uUGx1Z2luID0gLypAX19QVVJFX18qL1ZpZXdQbHVnaW4uZnJvbUNsYXNzKGNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3KSB7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIHRoaXMuZGVib3VuY2VVcGRhdGUgPSAtMTtcbiAgICAgICAgdGhpcy5ydW5uaW5nID0gW107XG4gICAgICAgIHRoaXMuZGVib3VuY2VBY2NlcHQgPSAtMTtcbiAgICAgICAgdGhpcy5jb21wb3NpbmcgPSAwIC8qIENvbXBvc2l0aW9uU3RhdGUuTm9uZSAqLztcbiAgICAgICAgZm9yIChsZXQgYWN0aXZlIG9mIHZpZXcuc3RhdGUuZmllbGQoY29tcGxldGlvblN0YXRlKS5hY3RpdmUpXG4gICAgICAgICAgICBpZiAoYWN0aXZlLnN0YXRlID09IDEgLyogU3RhdGUuUGVuZGluZyAqLylcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0UXVlcnkoYWN0aXZlKTtcbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICBsZXQgY1N0YXRlID0gdXBkYXRlLnN0YXRlLmZpZWxkKGNvbXBsZXRpb25TdGF0ZSk7XG4gICAgICAgIGlmICghdXBkYXRlLnNlbGVjdGlvblNldCAmJiAhdXBkYXRlLmRvY0NoYW5nZWQgJiYgdXBkYXRlLnN0YXJ0U3RhdGUuZmllbGQoY29tcGxldGlvblN0YXRlKSA9PSBjU3RhdGUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCBkb2VzUmVzZXQgPSB1cGRhdGUudHJhbnNhY3Rpb25zLnNvbWUodHIgPT4ge1xuICAgICAgICAgICAgcmV0dXJuICh0ci5zZWxlY3Rpb24gfHwgdHIuZG9jQ2hhbmdlZCkgJiYgIWdldFVzZXJFdmVudCh0cik7XG4gICAgICAgIH0pO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucnVubmluZy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHF1ZXJ5ID0gdGhpcy5ydW5uaW5nW2ldO1xuICAgICAgICAgICAgaWYgKGRvZXNSZXNldCB8fFxuICAgICAgICAgICAgICAgIHF1ZXJ5LnVwZGF0ZXMubGVuZ3RoICsgdXBkYXRlLnRyYW5zYWN0aW9ucy5sZW5ndGggPiBNYXhVcGRhdGVDb3VudCAmJiBEYXRlLm5vdygpIC0gcXVlcnkudGltZSA+IE1pbkFib3J0VGltZSkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGhhbmRsZXIgb2YgcXVlcnkuY29udGV4dC5hYm9ydExpc3RlbmVycykge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlcigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dFeGNlcHRpb24odGhpcy52aWV3LnN0YXRlLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBxdWVyeS5jb250ZXh0LmFib3J0TGlzdGVuZXJzID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLnJ1bm5pbmcuc3BsaWNlKGktLSwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBxdWVyeS51cGRhdGVzLnB1c2goLi4udXBkYXRlLnRyYW5zYWN0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZGVib3VuY2VVcGRhdGUgPiAtMSlcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmRlYm91bmNlVXBkYXRlKTtcbiAgICAgICAgdGhpcy5kZWJvdW5jZVVwZGF0ZSA9IGNTdGF0ZS5hY3RpdmUuc29tZShhID0+IGEuc3RhdGUgPT0gMSAvKiBTdGF0ZS5QZW5kaW5nICovICYmICF0aGlzLnJ1bm5pbmcuc29tZShxID0+IHEuYWN0aXZlLnNvdXJjZSA9PSBhLnNvdXJjZSkpXG4gICAgICAgICAgICA/IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5zdGFydFVwZGF0ZSgpLCBEZWJvdW5jZVRpbWUpIDogLTE7XG4gICAgICAgIGlmICh0aGlzLmNvbXBvc2luZyAhPSAwIC8qIENvbXBvc2l0aW9uU3RhdGUuTm9uZSAqLylcbiAgICAgICAgICAgIGZvciAobGV0IHRyIG9mIHVwZGF0ZS50cmFuc2FjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ2V0VXNlckV2ZW50KHRyKSA9PSBcImlucHV0XCIpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcG9zaW5nID0gMiAvKiBDb21wb3NpdGlvblN0YXRlLkNoYW5nZWQgKi87XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jb21wb3NpbmcgPT0gMiAvKiBDb21wb3NpdGlvblN0YXRlLkNoYW5nZWQgKi8gJiYgdHIuc2VsZWN0aW9uKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBvc2luZyA9IDMgLyogQ29tcG9zaXRpb25TdGF0ZS5DaGFuZ2VkQW5kTW92ZWQgKi87XG4gICAgICAgICAgICB9XG4gICAgfVxuICAgIHN0YXJ0VXBkYXRlKCkge1xuICAgICAgICB0aGlzLmRlYm91bmNlVXBkYXRlID0gLTE7XG4gICAgICAgIGxldCB7IHN0YXRlIH0gPSB0aGlzLnZpZXcsIGNTdGF0ZSA9IHN0YXRlLmZpZWxkKGNvbXBsZXRpb25TdGF0ZSk7XG4gICAgICAgIGZvciAobGV0IGFjdGl2ZSBvZiBjU3RhdGUuYWN0aXZlKSB7XG4gICAgICAgICAgICBpZiAoYWN0aXZlLnN0YXRlID09IDEgLyogU3RhdGUuUGVuZGluZyAqLyAmJiAhdGhpcy5ydW5uaW5nLnNvbWUociA9PiByLmFjdGl2ZS5zb3VyY2UgPT0gYWN0aXZlLnNvdXJjZSkpXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydFF1ZXJ5KGFjdGl2ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhcnRRdWVyeShhY3RpdmUpIHtcbiAgICAgICAgbGV0IHsgc3RhdGUgfSA9IHRoaXMudmlldywgcG9zID0gY3VyKHN0YXRlKTtcbiAgICAgICAgbGV0IGNvbnRleHQgPSBuZXcgQ29tcGxldGlvbkNvbnRleHQoc3RhdGUsIHBvcywgYWN0aXZlLmV4cGxpY2l0UG9zID09IHBvcyk7XG4gICAgICAgIGxldCBwZW5kaW5nID0gbmV3IFJ1bm5pbmdRdWVyeShhY3RpdmUsIGNvbnRleHQpO1xuICAgICAgICB0aGlzLnJ1bm5pbmcucHVzaChwZW5kaW5nKTtcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKGFjdGl2ZS5zb3VyY2UoY29udGV4dCkpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICAgIGlmICghcGVuZGluZy5jb250ZXh0LmFib3J0ZWQpIHtcbiAgICAgICAgICAgICAgICBwZW5kaW5nLmRvbmUgPSByZXN1bHQgfHwgbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLnNjaGVkdWxlQWNjZXB0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGVyciA9PiB7XG4gICAgICAgICAgICB0aGlzLnZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiBjbG9zZUNvbXBsZXRpb25FZmZlY3Qub2YobnVsbCkgfSk7XG4gICAgICAgICAgICBsb2dFeGNlcHRpb24odGhpcy52aWV3LnN0YXRlLCBlcnIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2NoZWR1bGVBY2NlcHQoKSB7XG4gICAgICAgIGlmICh0aGlzLnJ1bm5pbmcuZXZlcnkocSA9PiBxLmRvbmUgIT09IHVuZGVmaW5lZCkpXG4gICAgICAgICAgICB0aGlzLmFjY2VwdCgpO1xuICAgICAgICBlbHNlIGlmICh0aGlzLmRlYm91bmNlQWNjZXB0IDwgMClcbiAgICAgICAgICAgIHRoaXMuZGVib3VuY2VBY2NlcHQgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuYWNjZXB0KCksIERlYm91bmNlVGltZSk7XG4gICAgfVxuICAgIC8vIEZvciBlYWNoIGZpbmlzaGVkIHF1ZXJ5IGluIHRoaXMucnVubmluZywgdHJ5IHRvIGNyZWF0ZSBhIHJlc3VsdFxuICAgIC8vIG9yLCBpZiBhcHByb3ByaWF0ZSwgcmVzdGFydCB0aGUgcXVlcnkuXG4gICAgYWNjZXB0KCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICh0aGlzLmRlYm91bmNlQWNjZXB0ID4gLTEpXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5kZWJvdW5jZUFjY2VwdCk7XG4gICAgICAgIHRoaXMuZGVib3VuY2VBY2NlcHQgPSAtMTtcbiAgICAgICAgbGV0IHVwZGF0ZWQgPSBbXTtcbiAgICAgICAgbGV0IGNvbmYgPSB0aGlzLnZpZXcuc3RhdGUuZmFjZXQoY29tcGxldGlvbkNvbmZpZyk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5ydW5uaW5nLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgcXVlcnkgPSB0aGlzLnJ1bm5pbmdbaV07XG4gICAgICAgICAgICBpZiAocXVlcnkuZG9uZSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgdGhpcy5ydW5uaW5nLnNwbGljZShpLS0sIDEpO1xuICAgICAgICAgICAgaWYgKHF1ZXJ5LmRvbmUpIHtcbiAgICAgICAgICAgICAgICBsZXQgYWN0aXZlID0gbmV3IEFjdGl2ZVJlc3VsdChxdWVyeS5hY3RpdmUuc291cmNlLCBxdWVyeS5hY3RpdmUuZXhwbGljaXRQb3MsIHF1ZXJ5LmRvbmUsIHF1ZXJ5LmRvbmUuZnJvbSwgKF9hID0gcXVlcnkuZG9uZS50bykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogY3VyKHF1ZXJ5LnVwZGF0ZXMubGVuZ3RoID8gcXVlcnkudXBkYXRlc1swXS5zdGFydFN0YXRlIDogdGhpcy52aWV3LnN0YXRlKSk7XG4gICAgICAgICAgICAgICAgLy8gUmVwbGF5IHRoZSB0cmFuc2FjdGlvbnMgdGhhdCBoYXBwZW5lZCBzaW5jZSB0aGUgc3RhcnQgb2ZcbiAgICAgICAgICAgICAgICAvLyB0aGUgcmVxdWVzdCBhbmQgc2VlIGlmIHRoYXQgcHJlc2VydmVzIHRoZSByZXN1bHRcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB0ciBvZiBxdWVyeS51cGRhdGVzKVxuICAgICAgICAgICAgICAgICAgICBhY3RpdmUgPSBhY3RpdmUudXBkYXRlKHRyLCBjb25mKTtcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlLmhhc1Jlc3VsdCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWQucHVzaChhY3RpdmUpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgY3VycmVudCA9IHRoaXMudmlldy5zdGF0ZS5maWVsZChjb21wbGV0aW9uU3RhdGUpLmFjdGl2ZS5maW5kKGEgPT4gYS5zb3VyY2UgPT0gcXVlcnkuYWN0aXZlLnNvdXJjZSk7XG4gICAgICAgICAgICBpZiAoY3VycmVudCAmJiBjdXJyZW50LnN0YXRlID09IDEgLyogU3RhdGUuUGVuZGluZyAqLykge1xuICAgICAgICAgICAgICAgIGlmIChxdWVyeS5kb25lID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRXhwbGljaXRseSBmYWlsZWQuIFNob3VsZCBjbGVhciB0aGUgcGVuZGluZyBzdGF0dXMgaWYgaXRcbiAgICAgICAgICAgICAgICAgICAgLy8gaGFzbid0IGJlZW4gcmUtc2V0IGluIHRoZSBtZWFudGltZS5cbiAgICAgICAgICAgICAgICAgICAgbGV0IGFjdGl2ZSA9IG5ldyBBY3RpdmVTb3VyY2UocXVlcnkuYWN0aXZlLnNvdXJjZSwgMCAvKiBTdGF0ZS5JbmFjdGl2ZSAqLyk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHRyIG9mIHF1ZXJ5LnVwZGF0ZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmUgPSBhY3RpdmUudXBkYXRlKHRyLCBjb25mKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZS5zdGF0ZSAhPSAxIC8qIFN0YXRlLlBlbmRpbmcgKi8pXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkLnB1c2goYWN0aXZlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENsZWFyZWQgYnkgc3Vic2VxdWVudCB0cmFuc2FjdGlvbnMuIFJlc3RhcnQuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRRdWVyeShjdXJyZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVwZGF0ZWQubGVuZ3RoKVxuICAgICAgICAgICAgdGhpcy52aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogc2V0QWN0aXZlRWZmZWN0Lm9mKHVwZGF0ZWQpIH0pO1xuICAgIH1cbn0sIHtcbiAgICBldmVudEhhbmRsZXJzOiB7XG4gICAgICAgIGJsdXIoKSB7XG4gICAgICAgICAgICBsZXQgc3RhdGUgPSB0aGlzLnZpZXcuc3RhdGUuZmllbGQoY29tcGxldGlvblN0YXRlLCBmYWxzZSk7XG4gICAgICAgICAgICBpZiAoc3RhdGUgJiYgc3RhdGUudG9vbHRpcCAmJiB0aGlzLnZpZXcuc3RhdGUuZmFjZXQoY29tcGxldGlvbkNvbmZpZykuY2xvc2VPbkJsdXIpXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogY2xvc2VDb21wbGV0aW9uRWZmZWN0Lm9mKG51bGwpIH0pO1xuICAgICAgICB9LFxuICAgICAgICBjb21wb3NpdGlvbnN0YXJ0KCkge1xuICAgICAgICAgICAgdGhpcy5jb21wb3NpbmcgPSAxIC8qIENvbXBvc2l0aW9uU3RhdGUuU3RhcnRlZCAqLztcbiAgICAgICAgfSxcbiAgICAgICAgY29tcG9zaXRpb25lbmQoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jb21wb3NpbmcgPT0gMyAvKiBDb21wb3NpdGlvblN0YXRlLkNoYW5nZWRBbmRNb3ZlZCAqLykge1xuICAgICAgICAgICAgICAgIC8vIFNhZmFyaSBmaXJlcyBjb21wb3NpdGlvbmVuZCBldmVudHMgc3luY2hyb25vdXNseSwgcG9zc2libHlcbiAgICAgICAgICAgICAgICAvLyBmcm9tIGluc2lkZSBhbiB1cGRhdGUsIHNvIGRpc3BhdGNoIGFzeW5jaHJvbm91c2x5IHRvIGF2b2lkIHJlZW50cmFuY3lcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMudmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IHN0YXJ0Q29tcGxldGlvbkVmZmVjdC5vZihmYWxzZSkgfSksIDIwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY29tcG9zaW5nID0gMCAvKiBDb21wb3NpdGlvblN0YXRlLk5vbmUgKi87XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxuY29uc3QgYmFzZVRoZW1lID0gLypAX19QVVJFX18qL0VkaXRvclZpZXcuYmFzZVRoZW1lKHtcbiAgICBcIi5jbS10b29sdGlwLmNtLXRvb2x0aXAtYXV0b2NvbXBsZXRlXCI6IHtcbiAgICAgICAgXCImID4gdWxcIjoge1xuICAgICAgICAgICAgZm9udEZhbWlseTogXCJtb25vc3BhY2VcIixcbiAgICAgICAgICAgIHdoaXRlU3BhY2U6IFwibm93cmFwXCIsXG4gICAgICAgICAgICBvdmVyZmxvdzogXCJoaWRkZW4gYXV0b1wiLFxuICAgICAgICAgICAgbWF4V2lkdGhfZmFsbGJhY2s6IFwiNzAwcHhcIixcbiAgICAgICAgICAgIG1heFdpZHRoOiBcIm1pbig3MDBweCwgOTV2dylcIixcbiAgICAgICAgICAgIG1pbldpZHRoOiBcIjI1MHB4XCIsXG4gICAgICAgICAgICBtYXhIZWlnaHQ6IFwiMTBlbVwiLFxuICAgICAgICAgICAgbGlzdFN0eWxlOiBcIm5vbmVcIixcbiAgICAgICAgICAgIG1hcmdpbjogMCxcbiAgICAgICAgICAgIHBhZGRpbmc6IDAsXG4gICAgICAgICAgICBcIiYgPiBsaVwiOiB7XG4gICAgICAgICAgICAgICAgb3ZlcmZsb3dYOiBcImhpZGRlblwiLFxuICAgICAgICAgICAgICAgIHRleHRPdmVyZmxvdzogXCJlbGxpcHNpc1wiLFxuICAgICAgICAgICAgICAgIGN1cnNvcjogXCJwb2ludGVyXCIsXG4gICAgICAgICAgICAgICAgcGFkZGluZzogXCIxcHggM3B4XCIsXG4gICAgICAgICAgICAgICAgbGluZUhlaWdodDogMS4yXG4gICAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgfSxcbiAgICBcIiZsaWdodCAuY20tdG9vbHRpcC1hdXRvY29tcGxldGUgdWwgbGlbYXJpYS1zZWxlY3RlZF1cIjoge1xuICAgICAgICBiYWNrZ3JvdW5kOiBcIiMxN2NcIixcbiAgICAgICAgY29sb3I6IFwid2hpdGVcIixcbiAgICB9LFxuICAgIFwiJmxpZ2h0IC5jbS10b29sdGlwLWF1dG9jb21wbGV0ZS1kaXNhYmxlZCB1bCBsaVthcmlhLXNlbGVjdGVkXVwiOiB7XG4gICAgICAgIGJhY2tncm91bmQ6IFwiIzc3N1wiLFxuICAgIH0sXG4gICAgXCImZGFyayAuY20tdG9vbHRpcC1hdXRvY29tcGxldGUgdWwgbGlbYXJpYS1zZWxlY3RlZF1cIjoge1xuICAgICAgICBiYWNrZ3JvdW5kOiBcIiMzNDdcIixcbiAgICAgICAgY29sb3I6IFwid2hpdGVcIixcbiAgICB9LFxuICAgIFwiJmRhcmsgLmNtLXRvb2x0aXAtYXV0b2NvbXBsZXRlLWRpc2FibGVkIHVsIGxpW2FyaWEtc2VsZWN0ZWRdXCI6IHtcbiAgICAgICAgYmFja2dyb3VuZDogXCIjNDQ0XCIsXG4gICAgfSxcbiAgICBcIi5jbS1jb21wbGV0aW9uTGlzdEluY29tcGxldGVUb3A6YmVmb3JlLCAuY20tY29tcGxldGlvbkxpc3RJbmNvbXBsZXRlQm90dG9tOmFmdGVyXCI6IHtcbiAgICAgICAgY29udGVudDogJ1wiXHUwMEI3XHUwMEI3XHUwMEI3XCInLFxuICAgICAgICBvcGFjaXR5OiAwLjUsXG4gICAgICAgIGRpc3BsYXk6IFwiYmxvY2tcIixcbiAgICAgICAgdGV4dEFsaWduOiBcImNlbnRlclwiXG4gICAgfSxcbiAgICBcIi5jbS10b29sdGlwLmNtLWNvbXBsZXRpb25JbmZvXCI6IHtcbiAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgcGFkZGluZzogXCIzcHggOXB4XCIsXG4gICAgICAgIHdpZHRoOiBcIm1heC1jb250ZW50XCIsXG4gICAgICAgIG1heFdpZHRoOiBgJHs0MDAgLyogSW5mby5XaWR0aCAqL31weGAsXG4gICAgICAgIGJveFNpemluZzogXCJib3JkZXItYm94XCJcbiAgICB9LFxuICAgIFwiLmNtLWNvbXBsZXRpb25JbmZvLmNtLWNvbXBsZXRpb25JbmZvLWxlZnRcIjogeyByaWdodDogXCIxMDAlXCIgfSxcbiAgICBcIi5jbS1jb21wbGV0aW9uSW5mby5jbS1jb21wbGV0aW9uSW5mby1yaWdodFwiOiB7IGxlZnQ6IFwiMTAwJVwiIH0sXG4gICAgXCIuY20tY29tcGxldGlvbkluZm8uY20tY29tcGxldGlvbkluZm8tbGVmdC1uYXJyb3dcIjogeyByaWdodDogYCR7MzAgLyogSW5mby5NYXJnaW4gKi99cHhgIH0sXG4gICAgXCIuY20tY29tcGxldGlvbkluZm8uY20tY29tcGxldGlvbkluZm8tcmlnaHQtbmFycm93XCI6IHsgbGVmdDogYCR7MzAgLyogSW5mby5NYXJnaW4gKi99cHhgIH0sXG4gICAgXCImbGlnaHQgLmNtLXNuaXBwZXRGaWVsZFwiOiB7IGJhY2tncm91bmRDb2xvcjogXCIjMDAwMDAwMjJcIiB9LFxuICAgIFwiJmRhcmsgLmNtLXNuaXBwZXRGaWVsZFwiOiB7IGJhY2tncm91bmRDb2xvcjogXCIjZmZmZmZmMjJcIiB9LFxuICAgIFwiLmNtLXNuaXBwZXRGaWVsZFBvc2l0aW9uXCI6IHtcbiAgICAgICAgdmVydGljYWxBbGlnbjogXCJ0ZXh0LXRvcFwiLFxuICAgICAgICB3aWR0aDogMCxcbiAgICAgICAgaGVpZ2h0OiBcIjEuMTVlbVwiLFxuICAgICAgICBkaXNwbGF5OiBcImlubGluZS1ibG9ja1wiLFxuICAgICAgICBtYXJnaW46IFwiMCAtMC43cHggLS43ZW1cIixcbiAgICAgICAgYm9yZGVyTGVmdDogXCIxLjRweCBkb3R0ZWQgIzg4OFwiXG4gICAgfSxcbiAgICBcIi5jbS1jb21wbGV0aW9uTWF0Y2hlZFRleHRcIjoge1xuICAgICAgICB0ZXh0RGVjb3JhdGlvbjogXCJ1bmRlcmxpbmVcIlxuICAgIH0sXG4gICAgXCIuY20tY29tcGxldGlvbkRldGFpbFwiOiB7XG4gICAgICAgIG1hcmdpbkxlZnQ6IFwiMC41ZW1cIixcbiAgICAgICAgZm9udFN0eWxlOiBcIml0YWxpY1wiXG4gICAgfSxcbiAgICBcIi5jbS1jb21wbGV0aW9uSWNvblwiOiB7XG4gICAgICAgIGZvbnRTaXplOiBcIjkwJVwiLFxuICAgICAgICB3aWR0aDogXCIuOGVtXCIsXG4gICAgICAgIGRpc3BsYXk6IFwiaW5saW5lLWJsb2NrXCIsXG4gICAgICAgIHRleHRBbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgcGFkZGluZ1JpZ2h0OiBcIi42ZW1cIixcbiAgICAgICAgb3BhY2l0eTogXCIwLjZcIlxuICAgIH0sXG4gICAgXCIuY20tY29tcGxldGlvbkljb24tZnVuY3Rpb24sIC5jbS1jb21wbGV0aW9uSWNvbi1tZXRob2RcIjoge1xuICAgICAgICBcIiY6YWZ0ZXJcIjogeyBjb250ZW50OiBcIidcdTAxOTInXCIgfVxuICAgIH0sXG4gICAgXCIuY20tY29tcGxldGlvbkljb24tY2xhc3NcIjoge1xuICAgICAgICBcIiY6YWZ0ZXJcIjogeyBjb250ZW50OiBcIidcdTI1Q0InXCIgfVxuICAgIH0sXG4gICAgXCIuY20tY29tcGxldGlvbkljb24taW50ZXJmYWNlXCI6IHtcbiAgICAgICAgXCImOmFmdGVyXCI6IHsgY29udGVudDogXCInXHUyNUNDJ1wiIH1cbiAgICB9LFxuICAgIFwiLmNtLWNvbXBsZXRpb25JY29uLXZhcmlhYmxlXCI6IHtcbiAgICAgICAgXCImOmFmdGVyXCI6IHsgY29udGVudDogXCInXHVEODM1XHVEQzY1J1wiIH1cbiAgICB9LFxuICAgIFwiLmNtLWNvbXBsZXRpb25JY29uLWNvbnN0YW50XCI6IHtcbiAgICAgICAgXCImOmFmdGVyXCI6IHsgY29udGVudDogXCInXHVEODM1XHVEQzM2J1wiIH1cbiAgICB9LFxuICAgIFwiLmNtLWNvbXBsZXRpb25JY29uLXR5cGVcIjoge1xuICAgICAgICBcIiY6YWZ0ZXJcIjogeyBjb250ZW50OiBcIidcdUQ4MzVcdURDNjEnXCIgfVxuICAgIH0sXG4gICAgXCIuY20tY29tcGxldGlvbkljb24tZW51bVwiOiB7XG4gICAgICAgIFwiJjphZnRlclwiOiB7IGNvbnRlbnQ6IFwiJ1x1MjIyQSdcIiB9XG4gICAgfSxcbiAgICBcIi5jbS1jb21wbGV0aW9uSWNvbi1wcm9wZXJ0eVwiOiB7XG4gICAgICAgIFwiJjphZnRlclwiOiB7IGNvbnRlbnQ6IFwiJ1x1MjVBMSdcIiB9XG4gICAgfSxcbiAgICBcIi5jbS1jb21wbGV0aW9uSWNvbi1rZXl3b3JkXCI6IHtcbiAgICAgICAgXCImOmFmdGVyXCI6IHsgY29udGVudDogXCInXHVEODNEXHVERDExXFx1RkUwRSdcIiB9IC8vIERpc2FibGUgZW1vamkgcmVuZGVyaW5nXG4gICAgfSxcbiAgICBcIi5jbS1jb21wbGV0aW9uSWNvbi1uYW1lc3BhY2VcIjoge1xuICAgICAgICBcIiY6YWZ0ZXJcIjogeyBjb250ZW50OiBcIidcdTI1QTInXCIgfVxuICAgIH0sXG4gICAgXCIuY20tY29tcGxldGlvbkljb24tdGV4dFwiOiB7XG4gICAgICAgIFwiJjphZnRlclwiOiB7IGNvbnRlbnQ6IFwiJ2FiYydcIiwgZm9udFNpemU6IFwiNTAlXCIsIHZlcnRpY2FsQWxpZ246IFwibWlkZGxlXCIgfVxuICAgIH1cbn0pO1xuXG5jbGFzcyBGaWVsZFBvcyB7XG4gICAgY29uc3RydWN0b3IoZmllbGQsIGxpbmUsIGZyb20sIHRvKSB7XG4gICAgICAgIHRoaXMuZmllbGQgPSBmaWVsZDtcbiAgICAgICAgdGhpcy5saW5lID0gbGluZTtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgIH1cbn1cbmNsYXNzIEZpZWxkUmFuZ2Uge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkLCBmcm9tLCB0bykge1xuICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICB9XG4gICAgbWFwKGNoYW5nZXMpIHtcbiAgICAgICAgbGV0IGZyb20gPSBjaGFuZ2VzLm1hcFBvcyh0aGlzLmZyb20sIC0xLCBNYXBNb2RlLlRyYWNrRGVsKTtcbiAgICAgICAgbGV0IHRvID0gY2hhbmdlcy5tYXBQb3ModGhpcy50bywgMSwgTWFwTW9kZS5UcmFja0RlbCk7XG4gICAgICAgIHJldHVybiBmcm9tID09IG51bGwgfHwgdG8gPT0gbnVsbCA/IG51bGwgOiBuZXcgRmllbGRSYW5nZSh0aGlzLmZpZWxkLCBmcm9tLCB0byk7XG4gICAgfVxufVxuY2xhc3MgU25pcHBldCB7XG4gICAgY29uc3RydWN0b3IobGluZXMsIGZpZWxkUG9zaXRpb25zKSB7XG4gICAgICAgIHRoaXMubGluZXMgPSBsaW5lcztcbiAgICAgICAgdGhpcy5maWVsZFBvc2l0aW9ucyA9IGZpZWxkUG9zaXRpb25zO1xuICAgIH1cbiAgICBpbnN0YW50aWF0ZShzdGF0ZSwgcG9zKSB7XG4gICAgICAgIGxldCB0ZXh0ID0gW10sIGxpbmVTdGFydCA9IFtwb3NdO1xuICAgICAgICBsZXQgbGluZU9iaiA9IHN0YXRlLmRvYy5saW5lQXQocG9zKSwgYmFzZUluZGVudCA9IC9eXFxzKi8uZXhlYyhsaW5lT2JqLnRleHQpWzBdO1xuICAgICAgICBmb3IgKGxldCBsaW5lIG9mIHRoaXMubGluZXMpIHtcbiAgICAgICAgICAgIGlmICh0ZXh0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGxldCBpbmRlbnQgPSBiYXNlSW5kZW50LCB0YWJzID0gL15cXHQqLy5leGVjKGxpbmUpWzBdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRhYnM7IGkrKylcbiAgICAgICAgICAgICAgICAgICAgaW5kZW50ICs9IHN0YXRlLmZhY2V0KGluZGVudFVuaXQpO1xuICAgICAgICAgICAgICAgIGxpbmVTdGFydC5wdXNoKHBvcyArIGluZGVudC5sZW5ndGggLSB0YWJzKTtcbiAgICAgICAgICAgICAgICBsaW5lID0gaW5kZW50ICsgbGluZS5zbGljZSh0YWJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRleHQucHVzaChsaW5lKTtcbiAgICAgICAgICAgIHBvcyArPSBsaW5lLmxlbmd0aCArIDE7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHJhbmdlcyA9IHRoaXMuZmllbGRQb3NpdGlvbnMubWFwKHBvcyA9PiBuZXcgRmllbGRSYW5nZShwb3MuZmllbGQsIGxpbmVTdGFydFtwb3MubGluZV0gKyBwb3MuZnJvbSwgbGluZVN0YXJ0W3Bvcy5saW5lXSArIHBvcy50bykpO1xuICAgICAgICByZXR1cm4geyB0ZXh0LCByYW5nZXMgfTtcbiAgICB9XG4gICAgc3RhdGljIHBhcnNlKHRlbXBsYXRlKSB7XG4gICAgICAgIGxldCBmaWVsZHMgPSBbXTtcbiAgICAgICAgbGV0IGxpbmVzID0gW10sIHBvc2l0aW9ucyA9IFtdLCBtO1xuICAgICAgICBmb3IgKGxldCBsaW5lIG9mIHRlbXBsYXRlLnNwbGl0KC9cXHJcXG4/fFxcbi8pKSB7XG4gICAgICAgICAgICB3aGlsZSAobSA9IC9bIyRdXFx7KD86KFxcZCspKD86OihbXn1dKikpP3woW159XSopKVxcfS8uZXhlYyhsaW5lKSkge1xuICAgICAgICAgICAgICAgIGxldCBzZXEgPSBtWzFdID8gK21bMV0gOiBudWxsLCBuYW1lID0gbVsyXSB8fCBtWzNdIHx8IFwiXCIsIGZvdW5kID0gLTE7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWVsZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlcSAhPSBudWxsID8gZmllbGRzW2ldLnNlcSA9PSBzZXEgOiBuYW1lID8gZmllbGRzW2ldLm5hbWUgPT0gbmFtZSA6IGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZm91bmQgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGkgPCBmaWVsZHMubGVuZ3RoICYmIChzZXEgPT0gbnVsbCB8fCAoZmllbGRzW2ldLnNlcSAhPSBudWxsICYmIGZpZWxkc1tpXS5zZXEgPCBzZXEpKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICAgICAgZmllbGRzLnNwbGljZShpLCAwLCB7IHNlcSwgbmFtZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgZm91bmQgPSBpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBwb3Mgb2YgcG9zaXRpb25zKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvcy5maWVsZCA+PSBmb3VuZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3MuZmllbGQrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcG9zaXRpb25zLnB1c2gobmV3IEZpZWxkUG9zKGZvdW5kLCBsaW5lcy5sZW5ndGgsIG0uaW5kZXgsIG0uaW5kZXggKyBuYW1lLmxlbmd0aCkpO1xuICAgICAgICAgICAgICAgIGxpbmUgPSBsaW5lLnNsaWNlKDAsIG0uaW5kZXgpICsgbmFtZSArIGxpbmUuc2xpY2UobS5pbmRleCArIG1bMF0ubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IGVzYzsgZXNjID0gLyhbJCNdKVxcXFx7Ly5leGVjKGxpbmUpOykge1xuICAgICAgICAgICAgICAgIGxpbmUgPSBsaW5lLnNsaWNlKDAsIGVzYy5pbmRleCkgKyBlc2NbMV0gKyBcIntcIiArIGxpbmUuc2xpY2UoZXNjLmluZGV4ICsgZXNjWzBdLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgcG9zIG9mIHBvc2l0aW9ucylcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvcy5saW5lID09IGxpbmVzLmxlbmd0aCAmJiBwb3MuZnJvbSA+IGVzYy5pbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zLmZyb20tLTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcy50by0tO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGxpbmUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgU25pcHBldChsaW5lcywgcG9zaXRpb25zKTtcbiAgICB9XG59XG5sZXQgZmllbGRNYXJrZXIgPSAvKkBfX1BVUkVfXyovRGVjb3JhdGlvbi53aWRnZXQoeyB3aWRnZXQ6IC8qQF9fUFVSRV9fKi9uZXcgY2xhc3MgZXh0ZW5kcyBXaWRnZXRUeXBlIHtcbiAgICAgICAgdG9ET00oKSB7XG4gICAgICAgICAgICBsZXQgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICAgICAgc3Bhbi5jbGFzc05hbWUgPSBcImNtLXNuaXBwZXRGaWVsZFBvc2l0aW9uXCI7XG4gICAgICAgICAgICByZXR1cm4gc3BhbjtcbiAgICAgICAgfVxuICAgICAgICBpZ25vcmVFdmVudCgpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgfSB9KTtcbmxldCBmaWVsZFJhbmdlID0gLypAX19QVVJFX18qL0RlY29yYXRpb24ubWFyayh7IGNsYXNzOiBcImNtLXNuaXBwZXRGaWVsZFwiIH0pO1xuY2xhc3MgQWN0aXZlU25pcHBldCB7XG4gICAgY29uc3RydWN0b3IocmFuZ2VzLCBhY3RpdmUpIHtcbiAgICAgICAgdGhpcy5yYW5nZXMgPSByYW5nZXM7XG4gICAgICAgIHRoaXMuYWN0aXZlID0gYWN0aXZlO1xuICAgICAgICB0aGlzLmRlY28gPSBEZWNvcmF0aW9uLnNldChyYW5nZXMubWFwKHIgPT4gKHIuZnJvbSA9PSByLnRvID8gZmllbGRNYXJrZXIgOiBmaWVsZFJhbmdlKS5yYW5nZShyLmZyb20sIHIudG8pKSk7XG4gICAgfVxuICAgIG1hcChjaGFuZ2VzKSB7XG4gICAgICAgIGxldCByYW5nZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgciBvZiB0aGlzLnJhbmdlcykge1xuICAgICAgICAgICAgbGV0IG1hcHBlZCA9IHIubWFwKGNoYW5nZXMpO1xuICAgICAgICAgICAgaWYgKCFtYXBwZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICByYW5nZXMucHVzaChtYXBwZWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgQWN0aXZlU25pcHBldChyYW5nZXMsIHRoaXMuYWN0aXZlKTtcbiAgICB9XG4gICAgc2VsZWN0aW9uSW5zaWRlRmllbGQoc2VsKSB7XG4gICAgICAgIHJldHVybiBzZWwucmFuZ2VzLmV2ZXJ5KHJhbmdlID0+IHRoaXMucmFuZ2VzLnNvbWUociA9PiByLmZpZWxkID09IHRoaXMuYWN0aXZlICYmIHIuZnJvbSA8PSByYW5nZS5mcm9tICYmIHIudG8gPj0gcmFuZ2UudG8pKTtcbiAgICB9XG59XG5jb25zdCBzZXRBY3RpdmUgPSAvKkBfX1BVUkVfXyovU3RhdGVFZmZlY3QuZGVmaW5lKHtcbiAgICBtYXAodmFsdWUsIGNoYW5nZXMpIHsgcmV0dXJuIHZhbHVlICYmIHZhbHVlLm1hcChjaGFuZ2VzKTsgfVxufSk7XG5jb25zdCBtb3ZlVG9GaWVsZCA9IC8qQF9fUFVSRV9fKi9TdGF0ZUVmZmVjdC5kZWZpbmUoKTtcbmNvbnN0IHNuaXBwZXRTdGF0ZSA9IC8qQF9fUFVSRV9fKi9TdGF0ZUZpZWxkLmRlZmluZSh7XG4gICAgY3JlYXRlKCkgeyByZXR1cm4gbnVsbDsgfSxcbiAgICB1cGRhdGUodmFsdWUsIHRyKSB7XG4gICAgICAgIGZvciAobGV0IGVmZmVjdCBvZiB0ci5lZmZlY3RzKSB7XG4gICAgICAgICAgICBpZiAoZWZmZWN0LmlzKHNldEFjdGl2ZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVmZmVjdC52YWx1ZTtcbiAgICAgICAgICAgIGlmIChlZmZlY3QuaXMobW92ZVRvRmllbGQpICYmIHZhbHVlKVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQWN0aXZlU25pcHBldCh2YWx1ZS5yYW5nZXMsIGVmZmVjdC52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlICYmIHRyLmRvY0NoYW5nZWQpXG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLm1hcCh0ci5jaGFuZ2VzKTtcbiAgICAgICAgaWYgKHZhbHVlICYmIHRyLnNlbGVjdGlvbiAmJiAhdmFsdWUuc2VsZWN0aW9uSW5zaWRlRmllbGQodHIuc2VsZWN0aW9uKSlcbiAgICAgICAgICAgIHZhbHVlID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgcHJvdmlkZTogZiA9PiBFZGl0b3JWaWV3LmRlY29yYXRpb25zLmZyb20oZiwgdmFsID0+IHZhbCA/IHZhbC5kZWNvIDogRGVjb3JhdGlvbi5ub25lKVxufSk7XG5mdW5jdGlvbiBmaWVsZFNlbGVjdGlvbihyYW5nZXMsIGZpZWxkKSB7XG4gICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5jcmVhdGUocmFuZ2VzLmZpbHRlcihyID0+IHIuZmllbGQgPT0gZmllbGQpLm1hcChyID0+IEVkaXRvclNlbGVjdGlvbi5yYW5nZShyLmZyb20sIHIudG8pKSk7XG59XG4vKipcbkNvbnZlcnQgYSBzbmlwcGV0IHRlbXBsYXRlIHRvIGEgZnVuY3Rpb24gdGhhdCBjYW5cblthcHBseV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNhdXRvY29tcGxldGUuQ29tcGxldGlvbi5hcHBseSkgaXQuIFNuaXBwZXRzIGFyZSB3cml0dGVuXG51c2luZyBzeW50YXggbGlrZSB0aGlzOlxuXG4gICAgXCJmb3IgKGxldCAke2luZGV4fSA9IDA7ICR7aW5kZXh9IDwgJHtlbmR9OyAke2luZGV4fSsrKSB7XFxuXFx0JHt9XFxufVwiXG5cbkVhY2ggYCR7fWAgcGxhY2Vob2xkZXIgKHlvdSBtYXkgYWxzbyB1c2UgYCN7fWApIGluZGljYXRlcyBhIGZpZWxkXG50aGF0IHRoZSB1c2VyIGNhbiBmaWxsIGluLiBJdHMgbmFtZSwgaWYgYW55LCB3aWxsIGJlIHRoZSBkZWZhdWx0XG5jb250ZW50IGZvciB0aGUgZmllbGQuXG5cbldoZW4gdGhlIHNuaXBwZXQgaXMgYWN0aXZhdGVkIGJ5IGNhbGxpbmcgdGhlIHJldHVybmVkIGZ1bmN0aW9uLFxudGhlIGNvZGUgaXMgaW5zZXJ0ZWQgYXQgdGhlIGdpdmVuIHBvc2l0aW9uLiBOZXdsaW5lcyBpbiB0aGVcbnRlbXBsYXRlIGFyZSBpbmRlbnRlZCBieSB0aGUgaW5kZW50YXRpb24gb2YgdGhlIHN0YXJ0IGxpbmUsIHBsdXNcbm9uZSBbaW5kZW50IHVuaXRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuaW5kZW50VW5pdCkgcGVyIHRhYiBjaGFyYWN0ZXIgYWZ0ZXJcbnRoZSBuZXdsaW5lLlxuXG5PbiBhY3RpdmF0aW9uLCAoYWxsIGluc3RhbmNlcyBvZikgdGhlIGZpcnN0IGZpZWxkIGFyZSBzZWxlY3RlZC5cblRoZSB1c2VyIGNhbiBtb3ZlIGJldHdlZW4gZmllbGRzIHdpdGggVGFiIGFuZCBTaGlmdC1UYWIgYXMgbG9uZyBhc1xudGhlIGZpZWxkcyBhcmUgYWN0aXZlLiBNb3ZpbmcgdG8gdGhlIGxhc3QgZmllbGQgb3IgbW92aW5nIHRoZVxuY3Vyc29yIG91dCBvZiB0aGUgY3VycmVudCBmaWVsZCBkZWFjdGl2YXRlcyB0aGUgZmllbGRzLlxuXG5UaGUgb3JkZXIgb2YgZmllbGRzIGRlZmF1bHRzIHRvIHRleHR1YWwgb3JkZXIsIGJ1dCB5b3UgY2FuIGFkZFxubnVtYmVycyB0byBwbGFjZWhvbGRlcnMgKGAkezF9YCBvciBgJHsxOmRlZmF1bHRUZXh0fWApIHRvIHByb3ZpZGVcbmEgY3VzdG9tIG9yZGVyLlxuXG5UbyBpbmNsdWRlIGEgbGl0ZXJhbCBgJHtgIG9yIGAje2AgaW4geW91ciB0ZW1wbGF0ZSwgcHV0IGFcbmJhY2tzbGFzaCBhZnRlciB0aGUgZG9sbGFyIG9yIGhhc2ggYW5kIGJlZm9yZSB0aGUgYnJhY2UgKGAkXFxcXHtgKS5cblRoaXMgd2lsbCBiZSByZW1vdmVkIGFuZCB0aGUgc2VxdWVuY2Ugd2lsbCBub3QgYmUgaW50ZXJwcmV0ZWQgYXMgYVxucGxhY2Vob2xkZXIuXG4qL1xuZnVuY3Rpb24gc25pcHBldCh0ZW1wbGF0ZSkge1xuICAgIGxldCBzbmlwcGV0ID0gU25pcHBldC5wYXJzZSh0ZW1wbGF0ZSk7XG4gICAgcmV0dXJuIChlZGl0b3IsIF9jb21wbGV0aW9uLCBmcm9tLCB0bykgPT4ge1xuICAgICAgICBsZXQgeyB0ZXh0LCByYW5nZXMgfSA9IHNuaXBwZXQuaW5zdGFudGlhdGUoZWRpdG9yLnN0YXRlLCBmcm9tKTtcbiAgICAgICAgbGV0IHNwZWMgPSB7XG4gICAgICAgICAgICBjaGFuZ2VzOiB7IGZyb20sIHRvLCBpbnNlcnQ6IFRleHQub2YodGV4dCkgfSxcbiAgICAgICAgICAgIHNjcm9sbEludG9WaWV3OiB0cnVlXG4gICAgICAgIH07XG4gICAgICAgIGlmIChyYW5nZXMubGVuZ3RoKVxuICAgICAgICAgICAgc3BlYy5zZWxlY3Rpb24gPSBmaWVsZFNlbGVjdGlvbihyYW5nZXMsIDApO1xuICAgICAgICBpZiAocmFuZ2VzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIGxldCBhY3RpdmUgPSBuZXcgQWN0aXZlU25pcHBldChyYW5nZXMsIDApO1xuICAgICAgICAgICAgbGV0IGVmZmVjdHMgPSBzcGVjLmVmZmVjdHMgPSBbc2V0QWN0aXZlLm9mKGFjdGl2ZSldO1xuICAgICAgICAgICAgaWYgKGVkaXRvci5zdGF0ZS5maWVsZChzbmlwcGV0U3RhdGUsIGZhbHNlKSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIGVmZmVjdHMucHVzaChTdGF0ZUVmZmVjdC5hcHBlbmRDb25maWcub2YoW3NuaXBwZXRTdGF0ZSwgYWRkU25pcHBldEtleW1hcCwgc25pcHBldFBvaW50ZXJIYW5kbGVyLCBiYXNlVGhlbWVdKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWRpdG9yLmRpc3BhdGNoKGVkaXRvci5zdGF0ZS51cGRhdGUoc3BlYykpO1xuICAgIH07XG59XG5mdW5jdGlvbiBtb3ZlRmllbGQoZGlyKSB7XG4gICAgcmV0dXJuICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gICAgICAgIGxldCBhY3RpdmUgPSBzdGF0ZS5maWVsZChzbmlwcGV0U3RhdGUsIGZhbHNlKTtcbiAgICAgICAgaWYgKCFhY3RpdmUgfHwgZGlyIDwgMCAmJiBhY3RpdmUuYWN0aXZlID09IDApXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCBuZXh0ID0gYWN0aXZlLmFjdGl2ZSArIGRpciwgbGFzdCA9IGRpciA+IDAgJiYgIWFjdGl2ZS5yYW5nZXMuc29tZShyID0+IHIuZmllbGQgPT0gbmV4dCArIGRpcik7XG4gICAgICAgIGRpc3BhdGNoKHN0YXRlLnVwZGF0ZSh7XG4gICAgICAgICAgICBzZWxlY3Rpb246IGZpZWxkU2VsZWN0aW9uKGFjdGl2ZS5yYW5nZXMsIG5leHQpLFxuICAgICAgICAgICAgZWZmZWN0czogc2V0QWN0aXZlLm9mKGxhc3QgPyBudWxsIDogbmV3IEFjdGl2ZVNuaXBwZXQoYWN0aXZlLnJhbmdlcywgbmV4dCkpXG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbn1cbi8qKlxuQSBjb21tYW5kIHRoYXQgY2xlYXJzIHRoZSBhY3RpdmUgc25pcHBldCwgaWYgYW55LlxuKi9cbmNvbnN0IGNsZWFyU25pcHBldCA9ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gICAgbGV0IGFjdGl2ZSA9IHN0YXRlLmZpZWxkKHNuaXBwZXRTdGF0ZSwgZmFsc2UpO1xuICAgIGlmICghYWN0aXZlKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgZGlzcGF0Y2goc3RhdGUudXBkYXRlKHsgZWZmZWN0czogc2V0QWN0aXZlLm9mKG51bGwpIH0pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcbk1vdmUgdG8gdGhlIG5leHQgc25pcHBldCBmaWVsZCwgaWYgYXZhaWxhYmxlLlxuKi9cbmNvbnN0IG5leHRTbmlwcGV0RmllbGQgPSAvKkBfX1BVUkVfXyovbW92ZUZpZWxkKDEpO1xuLyoqXG5Nb3ZlIHRvIHRoZSBwcmV2aW91cyBzbmlwcGV0IGZpZWxkLCBpZiBhdmFpbGFibGUuXG4qL1xuY29uc3QgcHJldlNuaXBwZXRGaWVsZCA9IC8qQF9fUFVSRV9fKi9tb3ZlRmllbGQoLTEpO1xuY29uc3QgZGVmYXVsdFNuaXBwZXRLZXltYXAgPSBbXG4gICAgeyBrZXk6IFwiVGFiXCIsIHJ1bjogbmV4dFNuaXBwZXRGaWVsZCwgc2hpZnQ6IHByZXZTbmlwcGV0RmllbGQgfSxcbiAgICB7IGtleTogXCJFc2NhcGVcIiwgcnVuOiBjbGVhclNuaXBwZXQgfVxuXTtcbi8qKlxuQSBmYWNldCB0aGF0IGNhbiBiZSB1c2VkIHRvIGNvbmZpZ3VyZSB0aGUga2V5IGJpbmRpbmdzIHVzZWQgYnlcbnNuaXBwZXRzLiBUaGUgZGVmYXVsdCBiaW5kcyBUYWIgdG9cbltgbmV4dFNuaXBwZXRGaWVsZGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jYXV0b2NvbXBsZXRlLm5leHRTbmlwcGV0RmllbGQpLCBTaGlmdC1UYWIgdG9cbltgcHJldlNuaXBwZXRGaWVsZGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jYXV0b2NvbXBsZXRlLnByZXZTbmlwcGV0RmllbGQpLCBhbmQgRXNjYXBlXG50byBbYGNsZWFyU25pcHBldGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jYXV0b2NvbXBsZXRlLmNsZWFyU25pcHBldCkuXG4qL1xuY29uc3Qgc25pcHBldEtleW1hcCA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmUobWFwcykgeyByZXR1cm4gbWFwcy5sZW5ndGggPyBtYXBzWzBdIDogZGVmYXVsdFNuaXBwZXRLZXltYXA7IH1cbn0pO1xuY29uc3QgYWRkU25pcHBldEtleW1hcCA9IC8qQF9fUFVSRV9fKi9QcmVjLmhpZ2hlc3QoLypAX19QVVJFX18qL2tleW1hcC5jb21wdXRlKFtzbmlwcGV0S2V5bWFwXSwgc3RhdGUgPT4gc3RhdGUuZmFjZXQoc25pcHBldEtleW1hcCkpKTtcbi8qKlxuQ3JlYXRlIGEgY29tcGxldGlvbiBmcm9tIGEgc25pcHBldC4gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCB0aGVcbnByb3BlcnRpZXMgZnJvbSBgY29tcGxldGlvbmAsIHBsdXMgYW4gYGFwcGx5YCBmdW5jdGlvbiB0aGF0XG5hcHBsaWVzIHRoZSBzbmlwcGV0LlxuKi9cbmZ1bmN0aW9uIHNuaXBwZXRDb21wbGV0aW9uKHRlbXBsYXRlLCBjb21wbGV0aW9uKSB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgY29tcGxldGlvbiksIHsgYXBwbHk6IHNuaXBwZXQodGVtcGxhdGUpIH0pO1xufVxuY29uc3Qgc25pcHBldFBvaW50ZXJIYW5kbGVyID0gLypAX19QVVJFX18qL0VkaXRvclZpZXcuZG9tRXZlbnRIYW5kbGVycyh7XG4gICAgbW91c2Vkb3duKGV2ZW50LCB2aWV3KSB7XG4gICAgICAgIGxldCBhY3RpdmUgPSB2aWV3LnN0YXRlLmZpZWxkKHNuaXBwZXRTdGF0ZSwgZmFsc2UpLCBwb3M7XG4gICAgICAgIGlmICghYWN0aXZlIHx8IChwb3MgPSB2aWV3LnBvc0F0Q29vcmRzKHsgeDogZXZlbnQuY2xpZW50WCwgeTogZXZlbnQuY2xpZW50WSB9KSkgPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgbGV0IG1hdGNoID0gYWN0aXZlLnJhbmdlcy5maW5kKHIgPT4gci5mcm9tIDw9IHBvcyAmJiByLnRvID49IHBvcyk7XG4gICAgICAgIGlmICghbWF0Y2ggfHwgbWF0Y2guZmllbGQgPT0gYWN0aXZlLmFjdGl2ZSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdmlldy5kaXNwYXRjaCh7XG4gICAgICAgICAgICBzZWxlY3Rpb246IGZpZWxkU2VsZWN0aW9uKGFjdGl2ZS5yYW5nZXMsIG1hdGNoLmZpZWxkKSxcbiAgICAgICAgICAgIGVmZmVjdHM6IHNldEFjdGl2ZS5vZihhY3RpdmUucmFuZ2VzLnNvbWUociA9PiByLmZpZWxkID4gbWF0Y2guZmllbGQpID8gbmV3IEFjdGl2ZVNuaXBwZXQoYWN0aXZlLnJhbmdlcywgbWF0Y2guZmllbGQpIDogbnVsbClcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn0pO1xuXG5mdW5jdGlvbiB3b3JkUkUod29yZENoYXJzKSB7XG4gICAgbGV0IGVzY2FwZWQgPSB3b3JkQ2hhcnMucmVwbGFjZSgvW1xcXFxbLisqPygpe3xeJF0vZywgXCJcXFxcJCZcIik7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoYFtcXFxccHtBbHBoYWJldGljfVxcXFxwe051bWJlcn1fJHtlc2NhcGVkfV0rYCwgXCJ1Z1wiKTtcbiAgICB9XG4gICAgY2F0Y2ggKF9hKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVnRXhwKGBbXFx3JHtlc2NhcGVkfV1gLCBcImdcIik7XG4gICAgfVxufVxuZnVuY3Rpb24gbWFwUkUocmUsIGYpIHtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChmKHJlLnNvdXJjZSksIHJlLnVuaWNvZGUgPyBcInVcIiA6IFwiXCIpO1xufVxuY29uc3Qgd29yZENhY2hlcyA9IC8qQF9fUFVSRV9fKi9PYmplY3QuY3JlYXRlKG51bGwpO1xuZnVuY3Rpb24gd29yZENhY2hlKHdvcmRDaGFycykge1xuICAgIHJldHVybiB3b3JkQ2FjaGVzW3dvcmRDaGFyc10gfHwgKHdvcmRDYWNoZXNbd29yZENoYXJzXSA9IG5ldyBXZWFrTWFwKTtcbn1cbmZ1bmN0aW9uIHN0b3JlV29yZHMoZG9jLCB3b3JkUkUsIHJlc3VsdCwgc2VlbiwgaWdub3JlQXQpIHtcbiAgICBmb3IgKGxldCBsaW5lcyA9IGRvYy5pdGVyTGluZXMoKSwgcG9zID0gMDsgIWxpbmVzLm5leHQoKS5kb25lOykge1xuICAgICAgICBsZXQgeyB2YWx1ZSB9ID0gbGluZXMsIG07XG4gICAgICAgIHdvcmRSRS5sYXN0SW5kZXggPSAwO1xuICAgICAgICB3aGlsZSAobSA9IHdvcmRSRS5leGVjKHZhbHVlKSkge1xuICAgICAgICAgICAgaWYgKCFzZWVuW21bMF1dICYmIHBvcyArIG0uaW5kZXggIT0gaWdub3JlQXQpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh7IHR5cGU6IFwidGV4dFwiLCBsYWJlbDogbVswXSB9KTtcbiAgICAgICAgICAgICAgICBzZWVuW21bMF1dID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCA+PSAyMDAwIC8qIEMuTWF4TGlzdCAqLylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHBvcyArPSB2YWx1ZS5sZW5ndGggKyAxO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNvbGxlY3RXb3Jkcyhkb2MsIGNhY2hlLCB3b3JkUkUsIHRvLCBpZ25vcmVBdCkge1xuICAgIGxldCBiaWcgPSBkb2MubGVuZ3RoID49IDEwMDAgLyogQy5NaW5DYWNoZUxlbiAqLztcbiAgICBsZXQgY2FjaGVkID0gYmlnICYmIGNhY2hlLmdldChkb2MpO1xuICAgIGlmIChjYWNoZWQpXG4gICAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgbGV0IHJlc3VsdCA9IFtdLCBzZWVuID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBpZiAoZG9jLmNoaWxkcmVuKSB7XG4gICAgICAgIGxldCBwb3MgPSAwO1xuICAgICAgICBmb3IgKGxldCBjaCBvZiBkb2MuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGlmIChjaC5sZW5ndGggPj0gMTAwMCAvKiBDLk1pbkNhY2hlTGVuICovKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgYyBvZiBjb2xsZWN0V29yZHMoY2gsIGNhY2hlLCB3b3JkUkUsIHRvIC0gcG9zLCBpZ25vcmVBdCAtIHBvcykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzZWVuW2MubGFiZWxdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWVuW2MubGFiZWxdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc3RvcmVXb3JkcyhjaCwgd29yZFJFLCByZXN1bHQsIHNlZW4sIGlnbm9yZUF0IC0gcG9zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvcyArPSBjaC5sZW5ndGggKyAxO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzdG9yZVdvcmRzKGRvYywgd29yZFJFLCByZXN1bHQsIHNlZW4sIGlnbm9yZUF0KTtcbiAgICB9XG4gICAgaWYgKGJpZyAmJiByZXN1bHQubGVuZ3RoIDwgMjAwMCAvKiBDLk1heExpc3QgKi8pXG4gICAgICAgIGNhY2hlLnNldChkb2MsIHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8qKlxuQSBjb21wbGV0aW9uIHNvdXJjZSB0aGF0IHdpbGwgc2NhbiB0aGUgZG9jdW1lbnQgZm9yIHdvcmRzICh1c2luZyBhXG5bY2hhcmFjdGVyIGNhdGVnb3JpemVyXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlLmNoYXJDYXRlZ29yaXplcikpLCBhbmRcbnJldHVybiB0aG9zZSBhcyBjb21wbGV0aW9ucy5cbiovXG5jb25zdCBjb21wbGV0ZUFueVdvcmQgPSBjb250ZXh0ID0+IHtcbiAgICBsZXQgd29yZENoYXJzID0gY29udGV4dC5zdGF0ZS5sYW5ndWFnZURhdGFBdChcIndvcmRDaGFyc1wiLCBjb250ZXh0LnBvcykuam9pbihcIlwiKTtcbiAgICBsZXQgcmUgPSB3b3JkUkUod29yZENoYXJzKTtcbiAgICBsZXQgdG9rZW4gPSBjb250ZXh0Lm1hdGNoQmVmb3JlKG1hcFJFKHJlLCBzID0+IHMgKyBcIiRcIikpO1xuICAgIGlmICghdG9rZW4gJiYgIWNvbnRleHQuZXhwbGljaXQpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGxldCBmcm9tID0gdG9rZW4gPyB0b2tlbi5mcm9tIDogY29udGV4dC5wb3M7XG4gICAgbGV0IG9wdGlvbnMgPSBjb2xsZWN0V29yZHMoY29udGV4dC5zdGF0ZS5kb2MsIHdvcmRDYWNoZSh3b3JkQ2hhcnMpLCByZSwgNTAwMDAgLyogQy5SYW5nZSAqLywgZnJvbSk7XG4gICAgcmV0dXJuIHsgZnJvbSwgb3B0aW9ucywgdmFsaWRGb3I6IG1hcFJFKHJlLCBzID0+IFwiXlwiICsgcykgfTtcbn07XG5cbmNvbnN0IGRlZmF1bHRzID0ge1xuICAgIGJyYWNrZXRzOiBbXCIoXCIsIFwiW1wiLCBcIntcIiwgXCInXCIsICdcIiddLFxuICAgIGJlZm9yZTogXCIpXX06Oz5cIixcbiAgICBzdHJpbmdQcmVmaXhlczogW11cbn07XG5jb25zdCBjbG9zZUJyYWNrZXRFZmZlY3QgPSAvKkBfX1BVUkVfXyovU3RhdGVFZmZlY3QuZGVmaW5lKHtcbiAgICBtYXAodmFsdWUsIG1hcHBpbmcpIHtcbiAgICAgICAgbGV0IG1hcHBlZCA9IG1hcHBpbmcubWFwUG9zKHZhbHVlLCAtMSwgTWFwTW9kZS5UcmFja0FmdGVyKTtcbiAgICAgICAgcmV0dXJuIG1hcHBlZCA9PSBudWxsID8gdW5kZWZpbmVkIDogbWFwcGVkO1xuICAgIH1cbn0pO1xuY29uc3Qgc2tpcEJyYWNrZXRFZmZlY3QgPSAvKkBfX1BVUkVfXyovU3RhdGVFZmZlY3QuZGVmaW5lKHtcbiAgICBtYXAodmFsdWUsIG1hcHBpbmcpIHsgcmV0dXJuIG1hcHBpbmcubWFwUG9zKHZhbHVlKTsgfVxufSk7XG5jb25zdCBjbG9zZWRCcmFja2V0ID0gLypAX19QVVJFX18qL25ldyBjbGFzcyBleHRlbmRzIFJhbmdlVmFsdWUge1xufTtcbmNsb3NlZEJyYWNrZXQuc3RhcnRTaWRlID0gMTtcbmNsb3NlZEJyYWNrZXQuZW5kU2lkZSA9IC0xO1xuY29uc3QgYnJhY2tldFN0YXRlID0gLypAX19QVVJFX18qL1N0YXRlRmllbGQuZGVmaW5lKHtcbiAgICBjcmVhdGUoKSB7IHJldHVybiBSYW5nZVNldC5lbXB0eTsgfSxcbiAgICB1cGRhdGUodmFsdWUsIHRyKSB7XG4gICAgICAgIGlmICh0ci5zZWxlY3Rpb24pIHtcbiAgICAgICAgICAgIGxldCBsaW5lU3RhcnQgPSB0ci5zdGF0ZS5kb2MubGluZUF0KHRyLnNlbGVjdGlvbi5tYWluLmhlYWQpLmZyb207XG4gICAgICAgICAgICBsZXQgcHJldkxpbmVTdGFydCA9IHRyLnN0YXJ0U3RhdGUuZG9jLmxpbmVBdCh0ci5zdGFydFN0YXRlLnNlbGVjdGlvbi5tYWluLmhlYWQpLmZyb207XG4gICAgICAgICAgICBpZiAobGluZVN0YXJ0ICE9IHRyLmNoYW5nZXMubWFwUG9zKHByZXZMaW5lU3RhcnQsIC0xKSlcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IFJhbmdlU2V0LmVtcHR5O1xuICAgICAgICB9XG4gICAgICAgIHZhbHVlID0gdmFsdWUubWFwKHRyLmNoYW5nZXMpO1xuICAgICAgICBmb3IgKGxldCBlZmZlY3Qgb2YgdHIuZWZmZWN0cykge1xuICAgICAgICAgICAgaWYgKGVmZmVjdC5pcyhjbG9zZUJyYWNrZXRFZmZlY3QpKVxuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUudXBkYXRlKHsgYWRkOiBbY2xvc2VkQnJhY2tldC5yYW5nZShlZmZlY3QudmFsdWUsIGVmZmVjdC52YWx1ZSArIDEpXSB9KTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGVmZmVjdC5pcyhza2lwQnJhY2tldEVmZmVjdCkpXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS51cGRhdGUoeyBmaWx0ZXI6IGZyb20gPT4gZnJvbSAhPSBlZmZlY3QudmFsdWUgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbn0pO1xuLyoqXG5FeHRlbnNpb24gdG8gZW5hYmxlIGJyYWNrZXQtY2xvc2luZyBiZWhhdmlvci4gV2hlbiBhIGNsb3NlYWJsZVxuYnJhY2tldCBpcyB0eXBlZCwgaXRzIGNsb3NpbmcgYnJhY2tldCBpcyBpbW1lZGlhdGVseSBpbnNlcnRlZFxuYWZ0ZXIgdGhlIGN1cnNvci4gV2hlbiBjbG9zaW5nIGEgYnJhY2tldCBkaXJlY3RseSBpbiBmcm9udCBvZiBhXG5jbG9zaW5nIGJyYWNrZXQgaW5zZXJ0ZWQgYnkgdGhlIGV4dGVuc2lvbiwgdGhlIGN1cnNvciBtb3ZlcyBvdmVyXG50aGF0IGJyYWNrZXQuXG4qL1xuZnVuY3Rpb24gY2xvc2VCcmFja2V0cygpIHtcbiAgICByZXR1cm4gW2lucHV0SGFuZGxlciwgYnJhY2tldFN0YXRlXTtcbn1cbmNvbnN0IGRlZmluZWRDbG9zaW5nID0gXCIoKVtde308PlwiO1xuZnVuY3Rpb24gY2xvc2luZyhjaCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVmaW5lZENsb3NpbmcubGVuZ3RoOyBpICs9IDIpXG4gICAgICAgIGlmIChkZWZpbmVkQ2xvc2luZy5jaGFyQ29kZUF0KGkpID09IGNoKVxuICAgICAgICAgICAgcmV0dXJuIGRlZmluZWRDbG9zaW5nLmNoYXJBdChpICsgMSk7XG4gICAgcmV0dXJuIGZyb21Db2RlUG9pbnQoY2ggPCAxMjggPyBjaCA6IGNoICsgMSk7XG59XG5mdW5jdGlvbiBjb25maWcoc3RhdGUsIHBvcykge1xuICAgIHJldHVybiBzdGF0ZS5sYW5ndWFnZURhdGFBdChcImNsb3NlQnJhY2tldHNcIiwgcG9zKVswXSB8fCBkZWZhdWx0cztcbn1cbmNvbnN0IGFuZHJvaWQgPSB0eXBlb2YgbmF2aWdhdG9yID09IFwib2JqZWN0XCIgJiYgLypAX19QVVJFX18qLy9BbmRyb2lkXFxiLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuY29uc3QgaW5wdXRIYW5kbGVyID0gLypAX19QVVJFX18qL0VkaXRvclZpZXcuaW5wdXRIYW5kbGVyLm9mKCh2aWV3LCBmcm9tLCB0bywgaW5zZXJ0KSA9PiB7XG4gICAgaWYgKChhbmRyb2lkID8gdmlldy5jb21wb3NpbmcgOiB2aWV3LmNvbXBvc2l0aW9uU3RhcnRlZCkgfHwgdmlldy5zdGF0ZS5yZWFkT25seSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBzZWwgPSB2aWV3LnN0YXRlLnNlbGVjdGlvbi5tYWluO1xuICAgIGlmIChpbnNlcnQubGVuZ3RoID4gMiB8fCBpbnNlcnQubGVuZ3RoID09IDIgJiYgY29kZVBvaW50U2l6ZShjb2RlUG9pbnRBdChpbnNlcnQsIDApKSA9PSAxIHx8XG4gICAgICAgIGZyb20gIT0gc2VsLmZyb20gfHwgdG8gIT0gc2VsLnRvKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IHRyID0gaW5zZXJ0QnJhY2tldCh2aWV3LnN0YXRlLCBpbnNlcnQpO1xuICAgIGlmICghdHIpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB2aWV3LmRpc3BhdGNoKHRyKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn0pO1xuLyoqXG5Db21tYW5kIHRoYXQgaW1wbGVtZW50cyBkZWxldGluZyBhIHBhaXIgb2YgbWF0Y2hpbmcgYnJhY2tldHMgd2hlblxudGhlIGN1cnNvciBpcyBiZXR3ZWVuIHRoZW0uXG4qL1xuY29uc3QgZGVsZXRlQnJhY2tldFBhaXIgPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICAgIGlmIChzdGF0ZS5yZWFkT25seSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBjb25mID0gY29uZmlnKHN0YXRlLCBzdGF0ZS5zZWxlY3Rpb24ubWFpbi5oZWFkKTtcbiAgICBsZXQgdG9rZW5zID0gY29uZi5icmFja2V0cyB8fCBkZWZhdWx0cy5icmFja2V0cztcbiAgICBsZXQgZG9udCA9IG51bGwsIGNoYW5nZXMgPSBzdGF0ZS5jaGFuZ2VCeVJhbmdlKHJhbmdlID0+IHtcbiAgICAgICAgaWYgKHJhbmdlLmVtcHR5KSB7XG4gICAgICAgICAgICBsZXQgYmVmb3JlID0gcHJldkNoYXIoc3RhdGUuZG9jLCByYW5nZS5oZWFkKTtcbiAgICAgICAgICAgIGZvciAobGV0IHRva2VuIG9mIHRva2Vucykge1xuICAgICAgICAgICAgICAgIGlmICh0b2tlbiA9PSBiZWZvcmUgJiYgbmV4dENoYXIoc3RhdGUuZG9jLCByYW5nZS5oZWFkKSA9PSBjbG9zaW5nKGNvZGVQb2ludEF0KHRva2VuLCAwKSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGNoYW5nZXM6IHsgZnJvbTogcmFuZ2UuaGVhZCAtIHRva2VuLmxlbmd0aCwgdG86IHJhbmdlLmhlYWQgKyB0b2tlbi5sZW5ndGggfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHJhbmdlLmhlYWQgLSB0b2tlbi5sZW5ndGgpIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgcmFuZ2U6IGRvbnQgPSByYW5nZSB9O1xuICAgIH0pO1xuICAgIGlmICghZG9udClcbiAgICAgICAgZGlzcGF0Y2goc3RhdGUudXBkYXRlKGNoYW5nZXMsIHsgc2Nyb2xsSW50b1ZpZXc6IHRydWUsIHVzZXJFdmVudDogXCJkZWxldGUuYmFja3dhcmRcIiB9KSk7XG4gICAgcmV0dXJuICFkb250O1xufTtcbi8qKlxuQ2xvc2UtYnJhY2tldHMgcmVsYXRlZCBrZXkgYmluZGluZ3MuIEJpbmRzIEJhY2tzcGFjZSB0b1xuW2BkZWxldGVCcmFja2V0UGFpcmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jYXV0b2NvbXBsZXRlLmRlbGV0ZUJyYWNrZXRQYWlyKS5cbiovXG5jb25zdCBjbG9zZUJyYWNrZXRzS2V5bWFwID0gW1xuICAgIHsga2V5OiBcIkJhY2tzcGFjZVwiLCBydW46IGRlbGV0ZUJyYWNrZXRQYWlyIH1cbl07XG4vKipcbkltcGxlbWVudHMgdGhlIGV4dGVuc2lvbidzIGJlaGF2aW9yIG9uIHRleHQgaW5zZXJ0aW9uLiBJZiB0aGVcbmdpdmVuIHN0cmluZyBjb3VudHMgYXMgYSBicmFja2V0IGluIHRoZSBsYW5ndWFnZSBhcm91bmQgdGhlXG5zZWxlY3Rpb24sIGFuZCByZXBsYWNpbmcgdGhlIHNlbGVjdGlvbiB3aXRoIGl0IHJlcXVpcmVzIGN1c3RvbVxuYmVoYXZpb3IgKGluc2VydGluZyBhIGNsb3NpbmcgdmVyc2lvbiBvciBza2lwcGluZyBwYXN0IGFcbnByZXZpb3VzbHktY2xvc2VkIGJyYWNrZXQpLCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgYSB0cmFuc2FjdGlvblxucmVwcmVzZW50aW5nIHRoYXQgY3VzdG9tIGJlaGF2aW9yLiAoWW91IG9ubHkgbmVlZCB0aGlzIGlmIHlvdSB3YW50XG50byBwcm9ncmFtbWF0aWNhbGx5IGluc2VydCBicmFja2V0c1x1MjAxNHRoZVxuW2BjbG9zZUJyYWNrZXRzYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNhdXRvY29tcGxldGUuY2xvc2VCcmFja2V0cykgZXh0ZW5zaW9uIHdpbGxcbnRha2UgY2FyZSBvZiBydW5uaW5nIHRoaXMgZm9yIHVzZXIgaW5wdXQuKVxuKi9cbmZ1bmN0aW9uIGluc2VydEJyYWNrZXQoc3RhdGUsIGJyYWNrZXQpIHtcbiAgICBsZXQgY29uZiA9IGNvbmZpZyhzdGF0ZSwgc3RhdGUuc2VsZWN0aW9uLm1haW4uaGVhZCk7XG4gICAgbGV0IHRva2VucyA9IGNvbmYuYnJhY2tldHMgfHwgZGVmYXVsdHMuYnJhY2tldHM7XG4gICAgZm9yIChsZXQgdG9rIG9mIHRva2Vucykge1xuICAgICAgICBsZXQgY2xvc2VkID0gY2xvc2luZyhjb2RlUG9pbnRBdCh0b2ssIDApKTtcbiAgICAgICAgaWYgKGJyYWNrZXQgPT0gdG9rKVxuICAgICAgICAgICAgcmV0dXJuIGNsb3NlZCA9PSB0b2sgPyBoYW5kbGVTYW1lKHN0YXRlLCB0b2ssIHRva2Vucy5pbmRleE9mKHRvayArIHRvayArIHRvaykgPiAtMSwgY29uZilcbiAgICAgICAgICAgICAgICA6IGhhbmRsZU9wZW4oc3RhdGUsIHRvaywgY2xvc2VkLCBjb25mLmJlZm9yZSB8fCBkZWZhdWx0cy5iZWZvcmUpO1xuICAgICAgICBpZiAoYnJhY2tldCA9PSBjbG9zZWQgJiYgY2xvc2VkQnJhY2tldEF0KHN0YXRlLCBzdGF0ZS5zZWxlY3Rpb24ubWFpbi5mcm9tKSlcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVDbG9zZShzdGF0ZSwgdG9rLCBjbG9zZWQpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGNsb3NlZEJyYWNrZXRBdChzdGF0ZSwgcG9zKSB7XG4gICAgbGV0IGZvdW5kID0gZmFsc2U7XG4gICAgc3RhdGUuZmllbGQoYnJhY2tldFN0YXRlKS5iZXR3ZWVuKDAsIHN0YXRlLmRvYy5sZW5ndGgsIGZyb20gPT4ge1xuICAgICAgICBpZiAoZnJvbSA9PSBwb3MpXG4gICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIGZvdW5kO1xufVxuZnVuY3Rpb24gbmV4dENoYXIoZG9jLCBwb3MpIHtcbiAgICBsZXQgbmV4dCA9IGRvYy5zbGljZVN0cmluZyhwb3MsIHBvcyArIDIpO1xuICAgIHJldHVybiBuZXh0LnNsaWNlKDAsIGNvZGVQb2ludFNpemUoY29kZVBvaW50QXQobmV4dCwgMCkpKTtcbn1cbmZ1bmN0aW9uIHByZXZDaGFyKGRvYywgcG9zKSB7XG4gICAgbGV0IHByZXYgPSBkb2Muc2xpY2VTdHJpbmcocG9zIC0gMiwgcG9zKTtcbiAgICByZXR1cm4gY29kZVBvaW50U2l6ZShjb2RlUG9pbnRBdChwcmV2LCAwKSkgPT0gcHJldi5sZW5ndGggPyBwcmV2IDogcHJldi5zbGljZSgxKTtcbn1cbmZ1bmN0aW9uIGhhbmRsZU9wZW4oc3RhdGUsIG9wZW4sIGNsb3NlLCBjbG9zZUJlZm9yZSkge1xuICAgIGxldCBkb250ID0gbnVsbCwgY2hhbmdlcyA9IHN0YXRlLmNoYW5nZUJ5UmFuZ2UocmFuZ2UgPT4ge1xuICAgICAgICBpZiAoIXJhbmdlLmVtcHR5KVxuICAgICAgICAgICAgcmV0dXJuIHsgY2hhbmdlczogW3sgaW5zZXJ0OiBvcGVuLCBmcm9tOiByYW5nZS5mcm9tIH0sIHsgaW5zZXJ0OiBjbG9zZSwgZnJvbTogcmFuZ2UudG8gfV0sXG4gICAgICAgICAgICAgICAgZWZmZWN0czogY2xvc2VCcmFja2V0RWZmZWN0Lm9mKHJhbmdlLnRvICsgb3Blbi5sZW5ndGgpLFxuICAgICAgICAgICAgICAgIHJhbmdlOiBFZGl0b3JTZWxlY3Rpb24ucmFuZ2UocmFuZ2UuYW5jaG9yICsgb3Blbi5sZW5ndGgsIHJhbmdlLmhlYWQgKyBvcGVuLmxlbmd0aCkgfTtcbiAgICAgICAgbGV0IG5leHQgPSBuZXh0Q2hhcihzdGF0ZS5kb2MsIHJhbmdlLmhlYWQpO1xuICAgICAgICBpZiAoIW5leHQgfHwgL1xccy8udGVzdChuZXh0KSB8fCBjbG9zZUJlZm9yZS5pbmRleE9mKG5leHQpID4gLTEpXG4gICAgICAgICAgICByZXR1cm4geyBjaGFuZ2VzOiB7IGluc2VydDogb3BlbiArIGNsb3NlLCBmcm9tOiByYW5nZS5oZWFkIH0sXG4gICAgICAgICAgICAgICAgZWZmZWN0czogY2xvc2VCcmFja2V0RWZmZWN0Lm9mKHJhbmdlLmhlYWQgKyBvcGVuLmxlbmd0aCksXG4gICAgICAgICAgICAgICAgcmFuZ2U6IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IocmFuZ2UuaGVhZCArIG9wZW4ubGVuZ3RoKSB9O1xuICAgICAgICByZXR1cm4geyByYW5nZTogZG9udCA9IHJhbmdlIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIGRvbnQgPyBudWxsIDogc3RhdGUudXBkYXRlKGNoYW5nZXMsIHtcbiAgICAgICAgc2Nyb2xsSW50b1ZpZXc6IHRydWUsXG4gICAgICAgIHVzZXJFdmVudDogXCJpbnB1dC50eXBlXCJcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGhhbmRsZUNsb3NlKHN0YXRlLCBfb3BlbiwgY2xvc2UpIHtcbiAgICBsZXQgZG9udCA9IG51bGwsIG1vdmVkID0gc3RhdGUuc2VsZWN0aW9uLnJhbmdlcy5tYXAocmFuZ2UgPT4ge1xuICAgICAgICBpZiAocmFuZ2UuZW1wdHkgJiYgbmV4dENoYXIoc3RhdGUuZG9jLCByYW5nZS5oZWFkKSA9PSBjbG9zZSlcbiAgICAgICAgICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHJhbmdlLmhlYWQgKyBjbG9zZS5sZW5ndGgpO1xuICAgICAgICByZXR1cm4gZG9udCA9IHJhbmdlO1xuICAgIH0pO1xuICAgIHJldHVybiBkb250ID8gbnVsbCA6IHN0YXRlLnVwZGF0ZSh7XG4gICAgICAgIHNlbGVjdGlvbjogRWRpdG9yU2VsZWN0aW9uLmNyZWF0ZShtb3ZlZCwgc3RhdGUuc2VsZWN0aW9uLm1haW5JbmRleCksXG4gICAgICAgIHNjcm9sbEludG9WaWV3OiB0cnVlLFxuICAgICAgICBlZmZlY3RzOiBzdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzLm1hcCgoeyBmcm9tIH0pID0+IHNraXBCcmFja2V0RWZmZWN0Lm9mKGZyb20pKVxuICAgIH0pO1xufVxuLy8gSGFuZGxlcyBjYXNlcyB3aGVyZSB0aGUgb3BlbiBhbmQgY2xvc2UgdG9rZW4gYXJlIHRoZSBzYW1lLCBhbmRcbi8vIHBvc3NpYmx5IHRyaXBsZSBxdW90ZXMgKGFzIGluIGBcIlwiXCJhYmNcIlwiXCJgLXN0eWxlIHF1b3RpbmcpLlxuZnVuY3Rpb24gaGFuZGxlU2FtZShzdGF0ZSwgdG9rZW4sIGFsbG93VHJpcGxlLCBjb25maWcpIHtcbiAgICBsZXQgc3RyaW5nUHJlZml4ZXMgPSBjb25maWcuc3RyaW5nUHJlZml4ZXMgfHwgZGVmYXVsdHMuc3RyaW5nUHJlZml4ZXM7XG4gICAgbGV0IGRvbnQgPSBudWxsLCBjaGFuZ2VzID0gc3RhdGUuY2hhbmdlQnlSYW5nZShyYW5nZSA9PiB7XG4gICAgICAgIGlmICghcmFuZ2UuZW1wdHkpXG4gICAgICAgICAgICByZXR1cm4geyBjaGFuZ2VzOiBbeyBpbnNlcnQ6IHRva2VuLCBmcm9tOiByYW5nZS5mcm9tIH0sIHsgaW5zZXJ0OiB0b2tlbiwgZnJvbTogcmFuZ2UudG8gfV0sXG4gICAgICAgICAgICAgICAgZWZmZWN0czogY2xvc2VCcmFja2V0RWZmZWN0Lm9mKHJhbmdlLnRvICsgdG9rZW4ubGVuZ3RoKSxcbiAgICAgICAgICAgICAgICByYW5nZTogRWRpdG9yU2VsZWN0aW9uLnJhbmdlKHJhbmdlLmFuY2hvciArIHRva2VuLmxlbmd0aCwgcmFuZ2UuaGVhZCArIHRva2VuLmxlbmd0aCkgfTtcbiAgICAgICAgbGV0IHBvcyA9IHJhbmdlLmhlYWQsIG5leHQgPSBuZXh0Q2hhcihzdGF0ZS5kb2MsIHBvcyksIHN0YXJ0O1xuICAgICAgICBpZiAobmV4dCA9PSB0b2tlbikge1xuICAgICAgICAgICAgaWYgKG5vZGVTdGFydChzdGF0ZSwgcG9zKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGNoYW5nZXM6IHsgaW5zZXJ0OiB0b2tlbiArIHRva2VuLCBmcm9tOiBwb3MgfSxcbiAgICAgICAgICAgICAgICAgICAgZWZmZWN0czogY2xvc2VCcmFja2V0RWZmZWN0Lm9mKHBvcyArIHRva2VuLmxlbmd0aCksXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHBvcyArIHRva2VuLmxlbmd0aCkgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNsb3NlZEJyYWNrZXRBdChzdGF0ZSwgcG9zKSkge1xuICAgICAgICAgICAgICAgIGxldCBpc1RyaXBsZSA9IGFsbG93VHJpcGxlICYmIHN0YXRlLnNsaWNlRG9jKHBvcywgcG9zICsgdG9rZW4ubGVuZ3RoICogMykgPT0gdG9rZW4gKyB0b2tlbiArIHRva2VuO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHJhbmdlOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHBvcyArIHRva2VuLmxlbmd0aCAqIChpc1RyaXBsZSA/IDMgOiAxKSksXG4gICAgICAgICAgICAgICAgICAgIGVmZmVjdHM6IHNraXBCcmFja2V0RWZmZWN0Lm9mKHBvcykgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChhbGxvd1RyaXBsZSAmJiBzdGF0ZS5zbGljZURvYyhwb3MgLSAyICogdG9rZW4ubGVuZ3RoLCBwb3MpID09IHRva2VuICsgdG9rZW4gJiZcbiAgICAgICAgICAgIChzdGFydCA9IGNhblN0YXJ0U3RyaW5nQXQoc3RhdGUsIHBvcyAtIDIgKiB0b2tlbi5sZW5ndGgsIHN0cmluZ1ByZWZpeGVzKSkgPiAtMSAmJlxuICAgICAgICAgICAgbm9kZVN0YXJ0KHN0YXRlLCBzdGFydCkpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGNoYW5nZXM6IHsgaW5zZXJ0OiB0b2tlbiArIHRva2VuICsgdG9rZW4gKyB0b2tlbiwgZnJvbTogcG9zIH0sXG4gICAgICAgICAgICAgICAgZWZmZWN0czogY2xvc2VCcmFja2V0RWZmZWN0Lm9mKHBvcyArIHRva2VuLmxlbmd0aCksXG4gICAgICAgICAgICAgICAgcmFuZ2U6IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IocG9zICsgdG9rZW4ubGVuZ3RoKSB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHN0YXRlLmNoYXJDYXRlZ29yaXplcihwb3MpKG5leHQpICE9IENoYXJDYXRlZ29yeS5Xb3JkKSB7XG4gICAgICAgICAgICBpZiAoY2FuU3RhcnRTdHJpbmdBdChzdGF0ZSwgcG9zLCBzdHJpbmdQcmVmaXhlcykgPiAtMSAmJiAhcHJvYmFibHlJblN0cmluZyhzdGF0ZSwgcG9zLCB0b2tlbiwgc3RyaW5nUHJlZml4ZXMpKVxuICAgICAgICAgICAgICAgIHJldHVybiB7IGNoYW5nZXM6IHsgaW5zZXJ0OiB0b2tlbiArIHRva2VuLCBmcm9tOiBwb3MgfSxcbiAgICAgICAgICAgICAgICAgICAgZWZmZWN0czogY2xvc2VCcmFja2V0RWZmZWN0Lm9mKHBvcyArIHRva2VuLmxlbmd0aCksXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHBvcyArIHRva2VuLmxlbmd0aCkgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyByYW5nZTogZG9udCA9IHJhbmdlIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIGRvbnQgPyBudWxsIDogc3RhdGUudXBkYXRlKGNoYW5nZXMsIHtcbiAgICAgICAgc2Nyb2xsSW50b1ZpZXc6IHRydWUsXG4gICAgICAgIHVzZXJFdmVudDogXCJpbnB1dC50eXBlXCJcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIG5vZGVTdGFydChzdGF0ZSwgcG9zKSB7XG4gICAgbGV0IHRyZWUgPSBzeW50YXhUcmVlKHN0YXRlKS5yZXNvbHZlSW5uZXIocG9zICsgMSk7XG4gICAgcmV0dXJuIHRyZWUucGFyZW50ICYmIHRyZWUuZnJvbSA9PSBwb3M7XG59XG5mdW5jdGlvbiBwcm9iYWJseUluU3RyaW5nKHN0YXRlLCBwb3MsIHF1b3RlVG9rZW4sIHByZWZpeGVzKSB7XG4gICAgbGV0IG5vZGUgPSBzeW50YXhUcmVlKHN0YXRlKS5yZXNvbHZlSW5uZXIocG9zLCAtMSk7XG4gICAgbGV0IG1heFByZWZpeCA9IHByZWZpeGVzLnJlZHVjZSgobSwgcCkgPT4gTWF0aC5tYXgobSwgcC5sZW5ndGgpLCAwKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xuICAgICAgICBsZXQgc3RhcnQgPSBzdGF0ZS5zbGljZURvYyhub2RlLmZyb20sIE1hdGgubWluKG5vZGUudG8sIG5vZGUuZnJvbSArIHF1b3RlVG9rZW4ubGVuZ3RoICsgbWF4UHJlZml4KSk7XG4gICAgICAgIGxldCBxdW90ZVBvcyA9IHN0YXJ0LmluZGV4T2YocXVvdGVUb2tlbik7XG4gICAgICAgIGlmICghcXVvdGVQb3MgfHwgcXVvdGVQb3MgPiAtMSAmJiBwcmVmaXhlcy5pbmRleE9mKHN0YXJ0LnNsaWNlKDAsIHF1b3RlUG9zKSkgPiAtMSkge1xuICAgICAgICAgICAgbGV0IGZpcnN0ID0gbm9kZS5maXJzdENoaWxkO1xuICAgICAgICAgICAgd2hpbGUgKGZpcnN0ICYmIGZpcnN0LmZyb20gPT0gbm9kZS5mcm9tICYmIGZpcnN0LnRvIC0gZmlyc3QuZnJvbSA+IHF1b3RlVG9rZW4ubGVuZ3RoICsgcXVvdGVQb3MpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuc2xpY2VEb2MoZmlyc3QudG8gLSBxdW90ZVRva2VuLmxlbmd0aCwgZmlyc3QudG8pID09IHF1b3RlVG9rZW4pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICBmaXJzdCA9IGZpcnN0LmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcGFyZW50ID0gbm9kZS50byA9PSBwb3MgJiYgbm9kZS5wYXJlbnQ7XG4gICAgICAgIGlmICghcGFyZW50KVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIG5vZGUgPSBwYXJlbnQ7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGNhblN0YXJ0U3RyaW5nQXQoc3RhdGUsIHBvcywgcHJlZml4ZXMpIHtcbiAgICBsZXQgY2hhckNhdCA9IHN0YXRlLmNoYXJDYXRlZ29yaXplcihwb3MpO1xuICAgIGlmIChjaGFyQ2F0KHN0YXRlLnNsaWNlRG9jKHBvcyAtIDEsIHBvcykpICE9IENoYXJDYXRlZ29yeS5Xb3JkKVxuICAgICAgICByZXR1cm4gcG9zO1xuICAgIGZvciAobGV0IHByZWZpeCBvZiBwcmVmaXhlcykge1xuICAgICAgICBsZXQgc3RhcnQgPSBwb3MgLSBwcmVmaXgubGVuZ3RoO1xuICAgICAgICBpZiAoc3RhdGUuc2xpY2VEb2Moc3RhcnQsIHBvcykgPT0gcHJlZml4ICYmIGNoYXJDYXQoc3RhdGUuc2xpY2VEb2Moc3RhcnQgLSAxLCBzdGFydCkpICE9IENoYXJDYXRlZ29yeS5Xb3JkKVxuICAgICAgICAgICAgcmV0dXJuIHN0YXJ0O1xuICAgIH1cbiAgICByZXR1cm4gLTE7XG59XG5cbi8qKlxuUmV0dXJucyBhbiBleHRlbnNpb24gdGhhdCBlbmFibGVzIGF1dG9jb21wbGV0aW9uLlxuKi9cbmZ1bmN0aW9uIGF1dG9jb21wbGV0aW9uKGNvbmZpZyA9IHt9KSB7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgY29tcGxldGlvblN0YXRlLFxuICAgICAgICBjb21wbGV0aW9uQ29uZmlnLm9mKGNvbmZpZyksXG4gICAgICAgIGNvbXBsZXRpb25QbHVnaW4sXG4gICAgICAgIGNvbXBsZXRpb25LZXltYXBFeHQsXG4gICAgICAgIGJhc2VUaGVtZVxuICAgIF07XG59XG4vKipcbkJhc2ljIGtleWJpbmRpbmdzIGZvciBhdXRvY29tcGxldGlvbi5cblxuIC0gQ3RybC1TcGFjZTogW2BzdGFydENvbXBsZXRpb25gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2F1dG9jb21wbGV0ZS5zdGFydENvbXBsZXRpb24pXG4gLSBFc2NhcGU6IFtgY2xvc2VDb21wbGV0aW9uYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNhdXRvY29tcGxldGUuY2xvc2VDb21wbGV0aW9uKVxuIC0gQXJyb3dEb3duOiBbYG1vdmVDb21wbGV0aW9uU2VsZWN0aW9uYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNhdXRvY29tcGxldGUubW92ZUNvbXBsZXRpb25TZWxlY3Rpb24pYCh0cnVlKWBcbiAtIEFycm93VXA6IFtgbW92ZUNvbXBsZXRpb25TZWxlY3Rpb25gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2F1dG9jb21wbGV0ZS5tb3ZlQ29tcGxldGlvblNlbGVjdGlvbilgKGZhbHNlKWBcbiAtIFBhZ2VEb3duOiBbYG1vdmVDb21wbGV0aW9uU2VsZWN0aW9uYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNhdXRvY29tcGxldGUubW92ZUNvbXBsZXRpb25TZWxlY3Rpb24pYCh0cnVlLCBcInBhZ2VcIilgXG4gLSBQYWdlRG93bjogW2Btb3ZlQ29tcGxldGlvblNlbGVjdGlvbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jYXV0b2NvbXBsZXRlLm1vdmVDb21wbGV0aW9uU2VsZWN0aW9uKWAodHJ1ZSwgXCJwYWdlXCIpYFxuIC0gRW50ZXI6IFtgYWNjZXB0Q29tcGxldGlvbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jYXV0b2NvbXBsZXRlLmFjY2VwdENvbXBsZXRpb24pXG4qL1xuY29uc3QgY29tcGxldGlvbktleW1hcCA9IFtcbiAgICB7IGtleTogXCJDdHJsLVNwYWNlXCIsIHJ1bjogc3RhcnRDb21wbGV0aW9uIH0sXG4gICAgeyBrZXk6IFwiRXNjYXBlXCIsIHJ1bjogY2xvc2VDb21wbGV0aW9uIH0sXG4gICAgeyBrZXk6IFwiQXJyb3dEb3duXCIsIHJ1bjogLypAX19QVVJFX18qL21vdmVDb21wbGV0aW9uU2VsZWN0aW9uKHRydWUpIH0sXG4gICAgeyBrZXk6IFwiQXJyb3dVcFwiLCBydW46IC8qQF9fUFVSRV9fKi9tb3ZlQ29tcGxldGlvblNlbGVjdGlvbihmYWxzZSkgfSxcbiAgICB7IGtleTogXCJQYWdlRG93blwiLCBydW46IC8qQF9fUFVSRV9fKi9tb3ZlQ29tcGxldGlvblNlbGVjdGlvbih0cnVlLCBcInBhZ2VcIikgfSxcbiAgICB7IGtleTogXCJQYWdlVXBcIiwgcnVuOiAvKkBfX1BVUkVfXyovbW92ZUNvbXBsZXRpb25TZWxlY3Rpb24oZmFsc2UsIFwicGFnZVwiKSB9LFxuICAgIHsga2V5OiBcIkVudGVyXCIsIHJ1bjogYWNjZXB0Q29tcGxldGlvbiB9XG5dO1xuY29uc3QgY29tcGxldGlvbktleW1hcEV4dCA9IC8qQF9fUFVSRV9fKi9QcmVjLmhpZ2hlc3QoLypAX19QVVJFX18qL2tleW1hcC5jb21wdXRlTihbY29tcGxldGlvbkNvbmZpZ10sIHN0YXRlID0+IHN0YXRlLmZhY2V0KGNvbXBsZXRpb25Db25maWcpLmRlZmF1bHRLZXltYXAgPyBbY29tcGxldGlvbktleW1hcF0gOiBbXSkpO1xuLyoqXG5HZXQgdGhlIGN1cnJlbnQgY29tcGxldGlvbiBzdGF0dXMuIFdoZW4gY29tcGxldGlvbnMgYXJlIGF2YWlsYWJsZSxcbnRoaXMgd2lsbCByZXR1cm4gYFwiYWN0aXZlXCJgLiBXaGVuIGNvbXBsZXRpb25zIGFyZSBwZW5kaW5nIChpbiB0aGVcbnByb2Nlc3Mgb2YgYmVpbmcgcXVlcmllZCksIHRoaXMgcmV0dXJucyBgXCJwZW5kaW5nXCJgLiBPdGhlcndpc2UsIGl0XG5yZXR1cm5zIGBudWxsYC5cbiovXG5mdW5jdGlvbiBjb21wbGV0aW9uU3RhdHVzKHN0YXRlKSB7XG4gICAgbGV0IGNTdGF0ZSA9IHN0YXRlLmZpZWxkKGNvbXBsZXRpb25TdGF0ZSwgZmFsc2UpO1xuICAgIHJldHVybiBjU3RhdGUgJiYgY1N0YXRlLmFjdGl2ZS5zb21lKGEgPT4gYS5zdGF0ZSA9PSAxIC8qIFN0YXRlLlBlbmRpbmcgKi8pID8gXCJwZW5kaW5nXCJcbiAgICAgICAgOiBjU3RhdGUgJiYgY1N0YXRlLmFjdGl2ZS5zb21lKGEgPT4gYS5zdGF0ZSAhPSAwIC8qIFN0YXRlLkluYWN0aXZlICovKSA/IFwiYWN0aXZlXCIgOiBudWxsO1xufVxuY29uc3QgY29tcGxldGlvbkFycmF5Q2FjaGUgPSAvKkBfX1BVUkVfXyovbmV3IFdlYWtNYXA7XG4vKipcblJldHVybnMgdGhlIGF2YWlsYWJsZSBjb21wbGV0aW9ucyBhcyBhbiBhcnJheS5cbiovXG5mdW5jdGlvbiBjdXJyZW50Q29tcGxldGlvbnMoc3RhdGUpIHtcbiAgICB2YXIgX2E7XG4gICAgbGV0IG9wZW4gPSAoX2EgPSBzdGF0ZS5maWVsZChjb21wbGV0aW9uU3RhdGUsIGZhbHNlKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm9wZW47XG4gICAgaWYgKCFvcGVuIHx8IG9wZW4uZGlzYWJsZWQpXG4gICAgICAgIHJldHVybiBbXTtcbiAgICBsZXQgY29tcGxldGlvbnMgPSBjb21wbGV0aW9uQXJyYXlDYWNoZS5nZXQob3Blbi5vcHRpb25zKTtcbiAgICBpZiAoIWNvbXBsZXRpb25zKVxuICAgICAgICBjb21wbGV0aW9uQXJyYXlDYWNoZS5zZXQob3Blbi5vcHRpb25zLCBjb21wbGV0aW9ucyA9IG9wZW4ub3B0aW9ucy5tYXAobyA9PiBvLmNvbXBsZXRpb24pKTtcbiAgICByZXR1cm4gY29tcGxldGlvbnM7XG59XG4vKipcblJldHVybiB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGNvbXBsZXRpb24sIGlmIGFueS5cbiovXG5mdW5jdGlvbiBzZWxlY3RlZENvbXBsZXRpb24oc3RhdGUpIHtcbiAgICB2YXIgX2E7XG4gICAgbGV0IG9wZW4gPSAoX2EgPSBzdGF0ZS5maWVsZChjb21wbGV0aW9uU3RhdGUsIGZhbHNlKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm9wZW47XG4gICAgcmV0dXJuIG9wZW4gJiYgIW9wZW4uZGlzYWJsZWQgJiYgb3Blbi5zZWxlY3RlZCA+PSAwID8gb3Blbi5vcHRpb25zW29wZW4uc2VsZWN0ZWRdLmNvbXBsZXRpb24gOiBudWxsO1xufVxuLyoqXG5SZXR1cm5zIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgcG9zaXRpb24gaW4gdGhlIGFjdGl2ZSBjb21wbGV0aW9uXG5saXN0LCBvciBudWxsIGlmIG5vIGNvbXBsZXRpb25zIGFyZSBhY3RpdmUuXG4qL1xuZnVuY3Rpb24gc2VsZWN0ZWRDb21wbGV0aW9uSW5kZXgoc3RhdGUpIHtcbiAgICB2YXIgX2E7XG4gICAgbGV0IG9wZW4gPSAoX2EgPSBzdGF0ZS5maWVsZChjb21wbGV0aW9uU3RhdGUsIGZhbHNlKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm9wZW47XG4gICAgcmV0dXJuIG9wZW4gJiYgIW9wZW4uZGlzYWJsZWQgJiYgb3Blbi5zZWxlY3RlZCA+PSAwID8gb3Blbi5zZWxlY3RlZCA6IG51bGw7XG59XG4vKipcbkNyZWF0ZSBhbiBlZmZlY3QgdGhhdCBjYW4gYmUgYXR0YWNoZWQgdG8gYSB0cmFuc2FjdGlvbiB0byBjaGFuZ2VcbnRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgY29tcGxldGlvbi5cbiovXG5mdW5jdGlvbiBzZXRTZWxlY3RlZENvbXBsZXRpb24oaW5kZXgpIHtcbiAgICByZXR1cm4gc2V0U2VsZWN0ZWRFZmZlY3Qub2YoaW5kZXgpO1xufVxuXG5leHBvcnQgeyBDb21wbGV0aW9uQ29udGV4dCwgYWNjZXB0Q29tcGxldGlvbiwgYXV0b2NvbXBsZXRpb24sIGNsZWFyU25pcHBldCwgY2xvc2VCcmFja2V0cywgY2xvc2VCcmFja2V0c0tleW1hcCwgY2xvc2VDb21wbGV0aW9uLCBjb21wbGV0ZUFueVdvcmQsIGNvbXBsZXRlRnJvbUxpc3QsIGNvbXBsZXRpb25LZXltYXAsIGNvbXBsZXRpb25TdGF0dXMsIGN1cnJlbnRDb21wbGV0aW9ucywgZGVsZXRlQnJhY2tldFBhaXIsIGlmSW4sIGlmTm90SW4sIGluc2VydEJyYWNrZXQsIGluc2VydENvbXBsZXRpb25UZXh0LCBtb3ZlQ29tcGxldGlvblNlbGVjdGlvbiwgbmV4dFNuaXBwZXRGaWVsZCwgcGlja2VkQ29tcGxldGlvbiwgcHJldlNuaXBwZXRGaWVsZCwgc2VsZWN0ZWRDb21wbGV0aW9uLCBzZWxlY3RlZENvbXBsZXRpb25JbmRleCwgc2V0U2VsZWN0ZWRDb21wbGV0aW9uLCBzbmlwcGV0LCBzbmlwcGV0Q29tcGxldGlvbiwgc25pcHBldEtleW1hcCwgc3RhcnRDb21wbGV0aW9uIH07XG4iLCAiaW1wb3J0IHsgUGFyc2VyLCBOb2RlU2V0LCBOb2RlVHlwZSwgRGVmYXVsdEJ1ZmZlckxlbmd0aCwgTm9kZVByb3AsIFRyZWUsIEl0ZXJNb2RlIH0gZnJvbSAnQGxlemVyL2NvbW1vbic7XG5cbi8vLyBBIHBhcnNlIHN0YWNrLiBUaGVzZSBhcmUgdXNlZCBpbnRlcm5hbGx5IGJ5IHRoZSBwYXJzZXIgdG8gdHJhY2tcbi8vLyBwYXJzaW5nIHByb2dyZXNzLiBUaGV5IGFsc28gcHJvdmlkZSBzb21lIHByb3BlcnRpZXMgYW5kIG1ldGhvZHNcbi8vLyB0aGF0IGV4dGVybmFsIGNvZGUgc3VjaCBhcyBhIHRva2VuaXplciBjYW4gdXNlIHRvIGdldCBpbmZvcm1hdGlvblxuLy8vIGFib3V0IHRoZSBwYXJzZSBzdGF0ZS5cbmNsYXNzIFN0YWNrIHtcbiAgICAvLy8gQGludGVybmFsXG4gICAgY29uc3RydWN0b3IoXG4gICAgLy8vIFRoZSBwYXJzZSB0aGF0IHRoaXMgc3RhY2sgaXMgcGFydCBvZiBAaW50ZXJuYWxcbiAgICBwLCBcbiAgICAvLy8gSG9sZHMgc3RhdGUsIGlucHV0IHBvcywgYnVmZmVyIGluZGV4IHRyaXBsZXRzIGZvciBhbGwgYnV0IHRoZVxuICAgIC8vLyB0b3Agc3RhdGUgQGludGVybmFsXG4gICAgc3RhY2ssIFxuICAgIC8vLyBUaGUgY3VycmVudCBwYXJzZSBzdGF0ZSBAaW50ZXJuYWxcbiAgICBzdGF0ZSwgXG4gICAgLy8gVGhlIHBvc2l0aW9uIGF0IHdoaWNoIHRoZSBuZXh0IHJlZHVjZSBzaG91bGQgdGFrZSBwbGFjZS4gVGhpc1xuICAgIC8vIGNhbiBiZSBsZXNzIHRoYW4gYHRoaXMucG9zYCB3aGVuIHNraXBwZWQgZXhwcmVzc2lvbnMgaGF2ZSBiZWVuXG4gICAgLy8gYWRkZWQgdG8gdGhlIHN0YWNrICh3aGljaCBzaG91bGQgYmUgbW92ZWQgb3V0c2lkZSBvZiB0aGUgbmV4dFxuICAgIC8vIHJlZHVjdGlvbilcbiAgICAvLy8gQGludGVybmFsXG4gICAgcmVkdWNlUG9zLCBcbiAgICAvLy8gVGhlIGlucHV0IHBvc2l0aW9uIHVwIHRvIHdoaWNoIHRoaXMgc3RhY2sgaGFzIHBhcnNlZC5cbiAgICBwb3MsIFxuICAgIC8vLyBUaGUgZHluYW1pYyBzY29yZSBvZiB0aGUgc3RhY2ssIGluY2x1ZGluZyBkeW5hbWljIHByZWNlZGVuY2VcbiAgICAvLy8gYW5kIGVycm9yLXJlY292ZXJ5IHBlbmFsdGllc1xuICAgIC8vLyBAaW50ZXJuYWxcbiAgICBzY29yZSwgXG4gICAgLy8gVGhlIG91dHB1dCBidWZmZXIuIEhvbGRzICh0eXBlLCBzdGFydCwgZW5kLCBzaXplKSBxdWFkc1xuICAgIC8vIHJlcHJlc2VudGluZyBub2RlcyBjcmVhdGVkIGJ5IHRoZSBwYXJzZXIsIHdoZXJlIGBzaXplYCBpc1xuICAgIC8vIGFtb3VudCBvZiBidWZmZXIgYXJyYXkgZW50cmllcyBjb3ZlcmVkIGJ5IHRoaXMgbm9kZS5cbiAgICAvLy8gQGludGVybmFsXG4gICAgYnVmZmVyLCBcbiAgICAvLyBUaGUgYmFzZSBvZmZzZXQgb2YgdGhlIGJ1ZmZlci4gV2hlbiBzdGFja3MgYXJlIHNwbGl0LCB0aGUgc3BsaXRcbiAgICAvLyBpbnN0YW5jZSBzaGFyZWQgdGhlIGJ1ZmZlciBoaXN0b3J5IHdpdGggaXRzIHBhcmVudCB1cCB0b1xuICAgIC8vIGBidWZmZXJCYXNlYCwgd2hpY2ggaXMgdGhlIGFic29sdXRlIG9mZnNldCAoaW5jbHVkaW5nIHRoZVxuICAgIC8vIG9mZnNldCBvZiBwcmV2aW91cyBzcGxpdHMpIGludG8gdGhlIGJ1ZmZlciBhdCB3aGljaCB0aGlzIHN0YWNrXG4gICAgLy8gc3RhcnRzIHdyaXRpbmcuXG4gICAgLy8vIEBpbnRlcm5hbFxuICAgIGJ1ZmZlckJhc2UsIFxuICAgIC8vLyBAaW50ZXJuYWxcbiAgICBjdXJDb250ZXh0LCBcbiAgICAvLy8gQGludGVybmFsXG4gICAgbG9va0FoZWFkID0gMCwgXG4gICAgLy8gQSBwYXJlbnQgc3RhY2sgZnJvbSB3aGljaCB0aGlzIHdhcyBzcGxpdCBvZmYsIGlmIGFueS4gVGhpcyBpc1xuICAgIC8vIHNldCB1cCBzbyB0aGF0IGl0IGFsd2F5cyBwb2ludHMgdG8gYSBzdGFjayB0aGF0IGhhcyBzb21lXG4gICAgLy8gYWRkaXRpb25hbCBidWZmZXIgY29udGVudCwgbmV2ZXIgdG8gYSBzdGFjayB3aXRoIGFuIGVxdWFsXG4gICAgLy8gYGJ1ZmZlckJhc2VgLlxuICAgIC8vLyBAaW50ZXJuYWxcbiAgICBwYXJlbnQpIHtcbiAgICAgICAgdGhpcy5wID0gcDtcbiAgICAgICAgdGhpcy5zdGFjayA9IHN0YWNrO1xuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgICAgIHRoaXMucmVkdWNlUG9zID0gcmVkdWNlUG9zO1xuICAgICAgICB0aGlzLnBvcyA9IHBvcztcbiAgICAgICAgdGhpcy5zY29yZSA9IHNjb3JlO1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IGJ1ZmZlcjtcbiAgICAgICAgdGhpcy5idWZmZXJCYXNlID0gYnVmZmVyQmFzZTtcbiAgICAgICAgdGhpcy5jdXJDb250ZXh0ID0gY3VyQ29udGV4dDtcbiAgICAgICAgdGhpcy5sb29rQWhlYWQgPSBsb29rQWhlYWQ7XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgIH1cbiAgICAvLy8gQGludGVybmFsXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBgWyR7dGhpcy5zdGFjay5maWx0ZXIoKF8sIGkpID0+IGkgJSAzID09IDApLmNvbmNhdCh0aGlzLnN0YXRlKX1dQCR7dGhpcy5wb3N9JHt0aGlzLnNjb3JlID8gXCIhXCIgKyB0aGlzLnNjb3JlIDogXCJcIn1gO1xuICAgIH1cbiAgICAvLyBTdGFydCBhbiBlbXB0eSBzdGFja1xuICAgIC8vLyBAaW50ZXJuYWxcbiAgICBzdGF0aWMgc3RhcnQocCwgc3RhdGUsIHBvcyA9IDApIHtcbiAgICAgICAgbGV0IGN4ID0gcC5wYXJzZXIuY29udGV4dDtcbiAgICAgICAgcmV0dXJuIG5ldyBTdGFjayhwLCBbXSwgc3RhdGUsIHBvcywgcG9zLCAwLCBbXSwgMCwgY3ggPyBuZXcgU3RhY2tDb250ZXh0KGN4LCBjeC5zdGFydCkgOiBudWxsLCAwLCBudWxsKTtcbiAgICB9XG4gICAgLy8vIFRoZSBzdGFjaydzIGN1cnJlbnQgW2NvbnRleHRdKCNsci5Db250ZXh0VHJhY2tlcikgdmFsdWUsIGlmXG4gICAgLy8vIGFueS4gSXRzIHR5cGUgd2lsbCBkZXBlbmQgb24gdGhlIGNvbnRleHQgdHJhY2tlcidzIHR5cGVcbiAgICAvLy8gcGFyYW1ldGVyLCBvciBpdCB3aWxsIGJlIGBudWxsYCBpZiB0aGVyZSBpcyBubyBjb250ZXh0XG4gICAgLy8vIHRyYWNrZXIuXG4gICAgZ2V0IGNvbnRleHQoKSB7IHJldHVybiB0aGlzLmN1ckNvbnRleHQgPyB0aGlzLmN1ckNvbnRleHQuY29udGV4dCA6IG51bGw7IH1cbiAgICAvLyBQdXNoIGEgc3RhdGUgb250byB0aGUgc3RhY2ssIHRyYWNraW5nIGl0cyBzdGFydCBwb3NpdGlvbiBhcyB3ZWxsXG4gICAgLy8gYXMgdGhlIGJ1ZmZlciBiYXNlIGF0IHRoYXQgcG9pbnQuXG4gICAgLy8vIEBpbnRlcm5hbFxuICAgIHB1c2hTdGF0ZShzdGF0ZSwgc3RhcnQpIHtcbiAgICAgICAgdGhpcy5zdGFjay5wdXNoKHRoaXMuc3RhdGUsIHN0YXJ0LCB0aGlzLmJ1ZmZlckJhc2UgKyB0aGlzLmJ1ZmZlci5sZW5ndGgpO1xuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgfVxuICAgIC8vIEFwcGx5IGEgcmVkdWNlIGFjdGlvblxuICAgIC8vLyBAaW50ZXJuYWxcbiAgICByZWR1Y2UoYWN0aW9uKSB7XG4gICAgICAgIGxldCBkZXB0aCA9IGFjdGlvbiA+PiAxOSAvKiBSZWR1Y2VEZXB0aFNoaWZ0ICovLCB0eXBlID0gYWN0aW9uICYgNjU1MzUgLyogVmFsdWVNYXNrICovO1xuICAgICAgICBsZXQgeyBwYXJzZXIgfSA9IHRoaXMucDtcbiAgICAgICAgbGV0IGRQcmVjID0gcGFyc2VyLmR5bmFtaWNQcmVjZWRlbmNlKHR5cGUpO1xuICAgICAgICBpZiAoZFByZWMpXG4gICAgICAgICAgICB0aGlzLnNjb3JlICs9IGRQcmVjO1xuICAgICAgICBpZiAoZGVwdGggPT0gMCkge1xuICAgICAgICAgICAgdGhpcy5wdXNoU3RhdGUocGFyc2VyLmdldEdvdG8odGhpcy5zdGF0ZSwgdHlwZSwgdHJ1ZSksIHRoaXMucmVkdWNlUG9zKTtcbiAgICAgICAgICAgIC8vIFplcm8tZGVwdGggcmVkdWN0aW9ucyBhcmUgYSBzcGVjaWFsIGNhc2VcdTIwMTR0aGV5IGFkZCBzdHVmZiB0b1xuICAgICAgICAgICAgLy8gdGhlIHN0YWNrIHdpdGhvdXQgcG9wcGluZyBhbnl0aGluZyBvZmYuXG4gICAgICAgICAgICBpZiAodHlwZSA8IHBhcnNlci5taW5SZXBlYXRUZXJtKVxuICAgICAgICAgICAgICAgIHRoaXMuc3RvcmVOb2RlKHR5cGUsIHRoaXMucmVkdWNlUG9zLCB0aGlzLnJlZHVjZVBvcywgNCwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLnJlZHVjZUNvbnRleHQodHlwZSwgdGhpcy5yZWR1Y2VQb3MpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIEZpbmQgdGhlIGJhc2UgaW5kZXggaW50byBgdGhpcy5zdGFja2AsIGNvbnRlbnQgYWZ0ZXIgd2hpY2ggd2lsbFxuICAgICAgICAvLyBiZSBkcm9wcGVkLiBOb3RlIHRoYXQgd2l0aCBgU3RheUZsYWdgIHJlZHVjdGlvbnMgd2UgbmVlZCB0b1xuICAgICAgICAvLyBjb25zdW1lIHR3byBleHRyYSBmcmFtZXMgKHRoZSBkdW1teSBwYXJlbnQgbm9kZSBmb3IgdGhlIHNraXBwZWRcbiAgICAgICAgLy8gZXhwcmVzc2lvbiBhbmQgdGhlIHN0YXRlIHRoYXQgd2UnbGwgYmUgc3RheWluZyBpbiwgd2hpY2ggc2hvdWxkXG4gICAgICAgIC8vIGJlIG1vdmVkIHRvIGB0aGlzLnN0YXRlYCkuXG4gICAgICAgIGxldCBiYXNlID0gdGhpcy5zdGFjay5sZW5ndGggLSAoKGRlcHRoIC0gMSkgKiAzKSAtIChhY3Rpb24gJiAyNjIxNDQgLyogU3RheUZsYWcgKi8gPyA2IDogMCk7XG4gICAgICAgIGxldCBzdGFydCA9IHRoaXMuc3RhY2tbYmFzZSAtIDJdO1xuICAgICAgICBsZXQgYnVmZmVyQmFzZSA9IHRoaXMuc3RhY2tbYmFzZSAtIDFdLCBjb3VudCA9IHRoaXMuYnVmZmVyQmFzZSArIHRoaXMuYnVmZmVyLmxlbmd0aCAtIGJ1ZmZlckJhc2U7XG4gICAgICAgIC8vIFN0b3JlIG5vcm1hbCB0ZXJtcyBvciBgUiAtPiBSIFJgIHJlcGVhdCByZWR1Y3Rpb25zXG4gICAgICAgIGlmICh0eXBlIDwgcGFyc2VyLm1pblJlcGVhdFRlcm0gfHwgKGFjdGlvbiAmIDEzMTA3MiAvKiBSZXBlYXRGbGFnICovKSkge1xuICAgICAgICAgICAgbGV0IHBvcyA9IHBhcnNlci5zdGF0ZUZsYWcodGhpcy5zdGF0ZSwgMSAvKiBTa2lwcGVkICovKSA/IHRoaXMucG9zIDogdGhpcy5yZWR1Y2VQb3M7XG4gICAgICAgICAgICB0aGlzLnN0b3JlTm9kZSh0eXBlLCBzdGFydCwgcG9zLCBjb3VudCArIDQsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhY3Rpb24gJiAyNjIxNDQgLyogU3RheUZsYWcgKi8pIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLnN0YWNrW2Jhc2VdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IGJhc2VTdGF0ZUlEID0gdGhpcy5zdGFja1tiYXNlIC0gM107XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gcGFyc2VyLmdldEdvdG8oYmFzZVN0YXRlSUQsIHR5cGUsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlICh0aGlzLnN0YWNrLmxlbmd0aCA+IGJhc2UpXG4gICAgICAgICAgICB0aGlzLnN0YWNrLnBvcCgpO1xuICAgICAgICB0aGlzLnJlZHVjZUNvbnRleHQodHlwZSwgc3RhcnQpO1xuICAgIH1cbiAgICAvLyBTaGlmdCBhIHZhbHVlIGludG8gdGhlIGJ1ZmZlclxuICAgIC8vLyBAaW50ZXJuYWxcbiAgICBzdG9yZU5vZGUodGVybSwgc3RhcnQsIGVuZCwgc2l6ZSA9IDQsIGlzUmVkdWNlID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKHRlcm0gPT0gMCAvKiBFcnIgKi8gJiZcbiAgICAgICAgICAgICghdGhpcy5zdGFjay5sZW5ndGggfHwgdGhpcy5zdGFja1t0aGlzLnN0YWNrLmxlbmd0aCAtIDFdIDwgdGhpcy5idWZmZXIubGVuZ3RoICsgdGhpcy5idWZmZXJCYXNlKSkge1xuICAgICAgICAgICAgLy8gVHJ5IHRvIG9taXQvbWVyZ2UgYWRqYWNlbnQgZXJyb3Igbm9kZXNcbiAgICAgICAgICAgIGxldCBjdXIgPSB0aGlzLCB0b3AgPSB0aGlzLmJ1ZmZlci5sZW5ndGg7XG4gICAgICAgICAgICBpZiAodG9wID09IDAgJiYgY3VyLnBhcmVudCkge1xuICAgICAgICAgICAgICAgIHRvcCA9IGN1ci5idWZmZXJCYXNlIC0gY3VyLnBhcmVudC5idWZmZXJCYXNlO1xuICAgICAgICAgICAgICAgIGN1ciA9IGN1ci5wYXJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodG9wID4gMCAmJiBjdXIuYnVmZmVyW3RvcCAtIDRdID09IDAgLyogRXJyICovICYmIGN1ci5idWZmZXJbdG9wIC0gMV0gPiAtMSkge1xuICAgICAgICAgICAgICAgIGlmIChzdGFydCA9PSBlbmQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBpZiAoY3VyLmJ1ZmZlclt0b3AgLSAyXSA+PSBzdGFydCkge1xuICAgICAgICAgICAgICAgICAgICBjdXIuYnVmZmVyW3RvcCAtIDJdID0gZW5kO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghaXNSZWR1Y2UgfHwgdGhpcy5wb3MgPT0gZW5kKSB7IC8vIFNpbXBsZSBjYXNlLCBqdXN0IGFwcGVuZFxuICAgICAgICAgICAgdGhpcy5idWZmZXIucHVzaCh0ZXJtLCBzdGFydCwgZW5kLCBzaXplKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHsgLy8gVGhlcmUgbWF5IGJlIHNraXBwZWQgbm9kZXMgdGhhdCBoYXZlIHRvIGJlIG1vdmVkIGZvcndhcmRcbiAgICAgICAgICAgIGxldCBpbmRleCA9IHRoaXMuYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChpbmRleCA+IDAgJiYgdGhpcy5idWZmZXJbaW5kZXggLSA0XSAhPSAwIC8qIEVyciAqLylcbiAgICAgICAgICAgICAgICB3aGlsZSAoaW5kZXggPiAwICYmIHRoaXMuYnVmZmVyW2luZGV4IC0gMl0gPiBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gTW92ZSB0aGlzIHJlY29yZCBmb3J3YXJkXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyW2luZGV4XSA9IHRoaXMuYnVmZmVyW2luZGV4IC0gNF07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyW2luZGV4ICsgMV0gPSB0aGlzLmJ1ZmZlcltpbmRleCAtIDNdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlcltpbmRleCArIDJdID0gdGhpcy5idWZmZXJbaW5kZXggLSAyXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5idWZmZXJbaW5kZXggKyAzXSA9IHRoaXMuYnVmZmVyW2luZGV4IC0gMV07XG4gICAgICAgICAgICAgICAgICAgIGluZGV4IC09IDQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaXplID4gNClcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemUgLT0gNDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlcltpbmRleF0gPSB0ZXJtO1xuICAgICAgICAgICAgdGhpcy5idWZmZXJbaW5kZXggKyAxXSA9IHN0YXJ0O1xuICAgICAgICAgICAgdGhpcy5idWZmZXJbaW5kZXggKyAyXSA9IGVuZDtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyW2luZGV4ICsgM10gPSBzaXplO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEFwcGx5IGEgc2hpZnQgYWN0aW9uXG4gICAgLy8vIEBpbnRlcm5hbFxuICAgIHNoaWZ0KGFjdGlvbiwgbmV4dCwgbmV4dEVuZCkge1xuICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLnBvcztcbiAgICAgICAgaWYgKGFjdGlvbiAmIDEzMTA3MiAvKiBHb3RvRmxhZyAqLykge1xuICAgICAgICAgICAgdGhpcy5wdXNoU3RhdGUoYWN0aW9uICYgNjU1MzUgLyogVmFsdWVNYXNrICovLCB0aGlzLnBvcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoKGFjdGlvbiAmIDI2MjE0NCAvKiBTdGF5RmxhZyAqLykgPT0gMCkgeyAvLyBSZWd1bGFyIHNoaWZ0XG4gICAgICAgICAgICBsZXQgbmV4dFN0YXRlID0gYWN0aW9uLCB7IHBhcnNlciB9ID0gdGhpcy5wO1xuICAgICAgICAgICAgaWYgKG5leHRFbmQgPiB0aGlzLnBvcyB8fCBuZXh0IDw9IHBhcnNlci5tYXhOb2RlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3MgPSBuZXh0RW5kO1xuICAgICAgICAgICAgICAgIGlmICghcGFyc2VyLnN0YXRlRmxhZyhuZXh0U3RhdGUsIDEgLyogU2tpcHBlZCAqLykpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVkdWNlUG9zID0gbmV4dEVuZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHVzaFN0YXRlKG5leHRTdGF0ZSwgc3RhcnQpO1xuICAgICAgICAgICAgdGhpcy5zaGlmdENvbnRleHQobmV4dCwgc3RhcnQpO1xuICAgICAgICAgICAgaWYgKG5leHQgPD0gcGFyc2VyLm1heE5vZGUpXG4gICAgICAgICAgICAgICAgdGhpcy5idWZmZXIucHVzaChuZXh0LCBzdGFydCwgbmV4dEVuZCwgNCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7IC8vIFNoaWZ0LWFuZC1zdGF5LCB3aGljaCBtZWFucyB0aGlzIGlzIGEgc2tpcHBlZCB0b2tlblxuICAgICAgICAgICAgdGhpcy5wb3MgPSBuZXh0RW5kO1xuICAgICAgICAgICAgdGhpcy5zaGlmdENvbnRleHQobmV4dCwgc3RhcnQpO1xuICAgICAgICAgICAgaWYgKG5leHQgPD0gdGhpcy5wLnBhcnNlci5tYXhOb2RlKVxuICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyLnB1c2gobmV4dCwgc3RhcnQsIG5leHRFbmQsIDQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEFwcGx5IGFuIGFjdGlvblxuICAgIC8vLyBAaW50ZXJuYWxcbiAgICBhcHBseShhY3Rpb24sIG5leHQsIG5leHRFbmQpIHtcbiAgICAgICAgaWYgKGFjdGlvbiAmIDY1NTM2IC8qIFJlZHVjZUZsYWcgKi8pXG4gICAgICAgICAgICB0aGlzLnJlZHVjZShhY3Rpb24pO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLnNoaWZ0KGFjdGlvbiwgbmV4dCwgbmV4dEVuZCk7XG4gICAgfVxuICAgIC8vIEFkZCBhIHByZWJ1aWx0IChyZXVzZWQpIG5vZGUgaW50byB0aGUgYnVmZmVyLlxuICAgIC8vLyBAaW50ZXJuYWxcbiAgICB1c2VOb2RlKHZhbHVlLCBuZXh0KSB7XG4gICAgICAgIGxldCBpbmRleCA9IHRoaXMucC5yZXVzZWQubGVuZ3RoIC0gMTtcbiAgICAgICAgaWYgKGluZGV4IDwgMCB8fCB0aGlzLnAucmV1c2VkW2luZGV4XSAhPSB2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5wLnJldXNlZC5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN0YXJ0ID0gdGhpcy5wb3M7XG4gICAgICAgIHRoaXMucmVkdWNlUG9zID0gdGhpcy5wb3MgPSBzdGFydCArIHZhbHVlLmxlbmd0aDtcbiAgICAgICAgdGhpcy5wdXNoU3RhdGUobmV4dCwgc3RhcnQpO1xuICAgICAgICB0aGlzLmJ1ZmZlci5wdXNoKGluZGV4LCBzdGFydCwgdGhpcy5yZWR1Y2VQb3MsIC0xIC8qIHNpemUgPT0gLTEgbWVhbnMgdGhpcyBpcyBhIHJldXNlZCB2YWx1ZSAqLyk7XG4gICAgICAgIGlmICh0aGlzLmN1ckNvbnRleHQpXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRleHQodGhpcy5jdXJDb250ZXh0LnRyYWNrZXIucmV1c2UodGhpcy5jdXJDb250ZXh0LmNvbnRleHQsIHZhbHVlLCB0aGlzLCB0aGlzLnAuc3RyZWFtLnJlc2V0KHRoaXMucG9zIC0gdmFsdWUubGVuZ3RoKSkpO1xuICAgIH1cbiAgICAvLyBTcGxpdCB0aGUgc3RhY2suIER1ZSB0byB0aGUgYnVmZmVyIHNoYXJpbmcgYW5kIHRoZSBmYWN0XG4gICAgLy8gdGhhdCBgdGhpcy5zdGFja2AgdGVuZHMgdG8gc3RheSBxdWl0ZSBzaGFsbG93LCB0aGlzIGlzbid0IHZlcnlcbiAgICAvLyBleHBlbnNpdmUuXG4gICAgLy8vIEBpbnRlcm5hbFxuICAgIHNwbGl0KCkge1xuICAgICAgICBsZXQgcGFyZW50ID0gdGhpcztcbiAgICAgICAgbGV0IG9mZiA9IHBhcmVudC5idWZmZXIubGVuZ3RoO1xuICAgICAgICAvLyBCZWNhdXNlIHRoZSB0b3Agb2YgdGhlIGJ1ZmZlciAoYWZ0ZXIgdGhpcy5wb3MpIG1heSBiZSBtdXRhdGVkXG4gICAgICAgIC8vIHRvIHJlb3JkZXIgcmVkdWN0aW9ucyBhbmQgc2tpcHBlZCB0b2tlbnMsIGFuZCBzaGFyZWQgYnVmZmVyc1xuICAgICAgICAvLyBzaG91bGQgYmUgaW1tdXRhYmxlLCB0aGlzIGNvcGllcyBhbnkgb3V0c3RhbmRpbmcgc2tpcHBlZCB0b2tlbnNcbiAgICAgICAgLy8gdG8gdGhlIG5ldyBidWZmZXIsIGFuZCBwdXRzIHRoZSBiYXNlIHBvaW50ZXIgYmVmb3JlIHRoZW0uXG4gICAgICAgIHdoaWxlIChvZmYgPiAwICYmIHBhcmVudC5idWZmZXJbb2ZmIC0gMl0gPiBwYXJlbnQucmVkdWNlUG9zKVxuICAgICAgICAgICAgb2ZmIC09IDQ7XG4gICAgICAgIGxldCBidWZmZXIgPSBwYXJlbnQuYnVmZmVyLnNsaWNlKG9mZiksIGJhc2UgPSBwYXJlbnQuYnVmZmVyQmFzZSArIG9mZjtcbiAgICAgICAgLy8gTWFrZSBzdXJlIHBhcmVudCBwb2ludHMgdG8gYW4gYWN0dWFsIHBhcmVudCB3aXRoIGNvbnRlbnQsIGlmIHRoZXJlIGlzIHN1Y2ggYSBwYXJlbnQuXG4gICAgICAgIHdoaWxlIChwYXJlbnQgJiYgYmFzZSA9PSBwYXJlbnQuYnVmZmVyQmFzZSlcbiAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnQ7XG4gICAgICAgIHJldHVybiBuZXcgU3RhY2sodGhpcy5wLCB0aGlzLnN0YWNrLnNsaWNlKCksIHRoaXMuc3RhdGUsIHRoaXMucmVkdWNlUG9zLCB0aGlzLnBvcywgdGhpcy5zY29yZSwgYnVmZmVyLCBiYXNlLCB0aGlzLmN1ckNvbnRleHQsIHRoaXMubG9va0FoZWFkLCBwYXJlbnQpO1xuICAgIH1cbiAgICAvLyBUcnkgdG8gcmVjb3ZlciBmcm9tIGFuIGVycm9yIGJ5ICdkZWxldGluZycgKGlnbm9yaW5nKSBvbmUgdG9rZW4uXG4gICAgLy8vIEBpbnRlcm5hbFxuICAgIHJlY292ZXJCeURlbGV0ZShuZXh0LCBuZXh0RW5kKSB7XG4gICAgICAgIGxldCBpc05vZGUgPSBuZXh0IDw9IHRoaXMucC5wYXJzZXIubWF4Tm9kZTtcbiAgICAgICAgaWYgKGlzTm9kZSlcbiAgICAgICAgICAgIHRoaXMuc3RvcmVOb2RlKG5leHQsIHRoaXMucG9zLCBuZXh0RW5kLCA0KTtcbiAgICAgICAgdGhpcy5zdG9yZU5vZGUoMCAvKiBFcnIgKi8sIHRoaXMucG9zLCBuZXh0RW5kLCBpc05vZGUgPyA4IDogNCk7XG4gICAgICAgIHRoaXMucG9zID0gdGhpcy5yZWR1Y2VQb3MgPSBuZXh0RW5kO1xuICAgICAgICB0aGlzLnNjb3JlIC09IDE5MCAvKiBEZWxldGUgKi87XG4gICAgfVxuICAgIC8vLyBDaGVjayBpZiB0aGUgZ2l2ZW4gdGVybSB3b3VsZCBiZSBhYmxlIHRvIGJlIHNoaWZ0ZWQgKG9wdGlvbmFsbHlcbiAgICAvLy8gYWZ0ZXIgc29tZSByZWR1Y3Rpb25zKSBvbiB0aGlzIHN0YWNrLiBUaGlzIGNhbiBiZSB1c2VmdWwgZm9yXG4gICAgLy8vIGV4dGVybmFsIHRva2VuaXplcnMgdGhhdCB3YW50IHRvIG1ha2Ugc3VyZSB0aGV5IG9ubHkgcHJvdmlkZSBhXG4gICAgLy8vIGdpdmVuIHRva2VuIHdoZW4gaXQgYXBwbGllcy5cbiAgICBjYW5TaGlmdCh0ZXJtKSB7XG4gICAgICAgIGZvciAobGV0IHNpbSA9IG5ldyBTaW11bGF0ZWRTdGFjayh0aGlzKTs7KSB7XG4gICAgICAgICAgICBsZXQgYWN0aW9uID0gdGhpcy5wLnBhcnNlci5zdGF0ZVNsb3Qoc2ltLnN0YXRlLCA0IC8qIERlZmF1bHRSZWR1Y2UgKi8pIHx8IHRoaXMucC5wYXJzZXIuaGFzQWN0aW9uKHNpbS5zdGF0ZSwgdGVybSk7XG4gICAgICAgICAgICBpZiAoKGFjdGlvbiAmIDY1NTM2IC8qIFJlZHVjZUZsYWcgKi8pID09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICBpZiAoYWN0aW9uID09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgc2ltLnJlZHVjZShhY3Rpb24pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEFwcGx5IHVwIHRvIFJlY292ZXIuTWF4TmV4dCByZWNvdmVyeSBhY3Rpb25zIHRoYXQgY29uY2VwdHVhbGx5XG4gICAgLy8gaW5zZXJ0cyBzb21lIG1pc3NpbmcgdG9rZW4gb3IgcnVsZS5cbiAgICAvLy8gQGludGVybmFsXG4gICAgcmVjb3ZlckJ5SW5zZXJ0KG5leHQpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhY2subGVuZ3RoID49IDMwMCAvKiBNYXhJbnNlcnRTdGFja0RlcHRoICovKVxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICBsZXQgbmV4dFN0YXRlcyA9IHRoaXMucC5wYXJzZXIubmV4dFN0YXRlcyh0aGlzLnN0YXRlKTtcbiAgICAgICAgaWYgKG5leHRTdGF0ZXMubGVuZ3RoID4gNCAvKiBNYXhOZXh0ICovIDw8IDEgfHwgdGhpcy5zdGFjay5sZW5ndGggPj0gMTIwIC8qIERhbXBlbkluc2VydFN0YWNrRGVwdGggKi8pIHtcbiAgICAgICAgICAgIGxldCBiZXN0ID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgczsgaSA8IG5leHRTdGF0ZXMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgICAgICAgICAgICBpZiAoKHMgPSBuZXh0U3RhdGVzW2kgKyAxXSkgIT0gdGhpcy5zdGF0ZSAmJiB0aGlzLnAucGFyc2VyLmhhc0FjdGlvbihzLCBuZXh0KSlcbiAgICAgICAgICAgICAgICAgICAgYmVzdC5wdXNoKG5leHRTdGF0ZXNbaV0sIHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhY2subGVuZ3RoIDwgMTIwIC8qIERhbXBlbkluc2VydFN0YWNrRGVwdGggKi8pXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGJlc3QubGVuZ3RoIDwgNCAvKiBNYXhOZXh0ICovIDw8IDEgJiYgaSA8IG5leHRTdGF0ZXMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHMgPSBuZXh0U3RhdGVzW2kgKyAxXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFiZXN0LnNvbWUoKHYsIGkpID0+IChpICYgMSkgJiYgdiA9PSBzKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlc3QucHVzaChuZXh0U3RhdGVzW2ldLCBzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXh0U3RhdGVzID0gYmVzdDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV4dFN0YXRlcy5sZW5ndGggJiYgcmVzdWx0Lmxlbmd0aCA8IDQgLyogTWF4TmV4dCAqLzsgaSArPSAyKSB7XG4gICAgICAgICAgICBsZXQgcyA9IG5leHRTdGF0ZXNbaSArIDFdO1xuICAgICAgICAgICAgaWYgKHMgPT0gdGhpcy5zdGF0ZSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGxldCBzdGFjayA9IHRoaXMuc3BsaXQoKTtcbiAgICAgICAgICAgIHN0YWNrLnB1c2hTdGF0ZShzLCB0aGlzLnBvcyk7XG4gICAgICAgICAgICBzdGFjay5zdG9yZU5vZGUoMCAvKiBFcnIgKi8sIHN0YWNrLnBvcywgc3RhY2sucG9zLCA0LCB0cnVlKTtcbiAgICAgICAgICAgIHN0YWNrLnNoaWZ0Q29udGV4dChuZXh0U3RhdGVzW2ldLCB0aGlzLnBvcyk7XG4gICAgICAgICAgICBzdGFjay5zY29yZSAtPSAyMDAgLyogSW5zZXJ0ICovO1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goc3RhY2spO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8vIEZvcmNlIGEgcmVkdWNlLCBpZiBwb3NzaWJsZS4gUmV0dXJuIGZhbHNlIGlmIHRoYXQgY2FuJ3RcbiAgICAvLyBiZSBkb25lLlxuICAgIC8vLyBAaW50ZXJuYWxcbiAgICBmb3JjZVJlZHVjZSgpIHtcbiAgICAgICAgbGV0IHJlZHVjZSA9IHRoaXMucC5wYXJzZXIuc3RhdGVTbG90KHRoaXMuc3RhdGUsIDUgLyogRm9yY2VkUmVkdWNlICovKTtcbiAgICAgICAgaWYgKChyZWR1Y2UgJiA2NTUzNiAvKiBSZWR1Y2VGbGFnICovKSA9PSAwKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBsZXQgeyBwYXJzZXIgfSA9IHRoaXMucDtcbiAgICAgICAgaWYgKCFwYXJzZXIudmFsaWRBY3Rpb24odGhpcy5zdGF0ZSwgcmVkdWNlKSkge1xuICAgICAgICAgICAgbGV0IGRlcHRoID0gcmVkdWNlID4+IDE5IC8qIFJlZHVjZURlcHRoU2hpZnQgKi8sIHRlcm0gPSByZWR1Y2UgJiA2NTUzNSAvKiBWYWx1ZU1hc2sgKi87XG4gICAgICAgICAgICBsZXQgdGFyZ2V0ID0gdGhpcy5zdGFjay5sZW5ndGggLSBkZXB0aCAqIDM7XG4gICAgICAgICAgICBpZiAodGFyZ2V0IDwgMCB8fCBwYXJzZXIuZ2V0R290byh0aGlzLnN0YWNrW3RhcmdldF0sIHRlcm0sIGZhbHNlKSA8IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5zdG9yZU5vZGUoMCAvKiBFcnIgKi8sIHRoaXMucmVkdWNlUG9zLCB0aGlzLnJlZHVjZVBvcywgNCwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLnNjb3JlIC09IDEwMCAvKiBSZWR1Y2UgKi87XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZWR1Y2VQb3MgPSB0aGlzLnBvcztcbiAgICAgICAgdGhpcy5yZWR1Y2UocmVkdWNlKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vLyBAaW50ZXJuYWxcbiAgICBmb3JjZUFsbCgpIHtcbiAgICAgICAgd2hpbGUgKCF0aGlzLnAucGFyc2VyLnN0YXRlRmxhZyh0aGlzLnN0YXRlLCAyIC8qIEFjY2VwdGluZyAqLykpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5mb3JjZVJlZHVjZSgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdG9yZU5vZGUoMCAvKiBFcnIgKi8sIHRoaXMucG9zLCB0aGlzLnBvcywgNCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8vLyBDaGVjayB3aGV0aGVyIHRoaXMgc3RhdGUgaGFzIG5vIGZ1cnRoZXIgYWN0aW9ucyAoYXNzdW1lZCB0byBiZSBhIGRpcmVjdCBkZXNjZW5kYW50IG9mIHRoZVxuICAgIC8vLyB0b3Agc3RhdGUsIHNpbmNlIGFueSBvdGhlciBzdGF0ZXMgbXVzdCBiZSBhYmxlIHRvIGNvbnRpbnVlXG4gICAgLy8vIHNvbWVob3cpLiBAaW50ZXJuYWxcbiAgICBnZXQgZGVhZEVuZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhY2subGVuZ3RoICE9IDMpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCB7IHBhcnNlciB9ID0gdGhpcy5wO1xuICAgICAgICByZXR1cm4gcGFyc2VyLmRhdGFbcGFyc2VyLnN0YXRlU2xvdCh0aGlzLnN0YXRlLCAxIC8qIEFjdGlvbnMgKi8pXSA9PSA2NTUzNSAvKiBFbmQgKi8gJiZcbiAgICAgICAgICAgICFwYXJzZXIuc3RhdGVTbG90KHRoaXMuc3RhdGUsIDQgLyogRGVmYXVsdFJlZHVjZSAqLyk7XG4gICAgfVxuICAgIC8vLyBSZXN0YXJ0IHRoZSBzdGFjayAocHV0IGl0IGJhY2sgaW4gaXRzIHN0YXJ0IHN0YXRlKS4gT25seSBzYWZlXG4gICAgLy8vIHdoZW4gdGhpcy5zdGFjay5sZW5ndGggPT0gMyAoc3RhdGUgaXMgZGlyZWN0bHkgYmVsb3cgdGhlIHRvcFxuICAgIC8vLyBzdGF0ZSkuIEBpbnRlcm5hbFxuICAgIHJlc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLnN0YWNrWzBdO1xuICAgICAgICB0aGlzLnN0YWNrLmxlbmd0aCA9IDA7XG4gICAgfVxuICAgIC8vLyBAaW50ZXJuYWxcbiAgICBzYW1lU3RhdGUob3RoZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT0gb3RoZXIuc3RhdGUgfHwgdGhpcy5zdGFjay5sZW5ndGggIT0gb3RoZXIuc3RhY2subGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc3RhY2subGVuZ3RoOyBpICs9IDMpXG4gICAgICAgICAgICBpZiAodGhpcy5zdGFja1tpXSAhPSBvdGhlci5zdGFja1tpXSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvLy8gR2V0IHRoZSBwYXJzZXIgdXNlZCBieSB0aGlzIHN0YWNrLlxuICAgIGdldCBwYXJzZXIoKSB7IHJldHVybiB0aGlzLnAucGFyc2VyOyB9XG4gICAgLy8vIFRlc3Qgd2hldGhlciBhIGdpdmVuIGRpYWxlY3QgKGJ5IG51bWVyaWMgSUQsIGFzIGV4cG9ydGVkIGZyb21cbiAgICAvLy8gdGhlIHRlcm1zIGZpbGUpIGlzIGVuYWJsZWQuXG4gICAgZGlhbGVjdEVuYWJsZWQoZGlhbGVjdElEKSB7IHJldHVybiB0aGlzLnAucGFyc2VyLmRpYWxlY3QuZmxhZ3NbZGlhbGVjdElEXTsgfVxuICAgIHNoaWZ0Q29udGV4dCh0ZXJtLCBzdGFydCkge1xuICAgICAgICBpZiAodGhpcy5jdXJDb250ZXh0KVxuICAgICAgICAgICAgdGhpcy51cGRhdGVDb250ZXh0KHRoaXMuY3VyQ29udGV4dC50cmFja2VyLnNoaWZ0KHRoaXMuY3VyQ29udGV4dC5jb250ZXh0LCB0ZXJtLCB0aGlzLCB0aGlzLnAuc3RyZWFtLnJlc2V0KHN0YXJ0KSkpO1xuICAgIH1cbiAgICByZWR1Y2VDb250ZXh0KHRlcm0sIHN0YXJ0KSB7XG4gICAgICAgIGlmICh0aGlzLmN1ckNvbnRleHQpXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRleHQodGhpcy5jdXJDb250ZXh0LnRyYWNrZXIucmVkdWNlKHRoaXMuY3VyQ29udGV4dC5jb250ZXh0LCB0ZXJtLCB0aGlzLCB0aGlzLnAuc3RyZWFtLnJlc2V0KHN0YXJ0KSkpO1xuICAgIH1cbiAgICAvLy8gQGludGVybmFsXG4gICAgZW1pdENvbnRleHQoKSB7XG4gICAgICAgIGxldCBsYXN0ID0gdGhpcy5idWZmZXIubGVuZ3RoIC0gMTtcbiAgICAgICAgaWYgKGxhc3QgPCAwIHx8IHRoaXMuYnVmZmVyW2xhc3RdICE9IC0zKVxuICAgICAgICAgICAgdGhpcy5idWZmZXIucHVzaCh0aGlzLmN1ckNvbnRleHQuaGFzaCwgdGhpcy5yZWR1Y2VQb3MsIHRoaXMucmVkdWNlUG9zLCAtMyk7XG4gICAgfVxuICAgIC8vLyBAaW50ZXJuYWxcbiAgICBlbWl0TG9va0FoZWFkKCkge1xuICAgICAgICBsZXQgbGFzdCA9IHRoaXMuYnVmZmVyLmxlbmd0aCAtIDE7XG4gICAgICAgIGlmIChsYXN0IDwgMCB8fCB0aGlzLmJ1ZmZlcltsYXN0XSAhPSAtNClcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyLnB1c2godGhpcy5sb29rQWhlYWQsIHRoaXMucmVkdWNlUG9zLCB0aGlzLnJlZHVjZVBvcywgLTQpO1xuICAgIH1cbiAgICB1cGRhdGVDb250ZXh0KGNvbnRleHQpIHtcbiAgICAgICAgaWYgKGNvbnRleHQgIT0gdGhpcy5jdXJDb250ZXh0LmNvbnRleHQpIHtcbiAgICAgICAgICAgIGxldCBuZXdDeCA9IG5ldyBTdGFja0NvbnRleHQodGhpcy5jdXJDb250ZXh0LnRyYWNrZXIsIGNvbnRleHQpO1xuICAgICAgICAgICAgaWYgKG5ld0N4Lmhhc2ggIT0gdGhpcy5jdXJDb250ZXh0Lmhhc2gpXG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0Q29udGV4dCgpO1xuICAgICAgICAgICAgdGhpcy5jdXJDb250ZXh0ID0gbmV3Q3g7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8vIEBpbnRlcm5hbFxuICAgIHNldExvb2tBaGVhZChsb29rQWhlYWQpIHtcbiAgICAgICAgaWYgKGxvb2tBaGVhZCA+IHRoaXMubG9va0FoZWFkKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXRMb29rQWhlYWQoKTtcbiAgICAgICAgICAgIHRoaXMubG9va0FoZWFkID0gbG9va0FoZWFkO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vLyBAaW50ZXJuYWxcbiAgICBjbG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuY3VyQ29udGV4dCAmJiB0aGlzLmN1ckNvbnRleHQudHJhY2tlci5zdHJpY3QpXG4gICAgICAgICAgICB0aGlzLmVtaXRDb250ZXh0KCk7XG4gICAgICAgIGlmICh0aGlzLmxvb2tBaGVhZCA+IDApXG4gICAgICAgICAgICB0aGlzLmVtaXRMb29rQWhlYWQoKTtcbiAgICB9XG59XG5jbGFzcyBTdGFja0NvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yKHRyYWNrZXIsIGNvbnRleHQpIHtcbiAgICAgICAgdGhpcy50cmFja2VyID0gdHJhY2tlcjtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgdGhpcy5oYXNoID0gdHJhY2tlci5zdHJpY3QgPyB0cmFja2VyLmhhc2goY29udGV4dCkgOiAwO1xuICAgIH1cbn1cbnZhciBSZWNvdmVyO1xuKGZ1bmN0aW9uIChSZWNvdmVyKSB7XG4gICAgUmVjb3ZlcltSZWNvdmVyW1wiSW5zZXJ0XCJdID0gMjAwXSA9IFwiSW5zZXJ0XCI7XG4gICAgUmVjb3ZlcltSZWNvdmVyW1wiRGVsZXRlXCJdID0gMTkwXSA9IFwiRGVsZXRlXCI7XG4gICAgUmVjb3ZlcltSZWNvdmVyW1wiUmVkdWNlXCJdID0gMTAwXSA9IFwiUmVkdWNlXCI7XG4gICAgUmVjb3ZlcltSZWNvdmVyW1wiTWF4TmV4dFwiXSA9IDRdID0gXCJNYXhOZXh0XCI7XG4gICAgUmVjb3ZlcltSZWNvdmVyW1wiTWF4SW5zZXJ0U3RhY2tEZXB0aFwiXSA9IDMwMF0gPSBcIk1heEluc2VydFN0YWNrRGVwdGhcIjtcbiAgICBSZWNvdmVyW1JlY292ZXJbXCJEYW1wZW5JbnNlcnRTdGFja0RlcHRoXCJdID0gMTIwXSA9IFwiRGFtcGVuSW5zZXJ0U3RhY2tEZXB0aFwiO1xufSkoUmVjb3ZlciB8fCAoUmVjb3ZlciA9IHt9KSk7XG4vLyBVc2VkIHRvIGNoZWFwbHkgcnVuIHNvbWUgcmVkdWN0aW9ucyB0byBzY2FuIGFoZWFkIHdpdGhvdXQgbXV0YXRpbmdcbi8vIGFuIGVudGlyZSBzdGFja1xuY2xhc3MgU2ltdWxhdGVkU3RhY2sge1xuICAgIGNvbnN0cnVjdG9yKHN0YXJ0KSB7XG4gICAgICAgIHRoaXMuc3RhcnQgPSBzdGFydDtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXJ0LnN0YXRlO1xuICAgICAgICB0aGlzLnN0YWNrID0gc3RhcnQuc3RhY2s7XG4gICAgICAgIHRoaXMuYmFzZSA9IHRoaXMuc3RhY2subGVuZ3RoO1xuICAgIH1cbiAgICByZWR1Y2UoYWN0aW9uKSB7XG4gICAgICAgIGxldCB0ZXJtID0gYWN0aW9uICYgNjU1MzUgLyogVmFsdWVNYXNrICovLCBkZXB0aCA9IGFjdGlvbiA+PiAxOSAvKiBSZWR1Y2VEZXB0aFNoaWZ0ICovO1xuICAgICAgICBpZiAoZGVwdGggPT0gMCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhY2sgPT0gdGhpcy5zdGFydC5zdGFjaylcbiAgICAgICAgICAgICAgICB0aGlzLnN0YWNrID0gdGhpcy5zdGFjay5zbGljZSgpO1xuICAgICAgICAgICAgdGhpcy5zdGFjay5wdXNoKHRoaXMuc3RhdGUsIDAsIDApO1xuICAgICAgICAgICAgdGhpcy5iYXNlICs9IDM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmJhc2UgLT0gKGRlcHRoIC0gMSkgKiAzO1xuICAgICAgICB9XG4gICAgICAgIGxldCBnb3RvID0gdGhpcy5zdGFydC5wLnBhcnNlci5nZXRHb3RvKHRoaXMuc3RhY2tbdGhpcy5iYXNlIC0gM10sIHRlcm0sIHRydWUpO1xuICAgICAgICB0aGlzLnN0YXRlID0gZ290bztcbiAgICB9XG59XG4vLyBUaGlzIGlzIGdpdmVuIHRvIGBUcmVlLmJ1aWxkYCB0byBidWlsZCBhIGJ1ZmZlciwgYW5kIGVuY2Fwc3VsYXRlc1xuLy8gdGhlIHBhcmVudC1zdGFjay13YWxraW5nIG5lY2Vzc2FyeSB0byByZWFkIHRoZSBub2Rlcy5cbmNsYXNzIFN0YWNrQnVmZmVyQ3Vyc29yIHtcbiAgICBjb25zdHJ1Y3RvcihzdGFjaywgcG9zLCBpbmRleCkge1xuICAgICAgICB0aGlzLnN0YWNrID0gc3RhY2s7XG4gICAgICAgIHRoaXMucG9zID0gcG9zO1xuICAgICAgICB0aGlzLmluZGV4ID0gaW5kZXg7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gc3RhY2suYnVmZmVyO1xuICAgICAgICBpZiAodGhpcy5pbmRleCA9PSAwKVxuICAgICAgICAgICAgdGhpcy5tYXliZU5leHQoKTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShzdGFjaywgcG9zID0gc3RhY2suYnVmZmVyQmFzZSArIHN0YWNrLmJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdGFja0J1ZmZlckN1cnNvcihzdGFjaywgcG9zLCBwb3MgLSBzdGFjay5idWZmZXJCYXNlKTtcbiAgICB9XG4gICAgbWF5YmVOZXh0KCkge1xuICAgICAgICBsZXQgbmV4dCA9IHRoaXMuc3RhY2sucGFyZW50O1xuICAgICAgICBpZiAobmV4dCAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmluZGV4ID0gdGhpcy5zdGFjay5idWZmZXJCYXNlIC0gbmV4dC5idWZmZXJCYXNlO1xuICAgICAgICAgICAgdGhpcy5zdGFjayA9IG5leHQ7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlciA9IG5leHQuYnVmZmVyO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBpZCgpIHsgcmV0dXJuIHRoaXMuYnVmZmVyW3RoaXMuaW5kZXggLSA0XTsgfVxuICAgIGdldCBzdGFydCgpIHsgcmV0dXJuIHRoaXMuYnVmZmVyW3RoaXMuaW5kZXggLSAzXTsgfVxuICAgIGdldCBlbmQoKSB7IHJldHVybiB0aGlzLmJ1ZmZlclt0aGlzLmluZGV4IC0gMl07IH1cbiAgICBnZXQgc2l6ZSgpIHsgcmV0dXJuIHRoaXMuYnVmZmVyW3RoaXMuaW5kZXggLSAxXTsgfVxuICAgIG5leHQoKSB7XG4gICAgICAgIHRoaXMuaW5kZXggLT0gNDtcbiAgICAgICAgdGhpcy5wb3MgLT0gNDtcbiAgICAgICAgaWYgKHRoaXMuaW5kZXggPT0gMClcbiAgICAgICAgICAgIHRoaXMubWF5YmVOZXh0KCk7XG4gICAgfVxuICAgIGZvcmsoKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3RhY2tCdWZmZXJDdXJzb3IodGhpcy5zdGFjaywgdGhpcy5wb3MsIHRoaXMuaW5kZXgpO1xuICAgIH1cbn1cblxuY2xhc3MgQ2FjaGVkVG9rZW4ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnN0YXJ0ID0gLTE7XG4gICAgICAgIHRoaXMudmFsdWUgPSAtMTtcbiAgICAgICAgdGhpcy5lbmQgPSAtMTtcbiAgICAgICAgdGhpcy5leHRlbmRlZCA9IC0xO1xuICAgICAgICB0aGlzLmxvb2tBaGVhZCA9IDA7XG4gICAgICAgIHRoaXMubWFzayA9IDA7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IDA7XG4gICAgfVxufVxuY29uc3QgbnVsbFRva2VuID0gbmV3IENhY2hlZFRva2VuO1xuLy8vIFtUb2tlbml6ZXJzXSgjbHIuRXh0ZXJuYWxUb2tlbml6ZXIpIGludGVyYWN0IHdpdGggdGhlIGlucHV0XG4vLy8gdGhyb3VnaCB0aGlzIGludGVyZmFjZS4gSXQgcHJlc2VudHMgdGhlIGlucHV0IGFzIGEgc3RyZWFtIG9mXG4vLy8gY2hhcmFjdGVycywgdHJhY2tpbmcgbG9va2FoZWFkIGFuZCBoaWRpbmcgdGhlIGNvbXBsZXhpdHkgb2Zcbi8vLyBbcmFuZ2VzXSgjY29tbW9uLlBhcnNlci5wYXJzZV5yYW5nZXMpIGZyb20gdG9rZW5pemVyIGNvZGUuXG5jbGFzcyBJbnB1dFN0cmVhbSB7XG4gICAgLy8vIEBpbnRlcm5hbFxuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8vLyBAaW50ZXJuYWxcbiAgICBpbnB1dCwgXG4gICAgLy8vIEBpbnRlcm5hbFxuICAgIHJhbmdlcykge1xuICAgICAgICB0aGlzLmlucHV0ID0gaW5wdXQ7XG4gICAgICAgIHRoaXMucmFuZ2VzID0gcmFuZ2VzO1xuICAgICAgICAvLy8gQGludGVybmFsXG4gICAgICAgIHRoaXMuY2h1bmsgPSBcIlwiO1xuICAgICAgICAvLy8gQGludGVybmFsXG4gICAgICAgIHRoaXMuY2h1bmtPZmYgPSAwO1xuICAgICAgICAvLy8gQmFja3VwIGNodW5rXG4gICAgICAgIHRoaXMuY2h1bmsyID0gXCJcIjtcbiAgICAgICAgdGhpcy5jaHVuazJQb3MgPSAwO1xuICAgICAgICAvLy8gVGhlIGNoYXJhY3RlciBjb2RlIG9mIHRoZSBuZXh0IGNvZGUgdW5pdCBpbiB0aGUgaW5wdXQsIG9yIC0xXG4gICAgICAgIC8vLyB3aGVuIHRoZSBzdHJlYW0gaXMgYXQgdGhlIGVuZCBvZiB0aGUgaW5wdXQuXG4gICAgICAgIHRoaXMubmV4dCA9IC0xO1xuICAgICAgICAvLy8gQGludGVybmFsXG4gICAgICAgIHRoaXMudG9rZW4gPSBudWxsVG9rZW47XG4gICAgICAgIHRoaXMucmFuZ2VJbmRleCA9IDA7XG4gICAgICAgIHRoaXMucG9zID0gdGhpcy5jaHVua1BvcyA9IHJhbmdlc1swXS5mcm9tO1xuICAgICAgICB0aGlzLnJhbmdlID0gcmFuZ2VzWzBdO1xuICAgICAgICB0aGlzLmVuZCA9IHJhbmdlc1tyYW5nZXMubGVuZ3RoIC0gMV0udG87XG4gICAgICAgIHRoaXMucmVhZE5leHQoKTtcbiAgICB9XG4gICAgLy8vIEBpbnRlcm5hbFxuICAgIHJlc29sdmVPZmZzZXQob2Zmc2V0LCBhc3NvYykge1xuICAgICAgICBsZXQgcmFuZ2UgPSB0aGlzLnJhbmdlLCBpbmRleCA9IHRoaXMucmFuZ2VJbmRleDtcbiAgICAgICAgbGV0IHBvcyA9IHRoaXMucG9zICsgb2Zmc2V0O1xuICAgICAgICB3aGlsZSAocG9zIDwgcmFuZ2UuZnJvbSkge1xuICAgICAgICAgICAgaWYgKCFpbmRleClcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGxldCBuZXh0ID0gdGhpcy5yYW5nZXNbLS1pbmRleF07XG4gICAgICAgICAgICBwb3MgLT0gcmFuZ2UuZnJvbSAtIG5leHQudG87XG4gICAgICAgICAgICByYW5nZSA9IG5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKGFzc29jIDwgMCA/IHBvcyA+IHJhbmdlLnRvIDogcG9zID49IHJhbmdlLnRvKSB7XG4gICAgICAgICAgICBpZiAoaW5kZXggPT0gdGhpcy5yYW5nZXMubGVuZ3RoIC0gMSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGxldCBuZXh0ID0gdGhpcy5yYW5nZXNbKytpbmRleF07XG4gICAgICAgICAgICBwb3MgKz0gbmV4dC5mcm9tIC0gcmFuZ2UudG87XG4gICAgICAgICAgICByYW5nZSA9IG5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBvcztcbiAgICB9XG4gICAgLy8vIEBpbnRlcm5hbFxuICAgIGNsaXBQb3MocG9zKSB7XG4gICAgICAgIGlmIChwb3MgPj0gdGhpcy5yYW5nZS5mcm9tICYmIHBvcyA8IHRoaXMucmFuZ2UudG8pXG4gICAgICAgICAgICByZXR1cm4gcG9zO1xuICAgICAgICBmb3IgKGxldCByYW5nZSBvZiB0aGlzLnJhbmdlcylcbiAgICAgICAgICAgIGlmIChyYW5nZS50byA+IHBvcylcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5tYXgocG9zLCByYW5nZS5mcm9tKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5kO1xuICAgIH1cbiAgICAvLy8gTG9vayBhdCBhIGNvZGUgdW5pdCBuZWFyIHRoZSBzdHJlYW0gcG9zaXRpb24uIGAucGVlaygwKWAgZXF1YWxzXG4gICAgLy8vIGAubmV4dGAsIGAucGVlaygtMSlgIGdpdmVzIHlvdSB0aGUgcHJldmlvdXMgY2hhcmFjdGVyLCBhbmQgc29cbiAgICAvLy8gb24uXG4gICAgLy8vXG4gICAgLy8vIE5vdGUgdGhhdCBsb29raW5nIGFyb3VuZCBkdXJpbmcgdG9rZW5pemluZyBjcmVhdGVzIGRlcGVuZGVuY2llc1xuICAgIC8vLyBvbiBwb3RlbnRpYWxseSBmYXItYXdheSBjb250ZW50LCB3aGljaCBtYXkgcmVkdWNlIHRoZVxuICAgIC8vLyBlZmZlY3RpdmVuZXNzIGluY3JlbWVudGFsIHBhcnNpbmdcdTIwMTR3aGVuIGxvb2tpbmcgZm9yd2FyZFx1MjAxNG9yIGV2ZW5cbiAgICAvLy8gY2F1c2UgaW52YWxpZCByZXBhcnNlcyB3aGVuIGxvb2tpbmcgYmFja3dhcmQgbW9yZSB0aGFuIDI1IGNvZGVcbiAgICAvLy8gdW5pdHMsIHNpbmNlIHRoZSBsaWJyYXJ5IGRvZXMgbm90IHRyYWNrIGxvb2tiZWhpbmQuXG4gICAgcGVlayhvZmZzZXQpIHtcbiAgICAgICAgbGV0IGlkeCA9IHRoaXMuY2h1bmtPZmYgKyBvZmZzZXQsIHBvcywgcmVzdWx0O1xuICAgICAgICBpZiAoaWR4ID49IDAgJiYgaWR4IDwgdGhpcy5jaHVuay5sZW5ndGgpIHtcbiAgICAgICAgICAgIHBvcyA9IHRoaXMucG9zICsgb2Zmc2V0O1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5jaHVuay5jaGFyQ29kZUF0KGlkeCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgcmVzb2x2ZWQgPSB0aGlzLnJlc29sdmVPZmZzZXQob2Zmc2V0LCAxKTtcbiAgICAgICAgICAgIGlmIChyZXNvbHZlZCA9PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgIHBvcyA9IHJlc29sdmVkO1xuICAgICAgICAgICAgaWYgKHBvcyA+PSB0aGlzLmNodW5rMlBvcyAmJiBwb3MgPCB0aGlzLmNodW5rMlBvcyArIHRoaXMuY2h1bmsyLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuY2h1bmsyLmNoYXJDb2RlQXQocG9zIC0gdGhpcy5jaHVuazJQb3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGkgPSB0aGlzLnJhbmdlSW5kZXgsIHJhbmdlID0gdGhpcy5yYW5nZTtcbiAgICAgICAgICAgICAgICB3aGlsZSAocmFuZ2UudG8gPD0gcG9zKVxuICAgICAgICAgICAgICAgICAgICByYW5nZSA9IHRoaXMucmFuZ2VzWysraV07XG4gICAgICAgICAgICAgICAgdGhpcy5jaHVuazIgPSB0aGlzLmlucHV0LmNodW5rKHRoaXMuY2h1bmsyUG9zID0gcG9zKTtcbiAgICAgICAgICAgICAgICBpZiAocG9zICsgdGhpcy5jaHVuazIubGVuZ3RoID4gcmFuZ2UudG8pXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2h1bmsyID0gdGhpcy5jaHVuazIuc2xpY2UoMCwgcmFuZ2UudG8gLSBwb3MpO1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuY2h1bmsyLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBvcyA+PSB0aGlzLnRva2VuLmxvb2tBaGVhZClcbiAgICAgICAgICAgIHRoaXMudG9rZW4ubG9va0FoZWFkID0gcG9zICsgMTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLy8vIEFjY2VwdCBhIHRva2VuLiBCeSBkZWZhdWx0LCB0aGUgZW5kIG9mIHRoZSB0b2tlbiBpcyBzZXQgdG8gdGhlXG4gICAgLy8vIGN1cnJlbnQgc3RyZWFtIHBvc2l0aW9uLCBidXQgeW91IGNhbiBwYXNzIGFuIG9mZnNldCAocmVsYXRpdmUgdG9cbiAgICAvLy8gdGhlIHN0cmVhbSBwb3NpdGlvbikgdG8gY2hhbmdlIHRoYXQuXG4gICAgYWNjZXB0VG9rZW4odG9rZW4sIGVuZE9mZnNldCA9IDApIHtcbiAgICAgICAgbGV0IGVuZCA9IGVuZE9mZnNldCA/IHRoaXMucmVzb2x2ZU9mZnNldChlbmRPZmZzZXQsIC0xKSA6IHRoaXMucG9zO1xuICAgICAgICBpZiAoZW5kID09IG51bGwgfHwgZW5kIDwgdGhpcy50b2tlbi5zdGFydClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiVG9rZW4gZW5kIG91dCBvZiBib3VuZHNcIik7XG4gICAgICAgIHRoaXMudG9rZW4udmFsdWUgPSB0b2tlbjtcbiAgICAgICAgdGhpcy50b2tlbi5lbmQgPSBlbmQ7XG4gICAgfVxuICAgIGdldENodW5rKCkge1xuICAgICAgICBpZiAodGhpcy5wb3MgPj0gdGhpcy5jaHVuazJQb3MgJiYgdGhpcy5wb3MgPCB0aGlzLmNodW5rMlBvcyArIHRoaXMuY2h1bmsyLmxlbmd0aCkge1xuICAgICAgICAgICAgbGV0IHsgY2h1bmssIGNodW5rUG9zIH0gPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5jaHVuayA9IHRoaXMuY2h1bmsyO1xuICAgICAgICAgICAgdGhpcy5jaHVua1BvcyA9IHRoaXMuY2h1bmsyUG9zO1xuICAgICAgICAgICAgdGhpcy5jaHVuazIgPSBjaHVuaztcbiAgICAgICAgICAgIHRoaXMuY2h1bmsyUG9zID0gY2h1bmtQb3M7XG4gICAgICAgICAgICB0aGlzLmNodW5rT2ZmID0gdGhpcy5wb3MgLSB0aGlzLmNodW5rUG9zO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jaHVuazIgPSB0aGlzLmNodW5rO1xuICAgICAgICAgICAgdGhpcy5jaHVuazJQb3MgPSB0aGlzLmNodW5rUG9zO1xuICAgICAgICAgICAgbGV0IG5leHRDaHVuayA9IHRoaXMuaW5wdXQuY2h1bmsodGhpcy5wb3MpO1xuICAgICAgICAgICAgbGV0IGVuZCA9IHRoaXMucG9zICsgbmV4dENodW5rLmxlbmd0aDtcbiAgICAgICAgICAgIHRoaXMuY2h1bmsgPSBlbmQgPiB0aGlzLnJhbmdlLnRvID8gbmV4dENodW5rLnNsaWNlKDAsIHRoaXMucmFuZ2UudG8gLSB0aGlzLnBvcykgOiBuZXh0Q2h1bms7XG4gICAgICAgICAgICB0aGlzLmNodW5rUG9zID0gdGhpcy5wb3M7XG4gICAgICAgICAgICB0aGlzLmNodW5rT2ZmID0gMDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZWFkTmV4dCgpIHtcbiAgICAgICAgaWYgKHRoaXMuY2h1bmtPZmYgPj0gdGhpcy5jaHVuay5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0Q2h1bmsoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNodW5rT2ZmID09IHRoaXMuY2h1bmsubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5leHQgPSAtMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5uZXh0ID0gdGhpcy5jaHVuay5jaGFyQ29kZUF0KHRoaXMuY2h1bmtPZmYpO1xuICAgIH1cbiAgICAvLy8gTW92ZSB0aGUgc3RyZWFtIGZvcndhcmQgTiAoZGVmYXVsdHMgdG8gMSkgY29kZSB1bml0cy4gUmV0dXJuc1xuICAgIC8vLyB0aGUgbmV3IHZhbHVlIG9mIFtgbmV4dGBdKCNsci5JbnB1dFN0cmVhbS5uZXh0KS5cbiAgICBhZHZhbmNlKG4gPSAxKSB7XG4gICAgICAgIHRoaXMuY2h1bmtPZmYgKz0gbjtcbiAgICAgICAgd2hpbGUgKHRoaXMucG9zICsgbiA+PSB0aGlzLnJhbmdlLnRvKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yYW5nZUluZGV4ID09IHRoaXMucmFuZ2VzLmxlbmd0aCAtIDEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0RG9uZSgpO1xuICAgICAgICAgICAgbiAtPSB0aGlzLnJhbmdlLnRvIC0gdGhpcy5wb3M7XG4gICAgICAgICAgICB0aGlzLnJhbmdlID0gdGhpcy5yYW5nZXNbKyt0aGlzLnJhbmdlSW5kZXhdO1xuICAgICAgICAgICAgdGhpcy5wb3MgPSB0aGlzLnJhbmdlLmZyb207XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wb3MgKz0gbjtcbiAgICAgICAgaWYgKHRoaXMucG9zID49IHRoaXMudG9rZW4ubG9va0FoZWFkKVxuICAgICAgICAgICAgdGhpcy50b2tlbi5sb29rQWhlYWQgPSB0aGlzLnBvcyArIDE7XG4gICAgICAgIHJldHVybiB0aGlzLnJlYWROZXh0KCk7XG4gICAgfVxuICAgIHNldERvbmUoKSB7XG4gICAgICAgIHRoaXMucG9zID0gdGhpcy5jaHVua1BvcyA9IHRoaXMuZW5kO1xuICAgICAgICB0aGlzLnJhbmdlID0gdGhpcy5yYW5nZXNbdGhpcy5yYW5nZUluZGV4ID0gdGhpcy5yYW5nZXMubGVuZ3RoIC0gMV07XG4gICAgICAgIHRoaXMuY2h1bmsgPSBcIlwiO1xuICAgICAgICByZXR1cm4gdGhpcy5uZXh0ID0gLTE7XG4gICAgfVxuICAgIC8vLyBAaW50ZXJuYWxcbiAgICByZXNldChwb3MsIHRva2VuKSB7XG4gICAgICAgIGlmICh0b2tlbikge1xuICAgICAgICAgICAgdGhpcy50b2tlbiA9IHRva2VuO1xuICAgICAgICAgICAgdG9rZW4uc3RhcnQgPSBwb3M7XG4gICAgICAgICAgICB0b2tlbi5sb29rQWhlYWQgPSBwb3MgKyAxO1xuICAgICAgICAgICAgdG9rZW4udmFsdWUgPSB0b2tlbi5leHRlbmRlZCA9IC0xO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50b2tlbiA9IG51bGxUb2tlbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wb3MgIT0gcG9zKSB7XG4gICAgICAgICAgICB0aGlzLnBvcyA9IHBvcztcbiAgICAgICAgICAgIGlmIChwb3MgPT0gdGhpcy5lbmQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldERvbmUoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlIChwb3MgPCB0aGlzLnJhbmdlLmZyb20pXG4gICAgICAgICAgICAgICAgdGhpcy5yYW5nZSA9IHRoaXMucmFuZ2VzWy0tdGhpcy5yYW5nZUluZGV4XTtcbiAgICAgICAgICAgIHdoaWxlIChwb3MgPj0gdGhpcy5yYW5nZS50bylcbiAgICAgICAgICAgICAgICB0aGlzLnJhbmdlID0gdGhpcy5yYW5nZXNbKyt0aGlzLnJhbmdlSW5kZXhdO1xuICAgICAgICAgICAgaWYgKHBvcyA+PSB0aGlzLmNodW5rUG9zICYmIHBvcyA8IHRoaXMuY2h1bmtQb3MgKyB0aGlzLmNodW5rLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2h1bmtPZmYgPSBwb3MgLSB0aGlzLmNodW5rUG9zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaHVuayA9IFwiXCI7XG4gICAgICAgICAgICAgICAgdGhpcy5jaHVua09mZiA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlYWROZXh0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8vLyBAaW50ZXJuYWxcbiAgICByZWFkKGZyb20sIHRvKSB7XG4gICAgICAgIGlmIChmcm9tID49IHRoaXMuY2h1bmtQb3MgJiYgdG8gPD0gdGhpcy5jaHVua1BvcyArIHRoaXMuY2h1bmsubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2h1bmsuc2xpY2UoZnJvbSAtIHRoaXMuY2h1bmtQb3MsIHRvIC0gdGhpcy5jaHVua1Bvcyk7XG4gICAgICAgIGlmIChmcm9tID49IHRoaXMuY2h1bmsyUG9zICYmIHRvIDw9IHRoaXMuY2h1bmsyUG9zICsgdGhpcy5jaHVuazIubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2h1bmsyLnNsaWNlKGZyb20gLSB0aGlzLmNodW5rMlBvcywgdG8gLSB0aGlzLmNodW5rMlBvcyk7XG4gICAgICAgIGlmIChmcm9tID49IHRoaXMucmFuZ2UuZnJvbSAmJiB0byA8PSB0aGlzLnJhbmdlLnRvKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5wdXQucmVhZChmcm9tLCB0byk7XG4gICAgICAgIGxldCByZXN1bHQgPSBcIlwiO1xuICAgICAgICBmb3IgKGxldCByIG9mIHRoaXMucmFuZ2VzKSB7XG4gICAgICAgICAgICBpZiAoci5mcm9tID49IHRvKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgaWYgKHIudG8gPiBmcm9tKVxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSB0aGlzLmlucHV0LnJlYWQoTWF0aC5tYXgoci5mcm9tLCBmcm9tKSwgTWF0aC5taW4oci50bywgdG8pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cbi8vLyBAaW50ZXJuYWxcbmNsYXNzIFRva2VuR3JvdXAge1xuICAgIGNvbnN0cnVjdG9yKGRhdGEsIGlkKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICB9XG4gICAgdG9rZW4oaW5wdXQsIHN0YWNrKSB7IHJlYWRUb2tlbih0aGlzLmRhdGEsIGlucHV0LCBzdGFjaywgdGhpcy5pZCk7IH1cbn1cblRva2VuR3JvdXAucHJvdG90eXBlLmNvbnRleHR1YWwgPSBUb2tlbkdyb3VwLnByb3RvdHlwZS5mYWxsYmFjayA9IFRva2VuR3JvdXAucHJvdG90eXBlLmV4dGVuZCA9IGZhbHNlO1xuLy8vIGBAZXh0ZXJuYWwgdG9rZW5zYCBkZWNsYXJhdGlvbnMgaW4gdGhlIGdyYW1tYXIgc2hvdWxkIHJlc29sdmUgdG9cbi8vLyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuY2xhc3MgRXh0ZXJuYWxUb2tlbml6ZXIge1xuICAgIC8vLyBDcmVhdGUgYSB0b2tlbml6ZXIuIFRoZSBmaXJzdCBhcmd1bWVudCBpcyB0aGUgZnVuY3Rpb24gdGhhdCxcbiAgICAvLy8gZ2l2ZW4gYW4gaW5wdXQgc3RyZWFtLCBzY2FucyBmb3IgdGhlIHR5cGVzIG9mIHRva2VucyBpdFxuICAgIC8vLyByZWNvZ25pemVzIGF0IHRoZSBzdHJlYW0ncyBwb3NpdGlvbiwgYW5kIGNhbGxzXG4gICAgLy8vIFtgYWNjZXB0VG9rZW5gXSgjbHIuSW5wdXRTdHJlYW0uYWNjZXB0VG9rZW4pIHdoZW4gaXQgZmluZHNcbiAgICAvLy8gb25lLlxuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8vLyBAaW50ZXJuYWxcbiAgICB0b2tlbiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHRoaXMudG9rZW4gPSB0b2tlbjtcbiAgICAgICAgdGhpcy5jb250ZXh0dWFsID0gISFvcHRpb25zLmNvbnRleHR1YWw7XG4gICAgICAgIHRoaXMuZmFsbGJhY2sgPSAhIW9wdGlvbnMuZmFsbGJhY2s7XG4gICAgICAgIHRoaXMuZXh0ZW5kID0gISFvcHRpb25zLmV4dGVuZDtcbiAgICB9XG59XG4vLyBUb2tlbml6ZXIgZGF0YSBpcyBzdG9yZWQgYSBiaWcgdWludDE2IGFycmF5IGNvbnRhaW5pbmcsIGZvciBlYWNoXG4vLyBzdGF0ZTpcbi8vXG4vLyAgLSBBIGdyb3VwIGJpdG1hc2ssIGluZGljYXRpbmcgd2hhdCB0b2tlbiBncm91cHMgYXJlIHJlYWNoYWJsZSBmcm9tXG4vLyAgICB0aGlzIHN0YXRlLCBzbyB0aGF0IHBhdGhzIHRoYXQgY2FuIG9ubHkgbGVhZCB0byB0b2tlbnMgbm90IGluXG4vLyAgICBhbnkgb2YgdGhlIGN1cnJlbnQgZ3JvdXBzIGNhbiBiZSBjdXQgb2ZmIGVhcmx5LlxuLy9cbi8vICAtIFRoZSBwb3NpdGlvbiBvZiB0aGUgZW5kIG9mIHRoZSBzdGF0ZSdzIHNlcXVlbmNlIG9mIGFjY2VwdGluZ1xuLy8gICAgdG9rZW5zXG4vL1xuLy8gIC0gVGhlIG51bWJlciBvZiBvdXRnb2luZyBlZGdlcyBmb3IgdGhlIHN0YXRlXG4vL1xuLy8gIC0gVGhlIGFjY2VwdGluZyB0b2tlbnMsIGFzICh0b2tlbiBpZCwgZ3JvdXAgbWFzaykgcGFpcnNcbi8vXG4vLyAgLSBUaGUgb3V0Z29pbmcgZWRnZXMsIGFzIChzdGFydCBjaGFyYWN0ZXIsIGVuZCBjaGFyYWN0ZXIsIHN0YXRlXG4vLyAgICBpbmRleCkgdHJpcGxlcywgd2l0aCBlbmQgY2hhcmFjdGVyIGJlaW5nIGV4Y2x1c2l2ZVxuLy9cbi8vIFRoaXMgZnVuY3Rpb24gaW50ZXJwcmV0cyB0aGF0IGRhdGEsIHJ1bm5pbmcgdGhyb3VnaCBhIHN0cmVhbSBhc1xuLy8gbG9uZyBhcyBuZXcgc3RhdGVzIHdpdGggdGhlIGEgbWF0Y2hpbmcgZ3JvdXAgbWFzayBjYW4gYmUgcmVhY2hlZCxcbi8vIGFuZCB1cGRhdGluZyBgaW5wdXQudG9rZW5gIHdoZW4gaXQgbWF0Y2hlcyBhIHRva2VuLlxuZnVuY3Rpb24gcmVhZFRva2VuKGRhdGEsIGlucHV0LCBzdGFjaywgZ3JvdXApIHtcbiAgICBsZXQgc3RhdGUgPSAwLCBncm91cE1hc2sgPSAxIDw8IGdyb3VwLCB7IHBhcnNlciB9ID0gc3RhY2sucCwgeyBkaWFsZWN0IH0gPSBwYXJzZXI7XG4gICAgc2NhbjogZm9yICg7Oykge1xuICAgICAgICBpZiAoKGdyb3VwTWFzayAmIGRhdGFbc3RhdGVdKSA9PSAwKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGxldCBhY2NFbmQgPSBkYXRhW3N0YXRlICsgMV07XG4gICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGhpcyBzdGF0ZSBjYW4gbGVhZCB0byBhIHRva2VuIGluIHRoZSBjdXJyZW50IGdyb3VwXG4gICAgICAgIC8vIEFjY2VwdCB0b2tlbnMgaW4gdGhpcyBzdGF0ZSwgcG9zc2libHkgb3ZlcndyaXRpbmdcbiAgICAgICAgLy8gbG93ZXItcHJlY2VkZW5jZSAvIHNob3J0ZXIgdG9rZW5zXG4gICAgICAgIGZvciAobGV0IGkgPSBzdGF0ZSArIDM7IGkgPCBhY2NFbmQ7IGkgKz0gMilcbiAgICAgICAgICAgIGlmICgoZGF0YVtpICsgMV0gJiBncm91cE1hc2spID4gMCkge1xuICAgICAgICAgICAgICAgIGxldCB0ZXJtID0gZGF0YVtpXTtcbiAgICAgICAgICAgICAgICBpZiAoZGlhbGVjdC5hbGxvd3ModGVybSkgJiZcbiAgICAgICAgICAgICAgICAgICAgKGlucHV0LnRva2VuLnZhbHVlID09IC0xIHx8IGlucHV0LnRva2VuLnZhbHVlID09IHRlcm0gfHwgcGFyc2VyLm92ZXJyaWRlcyh0ZXJtLCBpbnB1dC50b2tlbi52YWx1ZSkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0LmFjY2VwdFRva2VuKHRlcm0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIGxldCBuZXh0ID0gaW5wdXQubmV4dCwgbG93ID0gMCwgaGlnaCA9IGRhdGFbc3RhdGUgKyAyXTtcbiAgICAgICAgLy8gU3BlY2lhbCBjYXNlIGZvciBFT0ZcbiAgICAgICAgaWYgKGlucHV0Lm5leHQgPCAwICYmIGhpZ2ggPiBsb3cgJiYgZGF0YVthY2NFbmQgKyBoaWdoICogMyAtIDNdID09IDY1NTM1IC8qIEVuZCAqLyAmJiBkYXRhW2FjY0VuZCArIGhpZ2ggKiAzIC0gM10gPT0gNjU1MzUgLyogRW5kICovKSB7XG4gICAgICAgICAgICBzdGF0ZSA9IGRhdGFbYWNjRW5kICsgaGlnaCAqIDMgLSAxXTtcbiAgICAgICAgICAgIGNvbnRpbnVlIHNjYW47XG4gICAgICAgIH1cbiAgICAgICAgLy8gRG8gYSBiaW5hcnkgc2VhcmNoIG9uIHRoZSBzdGF0ZSdzIGVkZ2VzXG4gICAgICAgIGZvciAoOyBsb3cgPCBoaWdoOykge1xuICAgICAgICAgICAgbGV0IG1pZCA9IChsb3cgKyBoaWdoKSA+PiAxO1xuICAgICAgICAgICAgbGV0IGluZGV4ID0gYWNjRW5kICsgbWlkICsgKG1pZCA8PCAxKTtcbiAgICAgICAgICAgIGxldCBmcm9tID0gZGF0YVtpbmRleF0sIHRvID0gZGF0YVtpbmRleCArIDFdIHx8IDB4MTAwMDA7XG4gICAgICAgICAgICBpZiAobmV4dCA8IGZyb20pXG4gICAgICAgICAgICAgICAgaGlnaCA9IG1pZDtcbiAgICAgICAgICAgIGVsc2UgaWYgKG5leHQgPj0gdG8pXG4gICAgICAgICAgICAgICAgbG93ID0gbWlkICsgMTtcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0YXRlID0gZGF0YVtpbmRleCArIDJdO1xuICAgICAgICAgICAgICAgIGlucHV0LmFkdmFuY2UoKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZSBzY2FuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbn1cblxuLy8gU2VlIGxlemVyLWdlbmVyYXRvci9zcmMvZW5jb2RlLnRzIGZvciBjb21tZW50cyBhYm91dCB0aGUgZW5jb2Rpbmdcbi8vIHVzZWQgaGVyZVxuZnVuY3Rpb24gZGVjb2RlQXJyYXkoaW5wdXQsIFR5cGUgPSBVaW50MTZBcnJheSkge1xuICAgIGlmICh0eXBlb2YgaW5wdXQgIT0gXCJzdHJpbmdcIilcbiAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgIGxldCBhcnJheSA9IG51bGw7XG4gICAgZm9yIChsZXQgcG9zID0gMCwgb3V0ID0gMDsgcG9zIDwgaW5wdXQubGVuZ3RoOykge1xuICAgICAgICBsZXQgdmFsdWUgPSAwO1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBsZXQgbmV4dCA9IGlucHV0LmNoYXJDb2RlQXQocG9zKyspLCBzdG9wID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAobmV4dCA9PSAxMjYgLyogQmlnVmFsQ29kZSAqLykge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gNjU1MzUgLyogQmlnVmFsICovO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5leHQgPj0gOTIgLyogR2FwMiAqLylcbiAgICAgICAgICAgICAgICBuZXh0LS07XG4gICAgICAgICAgICBpZiAobmV4dCA+PSAzNCAvKiBHYXAxICovKVxuICAgICAgICAgICAgICAgIG5leHQtLTtcbiAgICAgICAgICAgIGxldCBkaWdpdCA9IG5leHQgLSAzMiAvKiBTdGFydCAqLztcbiAgICAgICAgICAgIGlmIChkaWdpdCA+PSA0NiAvKiBCYXNlICovKSB7XG4gICAgICAgICAgICAgICAgZGlnaXQgLT0gNDYgLyogQmFzZSAqLztcbiAgICAgICAgICAgICAgICBzdG9wID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhbHVlICs9IGRpZ2l0O1xuICAgICAgICAgICAgaWYgKHN0b3ApXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB2YWx1ZSAqPSA0NiAvKiBCYXNlICovO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcnJheSlcbiAgICAgICAgICAgIGFycmF5W291dCsrXSA9IHZhbHVlO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBhcnJheSA9IG5ldyBUeXBlKHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5O1xufVxuXG4vLyBFbnZpcm9ubWVudCB2YXJpYWJsZSB1c2VkIHRvIGNvbnRyb2wgY29uc29sZSBvdXRwdXRcbmNvbnN0IHZlcmJvc2UgPSB0eXBlb2YgcHJvY2VzcyAhPSBcInVuZGVmaW5lZFwiICYmIHByb2Nlc3MuZW52ICYmIC9cXGJwYXJzZVxcYi8udGVzdChwcm9jZXNzLmVudi5MT0cpO1xubGV0IHN0YWNrSURzID0gbnVsbDtcbnZhciBTYWZldHk7XG4oZnVuY3Rpb24gKFNhZmV0eSkge1xuICAgIFNhZmV0eVtTYWZldHlbXCJNYXJnaW5cIl0gPSAyNV0gPSBcIk1hcmdpblwiO1xufSkoU2FmZXR5IHx8IChTYWZldHkgPSB7fSkpO1xuZnVuY3Rpb24gY3V0QXQodHJlZSwgcG9zLCBzaWRlKSB7XG4gICAgbGV0IGN1cnNvciA9IHRyZWUuY3Vyc29yKEl0ZXJNb2RlLkluY2x1ZGVBbm9ueW1vdXMpO1xuICAgIGN1cnNvci5tb3ZlVG8ocG9zKTtcbiAgICBmb3IgKDs7KSB7XG4gICAgICAgIGlmICghKHNpZGUgPCAwID8gY3Vyc29yLmNoaWxkQmVmb3JlKHBvcykgOiBjdXJzb3IuY2hpbGRBZnRlcihwb3MpKSlcbiAgICAgICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgICAgICBpZiAoKHNpZGUgPCAwID8gY3Vyc29yLnRvIDwgcG9zIDogY3Vyc29yLmZyb20gPiBwb3MpICYmICFjdXJzb3IudHlwZS5pc0Vycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2lkZSA8IDAgPyBNYXRoLm1heCgwLCBNYXRoLm1pbihjdXJzb3IudG8gLSAxLCBwb3MgLSAyNSAvKiBNYXJnaW4gKi8pKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBNYXRoLm1pbih0cmVlLmxlbmd0aCwgTWF0aC5tYXgoY3Vyc29yLmZyb20gKyAxLCBwb3MgKyAyNSAvKiBNYXJnaW4gKi8pKTtcbiAgICAgICAgICAgICAgICBpZiAoc2lkZSA8IDAgPyBjdXJzb3IucHJldlNpYmxpbmcoKSA6IGN1cnNvci5uZXh0U2libGluZygpKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBpZiAoIWN1cnNvci5wYXJlbnQoKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNpZGUgPCAwID8gMCA6IHRyZWUubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgIH1cbn1cbmNsYXNzIEZyYWdtZW50Q3Vyc29yIHtcbiAgICBjb25zdHJ1Y3RvcihmcmFnbWVudHMsIG5vZGVTZXQpIHtcbiAgICAgICAgdGhpcy5mcmFnbWVudHMgPSBmcmFnbWVudHM7XG4gICAgICAgIHRoaXMubm9kZVNldCA9IG5vZGVTZXQ7XG4gICAgICAgIHRoaXMuaSA9IDA7XG4gICAgICAgIHRoaXMuZnJhZ21lbnQgPSBudWxsO1xuICAgICAgICB0aGlzLnNhZmVGcm9tID0gLTE7XG4gICAgICAgIHRoaXMuc2FmZVRvID0gLTE7XG4gICAgICAgIHRoaXMudHJlZXMgPSBbXTtcbiAgICAgICAgdGhpcy5zdGFydCA9IFtdO1xuICAgICAgICB0aGlzLmluZGV4ID0gW107XG4gICAgICAgIHRoaXMubmV4dEZyYWdtZW50KCk7XG4gICAgfVxuICAgIG5leHRGcmFnbWVudCgpIHtcbiAgICAgICAgbGV0IGZyID0gdGhpcy5mcmFnbWVudCA9IHRoaXMuaSA9PSB0aGlzLmZyYWdtZW50cy5sZW5ndGggPyBudWxsIDogdGhpcy5mcmFnbWVudHNbdGhpcy5pKytdO1xuICAgICAgICBpZiAoZnIpIHtcbiAgICAgICAgICAgIHRoaXMuc2FmZUZyb20gPSBmci5vcGVuU3RhcnQgPyBjdXRBdChmci50cmVlLCBmci5mcm9tICsgZnIub2Zmc2V0LCAxKSAtIGZyLm9mZnNldCA6IGZyLmZyb207XG4gICAgICAgICAgICB0aGlzLnNhZmVUbyA9IGZyLm9wZW5FbmQgPyBjdXRBdChmci50cmVlLCBmci50byArIGZyLm9mZnNldCwgLTEpIC0gZnIub2Zmc2V0IDogZnIudG87XG4gICAgICAgICAgICB3aGlsZSAodGhpcy50cmVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyZWVzLnBvcCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQucG9wKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbmRleC5wb3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudHJlZXMucHVzaChmci50cmVlKTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnQucHVzaCgtZnIub2Zmc2V0KTtcbiAgICAgICAgICAgIHRoaXMuaW5kZXgucHVzaCgwKTtcbiAgICAgICAgICAgIHRoaXMubmV4dFN0YXJ0ID0gdGhpcy5zYWZlRnJvbTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubmV4dFN0YXJ0ID0gMWU5O1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGBwb3NgIG11c3QgYmUgPj0gYW55IHByZXZpb3VzbHkgZ2l2ZW4gYHBvc2AgZm9yIHRoaXMgY3Vyc29yXG4gICAgbm9kZUF0KHBvcykge1xuICAgICAgICBpZiAocG9zIDwgdGhpcy5uZXh0U3RhcnQpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgd2hpbGUgKHRoaXMuZnJhZ21lbnQgJiYgdGhpcy5zYWZlVG8gPD0gcG9zKVxuICAgICAgICAgICAgdGhpcy5uZXh0RnJhZ21lbnQoKTtcbiAgICAgICAgaWYgKCF0aGlzLmZyYWdtZW50KVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgIGxldCBsYXN0ID0gdGhpcy50cmVlcy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgaWYgKGxhc3QgPCAwKSB7IC8vIEVuZCBvZiB0cmVlXG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0RnJhZ21lbnQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCB0b3AgPSB0aGlzLnRyZWVzW2xhc3RdLCBpbmRleCA9IHRoaXMuaW5kZXhbbGFzdF07XG4gICAgICAgICAgICBpZiAoaW5kZXggPT0gdG9wLmNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJlZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydC5wb3AoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmluZGV4LnBvcCgpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IG5leHQgPSB0b3AuY2hpbGRyZW5baW5kZXhdO1xuICAgICAgICAgICAgbGV0IHN0YXJ0ID0gdGhpcy5zdGFydFtsYXN0XSArIHRvcC5wb3NpdGlvbnNbaW5kZXhdO1xuICAgICAgICAgICAgaWYgKHN0YXJ0ID4gcG9zKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhcnQgPSBzdGFydDtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuZXh0IGluc3RhbmNlb2YgVHJlZSkge1xuICAgICAgICAgICAgICAgIGlmIChzdGFydCA9PSBwb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0IDwgdGhpcy5zYWZlRnJvbSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBsZXQgZW5kID0gc3RhcnQgKyBuZXh0Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZCA8PSB0aGlzLnNhZmVUbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxvb2tBaGVhZCA9IG5leHQucHJvcChOb2RlUHJvcC5sb29rQWhlYWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsb29rQWhlYWQgfHwgZW5kICsgbG9va0FoZWFkIDwgdGhpcy5mcmFnbWVudC50bylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmluZGV4W2xhc3RdKys7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXJ0ICsgbmV4dC5sZW5ndGggPj0gTWF0aC5tYXgodGhpcy5zYWZlRnJvbSwgcG9zKSkgeyAvLyBFbnRlciB0aGlzIG5vZGVcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmVlcy5wdXNoKG5leHQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0LnB1c2goc3RhcnQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4LnB1c2goMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbmRleFtsYXN0XSsrO1xuICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXJ0ID0gc3RhcnQgKyBuZXh0Lmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbmNsYXNzIFRva2VuQ2FjaGUge1xuICAgIGNvbnN0cnVjdG9yKHBhcnNlciwgc3RyZWFtKSB7XG4gICAgICAgIHRoaXMuc3RyZWFtID0gc3RyZWFtO1xuICAgICAgICB0aGlzLnRva2VucyA9IFtdO1xuICAgICAgICB0aGlzLm1haW5Ub2tlbiA9IG51bGw7XG4gICAgICAgIHRoaXMuYWN0aW9ucyA9IFtdO1xuICAgICAgICB0aGlzLnRva2VucyA9IHBhcnNlci50b2tlbml6ZXJzLm1hcChfID0+IG5ldyBDYWNoZWRUb2tlbik7XG4gICAgfVxuICAgIGdldEFjdGlvbnMoc3RhY2spIHtcbiAgICAgICAgbGV0IGFjdGlvbkluZGV4ID0gMDtcbiAgICAgICAgbGV0IG1haW4gPSBudWxsO1xuICAgICAgICBsZXQgeyBwYXJzZXIgfSA9IHN0YWNrLnAsIHsgdG9rZW5pemVycyB9ID0gcGFyc2VyO1xuICAgICAgICBsZXQgbWFzayA9IHBhcnNlci5zdGF0ZVNsb3Qoc3RhY2suc3RhdGUsIDMgLyogVG9rZW5pemVyTWFzayAqLyk7XG4gICAgICAgIGxldCBjb250ZXh0ID0gc3RhY2suY3VyQ29udGV4dCA/IHN0YWNrLmN1ckNvbnRleHQuaGFzaCA6IDA7XG4gICAgICAgIGxldCBsb29rQWhlYWQgPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRva2VuaXplcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICgoKDEgPDwgaSkgJiBtYXNrKSA9PSAwKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgbGV0IHRva2VuaXplciA9IHRva2VuaXplcnNbaV0sIHRva2VuID0gdGhpcy50b2tlbnNbaV07XG4gICAgICAgICAgICBpZiAobWFpbiAmJiAhdG9rZW5pemVyLmZhbGxiYWNrKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKHRva2VuaXplci5jb250ZXh0dWFsIHx8IHRva2VuLnN0YXJ0ICE9IHN0YWNrLnBvcyB8fCB0b2tlbi5tYXNrICE9IG1hc2sgfHwgdG9rZW4uY29udGV4dCAhPSBjb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDYWNoZWRUb2tlbih0b2tlbiwgdG9rZW5pemVyLCBzdGFjayk7XG4gICAgICAgICAgICAgICAgdG9rZW4ubWFzayA9IG1hc2s7XG4gICAgICAgICAgICAgICAgdG9rZW4uY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodG9rZW4ubG9va0FoZWFkID4gdG9rZW4uZW5kICsgMjUgLyogTWFyZ2luICovKVxuICAgICAgICAgICAgICAgIGxvb2tBaGVhZCA9IE1hdGgubWF4KHRva2VuLmxvb2tBaGVhZCwgbG9va0FoZWFkKTtcbiAgICAgICAgICAgIGlmICh0b2tlbi52YWx1ZSAhPSAwIC8qIEVyciAqLykge1xuICAgICAgICAgICAgICAgIGxldCBzdGFydEluZGV4ID0gYWN0aW9uSW5kZXg7XG4gICAgICAgICAgICAgICAgaWYgKHRva2VuLmV4dGVuZGVkID4gLTEpXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbkluZGV4ID0gdGhpcy5hZGRBY3Rpb25zKHN0YWNrLCB0b2tlbi5leHRlbmRlZCwgdG9rZW4uZW5kLCBhY3Rpb25JbmRleCk7XG4gICAgICAgICAgICAgICAgYWN0aW9uSW5kZXggPSB0aGlzLmFkZEFjdGlvbnMoc3RhY2ssIHRva2VuLnZhbHVlLCB0b2tlbi5lbmQsIGFjdGlvbkluZGV4KTtcbiAgICAgICAgICAgICAgICBpZiAoIXRva2VuaXplci5leHRlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgbWFpbiA9IHRva2VuO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aW9uSW5kZXggPiBzdGFydEluZGV4KVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHdoaWxlICh0aGlzLmFjdGlvbnMubGVuZ3RoID4gYWN0aW9uSW5kZXgpXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnMucG9wKCk7XG4gICAgICAgIGlmIChsb29rQWhlYWQpXG4gICAgICAgICAgICBzdGFjay5zZXRMb29rQWhlYWQobG9va0FoZWFkKTtcbiAgICAgICAgaWYgKCFtYWluICYmIHN0YWNrLnBvcyA9PSB0aGlzLnN0cmVhbS5lbmQpIHtcbiAgICAgICAgICAgIG1haW4gPSBuZXcgQ2FjaGVkVG9rZW47XG4gICAgICAgICAgICBtYWluLnZhbHVlID0gc3RhY2sucC5wYXJzZXIuZW9mVGVybTtcbiAgICAgICAgICAgIG1haW4uc3RhcnQgPSBtYWluLmVuZCA9IHN0YWNrLnBvcztcbiAgICAgICAgICAgIGFjdGlvbkluZGV4ID0gdGhpcy5hZGRBY3Rpb25zKHN0YWNrLCBtYWluLnZhbHVlLCBtYWluLmVuZCwgYWN0aW9uSW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubWFpblRva2VuID0gbWFpbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWN0aW9ucztcbiAgICB9XG4gICAgZ2V0TWFpblRva2VuKHN0YWNrKSB7XG4gICAgICAgIGlmICh0aGlzLm1haW5Ub2tlbilcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1haW5Ub2tlbjtcbiAgICAgICAgbGV0IG1haW4gPSBuZXcgQ2FjaGVkVG9rZW4sIHsgcG9zLCBwIH0gPSBzdGFjaztcbiAgICAgICAgbWFpbi5zdGFydCA9IHBvcztcbiAgICAgICAgbWFpbi5lbmQgPSBNYXRoLm1pbihwb3MgKyAxLCBwLnN0cmVhbS5lbmQpO1xuICAgICAgICBtYWluLnZhbHVlID0gcG9zID09IHAuc3RyZWFtLmVuZCA/IHAucGFyc2VyLmVvZlRlcm0gOiAwIC8qIEVyciAqLztcbiAgICAgICAgcmV0dXJuIG1haW47XG4gICAgfVxuICAgIHVwZGF0ZUNhY2hlZFRva2VuKHRva2VuLCB0b2tlbml6ZXIsIHN0YWNrKSB7XG4gICAgICAgIGxldCBzdGFydCA9IHRoaXMuc3RyZWFtLmNsaXBQb3Moc3RhY2sucG9zKTtcbiAgICAgICAgdG9rZW5pemVyLnRva2VuKHRoaXMuc3RyZWFtLnJlc2V0KHN0YXJ0LCB0b2tlbiksIHN0YWNrKTtcbiAgICAgICAgaWYgKHRva2VuLnZhbHVlID4gLTEpIHtcbiAgICAgICAgICAgIGxldCB7IHBhcnNlciB9ID0gc3RhY2sucDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyc2VyLnNwZWNpYWxpemVkLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgICAgIGlmIChwYXJzZXIuc3BlY2lhbGl6ZWRbaV0gPT0gdG9rZW4udmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IHBhcnNlci5zcGVjaWFsaXplcnNbaV0odGhpcy5zdHJlYW0ucmVhZCh0b2tlbi5zdGFydCwgdG9rZW4uZW5kKSwgc3RhY2spO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID49IDAgJiYgc3RhY2sucC5wYXJzZXIuZGlhbGVjdC5hbGxvd3MocmVzdWx0ID4+IDEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHJlc3VsdCAmIDEpID09IDAgLyogU3BlY2lhbGl6ZSAqLylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbi52YWx1ZSA9IHJlc3VsdCA+PiAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuLmV4dGVuZGVkID0gcmVzdWx0ID4+IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRva2VuLnZhbHVlID0gMCAvKiBFcnIgKi87XG4gICAgICAgICAgICB0b2tlbi5lbmQgPSB0aGlzLnN0cmVhbS5jbGlwUG9zKHN0YXJ0ICsgMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHV0QWN0aW9uKGFjdGlvbiwgdG9rZW4sIGVuZCwgaW5kZXgpIHtcbiAgICAgICAgLy8gRG9uJ3QgYWRkIGR1cGxpY2F0ZSBhY3Rpb25zXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5kZXg7IGkgKz0gMylcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGlvbnNbaV0gPT0gYWN0aW9uKVxuICAgICAgICAgICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgICAgdGhpcy5hY3Rpb25zW2luZGV4KytdID0gYWN0aW9uO1xuICAgICAgICB0aGlzLmFjdGlvbnNbaW5kZXgrK10gPSB0b2tlbjtcbiAgICAgICAgdGhpcy5hY3Rpb25zW2luZGV4KytdID0gZW5kO1xuICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgfVxuICAgIGFkZEFjdGlvbnMoc3RhY2ssIHRva2VuLCBlbmQsIGluZGV4KSB7XG4gICAgICAgIGxldCB7IHN0YXRlIH0gPSBzdGFjaywgeyBwYXJzZXIgfSA9IHN0YWNrLnAsIHsgZGF0YSB9ID0gcGFyc2VyO1xuICAgICAgICBmb3IgKGxldCBzZXQgPSAwOyBzZXQgPCAyOyBzZXQrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHBhcnNlci5zdGF0ZVNsb3Qoc3RhdGUsIHNldCA/IDIgLyogU2tpcCAqLyA6IDEgLyogQWN0aW9ucyAqLyk7OyBpICs9IDMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YVtpXSA9PSA2NTUzNSAvKiBFbmQgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFbaSArIDFdID09IDEgLyogTmV4dCAqLykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHBhaXIoZGF0YSwgaSArIDIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID09IDAgJiYgZGF0YVtpICsgMV0gPT0gMiAvKiBPdGhlciAqLylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMucHV0QWN0aW9uKHBhaXIoZGF0YSwgaSArIDIpLCB0b2tlbiwgZW5kLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZGF0YVtpXSA9PSB0b2tlbilcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLnB1dEFjdGlvbihwYWlyKGRhdGEsIGkgKyAxKSwgdG9rZW4sIGVuZCwgaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbmRleDtcbiAgICB9XG59XG52YXIgUmVjO1xuKGZ1bmN0aW9uIChSZWMpIHtcbiAgICBSZWNbUmVjW1wiRGlzdGFuY2VcIl0gPSA1XSA9IFwiRGlzdGFuY2VcIjtcbiAgICBSZWNbUmVjW1wiTWF4UmVtYWluaW5nUGVyU3RlcFwiXSA9IDNdID0gXCJNYXhSZW1haW5pbmdQZXJTdGVwXCI7XG4gICAgLy8gV2hlbiB0d28gc3RhY2tzIGhhdmUgYmVlbiBydW5uaW5nIGluZGVwZW5kZW50bHkgbG9uZyBlbm91Z2ggdG9cbiAgICAvLyBhZGQgdGhpcyBtYW55IGVsZW1lbnRzIHRvIHRoZWlyIGJ1ZmZlcnMsIHBydW5lIG9uZS5cbiAgICBSZWNbUmVjW1wiTWluQnVmZmVyTGVuZ3RoUHJ1bmVcIl0gPSA1MDBdID0gXCJNaW5CdWZmZXJMZW5ndGhQcnVuZVwiO1xuICAgIFJlY1tSZWNbXCJGb3JjZVJlZHVjZUxpbWl0XCJdID0gMTBdID0gXCJGb3JjZVJlZHVjZUxpbWl0XCI7XG4gICAgLy8gT25jZSBhIHN0YWNrIHJlYWNoZXMgdGhpcyBkZXB0aCAoaW4gLnN0YWNrLmxlbmd0aCkgZm9yY2UtcmVkdWNlXG4gICAgLy8gaXQgYmFjayB0byBDdXRUbyB0byBhdm9pZCBjcmVhdGluZyB0cmVlcyB0aGF0IG92ZXJmbG93IHRoZSBzdGFja1xuICAgIC8vIG9uIHJlY3Vyc2l2ZSB0cmF2ZXJzYWwuXG4gICAgUmVjW1JlY1tcIkN1dERlcHRoXCJdID0gMTUwMDBdID0gXCJDdXREZXB0aFwiO1xuICAgIFJlY1tSZWNbXCJDdXRUb1wiXSA9IDkwMDBdID0gXCJDdXRUb1wiO1xufSkoUmVjIHx8IChSZWMgPSB7fSkpO1xuY2xhc3MgUGFyc2Uge1xuICAgIGNvbnN0cnVjdG9yKHBhcnNlciwgaW5wdXQsIGZyYWdtZW50cywgcmFuZ2VzKSB7XG4gICAgICAgIHRoaXMucGFyc2VyID0gcGFyc2VyO1xuICAgICAgICB0aGlzLmlucHV0ID0gaW5wdXQ7XG4gICAgICAgIHRoaXMucmFuZ2VzID0gcmFuZ2VzO1xuICAgICAgICB0aGlzLnJlY292ZXJpbmcgPSAwO1xuICAgICAgICB0aGlzLm5leHRTdGFja0lEID0gMHgyNjU0OyAvLyBcdTI2NTQsIFx1MjY1NSwgXHUyNjU2LCBcdTI2NTcsIFx1MjY1OCwgXHUyNjU5LCBcdTI2NjAsIFx1MjY2MSwgXHUyNjYyLCBcdTI2NjMsIFx1MjY2NCwgXHUyNjY1LCBcdTI2NjYsIFx1MjY2N1xuICAgICAgICB0aGlzLm1pblN0YWNrUG9zID0gMDtcbiAgICAgICAgdGhpcy5yZXVzZWQgPSBbXTtcbiAgICAgICAgdGhpcy5zdG9wcGVkQXQgPSBudWxsO1xuICAgICAgICB0aGlzLnN0cmVhbSA9IG5ldyBJbnB1dFN0cmVhbShpbnB1dCwgcmFuZ2VzKTtcbiAgICAgICAgdGhpcy50b2tlbnMgPSBuZXcgVG9rZW5DYWNoZShwYXJzZXIsIHRoaXMuc3RyZWFtKTtcbiAgICAgICAgdGhpcy50b3BUZXJtID0gcGFyc2VyLnRvcFsxXTtcbiAgICAgICAgbGV0IHsgZnJvbSB9ID0gcmFuZ2VzWzBdO1xuICAgICAgICB0aGlzLnN0YWNrcyA9IFtTdGFjay5zdGFydCh0aGlzLCBwYXJzZXIudG9wWzBdLCBmcm9tKV07XG4gICAgICAgIHRoaXMuZnJhZ21lbnRzID0gZnJhZ21lbnRzLmxlbmd0aCAmJiB0aGlzLnN0cmVhbS5lbmQgLSBmcm9tID4gcGFyc2VyLmJ1ZmZlckxlbmd0aCAqIDRcbiAgICAgICAgICAgID8gbmV3IEZyYWdtZW50Q3Vyc29yKGZyYWdtZW50cywgcGFyc2VyLm5vZGVTZXQpIDogbnVsbDtcbiAgICB9XG4gICAgZ2V0IHBhcnNlZFBvcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluU3RhY2tQb3M7XG4gICAgfVxuICAgIC8vIE1vdmUgdGhlIHBhcnNlciBmb3J3YXJkLiBUaGlzIHdpbGwgcHJvY2VzcyBhbGwgcGFyc2Ugc3RhY2tzIGF0XG4gICAgLy8gYHRoaXMucG9zYCBhbmQgdHJ5IHRvIGFkdmFuY2UgdGhlbSB0byBhIGZ1cnRoZXIgcG9zaXRpb24uIElmIG5vXG4gICAgLy8gc3RhY2sgZm9yIHN1Y2ggYSBwb3NpdGlvbiBpcyBmb3VuZCwgaXQnbGwgc3RhcnQgZXJyb3ItcmVjb3ZlcnkuXG4gICAgLy9cbiAgICAvLyBXaGVuIHRoZSBwYXJzZSBpcyBmaW5pc2hlZCwgdGhpcyB3aWxsIHJldHVybiBhIHN5bnRheCB0cmVlLiBXaGVuXG4gICAgLy8gbm90LCBpdCByZXR1cm5zIGBudWxsYC5cbiAgICBhZHZhbmNlKCkge1xuICAgICAgICBsZXQgc3RhY2tzID0gdGhpcy5zdGFja3MsIHBvcyA9IHRoaXMubWluU3RhY2tQb3M7XG4gICAgICAgIC8vIFRoaXMgd2lsbCBob2xkIHN0YWNrcyBiZXlvbmQgYHBvc2AuXG4gICAgICAgIGxldCBuZXdTdGFja3MgPSB0aGlzLnN0YWNrcyA9IFtdO1xuICAgICAgICBsZXQgc3RvcHBlZCwgc3RvcHBlZFRva2VucztcbiAgICAgICAgLy8gS2VlcCBhZHZhbmNpbmcgYW55IHN0YWNrcyBhdCBgcG9zYCB1bnRpbCB0aGV5IGVpdGhlciBtb3ZlXG4gICAgICAgIC8vIGZvcndhcmQgb3IgY2FuJ3QgYmUgYWR2YW5jZWQuIEdhdGhlciBzdGFja3MgdGhhdCBjYW4ndCBiZVxuICAgICAgICAvLyBhZHZhbmNlZCBmdXJ0aGVyIGluIGBzdG9wcGVkYC5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBzdGFjayA9IHN0YWNrc1tpXTtcbiAgICAgICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRva2Vucy5tYWluVG9rZW4gPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmIChzdGFjay5wb3MgPiBwb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3U3RhY2tzLnB1c2goc3RhY2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmFkdmFuY2VTdGFjayhzdGFjaywgbmV3U3RhY2tzLCBzdGFja3MpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9wcGVkID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9wcGVkVG9rZW5zID0gW107XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc3RvcHBlZC5wdXNoKHN0YWNrKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRvayA9IHRoaXMudG9rZW5zLmdldE1haW5Ub2tlbihzdGFjayk7XG4gICAgICAgICAgICAgICAgICAgIHN0b3BwZWRUb2tlbnMucHVzaCh0b2sudmFsdWUsIHRvay5lbmQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIW5ld1N0YWNrcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxldCBmaW5pc2hlZCA9IHN0b3BwZWQgJiYgZmluZEZpbmlzaGVkKHN0b3BwZWQpO1xuICAgICAgICAgICAgaWYgKGZpbmlzaGVkKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YWNrVG9UcmVlKGZpbmlzaGVkKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcnNlci5zdHJpY3QpIHtcbiAgICAgICAgICAgICAgICBpZiAodmVyYm9zZSAmJiBzdG9wcGVkKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlN0dWNrIHdpdGggdG9rZW4gXCIgKyAodGhpcy50b2tlbnMubWFpblRva2VuID8gdGhpcy5wYXJzZXIuZ2V0TmFtZSh0aGlzLnRva2Vucy5tYWluVG9rZW4udmFsdWUpIDogXCJub25lXCIpKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoXCJObyBwYXJzZSBhdCBcIiArIHBvcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMucmVjb3ZlcmluZylcbiAgICAgICAgICAgICAgICB0aGlzLnJlY292ZXJpbmcgPSA1IC8qIERpc3RhbmNlICovO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnJlY292ZXJpbmcgJiYgc3RvcHBlZCkge1xuICAgICAgICAgICAgbGV0IGZpbmlzaGVkID0gdGhpcy5zdG9wcGVkQXQgIT0gbnVsbCAmJiBzdG9wcGVkWzBdLnBvcyA+IHRoaXMuc3RvcHBlZEF0ID8gc3RvcHBlZFswXVxuICAgICAgICAgICAgICAgIDogdGhpcy5ydW5SZWNvdmVyeShzdG9wcGVkLCBzdG9wcGVkVG9rZW5zLCBuZXdTdGFja3MpO1xuICAgICAgICAgICAgaWYgKGZpbmlzaGVkKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YWNrVG9UcmVlKGZpbmlzaGVkLmZvcmNlQWxsKCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnJlY292ZXJpbmcpIHtcbiAgICAgICAgICAgIGxldCBtYXhSZW1haW5pbmcgPSB0aGlzLnJlY292ZXJpbmcgPT0gMSA/IDEgOiB0aGlzLnJlY292ZXJpbmcgKiAzIC8qIE1heFJlbWFpbmluZ1BlclN0ZXAgKi87XG4gICAgICAgICAgICBpZiAobmV3U3RhY2tzLmxlbmd0aCA+IG1heFJlbWFpbmluZykge1xuICAgICAgICAgICAgICAgIG5ld1N0YWNrcy5zb3J0KChhLCBiKSA9PiBiLnNjb3JlIC0gYS5zY29yZSk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG5ld1N0YWNrcy5sZW5ndGggPiBtYXhSZW1haW5pbmcpXG4gICAgICAgICAgICAgICAgICAgIG5ld1N0YWNrcy5wb3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuZXdTdGFja3Muc29tZShzID0+IHMucmVkdWNlUG9zID4gcG9zKSlcbiAgICAgICAgICAgICAgICB0aGlzLnJlY292ZXJpbmctLTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChuZXdTdGFja3MubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgLy8gUHJ1bmUgc3RhY2tzIHRoYXQgYXJlIGluIHRoZSBzYW1lIHN0YXRlLCBvciB0aGF0IGhhdmUgYmVlblxuICAgICAgICAgICAgLy8gcnVubmluZyB3aXRob3V0IHNwbGl0dGluZyBmb3IgYSB3aGlsZSwgdG8gYXZvaWQgZ2V0dGluZyBzdHVja1xuICAgICAgICAgICAgLy8gd2l0aCBtdWx0aXBsZSBzdWNjZXNzZnVsIHN0YWNrcyBydW5uaW5nIGVuZGxlc3NseSBvbi5cbiAgICAgICAgICAgIG91dGVyOiBmb3IgKGxldCBpID0gMDsgaSA8IG5ld1N0YWNrcy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgc3RhY2sgPSBuZXdTdGFja3NbaV07XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IGkgKyAxOyBqIDwgbmV3U3RhY2tzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBvdGhlciA9IG5ld1N0YWNrc1tqXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YWNrLnNhbWVTdGF0ZShvdGhlcikgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrLmJ1ZmZlci5sZW5ndGggPiA1MDAgLyogTWluQnVmZmVyTGVuZ3RoUHJ1bmUgKi8gJiYgb3RoZXIuYnVmZmVyLmxlbmd0aCA+IDUwMCAvKiBNaW5CdWZmZXJMZW5ndGhQcnVuZSAqLykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgoc3RhY2suc2NvcmUgLSBvdGhlci5zY29yZSkgfHwgKHN0YWNrLmJ1ZmZlci5sZW5ndGggLSBvdGhlci5idWZmZXIubGVuZ3RoKSkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U3RhY2tzLnNwbGljZShqLS0sIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U3RhY2tzLnNwbGljZShpLS0sIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlIG91dGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMubWluU3RhY2tQb3MgPSBuZXdTdGFja3NbMF0ucG9zO1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IG5ld1N0YWNrcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIGlmIChuZXdTdGFja3NbaV0ucG9zIDwgdGhpcy5taW5TdGFja1BvcylcbiAgICAgICAgICAgICAgICB0aGlzLm1pblN0YWNrUG9zID0gbmV3U3RhY2tzW2ldLnBvcztcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHN0b3BBdChwb3MpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RvcHBlZEF0ICE9IG51bGwgJiYgdGhpcy5zdG9wcGVkQXQgPCBwb3MpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkNhbid0IG1vdmUgc3RvcHBlZEF0IGZvcndhcmRcIik7XG4gICAgICAgIHRoaXMuc3RvcHBlZEF0ID0gcG9zO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGFuIHVwZGF0ZWQgdmVyc2lvbiBvZiB0aGUgZ2l2ZW4gc3RhY2ssIG9yIG51bGwgaWYgdGhlXG4gICAgLy8gc3RhY2sgY2FuJ3QgYWR2YW5jZSBub3JtYWxseS4gV2hlbiBgc3BsaXRgIGFuZCBgc3RhY2tzYCBhcmVcbiAgICAvLyBnaXZlbiwgc3RhY2tzIHNwbGl0IG9mZiBieSBhbWJpZ3VvdXMgb3BlcmF0aW9ucyB3aWxsIGJlIHB1c2hlZCB0b1xuICAgIC8vIGBzcGxpdGAsIG9yIGFkZGVkIHRvIGBzdGFja3NgIGlmIHRoZXkgbW92ZSBgcG9zYCBmb3J3YXJkLlxuICAgIGFkdmFuY2VTdGFjayhzdGFjaywgc3RhY2tzLCBzcGxpdCkge1xuICAgICAgICBsZXQgc3RhcnQgPSBzdGFjay5wb3MsIHsgcGFyc2VyIH0gPSB0aGlzO1xuICAgICAgICBsZXQgYmFzZSA9IHZlcmJvc2UgPyB0aGlzLnN0YWNrSUQoc3RhY2spICsgXCIgLT4gXCIgOiBcIlwiO1xuICAgICAgICBpZiAodGhpcy5zdG9wcGVkQXQgIT0gbnVsbCAmJiBzdGFydCA+IHRoaXMuc3RvcHBlZEF0KVxuICAgICAgICAgICAgcmV0dXJuIHN0YWNrLmZvcmNlUmVkdWNlKCkgPyBzdGFjayA6IG51bGw7XG4gICAgICAgIGlmICh0aGlzLmZyYWdtZW50cykge1xuICAgICAgICAgICAgbGV0IHN0cmljdEN4ID0gc3RhY2suY3VyQ29udGV4dCAmJiBzdGFjay5jdXJDb250ZXh0LnRyYWNrZXIuc3RyaWN0LCBjeEhhc2ggPSBzdHJpY3RDeCA/IHN0YWNrLmN1ckNvbnRleHQuaGFzaCA6IDA7XG4gICAgICAgICAgICBmb3IgKGxldCBjYWNoZWQgPSB0aGlzLmZyYWdtZW50cy5ub2RlQXQoc3RhcnQpOyBjYWNoZWQ7KSB7XG4gICAgICAgICAgICAgICAgbGV0IG1hdGNoID0gdGhpcy5wYXJzZXIubm9kZVNldC50eXBlc1tjYWNoZWQudHlwZS5pZF0gPT0gY2FjaGVkLnR5cGUgPyBwYXJzZXIuZ2V0R290byhzdGFjay5zdGF0ZSwgY2FjaGVkLnR5cGUuaWQpIDogLTE7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoID4gLTEgJiYgY2FjaGVkLmxlbmd0aCAmJiAoIXN0cmljdEN4IHx8IChjYWNoZWQucHJvcChOb2RlUHJvcC5jb250ZXh0SGFzaCkgfHwgMCkgPT0gY3hIYXNoKSkge1xuICAgICAgICAgICAgICAgICAgICBzdGFjay51c2VOb2RlKGNhY2hlZCwgbWF0Y2gpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmVyYm9zZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGJhc2UgKyB0aGlzLnN0YWNrSUQoc3RhY2spICsgYCAodmlhIHJldXNlIG9mICR7cGFyc2VyLmdldE5hbWUoY2FjaGVkLnR5cGUuaWQpfSlgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghKGNhY2hlZCBpbnN0YW5jZW9mIFRyZWUpIHx8IGNhY2hlZC5jaGlsZHJlbi5sZW5ndGggPT0gMCB8fCBjYWNoZWQucG9zaXRpb25zWzBdID4gMClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgbGV0IGlubmVyID0gY2FjaGVkLmNoaWxkcmVuWzBdO1xuICAgICAgICAgICAgICAgIGlmIChpbm5lciBpbnN0YW5jZW9mIFRyZWUgJiYgY2FjaGVkLnBvc2l0aW9uc1swXSA9PSAwKVxuICAgICAgICAgICAgICAgICAgICBjYWNoZWQgPSBpbm5lcjtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBkZWZhdWx0UmVkdWNlID0gcGFyc2VyLnN0YXRlU2xvdChzdGFjay5zdGF0ZSwgNCAvKiBEZWZhdWx0UmVkdWNlICovKTtcbiAgICAgICAgaWYgKGRlZmF1bHRSZWR1Y2UgPiAwKSB7XG4gICAgICAgICAgICBzdGFjay5yZWR1Y2UoZGVmYXVsdFJlZHVjZSk7XG4gICAgICAgICAgICBpZiAodmVyYm9zZSlcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhiYXNlICsgdGhpcy5zdGFja0lEKHN0YWNrKSArIGAgKHZpYSBhbHdheXMtcmVkdWNlICR7cGFyc2VyLmdldE5hbWUoZGVmYXVsdFJlZHVjZSAmIDY1NTM1IC8qIFZhbHVlTWFzayAqLyl9KWApO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YWNrLnN0YWNrLmxlbmd0aCA+PSAxNTAwMCAvKiBDdXREZXB0aCAqLykge1xuICAgICAgICAgICAgd2hpbGUgKHN0YWNrLnN0YWNrLmxlbmd0aCA+IDkwMDAgLyogQ3V0VG8gKi8gJiYgc3RhY2suZm9yY2VSZWR1Y2UoKSkgeyB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGFjdGlvbnMgPSB0aGlzLnRva2Vucy5nZXRBY3Rpb25zKHN0YWNrKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhY3Rpb25zLmxlbmd0aDspIHtcbiAgICAgICAgICAgIGxldCBhY3Rpb24gPSBhY3Rpb25zW2krK10sIHRlcm0gPSBhY3Rpb25zW2krK10sIGVuZCA9IGFjdGlvbnNbaSsrXTtcbiAgICAgICAgICAgIGxldCBsYXN0ID0gaSA9PSBhY3Rpb25zLmxlbmd0aCB8fCAhc3BsaXQ7XG4gICAgICAgICAgICBsZXQgbG9jYWxTdGFjayA9IGxhc3QgPyBzdGFjayA6IHN0YWNrLnNwbGl0KCk7XG4gICAgICAgICAgICBsb2NhbFN0YWNrLmFwcGx5KGFjdGlvbiwgdGVybSwgZW5kKTtcbiAgICAgICAgICAgIGlmICh2ZXJib3NlKVxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGJhc2UgKyB0aGlzLnN0YWNrSUQobG9jYWxTdGFjaykgKyBgICh2aWEgJHsoYWN0aW9uICYgNjU1MzYgLyogUmVkdWNlRmxhZyAqLykgPT0gMCA/IFwic2hpZnRcIlxuICAgICAgICAgICAgICAgICAgICA6IGByZWR1Y2Ugb2YgJHtwYXJzZXIuZ2V0TmFtZShhY3Rpb24gJiA2NTUzNSAvKiBWYWx1ZU1hc2sgKi8pfWB9IGZvciAke3BhcnNlci5nZXROYW1lKHRlcm0pfSBAICR7c3RhcnR9JHtsb2NhbFN0YWNrID09IHN0YWNrID8gXCJcIiA6IFwiLCBzcGxpdFwifSlgKTtcbiAgICAgICAgICAgIGlmIChsYXN0KVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgZWxzZSBpZiAobG9jYWxTdGFjay5wb3MgPiBzdGFydClcbiAgICAgICAgICAgICAgICBzdGFja3MucHVzaChsb2NhbFN0YWNrKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBzcGxpdC5wdXNoKGxvY2FsU3RhY2spO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gQWR2YW5jZSBhIGdpdmVuIHN0YWNrIGZvcndhcmQgYXMgZmFyIGFzIGl0IHdpbGwgZ28uIFJldHVybnMgdGhlXG4gICAgLy8gKHBvc3NpYmx5IHVwZGF0ZWQpIHN0YWNrIGlmIGl0IGdvdCBzdHVjaywgb3IgbnVsbCBpZiBpdCBtb3ZlZFxuICAgIC8vIGZvcndhcmQgYW5kIHdhcyBnaXZlbiB0byBgcHVzaFN0YWNrRGVkdXBgLlxuICAgIGFkdmFuY2VGdWxseShzdGFjaywgbmV3U3RhY2tzKSB7XG4gICAgICAgIGxldCBwb3MgPSBzdGFjay5wb3M7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5hZHZhbmNlU3RhY2soc3RhY2ssIG51bGwsIG51bGwpKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGlmIChzdGFjay5wb3MgPiBwb3MpIHtcbiAgICAgICAgICAgICAgICBwdXNoU3RhY2tEZWR1cChzdGFjaywgbmV3U3RhY2tzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBydW5SZWNvdmVyeShzdGFja3MsIHRva2VucywgbmV3U3RhY2tzKSB7XG4gICAgICAgIGxldCBmaW5pc2hlZCA9IG51bGwsIHJlc3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YWNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHN0YWNrID0gc3RhY2tzW2ldLCB0b2tlbiA9IHRva2Vuc1tpIDw8IDFdLCB0b2tlbkVuZCA9IHRva2Vuc1soaSA8PCAxKSArIDFdO1xuICAgICAgICAgICAgbGV0IGJhc2UgPSB2ZXJib3NlID8gdGhpcy5zdGFja0lEKHN0YWNrKSArIFwiIC0+IFwiIDogXCJcIjtcbiAgICAgICAgICAgIGlmIChzdGFjay5kZWFkRW5kKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3RhcnRlZClcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgcmVzdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzdGFjay5yZXN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgaWYgKHZlcmJvc2UpXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGJhc2UgKyB0aGlzLnN0YWNrSUQoc3RhY2spICsgXCIgKHJlc3RhcnRlZClcIik7XG4gICAgICAgICAgICAgICAgbGV0IGRvbmUgPSB0aGlzLmFkdmFuY2VGdWxseShzdGFjaywgbmV3U3RhY2tzKTtcbiAgICAgICAgICAgICAgICBpZiAoZG9uZSlcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgZm9yY2UgPSBzdGFjay5zcGxpdCgpLCBmb3JjZUJhc2UgPSBiYXNlO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGZvcmNlLmZvcmNlUmVkdWNlKCkgJiYgaiA8IDEwIC8qIEZvcmNlUmVkdWNlTGltaXQgKi87IGorKykge1xuICAgICAgICAgICAgICAgIGlmICh2ZXJib3NlKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhmb3JjZUJhc2UgKyB0aGlzLnN0YWNrSUQoZm9yY2UpICsgXCIgKHZpYSBmb3JjZS1yZWR1Y2UpXCIpO1xuICAgICAgICAgICAgICAgIGxldCBkb25lID0gdGhpcy5hZHZhbmNlRnVsbHkoZm9yY2UsIG5ld1N0YWNrcyk7XG4gICAgICAgICAgICAgICAgaWYgKGRvbmUpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGlmICh2ZXJib3NlKVxuICAgICAgICAgICAgICAgICAgICBmb3JjZUJhc2UgPSB0aGlzLnN0YWNrSUQoZm9yY2UpICsgXCIgLT4gXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCBpbnNlcnQgb2Ygc3RhY2sucmVjb3ZlckJ5SW5zZXJ0KHRva2VuKSkge1xuICAgICAgICAgICAgICAgIGlmICh2ZXJib3NlKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhiYXNlICsgdGhpcy5zdGFja0lEKGluc2VydCkgKyBcIiAodmlhIHJlY292ZXItaW5zZXJ0KVwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkdmFuY2VGdWxseShpbnNlcnQsIG5ld1N0YWNrcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5zdHJlYW0uZW5kID4gc3RhY2sucG9zKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRva2VuRW5kID09IHN0YWNrLnBvcykge1xuICAgICAgICAgICAgICAgICAgICB0b2tlbkVuZCsrO1xuICAgICAgICAgICAgICAgICAgICB0b2tlbiA9IDAgLyogRXJyICovO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdGFjay5yZWNvdmVyQnlEZWxldGUodG9rZW4sIHRva2VuRW5kKTtcbiAgICAgICAgICAgICAgICBpZiAodmVyYm9zZSlcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYmFzZSArIHRoaXMuc3RhY2tJRChzdGFjaykgKyBgICh2aWEgcmVjb3Zlci1kZWxldGUgJHt0aGlzLnBhcnNlci5nZXROYW1lKHRva2VuKX0pYCk7XG4gICAgICAgICAgICAgICAgcHVzaFN0YWNrRGVkdXAoc3RhY2ssIG5ld1N0YWNrcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghZmluaXNoZWQgfHwgZmluaXNoZWQuc2NvcmUgPCBzdGFjay5zY29yZSkge1xuICAgICAgICAgICAgICAgIGZpbmlzaGVkID0gc3RhY2s7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZpbmlzaGVkO1xuICAgIH1cbiAgICAvLyBDb252ZXJ0IHRoZSBzdGFjaydzIGJ1ZmZlciB0byBhIHN5bnRheCB0cmVlLlxuICAgIHN0YWNrVG9UcmVlKHN0YWNrKSB7XG4gICAgICAgIHN0YWNrLmNsb3NlKCk7XG4gICAgICAgIHJldHVybiBUcmVlLmJ1aWxkKHsgYnVmZmVyOiBTdGFja0J1ZmZlckN1cnNvci5jcmVhdGUoc3RhY2spLFxuICAgICAgICAgICAgbm9kZVNldDogdGhpcy5wYXJzZXIubm9kZVNldCxcbiAgICAgICAgICAgIHRvcElEOiB0aGlzLnRvcFRlcm0sXG4gICAgICAgICAgICBtYXhCdWZmZXJMZW5ndGg6IHRoaXMucGFyc2VyLmJ1ZmZlckxlbmd0aCxcbiAgICAgICAgICAgIHJldXNlZDogdGhpcy5yZXVzZWQsXG4gICAgICAgICAgICBzdGFydDogdGhpcy5yYW5nZXNbMF0uZnJvbSxcbiAgICAgICAgICAgIGxlbmd0aDogc3RhY2sucG9zIC0gdGhpcy5yYW5nZXNbMF0uZnJvbSxcbiAgICAgICAgICAgIG1pblJlcGVhdFR5cGU6IHRoaXMucGFyc2VyLm1pblJlcGVhdFRlcm0gfSk7XG4gICAgfVxuICAgIHN0YWNrSUQoc3RhY2spIHtcbiAgICAgICAgbGV0IGlkID0gKHN0YWNrSURzIHx8IChzdGFja0lEcyA9IG5ldyBXZWFrTWFwKSkuZ2V0KHN0YWNrKTtcbiAgICAgICAgaWYgKCFpZClcbiAgICAgICAgICAgIHN0YWNrSURzLnNldChzdGFjaywgaWQgPSBTdHJpbmcuZnJvbUNvZGVQb2ludCh0aGlzLm5leHRTdGFja0lEKyspKTtcbiAgICAgICAgcmV0dXJuIGlkICsgc3RhY2s7XG4gICAgfVxufVxuZnVuY3Rpb24gcHVzaFN0YWNrRGVkdXAoc3RhY2ssIG5ld1N0YWNrcykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV3U3RhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBvdGhlciA9IG5ld1N0YWNrc1tpXTtcbiAgICAgICAgaWYgKG90aGVyLnBvcyA9PSBzdGFjay5wb3MgJiYgb3RoZXIuc2FtZVN0YXRlKHN0YWNrKSkge1xuICAgICAgICAgICAgaWYgKG5ld1N0YWNrc1tpXS5zY29yZSA8IHN0YWNrLnNjb3JlKVxuICAgICAgICAgICAgICAgIG5ld1N0YWNrc1tpXSA9IHN0YWNrO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5ld1N0YWNrcy5wdXNoKHN0YWNrKTtcbn1cbmNsYXNzIERpYWxlY3Qge1xuICAgIGNvbnN0cnVjdG9yKHNvdXJjZSwgZmxhZ3MsIGRpc2FibGVkKSB7XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgICB0aGlzLmZsYWdzID0gZmxhZ3M7XG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBkaXNhYmxlZDtcbiAgICB9XG4gICAgYWxsb3dzKHRlcm0pIHsgcmV0dXJuICF0aGlzLmRpc2FibGVkIHx8IHRoaXMuZGlzYWJsZWRbdGVybV0gPT0gMDsgfVxufVxuY29uc3QgaWQgPSB4ID0+IHg7XG4vLy8gQ29udGV4dCB0cmFja2VycyBhcmUgdXNlZCB0byB0cmFjayBzdGF0ZWZ1bCBjb250ZXh0IChzdWNoIGFzXG4vLy8gaW5kZW50YXRpb24gaW4gdGhlIFB5dGhvbiBncmFtbWFyLCBvciBwYXJlbnQgZWxlbWVudHMgaW4gdGhlIFhNTFxuLy8vIGdyYW1tYXIpIG5lZWRlZCBieSBleHRlcm5hbCB0b2tlbml6ZXJzLiBZb3UgZGVjbGFyZSB0aGVtIGluIGFcbi8vLyBncmFtbWFyIGZpbGUgYXMgYEBjb250ZXh0IGV4cG9ydE5hbWUgZnJvbSBcIm1vZHVsZVwiYC5cbi8vL1xuLy8vIENvbnRleHQgdmFsdWVzIHNob3VsZCBiZSBpbW11dGFibGUsIGFuZCBjYW4gYmUgdXBkYXRlZCAocmVwbGFjZWQpXG4vLy8gb24gc2hpZnQgb3IgcmVkdWNlIGFjdGlvbnMuXG4vLy9cbi8vLyBUaGUgZXhwb3J0IHVzZWQgaW4gYSBgQGNvbnRleHRgIGRlY2xhcmF0aW9uIHNob3VsZCBiZSBvZiB0aGlzXG4vLy8gdHlwZS5cbmNsYXNzIENvbnRleHRUcmFja2VyIHtcbiAgICAvLy8gRGVmaW5lIGEgY29udGV4dCB0cmFja2VyLlxuICAgIGNvbnN0cnVjdG9yKHNwZWMpIHtcbiAgICAgICAgdGhpcy5zdGFydCA9IHNwZWMuc3RhcnQ7XG4gICAgICAgIHRoaXMuc2hpZnQgPSBzcGVjLnNoaWZ0IHx8IGlkO1xuICAgICAgICB0aGlzLnJlZHVjZSA9IHNwZWMucmVkdWNlIHx8IGlkO1xuICAgICAgICB0aGlzLnJldXNlID0gc3BlYy5yZXVzZSB8fCBpZDtcbiAgICAgICAgdGhpcy5oYXNoID0gc3BlYy5oYXNoIHx8ICgoKSA9PiAwKTtcbiAgICAgICAgdGhpcy5zdHJpY3QgPSBzcGVjLnN0cmljdCAhPT0gZmFsc2U7XG4gICAgfVxufVxuLy8vIEhvbGRzIHRoZSBwYXJzZSB0YWJsZXMgZm9yIGEgZ2l2ZW4gZ3JhbW1hciwgYXMgZ2VuZXJhdGVkIGJ5XG4vLy8gYGxlemVyLWdlbmVyYXRvcmAsIGFuZCBwcm92aWRlcyBbbWV0aG9kc10oI2NvbW1vbi5QYXJzZXIpIHRvIHBhcnNlXG4vLy8gY29udGVudCB3aXRoLlxuY2xhc3MgTFJQYXJzZXIgZXh0ZW5kcyBQYXJzZXIge1xuICAgIC8vLyBAaW50ZXJuYWxcbiAgICBjb25zdHJ1Y3RvcihzcGVjKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIC8vLyBAaW50ZXJuYWxcbiAgICAgICAgdGhpcy53cmFwcGVycyA9IFtdO1xuICAgICAgICBpZiAoc3BlYy52ZXJzaW9uICE9IDE0IC8qIFZlcnNpb24gKi8pXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihgUGFyc2VyIHZlcnNpb24gKCR7c3BlYy52ZXJzaW9ufSkgZG9lc24ndCBtYXRjaCBydW50aW1lIHZlcnNpb24gKCR7MTQgLyogVmVyc2lvbiAqL30pYCk7XG4gICAgICAgIGxldCBub2RlTmFtZXMgPSBzcGVjLm5vZGVOYW1lcy5zcGxpdChcIiBcIik7XG4gICAgICAgIHRoaXMubWluUmVwZWF0VGVybSA9IG5vZGVOYW1lcy5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3BlYy5yZXBlYXROb2RlQ291bnQ7IGkrKylcbiAgICAgICAgICAgIG5vZGVOYW1lcy5wdXNoKFwiXCIpO1xuICAgICAgICBsZXQgdG9wVGVybXMgPSBPYmplY3Qua2V5cyhzcGVjLnRvcFJ1bGVzKS5tYXAociA9PiBzcGVjLnRvcFJ1bGVzW3JdWzFdKTtcbiAgICAgICAgbGV0IG5vZGVQcm9wcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVOYW1lcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIG5vZGVQcm9wcy5wdXNoKFtdKTtcbiAgICAgICAgZnVuY3Rpb24gc2V0UHJvcChub2RlSUQsIHByb3AsIHZhbHVlKSB7XG4gICAgICAgICAgICBub2RlUHJvcHNbbm9kZUlEXS5wdXNoKFtwcm9wLCBwcm9wLmRlc2VyaWFsaXplKFN0cmluZyh2YWx1ZSkpXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNwZWMubm9kZVByb3BzKVxuICAgICAgICAgICAgZm9yIChsZXQgcHJvcFNwZWMgb2Ygc3BlYy5ub2RlUHJvcHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgcHJvcCA9IHByb3BTcGVjWzBdO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcHJvcCA9PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgICAgICAgICBwcm9wID0gTm9kZVByb3BbcHJvcF07XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBwcm9wU3BlYy5sZW5ndGg7KSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gcHJvcFNwZWNbaSsrXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UHJvcChuZXh0LCBwcm9wLCBwcm9wU3BlY1tpKytdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IHByb3BTcGVjW2kgKyAtbmV4dF07XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gLW5leHQ7IGogPiAwOyBqLS0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0UHJvcChwcm9wU3BlY1tpKytdLCBwcm9wLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIHRoaXMubm9kZVNldCA9IG5ldyBOb2RlU2V0KG5vZGVOYW1lcy5tYXAoKG5hbWUsIGkpID0+IE5vZGVUeXBlLmRlZmluZSh7XG4gICAgICAgICAgICBuYW1lOiBpID49IHRoaXMubWluUmVwZWF0VGVybSA/IHVuZGVmaW5lZCA6IG5hbWUsXG4gICAgICAgICAgICBpZDogaSxcbiAgICAgICAgICAgIHByb3BzOiBub2RlUHJvcHNbaV0sXG4gICAgICAgICAgICB0b3A6IHRvcFRlcm1zLmluZGV4T2YoaSkgPiAtMSxcbiAgICAgICAgICAgIGVycm9yOiBpID09IDAsXG4gICAgICAgICAgICBza2lwcGVkOiBzcGVjLnNraXBwZWROb2RlcyAmJiBzcGVjLnNraXBwZWROb2Rlcy5pbmRleE9mKGkpID4gLTFcbiAgICAgICAgfSkpKTtcbiAgICAgICAgaWYgKHNwZWMucHJvcFNvdXJjZXMpXG4gICAgICAgICAgICB0aGlzLm5vZGVTZXQgPSB0aGlzLm5vZGVTZXQuZXh0ZW5kKC4uLnNwZWMucHJvcFNvdXJjZXMpO1xuICAgICAgICB0aGlzLnN0cmljdCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmJ1ZmZlckxlbmd0aCA9IERlZmF1bHRCdWZmZXJMZW5ndGg7XG4gICAgICAgIGxldCB0b2tlbkFycmF5ID0gZGVjb2RlQXJyYXkoc3BlYy50b2tlbkRhdGEpO1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBzcGVjLmNvbnRleHQ7XG4gICAgICAgIHRoaXMuc3BlY2lhbGl6ZXJTcGVjcyA9IHNwZWMuc3BlY2lhbGl6ZWQgfHwgW107XG4gICAgICAgIHRoaXMuc3BlY2lhbGl6ZWQgPSBuZXcgVWludDE2QXJyYXkodGhpcy5zcGVjaWFsaXplclNwZWNzLmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zcGVjaWFsaXplclNwZWNzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgdGhpcy5zcGVjaWFsaXplZFtpXSA9IHRoaXMuc3BlY2lhbGl6ZXJTcGVjc1tpXS50ZXJtO1xuICAgICAgICB0aGlzLnNwZWNpYWxpemVycyA9IHRoaXMuc3BlY2lhbGl6ZXJTcGVjcy5tYXAoZ2V0U3BlY2lhbGl6ZXIpO1xuICAgICAgICB0aGlzLnN0YXRlcyA9IGRlY29kZUFycmF5KHNwZWMuc3RhdGVzLCBVaW50MzJBcnJheSk7XG4gICAgICAgIHRoaXMuZGF0YSA9IGRlY29kZUFycmF5KHNwZWMuc3RhdGVEYXRhKTtcbiAgICAgICAgdGhpcy5nb3RvID0gZGVjb2RlQXJyYXkoc3BlYy5nb3RvKTtcbiAgICAgICAgdGhpcy5tYXhUZXJtID0gc3BlYy5tYXhUZXJtO1xuICAgICAgICB0aGlzLnRva2VuaXplcnMgPSBzcGVjLnRva2VuaXplcnMubWFwKHZhbHVlID0+IHR5cGVvZiB2YWx1ZSA9PSBcIm51bWJlclwiID8gbmV3IFRva2VuR3JvdXAodG9rZW5BcnJheSwgdmFsdWUpIDogdmFsdWUpO1xuICAgICAgICB0aGlzLnRvcFJ1bGVzID0gc3BlYy50b3BSdWxlcztcbiAgICAgICAgdGhpcy5kaWFsZWN0cyA9IHNwZWMuZGlhbGVjdHMgfHwge307XG4gICAgICAgIHRoaXMuZHluYW1pY1ByZWNlZGVuY2VzID0gc3BlYy5keW5hbWljUHJlY2VkZW5jZXMgfHwgbnVsbDtcbiAgICAgICAgdGhpcy50b2tlblByZWNUYWJsZSA9IHNwZWMudG9rZW5QcmVjO1xuICAgICAgICB0aGlzLnRlcm1OYW1lcyA9IHNwZWMudGVybU5hbWVzIHx8IG51bGw7XG4gICAgICAgIHRoaXMubWF4Tm9kZSA9IHRoaXMubm9kZVNldC50eXBlcy5sZW5ndGggLSAxO1xuICAgICAgICB0aGlzLmRpYWxlY3QgPSB0aGlzLnBhcnNlRGlhbGVjdCgpO1xuICAgICAgICB0aGlzLnRvcCA9IHRoaXMudG9wUnVsZXNbT2JqZWN0LmtleXModGhpcy50b3BSdWxlcylbMF1dO1xuICAgIH1cbiAgICBjcmVhdGVQYXJzZShpbnB1dCwgZnJhZ21lbnRzLCByYW5nZXMpIHtcbiAgICAgICAgbGV0IHBhcnNlID0gbmV3IFBhcnNlKHRoaXMsIGlucHV0LCBmcmFnbWVudHMsIHJhbmdlcyk7XG4gICAgICAgIGZvciAobGV0IHcgb2YgdGhpcy53cmFwcGVycylcbiAgICAgICAgICAgIHBhcnNlID0gdyhwYXJzZSwgaW5wdXQsIGZyYWdtZW50cywgcmFuZ2VzKTtcbiAgICAgICAgcmV0dXJuIHBhcnNlO1xuICAgIH1cbiAgICAvLy8gR2V0IGEgZ290byB0YWJsZSBlbnRyeSBAaW50ZXJuYWxcbiAgICBnZXRHb3RvKHN0YXRlLCB0ZXJtLCBsb29zZSA9IGZhbHNlKSB7XG4gICAgICAgIGxldCB0YWJsZSA9IHRoaXMuZ290bztcbiAgICAgICAgaWYgKHRlcm0gPj0gdGFibGVbMF0pXG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIGZvciAobGV0IHBvcyA9IHRhYmxlW3Rlcm0gKyAxXTs7KSB7XG4gICAgICAgICAgICBsZXQgZ3JvdXBUYWcgPSB0YWJsZVtwb3MrK10sIGxhc3QgPSBncm91cFRhZyAmIDE7XG4gICAgICAgICAgICBsZXQgdGFyZ2V0ID0gdGFibGVbcG9zKytdO1xuICAgICAgICAgICAgaWYgKGxhc3QgJiYgbG9vc2UpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICAgICAgICAgIGZvciAobGV0IGVuZCA9IHBvcyArIChncm91cFRhZyA+PiAxKTsgcG9zIDwgZW5kOyBwb3MrKylcbiAgICAgICAgICAgICAgICBpZiAodGFibGVbcG9zXSA9PSBzdGF0ZSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICAgICAgICAgIGlmIChsYXN0KVxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLy8gQ2hlY2sgaWYgdGhpcyBzdGF0ZSBoYXMgYW4gYWN0aW9uIGZvciBhIGdpdmVuIHRlcm1pbmFsIEBpbnRlcm5hbFxuICAgIGhhc0FjdGlvbihzdGF0ZSwgdGVybWluYWwpIHtcbiAgICAgICAgbGV0IGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgICAgIGZvciAobGV0IHNldCA9IDA7IHNldCA8IDI7IHNldCsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5zdGF0ZVNsb3Qoc3RhdGUsIHNldCA/IDIgLyogU2tpcCAqLyA6IDEgLyogQWN0aW9ucyAqLyksIG5leHQ7OyBpICs9IDMpIHtcbiAgICAgICAgICAgICAgICBpZiAoKG5leHQgPSBkYXRhW2ldKSA9PSA2NTUzNSAvKiBFbmQgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFbaSArIDFdID09IDEgLyogTmV4dCAqLylcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQgPSBkYXRhW2kgPSBwYWlyKGRhdGEsIGkgKyAyKV07XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGFbaSArIDFdID09IDIgLyogT3RoZXIgKi8pXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFpcihkYXRhLCBpICsgMik7XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobmV4dCA9PSB0ZXJtaW5hbCB8fCBuZXh0ID09IDAgLyogRXJyICovKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFpcihkYXRhLCBpICsgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIC8vLyBAaW50ZXJuYWxcbiAgICBzdGF0ZVNsb3Qoc3RhdGUsIHNsb3QpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGVzWyhzdGF0ZSAqIDYgLyogU2l6ZSAqLykgKyBzbG90XTtcbiAgICB9XG4gICAgLy8vIEBpbnRlcm5hbFxuICAgIHN0YXRlRmxhZyhzdGF0ZSwgZmxhZykge1xuICAgICAgICByZXR1cm4gKHRoaXMuc3RhdGVTbG90KHN0YXRlLCAwIC8qIEZsYWdzICovKSAmIGZsYWcpID4gMDtcbiAgICB9XG4gICAgLy8vIEBpbnRlcm5hbFxuICAgIHZhbGlkQWN0aW9uKHN0YXRlLCBhY3Rpb24pIHtcbiAgICAgICAgaWYgKGFjdGlvbiA9PSB0aGlzLnN0YXRlU2xvdChzdGF0ZSwgNCAvKiBEZWZhdWx0UmVkdWNlICovKSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5zdGF0ZVNsb3Qoc3RhdGUsIDEgLyogQWN0aW9ucyAqLyk7OyBpICs9IDMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGFbaV0gPT0gNjU1MzUgLyogRW5kICovKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVtpICsgMV0gPT0gMSAvKiBOZXh0ICovKVxuICAgICAgICAgICAgICAgICAgICBpID0gcGFpcih0aGlzLmRhdGEsIGkgKyAyKTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhY3Rpb24gPT0gcGFpcih0aGlzLmRhdGEsIGkgKyAxKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLy8gR2V0IHRoZSBzdGF0ZXMgdGhhdCBjYW4gZm9sbG93IHRoaXMgb25lIHRocm91Z2ggc2hpZnQgYWN0aW9ucyBvclxuICAgIC8vLyBnb3RvIGp1bXBzLiBAaW50ZXJuYWxcbiAgICBuZXh0U3RhdGVzKHN0YXRlKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuc3RhdGVTbG90KHN0YXRlLCAxIC8qIEFjdGlvbnMgKi8pOzsgaSArPSAzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhW2ldID09IDY1NTM1IC8qIEVuZCAqLykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGFbaSArIDFdID09IDEgLyogTmV4dCAqLylcbiAgICAgICAgICAgICAgICAgICAgaSA9IHBhaXIodGhpcy5kYXRhLCBpICsgMik7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgodGhpcy5kYXRhW2kgKyAyXSAmICg2NTUzNiAvKiBSZWR1Y2VGbGFnICovID4+IDE2KSkgPT0gMCkge1xuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IHRoaXMuZGF0YVtpICsgMV07XG4gICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQuc29tZSgodiwgaSkgPT4gKGkgJiAxKSAmJiB2ID09IHZhbHVlKSlcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2godGhpcy5kYXRhW2ldLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLy8vIEBpbnRlcm5hbFxuICAgIG92ZXJyaWRlcyh0b2tlbiwgcHJldikge1xuICAgICAgICBsZXQgaVByZXYgPSBmaW5kT2Zmc2V0KHRoaXMuZGF0YSwgdGhpcy50b2tlblByZWNUYWJsZSwgcHJldik7XG4gICAgICAgIHJldHVybiBpUHJldiA8IDAgfHwgZmluZE9mZnNldCh0aGlzLmRhdGEsIHRoaXMudG9rZW5QcmVjVGFibGUsIHRva2VuKSA8IGlQcmV2O1xuICAgIH1cbiAgICAvLy8gQ29uZmlndXJlIHRoZSBwYXJzZXIuIFJldHVybnMgYSBuZXcgcGFyc2VyIGluc3RhbmNlIHRoYXQgaGFzIHRoZVxuICAgIC8vLyBnaXZlbiBzZXR0aW5ncyBtb2RpZmllZC4gU2V0dGluZ3Mgbm90IHByb3ZpZGVkIGluIGBjb25maWdgIGFyZVxuICAgIC8vLyBrZXB0IGZyb20gdGhlIG9yaWdpbmFsIHBhcnNlci5cbiAgICBjb25maWd1cmUoY29uZmlnKSB7XG4gICAgICAgIC8vIEhpZGVvdXMgcmVmbGVjdGlvbi1iYXNlZCBrbHVkZ2UgdG8gbWFrZSBpdCBlYXN5IHRvIGNyZWF0ZSBhXG4gICAgICAgIC8vIHNsaWdodGx5IG1vZGlmaWVkIGNvcHkgb2YgYSBwYXJzZXIuXG4gICAgICAgIGxldCBjb3B5ID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKExSUGFyc2VyLnByb3RvdHlwZSksIHRoaXMpO1xuICAgICAgICBpZiAoY29uZmlnLnByb3BzKVxuICAgICAgICAgICAgY29weS5ub2RlU2V0ID0gdGhpcy5ub2RlU2V0LmV4dGVuZCguLi5jb25maWcucHJvcHMpO1xuICAgICAgICBpZiAoY29uZmlnLnRvcCkge1xuICAgICAgICAgICAgbGV0IGluZm8gPSB0aGlzLnRvcFJ1bGVzW2NvbmZpZy50b3BdO1xuICAgICAgICAgICAgaWYgKCFpbmZvKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBJbnZhbGlkIHRvcCBydWxlIG5hbWUgJHtjb25maWcudG9wfWApO1xuICAgICAgICAgICAgY29weS50b3AgPSBpbmZvO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb25maWcudG9rZW5pemVycylcbiAgICAgICAgICAgIGNvcHkudG9rZW5pemVycyA9IHRoaXMudG9rZW5pemVycy5tYXAodCA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGZvdW5kID0gY29uZmlnLnRva2VuaXplcnMuZmluZChyID0+IHIuZnJvbSA9PSB0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm91bmQgPyBmb3VuZC50byA6IHQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgaWYgKGNvbmZpZy5zcGVjaWFsaXplcnMpIHtcbiAgICAgICAgICAgIGNvcHkuc3BlY2lhbGl6ZXJzID0gdGhpcy5zcGVjaWFsaXplcnMuc2xpY2UoKTtcbiAgICAgICAgICAgIGNvcHkuc3BlY2lhbGl6ZXJTcGVjcyA9IHRoaXMuc3BlY2lhbGl6ZXJTcGVjcy5tYXAoKHMsIGkpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgZm91bmQgPSBjb25maWcuc3BlY2lhbGl6ZXJzLmZpbmQociA9PiByLmZyb20gPT0gcy5leHRlcm5hbCk7XG4gICAgICAgICAgICAgICAgaWYgKCFmb3VuZClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHM7XG4gICAgICAgICAgICAgICAgbGV0IHNwZWMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHMpLCB7IGV4dGVybmFsOiBmb3VuZC50byB9KTtcbiAgICAgICAgICAgICAgICBjb3B5LnNwZWNpYWxpemVyc1tpXSA9IGdldFNwZWNpYWxpemVyKHNwZWMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBzcGVjO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbmZpZy5jb250ZXh0VHJhY2tlcilcbiAgICAgICAgICAgIGNvcHkuY29udGV4dCA9IGNvbmZpZy5jb250ZXh0VHJhY2tlcjtcbiAgICAgICAgaWYgKGNvbmZpZy5kaWFsZWN0KVxuICAgICAgICAgICAgY29weS5kaWFsZWN0ID0gdGhpcy5wYXJzZURpYWxlY3QoY29uZmlnLmRpYWxlY3QpO1xuICAgICAgICBpZiAoY29uZmlnLnN0cmljdCAhPSBudWxsKVxuICAgICAgICAgICAgY29weS5zdHJpY3QgPSBjb25maWcuc3RyaWN0O1xuICAgICAgICBpZiAoY29uZmlnLndyYXApXG4gICAgICAgICAgICBjb3B5LndyYXBwZXJzID0gY29weS53cmFwcGVycy5jb25jYXQoY29uZmlnLndyYXApO1xuICAgICAgICBpZiAoY29uZmlnLmJ1ZmZlckxlbmd0aCAhPSBudWxsKVxuICAgICAgICAgICAgY29weS5idWZmZXJMZW5ndGggPSBjb25maWcuYnVmZmVyTGVuZ3RoO1xuICAgICAgICByZXR1cm4gY29weTtcbiAgICB9XG4gICAgLy8vIFRlbGxzIHlvdSB3aGV0aGVyIGFueSBbcGFyc2Ugd3JhcHBlcnNdKCNsci5QYXJzZXJDb25maWcud3JhcClcbiAgICAvLy8gYXJlIHJlZ2lzdGVyZWQgZm9yIHRoaXMgcGFyc2VyLlxuICAgIGhhc1dyYXBwZXJzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVycy5sZW5ndGggPiAwO1xuICAgIH1cbiAgICAvLy8gUmV0dXJucyB0aGUgbmFtZSBhc3NvY2lhdGVkIHdpdGggYSBnaXZlbiB0ZXJtLiBUaGlzIHdpbGwgb25seVxuICAgIC8vLyB3b3JrIGZvciBhbGwgdGVybXMgd2hlbiB0aGUgcGFyc2VyIHdhcyBnZW5lcmF0ZWQgd2l0aCB0aGVcbiAgICAvLy8gYC0tbmFtZXNgIG9wdGlvbi4gQnkgZGVmYXVsdCwgb25seSB0aGUgbmFtZXMgb2YgdGFnZ2VkIHRlcm1zIGFyZVxuICAgIC8vLyBzdG9yZWQuXG4gICAgZ2V0TmFtZSh0ZXJtKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRlcm1OYW1lcyA/IHRoaXMudGVybU5hbWVzW3Rlcm1dIDogU3RyaW5nKHRlcm0gPD0gdGhpcy5tYXhOb2RlICYmIHRoaXMubm9kZVNldC50eXBlc1t0ZXJtXS5uYW1lIHx8IHRlcm0pO1xuICAgIH1cbiAgICAvLy8gVGhlIGVvZiB0ZXJtIGlkIGlzIGFsd2F5cyBhbGxvY2F0ZWQgZGlyZWN0bHkgYWZ0ZXIgdGhlIG5vZGVcbiAgICAvLy8gdHlwZXMuIEBpbnRlcm5hbFxuICAgIGdldCBlb2ZUZXJtKCkgeyByZXR1cm4gdGhpcy5tYXhOb2RlICsgMTsgfVxuICAgIC8vLyBUaGUgdHlwZSBvZiB0b3Agbm9kZSBwcm9kdWNlZCBieSB0aGUgcGFyc2VyLlxuICAgIGdldCB0b3BOb2RlKCkgeyByZXR1cm4gdGhpcy5ub2RlU2V0LnR5cGVzW3RoaXMudG9wWzFdXTsgfVxuICAgIC8vLyBAaW50ZXJuYWxcbiAgICBkeW5hbWljUHJlY2VkZW5jZSh0ZXJtKSB7XG4gICAgICAgIGxldCBwcmVjID0gdGhpcy5keW5hbWljUHJlY2VkZW5jZXM7XG4gICAgICAgIHJldHVybiBwcmVjID09IG51bGwgPyAwIDogcHJlY1t0ZXJtXSB8fCAwO1xuICAgIH1cbiAgICAvLy8gQGludGVybmFsXG4gICAgcGFyc2VEaWFsZWN0KGRpYWxlY3QpIHtcbiAgICAgICAgbGV0IHZhbHVlcyA9IE9iamVjdC5rZXlzKHRoaXMuZGlhbGVjdHMpLCBmbGFncyA9IHZhbHVlcy5tYXAoKCkgPT4gZmFsc2UpO1xuICAgICAgICBpZiAoZGlhbGVjdClcbiAgICAgICAgICAgIGZvciAobGV0IHBhcnQgb2YgZGlhbGVjdC5zcGxpdChcIiBcIikpIHtcbiAgICAgICAgICAgICAgICBsZXQgaWQgPSB2YWx1ZXMuaW5kZXhPZihwYXJ0KTtcbiAgICAgICAgICAgICAgICBpZiAoaWQgPj0gMClcbiAgICAgICAgICAgICAgICAgICAgZmxhZ3NbaWRdID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgbGV0IGRpc2FibGVkID0gbnVsbDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBpZiAoIWZsYWdzW2ldKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IHRoaXMuZGlhbGVjdHNbdmFsdWVzW2ldXSwgaWQ7IChpZCA9IHRoaXMuZGF0YVtqKytdKSAhPSA2NTUzNSAvKiBFbmQgKi87KVxuICAgICAgICAgICAgICAgICAgICAoZGlzYWJsZWQgfHwgKGRpc2FibGVkID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5tYXhUZXJtICsgMSkpKVtpZF0gPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IERpYWxlY3QoZGlhbGVjdCwgZmxhZ3MsIGRpc2FibGVkKTtcbiAgICB9XG4gICAgLy8vIFVzZWQgYnkgdGhlIG91dHB1dCBvZiB0aGUgcGFyc2VyIGdlbmVyYXRvci4gTm90IGF2YWlsYWJsZSB0b1xuICAgIC8vLyB1c2VyIGNvZGUuXG4gICAgc3RhdGljIGRlc2VyaWFsaXplKHNwZWMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMUlBhcnNlcihzcGVjKTtcbiAgICB9XG59XG5mdW5jdGlvbiBwYWlyKGRhdGEsIG9mZikgeyByZXR1cm4gZGF0YVtvZmZdIHwgKGRhdGFbb2ZmICsgMV0gPDwgMTYpOyB9XG5mdW5jdGlvbiBmaW5kT2Zmc2V0KGRhdGEsIHN0YXJ0LCB0ZXJtKSB7XG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0LCBuZXh0OyAobmV4dCA9IGRhdGFbaV0pICE9IDY1NTM1IC8qIEVuZCAqLzsgaSsrKVxuICAgICAgICBpZiAobmV4dCA9PSB0ZXJtKVxuICAgICAgICAgICAgcmV0dXJuIGkgLSBzdGFydDtcbiAgICByZXR1cm4gLTE7XG59XG5mdW5jdGlvbiBmaW5kRmluaXNoZWQoc3RhY2tzKSB7XG4gICAgbGV0IGJlc3QgPSBudWxsO1xuICAgIGZvciAobGV0IHN0YWNrIG9mIHN0YWNrcykge1xuICAgICAgICBsZXQgc3RvcHBlZCA9IHN0YWNrLnAuc3RvcHBlZEF0O1xuICAgICAgICBpZiAoKHN0YWNrLnBvcyA9PSBzdGFjay5wLnN0cmVhbS5lbmQgfHwgc3RvcHBlZCAhPSBudWxsICYmIHN0YWNrLnBvcyA+IHN0b3BwZWQpICYmXG4gICAgICAgICAgICBzdGFjay5wLnBhcnNlci5zdGF0ZUZsYWcoc3RhY2suc3RhdGUsIDIgLyogQWNjZXB0aW5nICovKSAmJlxuICAgICAgICAgICAgKCFiZXN0IHx8IGJlc3Quc2NvcmUgPCBzdGFjay5zY29yZSkpXG4gICAgICAgICAgICBiZXN0ID0gc3RhY2s7XG4gICAgfVxuICAgIHJldHVybiBiZXN0O1xufVxuZnVuY3Rpb24gZ2V0U3BlY2lhbGl6ZXIoc3BlYykge1xuICAgIGlmIChzcGVjLmV4dGVybmFsKSB7XG4gICAgICAgIGxldCBtYXNrID0gc3BlYy5leHRlbmQgPyAxIC8qIEV4dGVuZCAqLyA6IDAgLyogU3BlY2lhbGl6ZSAqLztcbiAgICAgICAgcmV0dXJuICh2YWx1ZSwgc3RhY2spID0+IChzcGVjLmV4dGVybmFsKHZhbHVlLCBzdGFjaykgPDwgMSkgfCBtYXNrO1xuICAgIH1cbiAgICByZXR1cm4gc3BlYy5nZXQ7XG59XG5cbmV4cG9ydCB7IENvbnRleHRUcmFja2VyLCBFeHRlcm5hbFRva2VuaXplciwgSW5wdXRTdHJlYW0sIExSUGFyc2VyLCBTdGFjayB9O1xuIiwgImltcG9ydCB7IExSUGFyc2VyIH0gZnJvbSAnQGxlemVyL2xyJztcbmltcG9ydCB7IHN0eWxlVGFncywgdGFncyB9IGZyb20gJ0BsZXplci9oaWdobGlnaHQnO1xuXG5jb25zdCBqc29uSGlnaGxpZ2h0aW5nID0gc3R5bGVUYWdzKHtcbiAgU3RyaW5nOiB0YWdzLnN0cmluZyxcbiAgTnVtYmVyOiB0YWdzLm51bWJlcixcbiAgXCJUcnVlIEZhbHNlXCI6IHRhZ3MuYm9vbCxcbiAgUHJvcGVydHlOYW1lOiB0YWdzLnByb3BlcnR5TmFtZSxcbiAgTnVsbDogdGFncy5udWxsLFxuICBcIixcIjogdGFncy5zZXBhcmF0b3IsXG4gIFwiWyBdXCI6IHRhZ3Muc3F1YXJlQnJhY2tldCxcbiAgXCJ7IH1cIjogdGFncy5icmFjZVxufSk7XG5cbi8vIFRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IGxlemVyLWdlbmVyYXRvci4gWW91IHByb2JhYmx5IHNob3VsZG4ndCBlZGl0IGl0LlxuY29uc3QgcGFyc2VyID0gTFJQYXJzZXIuZGVzZXJpYWxpemUoe1xuICB2ZXJzaW9uOiAxNCxcbiAgc3RhdGVzOiBcIiRiT1ZRUE9PT09RTycjQ2InI0NiT25RUE8nI0NlT3ZRUE8nI0NqT09RTycjQ3AnI0NwUU9RUE9PT09RTycjQ2cnI0NnT31RUE8nI0NmTyFTUVBPJyNDck9PUU8sNTlQLDU5UE8hW1FQTyw1OVBPIWFRUE8nI0N1T09RTyw1OVUsNTlVTyFpUVBPLDU5VU9WUVBPLDU5UU9xUVBPJyNDa08hblFQTyw1OV5PT1FPMUcuazFHLmtPVlFQTycjQ2xPIXZRUE8sNTlhT09RTzFHLnAxRy5wT09RTzFHLmwxRy5sT09RTyw1OVYsNTlWT09RTy1FNmktRTZpT09RTyw1OVcsNTlXT09RTy1FNmotRTZqXCIsXG4gIHN0YXRlRGF0YTogXCIjT35PY09Tfk9RU09SU09TU09UU09XUU9dUk9lUE9+T1ZYT2VVT35PW1tPflBWT2deT35PaF9PVmZYfk9WYU9+T2hiT1tpWH5PW2RPfk9oX09WZmF+T2hiT1tpYX5PXCIsXG4gIGdvdG86IFwiIWtqUFBQUFBQa1BQa3F3UFBreyFSUFBQIVhQIWVQUCFoWFNPUl5iUVdRUmZfVFZRX1FgV1JnYFFjWlJpY1FUT1FaUlFlXlJoYlJZUVJdUlwiLFxuICBub2RlTmFtZXM6IFwiXHUyNkEwIEpzb25UZXh0IFRydWUgRmFsc2UgTnVsbCBOdW1iZXIgU3RyaW5nIH0geyBPYmplY3QgUHJvcGVydHkgUHJvcGVydHlOYW1lIF0gWyBBcnJheVwiLFxuICBtYXhUZXJtOiAyNSxcbiAgbm9kZVByb3BzOiBbXG4gICAgW1wib3BlbmVkQnlcIiwgNyxcIntcIiwxMixcIltcIl0sXG4gICAgW1wiY2xvc2VkQnlcIiwgOCxcIn1cIiwxMyxcIl1cIl1cbiAgXSxcbiAgcHJvcFNvdXJjZXM6IFtqc29uSGlnaGxpZ2h0aW5nXSxcbiAgc2tpcHBlZE5vZGVzOiBbMF0sXG4gIHJlcGVhdE5vZGVDb3VudDogMixcbiAgdG9rZW5EYXRhOiBcIihwflJhWFkhV1laIVddXiFXcHEhV3JzIV18fSRpfSFPJG4hUSFSJHchUiFbJlYhWyFdJmghfSNPJm0jUCNRJnIjWSNaJncjYiNjJ2YjaCNpJ30jbyNwKGYjcSNyKGt+IV1PY35+IWBVcHEhXXFyIV1ycyFycyNPIV0jTyNQIXcjUH4hXX4hd09lfn4helhycyFdIVAhUSFdI08jUCFdI1UjViFdI1kjWiFdI2IjYyFdI2YjZyFdI2gjaSFdI2kjaiNnfiNqUiFRIVsjcyFjIWkjcyNUI1ojc34jdlIhUSFbJFAhYyFpJFAjVCNaJFB+JFNSIVEhWyRdIWMhaSRdI1QjWiRdfiRgUiFRIVshXSFjIWkhXSNUI1ohXX4kbk9ofn4kcVEhUSFSJHchUiFbJlZ+JHxSVH4hTyFQJVYhZyFoJWsjWCNZJWt+JVlQIVEhWyVdfiViUlR+IVEhWyVdIWchaCVrI1gjWSVrfiVuUnt8JXd9IU8ldyFRIVslfX4lelAhUSFbJX1+JlNQVH4hUSFbJX1+JltTVH4hTyFQJVYhUSFbJlYhZyFoJWsjWCNZJWt+Jm1PZ35+JnJPXX5+JndPW35+JnpQI1QjVSZ9fidRUCNgI2EnVH4nV1AjZyNoJ1p+J15QI1gjWSdhfidmT1J+fidpUCNpI2onbH4nb1AjYCNhJ3J+J3VQI2AjYSd4fid9T1N+fihRUCNmI2coVH4oV1AjaSNqKFp+KF5QI1gjWShhfihmT1F+fihrT1d+fihwT1Z+XCIsXG4gIHRva2VuaXplcnM6IFswXSxcbiAgdG9wUnVsZXM6IHtcIkpzb25UZXh0XCI6WzAsMV19LFxuICB0b2tlblByZWM6IDBcbn0pO1xuXG5leHBvcnQgeyBwYXJzZXIgfTtcbiIsICJpbXBvcnQgeyBwYXJzZXIgfSBmcm9tICdAbGV6ZXIvanNvbic7XG5pbXBvcnQgeyBMUkxhbmd1YWdlLCBpbmRlbnROb2RlUHJvcCwgY29udGludWVkSW5kZW50LCBmb2xkTm9kZVByb3AsIGZvbGRJbnNpZGUsIExhbmd1YWdlU3VwcG9ydCB9IGZyb20gJ0Bjb2RlbWlycm9yL2xhbmd1YWdlJztcblxuLyoqXG5DYWxsc1xuW2BKU09OLnBhcnNlYF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvSlNPTi9wYXJzZSlcbm9uIHRoZSBkb2N1bWVudCBhbmQsIGlmIHRoYXQgdGhyb3dzIGFuIGVycm9yLCByZXBvcnRzIGl0IGFzIGFcbnNpbmdsZSBkaWFnbm9zdGljLlxuKi9cbmNvbnN0IGpzb25QYXJzZUxpbnRlciA9ICgpID0+ICh2aWV3KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgSlNPTi5wYXJzZSh2aWV3LnN0YXRlLmRvYy50b1N0cmluZygpKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIFN5bnRheEVycm9yKSlcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIGNvbnN0IHBvcyA9IGdldEVycm9yUG9zaXRpb24oZSwgdmlldy5zdGF0ZS5kb2MpO1xuICAgICAgICByZXR1cm4gW3tcbiAgICAgICAgICAgICAgICBmcm9tOiBwb3MsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIHNldmVyaXR5OiAnZXJyb3InLFxuICAgICAgICAgICAgICAgIHRvOiBwb3NcbiAgICAgICAgICAgIH1dO1xuICAgIH1cbiAgICByZXR1cm4gW107XG59O1xuZnVuY3Rpb24gZ2V0RXJyb3JQb3NpdGlvbihlcnJvciwgZG9jKSB7XG4gICAgbGV0IG07XG4gICAgaWYgKG0gPSBlcnJvci5tZXNzYWdlLm1hdGNoKC9hdCBwb3NpdGlvbiAoXFxkKykvKSlcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKCttWzFdLCBkb2MubGVuZ3RoKTtcbiAgICBpZiAobSA9IGVycm9yLm1lc3NhZ2UubWF0Y2goL2F0IGxpbmUgKFxcZCspIGNvbHVtbiAoXFxkKykvKSlcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKGRvYy5saW5lKCttWzFdKS5mcm9tICsgKCttWzJdKSAtIDEsIGRvYy5sZW5ndGgpO1xuICAgIHJldHVybiAwO1xufVxuXG4vKipcbkEgbGFuZ3VhZ2UgcHJvdmlkZXIgdGhhdCBwcm92aWRlcyBKU09OIHBhcnNpbmcuXG4qL1xuY29uc3QganNvbkxhbmd1YWdlID0gLypAX19QVVJFX18qL0xSTGFuZ3VhZ2UuZGVmaW5lKHtcbiAgICBuYW1lOiBcImpzb25cIixcbiAgICBwYXJzZXI6IC8qQF9fUFVSRV9fKi9wYXJzZXIuY29uZmlndXJlKHtcbiAgICAgICAgcHJvcHM6IFtcbiAgICAgICAgICAgIC8qQF9fUFVSRV9fKi9pbmRlbnROb2RlUHJvcC5hZGQoe1xuICAgICAgICAgICAgICAgIE9iamVjdDogLypAX19QVVJFX18qL2NvbnRpbnVlZEluZGVudCh7IGV4Y2VwdDogL15cXHMqXFx9LyB9KSxcbiAgICAgICAgICAgICAgICBBcnJheTogLypAX19QVVJFX18qL2NvbnRpbnVlZEluZGVudCh7IGV4Y2VwdDogL15cXHMqXFxdLyB9KVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAvKkBfX1BVUkVfXyovZm9sZE5vZGVQcm9wLmFkZCh7XG4gICAgICAgICAgICAgICAgXCJPYmplY3QgQXJyYXlcIjogZm9sZEluc2lkZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgXVxuICAgIH0pLFxuICAgIGxhbmd1YWdlRGF0YToge1xuICAgICAgICBjbG9zZUJyYWNrZXRzOiB7IGJyYWNrZXRzOiBbXCJbXCIsIFwie1wiLCAnXCInXSB9LFxuICAgICAgICBpbmRlbnRPbklucHV0OiAvXlxccypbXFx9XFxdXSQvXG4gICAgfVxufSk7XG4vKipcbkpTT04gbGFuZ3VhZ2Ugc3VwcG9ydC5cbiovXG5mdW5jdGlvbiBqc29uKCkge1xuICAgIHJldHVybiBuZXcgTGFuZ3VhZ2VTdXBwb3J0KGpzb25MYW5ndWFnZSk7XG59XG5cbmV4cG9ydCB7IGpzb24sIGpzb25MYW5ndWFnZSwganNvblBhcnNlTGludGVyIH07XG4iLCAiaW1wb3J0IHsgRXh0ZXJuYWxUb2tlbml6ZXIsIExSUGFyc2VyIH0gZnJvbSAnQGxlemVyL2xyJztcbmltcG9ydCB7IHN0eWxlVGFncywgdGFncyB9IGZyb20gJ0BsZXplci9oaWdobGlnaHQnO1xuXG4vLyBUaGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSBsZXplci1nZW5lcmF0b3IuIFlvdSBwcm9iYWJseSBzaG91bGRuJ3QgZWRpdCBpdC5cbmNvbnN0IGRlc2NlbmRhbnRPcCA9IDkzLFxuICBVbml0ID0gMSxcbiAgY2FsbGVlID0gOTQsXG4gIGlkZW50aWZpZXIgPSA5NSxcbiAgVmFyaWFibGVOYW1lID0gMjtcblxuLyogSGFuZC13cml0dGVuIHRva2VuaXplcnMgZm9yIENTUyB0b2tlbnMgdGhhdCBjYW4ndCBiZVxuICAgZXhwcmVzc2VkIGJ5IExlemVyJ3MgYnVpbHQtaW4gdG9rZW5pemVyLiAqL1xuXG5jb25zdCBzcGFjZSA9IFs5LCAxMCwgMTEsIDEyLCAxMywgMzIsIDEzMywgMTYwLCA1NzYwLCA4MTkyLCA4MTkzLCA4MTk0LCA4MTk1LCA4MTk2LCA4MTk3LFxuICAgICAgICAgICAgICAgODE5OCwgODE5OSwgODIwMCwgODIwMSwgODIwMiwgODIzMiwgODIzMywgODIzOSwgODI4NywgMTIyODhdO1xuY29uc3QgY29sb24gPSA1OCwgcGFyZW5MID0gNDAsIHVuZGVyc2NvcmUgPSA5NSwgYnJhY2tldEwgPSA5MSwgZGFzaCA9IDQ1LCBwZXJpb2QgPSA0NixcbiAgICAgIGhhc2ggPSAzNSwgcGVyY2VudCA9IDM3O1xuXG5mdW5jdGlvbiBpc0FscGhhKGNoKSB7IHJldHVybiBjaCA+PSA2NSAmJiBjaCA8PSA5MCB8fCBjaCA+PSA5NyAmJiBjaCA8PSAxMjIgfHwgY2ggPj0gMTYxIH1cblxuZnVuY3Rpb24gaXNEaWdpdChjaCkgeyByZXR1cm4gY2ggPj0gNDggJiYgY2ggPD0gNTcgfVxuXG5jb25zdCBpZGVudGlmaWVycyA9IG5ldyBFeHRlcm5hbFRva2VuaXplcigoaW5wdXQsIHN0YWNrKSA9PiB7XG4gIGZvciAobGV0IGluc2lkZSA9IGZhbHNlLCBkYXNoZXMgPSAwLCBpID0gMDs7IGkrKykge1xuICAgIGxldCB7bmV4dH0gPSBpbnB1dDtcbiAgICBpZiAoaXNBbHBoYShuZXh0KSB8fCBuZXh0ID09IGRhc2ggfHwgbmV4dCA9PSB1bmRlcnNjb3JlIHx8IChpbnNpZGUgJiYgaXNEaWdpdChuZXh0KSkpIHtcbiAgICAgIGlmICghaW5zaWRlICYmIChuZXh0ICE9IGRhc2ggfHwgaSA+IDApKSBpbnNpZGUgPSB0cnVlO1xuICAgICAgaWYgKGRhc2hlcyA9PT0gaSAmJiBuZXh0ID09IGRhc2gpIGRhc2hlcysrO1xuICAgICAgaW5wdXQuYWR2YW5jZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoaW5zaWRlKVxuICAgICAgICBpbnB1dC5hY2NlcHRUb2tlbihuZXh0ID09IHBhcmVuTCA/IGNhbGxlZSA6IGRhc2hlcyA9PSAyICYmIHN0YWNrLmNhblNoaWZ0KFZhcmlhYmxlTmFtZSkgPyBWYXJpYWJsZU5hbWUgOiBpZGVudGlmaWVyKTtcbiAgICAgIGJyZWFrXG4gICAgfVxuICB9XG59KTtcblxuY29uc3QgZGVzY2VuZGFudCA9IG5ldyBFeHRlcm5hbFRva2VuaXplcihpbnB1dCA9PiB7XG4gIGlmIChzcGFjZS5pbmNsdWRlcyhpbnB1dC5wZWVrKC0xKSkpIHtcbiAgICBsZXQge25leHR9ID0gaW5wdXQ7XG4gICAgaWYgKGlzQWxwaGEobmV4dCkgfHwgbmV4dCA9PSB1bmRlcnNjb3JlIHx8IG5leHQgPT0gaGFzaCB8fCBuZXh0ID09IHBlcmlvZCB8fFxuICAgICAgICBuZXh0ID09IGJyYWNrZXRMIHx8IG5leHQgPT0gY29sb24gfHwgbmV4dCA9PSBkYXNoKVxuICAgICAgaW5wdXQuYWNjZXB0VG9rZW4oZGVzY2VuZGFudE9wKTtcbiAgfVxufSk7XG5cbmNvbnN0IHVuaXRUb2tlbiA9IG5ldyBFeHRlcm5hbFRva2VuaXplcihpbnB1dCA9PiB7XG4gIGlmICghc3BhY2UuaW5jbHVkZXMoaW5wdXQucGVlaygtMSkpKSB7XG4gICAgbGV0IHtuZXh0fSA9IGlucHV0O1xuICAgIGlmIChuZXh0ID09IHBlcmNlbnQpIHsgaW5wdXQuYWR2YW5jZSgpOyBpbnB1dC5hY2NlcHRUb2tlbihVbml0KTsgfVxuICAgIGlmIChpc0FscGhhKG5leHQpKSB7XG4gICAgICBkbyB7IGlucHV0LmFkdmFuY2UoKTsgfSB3aGlsZSAoaXNBbHBoYShpbnB1dC5uZXh0KSlcbiAgICAgIGlucHV0LmFjY2VwdFRva2VuKFVuaXQpO1xuICAgIH1cbiAgfVxufSk7XG5cbmNvbnN0IGNzc0hpZ2hsaWdodGluZyA9IHN0eWxlVGFncyh7XG4gIFwiQXRLZXl3b3JkIGltcG9ydCBjaGFyc2V0IG5hbWVzcGFjZSBrZXlmcmFtZXMgbWVkaWEgc3VwcG9ydHNcIjogdGFncy5kZWZpbml0aW9uS2V5d29yZCxcbiAgXCJmcm9tIHRvIHNlbGVjdG9yXCI6IHRhZ3Mua2V5d29yZCxcbiAgTmFtZXNwYWNlTmFtZTogdGFncy5uYW1lc3BhY2UsXG4gIEtleWZyYW1lTmFtZTogdGFncy5sYWJlbE5hbWUsXG4gIFRhZ05hbWU6IHRhZ3MudGFnTmFtZSxcbiAgQ2xhc3NOYW1lOiB0YWdzLmNsYXNzTmFtZSxcbiAgUHNldWRvQ2xhc3NOYW1lOiB0YWdzLmNvbnN0YW50KHRhZ3MuY2xhc3NOYW1lKSxcbiAgSWROYW1lOiB0YWdzLmxhYmVsTmFtZSxcbiAgXCJGZWF0dXJlTmFtZSBQcm9wZXJ0eU5hbWVcIjogdGFncy5wcm9wZXJ0eU5hbWUsXG4gIEF0dHJpYnV0ZU5hbWU6IHRhZ3MuYXR0cmlidXRlTmFtZSxcbiAgTnVtYmVyTGl0ZXJhbDogdGFncy5udW1iZXIsXG4gIEtleXdvcmRRdWVyeTogdGFncy5rZXl3b3JkLFxuICBVbmFyeVF1ZXJ5T3A6IHRhZ3Mub3BlcmF0b3JLZXl3b3JkLFxuICBcIkNhbGxUYWcgVmFsdWVOYW1lXCI6IHRhZ3MuYXRvbSxcbiAgVmFyaWFibGVOYW1lOiB0YWdzLnZhcmlhYmxlTmFtZSxcbiAgQ2FsbGVlOiB0YWdzLm9wZXJhdG9yS2V5d29yZCxcbiAgVW5pdDogdGFncy51bml0LFxuICBcIlVuaXZlcnNhbFNlbGVjdG9yIE5lc3RpbmdTZWxlY3RvclwiOiB0YWdzLmRlZmluaXRpb25PcGVyYXRvcixcbiAgTWF0Y2hPcDogdGFncy5jb21wYXJlT3BlcmF0b3IsXG4gIFwiQ2hpbGRPcCBTaWJsaW5nT3AsIExvZ2ljT3BcIjogdGFncy5sb2dpY09wZXJhdG9yLFxuICBCaW5PcDogdGFncy5hcml0aG1ldGljT3BlcmF0b3IsXG4gIEltcG9ydGFudDogdGFncy5tb2RpZmllcixcbiAgQ29tbWVudDogdGFncy5ibG9ja0NvbW1lbnQsXG4gIFBhcmVudGhlc2l6ZWRDb250ZW50OiB0YWdzLnNwZWNpYWwodGFncy5uYW1lKSxcbiAgQ29sb3JMaXRlcmFsOiB0YWdzLmNvbG9yLFxuICBTdHJpbmdMaXRlcmFsOiB0YWdzLnN0cmluZyxcbiAgXCI6XCI6IHRhZ3MucHVuY3R1YXRpb24sXG4gIFwiUHNldWRvT3AgI1wiOiB0YWdzLmRlcmVmT3BlcmF0b3IsXG4gIFwiOyAsXCI6IHRhZ3Muc2VwYXJhdG9yLFxuICBcIiggKVwiOiB0YWdzLnBhcmVuLFxuICBcIlsgXVwiOiB0YWdzLnNxdWFyZUJyYWNrZXQsXG4gIFwieyB9XCI6IHRhZ3MuYnJhY2Vcbn0pO1xuXG4vLyBUaGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSBsZXplci1nZW5lcmF0b3IuIFlvdSBwcm9iYWJseSBzaG91bGRuJ3QgZWRpdCBpdC5cbmNvbnN0IHNwZWNfY2FsbGVlID0ge19fcHJvdG9fXzpudWxsLGxhbmc6MzIsIFwibnRoLWNoaWxkXCI6MzIsIFwibnRoLWxhc3QtY2hpbGRcIjozMiwgXCJudGgtb2YtdHlwZVwiOjMyLCBcIm50aC1sYXN0LW9mLXR5cGVcIjozMiwgZGlyOjMyLCBcImhvc3QtY29udGV4dFwiOjMyLCB1cmw6NjAsIFwidXJsLXByZWZpeFwiOjYwLCBkb21haW46NjAsIHJlZ2V4cDo2MCwgc2VsZWN0b3I6MTM0fTtcbmNvbnN0IHNwZWNfQXRLZXl3b3JkID0ge19fcHJvdG9fXzpudWxsLFwiQGltcG9ydFwiOjExNCwgXCJAbWVkaWFcIjoxMzgsIFwiQGNoYXJzZXRcIjoxNDIsIFwiQG5hbWVzcGFjZVwiOjE0NiwgXCJAa2V5ZnJhbWVzXCI6MTUyLCBcIkBzdXBwb3J0c1wiOjE2NH07XG5jb25zdCBzcGVjX2lkZW50aWZpZXIgPSB7X19wcm90b19fOm51bGwsbm90OjEyOCwgb25seToxMjgsIGZyb206MTU4LCB0bzoxNjB9O1xuY29uc3QgcGFyc2VyID0gTFJQYXJzZXIuZGVzZXJpYWxpemUoe1xuICB2ZXJzaW9uOiAxNCxcbiAgc3RhdGVzOiBcIjdXT1lRW09PT09RUCcjQ2QnI0NkT09RUCcjQ2MnI0NjTyFaUVtPJyNDZk8hfVFYTycjQ2FPI1VRW08nI0NoTyNhUVtPJyNEUE8jZlFbTycjRFRPT1FQJyNFYycjRWNPI2tRZE8nI0RlTyRWUVtPJyNEck8ja1FkTycjRHRPJGhRW08nI0R2TyRzUVtPJyNEeU8keFFbTycjRVBPJVdRW08nI0VST09RUycjRWInI0ViT09RUycjRVMnI0VTUVlRW09PT09RUCcjQ2cnI0NnT09RUCw1OVEsNTlRTyFaUVtPLDU5UU8lX1FbTycjRVZPJXlRV08sNTh7TyZSUVtPLDU5U08jYVFbTyw1OWtPI2ZRW08sNTlvTyVfUVtPLDU5c08lX1FbTyw1OXVPJV9RW08sNTl2TydiUVtPJyNEYE9PUVMsNTh7LDU4e09PUVAnI0NrJyNDa09PUU8nI0N9JyNDfU9PUVAsNTlTLDU5U08naVFXTyw1OVNPJ25RV08sNTlTT09RUCcjRFInI0RST09RUCw1OWssNTlrT09RTycjRFYnI0RWTydzUWBPLDU5b09PUVMnI0NwJyNDcE8ja1FkTycjQ3FPJ3tRdk8nI0NzTylWUXRPLDU6UE9PUU8nI0N4JyNDeE8nblFXTycjQ3dPKWtRV08nI0N5T09RUycjRWYnI0VmT09RTycjRGgnI0RoTylwUVtPJyNEb08qT1FXTycjRWlPJHhRW08nI0RtTypeUVdPJyNEcE9PUU8nI0VqJyNFak8lfFFXTyw1Ol5PKmNRcE8sNTpgT09RUycjRHgnI0R4TyprUVdPLDU6Yk8qcFFbTyw1OmJPT1FPJyNEeycjRHtPKnhRV08sNTplTyp9UVdPLDU6a08rVlFXTyw1Om1PT1FTLUU4US1FOFFPT1FQMUcubDFHLmxPK3lRWE8sNTpxT09RTy1FOFQtRThUT09RUzFHLmcxRy5nT09RUDFHLm4xRy5uTydpUVdPMUcubk8nblFXTzFHLm5PT1FQMUcvVjFHL1ZPLFdRYE8xRy9aTyxxUVhPMUcvX08tWFFYTzFHL2FPLW9RWE8xRy9iTy5WUVhPJyNDZE8uelFXTycjRGFPT1FTLDU5eiw1OXpPL1BRV08sNTl6Ty9YUVtPLDU5ek8vYFFbTycjRE9PL2dRZE8nI0NvT09RUDFHL1oxRy9aTyNrUWRPMUcvWk8vblFwTyw1OV1PT1FTLDU5Xyw1OV9PI2tRZE8sNTlhTy92UVdPMUcva09PUVMsNTljLDU5Y08ve1EhYk8sNTllTzBUUVdPJyNEaE8wYFFXTyw1OlRPMGVRV08sNTpaTyR4UVtPLDU6Vk8keFFbTycjRVlPMG1RV08sNTtUTzB4UVdPLDU6WE8lX1FbTyw1OltPT1FTMUcveDFHL3hPT1FTMUcvejFHL3pPT1FTMUcvfDFHL3xPMVpRV08xRy98TzFgUWRPJyNEfE9PUVMxRzBQMUcwUE9PUVMxRzBWMUcwVk9PUVMxRzBYMUcwWE9PUVA3KyRZNyskWU9PUVA3KyR1NyskdU8ja1FkTzcrJHVPI2tRZE8sNTl7TzFuUVtPJyNFWE8xeFFXTzFHL2ZPT1FTMUcvZjFHL2ZPMXhRV08xRy9mTzJRUVhPJyNFaE8yWFFXTyw1OWpPMl5RdE8nI0VUTzNSUWRPJyNFZU8zXVFXTyw1OVpPM2JRcE83KyR1T09RUzFHLncxRy53T09RUzFHLnsxRy57T09RUzcrJVY3KyVWTzNqUVdPMUcvUE8ja1FkTzFHL29PT1FPMUcvdTFHL3VPT1FPMUcvcTFHL3FPM29RV08sNTp0T09RTy1FOFctRThXTzN9UVhPMUcvdk9PUVM3KyVoNyslaE80VVFZTycjQ3NPJXxRV08nI0VaTzReUWRPLDU6aE9PUVMsNTpoLDU6aE80bFFwTzw8SGFPNHRRdE8xRy9nT09RTyw1OnMsNTpzTzVYUVtPLDU6c09PUU8tRThWLUU4Vk9PUVM3KyVRNyslUU81Y1FXTzcrJVFPNWtRV08sNTtTT09RUDFHL1UxRy9VT09RUy1FOFItRThSTyNrUWRPJyNFVU81c1FXTyw1O1BPT1FUMUcudTFHLnVPT1FQPDxIYTw8SGFPT1FTNyskazcrJGtPNXtRZE83KyVaT09RTzcrJWI3KyViT09RUyw1OnUsNTp1T09RUy1FOFgtRThYT09RUzFHMFMxRzBTT09RUEFOPXtBTj17TzZTUXRPJyNFV08ja1FkTycjRVdPNn1RZE83KyVST09RTzcrJVI3KyVST09RTzFHMF8xRzBfT09RUzw8SGw8PEhsTzdfUWRPLDU6cE9PUU8tRThTLUU4U09PUU88PEh1PDxIdU83aVF0Tyw1OnJPT1FTLUU4VS1FOFVPT1FPPDxIbTw8SG1cIixcbiAgc3RhdGVEYXRhOiBcIjhqfk8jVE9TUk9Tfk9VV09YV09dVE9eVE90VU94Vk8hWV9PIVpYTyFnWU8haVpPIWtbTyFuXU8hdF5PI1JQTyNXUk9+TyNSY09+T11oT15oT3BmT3RpT3hqT3xrTyFQbU8jUGxPI1dlT35PIVJuT35QIWBPYHRPI1FxTyNScE9+TyNSdU9+TyNSd09+T1EhUU9iek9mIVFPaCFRT24hUE8jUX1PI1J5TyNae09+T2IhU08hYiFVTyFlIVZPI1IhUk8hUiNdUH5PaCFbT24hUE8jUiFaT35PI1IhXk9+T2IhU08hYiFVTyFlIVZPI1IhUk9+TyFXI11QflAkVk9VV09YV09dVE9eVE90VU94Vk8jUlBPI1dST35PcGZPIVJuT35PYCFpTyNRcU8jUnBPfk9RIXBPVVdPWFdPXVRPXlRPdFVPeFZPIVlfTyFaWE8hZ1lPIWlaTyFrW08hbl1PIXReTyNSIW9PI1dST35PIVEhcU9+UCZeT2IhdE9+T2IhdU9+T3Yhdk96IXdPfk9QIXlPYmdYamdYIVdnWCFiZ1ghZWdYI1JnWGFnWFFnWGZnWGhnWG5nWHBnWCNRZ1gjWmdYdmdYIVFnWCFWZ1h+T2IhU09qIXpPIWIhVU8hZSFWTyNSIVJPIVcjXVB+T2IhfU9+T2IhU08hYiFVTyFlIVZPI1IjT09+T3AjU08hYCNSTyFSI11YIVcjXVh+T2IjVk9+T2ohek8hVyNYT35PIVcjWU9+T2gjWk9uIVBPfk8hUiNbT35PIVJuTyFgI1JPfk8hUm5PIVcjX09+T11oT15oT3RpT3hqT3xrTyFQbU8jUGxPI1dlT35PcCF5YSFSIXlhYSF5YX5QK19PdiNhT3ojYk9+T11oT15oT3RpT3hqTyNXZU9+T3B7aXx7aSFQe2khUntpI1B7aWF7aX5QLGBPcH1pfH1pIVB9aSFSfWkjUH1pYX1pflAsYE9wIU9pfCFPaSFQIU9pIVIhT2kjUCFPaWEhT2l+UCxgT11XWF0hVVheV1hwV1h0V1h4V1h8V1ghUFdYIVJXWCNQV1gjV1dYfk9dI2NPfk8hUSNmTyFXI2RPfk8hUSNmT35QJl5PYSNbUH5QJV9PYSNYUH5QI2tPYSNuT2ohek9+TyFXI3BPfk9oI3FPbyNxT35PXSFeWGEhW1ghYCFbWH5PXSNyT35PYSNzTyFgI1JPfk9wI1NPIVIjXWEhVyNdYX5PIWAjUk9wIWFhIVIhYWEhVyFhYWEhYWF+TyFXI3hPfk8hUSN8TyFxI3pPIXIjek8jWiN5T35PIVEhe1ghVyF7WH5QJl5PIVEkU08hVyNkT35PYSNbWH5QIWBPYSRWT35PaiF6T1Ehd1hhIXdYYiF3WGYhd1hoIXdYbiF3WHAhd1gjUSF3WCNSIXdYI1ohd1h+T3AkWE9hI1hYflAja09hJFpPfk9qIXpPdiRbT35PYSRdT35PIWAjUk9wIXxhIVIhfGEhVyF8YX5PYSRfT35QK19PUCF5TyFSZ1h+TyFRJGJPIXEjek8hciN6TyNaI3lPfk9qIXpPdiRjT35PaiF6T3AkZU8hViRnTyFRIVRpIVchVGl+UCNrTyFRIXthIVche2F+UCZeTyFRJGlPIVcjZE9+T3BmT2EjW2F+T3AkWE9hI1hhfk9hJGxPflAja09qIXpPUSF6WGIhelhmIXpYaCF6WG4helhwIXpYIVEhelghViF6WCFXIXpYI1EhelgjUiF6WCNaIXpYfk9wJGVPIVYkb08hUSFUcSFXIVRxflAja09hIXhhcCF4YX5QI2tPaiF6T1EhemFiIXphZiF6YWghemFuIXphcCF6YSFRIXphIVYhemEhVyF6YSNRIXphI1IhemEjWiF6YX5PbyNaaiFQan5cIixcbiAgZ290bzogXCIsTyNfUFBQUFAjYFAjaCN2UCNoJFUjaFBQJFtQUFAkYiRrJGtQJH1QJGtQJGslZSV3UFBQJmEmZyNoUCZtUCNoUCZzUCNoUCNoI2hQUFAmeSddJ2lQUCNgUFAnbydvJ3knb1Anb1AnbydvUCNgUCNgUCNgUCd8I2BQKFAoU1BQI2BQI2AoVihlKHMoeSlUKVopZSlrUFBQUFBQKXEpeVAqZSpoUCteK2Eral1gT2JuIXMjZCRRaVdPYmZrbG1uIXMhdCNWI2QkUWlRT2Jma2xtbiFzIXQjViNkJFFRZFJSIWNlUXJUUiFnaFEhZ3RRIXwhT1IjYCFpcSFRWFp6IXUhdyF6I2IjYyNrI3IkTyRYJF4kZSRmJGpwIVFYWnohdSF3IXojYiNjI2sjciRPJFgkXiRlJGYkalQjeiNbI3txIU9YWnohdSF3IXojYiNjI2sjciRPJFgkXiRlJGYkanAhUVhaeiF1IXcheiNiI2MjayNyJE8kWCReJGUkZiRqUSFbW1IjWiFdUXNUUiFoaFEhZ3NSI2AhaFF2VVIhamlReFZSIWtqUW9TUSFmZ1EjVyFYUSNeIWBRI18hYVIkYCN6USFyblEjZyFzUSRQI2RSJGgkUVghcG4hcyNkJFFhIVdZXl98IVMhVSNSI1NSI1AhU1IhXVtSIV9dUiNdIV9RYk9VIWJiIXMkUVEhc25SJFEjZFEjayF1VSRXI2skXiRqUSReI3JSJGokWFEkWSNrUiRrJFlRZ1NTIWVnJFVSJFUjaFEkZiRPUiRuJGZRI2UhclMkUiNlJFRSJFQjZ1EjVCFUUiN2I1RRI3sjW1IkYSN7XWFPYm4hcyNkJFFbU09ibiFzI2QkUVEhZGZRIWxrUSFtbFEhbm1RI2ghdFIjdyNWUiNsIXVRfFhRIVlaUSF4elsjaiF1I2sjciRYJF4kalEjbSF3USNvIXpRI30jYlEkTyNjUyRkJE8kZlIkbSRlUiNpIXRRIVhZUSFhX1Ihe3xVIVRZX3xRIWBeUSNRIVNRI1UhVVEjdCNSUiN1I1NcIixcbiAgbm9kZU5hbWVzOiBcIlx1MjZBMCBVbml0IFZhcmlhYmxlTmFtZSBDb21tZW50IFN0eWxlU2hlZXQgUnVsZVNldCBVbml2ZXJzYWxTZWxlY3RvciBUYWdTZWxlY3RvciBUYWdOYW1lIE5lc3RpbmdTZWxlY3RvciBDbGFzc1NlbGVjdG9yIENsYXNzTmFtZSBQc2V1ZG9DbGFzc1NlbGVjdG9yIDogOjogUHNldWRvQ2xhc3NOYW1lIFBzZXVkb0NsYXNzTmFtZSApICggQXJnTGlzdCBWYWx1ZU5hbWUgUGFyZW50aGVzaXplZFZhbHVlIENvbG9yTGl0ZXJhbCBOdW1iZXJMaXRlcmFsIFN0cmluZ0xpdGVyYWwgQmluYXJ5RXhwcmVzc2lvbiBCaW5PcCBDYWxsRXhwcmVzc2lvbiBDYWxsZWUgQ2FsbExpdGVyYWwgQ2FsbFRhZyBQYXJlbnRoZXNpemVkQ29udGVudCAsIFBzZXVkb0NsYXNzTmFtZSBBcmdMaXN0IElkU2VsZWN0b3IgIyBJZE5hbWUgXSBBdHRyaWJ1dGVTZWxlY3RvciBbIEF0dHJpYnV0ZU5hbWUgTWF0Y2hPcCBDaGlsZFNlbGVjdG9yIENoaWxkT3AgRGVzY2VuZGFudFNlbGVjdG9yIFNpYmxpbmdTZWxlY3RvciBTaWJsaW5nT3AgfSB7IEJsb2NrIERlY2xhcmF0aW9uIFByb3BlcnR5TmFtZSBJbXBvcnRhbnQgOyBJbXBvcnRTdGF0ZW1lbnQgQXRLZXl3b3JkIGltcG9ydCBLZXl3b3JkUXVlcnkgRmVhdHVyZVF1ZXJ5IEZlYXR1cmVOYW1lIEJpbmFyeVF1ZXJ5IExvZ2ljT3AgVW5hcnlRdWVyeSBVbmFyeVF1ZXJ5T3AgUGFyZW50aGVzaXplZFF1ZXJ5IFNlbGVjdG9yUXVlcnkgc2VsZWN0b3IgTWVkaWFTdGF0ZW1lbnQgbWVkaWEgQ2hhcnNldFN0YXRlbWVudCBjaGFyc2V0IE5hbWVzcGFjZVN0YXRlbWVudCBuYW1lc3BhY2UgTmFtZXNwYWNlTmFtZSBLZXlmcmFtZXNTdGF0ZW1lbnQga2V5ZnJhbWVzIEtleWZyYW1lTmFtZSBLZXlmcmFtZUxpc3QgZnJvbSB0byBTdXBwb3J0c1N0YXRlbWVudCBzdXBwb3J0cyBBdFJ1bGVcIixcbiAgbWF4VGVybTogMTA2LFxuICBub2RlUHJvcHM6IFtcbiAgICBbXCJvcGVuZWRCeVwiLCAxNyxcIihcIiw0OCxcIntcIl0sXG4gICAgW1wiY2xvc2VkQnlcIiwgMTgsXCIpXCIsNDksXCJ9XCJdXG4gIF0sXG4gIHByb3BTb3VyY2VzOiBbY3NzSGlnaGxpZ2h0aW5nXSxcbiAgc2tpcHBlZE5vZGVzOiBbMCwzXSxcbiAgcmVwZWF0Tm9kZUNvdW50OiA4LFxuICB0b2tlbkRhdGE6IFwiQXl+UiFbT1gkd1heJV1ecCR3cHElXXFyKGNycyt9c3Qsb3R1MlV1diR3dncycnd4Mn14eTNqeXozdXp7M3p7fDRffH04VX0hTzhhIU8hUDh4IVAhUTlaIVEhWztlIVshXTxZIV0hXjx4IV4hXyR3IV8hYD1UIWAhYT1gIWEhYiR3IWIhYz5PIWMhfSR3IX0jTz9bI08jUCR3I1AjUT9nI1EjUjJVI1IjVCR3I1QjVT9yI1UjYyR3I2MjZEBxI2QjbyR3I28jcEFRI3AjcTJVI3EjckFdI3Ijc0FoI3MjeSR3I3kjeiVdI3okZiR3JGYkZyVdJGcjQlkkdyNCWSNCWiVdI0JaJElTJHckSVMkSV8lXSRJXyRJfCR3JEl8JEpPJV0kSk8kSlQkdyRKVCRKVSVdJEpVJEtWJHckS1YkS1clXSRLVyZGVSR3JkZVJkZWJV0mRlZ+JHdXJHpRT3klUXp+JVFXJVZRb1dPeSVRen4lUX4lYmYjVH5PWCVRWF4mdl5wJVFwcSZ2cXklUXojeSVRI3kjeiZ2I3okZiVRJGYkZyZ2JGcjQlklUSNCWSNCWiZ2I0JaJElTJVEkSVMkSV8mdiRJXyRJfCVRJEl8JEpPJnYkSk8kSlQlUSRKVCRKVSZ2JEpVJEtWJVEkS1YkS1cmdiRLVyZGVSVRJkZVJkZWJnYmRlZ+JVF+Jn1mI1R+b1dPWCVRWF4mdl5wJVFwcSZ2cXklUXojeSVRI3kjeiZ2I3okZiVRJGYkZyZ2JGcjQlklUSNCWSNCWiZ2I0JaJElTJVEkSVMkSV8mdiRJXyRJfCVRJEl8JEpPJnYkSk8kSlQlUSRKVCRKVSZ2JEpVJEtWJVEkS1YkS1cmdiRLVyZGVSVRJkZVJkZWJnYmRlZ+JVFeKGZTT3klUXojXSVRI10jXihyI15+JVFeKHdTb1dPeSVReiNhJVEjYSNiKVQjYn4lUV4pWVNvV095JVF6I2QlUSNkI2UpZiNlfiVRXilrU29XT3klUXojYyVRI2MjZCl3I2R+JVFeKXxTb1dPeSVReiNmJVEjZiNnKlkjZ34lUV4qX1NvV095JVF6I2glUSNoI2kqayNpfiVRXipwU29XT3klUXojVCVRI1QjVSp8I1V+JVFeK1JTb1dPeSVReiNiJVEjYiNjK18jY34lUV4rZFNvV095JVF6I2glUSNoI2krcCNpfiVRXit3USFWVW9XT3klUXp+JVF+LFFVT1krfVpyK31ycyxkcyNPK30jTyNQLGkjUH4rfX4saU9ofn4sbFBPfit9Xyx0V3RQT3klUXohUSVRIVEhWy1eIVshYyVRIWMhaS1eIWkjVCVRI1QjWi1eI1p+JVFeLWNXb1dPeSVReiFRJVEhUSFbLXshWyFjJVEhYyFpLXshaSNUJVEjVCNaLXsjWn4lUV4uUVdvV095JVF6IVElUSFRIVsuaiFbIWMlUSFjIWkuaiFpI1QlUSNUI1ouaiNafiVRXi5xV2ZVb1dPeSVReiFRJVEhUSFbL1ohWyFjJVEhYyFpL1ohaSNUJVEjVCNaL1ojWn4lUV4vYldmVW9XT3klUXohUSVRIVEhWy96IVshYyVRIWMhaS96IWkjVCVRI1QjWi96I1p+JVFeMFBXb1dPeSVReiFRJVEhUSFbMGkhWyFjJVEhYyFpMGkhaSNUJVEjVCNaMGkjWn4lUV4wcFdmVW9XT3klUXohUSVRIVEhWzFZIVshYyVRIWMhaTFZIWkjVCVRI1QjWjFZI1p+JVFeMV9Xb1dPeSVReiFRJVEhUSFbMXchWyFjJVEhYyFpMXchaSNUJVEjVCNaMXcjWn4lUV4yT1FmVW9XT3klUXp+JVFZMlhTT3klUXohXyVRIV8hYDJlIWB+JVFZMmxRelFvV095JVF6fiVRWDJ3UVhQT3klUXp+JVF+M1FVT1kyfVp3Mn13eCxkeCNPMn0jTyNQM2QjUH4yfX4zZ1BPfjJ9XzNvUWJWT3klUXp+JVF+M3pPYX5fNFJTVVBqU095JVF6IV8lUSFfIWAyZSFgfiVRXzRmVWpTIVBQT3klUXohTyVRIU8hUDR4IVAhUSVRIVEhWzdfIVt+JVFeNH1Tb1dPeSVReiFRJVEhUSFbNVohW34lUV41YldvVyNaVU95JVF6IVElUSFRIVs1WiFbIWclUSFnIWg1eiFoI1glUSNYI1k1eiNZfiVRXjZQV29XT3klUXp7JVF7fDZpfH0lUX0hTzZpIU8hUSVRIVEhWzZ6IVt+JVFeNm5Tb1dPeSVReiFRJVEhUSFbNnohW34lUV43UlNvVyNaVU95JVF6IVElUSFRIVs2eiFbfiVRXjdmWW9XI1pVT3klUXohTyVRIU8hUDVaIVAhUSVRIVEhWzdfIVshZyVRIWchaDV6IWgjWCVRI1gjWTV6I1l+JVFfOFpRcFZPeSVRen4lUV44ZlVqU095JVF6IU8lUSFPIVA0eCFQIVElUSFRIVs3XyFbfiVRXzh9UyNXUE95JVF6IVElUSFRIVs1WiFbfiVRfjlgUmpTT3klUXp7OWl7fiVRfjluU29XT3k5aXl6OXp6ezpve345aX45fVJPejl6ens6V3t+OXp+OlpUT3o5enp7Old7IVA5eiFQIVE6aiFRfjl6fjpvT1J+fjp0VW9XT3k5aXl6OXp6ezpveyFQOWkhUCFRO1chUX45aX47X1FvV1J+T3klUXp+JVFeO2pZI1pVT3klUXohTyVRIU8hUDVaIVAhUSVRIVEhWzdfIVshZyVRIWchaDV6IWgjWCVRI1gjWTV6I1l+JVFYPF9TXVBPeSVReiFbJVEhWyFdPGshXX4lUVg8clFeUG9XT3klUXp+JVFfPH1RIVdWT3klUXp+JVFZPVlRelFPeSVRen4lUVg9ZVN8UE95JVF6IWAlUSFgIWE9cSFhfiVRWD14UXxQb1dPeSVRen4lUVg+UlVPeSVReiFjJVEhYyF9PmUhfSNUJVEjVCNvPmUjb34lUVg+bFkhWVBvV095JVF6fSVRfSFPPmUhTyFRJVEhUSFbPmUhWyFjJVEhYyF9PmUhfSNUJVEjVCNvPmUjb34lUVg/YVF4UE95JVF6fiVRXj9sUXZVT3klUXp+JVFYP3VTT3klUXojYiVRI2IjY0BSI2N+JVFYQFdTb1dPeSVReiNXJVEjVyNYQGQjWH4lUVhAa1EhYFBvV095JVF6fiVRWEB0U095JVF6I2YlUSNmI2dAZCNnfiVRWEFWUSFSUE95JVF6fiVRX0FiUSFRVk95JVF6fiVRWkFtUyFQUE95JVF6IV8lUSFfIWAyZSFgfiVRXCIsXG4gIHRva2VuaXplcnM6IFtkZXNjZW5kYW50LCB1bml0VG9rZW4sIGlkZW50aWZpZXJzLCAwLCAxLCAyLCAzXSxcbiAgdG9wUnVsZXM6IHtcIlN0eWxlU2hlZXRcIjpbMCw0XX0sXG4gIHNwZWNpYWxpemVkOiBbe3Rlcm06IDk0LCBnZXQ6IHZhbHVlID0+IHNwZWNfY2FsbGVlW3ZhbHVlXSB8fCAtMX0se3Rlcm06IDU2LCBnZXQ6IHZhbHVlID0+IHNwZWNfQXRLZXl3b3JkW3ZhbHVlXSB8fCAtMX0se3Rlcm06IDk1LCBnZXQ6IHZhbHVlID0+IHNwZWNfaWRlbnRpZmllclt2YWx1ZV0gfHwgLTF9XSxcbiAgdG9rZW5QcmVjOiAxMDc4XG59KTtcblxuZXhwb3J0IHsgcGFyc2VyIH07XG4iLCAiaW1wb3J0IHsgcGFyc2VyIH0gZnJvbSAnQGxlemVyL2Nzcyc7XG5pbXBvcnQgeyBzeW50YXhUcmVlLCBMUkxhbmd1YWdlLCBpbmRlbnROb2RlUHJvcCwgY29udGludWVkSW5kZW50LCBmb2xkTm9kZVByb3AsIGZvbGRJbnNpZGUsIExhbmd1YWdlU3VwcG9ydCB9IGZyb20gJ0Bjb2RlbWlycm9yL2xhbmd1YWdlJztcblxubGV0IF9wcm9wZXJ0aWVzID0gbnVsbDtcbmZ1bmN0aW9uIHByb3BlcnRpZXMoKSB7XG4gICAgaWYgKCFfcHJvcGVydGllcyAmJiB0eXBlb2YgZG9jdW1lbnQgPT0gXCJvYmplY3RcIiAmJiBkb2N1bWVudC5ib2R5KSB7XG4gICAgICAgIGxldCBuYW1lcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBwcm9wIGluIGRvY3VtZW50LmJvZHkuc3R5bGUpIHtcbiAgICAgICAgICAgIGlmICghL1tBLVpdfF4tfF4oaXRlbXxsZW5ndGgpJC8udGVzdChwcm9wKSlcbiAgICAgICAgICAgICAgICBuYW1lcy5wdXNoKHByb3ApO1xuICAgICAgICB9XG4gICAgICAgIF9wcm9wZXJ0aWVzID0gbmFtZXMuc29ydCgpLm1hcChuYW1lID0+ICh7IHR5cGU6IFwicHJvcGVydHlcIiwgbGFiZWw6IG5hbWUgfSkpO1xuICAgIH1cbiAgICByZXR1cm4gX3Byb3BlcnRpZXMgfHwgW107XG59XG5jb25zdCBwc2V1ZG9DbGFzc2VzID0gLypAX19QVVJFX18qL1tcbiAgICBcImFjdGl2ZVwiLCBcImFmdGVyXCIsIFwiYW55LWxpbmtcIiwgXCJhdXRvZmlsbFwiLCBcImJhY2tkcm9wXCIsIFwiYmVmb3JlXCIsXG4gICAgXCJjaGVja2VkXCIsIFwiY3VlXCIsIFwiZGVmYXVsdFwiLCBcImRlZmluZWRcIiwgXCJkaXNhYmxlZFwiLCBcImVtcHR5XCIsXG4gICAgXCJlbmFibGVkXCIsIFwiZmlsZS1zZWxlY3Rvci1idXR0b25cIiwgXCJmaXJzdFwiLCBcImZpcnN0LWNoaWxkXCIsXG4gICAgXCJmaXJzdC1sZXR0ZXJcIiwgXCJmaXJzdC1saW5lXCIsIFwiZmlyc3Qtb2YtdHlwZVwiLCBcImZvY3VzXCIsXG4gICAgXCJmb2N1cy12aXNpYmxlXCIsIFwiZm9jdXMtd2l0aGluXCIsIFwiZnVsbHNjcmVlblwiLCBcImhhc1wiLCBcImhvc3RcIixcbiAgICBcImhvc3QtY29udGV4dFwiLCBcImhvdmVyXCIsIFwiaW4tcmFuZ2VcIiwgXCJpbmRldGVybWluYXRlXCIsIFwiaW52YWxpZFwiLFxuICAgIFwiaXNcIiwgXCJsYW5nXCIsIFwibGFzdC1jaGlsZFwiLCBcImxhc3Qtb2YtdHlwZVwiLCBcImxlZnRcIiwgXCJsaW5rXCIsIFwibWFya2VyXCIsXG4gICAgXCJtb2RhbFwiLCBcIm5vdFwiLCBcIm50aC1jaGlsZFwiLCBcIm50aC1sYXN0LWNoaWxkXCIsIFwibnRoLWxhc3Qtb2YtdHlwZVwiLFxuICAgIFwibnRoLW9mLXR5cGVcIiwgXCJvbmx5LWNoaWxkXCIsIFwib25seS1vZi10eXBlXCIsIFwib3B0aW9uYWxcIiwgXCJvdXQtb2YtcmFuZ2VcIixcbiAgICBcInBhcnRcIiwgXCJwbGFjZWhvbGRlclwiLCBcInBsYWNlaG9sZGVyLXNob3duXCIsIFwicmVhZC1vbmx5XCIsIFwicmVhZC13cml0ZVwiLFxuICAgIFwicmVxdWlyZWRcIiwgXCJyaWdodFwiLCBcInJvb3RcIiwgXCJzY29wZVwiLCBcInNlbGVjdGlvblwiLCBcInNsb3R0ZWRcIiwgXCJ0YXJnZXRcIixcbiAgICBcInRhcmdldC10ZXh0XCIsIFwidmFsaWRcIiwgXCJ2aXNpdGVkXCIsIFwid2hlcmVcIlxuXS5tYXAobmFtZSA9PiAoeyB0eXBlOiBcImNsYXNzXCIsIGxhYmVsOiBuYW1lIH0pKTtcbmNvbnN0IHZhbHVlcyA9IC8qQF9fUFVSRV9fKi9bXG4gICAgXCJhYm92ZVwiLCBcImFic29sdXRlXCIsIFwiYWN0aXZlYm9yZGVyXCIsIFwiYWRkaXRpdmVcIiwgXCJhY3RpdmVjYXB0aW9uXCIsIFwiYWZ0ZXItd2hpdGUtc3BhY2VcIixcbiAgICBcImFoZWFkXCIsIFwiYWxpYXNcIiwgXCJhbGxcIiwgXCJhbGwtc2Nyb2xsXCIsIFwiYWxwaGFiZXRpY1wiLCBcImFsdGVybmF0ZVwiLCBcImFsd2F5c1wiLFxuICAgIFwiYW50aWFsaWFzZWRcIiwgXCJhcHB3b3Jrc3BhY2VcIiwgXCJhc3Rlcmlza3NcIiwgXCJhdHRyXCIsIFwiYXV0b1wiLCBcImF1dG8tZmxvd1wiLCBcImF2b2lkXCIsIFwiYXZvaWQtY29sdW1uXCIsXG4gICAgXCJhdm9pZC1wYWdlXCIsIFwiYXZvaWQtcmVnaW9uXCIsIFwiYXhpcy1wYW5cIiwgXCJiYWNrZ3JvdW5kXCIsIFwiYmFja3dhcmRzXCIsIFwiYmFzZWxpbmVcIiwgXCJiZWxvd1wiLFxuICAgIFwiYmlkaS1vdmVycmlkZVwiLCBcImJsaW5rXCIsIFwiYmxvY2tcIiwgXCJibG9jay1heGlzXCIsIFwiYm9sZFwiLCBcImJvbGRlclwiLCBcImJvcmRlclwiLCBcImJvcmRlci1ib3hcIixcbiAgICBcImJvdGhcIiwgXCJib3R0b21cIiwgXCJicmVha1wiLCBcImJyZWFrLWFsbFwiLCBcImJyZWFrLXdvcmRcIiwgXCJidWxsZXRzXCIsIFwiYnV0dG9uXCIsIFwiYnV0dG9uLWJldmVsXCIsXG4gICAgXCJidXR0b25mYWNlXCIsIFwiYnV0dG9uaGlnaGxpZ2h0XCIsIFwiYnV0dG9uc2hhZG93XCIsIFwiYnV0dG9udGV4dFwiLCBcImNhbGNcIiwgXCJjYXBpdGFsaXplXCIsXG4gICAgXCJjYXBzLWxvY2staW5kaWNhdG9yXCIsIFwiY2FwdGlvblwiLCBcImNhcHRpb250ZXh0XCIsIFwiY2FyZXRcIiwgXCJjZWxsXCIsIFwiY2VudGVyXCIsIFwiY2hlY2tib3hcIiwgXCJjaXJjbGVcIixcbiAgICBcImNqay1kZWNpbWFsXCIsIFwiY2xlYXJcIiwgXCJjbGlwXCIsIFwiY2xvc2UtcXVvdGVcIiwgXCJjb2wtcmVzaXplXCIsIFwiY29sbGFwc2VcIiwgXCJjb2xvclwiLCBcImNvbG9yLWJ1cm5cIixcbiAgICBcImNvbG9yLWRvZGdlXCIsIFwiY29sdW1uXCIsIFwiY29sdW1uLXJldmVyc2VcIiwgXCJjb21wYWN0XCIsIFwiY29uZGVuc2VkXCIsIFwiY29udGFpblwiLCBcImNvbnRlbnRcIixcbiAgICBcImNvbnRlbnRzXCIsIFwiY29udGVudC1ib3hcIiwgXCJjb250ZXh0LW1lbnVcIiwgXCJjb250aW51b3VzXCIsIFwiY29weVwiLCBcImNvdW50ZXJcIiwgXCJjb3VudGVyc1wiLCBcImNvdmVyXCIsXG4gICAgXCJjcm9wXCIsIFwiY3Jvc3NcIiwgXCJjcm9zc2hhaXJcIiwgXCJjdXJyZW50Y29sb3JcIiwgXCJjdXJzaXZlXCIsIFwiY3ljbGljXCIsIFwiZGFya2VuXCIsIFwiZGFzaGVkXCIsIFwiZGVjaW1hbFwiLFxuICAgIFwiZGVjaW1hbC1sZWFkaW5nLXplcm9cIiwgXCJkZWZhdWx0XCIsIFwiZGVmYXVsdC1idXR0b25cIiwgXCJkZW5zZVwiLCBcImRlc3RpbmF0aW9uLWF0b3BcIiwgXCJkZXN0aW5hdGlvbi1pblwiLFxuICAgIFwiZGVzdGluYXRpb24tb3V0XCIsIFwiZGVzdGluYXRpb24tb3ZlclwiLCBcImRpZmZlcmVuY2VcIiwgXCJkaXNjXCIsIFwiZGlzY2FyZFwiLCBcImRpc2Nsb3N1cmUtY2xvc2VkXCIsXG4gICAgXCJkaXNjbG9zdXJlLW9wZW5cIiwgXCJkb2N1bWVudFwiLCBcImRvdC1kYXNoXCIsIFwiZG90LWRvdC1kYXNoXCIsIFwiZG90dGVkXCIsIFwiZG91YmxlXCIsIFwiZG93blwiLCBcImUtcmVzaXplXCIsXG4gICAgXCJlYXNlXCIsIFwiZWFzZS1pblwiLCBcImVhc2UtaW4tb3V0XCIsIFwiZWFzZS1vdXRcIiwgXCJlbGVtZW50XCIsIFwiZWxsaXBzZVwiLCBcImVsbGlwc2lzXCIsIFwiZW1iZWRcIiwgXCJlbmRcIixcbiAgICBcImV0aGlvcGljLWFiZWdlZGUtZ2V6XCIsIFwiZXRoaW9waWMtaGFsZWhhbWUtYWEtZXJcIiwgXCJldGhpb3BpYy1oYWxlaGFtZS1nZXpcIiwgXCJldy1yZXNpemVcIiwgXCJleGNsdXNpb25cIixcbiAgICBcImV4cGFuZGVkXCIsIFwiZXh0ZW5kc1wiLCBcImV4dHJhLWNvbmRlbnNlZFwiLCBcImV4dHJhLWV4cGFuZGVkXCIsIFwiZmFudGFzeVwiLCBcImZhc3RcIiwgXCJmaWxsXCIsIFwiZmlsbC1ib3hcIixcbiAgICBcImZpeGVkXCIsIFwiZmxhdFwiLCBcImZsZXhcIiwgXCJmbGV4LWVuZFwiLCBcImZsZXgtc3RhcnRcIiwgXCJmb290bm90ZXNcIiwgXCJmb3J3YXJkc1wiLCBcImZyb21cIixcbiAgICBcImdlb21ldHJpY1ByZWNpc2lvblwiLCBcImdyYXl0ZXh0XCIsIFwiZ3JpZFwiLCBcImdyb292ZVwiLCBcImhhbmRcIiwgXCJoYXJkLWxpZ2h0XCIsIFwiaGVscFwiLCBcImhpZGRlblwiLCBcImhpZGVcIixcbiAgICBcImhpZ2hlclwiLCBcImhpZ2hsaWdodFwiLCBcImhpZ2hsaWdodHRleHRcIiwgXCJob3Jpem9udGFsXCIsIFwiaHNsXCIsIFwiaHNsYVwiLCBcImh1ZVwiLCBcImljb25cIiwgXCJpZ25vcmVcIixcbiAgICBcImluYWN0aXZlYm9yZGVyXCIsIFwiaW5hY3RpdmVjYXB0aW9uXCIsIFwiaW5hY3RpdmVjYXB0aW9udGV4dFwiLCBcImluZmluaXRlXCIsIFwiaW5mb2JhY2tncm91bmRcIiwgXCJpbmZvdGV4dFwiLFxuICAgIFwiaW5oZXJpdFwiLCBcImluaXRpYWxcIiwgXCJpbmxpbmVcIiwgXCJpbmxpbmUtYXhpc1wiLCBcImlubGluZS1ibG9ja1wiLCBcImlubGluZS1mbGV4XCIsIFwiaW5saW5lLWdyaWRcIixcbiAgICBcImlubGluZS10YWJsZVwiLCBcImluc2V0XCIsIFwiaW5zaWRlXCIsIFwiaW50cmluc2ljXCIsIFwiaW52ZXJ0XCIsIFwiaXRhbGljXCIsIFwianVzdGlmeVwiLCBcImtlZXAtYWxsXCIsXG4gICAgXCJsYW5kc2NhcGVcIiwgXCJsYXJnZVwiLCBcImxhcmdlclwiLCBcImxlZnRcIiwgXCJsZXZlbFwiLCBcImxpZ2h0ZXJcIiwgXCJsaWdodGVuXCIsIFwibGluZS10aHJvdWdoXCIsIFwibGluZWFyXCIsXG4gICAgXCJsaW5lYXItZ3JhZGllbnRcIiwgXCJsaW5lc1wiLCBcImxpc3QtaXRlbVwiLCBcImxpc3Rib3hcIiwgXCJsaXN0aXRlbVwiLCBcImxvY2FsXCIsIFwibG9naWNhbFwiLCBcImxvdWRcIiwgXCJsb3dlclwiLFxuICAgIFwibG93ZXItaGV4YWRlY2ltYWxcIiwgXCJsb3dlci1sYXRpblwiLCBcImxvd2VyLW5vcndlZ2lhblwiLCBcImxvd2VyY2FzZVwiLCBcImx0clwiLCBcImx1bWlub3NpdHlcIiwgXCJtYW5pcHVsYXRpb25cIixcbiAgICBcIm1hdGNoXCIsIFwibWF0cml4XCIsIFwibWF0cml4M2RcIiwgXCJtZWRpdW1cIiwgXCJtZW51XCIsIFwibWVudXRleHRcIiwgXCJtZXNzYWdlLWJveFwiLCBcIm1pZGRsZVwiLCBcIm1pbi1pbnRyaW5zaWNcIixcbiAgICBcIm1peFwiLCBcIm1vbm9zcGFjZVwiLCBcIm1vdmVcIiwgXCJtdWx0aXBsZVwiLCBcIm11bHRpcGxlX21hc2tfaW1hZ2VzXCIsIFwibXVsdGlwbHlcIiwgXCJuLXJlc2l6ZVwiLCBcIm5hcnJvd2VyXCIsXG4gICAgXCJuZS1yZXNpemVcIiwgXCJuZXN3LXJlc2l6ZVwiLCBcIm5vLWNsb3NlLXF1b3RlXCIsIFwibm8tZHJvcFwiLCBcIm5vLW9wZW4tcXVvdGVcIiwgXCJuby1yZXBlYXRcIiwgXCJub25lXCIsXG4gICAgXCJub3JtYWxcIiwgXCJub3QtYWxsb3dlZFwiLCBcIm5vd3JhcFwiLCBcIm5zLXJlc2l6ZVwiLCBcIm51bWJlcnNcIiwgXCJudW1lcmljXCIsIFwibnctcmVzaXplXCIsIFwibndzZS1yZXNpemVcIixcbiAgICBcIm9ibGlxdWVcIiwgXCJvcGFjaXR5XCIsIFwib3Blbi1xdW90ZVwiLCBcIm9wdGltaXplTGVnaWJpbGl0eVwiLCBcIm9wdGltaXplU3BlZWRcIiwgXCJvdXRzZXRcIiwgXCJvdXRzaWRlXCIsXG4gICAgXCJvdXRzaWRlLXNoYXBlXCIsIFwib3ZlcmxheVwiLCBcIm92ZXJsaW5lXCIsIFwicGFkZGluZ1wiLCBcInBhZGRpbmctYm94XCIsIFwicGFpbnRlZFwiLCBcInBhZ2VcIiwgXCJwYXVzZWRcIixcbiAgICBcInBlcnNwZWN0aXZlXCIsIFwicGluY2gtem9vbVwiLCBcInBsdXMtZGFya2VyXCIsIFwicGx1cy1saWdodGVyXCIsIFwicG9pbnRlclwiLCBcInBvbHlnb25cIiwgXCJwb3J0cmFpdFwiLFxuICAgIFwicHJlXCIsIFwicHJlLWxpbmVcIiwgXCJwcmUtd3JhcFwiLCBcInByZXNlcnZlLTNkXCIsIFwicHJvZ3Jlc3NcIiwgXCJwdXNoLWJ1dHRvblwiLCBcInJhZGlhbC1ncmFkaWVudFwiLCBcInJhZGlvXCIsXG4gICAgXCJyZWFkLW9ubHlcIiwgXCJyZWFkLXdyaXRlXCIsIFwicmVhZC13cml0ZS1wbGFpbnRleHQtb25seVwiLCBcInJlY3RhbmdsZVwiLCBcInJlZ2lvblwiLCBcInJlbGF0aXZlXCIsIFwicmVwZWF0XCIsXG4gICAgXCJyZXBlYXRpbmctbGluZWFyLWdyYWRpZW50XCIsIFwicmVwZWF0aW5nLXJhZGlhbC1ncmFkaWVudFwiLCBcInJlcGVhdC14XCIsIFwicmVwZWF0LXlcIiwgXCJyZXNldFwiLCBcInJldmVyc2VcIixcbiAgICBcInJnYlwiLCBcInJnYmFcIiwgXCJyaWRnZVwiLCBcInJpZ2h0XCIsIFwicm90YXRlXCIsIFwicm90YXRlM2RcIiwgXCJyb3RhdGVYXCIsIFwicm90YXRlWVwiLCBcInJvdGF0ZVpcIiwgXCJyb3VuZFwiLFxuICAgIFwicm93XCIsIFwicm93LXJlc2l6ZVwiLCBcInJvdy1yZXZlcnNlXCIsIFwicnRsXCIsIFwicnVuLWluXCIsIFwicnVubmluZ1wiLCBcInMtcmVzaXplXCIsIFwic2Fucy1zZXJpZlwiLCBcInNhdHVyYXRpb25cIixcbiAgICBcInNjYWxlXCIsIFwic2NhbGUzZFwiLCBcInNjYWxlWFwiLCBcInNjYWxlWVwiLCBcInNjYWxlWlwiLCBcInNjcmVlblwiLCBcInNjcm9sbFwiLCBcInNjcm9sbGJhclwiLCBcInNjcm9sbC1wb3NpdGlvblwiLFxuICAgIFwic2UtcmVzaXplXCIsIFwic2VsZi1zdGFydFwiLCBcInNlbGYtZW5kXCIsIFwic2VtaS1jb25kZW5zZWRcIiwgXCJzZW1pLWV4cGFuZGVkXCIsIFwic2VwYXJhdGVcIiwgXCJzZXJpZlwiLCBcInNob3dcIixcbiAgICBcInNpbmdsZVwiLCBcInNrZXdcIiwgXCJza2V3WFwiLCBcInNrZXdZXCIsIFwic2tpcC13aGl0ZS1zcGFjZVwiLCBcInNsaWRlXCIsIFwic2xpZGVyLWhvcml6b250YWxcIixcbiAgICBcInNsaWRlci12ZXJ0aWNhbFwiLCBcInNsaWRlcnRodW1iLWhvcml6b250YWxcIiwgXCJzbGlkZXJ0aHVtYi12ZXJ0aWNhbFwiLCBcInNsb3dcIiwgXCJzbWFsbFwiLCBcInNtYWxsLWNhcHNcIixcbiAgICBcInNtYWxsLWNhcHRpb25cIiwgXCJzbWFsbGVyXCIsIFwic29mdC1saWdodFwiLCBcInNvbGlkXCIsIFwic291cmNlLWF0b3BcIiwgXCJzb3VyY2UtaW5cIiwgXCJzb3VyY2Utb3V0XCIsXG4gICAgXCJzb3VyY2Utb3ZlclwiLCBcInNwYWNlXCIsIFwic3BhY2UtYXJvdW5kXCIsIFwic3BhY2UtYmV0d2VlblwiLCBcInNwYWNlLWV2ZW5seVwiLCBcInNwZWxsLW91dFwiLCBcInNxdWFyZVwiLCBcInN0YXJ0XCIsXG4gICAgXCJzdGF0aWNcIiwgXCJzdGF0dXMtYmFyXCIsIFwic3RyZXRjaFwiLCBcInN0cm9rZVwiLCBcInN0cm9rZS1ib3hcIiwgXCJzdWJcIiwgXCJzdWJwaXhlbC1hbnRpYWxpYXNlZFwiLCBcInN2Z19tYXNrc1wiLFxuICAgIFwic3VwZXJcIiwgXCJzdy1yZXNpemVcIiwgXCJzeW1ib2xpY1wiLCBcInN5bWJvbHNcIiwgXCJzeXN0ZW0tdWlcIiwgXCJ0YWJsZVwiLCBcInRhYmxlLWNhcHRpb25cIiwgXCJ0YWJsZS1jZWxsXCIsXG4gICAgXCJ0YWJsZS1jb2x1bW5cIiwgXCJ0YWJsZS1jb2x1bW4tZ3JvdXBcIiwgXCJ0YWJsZS1mb290ZXItZ3JvdXBcIiwgXCJ0YWJsZS1oZWFkZXItZ3JvdXBcIiwgXCJ0YWJsZS1yb3dcIixcbiAgICBcInRhYmxlLXJvdy1ncm91cFwiLCBcInRleHRcIiwgXCJ0ZXh0LWJvdHRvbVwiLCBcInRleHQtdG9wXCIsIFwidGV4dGFyZWFcIiwgXCJ0ZXh0ZmllbGRcIiwgXCJ0aGlja1wiLCBcInRoaW5cIixcbiAgICBcInRocmVlZGRhcmtzaGFkb3dcIiwgXCJ0aHJlZWRmYWNlXCIsIFwidGhyZWVkaGlnaGxpZ2h0XCIsIFwidGhyZWVkbGlnaHRzaGFkb3dcIiwgXCJ0aHJlZWRzaGFkb3dcIiwgXCJ0b1wiLCBcInRvcFwiLFxuICAgIFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlXCIsIFwidHJhbnNsYXRlM2RcIiwgXCJ0cmFuc2xhdGVYXCIsIFwidHJhbnNsYXRlWVwiLCBcInRyYW5zbGF0ZVpcIiwgXCJ0cmFuc3BhcmVudFwiLFxuICAgIFwidWx0cmEtY29uZGVuc2VkXCIsIFwidWx0cmEtZXhwYW5kZWRcIiwgXCJ1bmRlcmxpbmVcIiwgXCJ1bmlkaXJlY3Rpb25hbC1wYW5cIiwgXCJ1bnNldFwiLCBcInVwXCIsIFwidXBwZXItbGF0aW5cIixcbiAgICBcInVwcGVyY2FzZVwiLCBcInVybFwiLCBcInZhclwiLCBcInZlcnRpY2FsXCIsIFwidmVydGljYWwtdGV4dFwiLCBcInZpZXctYm94XCIsIFwidmlzaWJsZVwiLCBcInZpc2libGVGaWxsXCIsXG4gICAgXCJ2aXNpYmxlUGFpbnRlZFwiLCBcInZpc2libGVTdHJva2VcIiwgXCJ2aXN1YWxcIiwgXCJ3LXJlc2l6ZVwiLCBcIndhaXRcIiwgXCJ3YXZlXCIsIFwid2lkZXJcIiwgXCJ3aW5kb3dcIiwgXCJ3aW5kb3dmcmFtZVwiLFxuICAgIFwid2luZG93dGV4dFwiLCBcIndvcmRzXCIsIFwid3JhcFwiLCBcIndyYXAtcmV2ZXJzZVwiLCBcIngtbGFyZ2VcIiwgXCJ4LXNtYWxsXCIsIFwieG9yXCIsIFwieHgtbGFyZ2VcIiwgXCJ4eC1zbWFsbFwiXG5dLm1hcChuYW1lID0+ICh7IHR5cGU6IFwia2V5d29yZFwiLCBsYWJlbDogbmFtZSB9KSkuY29uY2F0KC8qQF9fUFVSRV9fKi9bXG4gICAgXCJhbGljZWJsdWVcIiwgXCJhbnRpcXVld2hpdGVcIiwgXCJhcXVhXCIsIFwiYXF1YW1hcmluZVwiLCBcImF6dXJlXCIsIFwiYmVpZ2VcIixcbiAgICBcImJpc3F1ZVwiLCBcImJsYWNrXCIsIFwiYmxhbmNoZWRhbG1vbmRcIiwgXCJibHVlXCIsIFwiYmx1ZXZpb2xldFwiLCBcImJyb3duXCIsXG4gICAgXCJidXJseXdvb2RcIiwgXCJjYWRldGJsdWVcIiwgXCJjaGFydHJldXNlXCIsIFwiY2hvY29sYXRlXCIsIFwiY29yYWxcIiwgXCJjb3JuZmxvd2VyYmx1ZVwiLFxuICAgIFwiY29ybnNpbGtcIiwgXCJjcmltc29uXCIsIFwiY3lhblwiLCBcImRhcmtibHVlXCIsIFwiZGFya2N5YW5cIiwgXCJkYXJrZ29sZGVucm9kXCIsXG4gICAgXCJkYXJrZ3JheVwiLCBcImRhcmtncmVlblwiLCBcImRhcmtraGFraVwiLCBcImRhcmttYWdlbnRhXCIsIFwiZGFya29saXZlZ3JlZW5cIixcbiAgICBcImRhcmtvcmFuZ2VcIiwgXCJkYXJrb3JjaGlkXCIsIFwiZGFya3JlZFwiLCBcImRhcmtzYWxtb25cIiwgXCJkYXJrc2VhZ3JlZW5cIixcbiAgICBcImRhcmtzbGF0ZWJsdWVcIiwgXCJkYXJrc2xhdGVncmF5XCIsIFwiZGFya3R1cnF1b2lzZVwiLCBcImRhcmt2aW9sZXRcIixcbiAgICBcImRlZXBwaW5rXCIsIFwiZGVlcHNreWJsdWVcIiwgXCJkaW1ncmF5XCIsIFwiZG9kZ2VyYmx1ZVwiLCBcImZpcmVicmlja1wiLFxuICAgIFwiZmxvcmFsd2hpdGVcIiwgXCJmb3Jlc3RncmVlblwiLCBcImZ1Y2hzaWFcIiwgXCJnYWluc2Jvcm9cIiwgXCJnaG9zdHdoaXRlXCIsXG4gICAgXCJnb2xkXCIsIFwiZ29sZGVucm9kXCIsIFwiZ3JheVwiLCBcImdyZXlcIiwgXCJncmVlblwiLCBcImdyZWVueWVsbG93XCIsIFwiaG9uZXlkZXdcIixcbiAgICBcImhvdHBpbmtcIiwgXCJpbmRpYW5yZWRcIiwgXCJpbmRpZ29cIiwgXCJpdm9yeVwiLCBcImtoYWtpXCIsIFwibGF2ZW5kZXJcIixcbiAgICBcImxhdmVuZGVyYmx1c2hcIiwgXCJsYXduZ3JlZW5cIiwgXCJsZW1vbmNoaWZmb25cIiwgXCJsaWdodGJsdWVcIiwgXCJsaWdodGNvcmFsXCIsXG4gICAgXCJsaWdodGN5YW5cIiwgXCJsaWdodGdvbGRlbnJvZHllbGxvd1wiLCBcImxpZ2h0Z3JheVwiLCBcImxpZ2h0Z3JlZW5cIiwgXCJsaWdodHBpbmtcIixcbiAgICBcImxpZ2h0c2FsbW9uXCIsIFwibGlnaHRzZWFncmVlblwiLCBcImxpZ2h0c2t5Ymx1ZVwiLCBcImxpZ2h0c2xhdGVncmF5XCIsXG4gICAgXCJsaWdodHN0ZWVsYmx1ZVwiLCBcImxpZ2h0eWVsbG93XCIsIFwibGltZVwiLCBcImxpbWVncmVlblwiLCBcImxpbmVuXCIsIFwibWFnZW50YVwiLFxuICAgIFwibWFyb29uXCIsIFwibWVkaXVtYXF1YW1hcmluZVwiLCBcIm1lZGl1bWJsdWVcIiwgXCJtZWRpdW1vcmNoaWRcIiwgXCJtZWRpdW1wdXJwbGVcIixcbiAgICBcIm1lZGl1bXNlYWdyZWVuXCIsIFwibWVkaXVtc2xhdGVibHVlXCIsIFwibWVkaXVtc3ByaW5nZ3JlZW5cIiwgXCJtZWRpdW10dXJxdW9pc2VcIixcbiAgICBcIm1lZGl1bXZpb2xldHJlZFwiLCBcIm1pZG5pZ2h0Ymx1ZVwiLCBcIm1pbnRjcmVhbVwiLCBcIm1pc3R5cm9zZVwiLCBcIm1vY2Nhc2luXCIsXG4gICAgXCJuYXZham93aGl0ZVwiLCBcIm5hdnlcIiwgXCJvbGRsYWNlXCIsIFwib2xpdmVcIiwgXCJvbGl2ZWRyYWJcIiwgXCJvcmFuZ2VcIiwgXCJvcmFuZ2VyZWRcIixcbiAgICBcIm9yY2hpZFwiLCBcInBhbGVnb2xkZW5yb2RcIiwgXCJwYWxlZ3JlZW5cIiwgXCJwYWxldHVycXVvaXNlXCIsIFwicGFsZXZpb2xldHJlZFwiLFxuICAgIFwicGFwYXlhd2hpcFwiLCBcInBlYWNocHVmZlwiLCBcInBlcnVcIiwgXCJwaW5rXCIsIFwicGx1bVwiLCBcInBvd2RlcmJsdWVcIixcbiAgICBcInB1cnBsZVwiLCBcInJlYmVjY2FwdXJwbGVcIiwgXCJyZWRcIiwgXCJyb3N5YnJvd25cIiwgXCJyb3lhbGJsdWVcIiwgXCJzYWRkbGVicm93blwiLFxuICAgIFwic2FsbW9uXCIsIFwic2FuZHlicm93blwiLCBcInNlYWdyZWVuXCIsIFwic2Vhc2hlbGxcIiwgXCJzaWVubmFcIiwgXCJzaWx2ZXJcIiwgXCJza3libHVlXCIsXG4gICAgXCJzbGF0ZWJsdWVcIiwgXCJzbGF0ZWdyYXlcIiwgXCJzbm93XCIsIFwic3ByaW5nZ3JlZW5cIiwgXCJzdGVlbGJsdWVcIiwgXCJ0YW5cIixcbiAgICBcInRlYWxcIiwgXCJ0aGlzdGxlXCIsIFwidG9tYXRvXCIsIFwidHVycXVvaXNlXCIsIFwidmlvbGV0XCIsIFwid2hlYXRcIiwgXCJ3aGl0ZVwiLFxuICAgIFwid2hpdGVzbW9rZVwiLCBcInllbGxvd1wiLCBcInllbGxvd2dyZWVuXCJcbl0ubWFwKG5hbWUgPT4gKHsgdHlwZTogXCJjb25zdGFudFwiLCBsYWJlbDogbmFtZSB9KSkpO1xuY29uc3QgdGFncyA9IC8qQF9fUFVSRV9fKi9bXG4gICAgXCJhXCIsIFwiYWJiclwiLCBcImFkZHJlc3NcIiwgXCJhcnRpY2xlXCIsIFwiYXNpZGVcIiwgXCJiXCIsIFwiYmRpXCIsIFwiYmRvXCIsIFwiYmxvY2txdW90ZVwiLCBcImJvZHlcIixcbiAgICBcImJyXCIsIFwiYnV0dG9uXCIsIFwiY2FudmFzXCIsIFwiY2FwdGlvblwiLCBcImNpdGVcIiwgXCJjb2RlXCIsIFwiY29sXCIsIFwiY29sZ3JvdXBcIiwgXCJkZFwiLCBcImRlbFwiLFxuICAgIFwiZGV0YWlsc1wiLCBcImRmblwiLCBcImRpYWxvZ1wiLCBcImRpdlwiLCBcImRsXCIsIFwiZHRcIiwgXCJlbVwiLCBcImZpZ2NhcHRpb25cIiwgXCJmaWd1cmVcIiwgXCJmb290ZXJcIixcbiAgICBcImZvcm1cIiwgXCJoZWFkZXJcIiwgXCJoZ3JvdXBcIiwgXCJoMVwiLCBcImgyXCIsIFwiaDNcIiwgXCJoNFwiLCBcImg1XCIsIFwiaDZcIiwgXCJoclwiLCBcImh0bWxcIiwgXCJpXCIsIFwiaWZyYW1lXCIsXG4gICAgXCJpbWdcIiwgXCJpbnB1dFwiLCBcImluc1wiLCBcImtiZFwiLCBcImxhYmVsXCIsIFwibGVnZW5kXCIsIFwibGlcIiwgXCJtYWluXCIsIFwibWV0ZXJcIiwgXCJuYXZcIiwgXCJvbFwiLCBcIm91dHB1dFwiLFxuICAgIFwicFwiLCBcInByZVwiLCBcInJ1YnlcIiwgXCJzZWN0aW9uXCIsIFwic2VsZWN0XCIsIFwic21hbGxcIiwgXCJzb3VyY2VcIiwgXCJzcGFuXCIsIFwic3Ryb25nXCIsIFwic3ViXCIsIFwic3VtbWFyeVwiLFxuICAgIFwic3VwXCIsIFwidGFibGVcIiwgXCJ0Ym9keVwiLCBcInRkXCIsIFwidGVtcGxhdGVcIiwgXCJ0ZXh0YXJlYVwiLCBcInRmb290XCIsIFwidGhcIiwgXCJ0aGVhZFwiLCBcInRyXCIsIFwidVwiLCBcInVsXCJcbl0ubWFwKG5hbWUgPT4gKHsgdHlwZTogXCJ0eXBlXCIsIGxhYmVsOiBuYW1lIH0pKTtcbmNvbnN0IGlkZW50aWZpZXIgPSAvXltcXHctXSovO1xuLyoqXG5DU1MgcHJvcGVydHkgYW5kIHZhbHVlIGtleXdvcmQgY29tcGxldGlvbiBzb3VyY2UuXG4qL1xuY29uc3QgY3NzQ29tcGxldGlvblNvdXJjZSA9IGNvbnRleHQgPT4ge1xuICAgIGxldCB7IHN0YXRlLCBwb3MgfSA9IGNvbnRleHQsIG5vZGUgPSBzeW50YXhUcmVlKHN0YXRlKS5yZXNvbHZlSW5uZXIocG9zLCAtMSk7XG4gICAgaWYgKG5vZGUubmFtZSA9PSBcIlByb3BlcnR5TmFtZVwiKVxuICAgICAgICByZXR1cm4geyBmcm9tOiBub2RlLmZyb20sIG9wdGlvbnM6IHByb3BlcnRpZXMoKSwgdmFsaWRGb3I6IGlkZW50aWZpZXIgfTtcbiAgICBpZiAobm9kZS5uYW1lID09IFwiVmFsdWVOYW1lXCIpXG4gICAgICAgIHJldHVybiB7IGZyb206IG5vZGUuZnJvbSwgb3B0aW9uczogdmFsdWVzLCB2YWxpZEZvcjogaWRlbnRpZmllciB9O1xuICAgIGlmIChub2RlLm5hbWUgPT0gXCJQc2V1ZG9DbGFzc05hbWVcIilcbiAgICAgICAgcmV0dXJuIHsgZnJvbTogbm9kZS5mcm9tLCBvcHRpb25zOiBwc2V1ZG9DbGFzc2VzLCB2YWxpZEZvcjogaWRlbnRpZmllciB9O1xuICAgIGlmIChub2RlLm5hbWUgPT0gXCJUYWdOYW1lXCIpIHtcbiAgICAgICAgZm9yIChsZXQgeyBwYXJlbnQgfSA9IG5vZGU7IHBhcmVudDsgcGFyZW50ID0gcGFyZW50LnBhcmVudClcbiAgICAgICAgICAgIGlmIChwYXJlbnQubmFtZSA9PSBcIkJsb2NrXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZnJvbTogbm9kZS5mcm9tLCBvcHRpb25zOiBwcm9wZXJ0aWVzKCksIHZhbGlkRm9yOiBpZGVudGlmaWVyIH07XG4gICAgICAgIHJldHVybiB7IGZyb206IG5vZGUuZnJvbSwgb3B0aW9uczogdGFncywgdmFsaWRGb3I6IGlkZW50aWZpZXIgfTtcbiAgICB9XG4gICAgaWYgKCFjb250ZXh0LmV4cGxpY2l0KVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgYWJvdmUgPSBub2RlLnJlc29sdmUocG9zKSwgYmVmb3JlID0gYWJvdmUuY2hpbGRCZWZvcmUocG9zKTtcbiAgICBpZiAoYmVmb3JlICYmIGJlZm9yZS5uYW1lID09IFwiOlwiICYmIGFib3ZlLm5hbWUgPT0gXCJQc2V1ZG9DbGFzc1NlbGVjdG9yXCIpXG4gICAgICAgIHJldHVybiB7IGZyb206IHBvcywgb3B0aW9uczogcHNldWRvQ2xhc3NlcywgdmFsaWRGb3I6IGlkZW50aWZpZXIgfTtcbiAgICBpZiAoYmVmb3JlICYmIGJlZm9yZS5uYW1lID09IFwiOlwiICYmIGFib3ZlLm5hbWUgPT0gXCJEZWNsYXJhdGlvblwiIHx8IGFib3ZlLm5hbWUgPT0gXCJBcmdMaXN0XCIpXG4gICAgICAgIHJldHVybiB7IGZyb206IHBvcywgb3B0aW9uczogdmFsdWVzLCB2YWxpZEZvcjogaWRlbnRpZmllciB9O1xuICAgIGlmIChhYm92ZS5uYW1lID09IFwiQmxvY2tcIilcbiAgICAgICAgcmV0dXJuIHsgZnJvbTogcG9zLCBvcHRpb25zOiBwcm9wZXJ0aWVzKCksIHZhbGlkRm9yOiBpZGVudGlmaWVyIH07XG4gICAgcmV0dXJuIG51bGw7XG59O1xuXG4vKipcbkEgbGFuZ3VhZ2UgcHJvdmlkZXIgYmFzZWQgb24gdGhlIFtMZXplciBDU1NcbnBhcnNlcl0oaHR0cHM6Ly9naXRodWIuY29tL2xlemVyLXBhcnNlci9jc3MpLCBleHRlbmRlZCB3aXRoXG5oaWdobGlnaHRpbmcgYW5kIGluZGVudGF0aW9uIGluZm9ybWF0aW9uLlxuKi9cbmNvbnN0IGNzc0xhbmd1YWdlID0gLypAX19QVVJFX18qL0xSTGFuZ3VhZ2UuZGVmaW5lKHtcbiAgICBuYW1lOiBcImNzc1wiLFxuICAgIHBhcnNlcjogLypAX19QVVJFX18qL3BhcnNlci5jb25maWd1cmUoe1xuICAgICAgICBwcm9wczogW1xuICAgICAgICAgICAgLypAX19QVVJFX18qL2luZGVudE5vZGVQcm9wLmFkZCh7XG4gICAgICAgICAgICAgICAgRGVjbGFyYXRpb246IC8qQF9fUFVSRV9fKi9jb250aW51ZWRJbmRlbnQoKVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAvKkBfX1BVUkVfXyovZm9sZE5vZGVQcm9wLmFkZCh7XG4gICAgICAgICAgICAgICAgQmxvY2s6IGZvbGRJbnNpZGVcbiAgICAgICAgICAgIH0pXG4gICAgICAgIF1cbiAgICB9KSxcbiAgICBsYW5ndWFnZURhdGE6IHtcbiAgICAgICAgY29tbWVudFRva2VuczogeyBibG9jazogeyBvcGVuOiBcIi8qXCIsIGNsb3NlOiBcIiovXCIgfSB9LFxuICAgICAgICBpbmRlbnRPbklucHV0OiAvXlxccypcXH0kLyxcbiAgICAgICAgd29yZENoYXJzOiBcIi1cIlxuICAgIH1cbn0pO1xuLyoqXG5MYW5ndWFnZSBzdXBwb3J0IGZvciBDU1MuXG4qL1xuZnVuY3Rpb24gY3NzKCkge1xuICAgIHJldHVybiBuZXcgTGFuZ3VhZ2VTdXBwb3J0KGNzc0xhbmd1YWdlLCBjc3NMYW5ndWFnZS5kYXRhLm9mKHsgYXV0b2NvbXBsZXRlOiBjc3NDb21wbGV0aW9uU291cmNlIH0pKTtcbn1cblxuZXhwb3J0IHsgY3NzLCBjc3NDb21wbGV0aW9uU291cmNlLCBjc3NMYW5ndWFnZSB9O1xuIiwgImltcG9ydCB7IENvbnRleHRUcmFja2VyLCBFeHRlcm5hbFRva2VuaXplciwgTFJQYXJzZXIgfSBmcm9tICdAbGV6ZXIvbHInO1xuaW1wb3J0IHsgc3R5bGVUYWdzLCB0YWdzIH0gZnJvbSAnQGxlemVyL2hpZ2hsaWdodCc7XG5pbXBvcnQgeyBwYXJzZU1peGVkIH0gZnJvbSAnQGxlemVyL2NvbW1vbic7XG5cbi8vIFRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IGxlemVyLWdlbmVyYXRvci4gWW91IHByb2JhYmx5IHNob3VsZG4ndCBlZGl0IGl0LlxuY29uc3Qgc2NyaXB0VGV4dCA9IDUzLFxuICBTdGFydENsb3NlU2NyaXB0VGFnID0gMSxcbiAgc3R5bGVUZXh0ID0gNTQsXG4gIFN0YXJ0Q2xvc2VTdHlsZVRhZyA9IDIsXG4gIHRleHRhcmVhVGV4dCA9IDU1LFxuICBTdGFydENsb3NlVGV4dGFyZWFUYWcgPSAzLFxuICBTdGFydFRhZyA9IDQsXG4gIFN0YXJ0U2NyaXB0VGFnID0gNSxcbiAgU3RhcnRTdHlsZVRhZyA9IDYsXG4gIFN0YXJ0VGV4dGFyZWFUYWcgPSA3LFxuICBTdGFydFNlbGZDbG9zaW5nVGFnID0gOCxcbiAgU3RhcnRDbG9zZVRhZyA9IDksXG4gIE5vTWF0Y2hTdGFydENsb3NlVGFnID0gMTAsXG4gIE1pc21hdGNoZWRTdGFydENsb3NlVGFnID0gMTEsXG4gIG1pc3NpbmdDbG9zZVRhZyA9IDU2LFxuICBJbmNvbXBsZXRlQ2xvc2VUYWcgPSAxMixcbiAgY29tbWVudENvbnRlbnQkMSA9IDU3LFxuICBFbGVtZW50ID0gMTgsXG4gIFNjcmlwdFRleHQgPSAyNyxcbiAgU3R5bGVUZXh0ID0gMzAsXG4gIFRleHRhcmVhVGV4dCA9IDMzLFxuICBPcGVuVGFnID0gMzUsXG4gIERpYWxlY3Rfbm9NYXRjaCA9IDA7XG5cbi8qIEhhbmQtd3JpdHRlbiB0b2tlbml6ZXJzIGZvciBIVE1MLiAqL1xuXG5jb25zdCBzZWxmQ2xvc2VycyA9IHtcbiAgYXJlYTogdHJ1ZSwgYmFzZTogdHJ1ZSwgYnI6IHRydWUsIGNvbDogdHJ1ZSwgY29tbWFuZDogdHJ1ZSxcbiAgZW1iZWQ6IHRydWUsIGZyYW1lOiB0cnVlLCBocjogdHJ1ZSwgaW1nOiB0cnVlLCBpbnB1dDogdHJ1ZSxcbiAga2V5Z2VuOiB0cnVlLCBsaW5rOiB0cnVlLCBtZXRhOiB0cnVlLCBwYXJhbTogdHJ1ZSwgc291cmNlOiB0cnVlLFxuICB0cmFjazogdHJ1ZSwgd2JyOiB0cnVlLCBtZW51aXRlbTogdHJ1ZVxufTtcblxuY29uc3QgaW1wbGljaXRseUNsb3NlZCA9IHtcbiAgZGQ6IHRydWUsIGxpOiB0cnVlLCBvcHRncm91cDogdHJ1ZSwgb3B0aW9uOiB0cnVlLCBwOiB0cnVlLFxuICBycDogdHJ1ZSwgcnQ6IHRydWUsIHRib2R5OiB0cnVlLCB0ZDogdHJ1ZSwgdGZvb3Q6IHRydWUsXG4gIHRoOiB0cnVlLCB0cjogdHJ1ZVxufTtcblxuY29uc3QgY2xvc2VPbk9wZW4gPSB7XG4gIGRkOiB7ZGQ6IHRydWUsIGR0OiB0cnVlfSxcbiAgZHQ6IHtkZDogdHJ1ZSwgZHQ6IHRydWV9LFxuICBsaToge2xpOiB0cnVlfSxcbiAgb3B0aW9uOiB7b3B0aW9uOiB0cnVlLCBvcHRncm91cDogdHJ1ZX0sXG4gIG9wdGdyb3VwOiB7b3B0Z3JvdXA6IHRydWV9LFxuICBwOiB7XG4gICAgYWRkcmVzczogdHJ1ZSwgYXJ0aWNsZTogdHJ1ZSwgYXNpZGU6IHRydWUsIGJsb2NrcXVvdGU6IHRydWUsIGRpcjogdHJ1ZSxcbiAgICBkaXY6IHRydWUsIGRsOiB0cnVlLCBmaWVsZHNldDogdHJ1ZSwgZm9vdGVyOiB0cnVlLCBmb3JtOiB0cnVlLFxuICAgIGgxOiB0cnVlLCBoMjogdHJ1ZSwgaDM6IHRydWUsIGg0OiB0cnVlLCBoNTogdHJ1ZSwgaDY6IHRydWUsXG4gICAgaGVhZGVyOiB0cnVlLCBoZ3JvdXA6IHRydWUsIGhyOiB0cnVlLCBtZW51OiB0cnVlLCBuYXY6IHRydWUsIG9sOiB0cnVlLFxuICAgIHA6IHRydWUsIHByZTogdHJ1ZSwgc2VjdGlvbjogdHJ1ZSwgdGFibGU6IHRydWUsIHVsOiB0cnVlXG4gIH0sXG4gIHJwOiB7cnA6IHRydWUsIHJ0OiB0cnVlfSxcbiAgcnQ6IHtycDogdHJ1ZSwgcnQ6IHRydWV9LFxuICB0Ym9keToge3Rib2R5OiB0cnVlLCB0Zm9vdDogdHJ1ZX0sXG4gIHRkOiB7dGQ6IHRydWUsIHRoOiB0cnVlfSxcbiAgdGZvb3Q6IHt0Ym9keTogdHJ1ZX0sXG4gIHRoOiB7dGQ6IHRydWUsIHRoOiB0cnVlfSxcbiAgdGhlYWQ6IHt0Ym9keTogdHJ1ZSwgdGZvb3Q6IHRydWV9LFxuICB0cjoge3RyOiB0cnVlfVxufTtcblxuZnVuY3Rpb24gbmFtZUNoYXIoY2gpIHtcbiAgcmV0dXJuIGNoID09IDQ1IHx8IGNoID09IDQ2IHx8IGNoID09IDU4IHx8IGNoID49IDY1ICYmIGNoIDw9IDkwIHx8IGNoID09IDk1IHx8IGNoID49IDk3ICYmIGNoIDw9IDEyMiB8fCBjaCA+PSAxNjFcbn1cblxuZnVuY3Rpb24gaXNTcGFjZShjaCkge1xuICByZXR1cm4gY2ggPT0gOSB8fCBjaCA9PSAxMCB8fCBjaCA9PSAxMyB8fCBjaCA9PSAzMlxufVxuXG5sZXQgY2FjaGVkTmFtZSA9IG51bGwsIGNhY2hlZElucHV0ID0gbnVsbCwgY2FjaGVkUG9zID0gMDtcbmZ1bmN0aW9uIHRhZ05hbWVBZnRlcihpbnB1dCwgb2Zmc2V0KSB7XG4gIGxldCBwb3MgPSBpbnB1dC5wb3MgKyBvZmZzZXQ7XG4gIGlmIChjYWNoZWRQb3MgPT0gcG9zICYmIGNhY2hlZElucHV0ID09IGlucHV0KSByZXR1cm4gY2FjaGVkTmFtZVxuICBsZXQgbmV4dCA9IGlucHV0LnBlZWsob2Zmc2V0KTtcbiAgd2hpbGUgKGlzU3BhY2UobmV4dCkpIG5leHQgPSBpbnB1dC5wZWVrKCsrb2Zmc2V0KTtcbiAgbGV0IG5hbWUgPSBcIlwiO1xuICBmb3IgKDs7KSB7XG4gICAgaWYgKCFuYW1lQ2hhcihuZXh0KSkgYnJlYWtcbiAgICBuYW1lICs9IFN0cmluZy5mcm9tQ2hhckNvZGUobmV4dCk7XG4gICAgbmV4dCA9IGlucHV0LnBlZWsoKytvZmZzZXQpO1xuICB9XG4gIC8vIFVuZGVmaW5lZCB0byBzaWduYWwgdGhlcmUncyBhIDw/IG9yIDwhLCBudWxsIGZvciBqdXN0IG1pc3NpbmdcbiAgY2FjaGVkSW5wdXQgPSBpbnB1dDsgY2FjaGVkUG9zID0gcG9zO1xuICByZXR1cm4gY2FjaGVkTmFtZSA9IG5hbWUgPyBuYW1lLnRvTG93ZXJDYXNlKCkgOiBuZXh0ID09IHF1ZXN0aW9uIHx8IG5leHQgPT0gYmFuZyA/IHVuZGVmaW5lZCA6IG51bGxcbn1cblxuY29uc3QgbGVzc1RoYW4gPSA2MCwgZ3JlYXRlclRoYW4gPSA2Miwgc2xhc2ggPSA0NywgcXVlc3Rpb24gPSA2MywgYmFuZyA9IDMzLCBkYXNoID0gNDU7XG5cbmZ1bmN0aW9uIEVsZW1lbnRDb250ZXh0KG5hbWUsIHBhcmVudCkge1xuICB0aGlzLm5hbWUgPSBuYW1lO1xuICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgdGhpcy5oYXNoID0gcGFyZW50ID8gcGFyZW50Lmhhc2ggOiAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IG5hbWUubGVuZ3RoOyBpKyspIHRoaXMuaGFzaCArPSAodGhpcy5oYXNoIDw8IDQpICsgbmFtZS5jaGFyQ29kZUF0KGkpICsgKG5hbWUuY2hhckNvZGVBdChpKSA8PCA4KTtcbn1cblxuY29uc3Qgc3RhcnRUYWdUZXJtcyA9IFtTdGFydFRhZywgU3RhcnRTZWxmQ2xvc2luZ1RhZywgU3RhcnRTY3JpcHRUYWcsIFN0YXJ0U3R5bGVUYWcsIFN0YXJ0VGV4dGFyZWFUYWddO1xuXG5jb25zdCBlbGVtZW50Q29udGV4dCA9IG5ldyBDb250ZXh0VHJhY2tlcih7XG4gIHN0YXJ0OiBudWxsLFxuICBzaGlmdChjb250ZXh0LCB0ZXJtLCBzdGFjaywgaW5wdXQpIHtcbiAgICByZXR1cm4gc3RhcnRUYWdUZXJtcy5pbmRleE9mKHRlcm0pID4gLTEgPyBuZXcgRWxlbWVudENvbnRleHQodGFnTmFtZUFmdGVyKGlucHV0LCAxKSB8fCBcIlwiLCBjb250ZXh0KSA6IGNvbnRleHRcbiAgfSxcbiAgcmVkdWNlKGNvbnRleHQsIHRlcm0pIHtcbiAgICByZXR1cm4gdGVybSA9PSBFbGVtZW50ICYmIGNvbnRleHQgPyBjb250ZXh0LnBhcmVudCA6IGNvbnRleHRcbiAgfSxcbiAgcmV1c2UoY29udGV4dCwgbm9kZSwgc3RhY2ssIGlucHV0KSB7XG4gICAgbGV0IHR5cGUgPSBub2RlLnR5cGUuaWQ7XG4gICAgcmV0dXJuIHR5cGUgPT0gU3RhcnRUYWcgfHwgdHlwZSA9PSBPcGVuVGFnXG4gICAgICA/IG5ldyBFbGVtZW50Q29udGV4dCh0YWdOYW1lQWZ0ZXIoaW5wdXQsIDEpIHx8IFwiXCIsIGNvbnRleHQpIDogY29udGV4dFxuICB9LFxuICBoYXNoKGNvbnRleHQpIHsgcmV0dXJuIGNvbnRleHQgPyBjb250ZXh0Lmhhc2ggOiAwIH0sXG4gIHN0cmljdDogZmFsc2Vcbn0pO1xuXG5jb25zdCB0YWdTdGFydCA9IG5ldyBFeHRlcm5hbFRva2VuaXplcigoaW5wdXQsIHN0YWNrKSA9PiB7XG4gIGlmIChpbnB1dC5uZXh0ICE9IGxlc3NUaGFuKSB7XG4gICAgLy8gRW5kIG9mIGZpbGUsIGNsb3NlIGFueSBvcGVuIHRhZ3NcbiAgICBpZiAoaW5wdXQubmV4dCA8IDAgJiYgc3RhY2suY29udGV4dCkgaW5wdXQuYWNjZXB0VG9rZW4obWlzc2luZ0Nsb3NlVGFnKTtcbiAgICByZXR1cm5cbiAgfVxuICBpbnB1dC5hZHZhbmNlKCk7XG4gIGxldCBjbG9zZSA9IGlucHV0Lm5leHQgPT0gc2xhc2g7XG4gIGlmIChjbG9zZSkgaW5wdXQuYWR2YW5jZSgpO1xuICBsZXQgbmFtZSA9IHRhZ05hbWVBZnRlcihpbnB1dCwgMCk7XG4gIGlmIChuYW1lID09PSB1bmRlZmluZWQpIHJldHVyblxuICBpZiAoIW5hbWUpIHJldHVybiBpbnB1dC5hY2NlcHRUb2tlbihjbG9zZSA/IEluY29tcGxldGVDbG9zZVRhZyA6IFN0YXJ0VGFnKVxuXG4gIGxldCBwYXJlbnQgPSBzdGFjay5jb250ZXh0ID8gc3RhY2suY29udGV4dC5uYW1lIDogbnVsbDtcbiAgaWYgKGNsb3NlKSB7XG4gICAgaWYgKG5hbWUgPT0gcGFyZW50KSByZXR1cm4gaW5wdXQuYWNjZXB0VG9rZW4oU3RhcnRDbG9zZVRhZylcbiAgICBpZiAocGFyZW50ICYmIGltcGxpY2l0bHlDbG9zZWRbcGFyZW50XSkgcmV0dXJuIGlucHV0LmFjY2VwdFRva2VuKG1pc3NpbmdDbG9zZVRhZywgLTIpXG4gICAgaWYgKHN0YWNrLmRpYWxlY3RFbmFibGVkKERpYWxlY3Rfbm9NYXRjaCkpIHJldHVybiBpbnB1dC5hY2NlcHRUb2tlbihOb01hdGNoU3RhcnRDbG9zZVRhZylcbiAgICBmb3IgKGxldCBjeCA9IHN0YWNrLmNvbnRleHQ7IGN4OyBjeCA9IGN4LnBhcmVudCkgaWYgKGN4Lm5hbWUgPT0gbmFtZSkgcmV0dXJuXG4gICAgaW5wdXQuYWNjZXB0VG9rZW4oTWlzbWF0Y2hlZFN0YXJ0Q2xvc2VUYWcpO1xuICB9IGVsc2Uge1xuICAgIGlmIChuYW1lID09IFwic2NyaXB0XCIpIHJldHVybiBpbnB1dC5hY2NlcHRUb2tlbihTdGFydFNjcmlwdFRhZylcbiAgICBpZiAobmFtZSA9PSBcInN0eWxlXCIpIHJldHVybiBpbnB1dC5hY2NlcHRUb2tlbihTdGFydFN0eWxlVGFnKVxuICAgIGlmIChuYW1lID09IFwidGV4dGFyZWFcIikgcmV0dXJuIGlucHV0LmFjY2VwdFRva2VuKFN0YXJ0VGV4dGFyZWFUYWcpXG4gICAgaWYgKHNlbGZDbG9zZXJzLmhhc093blByb3BlcnR5KG5hbWUpKSByZXR1cm4gaW5wdXQuYWNjZXB0VG9rZW4oU3RhcnRTZWxmQ2xvc2luZ1RhZylcbiAgICBpZiAocGFyZW50ICYmIGNsb3NlT25PcGVuW3BhcmVudF0gJiYgY2xvc2VPbk9wZW5bcGFyZW50XVtuYW1lXSkgaW5wdXQuYWNjZXB0VG9rZW4obWlzc2luZ0Nsb3NlVGFnLCAtMSk7XG4gICAgZWxzZSBpbnB1dC5hY2NlcHRUb2tlbihTdGFydFRhZyk7XG4gIH1cbn0sIHtjb250ZXh0dWFsOiB0cnVlfSk7XG5cbmNvbnN0IGNvbW1lbnRDb250ZW50ID0gbmV3IEV4dGVybmFsVG9rZW5pemVyKGlucHV0ID0+IHtcbiAgZm9yIChsZXQgZGFzaGVzID0gMCwgaSA9IDA7OyBpKyspIHtcbiAgICBpZiAoaW5wdXQubmV4dCA8IDApIHtcbiAgICAgIGlmIChpKSBpbnB1dC5hY2NlcHRUb2tlbihjb21tZW50Q29udGVudCQxKTtcbiAgICAgIGJyZWFrXG4gICAgfVxuICAgIGlmIChpbnB1dC5uZXh0ID09IGRhc2gpIHtcbiAgICAgIGRhc2hlcysrO1xuICAgIH0gZWxzZSBpZiAoaW5wdXQubmV4dCA9PSBncmVhdGVyVGhhbiAmJiBkYXNoZXMgPj0gMikge1xuICAgICAgaWYgKGkgPiAzKSBpbnB1dC5hY2NlcHRUb2tlbihjb21tZW50Q29udGVudCQxLCAtMik7XG4gICAgICBicmVha1xuICAgIH0gZWxzZSB7XG4gICAgICBkYXNoZXMgPSAwO1xuICAgIH1cbiAgICBpbnB1dC5hZHZhbmNlKCk7XG4gIH1cbn0pO1xuXG5mdW5jdGlvbiBjb250ZW50VG9rZW5pemVyKHRhZywgdGV4dFRva2VuLCBlbmRUb2tlbikge1xuICBsZXQgbGFzdFN0YXRlID0gMiArIHRhZy5sZW5ndGg7XG4gIHJldHVybiBuZXcgRXh0ZXJuYWxUb2tlbml6ZXIoaW5wdXQgPT4ge1xuICAgIC8vIHN0YXRlIG1lYW5zOlxuICAgIC8vIC0gMCBub3RoaW5nIG1hdGNoZWRcbiAgICAvLyAtIDEgJzwnIG1hdGNoZWRcbiAgICAvLyAtIDIgJzwvJyArIHBvc3NpYmx5IHdoaXRlc3BhY2UgbWF0Y2hlZFxuICAgIC8vIC0gMy0oMSt0YWcubGVuZ3RoKSBwYXJ0IG9mIHRoZSB0YWcgbWF0Y2hlZFxuICAgIC8vIC0gbGFzdFN0YXRlIHdob2xlIHRhZyArIHBvc3NpYmx5IHdoaXRlc3BhY2UgbWF0Y2hlZFxuICAgIGZvciAobGV0IHN0YXRlID0gMCwgbWF0Y2hlZExlbiA9IDAsIGkgPSAwOzsgaSsrKSB7XG4gICAgICBpZiAoaW5wdXQubmV4dCA8IDApIHtcbiAgICAgICAgaWYgKGkpIGlucHV0LmFjY2VwdFRva2VuKHRleHRUb2tlbik7XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBpZiAoc3RhdGUgPT0gMCAmJiBpbnB1dC5uZXh0ID09IGxlc3NUaGFuIHx8XG4gICAgICAgICAgc3RhdGUgPT0gMSAmJiBpbnB1dC5uZXh0ID09IHNsYXNoIHx8XG4gICAgICAgICAgc3RhdGUgPj0gMiAmJiBzdGF0ZSA8IGxhc3RTdGF0ZSAmJiBpbnB1dC5uZXh0ID09IHRhZy5jaGFyQ29kZUF0KHN0YXRlIC0gMikpIHtcbiAgICAgICAgc3RhdGUrKztcbiAgICAgICAgbWF0Y2hlZExlbisrO1xuICAgICAgfSBlbHNlIGlmICgoc3RhdGUgPT0gMiB8fCBzdGF0ZSA9PSBsYXN0U3RhdGUpICYmIGlzU3BhY2UoaW5wdXQubmV4dCkpIHtcbiAgICAgICAgbWF0Y2hlZExlbisrO1xuICAgICAgfSBlbHNlIGlmIChzdGF0ZSA9PSBsYXN0U3RhdGUgJiYgaW5wdXQubmV4dCA9PSBncmVhdGVyVGhhbikge1xuICAgICAgICBpZiAoaSA+IG1hdGNoZWRMZW4pXG4gICAgICAgICAgaW5wdXQuYWNjZXB0VG9rZW4odGV4dFRva2VuLCAtbWF0Y2hlZExlbik7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICBpbnB1dC5hY2NlcHRUb2tlbihlbmRUb2tlbiwgLShtYXRjaGVkTGVuIC0gMikpO1xuICAgICAgICBicmVha1xuICAgICAgfSBlbHNlIGlmICgoaW5wdXQubmV4dCA9PSAxMCAvKiAnXFxuJyAqLyB8fCBpbnB1dC5uZXh0ID09IDEzIC8qICdcXHInICovKSAmJiBpKSB7XG4gICAgICAgIGlucHV0LmFjY2VwdFRva2VuKHRleHRUb2tlbiwgMSk7XG4gICAgICAgIGJyZWFrXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0ZSA9IG1hdGNoZWRMZW4gPSAwO1xuICAgICAgfVxuICAgICAgaW5wdXQuYWR2YW5jZSgpO1xuICAgIH1cbiAgfSlcbn1cblxuY29uc3Qgc2NyaXB0VG9rZW5zID0gY29udGVudFRva2VuaXplcihcInNjcmlwdFwiLCBzY3JpcHRUZXh0LCBTdGFydENsb3NlU2NyaXB0VGFnKTtcblxuY29uc3Qgc3R5bGVUb2tlbnMgPSBjb250ZW50VG9rZW5pemVyKFwic3R5bGVcIiwgc3R5bGVUZXh0LCBTdGFydENsb3NlU3R5bGVUYWcpO1xuXG5jb25zdCB0ZXh0YXJlYVRva2VucyA9IGNvbnRlbnRUb2tlbml6ZXIoXCJ0ZXh0YXJlYVwiLCB0ZXh0YXJlYVRleHQsIFN0YXJ0Q2xvc2VUZXh0YXJlYVRhZyk7XG5cbmNvbnN0IGh0bWxIaWdobGlnaHRpbmcgPSBzdHlsZVRhZ3Moe1xuICBcIlRleHQgUmF3VGV4dFwiOiB0YWdzLmNvbnRlbnQsXG4gIFwiU3RhcnRUYWcgU3RhcnRDbG9zZVRhZyBTZWxmQ2xvc2VyRW5kVGFnIEVuZFRhZyBTZWxmQ2xvc2VFbmRUYWdcIjogdGFncy5hbmdsZUJyYWNrZXQsXG4gIFRhZ05hbWU6IHRhZ3MudGFnTmFtZSxcbiAgXCJNaXNtYXRjaGVkQ2xvc2VUYWcvVGFnTmFtZVwiOiBbdGFncy50YWdOYW1lLCAgdGFncy5pbnZhbGlkXSxcbiAgQXR0cmlidXRlTmFtZTogdGFncy5hdHRyaWJ1dGVOYW1lLFxuICBcIkF0dHJpYnV0ZVZhbHVlIFVucXVvdGVkQXR0cmlidXRlVmFsdWVcIjogdGFncy5hdHRyaWJ1dGVWYWx1ZSxcbiAgSXM6IHRhZ3MuZGVmaW5pdGlvbk9wZXJhdG9yLFxuICBcIkVudGl0eVJlZmVyZW5jZSBDaGFyYWN0ZXJSZWZlcmVuY2VcIjogdGFncy5jaGFyYWN0ZXIsXG4gIENvbW1lbnQ6IHRhZ3MuYmxvY2tDb21tZW50LFxuICBQcm9jZXNzaW5nSW5zdDogdGFncy5wcm9jZXNzaW5nSW5zdHJ1Y3Rpb24sXG4gIERvY3R5cGVEZWNsOiB0YWdzLmRvY3VtZW50TWV0YVxufSk7XG5cbi8vIFRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IGxlemVyLWdlbmVyYXRvci4gWW91IHByb2JhYmx5IHNob3VsZG4ndCBlZGl0IGl0LlxuY29uc3QgcGFyc2VyID0gTFJQYXJzZXIuZGVzZXJpYWxpemUoe1xuICB2ZXJzaW9uOiAxNCxcbiAgc3RhdGVzOiBcIix4T1ZPeE9PTyFXUSFiTycjQ29PIV1RIWJPJyNDeU8hYlEhYk8nI0N8TyFnUSFiTycjRFBPIWxRIWJPJyNEUk8hcU9YTycjQ25PIXxPWU8nI0NuTyNYT1tPJyNDbk8kZU94TycjQ25PT09XJyNDbicjQ25PJGxPIXJPJyNEU08kdFEhYk8nI0RVTyR5USFiTycjRFZPT09XJyNEaicjRGpPT09XJyNEWCcjRFhRVk94T09PJU9RI3RPLDU5Wk8lV1EjdE8sNTllTyVgUSN0Tyw1OWhPJWhRI3RPLDU5a08lcFEjdE8sNTltT09PWCcjRF0nI0RdTyV4T1hPJyNDd08mVE9YTyw1OVlPT09ZJyNEXicjRF5PJl1PWU8nI0N6TyZoT1lPLDU5WU9PT1snI0RfJyNEX08mcE9bTycjQ31PJntPW08sNTlZT09PVycjRGAnI0RgTydUT3hPLDU5WU8nW1EhYk8nI0RRT09PVyw1OVksNTlZT09PYCcjRGEnI0RhTydhTyFyTyw1OW5PT09XLDU5biw1OW5PJ2lRIWJPLDU5cE8nblEhYk8sNTlxT09PVy1FN1YtRTdWTydzUSN0TycjQ3FPT1FPJyNEWScjRFlPKE9RI3RPMUcudU9PT1gxRy51MUcudU8oV1EjdE8xRy9QT09PWTFHL1AxRy9QTyhgUSN0TzFHL1NPT09bMUcvUzFHL1NPKGhRI3RPMUcvVk9PT1cxRy9WMUcvVk8ocFEjdE8xRy9YT09PVzFHL1gxRy9YT09PWC1FN1otRTdaTyh4USFiTycjQ3hPT09XMUcudDFHLnRPT09ZLUU3Wy1FN1tPKH1RIWJPJyNDe09PT1stRTddLUU3XU8pU1EhYk8nI0RPT09PVy1FN14tRTdeTylYUSFiTyw1OWxPT09gLUU3Xy1FN19PT09XMUcvWTFHL1lPT09XMUcvWzFHL1tPT09XMUcvXTFHL11PKV5RJmpPLDU5XU9PUU8tRTdXLUU3V09PT1g3KyRhNyskYU9PT1k3KyRrNyska09PT1s3KyRuNyskbk9PT1c3KyRxNyskcU9PT1c3KyRzNyskc08paVEhYk8sNTlkTyluUSFiTyw1OWdPKXNRIWJPLDU5ak9PT1cxRy9XMUcvV08peE8sVU8nI0N0TypaTzdbTycjQ3RPT1FPMUcudzFHLndPT09XMUcvTzFHL09PT09XMUcvUjFHL1JPT09XMUcvVTFHL1VPT09PJyNEWicjRFpPKmxPLFVPLDU5YE9PUU8sNTlgLDU5YE9PT08nI0RbJyNEW08qfU83W08sNTlgT09PTy1FN1gtRTdYT09RTzFHLnoxRy56T09PTy1FN1ktRTdZXCIsXG4gIHN0YXRlRGF0YTogXCIraH5PIV1PU35PU1NPVFBPVVFPVlJPV1RPWV1PWltPW15PXl5PX15PYF5PYV5Pd15Pel9PIWNaT35PZGFPfk9kYk9+T2RjT35PZGRPfk9kZU9+TyFWZk9Qa1AhWWtQfk8hV2lPUW5QIVluUH5PIVhsT1JxUCFZcVB+T1NTT1RQT1VRT1ZST1dUT1hxT1ldT1pbT1teT15eT19eT2BeT2FeT3deTyFjWk9+TyFZck9+UCNkTyFac08hZHVPfk9kdk9+T2R3T35PZnlPanxPfk9meU9qIU9Pfk9meU9qIVFPfk9meU9qIVNPfk9meU9qIVVPfk8hVmZPUGtYIVlrWH5PUCFXTyFZIVhPfk8hV2lPUW5YIVluWH5PUSFaTyFZIVhPfk8hWGxPUnFYIVlxWH5PUiFdTyFZIVhPfk8hWSFYT35QI2RPZCFfT35PIVpzTyFkIWFPfk9qIWJPfk9qIWNPfk9nIWRPZmVYamVYfk9meU9qIWZPfk9meU9qIWdPfk9meU9qIWhPfk9meU9qIWlPfk9meU9qIWpPfk9kIWtPfk9kIWxPfk9kIW1Pfk9qIW5Pfk9pIXFPIV8hb08hYSFwT35PaiFyT35PaiFzT35PaiF0T35PXyF1T2AhdU9hIXVPIV8hd08hYCF1T35PXyF4T2AheE9hIXhPIWEhd08hYiF4T35PXyF1T2AhdU9hIXVPIV8he08hYCF1T35PXyF4T2AheE9hIXhPIWEhe08hYiF4T35PYF9hIWN3eiFjflwiLFxuICBnb3RvOiBcIiVvIV9QUFBQUFBQUFBQUFBQUFBQUFAhYCFmUCFsUFAheFBQIXsjTyNSI1gjWyNfI2UjaCNrI3EjdyFgUCFgIWBQI30kVCRrJHEkdyR9JVQlWiVhUFBQUFBQUFAlZ1heT1hgcFhVT1hgcGV6YWJjZGV7fSFQIVIhVFIhcSFkUmhVUiFYaFhWT1hgcFJrVlIhWGtYV09YYHBSbldSIVhuWFhPWGBwUXJYUiFYcFhZT1hgcFFgT1J4YFF7YVF9YlEhUGNRIVJkUSFUZVohZXt9IVAhUiFUUSF2IW9SIXohdlEheSFwUiF8IXlRZ1VSIVZnUWpWUiFZalFtV1IhW21RcFhSIV5wUXRaUiFgdFNfT2BUb1hwXCIsXG4gIG5vZGVOYW1lczogXCJcdTI2QTAgU3RhcnRDbG9zZVRhZyBTdGFydENsb3NlVGFnIFN0YXJ0Q2xvc2VUYWcgU3RhcnRUYWcgU3RhcnRUYWcgU3RhcnRUYWcgU3RhcnRUYWcgU3RhcnRUYWcgU3RhcnRDbG9zZVRhZyBTdGFydENsb3NlVGFnIFN0YXJ0Q2xvc2VUYWcgSW5jb21wbGV0ZUNsb3NlVGFnIERvY3VtZW50IFRleHQgRW50aXR5UmVmZXJlbmNlIENoYXJhY3RlclJlZmVyZW5jZSBJbnZhbGlkRW50aXR5IEVsZW1lbnQgT3BlblRhZyBUYWdOYW1lIEF0dHJpYnV0ZSBBdHRyaWJ1dGVOYW1lIElzIEF0dHJpYnV0ZVZhbHVlIFVucXVvdGVkQXR0cmlidXRlVmFsdWUgRW5kVGFnIFNjcmlwdFRleHQgQ2xvc2VUYWcgT3BlblRhZyBTdHlsZVRleHQgQ2xvc2VUYWcgT3BlblRhZyBUZXh0YXJlYVRleHQgQ2xvc2VUYWcgT3BlblRhZyBDbG9zZVRhZyBTZWxmQ2xvc2luZ1RhZyBDb21tZW50IFByb2Nlc3NpbmdJbnN0IE1pc21hdGNoZWRDbG9zZVRhZyBDbG9zZVRhZyBEb2N0eXBlRGVjbFwiLFxuICBtYXhUZXJtOiA2NixcbiAgY29udGV4dDogZWxlbWVudENvbnRleHQsXG4gIG5vZGVQcm9wczogW1xuICAgIFtcImNsb3NlZEJ5XCIsIC0xMSwxLDIsMyw0LDUsNiw3LDgsOSwxMCwxMSxcIkVuZFRhZ1wiLC00LDE5LDI5LDMyLDM1LFwiQ2xvc2VUYWdcIl0sXG4gICAgW1wiZ3JvdXBcIiwgLTksMTIsMTUsMTYsMTcsMTgsMzgsMzksNDAsNDEsXCJFbnRpdHlcIiwxNCxcIkVudGl0eSBUZXh0Q29udGVudFwiLC0zLDI3LDMwLDMzLFwiVGV4dENvbnRlbnQgRW50aXR5XCJdLFxuICAgIFtcIm9wZW5lZEJ5XCIsIDI2LFwiU3RhcnRUYWcgU3RhcnRDbG9zZVRhZ1wiLC00LDI4LDMxLDM0LDM2LFwiT3BlblRhZ1wiXVxuICBdLFxuICBwcm9wU291cmNlczogW2h0bWxIaWdobGlnaHRpbmddLFxuICBza2lwcGVkTm9kZXM6IFswXSxcbiAgcmVwZWF0Tm9kZUNvdW50OiA5LFxuICB0b2tlbkRhdGE6IFwiISNiIWFSIVdPWCRrWFkpc1laKXNaXSRrXV4pc15wJGtwcSlzcXIka3JzKnpzdiRrdncrZHd4Mnl4fSRrfSFPM2YhTyFQJGshUCFRN18hUSFbJGshWyFdOHUhXSFeJGshXiFfPmIhXyFgISFwIWAhYThUIWEhYyRrIWMhfTh1IX0jUiRrI1IjUzh1I1MjVCRrI1Qjbzh1I28kZiRrJGYkZyZSJGclVyRrJVclbzh1JW8lcCRrJXAmYTh1JmEmYiRrJmIxcDh1MXA0VSRrNFU0ZDh1NGQ0ZSRrNGUkSVM4dSRJUyRJYCRrJElgJEliOHUkSWIkS2gkayRLaCUjdDh1JSN0Ji94JGsmL3gmRXQ4dSZFdCZGViRrJkZWOydTOHU7J1M7Omo8dDs6aj8mciRrPyZyP0FoOHU/QWg/Qlkkaz9CWT9Nbjh1P01ufiRrIVokdmNeUGlXIWBgIWJwT1gka1haJlJaXSRrXV4mUl5wJGtwcSZScXIka3JzJnFzdiRrdncpUnd4J3J4IVAkayFQIVEmUiFRIV4kayFeIV8oayFfIWEmUiFhJGYkayRmJGcmUiRnfiRrIVImW1ZeUCFgYCFicE9yJlJycyZxc3YmUnd4J3J4IV4mUiFeIV8oayFffiZScSZ4VF5QIWJwT3YmcXd4J1h4IV4mcSFeIV8nZyFffiZxUCdeUl5QT3YnWHchXidYIV9+J1hwJ2xRIWJwT3YnZ3h+J2dhJ3lVXlAhYGBPcidycnMnWHN2J3J3IV4nciFeIV8oXSFffidyYChiUiFgYE9yKF1zdihdd34oXSFRKHJUIWBgIWJwT3Ioa3JzJ2dzdihrd3goXXh+KGtXKVdYaVdPWClSWl0pUl5wKVJxcilSc3cpUnghUClSIVEhXilSIWEkZilSJGd+KVIhYSpPXl5QIWBgIWJwIV1eT1gmUlhZKXNZWilzWl0mUl1eKXNecCZScHEpc3FyJlJycyZxc3YmUnd4J3J4IV4mUiFeIV8oayFffiZSIVorVFQhX2heUCFicE92JnF3eCdYeCFeJnEhXiFfJ2chX34mcSFaK2tiaVdhIVJPWCxzWFouUVpdLHNdXi5RXnAsc3FyLHNycy5Rc3QvXXR3LHN3eC5ReCFQLHMhUCFRLlEhUSFdLHMhXSFeKVIhXiFhLlEhYSRmLHMkZiRnLlEkZ34scyFaLHhiaVdPWCxzWFouUVpdLHNdXi5RXnAsc3FyLHNycy5Rc3QpUnR3LHN3eC5ReCFQLHMhUCFRLlEhUSFdLHMhXSFeLmkhXiFhLlEhYSRmLHMkZiRnLlEkZ34scyFSLlRUT3AuUXFzLlF0IV0uUSFdIV4uZCFefi5RIVIuaU9fIVIhWi5wWGlXXyFST1gpUlpdKVJecClScXIpUnN3KVJ4IVApUiFRIV4pUiFhJGYpUiRnfilSIVovYmFpV09YMGdYWjFxWl0wZ11eMXFecDBncXIwZ3JzMXFzdzBnd3gxcXghUDBnIVAhUTFxIVEhXTBnIV0hXilSIV4hYTFxIWEkZjBnJGYkZzFxJGd+MGchWjBsYWlXT1gwZ1haMXFaXTBnXV4xcV5wMGdxcjBncnMxcXN3MGd3eDFxeCFQMGchUCFRMXEhUSFdMGchXSFeMlYhXiFhMXEhYSRmMGckZiRnMXEkZ34wZyFSMXRTT3AxcXEhXTFxIV0hXjJRIV5+MXEhUjJWT2AhUiFaMl5YaVdgIVJPWClSWl0pUl5wKVJxcilSc3cpUnghUClSIVEhXilSIWEkZilSJGd+KVIhWjNTVSFheF5QIWBgT3IncnJzJ1hzdidydyFeJ3IhXiFfKF0hX34nciFdM3FlXlBpVyFgYCFicE9YJGtYWiZSWl0ka11eJlJecCRrcHEmUnFyJGtycyZxc3Yka3Z3KVJ3eCdyeH0ka30hTzVTIU8hUCRrIVAhUSZSIVEhXiRrIV4hXyhrIV8hYSZSIWEkZiRrJGYkZyZSJGd+JGshXTVfZF5QaVchYGAhYnBPWCRrWFomUlpdJGtdXiZSXnAka3BxJlJxciRrcnMmcXN2JGt2dylSd3gncnghUCRrIVAhUSZSIVEhXiRrIV4hXyhrIV8hYCZSIWAhYTZtIWEkZiRrJGYkZyZSJGd+JGshVDZ4Vl5QIWBgIWJwIWRRT3ImUnJzJnFzdiZSd3gncnghXiZSIV4hXyhrIV9+JlIhWDdoWF5QIWBgIWJwT3ImUnJzJnFzdiZSd3gncnghXiZSIV4hXyhrIV8hYCZSIWAhYThUIWF+JlIhWDhgVmpVXlAhYGAhYnBPciZScnMmcXN2JlJ3eCdyeCFeJlIhXiFfKGshX34mUiFhOVUhWWZTZFFeUGlXIWBgIWJwT1gka1haJlJaXSRrXV4mUl5wJGtwcSZScXIka3JzJnFzdiRrdncpUnd4J3J4fSRrfSFPOHUhTyFQOHUhUCFRJlIhUSFbOHUhWyFdOHUhXSFeJGshXiFfKGshXyFhJlIhYSFjJGshYyF9OHUhfSNSJGsjUiNTOHUjUyNUJGsjVCNvOHUjbyRmJGskZiRnJlIkZyR9JGskfSVPOHUlTyVXJGslVyVvOHUlbyVwJGslcCZhOHUmYSZiJGsmYjFwOHUxcDRVOHU0VTRkOHU0ZDRlJGs0ZSRJUzh1JElTJElgJGskSWAkSWI4dSRJYiRKZSRrJEplJEpnOHUkSmckS2gkayRLaCUjdDh1JSN0Ji94JGsmL3gmRXQ4dSZFdCZGViRrJkZWOydTOHU7J1M7Omo8dDs6aj8mciRrPyZyP0FoOHU/QWg/Qlkkaz9CWT9Nbjh1P01ufiRrIWE9UGVeUGlXIWBgIWJwT1gka1haJlJaXSRrXV4mUl5wJGtwcSZScXIka3JzJnFzdiRrdncpUnd4J3J4IVAkayFQIVEmUiFRIV4kayFeIV8oayFfIWEmUiFhJGYkayRmJGcmUiRnOz1gJGs7PWA8JWw4dTwlbH4kayFSPmlXIWBgIWJwT3Eoa3FyP1Jycydnc3Yoa3d4KF14IWEoayFhIWJLaiFifihrIVI/WVohYGAhYnBPcihrcnMnZ3N2KGt3eChdeH0oa30hTz97IU8hZihrIWYhZ0FSIWcjVyhrI1cjWEd6I1h+KGshUkBTViFgYCFicE9yKGtycydnc3Yoa3d4KF14fShrfSFPQGkhT34oayFSQHJUIWBgIWJwIWNQT3Ioa3JzJ2dzdihrd3goXXh+KGshUkFZViFgYCFicE9yKGtycydnc3Yoa3d4KF14IXEoayFxIXJBbyFyfihrIVJBdlYhYGAhYnBPcihrcnMnZ3N2KGt3eChdeCFlKGshZSFmQl0hZn4oayFSQmRWIWBgIWJwT3Ioa3JzJ2dzdihrd3goXXghdihrIXYhd0J5IXd+KGshUkNRViFgYCFicE9yKGtycydnc3Yoa3d4KF14IXsoayF7IXxDZyF8fihrIVJDblYhYGAhYnBPcihrcnMnZ3N2KGt3eChdeCFyKGshciFzRFQhc34oayFSRFtWIWBgIWJwT3Ioa3JzJ2dzdihrd3goXXghZyhrIWchaERxIWh+KGshUkR4VyFgYCFicE9yRHFyc0Vic3ZEcXZ3RXZ3eEZmeCFgRHEhYCFhR2IhYX5EcXFFZ1QhYnBPdkVidnhFdnghYEViIWAhYUZYIWF+RWJQRXlSTyFgRXYhYCFhRlMhYX5FdlBGWE96UHFGYFEhYnB6UE92J2d4fidnYUZrViFgYE9yRmZyc0V2c3ZGZnZ3RXZ3IWBGZiFgIWFHUSFhfkZmYUdYUiFgYHpQT3IoXXN2KF13fihdIVJHa1QhYGAhYnB6UE9yKGtycydnc3Yoa3d4KF14fihrIVJIUlYhYGAhYnBPcihrcnMnZ3N2KGt3eChdeCNjKGsjYyNkSGgjZH4oayFSSG9WIWBgIWJwT3Ioa3JzJ2dzdihrd3goXXgjVihrI1YjV0lVI1d+KGshUkldViFgYCFicE9yKGtycydnc3Yoa3d4KF14I2goayNoI2lJciNpfihrIVJJeVYhYGAhYnBPcihrcnMnZ3N2KGt3eChdeCNtKGsjbSNuSmAjbn4oayFSSmdWIWBgIWJwT3Ioa3JzJ2dzdihrd3goXXgjZChrI2QjZUp8I2V+KGshUktUViFgYCFicE9yKGtycydnc3Yoa3d4KF14I1goayNYI1lEcSNZfihrIVJLcVchYGAhYnBPcktqcnNMWnN2S2p2d0xvd3hOUHghYUtqIWEhYiEgZyFifktqcUxgVCFicE92TFp2eExveCFhTFohYSFiTV4hYn5MWlBMclJPIWFMbyFhIWJMeyFifkxvUE1PUk8hYExvIWAhYU1YIWF+TG9QTV5Pd1BxTWNUIWJwT3ZMWnZ4TG94IWBMWiFgIWFNciFhfkxacU15USFicHdQT3YnZ3h+J2dhTlVWIWBgT3JOUHJzTG9zdk5QdndMb3chYU5QIWEhYk5rIWJ+TlBhTnBWIWBgT3JOUHJzTG9zdk5QdndMb3chYE5QIWAhYSEgViFhfk5QYSEgXlIhYGB3UE9yKF1zdihdd34oXSFSISBuVyFgYCFicE9yS2pyc0xac3ZLanZ3TG93eE5QeCFgS2ohYCFhISFXIWF+S2ohUiEhYVQhYGAhYnB3UE9yKGtycydnc3Yoa3d4KF14fihrIVYhIXtWZ1NeUCFgYCFicE9yJlJycyZxc3YmUnd4J3J4IV4mUiFeIV8oayFffiZSXCIsXG4gIHRva2VuaXplcnM6IFtzY3JpcHRUb2tlbnMsIHN0eWxlVG9rZW5zLCB0ZXh0YXJlYVRva2VucywgdGFnU3RhcnQsIGNvbW1lbnRDb250ZW50LCAwLCAxLCAyLCAzLCA0LCA1XSxcbiAgdG9wUnVsZXM6IHtcIkRvY3VtZW50XCI6WzAsMTNdfSxcbiAgZGlhbGVjdHM6IHtub01hdGNoOiAwfSxcbiAgdG9rZW5QcmVjOiA0NzZcbn0pO1xuXG5mdW5jdGlvbiBnZXRBdHRycyhlbGVtZW50LCBpbnB1dCkge1xuICBsZXQgYXR0cnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBmb3IgKGxldCBhdHQgb2YgZWxlbWVudC5maXJzdENoaWxkLmdldENoaWxkcmVuKFwiQXR0cmlidXRlXCIpKSB7XG4gICAgbGV0IG5hbWUgPSBhdHQuZ2V0Q2hpbGQoXCJBdHRyaWJ1dGVOYW1lXCIpLCB2YWx1ZSA9IGF0dC5nZXRDaGlsZChcIkF0dHJpYnV0ZVZhbHVlXCIpIHx8IGF0dC5nZXRDaGlsZChcIlVucXVvdGVkQXR0cmlidXRlVmFsdWVcIik7XG4gICAgaWYgKG5hbWUpIGF0dHJzW2lucHV0LnJlYWQobmFtZS5mcm9tLCBuYW1lLnRvKV0gPVxuICAgICAgIXZhbHVlID8gXCJcIiA6IHZhbHVlLm5hbWUgPT0gXCJBdHRyaWJ1dGVWYWx1ZVwiID8gaW5wdXQucmVhZCh2YWx1ZS5mcm9tICsgMSwgdmFsdWUudG8gLSAxKSA6IGlucHV0LnJlYWQodmFsdWUuZnJvbSwgdmFsdWUudG8pO1xuICB9XG4gIHJldHVybiBhdHRyc1xufVxuXG5mdW5jdGlvbiBtYXliZU5lc3Qobm9kZSwgaW5wdXQsIHRhZ3MpIHtcbiAgbGV0IGF0dHJzO1xuICBmb3IgKGxldCB0YWcgb2YgdGFncykge1xuICAgIGlmICghdGFnLmF0dHJzIHx8IHRhZy5hdHRycyhhdHRycyB8fCAoYXR0cnMgPSBnZXRBdHRycyhub2RlLm5vZGUucGFyZW50LCBpbnB1dCkpKSlcbiAgICAgIHJldHVybiB7cGFyc2VyOiB0YWcucGFyc2VyfVxuICB9XG4gIHJldHVybiBudWxsXG59XG5cbi8vIHRhZ3M6IHtcbi8vICAgdGFnOiBcInNjcmlwdFwiIHwgXCJzdHlsZVwiIHwgXCJ0ZXh0YXJlYVwiLFxuLy8gICBhdHRycz86ICh7W2F0dHI6IHN0cmluZ106IHN0cmluZ30pID0+IGJvb2xlYW4sXG4vLyAgIHBhcnNlcjogUGFyc2VyXG4vLyB9W11cbiBcbmZ1bmN0aW9uIGNvbmZpZ3VyZU5lc3RpbmcodGFncykge1xuICBsZXQgc2NyaXB0ID0gW10sIHN0eWxlID0gW10sIHRleHRhcmVhID0gW107XG4gIGZvciAobGV0IHRhZyBvZiB0YWdzKSB7XG4gICAgbGV0IGFycmF5ID0gdGFnLnRhZyA9PSBcInNjcmlwdFwiID8gc2NyaXB0IDogdGFnLnRhZyA9PSBcInN0eWxlXCIgPyBzdHlsZSA6IHRhZy50YWcgPT0gXCJ0ZXh0YXJlYVwiID8gdGV4dGFyZWEgOiBudWxsO1xuICAgIGlmICghYXJyYXkpIHRocm93IG5ldyBSYW5nZUVycm9yKFwiT25seSBzY3JpcHQsIHN0eWxlLCBhbmQgdGV4dGFyZWEgdGFncyBjYW4gaG9zdCBuZXN0ZWQgcGFyc2Vyc1wiKVxuICAgIGFycmF5LnB1c2godGFnKTtcbiAgfVxuICByZXR1cm4gcGFyc2VNaXhlZCgobm9kZSwgaW5wdXQpID0+IHtcbiAgICBsZXQgaWQgPSBub2RlLnR5cGUuaWQ7XG4gICAgaWYgKGlkID09IFNjcmlwdFRleHQpIHJldHVybiBtYXliZU5lc3Qobm9kZSwgaW5wdXQsIHNjcmlwdClcbiAgICBpZiAoaWQgPT0gU3R5bGVUZXh0KSByZXR1cm4gbWF5YmVOZXN0KG5vZGUsIGlucHV0LCBzdHlsZSlcbiAgICBpZiAoaWQgPT0gVGV4dGFyZWFUZXh0KSByZXR1cm4gbWF5YmVOZXN0KG5vZGUsIGlucHV0LCB0ZXh0YXJlYSlcbiAgICByZXR1cm4gbnVsbFxuICB9KVxufVxuXG5leHBvcnQgeyBjb25maWd1cmVOZXN0aW5nLCBwYXJzZXIgfTtcbiIsICJpbXBvcnQgeyBDb250ZXh0VHJhY2tlciwgRXh0ZXJuYWxUb2tlbml6ZXIsIExSUGFyc2VyIH0gZnJvbSAnQGxlemVyL2xyJztcbmltcG9ydCB7IHN0eWxlVGFncywgdGFncyB9IGZyb20gJ0BsZXplci9oaWdobGlnaHQnO1xuXG4vLyBUaGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSBsZXplci1nZW5lcmF0b3IuIFlvdSBwcm9iYWJseSBzaG91bGRuJ3QgZWRpdCBpdC5cbmNvbnN0IFRTRXh0ZW5kcyA9IDEsXG4gIG5vU2VtaSA9IDI4MSxcbiAgaW5jZGVjID0gMixcbiAgaW5jZGVjUHJlZml4ID0gMyxcbiAgdGVtcGxhdGVDb250ZW50ID0gMjgyLFxuICBJbnRlcnBvbGF0aW9uU3RhcnQgPSA0LFxuICB0ZW1wbGF0ZUVuZCA9IDI4MyxcbiAgaW5zZXJ0U2VtaSA9IDI4NCxcbiAgc3BhY2VzID0gMjg2LFxuICBuZXdsaW5lID0gMjg3LFxuICBMaW5lQ29tbWVudCA9IDUsXG4gIEJsb2NrQ29tbWVudCA9IDYsXG4gIERpYWxlY3RfdHMgPSAxO1xuXG4vKiBIYW5kLXdyaXR0ZW4gdG9rZW5pemVycyBmb3IgSmF2YVNjcmlwdCB0b2tlbnMgdGhhdCBjYW4ndCBiZVxuICAgZXhwcmVzc2VkIGJ5IGxlemVyJ3MgYnVpbHQtaW4gdG9rZW5pemVyLiAqL1xuXG5jb25zdCBzcGFjZSA9IFs5LCAxMCwgMTEsIDEyLCAxMywgMzIsIDEzMywgMTYwLCA1NzYwLCA4MTkyLCA4MTkzLCA4MTk0LCA4MTk1LCA4MTk2LCA4MTk3LCA4MTk4LCA4MTk5LCA4MjAwLFxuICAgICAgICAgICAgICAgODIwMSwgODIwMiwgODIzMiwgODIzMywgODIzOSwgODI4NywgMTIyODhdO1xuXG5jb25zdCBicmFjZVIgPSAxMjUsIGJyYWNlTCA9IDEyMywgc2VtaWNvbG9uID0gNTksIHNsYXNoID0gNDcsIHN0YXIgPSA0MixcbiAgICAgIHBsdXMgPSA0MywgbWludXMgPSA0NSwgZG9sbGFyID0gMzYsIGJhY2t0aWNrID0gOTYsIGJhY2tzbGFzaCA9IDkyO1xuXG5jb25zdCB0cmFja05ld2xpbmUgPSBuZXcgQ29udGV4dFRyYWNrZXIoe1xuICBzdGFydDogZmFsc2UsXG4gIHNoaWZ0KGNvbnRleHQsIHRlcm0pIHtcbiAgICByZXR1cm4gdGVybSA9PSBMaW5lQ29tbWVudCB8fCB0ZXJtID09IEJsb2NrQ29tbWVudCB8fCB0ZXJtID09IHNwYWNlcyA/IGNvbnRleHQgOiB0ZXJtID09IG5ld2xpbmVcbiAgfSxcbiAgc3RyaWN0OiBmYWxzZVxufSk7XG5cbmNvbnN0IGluc2VydFNlbWljb2xvbiA9IG5ldyBFeHRlcm5hbFRva2VuaXplcigoaW5wdXQsIHN0YWNrKSA9PiB7XG4gIGxldCB7bmV4dH0gPSBpbnB1dDtcbiAgaWYgKChuZXh0ID09IGJyYWNlUiB8fCBuZXh0ID09IC0xIHx8IHN0YWNrLmNvbnRleHQpICYmIHN0YWNrLmNhblNoaWZ0KGluc2VydFNlbWkpKVxuICAgIGlucHV0LmFjY2VwdFRva2VuKGluc2VydFNlbWkpO1xufSwge2NvbnRleHR1YWw6IHRydWUsIGZhbGxiYWNrOiB0cnVlfSk7XG5cbmNvbnN0IG5vU2VtaWNvbG9uID0gbmV3IEV4dGVybmFsVG9rZW5pemVyKChpbnB1dCwgc3RhY2spID0+IHtcbiAgbGV0IHtuZXh0fSA9IGlucHV0LCBhZnRlcjtcbiAgaWYgKHNwYWNlLmluZGV4T2YobmV4dCkgPiAtMSkgcmV0dXJuXG4gIGlmIChuZXh0ID09IHNsYXNoICYmICgoYWZ0ZXIgPSBpbnB1dC5wZWVrKDEpKSA9PSBzbGFzaCB8fCBhZnRlciA9PSBzdGFyKSkgcmV0dXJuXG4gIGlmIChuZXh0ICE9IGJyYWNlUiAmJiBuZXh0ICE9IHNlbWljb2xvbiAmJiBuZXh0ICE9IC0xICYmICFzdGFjay5jb250ZXh0ICYmIHN0YWNrLmNhblNoaWZ0KG5vU2VtaSkpXG4gICAgaW5wdXQuYWNjZXB0VG9rZW4obm9TZW1pKTtcbn0sIHtjb250ZXh0dWFsOiB0cnVlfSk7XG5cbmNvbnN0IGluY2RlY1Rva2VuID0gbmV3IEV4dGVybmFsVG9rZW5pemVyKChpbnB1dCwgc3RhY2spID0+IHtcbiAgbGV0IHtuZXh0fSA9IGlucHV0O1xuICBpZiAobmV4dCA9PSBwbHVzIHx8IG5leHQgPT0gbWludXMpIHtcbiAgICBpbnB1dC5hZHZhbmNlKCk7XG4gICAgaWYgKG5leHQgPT0gaW5wdXQubmV4dCkge1xuICAgICAgaW5wdXQuYWR2YW5jZSgpO1xuICAgICAgbGV0IG1heVBvc3RmaXggPSAhc3RhY2suY29udGV4dCAmJiBzdGFjay5jYW5TaGlmdChpbmNkZWMpO1xuICAgICAgaW5wdXQuYWNjZXB0VG9rZW4obWF5UG9zdGZpeCA/IGluY2RlYyA6IGluY2RlY1ByZWZpeCk7XG4gICAgfVxuICB9XG59LCB7Y29udGV4dHVhbDogdHJ1ZX0pO1xuXG5jb25zdCB0ZW1wbGF0ZSA9IG5ldyBFeHRlcm5hbFRva2VuaXplcihpbnB1dCA9PiB7XG4gIGZvciAobGV0IGFmdGVyRG9sbGFyID0gZmFsc2UsIGkgPSAwOzsgaSsrKSB7XG4gICAgbGV0IHtuZXh0fSA9IGlucHV0O1xuICAgIGlmIChuZXh0IDwgMCkge1xuICAgICAgaWYgKGkpIGlucHV0LmFjY2VwdFRva2VuKHRlbXBsYXRlQ29udGVudCk7XG4gICAgICBicmVha1xuICAgIH0gZWxzZSBpZiAobmV4dCA9PSBiYWNrdGljaykge1xuICAgICAgaWYgKGkpIGlucHV0LmFjY2VwdFRva2VuKHRlbXBsYXRlQ29udGVudCk7XG4gICAgICBlbHNlIGlucHV0LmFjY2VwdFRva2VuKHRlbXBsYXRlRW5kLCAxKTtcbiAgICAgIGJyZWFrXG4gICAgfSBlbHNlIGlmIChuZXh0ID09IGJyYWNlTCAmJiBhZnRlckRvbGxhcikge1xuICAgICAgaWYgKGkgPT0gMSkgaW5wdXQuYWNjZXB0VG9rZW4oSW50ZXJwb2xhdGlvblN0YXJ0LCAxKTtcbiAgICAgIGVsc2UgaW5wdXQuYWNjZXB0VG9rZW4odGVtcGxhdGVDb250ZW50LCAtMSk7XG4gICAgICBicmVha1xuICAgIH0gZWxzZSBpZiAobmV4dCA9PSAxMCAvKiBcIlxcblwiICovICYmIGkpIHtcbiAgICAgIC8vIEJyZWFrIHVwIHRlbXBsYXRlIHN0cmluZ3Mgb24gbGluZXMsIHRvIGF2b2lkIGh1Z2UgdG9rZW5zXG4gICAgICBpbnB1dC5hZHZhbmNlKCk7XG4gICAgICBpbnB1dC5hY2NlcHRUb2tlbih0ZW1wbGF0ZUNvbnRlbnQpO1xuICAgICAgYnJlYWtcbiAgICB9IGVsc2UgaWYgKG5leHQgPT0gYmFja3NsYXNoKSB7XG4gICAgICBpbnB1dC5hZHZhbmNlKCk7XG4gICAgfVxuICAgIGFmdGVyRG9sbGFyID0gbmV4dCA9PSBkb2xsYXI7XG4gICAgaW5wdXQuYWR2YW5jZSgpO1xuICB9XG59KTtcblxuY29uc3QgdHNFeHRlbmRzID0gbmV3IEV4dGVybmFsVG9rZW5pemVyKChpbnB1dCwgc3RhY2spID0+IHtcbiAgaWYgKGlucHV0Lm5leHQgIT0gMTAxIHx8ICFzdGFjay5kaWFsZWN0RW5hYmxlZChEaWFsZWN0X3RzKSkgcmV0dXJuXG4gIGlucHV0LmFkdmFuY2UoKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCA2OyBpKyspIHtcbiAgICBpZiAoaW5wdXQubmV4dCAhPSBcInh0ZW5kc1wiLmNoYXJDb2RlQXQoaSkpIHJldHVyblxuICAgIGlucHV0LmFkdmFuY2UoKTtcbiAgfVxuICBpZiAoaW5wdXQubmV4dCA+PSA1NyAmJiBpbnB1dC5uZXh0IDw9IDY1IHx8IGlucHV0Lm5leHQgPj0gNDggJiYgaW5wdXQubmV4dCA8PSA5MCB8fFxuICAgICAgaW5wdXQubmV4dCA9PSA5NSB8fCBpbnB1dC5uZXh0ID49IDk3ICYmIGlucHV0Lm5leHQgPD0gMTIyIHx8IGlucHV0Lm5leHQgPiAxNjApIHJldHVyblxuICBpbnB1dC5hY2NlcHRUb2tlbihUU0V4dGVuZHMpO1xufSk7XG5cbmNvbnN0IGpzSGlnaGxpZ2h0ID0gc3R5bGVUYWdzKHtcbiAgXCJnZXQgc2V0IGFzeW5jIHN0YXRpY1wiOiB0YWdzLm1vZGlmaWVyLFxuICBcImZvciB3aGlsZSBkbyBpZiBlbHNlIHN3aXRjaCB0cnkgY2F0Y2ggZmluYWxseSByZXR1cm4gdGhyb3cgYnJlYWsgY29udGludWUgZGVmYXVsdCBjYXNlXCI6IHRhZ3MuY29udHJvbEtleXdvcmQsXG4gIFwiaW4gb2YgYXdhaXQgeWllbGQgdm9pZCB0eXBlb2YgZGVsZXRlIGluc3RhbmNlb2ZcIjogdGFncy5vcGVyYXRvcktleXdvcmQsXG4gIFwibGV0IHZhciBjb25zdCBmdW5jdGlvbiBjbGFzcyBleHRlbmRzXCI6IHRhZ3MuZGVmaW5pdGlvbktleXdvcmQsXG4gIFwiaW1wb3J0IGV4cG9ydCBmcm9tXCI6IHRhZ3MubW9kdWxlS2V5d29yZCxcbiAgXCJ3aXRoIGRlYnVnZ2VyIGFzIG5ld1wiOiB0YWdzLmtleXdvcmQsXG4gIFRlbXBsYXRlU3RyaW5nOiB0YWdzLnNwZWNpYWwodGFncy5zdHJpbmcpLFxuICBzdXBlcjogdGFncy5hdG9tLFxuICBCb29sZWFuTGl0ZXJhbDogdGFncy5ib29sLFxuICB0aGlzOiB0YWdzLnNlbGYsXG4gIG51bGw6IHRhZ3MubnVsbCxcbiAgU3RhcjogdGFncy5tb2RpZmllcixcbiAgVmFyaWFibGVOYW1lOiB0YWdzLnZhcmlhYmxlTmFtZSxcbiAgXCJDYWxsRXhwcmVzc2lvbi9WYXJpYWJsZU5hbWUgVGFnZ2VkVGVtcGxhdGVFeHByZXNzaW9uL1ZhcmlhYmxlTmFtZVwiOiB0YWdzLmZ1bmN0aW9uKHRhZ3MudmFyaWFibGVOYW1lKSxcbiAgVmFyaWFibGVEZWZpbml0aW9uOiB0YWdzLmRlZmluaXRpb24odGFncy52YXJpYWJsZU5hbWUpLFxuICBMYWJlbDogdGFncy5sYWJlbE5hbWUsXG4gIFByb3BlcnR5TmFtZTogdGFncy5wcm9wZXJ0eU5hbWUsXG4gIFByaXZhdGVQcm9wZXJ0eU5hbWU6IHRhZ3Muc3BlY2lhbCh0YWdzLnByb3BlcnR5TmFtZSksXG4gIFwiQ2FsbEV4cHJlc3Npb24vTWVtYmVyRXhwcmVzc2lvbi9Qcm9wZXJ0eU5hbWVcIjogdGFncy5mdW5jdGlvbih0YWdzLnByb3BlcnR5TmFtZSksXG4gIFwiRnVuY3Rpb25EZWNsYXJhdGlvbi9WYXJpYWJsZURlZmluaXRpb25cIjogdGFncy5mdW5jdGlvbih0YWdzLmRlZmluaXRpb24odGFncy52YXJpYWJsZU5hbWUpKSxcbiAgXCJDbGFzc0RlY2xhcmF0aW9uL1ZhcmlhYmxlRGVmaW5pdGlvblwiOiB0YWdzLmRlZmluaXRpb24odGFncy5jbGFzc05hbWUpLFxuICBQcm9wZXJ0eURlZmluaXRpb246IHRhZ3MuZGVmaW5pdGlvbih0YWdzLnByb3BlcnR5TmFtZSksXG4gIFByaXZhdGVQcm9wZXJ0eURlZmluaXRpb246IHRhZ3MuZGVmaW5pdGlvbih0YWdzLnNwZWNpYWwodGFncy5wcm9wZXJ0eU5hbWUpKSxcbiAgVXBkYXRlT3A6IHRhZ3MudXBkYXRlT3BlcmF0b3IsXG4gIExpbmVDb21tZW50OiB0YWdzLmxpbmVDb21tZW50LFxuICBCbG9ja0NvbW1lbnQ6IHRhZ3MuYmxvY2tDb21tZW50LFxuICBOdW1iZXI6IHRhZ3MubnVtYmVyLFxuICBTdHJpbmc6IHRhZ3Muc3RyaW5nLFxuICBBcml0aE9wOiB0YWdzLmFyaXRobWV0aWNPcGVyYXRvcixcbiAgTG9naWNPcDogdGFncy5sb2dpY09wZXJhdG9yLFxuICBCaXRPcDogdGFncy5iaXR3aXNlT3BlcmF0b3IsXG4gIENvbXBhcmVPcDogdGFncy5jb21wYXJlT3BlcmF0b3IsXG4gIFJlZ0V4cDogdGFncy5yZWdleHAsXG4gIEVxdWFsczogdGFncy5kZWZpbml0aW9uT3BlcmF0b3IsXG4gIEFycm93OiB0YWdzLmZ1bmN0aW9uKHRhZ3MucHVuY3R1YXRpb24pLFxuICBcIjogU3ByZWFkXCI6IHRhZ3MucHVuY3R1YXRpb24sXG4gIFwiKCApXCI6IHRhZ3MucGFyZW4sXG4gIFwiWyBdXCI6IHRhZ3Muc3F1YXJlQnJhY2tldCxcbiAgXCJ7IH1cIjogdGFncy5icmFjZSxcbiAgXCJJbnRlcnBvbGF0aW9uU3RhcnQgSW50ZXJwb2xhdGlvbkVuZFwiOiB0YWdzLnNwZWNpYWwodGFncy5icmFjZSksXG4gIFwiLlwiOiB0YWdzLmRlcmVmT3BlcmF0b3IsXG4gIFwiLCA7XCI6IHRhZ3Muc2VwYXJhdG9yLFxuXG4gIFR5cGVOYW1lOiB0YWdzLnR5cGVOYW1lLFxuICBUeXBlRGVmaW5pdGlvbjogdGFncy5kZWZpbml0aW9uKHRhZ3MudHlwZU5hbWUpLFxuICBcInR5cGUgZW51bSBpbnRlcmZhY2UgaW1wbGVtZW50cyBuYW1lc3BhY2UgbW9kdWxlIGRlY2xhcmVcIjogdGFncy5kZWZpbml0aW9uS2V5d29yZCxcbiAgXCJhYnN0cmFjdCBnbG9iYWwgUHJpdmFjeSByZWFkb25seSBvdmVycmlkZVwiOiB0YWdzLm1vZGlmaWVyLFxuICBcImlzIGtleW9mIHVuaXF1ZSBpbmZlclwiOiB0YWdzLm9wZXJhdG9yS2V5d29yZCxcblxuICBKU1hBdHRyaWJ1dGVWYWx1ZTogdGFncy5hdHRyaWJ1dGVWYWx1ZSxcbiAgSlNYVGV4dDogdGFncy5jb250ZW50LFxuICBcIkpTWFN0YXJ0VGFnIEpTWFN0YXJ0Q2xvc2VUYWcgSlNYU2VsZkNsb3NlRW5kVGFnIEpTWEVuZFRhZ1wiOiB0YWdzLmFuZ2xlQnJhY2tldCxcbiAgXCJKU1hJZGVudGlmaWVyIEpTWE5hbWVTcGFjZWROYW1lXCI6IHRhZ3MudGFnTmFtZSxcbiAgXCJKU1hBdHRyaWJ1dGUvSlNYSWRlbnRpZmllciBKU1hBdHRyaWJ1dGUvSlNYTmFtZVNwYWNlZE5hbWVcIjogdGFncy5hdHRyaWJ1dGVOYW1lXG59KTtcblxuLy8gVGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgbGV6ZXItZ2VuZXJhdG9yLiBZb3UgcHJvYmFibHkgc2hvdWxkbid0IGVkaXQgaXQuXG5jb25zdCBzcGVjX2lkZW50aWZpZXIgPSB7X19wcm90b19fOm51bGwsZXhwb3J0OjE4LCBhczoyMywgZnJvbToyOSwgZGVmYXVsdDozMiwgYXN5bmM6MzcsIGZ1bmN0aW9uOjM4LCB0aGlzOjQ4LCB0cnVlOjU2LCBmYWxzZTo1Niwgdm9pZDo2NiwgdHlwZW9mOjcwLCBudWxsOjg2LCBzdXBlcjo4OCwgbmV3OjEyMiwgYXdhaXQ6MTM5LCB5aWVsZDoxNDEsIGRlbGV0ZToxNDIsIGNsYXNzOjE1MiwgZXh0ZW5kczoxNTQsIHB1YmxpYzoxOTcsIHByaXZhdGU6MTk3LCBwcm90ZWN0ZWQ6MTk3LCByZWFkb25seToxOTksIGluc3RhbmNlb2Y6MjIwLCBpbjoyMjIsIGNvbnN0OjIyNCwgaW1wb3J0OjI1Niwga2V5b2Y6MzA3LCB1bmlxdWU6MzExLCBpbmZlcjozMTcsIGlzOjM1MSwgYWJzdHJhY3Q6MzcxLCBpbXBsZW1lbnRzOjM3MywgdHlwZTozNzUsIGxldDozNzgsIHZhcjozODAsIGludGVyZmFjZTozODcsIGVudW06MzkxLCBuYW1lc3BhY2U6Mzk3LCBtb2R1bGU6Mzk5LCBkZWNsYXJlOjQwMywgZ2xvYmFsOjQwNywgZm9yOjQyOCwgb2Y6NDM3LCB3aGlsZTo0NDAsIHdpdGg6NDQ0LCBkbzo0NDgsIGlmOjQ1MiwgZWxzZTo0NTQsIHN3aXRjaDo0NTgsIGNhc2U6NDY0LCB0cnk6NDcwLCBjYXRjaDo0NzQsIGZpbmFsbHk6NDc4LCByZXR1cm46NDgyLCB0aHJvdzo0ODYsIGJyZWFrOjQ5MCwgY29udGludWU6NDk0LCBkZWJ1Z2dlcjo0OTh9O1xuY29uc3Qgc3BlY193b3JkID0ge19fcHJvdG9fXzpudWxsLGFzeW5jOjEwOSwgZ2V0OjExMSwgc2V0OjExMywgcHVibGljOjE2MSwgcHJpdmF0ZToxNjEsIHByb3RlY3RlZDoxNjEsIHN0YXRpYzoxNjMsIGFic3RyYWN0OjE2NSwgb3ZlcnJpZGU6MTY3LCByZWFkb25seToxNzMsIG5ldzozNTV9O1xuY29uc3Qgc3BlY19MZXNzVGhhbiA9IHtfX3Byb3RvX186bnVsbCxcIjxcIjoxMjl9O1xuY29uc3QgcGFyc2VyID0gTFJQYXJzZXIuZGVzZXJpYWxpemUoe1xuICB2ZXJzaW9uOiAxNCxcbiAgc3RhdGVzOiBcIiQ4U09gUWRPT08nUVEoQ3xPJyNDaE8nWE9XTycjRFZPKWRRZE8nI0RdTyl0UWRPJyNEaE8pe1FkTycjRHJPLXhRZE8nI0R4T09RTycjRV0nI0VdTy5dUWBPJyNFW08uYlFgTycjRVtPT1EoQ1snI0VmJyNFZk8wYVEoQ3xPJyNJdE8yd1EoQ3xPJyNJdU8zZVFgTycjRXpPM2pRIWJPJyNGYU9PUShDWycjRlMnI0ZTTzNyTyN0TycjRlNPNFFRJmpPJyNGaE81YlFgTycjRmdPT1EoQ1snI0l1JyNJdU9PUShDVycjSXQnI0l0T09RUycjSl4nI0peTzVnUWBPJyNIcE81bFEoQ2hPJyNIcU9PUVMnI0loJyNJaE9PUVMnI0hyJyNIclFgUWRPT08pe1FkTycjRGpPNXRRYE8nI0dbTzV5USZqTycjQ21PNlhRYE8nI0VaTzZkUWBPJyNFZ082aVEsVU8nI0ZSTzdUUWBPJyNHW083WVFgTycjR2BPN2VRYE8nI0dgTzdzUWBPJyNHY083c1FgTycjR2RPN3NRYE8nI0dmTzV0UWBPJyNHaU84ZFFgTycjR2xPOXJRYE8nI0NkTzpTUWBPJyNHeU86W1FgTycjSFBPOltRYE8nI0hST2BRZE8nI0hUTzpbUWBPJyNIVk86W1FgTycjSFlPOmFRYE8nI0hgTzpmUShDak8nI0hmTyl7UWRPJyNIaE86cVEoQ2pPJyNIak86fFEoQ2pPJyNIbE81bFEoQ2hPJyNIbk8pe1FkTycjRFdPT09XJyNIdCcjSHRPO1hPV08sNTlxT09RKENbLDU5cSw1OXFPPWpRdE8nI0NoTz10UWRPJyNIdU8+WFFgTycjSXZPQFdRdE8nI0l2TydkUWRPJyNJdk9AX1FgTyw1OXdPQHVRN1tPJyNEYk9BblFgTycjRV1PQXtRYE8nI0pST0JXUWBPJyNKUU9CV1FgTycjSlFPQmBRYE8sNTp5T0JlUWBPJyNKUE9CbFFhTycjRHlPNXlRJmpPJyNFWk9CelFgTycjRVpPQ1ZRcE8nI0ZST09RKENbLDU6Uyw1OlNPQ19RZE8sNTpTT0VdUShDfE8sNTpeT0V5UWBPLDU6ZE9GZFEoQ2hPJyNKT083WVFgTycjSX1PRmtRYE8nI0l9T0ZzUWBPLDU6eE9GeFFgTycjSX1PR1dRZE8sNTp2T0lXUSZqTycjRVdPSmVRYE8sNTp2T0t3USZqTycjRGxPTE9RZE8nI0RxT0xZUTdbTyw1O1BPKXtRZE8sNTtQT09RUycjRXInI0VyT09RUycjRXQnI0V0Tyl7UWRPLDU7Uk8pe1FkTyw1O1JPKXtRZE8sNTtSTyl7UWRPLDU7Uk8pe1FkTyw1O1JPKXtRZE8sNTtSTyl7UWRPLDU7Uk8pe1FkTyw1O1JPKXtRZE8sNTtSTyl7UWRPLDU7Uk8pe1FkTyw1O1JPT1FTJyNFeCcjRXhPTGJRZE8sNTtjT09RKENbLDU7aCw1O2hPT1EoQ1ssNTtpLDU7aU9OYlFgTyw1O2lPT1EoQ1ssNTtqLDU7ak8pe1FkTycjSVBPTmdRKENoTyw1PFRPISBSUSZqTyw1O1JPKXtRZE8sNTtmTyEga1EhYk8nI0pWTyEgWVEhYk8nI0pWTyEgclEhYk8nI0pWTyEhVFEhYk8sNTtxT09PTyw1O3ssNTt7TyEhY1FkTycjRmNPT09PJyNJTycjSU9PM3JPI3RPLDU7bk8hIWpRIWJPJyNGZU9PUShDWyw1O24sNTtuTyEjV1EsVk8nI0NyT09RKENdJyNDdScjQ3VPISNrUWBPJyNDdU8hI3BPV08nI0N5TyEkXlEsVk8sNTxRTyEkZVFgTyw1PFNPISV0USZqTycjRnJPISZSUWBPJyNGc08hJldRYE8nI0ZzTyEmXVEmak8nI0Z3TyEnW1E3W08nI0Z7TyEnfVEsVk8nI0lxT09RKENdJyNJcScjSXFPIShYUWFPJyNJcE8hKGdRYE8nI0lvTyEob1FgTycjQ3FPT1EoQ10nI0NzJyNDc09PUShDXScjQ3wnI0N8TyEod1FgTycjRE9PSmpRJmpPJyNGak9KalEmak8nI0ZsTyEofFFgTycjRm5PISlSUWBPJyNGb08hJldRYE8nI0Z1T0pqUSZqTycjRnpPISlXUWBPJyNFXk8hKW9RYE8sNTxST2BRZE8sNT5bT09RUycjSWsnI0lrT09RUyw1Pl0sNT5dT09RUy1FO3AtRTtwTyEra1EoQ3xPLDU6VU9PUShDWCcjQ3AnI0NwTyEsW1Ema08sNTx2T09RTycjQ2YnI0NmTyEsbVEoQ2hPJyNJbE81YlFgTycjSWxPOmFRYE8sNTlYTyEtT1EhYk8sNTlYTyEtV1Emak8sNTlYTzV5USZqTyw1OVhPIS1jUWBPLDU6dk8hLWtRYE8nI0d4TyEteVFgTycjSmJPKXtRZE8sNTtrTyEuUlE3W08sNTttTyEuV1FgTyw1PWNPIS5dUWBPLDU9Y08hLmJRYE8sNT1jTzVsUShDaE8sNT1jTzV0UWBPLDU8dk8hLnBRYE8nI0VfTyEvVVE3W08nI0VgT09RKENXJyNKUCcjSlBPIS9nUShDaE8nI0pfTzVsUShDaE8sNTx6TzdzUWBPLDU9UU9PUVAnI0NyJyNDck8hL3JRIWJPLDU8fU8hL3pRIWNPLDU9T08hMFZRYE8sNT1RTyEwW1FwTyw1PVRPOmFRYE8nI0duTzV0UWBPJyNHcE8hMGRRYE8nI0dwTzV5USZqTycjR3NPITBpUWBPJyNHc09PUVMsNT1XLDU9V08hMG5RYE8nI0d0TyEwdlFgTycjQ21PITB7UWBPLDU5T08hMVZRYE8sNTlPTyEzWFFkTyw1OU9PT1FTLDU5Tyw1OU9PITNmUShDaE8sNTlPTyl7UWRPLDU5T08hM3FRZE8nI0d7T09RUycjR3wnI0d8T09RUycjR30nI0d9T2BRZE8sNT1lTyE0UlFgTyw1PWVPKXtRZE8nI0R4T2BRZE8sNT1rT2BRZE8sNT1tTyE0V1FgTyw1PW9PYFFkTyw1PXFPITRdUWBPLDU9dE8hNGJRZE8sNT16T09RUyw1PlEsNT5RTyl7UWRPLDU+UU81bFEoQ2hPLDU+U09PUVMsNT5VLDU+VU8hOGNRYE8sNT5VT09RUyw1PlcsNT5XTyE4Y1FgTyw1PldPT1FTLDU+WSw1PllPIThoUXBPLDU5ck9PT1ctRTtyLUU7ck9PUShDWzFHL10xRy9dTyE4bVF0Tyw1PmFPJ2RRZE8sNT5hT09RTyw1PmYsNT5mTyE4d1FkTycjSHVPT1FPLUU7cy1FO3NPITlVUWBPLDU/Yk8hOV5RdE8sNT9iTyE5ZVFgTyw1P2xPT1EoQ1sxRy9jMUcvY08hOW1RIWJPJyNEVE9PUU8nI0l4JyNJeE8pe1FkTycjSXhPITpbUSFiTycjSXhPITp5USFiTycjRGNPITtbUTdbTycjRGNPIT1nUWRPJyNEY08hPW5RYE8nI0l3TyE9dlFgTyw1OXxPIT17UWBPJyNFYU8hPlpRYE8nI0pTTyE+Y1FgTyw1OnpPIT55UTdbTycjRGNPKXtRZE8sNT9tTyE/VFFgTycjSHpPT1FPLUU7eC1FO3hPITllUWBPLDU/bE9PUShDVzFHMGUxRzBlTyFAYVE3W08nI0R8T09RKENbLDU6ZSw1OmVPKXtRZE8sNTplT0lXUSZqTyw1OmVPIUBoUWFPLDU6ZU86YVFgTyw1OnVPIS1PUSFiTyw1OnVPIS1XUSZqTyw1OnVPNXlRJmpPLDU6dU9PUShDWzFHL24xRy9uT09RKENbMUcwTzFHME9PT1EoQ1cnI0VWJyNFVk8pe1FkTyw1P2pPIUBzUShDaE8sNT9qTyFBVVEoQ2hPLDU/ak8hQV1RYE8sNT9pTyFBZVFgTycjSHxPIUFdUWBPLDU/aU9PUShDVzFHMGQxRzBkTzdZUWBPLDU/aU9PUShDWzFHMGIxRzBiTyFCUFEoQ3xPMUcwYk8hQ1JRKEN5Tyw1OnJPT1EoQ10nI0ZxJyNGcU8hQ29RKEN9TycjSXFPR1dRZE8xRzBiTyFFcVEsVk8nI0l5TyFFe1FgTyw1OldPIUZRUXRPJyNJek8pe1FkTycjSXpPIUZbUWBPLDU6XU9PUShDXScjRFQnI0RUT09RKENbMUcwazFHMGtPIUZhUWBPMUcwa08hSHJRKEN8TzFHMG1PIUh5UShDfE8xRzBtTyFLXlEoQ3xPMUcwbU8hS2VRKEN8TzFHMG1PIU1sUShDfE8xRzBtTyFOUFEoQ3xPMUcwbU8jIXBRKEN8TzFHMG1PIyF3UShDfE8xRzBtTyMlW1EoQ3xPMUcwbU8jJWNRKEN8TzFHMG1PIydXUShDfE8xRzBtTyMqUVFNbE8nI0NoTyMre1FNbE8xRzB9TyMtdlFNbE8nI0l1T09RKENbMUcxVDFHMVRPIy5aUShDfE8sNT5rT09RKENXLUU7fS1FO31PIy56UShDfU8xRzBtT09RKENbMUcwbTFHMG1PIzFQUShDfE8xRzFRTyMxcFEhYk8sNTtzTyMxdVEhYk8sNTt0TyMxelEhYk8nI0ZbTyMyYFFgTycjRlpPT1FPJyNKVycjSldPT1FPJyNIfScjSH1PIzJlUSFiTzFHMV1PT1EoQ1sxRzFdMUcxXU9PT08xRzFmMUcxZk8jMnNRTWxPJyNJdE8jMn1RYE8sNTt9T0xiUWRPLDU7fU9PT08tRTt8LUU7fE9PUShDWzFHMVkxRzFZT09RKENbLDU8UCw1PFBPIzNTUSFiTyw1PFBPT1EoQ10sNTlhLDU5YU9JV1Emak8nI0N7T09PVycjSHMnI0hzTyMzWE9XTyw1OWVPT1EoQ10sNTllLDU5ZU8pe1FkTzFHMWxPISlSUWBPJyNJUk8jM2RRYE8sNTxlT09RKENdLDU8Yiw1PGJPT1FPJyNHVicjR1ZPSmpRJmpPLDU8cE9PUU8nI0dYJyNHWE9KalEmak8sNTxyT0lXUSZqTyw1PHRPT1FPMUcxbjFHMW5PIzNvUXFPJyNDcE8jNFNRcU8sNTxeTyM0WlFgTycjSlpPNXRRYE8nI0paTyM0aVFgTyw1PGBPSmpRJmpPLDU8X08jNG5RYE8nI0Z0TyM0eVFgTyw1PF9PIzVPUXFPJyNGcU8jNV1RcU8nI0pbTyM1Z1FgTycjSltPSVdRJmpPJyNKW08jNWxRYE8sNTxjT09RKENXJyNEZycjRGdPIzVxUSFiTycjRnxPISdWUTdbTycjRnxPISdWUTdbTycjR09PIzZTUWBPJyNHUE8hJldRYE8nI0dTTyM2WFEoQ2hPJyNJVE8jNmRRN1tPLDU8Z09PUShDXSw1PGcsNTxnTyM2a1E3W08nI0Z8TyM2eVE3W08nI0Z9TyM3UlE3W08nI0Z9T09RKENdLDU8dSw1PHVPSmpRJmpPLDU/W09KalEmak8sNT9bTyM3V1FgTycjSVVPIzdjUWBPLDU/Wk8jN2tRYE8sNTldT09RKENdJyNDaCcjQ2hPIzhbUSxWTyw1OWpPT1EoQ10sNTlqLDU5ak8jOH1RLFZPLDU8VU8jOXBRLFZPLDU8V08jOXpRYE8sNTxZT09RKENdLDU8Wiw1PFpPIzpQUWBPLDU8YU8jOlVRLFZPLDU8Zk9HV1FkTzFHMW1PIzpmUWBPMUcxbU9PUVMxRzN2MUczdk9PUShDWzFHL3AxRy9wT05iUWBPMUcvcE9PUVMxRzJiMUcyYk9JV1Emak8xRzJiTyl7UWRPMUcyYk9JV1Emak8xRzJiTyM6a1FhTzFHMmJPIzxRUSZqTycjRVdPT1EoQ1csNT9XLDU/V08jPFtRKENoTyw1P1dPT1FTMUcuczFHLnNPOmFRYE8xRy5zTyEtT1EhYk8xRy5zTyEtV1Emak8xRy5zTyM8bVFgTzFHMGJPIzxyUWBPJyNDaE8jPH1RYE8nI0pjTyM9VlFgTyw1PWRPIz1bUWBPJyNKY08jPWFRYE8nI0pjTyM9aVFgTycjSV5PIz13UWBPLDU/fE8jPlBRdE8xRzFWT09RKENbMUcxWDFHMVhPNXRRYE8xRzJ9TyM+V1FgTzFHMn1PIz5dUWBPMUcyfU8jPmJRYE8xRzJ9T09RUzFHMn0xRzJ9TyM+Z1Ema08xRzJiTzdZUWBPJyNKUU83WVFgTycjRWFPN1lRYE8nI0lXTyM+eFEoQ2hPLDU/eU9PUVMxRzJmMUcyZk8hMFZRYE8xRzJsT0lXUSZqTzFHMmlPIz9UUWBPMUcyaU9PUVMxRzJqMUcyak9JV1Emak8xRzJqTyM/WVFhTzFHMmpPIz9iUTdbTycjR2hPT1FTMUcybDFHMmxPISdWUTdbTycjSVlPITBbUXBPMUcyb09PUVMxRzJvMUcyb09PUVMsNT1ZLDU9WU8jP2pRJmtPLDU9W081dFFgTyw1PVtPIzZTUWBPLDU9X081YlFgTyw1PV9PIS1PUSFiTyw1PV9PIS1XUSZqTyw1PV9PNXlRJmpPLDU9X08jP3tRYE8nI0phTyNAV1FgTyw1PWBPT1FTMUcuajFHLmpPI0BdUShDaE8xRy5qTyNAaFFgTzFHLmpPI0BtUWBPMUcuak81bFEoQ2hPMUcuak8jQHVRdE8sNUBPTyNBUFFgTyw1QE9PI0FbUWRPLDU9Z08jQWNRYE8sNT1nTzdZUWBPLDVAT09PUVMxRzNQMUczUE9gUWRPMUczUE9PUVMxRzNWMUczVk9PUVMxRzNYMUczWE86W1FgTzFHM1pPI0FoUWRPMUczXU8jRWNRZE8nI0hbT09RUzFHM2AxRzNgTyNFcFFgTycjSGJPOmFRYE8nI0hkT09RUzFHM2YxRzNmTyNFeFFkTzFHM2ZPNWxRKENoTzFHM2xPT1FTMUczbjFHM25PT1EoQ1cnI0Z4JyNGeE81bFEoQ2hPMUczcE81bFEoQ2hPMUczck9PT1cxRy9eMUcvXk8jSXZRcE8sNTxUTyNKT1F0TzFHM3tPT1FPMUc0UTFHNFFPKXtRZE8sNT5hTyNKWVFgTzFHNHxPI0piUWBPMUc1V08jSmpRYE8sNT9kT0xiUWRPLDU6e083WVFgTyw1OntPOmFRYE8sNTl9T0xiUWRPLDU5fU8hLU9RIWJPLDU5fU8jSm9RTWxPLDU5fU9PUU8sNTp7LDU6e08jSnlRN1tPJyNIdk8jS2FRYE8sNT9jT09RKENbMUcvaDFHL2hPI0tpUTdbTycjSHtPI0t9UWBPLDU/bk9PUShDVzFHMGYxRzBmTyE7W1E3W08sNTl9TyNMVlF0TzFHNVhPN1lRYE8sNT5mT09RKENXJyNFUycjRVNPI0xhUShEak8nI0VUTyFAWFE3W08nI0R9T09RTycjSHknI0h5TyNMe1E3W08sNTpoT09RKENbLDU6aCw1OmhPI01TUTdbTycjRH1PI01lUTdbTycjRH1PI01sUTdbTycjRVlPI01vUTdbTycjRVRPI018UTdbTycjRVRPIUBYUTdbTycjRVRPI05hUWBPMUcwUE8jTmZRcU8xRzBQT09RKENbMUcwUDFHMFBPKXtRZE8xRzBQT0lXUSZqTzFHMFBPT1EoQ1sxRzBhMUcwYU86YVFgTzFHMGFPIS1PUSFiTzFHMGFPIS1XUSZqTzFHMGFPI05tUShDfE8xRzVVTyl7UWRPMUc1VU8jTn1RKENoTzFHNVVPJCBgUWBPMUc1VE83WVFgTyw1PmhPT1FPLDU+aCw1PmhPJCBoUWBPLDU+aE9PUU8tRTt6LUU7ek8kIGBRYE8xRzVUTyQgdlEoQ31PLDU5ak8kI3hRKEN9Tyw1PFVPJCV9UShDfU8sNTxXTyQoU1EoQ31PLDU8Zk9PUShDWzcrJXw3KyV8TyQqX1EoQ3xPNyslfE8kK09RJmpPJyNId08kK1lRYE8sNT9lT09RKENdMUcvcjFHL3JPJCtiUWRPJyNIeE8kK29RYE8sNT9mTyQrd1F0Tyw1P2ZPT1EoQ1sxRy93MUcvd09PUShDWzcrJlY3KyZWTyQsUlFNbE8sNTpeTyl7UWRPNysmaU8kLF1RTWxPLDU6VU9PUU8xRzFfMUcxX09PUU8xRzFgMUcxYE8kLGpRIUxRTyw1O3ZPTGJRZE8sNTt1T09RTy1FO3stRTt7T09RKENbNysmdzcrJndPT09PNysnUTcrJ1FPT09PMUcxaTFHMWlPJCx1UWBPMUcxaU9PUShDWzFHMWsxRzFrTyQselFxTyw1OWdPT09XLUU7cS1FO3FPT1EoQ10xRy9QMUcvUE8kLVJRKEN8TzcrJ1dPT1EoQ10sNT5tLDU+bU8kLXJRYE8sNT5tT09RKENdMUcyUDFHMlBQJC13UWBPJyNJUlBPUShDXS1FPFAtRTxQTyQuaFEsVk8xRzJbTyQvWlEsVk8xRzJeTyQvZVFxTzFHMmBPT1EoQ10xRzF4MUcxeE8kL2xRYE8nI0lRTyQvelFgTyw1P3VPJC96UWBPLDU/dU8kMFNRYE8sNT91TyQwX1FgTyw1P3VPT1FPMUcxejFHMXpPJDBtUSxWTzFHMXlPSmpRJmpPMUcxeU8kMH1RJmpPJyNJU08kMV9RYE8sNT92T0lXUSZqTyw1P3ZPJDFnUXFPLDU/dk9PUShDXTFHMX0xRzF9T09RKENXLDU8aCw1PGhPT1EoQ1csNTxpLDU8aU8kMXFRYE8sNTxpTyM1fVFgTyw1PGlPIS1PUSFiTyw1PGhPJDF2UWBPLDU8ak9PUShDVyw1PGssNTxrTyQxcVFgTyw1PG5PT1FPLDU+byw1Pm9PT1FPLUU8Ui1FPFJPT1EoQ10xRzJSMUcyUk8hJ1ZRN1tPLDU8aE8kMk9RYE8sNTxpTyEnVlE3W08sNTxqTyEnVlE3W08sNTxpTyQyWlEsVk8xRzR2TyQyZVEsVk8xRzR2T09RTyw1PnAsNT5wT09RTy1FPFMtRTxTT09RUDFHLncxRy53TyEuUlE3W08sNTlsTyl7UWRPLDU5bE8kMnJRYE8xRzF0T0pqUSZqTzFHMXtPJDJ3UShDfE83KydYT09RKENbNysnWDcrJ1hPR1dRZE83KydYT09RKENbNyslWzcrJVtPJDNoUXFPJyNKXU8jTmFRYE83Kyd8TyQzclFgTzcrJ3xPJDN6UXFPNysnfE9PUVM3Kyd8NysnfE9JV1Emak83Kyd8Tyl7UWRPNysnfE9JV1Emak83Kyd8TyQ0VVEoQ3lPJyNDaE8kNGlRKEN5Tyw1PGxPJDVaUWBPLDU8bE9PUShDVzFHNHIxRzRyT09RUzcrJF83KyRfTzphUWBPNyskX08hLU9RIWJPNyskX09HV1FkTzcrJXxPJDVgUWBPJyNJXU8kNXFRYE8sNT99T09RTzFHM08xRzNPTzV0UWBPLDU/fU8kNXFRYE8sNT99TyQ1eVFgTyw1P31PT1FPLDU+eCw1PnhPT1FPLUU8Wy1FPFtPT1EoQ1s3KyZxNysmcU8kNk9RYE83KyhpTzVsUShDaE83KyhpTzV0UWBPNysoaU8kNlRRYE83KyhpTyQ2WVFhTzcrJ3xPT1EoQ1csNT5yLDU+ck9PUShDVy1FPFUtRTxVT09RUzcrKFc3KyhXTyQ2aFEoQ3lPNysoVE9JV1Emak83KyhUTyQ2clFxTzcrKFVPT1FTNysoVTcrKFVPSVdRJmpPNysoVU8kNnlRYE8nI0pgTyQ3VVFgTyw1PVNPT1FPLDU+dCw1PnRPT1FPLUU8Vy1FPFdPT1FTNysoWjcrKFpPJDhPUTdbTycjR3FPT1FTMUcydjFHMnZPSVdRJmpPMUcydk8pe1FkTzFHMnZPSVdRJmpPMUcydk8kOFZRYU8xRzJ2TyQ4ZVEma08xRzJ2TzVsUShDaE8xRzJ5TyM2U1FgTzFHMnlPNWJRYE8xRzJ5TyEtT1EhYk8xRzJ5TyEtV1Emak8xRzJ5TyQ4dlFgTycjSVtPJDlSUWBPLDU/e08kOVpRN1tPLDU/e09PUShDVzFHMnoxRzJ6T09RUzcrJFU3KyRVTyQ5Y1FgTzcrJFVPNWxRKENoTzcrJFVPJDloUWBPNyskVU8pe1FkTzFHNWpPKXtRZE8xRzVrTyQ5bVFkTzFHM1JPJDl0UWBPMUczUk8kOXlRZE8xRzNSTyQ6UVEoQ2hPMUc1ak9PUVM3KyhrNysoa081bFEoQ2hPNysodU9gUWRPNysod09PUVMnI0pmJyNKZk9PUVMnI0lfJyNJX08kOltRZE8sNT12T09RUyw1PXYsNT12Tyl7UWRPJyNIXU8kOmlRYE8nI0hfT09RUyw1PXwsNT18TzdZUWBPLDU9fE9PUVMsNT5PLDU+T09PUVM3KylRNyspUU9PUVM3KylXNyspV09PUVM3KylbNyspW09PUVM3KyleNyspXk9PUU8xRzVPMUc1T08kOm5RTWxPMUcwZ08kOnhRYE8xRzBnT09RTzFHL2kxRy9pTyQ7VFFNbE8xRy9pTzphUWBPMUcvaU9MYlFkTycjRGNPT1FPLDU+Yiw1PmJPT1FPLUU7dC1FO3RPT1FPLDU+Zyw1PmdPT1FPLUU7eS1FO3lPIS1PUSFiTzFHL2lPOmFRYE8sNTppT09RTyw1Om8sNTpvTyl7UWRPLDU6b08kO19RKENoTyw1Om9PJDtqUShDaE8sNTpvTyEtT1EhYk8sNTppT09RTy1FO3ctRTt3T09RKENbMUcwUzFHMFNPIUBYUTdbTyw1OmlPJDt4UTdbTyw1OmlPJDxaUShEak8sNTpvTyQ8dVE3W08sNTppTyFAWFE3W08sNTpvT09RTyw1OnQsNTp0TyQ8fFE3W08sNTpvTyQ9WlEoQ2hPLDU6b09PUShDWzcrJWs3KyVrTyNOYVFgTzcrJWtPI05mUXFPNysla09PUShDWzcrJXs3KyV7TzphUWBPNysle08hLU9RIWJPNysle08kPW9RKEN8TzcrKnBPKXtRZE83KypwT09RTzFHNFMxRzRTTzdZUWBPMUc0U08kPlBRYE83KypvTyQ+WFEoQ31PMUcyW08kQF5RKEN9TzFHMl5PJEJjUShDfU8xRzF5TyREblEsVk8sNT5jT09RTy1FO3UtRTt1TyREeFF0Tyw1PmRPKXtRZE8sNT5kT09RTy1FO3YtRTt2TyRFU1FgTzFHNVFPJEVbUU1sTzFHMGJPJEdjUU1sTzFHMG1PJEdqUU1sTzFHMG1PJElrUU1sTzFHMG1PJElyUU1sTzFHMG1PJEtnUU1sTzFHMG1PJEt6UU1sTzFHMG1PJE5YUU1sTzFHMG1PJE5gUU1sTzFHMG1PJSFhUU1sTzFHMG1PJSFoUU1sTzFHMG1PJSRdUU1sTzFHMG1PJSRwUShDfE88PEpUTyUlclFNbU8xRzBtTyUnfFFNbU8nI0lxTyUpaVFNbE8xRzFRT0xiUWRPJyNGXk9PUU8nI0pYJyNKWE9PUU8xRzFiMUcxYk8lKXZRYE8xRzFhTyUpe1FNbE8sNT5rT09PTzcrJ1Q3KydUT09PVzFHL1IxRy9ST09RKENdMUc0WDFHNFhPSmpRJmpPNysnek8lKlZRYE8sNT5sTzV0UWBPLDU+bE9PUU8tRTxPLUU8T08lKmVRYE8xRzVhTyUqZVFgTzFHNWFPJSptUWBPMUc1YU8lKnhRLFZPNysnZU8lK1lRcU8sNT5uTyUrZFFgTyw1Pm5PSVdRJmpPLDU+bk9PUU8tRTxRLUU8UU8lK2lRcU8xRzViTyUrc1FgTzFHNWJPT1EoQ1cxRzJUMUcyVE8kMXFRYE8xRzJUT09RKENXMUcyUzFHMlNPJSt7UWBPMUcyVU9JV1Emak8xRzJVT09RKENXMUcyWTFHMllPIS1PUSFiTzFHMlNPIzV9UWBPMUcyVE8lLFFRYE8xRzJVTyUsWVFgTzFHMlRPSmpRJmpPNysqYk9PUShDXTFHL1cxRy9XTyUsZVFgTzFHL1dPT1EoQ103KydgNysnYE8lLGpRLFZPNysnZ08lLHpRKEN8Tzw8SnNPT1EoQ1s8PEpzPDxKc09JV1Emak8nI0lWTyUta1FgTyw1P3dPT1FTPDxLaDw8S2hPSVdRJmpPPDxLaE8jTmFRYE88PEtoTyUtc1FgTzw8S2hPJS17UXFPPDxLaE9JV1Emak8xRzJXT09RUzw8R3k8PEd5TzphUWBPPDxHeU8lLlZRKEN8Tzw8SWhPT1EoQ1s8PEloPDxJaE9PUU8sNT53LDU+d08lLnZRYE8sNT53TyUue1FgTyw1PndPT1FPLUU8Wi1FPFpPJS9UUWBPMUc1aU8lL1RRYE8xRzVpTzV0UWBPMUc1aU8lL11RYE88PExUT09RUzw8TFQ8PExUTyUvYlFgTzw8TFRPNWxRKENoTzw8TFRPKXtRZE88PEtoT0lXUSZqTzw8S2hPT1FTPDxLbzw8S29PJDZoUShDeU88PEtvT09RUzw8S3A8PEtwTyQ2clFxTzw8S3BPJS9nUTdbTycjSVhPJS9yUWBPLDU/ek9MYlFkTyw1P3pPT1FTMUcybjFHMm5PI0xhUShEak8nI0VUTyFAWFE3W08nI0dyT09RTycjSVonI0laTyUvelE3W08sNT1dT09RUyw1PV0sNT1dTyUwUlE3W08nI0VUTyUwXlE3W08nI0VUTyUwdVE3W08nI0VUTyUxUFE3W08nI0dyTyUxYlFgTzcrKGJPJTFnUWBPNysoYk8lMW9RcU83KyhiT09RUzcrKGI3KyhiT0lXUSZqTzcrKGJPKXtRZE83KyhiT0lXUSZqTzcrKGJPJTF5UWFPNysoYk9PUVM3KyhlNysoZU81bFEoQ2hPNysoZU8jNlNRYE83KyhlTzViUWBPNysoZU8hLU9RIWJPNysoZU8lMlhRYE8sNT52T09RTy1FPFktRTxZT09RTycjR3UnI0d1TyUyZFFgTzFHNWdPNWxRKENoTzw8R3BPT1FTPDxHcDw8R3BPJTJsUWBPPDxHcE8lMnFRYE83KytVTyUydlFgTzcrK1ZPT1FTNysobTcrKG1PJTJ7UWBPNysobU8lM1FRZE83KyhtTyUzWFFgTzcrKG1PKXtRZE83KytVTyl7UWRPNysrVk9PUVM8PExhPDxMYU9PUVM8PExjPDxMY09PUVMtRTxdLUU8XU9PUVMxRzNiMUczYk8lM15RYE8sNT13T09RUyw1PXksNT15TyUzY1FgTzFHM2hPTGJRZE83KyZST09RTzcrJVQ3KyVUTyUzaFFNbE8xRzVYTzphUWBPNyslVE9PUU8xRzBUMUcwVE8lM3JRKEN8TzFHMFpPT1FPMUcwWjFHMFpPKXtRZE8xRzBaTyUzfFEoQ2hPMUcwWk86YVFgTzFHMFRPIS1PUSFiTzFHMFRPIUBYUTdbTzFHMFRPJTRYUShDaE8xRzBaTyU0Z1E3W08xRzBUTyU0eFEoQ2hPMUcwWk8lNV5RKERqTzFHMFpPJTVoUTdbTzFHMFRPIUBYUTdbTzFHMFpPT1EoQ1s8PElWPDxJVk9PUShDWzw8SWc8PElnTzphUWBPPDxJZ08lNW9RKEN8Tzw8TltPT1FPNyspbjcrKW5PJTZQUShDfU83KydlTyU4W1EoQ31PNysnZ08lOmdRdE8xRzRPTyU6cVFNbE83KyV8TyU7Z1FNbU8sNTlqTyU9aFFNbU8sNTxVTyU/bFFNbU8sNTxXTyVBW1FNbU8sNTxmTyVCfVFNbE83KydXTyVDW1FNbE83KydYTyVDaVFgTyw1O3hPT1FPNysmezcrJntPJUNuUSxWTzw8S2ZPT1FPMUc0VzFHNFdPJUN1UWBPMUc0V08lRFFRYE8xRzRXTyVEYFFgTzcrKntPJURgUWBPNysqe09JV1Emak8xRzRZTyVEaFFxTzFHNFlPJURyUWBPNysqfE9PUShDVzcrJ283KydvTyQxcVFgTzcrJ3BPJUR6UXFPNysncE9PUShDVzcrJ243KyduTyQxcVFgTzcrJ29PJUVSUWBPNysncE9JV1Emak83KydwTyM1fVFgTzcrJ29PJUVXUSxWTzw8TXxPT1EoQ103KyRyNyskck8lRWJRcU8sNT5xT09RTy1FPFQtRTxUTyNOYVFgT0FOQVNPT1FTQU5BU0FOQVNPSVdRJmpPQU5BU08lRWxRKEN5TzcrJ3JPT1FTQU49ZUFOPWVPNXRRYE8xRzRjT09RTzFHNGMxRzRjTyVFfFFgTzFHNGNPJUZSUWBPNysrVE8lRlJRYE83KytUTzVsUShDaE9BTkFvTyVGWlFgT0FOQW9PT1FTQU5Bb0FOQW9PJUZgUWBPQU5BU08lRmhRcU9BTkFTT09RU0FOQVpBTkFaT09RU0FOQVtBTkFbTyVGclFgTyw1PnNPT1FPLUU8Vi1FPFZPJUZ9UU1sTzFHNWZPIzZTUWBPLDU9Xk81YlFgTyw1PV5PIS1PUSFiTyw1PV5PT1FPLUU8WC1FPFhPT1FTMUcydzFHMndPJDxaUShEak8sNTpvTyFAWFE3W08sNT1eTyVHWFE3W08sNT1eTyVHalE3W08sNTpvT09RUzw8S3w8PEt8T0lXUSZqTzw8S3xPJTFiUWBPPDxLfE8lR3RRYE88PEt8TyVHfFFxTzw8S3xPKXtRZE88PEt8T0lXUSZqTzw8S3xPT1FTPDxMUDw8TFBPNWxRKENoTzw8TFBPIzZTUWBPPDxMUE81YlFgTzw8TFBPJUhXUTdbTzFHNGJPJUhgUWBPNysrUk9PUVNBTj1bQU49W081bFEoQ2hPQU49W09PUVM8PE5wPDxOcE9PUVM8PE5xPDxOcU9PUVM8PExYPDxMWE8lSGhRYE88PExYTyVIbVFkTzw8TFhPJUh0UWBPPDxOcE8lSHlRYE88PE5xT09RUzFHM2MxRzNjTzphUWBPNyspU08lSU9RTWxPPDxJbU9PUU88PEhvPDxIb09PUU83KyV1NysldU8lM3JRKEN8TzcrJXVPKXtRZE83KyV1T09RTzcrJW83KyVvTzphUWBPNyslb08hLU9RIWJPNyslb08lSVlRKENoTzcrJXVPIUBYUTdbTzcrJW9PJUllUShDaE83KyV1TyVJc1E3W083KyVvTyVKVVEoQ2hPNysldU9PUShDW0FOP1JBTj9STyVKalFNbE88PEpUTyVKd1FNbU8xRzF5TyVNT1FNbU8xRzJbTyYgU1FNbU8xRzJeTyYhclFNbE88PEpzTyYjUFFNbE88PEloT09RTzFHMWQxRzFkT0pqUSZqT0FOQVFPT1FPNyspcjcrKXJPJiNeUWBPNyspck8mI2lRYE88PE5nTyYjcVFxTzcrKXRPT1EoQ1c8PEtbPDxLW08kMXFRYE88PEtbT09RKENXPDxLWjw8S1pPJiN7UXFPPDxLW08kMXFRYE88PEtaT09RU0cyNm5HMjZuTyNOYVFgT0cyNm5PT1FPNyspfTcrKX1PNXRRYE83Kyl9TyYkU1FgTzw8Tm9PT1FTRzI3WkcyN1pPNWxRKENoT0cyN1pPSVdRJmpPRzI2bk9MYlFkTzFHNF9PJiRbUWBPNysrUU81bFEoQ2hPMUcyeE8jNlNRYE8xRzJ4TzViUWBPMUcyeE8hLU9RIWJPMUcyeE8hQFhRN1tPMUcyeE8lNV5RKERqTzFHMFpPJiRkUTdbTzFHMnhPJTFiUWBPQU5BaE9PUVNBTkFoQU5BaE9JV1Emak9BTkFoTyYkdVFgT0FOQWhPJiR9UXFPQU5BaE9PUVNBTkFrQU5Ba081bFEoQ2hPQU5Ba08jNlNRYE9BTkFrT09RTycjR3YnI0d2T09RTzcrKXw3Kyl8T09RU0cyMnZHMjJ2T09RU0FOQXNBTkFzTyYlWFFgT0FOQXNPT1FTQU5EW0FORFtPT1FTQU5EXUFORF1PT1FTPDxMbjw8TG5PT1FPPDxJYTw8SWFPJTNyUShDfE88PElhT09RTzw8SVo8PElaTzphUWBPPDxJWk8pe1FkTzw8SWFPIS1PUSFiTzw8SVpPJiVeUShDaE88PElhTyFAWFE3W088PElaTyYlaVEoQ2hPPDxJYU8mJXdRTW1PNysnZU8mJ2pRTW1PNysnZ08mKV1RLFZPRzI2bE9PUU88PE1ePDxNXk9PUShDV0FOQHZBTkB2TyQxcVFgT0FOQHZPT1EoQ1dBTkB1QU5AdU9PUVNMRCxZTEQsWU9PUU88PE1pPDxNaU9PUVNMRCx1TEQsdU8jTmFRYE9MRCxZTyYpbVFNbE83Kyl5T09RTzcrKGQ3KyhkTzVsUShDaE83KyhkTyM2U1FgTzcrKGRPNWJRYE83KyhkTyEtT1EhYk83KyhkTyFAWFE3W083KyhkT09RU0cyN1NHMjdTTyUxYlFgT0cyN1NPSVdRJmpPRzI3U09PUVNHMjdWRzI3Vk81bFEoQ2hPRzI3Vk9PUVNHMjdfRzI3X09PUU9BTj57QU4+e09PUU9BTj51QU4+dU8lM3JRKEN8T0FOPntPOmFRYE9BTj51Tyl7UWRPQU4+e08hLU9RIWJPQU4+dU8mKXdRKENoT0FOPntPJipTUShDfU9HMjZsT09RKENXRzI2YkcyNmJPT1FTISQoIHQhJCggdE9PUU88PExPPDxMT081bFEoQ2hPPDxMT08jNlNRYE88PExPTzViUWBPPDxMT08hLU9RIWJPPDxMT09PUVNMRCxuTEQsbk8lMWJRYE9MRCxuT09RU0xELHFMRCxxT09RT0cyNGdHMjRnT09RT0cyNGFHMjRhTyUzclEoQ3xPRzI0Z086YVFgT0cyNGFPKXtRZE9HMjRnTyYscFEhTFJPLDU6ck8mLWdRJElUTycjSXFPT1FPQU5BakFOQWpPNWxRKENoT0FOQWpPIzZTUWBPQU5Bak81YlFgT0FOQWpPT1FTISQoIVkhJCghWU9PUU9MRCpSTEQqUk9PUU9MRCl7TEQpe08lM3JRKEN8T0xEKlJPJi5aUU1tT0cyNmxPJi98USFMUk8sNTlqTyYwcFEhTFJPLDU8VU8mMWRRIUxSTyw1PFdPJjJXUSFMUk8sNTxmT09RT0cyN1VHMjdVTzVsUShDaE9HMjdVTyM2U1FgT0cyN1VPT1FPISQnTW0hJCdNbU8mMn1RIUxSTzFHMltPJjNxUSFMUk8xRzJeTyY0ZVEhTFJPMUcxeU9PUU9MRCxwTEQscE81bFEoQ2hPTEQscE8mNVtRIUxSTzcrJ2VPJjZSUSFMUk83KydnT09RTyEkKCFbISQoIVtPJjZ4USFMUk9HMjZsT0xiUWRPJyNEck8mN29RdE8nI0l0T0xiUWRPJyNEak8mN3ZRKEN8TycjQ2hPJjhhUXRPJyNDaE8mOHFRZE8sNTp2TyY6cVEmak8nI0VXT0xiUWRPLDU7Uk9MYlFkTyw1O1JPTGJRZE8sNTtST0xiUWRPLDU7Uk9MYlFkTyw1O1JPTGJRZE8sNTtST0xiUWRPLDU7Uk9MYlFkTyw1O1JPTGJRZE8sNTtST0xiUWRPLDU7Uk9MYlFkTyw1O1JPTGJRZE8nI0lQTyY8T1FgTyw1PFRPJj1lUSZqTyw1O1JPTGJRZE8sNTtmTyEod1FgTycjRE9PISh3UWBPJyNET08hKHdRYE8nI0RPT0lXUSZqTycjRmpPJjpxUSZqTycjRmpPJjxXUSZqTycjRmpPSVdRJmpPJyNGbE8mOnFRJmpPJyNGbE8mPFdRJmpPJyNGbE9JV1Emak8nI0Z6TyY6cVEmak8nI0Z6TyY8V1Emak8nI0Z6T0xiUWRPLDU/bU8mOHFRZE8xRzBiTyY9bFFNbE8nI0NoT0xiUWRPMUcxbE9JV1Emak8sNTxwTyY6cVEmak8sNTxwTyY8V1Emak8sNTxwT0lXUSZqTyw1PHJPJjpxUSZqTyw1PHJPJjxXUSZqTyw1PHJPSVdRJmpPLDU8X08mOnFRJmpPLDU8X08mPFdRJmpPLDU8X08mOHFRZE8xRzFtT0xiUWRPNysmaU9JV1Emak8xRzF5TyY6cVEmak8xRzF5TyY8V1Emak8xRzF5T0lXUSZqTzFHMXtPJjpxUSZqTzFHMXtPJjxXUSZqTzFHMXtPJjhxUWRPNysnWE8mOHFRZE83KyV8TyY9dlFgTzcrJ3BPSVdRJmpPQU5BUU8mOnFRJmpPQU5BUU8mPFdRJmpPQU5BUU8mPXZRYE88PEtbTyY9dlFgT0FOQHZPJj17UWBPJyNFW08mPlFRYE8nI0VbTyY+WVFgTycjRXpPJj5fUWBPJyNFZ08mPmRRYE8nI0pSTyY+b1FgTycjSlBPJj56UWBPLDU6dk8mP1BRLFZPLDU8UU8mP1dRYE8nI0ZzTyY/XVFgTycjRnNPJj9iUWBPJyNGc08mP2dRYE8sNTxSTyY/b1FgTyw1OnZPJj93UU1sTzFHMH1PJkBPUWBPLDU8X08mQFRRYE8sNTxfTyZAWVFgTyw1PF9PJkBfUWBPLDU8YU8mQGRRYE8sNTxhTyZAaVFgTyw1PGFPJkBuUWBPMUcxbU8mQHNRYE8xRzBiTyZAeFFgTzFHMlVPJkB9USxWTzw8S2ZPJkFVUSxWTzw8S2ZPJkFdUSxWTzw8S2ZPJkFkUXFPNysncE8mQWtRYE83KydwTyZBcFFxTzw8S1tPNFFRJmpPJyNGaE81YlFgTycjRmdPQnpRYE8nI0VaT0xiUWRPLDU7Y08hJldRYE8nI0ZzTyEmV1FgTycjRnNPISZXUWBPJyNGc08hJldRYE8nI0Z1TyEmV1FgTycjRnVPISZXUWBPJyNGdU8mQXdRYE8sNTxqT0pqUSZqTzcrJ3pPSmpRJmpPNysnek9KalEmak83Kyd6T0lXUSZqTzFHMlVPJkJQUWBPMUcyVU9JV1Emak83KydwTyEnVlE3W08nI0dPTyQvZVFxTzFHMmBPJC9lUXFPMUcyYE8kL2VRcU8xRzJgTyEnVlE3W08sNTxqT0lXUSZqTyw1PHRPSVdRJmpPLDU8dE9JV1Emak8sNTx0XCIsXG4gIHN0YXRlRGF0YTogXCImQn1+TydZT1MnWk9TVE9TVU9Tfk9RVE9SVE9YeU9dY09faE9ibk9jbU9oY09qVE9rY09sY09xVE9zVE94Uk97Y098Y099Y08hVFNPIV9rTyFkVU8hZ1RPIWhUTyFpVE8halRPIWtUTyFubE8jZHNPI3RwTyN4Xk8lUHFPJVJ0TyVUck8lVXJPJVh1TyVadk8lXndPJV93TyVheE8lbnpPJXR7TyV2fE8leH1PJXohT08lfSFQTyZUIVFPJlohUk8mXSFTTyZfIVRPJmEhVU8mYyFWTyddUE8nZlFPJ29ZTyd8YU9+T1FbWFpbWF9bWGpbWHVbWHZbWHhbWCFSW1ghYVtYIWJbWCFkW1ghaltYIXtbWCNXZFgjW1tYI11bWCNeW1gjX1tYI2BbWCNhW1gjYltYI2NbWCNlW1gjZ1tYI2lbWCNqW1gjb1tYJ1dbWCdmW1gncFtYJ3dbWCd4W1h+TyFdJGxYflAkek9TIVdPJ1UhWE8nViFaT35PUVRPUlRPXWNPYiFrT2Mhak9oY09qVE9rY09sY09xVE9zVE94Uk97Y098Y099Y08hVCFiTyFfa08hZFVPIWdUTyFoVE8haVRPIWpUTyFrVE8hbiFpTyN0IWxPI3heTyddIVtPJ2ZRTydvWU8nfGFPfk8hUSFgTyFSIV1PIU8nalAhTyd0UH5QJ2RPIVMhbU9+UGBPUVRPUlRPXWNPYiFrT2Mhak9oY09qVE9rY09sY09xVE9zVE94Uk97Y098Y099Y08hVCFiTyFfa08hZFVPIWdUTyFoVE8haVRPIWpUTyFrVE8hbiFpTyN0IWxPI3heTyddOWFPJ2ZRTydvWU8nfGFPfk9RVE9SVE9dY09iIWtPYyFqT2hjT2pUT2tjT2xjT3FUT3NUT3hST3tjT3xjT31jTyFUIWJPIV9rTyFkVU8hZ1RPIWhUTyFpVE8halRPIWtUTyFuIWlPI3QhbE8jeF5PJ2ZRTydvWU8nfGFPfk8hUSFyTyNVIXVPI1Yhck8nXTliTyFjJ3FQflAre08jVyF2T35PIV0hd08jVyF2T35PUSNeT1ojZE9qI1JPdSF7T3Yhe094IXxPIVIjYk8hYSNUTyFiIXlPIWQhek8haiNeTyNbI1BPI10jUU8jXiNRTyNfI1FPI2AjU08jYSNUTyNiI1RPI2MjVE8jZSNVTyNnI1dPI2kjWU8jaiNaTydmUU8ncCNbTyd3IX1PJ3gjT09+T18naFgnVydoWCFjJ2hYIU8naFghVCdoWCVRJ2hYIV0naFh+UC5qTyF7I2VPI28jZU9RJ2lYWidpWF8naVhqJ2lYdSdpWHYnaVh4J2lYIVInaVghYSdpWCFiJ2lYIWQnaVghaidpWCNbJ2lYI10naVgjXidpWCNfJ2lYI2AnaVgjYSdpWCNiJ2lYI2UnaVgjZydpWCNpJ2lYI2onaVgnZidpWCdwJ2lYJ3cnaVgneCdpWH5PI2MnaVgnVydpWCFPJ2lYIWMnaVhuJ2lYIVQnaVglUSdpWCFdJ2lYflAwek8heyNlT35PI3ojZk8kUiNqT35PIVQja08jeF5PJFUjbE8kVyNuT35PXSNxT2gkUU9qI3JPayNxT2wjcU9xJFJPcyRTT3gjeU8hVCN6TyFfJFhPIWQjdk8jViRZTyN0JFZPJF8kVE8kYSRVTyRkJFdPJ10jcE8nYiRQTydmI3NPJ2EnY1B+TyFkJFpPfk8hXSRdT35PXyReTydXJF5Pfk8nXSRiT35PIWQkWk8nXSRiTydeJGRPJ2IkUE9+T2Mkak8hZCRaTyddJGJPfk8jYyNUT35PXSRzT3Ukb08hVCRsTyFkJG5PJVIkck8nXSRiTydeJGRPXihVUH5PIW4kdE9+T3gkdU8hVCR2TyddJGJPfk94JHVPIVQkdk8lWiR6TyddJGJPfk8nXSR7T35PI2RzTyVSdE8lVHJPJVVyTyVYdU8lWnZPJV53TyVfd09+T2IlVU9jJVRPIW4lUk8lUCVTTyVjJVFPflA3eE9iJVhPY21PIVQlV08hbmxPI2RzTyVQcU8lVHJPJVVyTyVYdU8lWnZPJV53TyVfd08lYXhPfk9gJVtPIXslX08lUiVZTydeJGRPflA4d08hZCVgTyFnJWRPfk8hZCVlT35PIVRTT35PXyReTydUJW1PJ1ckXk9+T18kXk8nVCVwTydXJF5Pfk9fJF5PJ1Qlck8nVyReT35PUyFXTydVIVhPJ1Yldk9+T1FbWFpbWGpbWHVbWHZbWHhbWCFSW1ghUmRYIWFbWCFiW1ghZFtYIWpbWCF7W1ghe2RYI1dkWCNbW1gjXVtYI15bWCNfW1gjYFtYI2FbWCNiW1gjY1tYI2VbWCNnW1gjaVtYI2pbWCNvW1gnZltYJ3BbWCd3W1gneFtYfk8hT1tYIU9kWH5QO2RPIVEleE8hTyZpWCFPJm5YIVImaVghUiZuWH5QJ2RPIVIlek8hTydqWH5PUSNeT1ojZE9qI1JPdSF7T3Yhe094IXxPIVIlek8hYSNUTyFiIXlPIWQhek8haiNeTyNbI1BPI10jUU8jXiNRTyNfI1FPI2AjU08jYSNUTyNiI1RPI2MjVE8jZSNVTyNnI1dPI2kjWU8jaiNaTydmUU8ncCNbTyd3IX1PJ3gjT09+TyFPJ2pYflA+YU8hTyZQT35PeCZTTyFXJl5PIVgmVk8hWSZWTydeJGRPfk9dJlRPayZUTyFRJldPJ2cmUU8hUydrUCFTJ3ZQflBAZE8hTydzWCFSJ3NYIV0nc1ghYydzWCdwJ3NYfk8heydzWCNXI1BYIVMnc1h+UEFdTyF7Jl9PIU8ndVghUid1WH5PIVImYE8hTyd0WH5PIU8mY09+TyF7I2VPflBBXU9QJmdPIVQmZE8hbyZmTyddJGJPfk9jJmxPIWQkWk8nXSRiT35PdSRvTyFkJG5Pfk8hUyZtT35QYE91IXtPdiF7T3ghfE8hYiF5TyFkIXpPJ2ZRT1EhZmFaIWZhaiFmYSFSIWZhIWEhZmEhaiFmYSNbIWZhI10hZmEjXiFmYSNfIWZhI2AhZmEjYSFmYSNiIWZhI2MhZmEjZSFmYSNnIWZhI2khZmEjaiFmYSdwIWZhJ3chZmEneCFmYX5PXyFmYSdXIWZhIU8hZmEhYyFmYW4hZmEhVCFmYSVRIWZhIV0hZmF+UENmTyFjJm5Pfk8hXSF3TyF7JnBPJ3Amb08hUidyWF8nclgnVydyWH5PIWMnclh+UEZPTyFSJnRPIWMncVh+TyFjJnZPfk94JHVPIVQkdk8jViZ3TyddJGJPfk9RVE9SVE9dY09iIWtPYyFqT2hjT2pUT2tjT2xjT3FUT3NUT3hST3tjT3xjT31jTyFUU08hX2tPIWRVTyFnVE8haFRPIWlUTyFqVE8ha1RPIW4haU8jdCFsTyN4Xk8nXTlhTydmUU8nb1lPJ3xhT35PXSNxT2gkUU9qI3JPayNxT2wjcU9xJFJPczl0T3gjeU8hVCN6TyFfO2VPIWQjdk8jVjl9TyN0JFZPJF85d08kYTl6TyRkJFdPJ10me08nYiRQTydmI3NPfk8jVyZ9T35PXSNxT2gkUU9qI3JPayNxT2wjcU9xJFJPcyRTT3gjeU8hVCN6TyFfJFhPIWQjdk8jViRZTyN0JFZPJF8kVE8kYSRVTyRkJFdPJ10me08nYiRQTydmI3NPfk8nYSdtUH5QSmpPIVEnUk8hYyduUH5QKXtPJ2cnVE8nb1lPfk9ROV5PUjleT11jT2I7YE9jIWpPaGNPajleT2tjT2xjT3E5Xk9zOV5PeFJPe2NPfGNPfWNPIVQhYk8hXzlgTyFkVU8hZzleTyFoOV5PIWk5Xk8hajleTyFrOV5PIW4haU8jdCFsTyN4Xk8nXSdjTydmUU8nb1lPJ3w7Xk9+TyFkIXpPfk8hUiNiT18kXWEnVyRdYSFjJF1hIU8kXWEhVCRdYSVRJF1hIV0kXWF+TyNkJ2pPflBJV08hXSdsTyFUJ3lYI3cneVgjeid5WCRSJ3lYfk91J21PflAhIFlPdSdtTyFUJ3lYI3cneVgjeid5WCRSJ3lYfk8hVCdvTyN3J3NPI3onbk8kUid0T35PIVEnd09+UExiTyN6I2ZPJFInek9+T1AkZVh1JGVYeCRlWCFiJGVYJ3ckZVgneCRlWH5PUGZYIVJmWCF7ZlgnYWZYJ2EkZVh+UCEhck9rJ3xPfk9TJ31PJ1UoT08nVihRT35PUChaT3UoU094KFRPJ3coVk8neChYT35PJ2EoUk9+UCEje08nYShbT35PXSNxT2gkUU9qI3JPayNxT2wjcU9xJFJPczl0T3gjeU8hVCN6TyFfO2VPIWQjdk8jVjl9TyN0JFZPJF85d08kYTl6TyRkJFdPJ2IkUE8nZiNzT35PIVEoYE8nXShdTyFjJ31QflAhJGpPI1coYk9+TyFkKGNPfk8hUShoTyddKGVPIU8oT1B+UCEkak9qKHVPeChtTyFXKHNPIVgobE8hWShsTyFkKGNPIXgodE8kdyhvTydeJGRPJ2coak9+TyFTKHJPflAhJmpPIWIheU9QJ2VYdSdlWHgnZVgndydlWCd4J2VYIVInZVgheydlWH5PJ2EnZVgjbSdlWH5QISdjT1AoeE8heyh3TyFSJ2RYJ2EnZFh+TyFSKHlPJ2EnY1h+TyddJHtPJ2EnY1B+TyddKHxPfk8hZClST35PJ10me09+T3gkdU8hUSFyTyFUJHZPI1UhdU8jViFyTyddJGJPIWMncVB+TyFdIXdPI1cpVk9+T1EjXk9aI2RPaiNST3Uhe092IXtPeCF8TyFhI1RPIWIheU8hZCF6TyFqI15PI1sjUE8jXSNRTyNeI1FPI18jUU8jYCNTTyNhI1RPI2IjVE8jYyNUTyNlI1VPI2cjV08jaSNZTyNqI1pPJ2ZRTydwI1tPJ3chfU8neCNPT35PXyFeYSFSIV5hJ1chXmEhTyFeYSFjIV5hbiFeYSFUIV5hJVEhXmEhXSFeYX5QISl3T1ApX08hVCZkTyFvKV5PJVEpXU8nYiRQT35PIV0pYU8hVCdgWF8nYFghUidgWCdXJ2BYfk8hZCRaTydiJFBPfk8hZCRaTyddJGJPJ2IkUE9+TyFdIXdPI1cmfU9+T10pbE8lUiltTyddKWlPIVMoVlB+TyFSKW5PXihVWH5PJ2cnVE9+T1opck9+T14pc09+TyFUJGxPJ10kYk8nXiRkT14oVVB+T3gkdU8hUSl4TyFSJmBPIVQkdk8nXSRiTyFPJ3RQfk9dJlpPayZaTyFRKXlPJ2cnVE8hUyd2UH5PIVIpek9fKFJYJ1coUlh+TyF7Kk9PJ2IkUE9+T1AqUk8hVCN6TydiJFBPfk8hVCpUT35PdSpWTyFUU09+TyFuKltPfk9jKmFPfk8nXSh8TyFTKFRQfk9jJGpPfk8lUnRPJ10ke09+UDh3T1oqZ09eKmZPfk9RVE9SVE9dY09ibk9jbU9oY09qVE9rY09sY09xVE9zVE94Uk97Y098Y099Y08hX2tPIWRVTyFnVE8haFRPIWlUTyFqVE8ha1RPIW5sTyN4Xk8lUHFPJ2ZRTydvWU8nfGFPfk8hVCFiTyN0IWxPJ105YU9+UCExX09eKmZPXyReTydXJF5Pfk9fKmtPI2QqbU8lVCptTyVVKm1PflApe08hZCVgT35PJXQqck9+TyFUKnRPfk8mVip2TyZYKndPUSZTYVImU2FYJlNhXSZTYV8mU2FiJlNhYyZTYWgmU2FqJlNhayZTYWwmU2FxJlNhcyZTYXgmU2F7JlNhfCZTYX0mU2EhVCZTYSFfJlNhIWQmU2EhZyZTYSFoJlNhIWkmU2EhaiZTYSFrJlNhIW4mU2EjZCZTYSN0JlNhI3gmU2ElUCZTYSVSJlNhJVQmU2ElVSZTYSVYJlNhJVomU2ElXiZTYSVfJlNhJWEmU2ElbiZTYSV0JlNhJXYmU2EleCZTYSV6JlNhJX0mU2EmVCZTYSZaJlNhJl0mU2EmXyZTYSZhJlNhJmMmU2EnUyZTYSddJlNhJ2YmU2EnbyZTYSd8JlNhIVMmU2EleyZTYWAmU2EmUSZTYX5PJ10qfE9+T24rUE9+TyFPJmlhIVImaWF+UCEpd08hUStUTyFPJmlYIVImaVh+UCl7TyFSJXpPIU8namF+TyFPJ2phflA+YU8hUiZgTyFPJ3Rhfk8hUndYIVIhWlghU3dYIVMhWlghXXdYIV0hWlghZCFaWCF7d1gnYiFaWH5PIV0rWU8heytYTyFSI1RYIVInbFghUyNUWCFTJ2xYIV0nbFghZCdsWCdiJ2xYfk8hXStbTyFkJFpPJ2IkUE8hUiFWWCFTIVZYfk9dJlJPayZST3gmU08nZyhqT35PUTleT1I5Xk9dY09iO2BPYyFqT2hjT2o5Xk9rY09sY09xOV5PczleT3hST3tjT3xjT31jTyFUIWJPIV85YE8hZFVPIWc5Xk8haDleTyFpOV5PIWo5Xk8hazleTyFuIWlPI3QhbE8jeF5PJ2ZRTydvWU8nfDteT35PJ106U09+UCE7ak8hUitgTyFTJ2tYfk8hUytiT35PIV0rWU8heytYTyFSI1RYIVMjVFh+TyFSK2NPIVMndlh+TyFTK2VPfk9dJlJPayZST3gmU08nXiRkTydnKGpPfk8hWCtmTyFZK2ZPflAhPmhPeCR1TyFRK2hPIVQkdk8nXSRiTyFPJm5YIVImblh+T18rbE8hVytvTyFYK2tPIVkra08hcitzTyFzK3FPIXQrck8hdStwTyF4K3RPJ14kZE8nZyhqTydvK2lPfk8hUytuT35QIT9pT1AreU8hVCZkTyFvK3hPfk8heyxQTyFSJ3JhIWMncmFfJ3JhJ1cncmF+TyFdIXdPflAhQHNPIVImdE8hYydxYX5PeCR1TyFRLFNPIVQkdk8jVSxVTyNWLFNPJ10kYk8hUiZwWCFjJnBYfk9fI09pIVIjT2knVyNPaSFPI09pIWMjT2luI09pIVQjT2klUSNPaSFdI09pflAhKXdPUDt0T3UoU094KFRPJ3coVk8neChYT35PI1chemEhUiF6YSFjIXphIXshemEhVCF6YV8hemEnVyF6YSFPIXphflAhQnBPI1cnZVhRJ2VYWidlWF8nZVhqJ2VYdidlWCFhJ2VYIWQnZVghaidlWCNbJ2VYI10nZVgjXidlWCNfJ2VYI2AnZVgjYSdlWCNiJ2VYI2MnZVgjZSdlWCNnJ2VYI2knZVgjaidlWCdXJ2VYJ2YnZVgncCdlWCFjJ2VYIU8nZVghVCdlWG4nZVglUSdlWCFdJ2VYflAhJ2NPIVIsX08nYSdtWH5QISN7TydhLGFPfk8hUixiTyFjJ25YflAhKXdPIWMsZU9+TyFPLGZPfk9RI15PdSF7T3Yhe094IXxPIWIheU8hZCF6TyFqI15PJ2ZRT1ojWmlfI1ppaiNaaSFSI1ppIWEjWmkjXSNaaSNeI1ppI18jWmkjYCNaaSNhI1ppI2IjWmkjYyNaaSNlI1ppI2cjWmkjaSNaaSNqI1ppJ1cjWmkncCNaaSd3I1ppJ3gjWmkhTyNaaSFjI1ppbiNaaSFUI1ppJVEjWmkhXSNaaX5PI1sjWml+UCFGZk8jWyNQT35QIUZmT1EjXk91IXtPdiF7T3ghfE8hYiF5TyFkIXpPIWojXk8jWyNQTyNdI1FPI14jUU8jXyNRTydmUU9aI1ppXyNaaSFSI1ppIWEjWmkjYCNaaSNhI1ppI2IjWmkjYyNaaSNlI1ppI2cjWmkjaSNaaSNqI1ppJ1cjWmkncCNaaSd3I1ppJ3gjWmkhTyNaaSFjI1ppbiNaaSFUI1ppJVEjWmkhXSNaaX5PaiNaaX5QIUlRT2ojUk9+UCFJUU9RI15PaiNST3Uhe092IXtPeCF8TyFiIXlPIWQhek8haiNeTyNbI1BPI10jUU8jXiNRTyNfI1FPI2AjU08nZlFPXyNaaSFSI1ppI2UjWmkjZyNaaSNpI1ppI2ojWmknVyNaaSdwI1ppJ3cjWmkneCNaaSFPI1ppIWMjWmluI1ppIVQjWmklUSNaaSFdI1ppfk9aI1ppIWEjWmkjYSNaaSNiI1ppI2MjWml+UCFLbE9aI2RPIWEjVE8jYSNUTyNiI1RPI2MjVE9+UCFLbE9RI15PWiNkT2ojUk91IXtPdiF7T3ghfE8hYSNUTyFiIXlPIWQhek8haiNeTyNbI1BPI10jUU8jXiNRTyNfI1FPI2AjU08jYSNUTyNiI1RPI2MjVE8jZSNVTydmUU9fI1ppIVIjWmkjZyNaaSNpI1ppI2ojWmknVyNaaSdwI1ppJ3gjWmkhTyNaaSFjI1ppbiNaaSFUI1ppJVEjWmkhXSNaaX5PJ3cjWml+UCFOZE8ndyF9T35QIU5kT1EjXk9aI2RPaiNST3Uhe092IXtPeCF8TyFhI1RPIWIheU8hZCF6TyFqI15PI1sjUE8jXSNRTyNeI1FPI18jUU8jYCNTTyNhI1RPI2IjVE8jYyNUTyNlI1VPI2cjV08nZlFPJ3chfU9fI1ppIVIjWmkjaSNaaSNqI1ppJ1cjWmkncCNaaSFPI1ppIWMjWmluI1ppIVQjWmklUSNaaSFdI1ppfk8neCNaaX5QIyNPTyd4I09PflAjI09PUSNeT1ojZE9qI1JPdSF7T3Yhe094IXxPIWEjVE8hYiF5TyFkIXpPIWojXk8jWyNQTyNdI1FPI14jUU8jXyNRTyNgI1NPI2EjVE8jYiNUTyNjI1RPI2UjVU8jZyNXTyNpI1lPJ2ZRTyd3IX1PJ3gjT09+T18jWmkhUiNaaSNqI1ppJ1cjWmkncCNaaSFPI1ppIWMjWmluI1ppIVQjWmklUSNaaSFdI1ppflAjJWpPUVtYWltYaltYdVtYdltYeFtYIWFbWCFiW1ghZFtYIWpbWCF7W1gjV2RYI1tbWCNdW1gjXltYI19bWCNgW1gjYVtYI2JbWCNjW1gjZVtYI2dbWCNpW1gjaltYI29bWCdmW1gncFtYJ3dbWCd4W1ghUltYIVNbWH5PI21bWH5QIyd9T1EjXk9aOXJPajlnT3Uhe092IXtPeCF8TyFhOWlPIWIheU8hZCF6TyFqI15PI1s5ZU8jXTlmTyNeOWZPI185Zk8jYDloTyNhOWlPI2I5aU8jYzlpTyNlOWpPI2c5bE8jaTluTyNqOW9PJ2ZRTydwI1tPJ3chfU8neCNPT35PI20saE9+UCMqWE9RJ2lYWidpWGonaVh1J2lYdidpWHgnaVghYSdpWCFiJ2lYIWQnaVghaidpWCNbJ2lYI10naVgjXidpWCNfJ2lYI2AnaVgjYSdpWCNiJ2lYI2UnaVgjZydpWCNpJ2lYI2onaVgnZidpWCdwJ2lYJ3cnaVgneCdpWCFSJ2lYfk8hezlzTyNvOXNPI2MnaVgjbSdpWCFTJ2lYflAjLFNPXyZzYSFSJnNhJ1cmc2EhYyZzYW4mc2EhTyZzYSFUJnNhJVEmc2EhXSZzYX5QISl3T1EjWmlaI1ppXyNaaWojWml2I1ppIVIjWmkhYSNaaSFiI1ppIWQjWmkhaiNaaSNbI1ppI10jWmkjXiNaaSNfI1ppI2AjWmkjYSNaaSNiI1ppI2MjWmkjZSNaaSNnI1ppI2kjWmkjaiNaaSdXI1ppJ2YjWmkncCNaaSFPI1ppIWMjWmluI1ppIVQjWmklUSNaaSFdI1ppflAhQnBPXyNuaSFSI25pJ1cjbmkhTyNuaSFjI25pbiNuaSFUI25pJVEjbmkhXSNuaX5QISl3TyN6LGpPfk8jeixrT35PIV0nbE8heyxsTyFUJE9YI3ckT1gjeiRPWCRSJE9Yfk8hUSxtT35PIVQnb08jdyxvTyN6J25PJFIscE9+TyFSOXBPIVMnaFh+UCMqWE8hUyxxT35PJFIsc09+T1MnfU8nVShPTydWLHZPfk9dLHlPayx5TyFPLHpPfk8hUmRYIV1kWCFjZFghYyRlWCdwZFh+UCEhck8hYy1RT35QIUJwTyFSLVJPIV0hd08ncCZvTyFjJ31Yfk8hYy1XT35PIVEoYE8nXSRiTyFjJ31Qfk8jVy1ZT35PIU8kZVghUiRlWCFdJGxYflAhIXJPIVItWk8hTyhPWH5QIUJwTyFdLV1Pfk8hTy1fT35Pai1jTyFdIXdPIWQkWk8nYiRQTydwJm9Pfk8hXSlhT35PXyReTyFSLWhPJ1ckXk9+TyFTLWpPflAhJmpPIVgta08hWS1rTydeJGRPJ2coak9+T3gtbU8nZyhqT35PIXgtbk9+TyddJHtPIVImeFgnYSZ4WH5PIVIoeU8nYSdjYX5PJ2Etc09+T3UtdE92LXRPeC11T1ByYSd3cmEneHJhIVJyYSF7cmF+TydhcmEjbXJhflAjN3BPdShTT3goVE9QJF5hJ3ckXmEneCReYSFSJF5hIXskXmF+TydhJF5hI20kXmF+UCM4Zk91KFNPeChUT1AkYGEndyRgYSd4JGBhIVIkYGEheyRgYX5PJ2EkYGEjbSRgYX5QIzlYT10tdk9+TyNXLXdPfk8nYSRuYSFSJG5hIXskbmEjbSRuYX5QISN7TyNXLXpPfk9QLlRPIVQmZE8hby5TTyVRLlJPfk9dI3FPaiNyT2sjcU9sI3FPcSRST3M5dE94I3lPIVQjek8hXztlTyFkI3ZPI1Y5fU8jdCRWTyRfOXdPJGE5ek8kZCRXTydiJFBPJ2Yjc09+T2guVk8nXS5VT35QIzp5TyFdKWFPIVQnYGFfJ2BhIVInYGEnVydgYX5PI1cuXU9+T1pbWCFSZFghU2RYfk8hUi5eTyFTKFZYfk8hUy5gT35PWi5hT35PXS5jTyddKWlPfk8hVCRsTyddJGJPXidRWCFSJ1FYfk8hUiluT14oVWF+TyFjLmZPflAhKXdPXS5oT35PWi5pT35PXi5qT35PUC5UTyFUJmRPIW8uU08lUS5STydiJFBPfk8hUil6T18oUmEnVyhSYX5PIXsucE9+T1Auc08hVCN6T35PJ2cnVE8hUyhTUH5PUC59TyFULnlPIW8ufE8lUS57TydiJFBPfk9aL1hPIVIvVk8hUyhUWH5PIVMvWU9+T14vW09fJF5PJ1ckXk9+T10vXU9+T10vXk8nXSh8T35PI2MvX08lci9gT35QMHpPIXsjZU8jYy9fTyVyL2BPfk9fL2FPflApe09fL2NPfk8ley9nT1EleWlSJXlpWCV5aV0leWlfJXlpYiV5aWMleWloJXlpaiV5aWsleWlsJXlpcSV5aXMleWl4JXlpeyV5aXwleWl9JXlpIVQleWkhXyV5aSFkJXlpIWcleWkhaCV5aSFpJXlpIWoleWkhayV5aSFuJXlpI2QleWkjdCV5aSN4JXlpJVAleWklUiV5aSVUJXlpJVUleWklWCV5aSVaJXlpJV4leWklXyV5aSVhJXlpJW4leWkldCV5aSV2JXlpJXgleWkleiV5aSV9JXlpJlQleWkmWiV5aSZdJXlpJl8leWkmYSV5aSZjJXlpJ1MleWknXSV5aSdmJXlpJ28leWknfCV5aSFTJXlpYCV5aSZRJXlpfk9gL21PIVMva08mUS9sT35QYE8hVFNPIWQvb09+TyZYKndPUSZTaVImU2lYJlNpXSZTaV8mU2liJlNpYyZTaWgmU2lqJlNpayZTaWwmU2lxJlNpcyZTaXgmU2l7JlNpfCZTaX0mU2khVCZTaSFfJlNpIWQmU2khZyZTaSFoJlNpIWkmU2khaiZTaSFrJlNpIW4mU2kjZCZTaSN0JlNpI3gmU2klUCZTaSVSJlNpJVQmU2klVSZTaSVYJlNpJVomU2klXiZTaSVfJlNpJWEmU2klbiZTaSV0JlNpJXYmU2kleCZTaSV6JlNpJX0mU2kmVCZTaSZaJlNpJl0mU2kmXyZTaSZhJlNpJmMmU2knUyZTaSddJlNpJ2YmU2knbyZTaSd8JlNpIVMmU2kleyZTaWAmU2kmUSZTaX5PIVIjYk9uJF1hfk8hTyZpaSFSJmlpflAhKXdPIVIlek8hTydqaX5PIVImYE8hTyd0aX5PIU8vdU9+TyFSIVZhIVMhVmF+UCMqWE9dJlJPayZSTyFRL3tPJ2coak8hUiZqWCFTJmpYflBAZE8hUitgTyFTJ2thfk9dJlpPayZaTyFRKXlPJ2cnVE8hUiZvWCFTJm9Yfk8hUitjTyFTJ3Zhfk8hTyd1aSFSJ3VpflAhKXdPXyReTyFdIXdPIWQkWk8hajBWTyF7MFRPJ1ckXk8nYiRQTydwJm9Pfk8hUzBZT35QIT9pTyFYMFpPIVkwWk8nXiRkTydnKGpPJ28raU9+TyFXMFtPflAjTVNPIVRTTyFXMFtPIXUwXk8heDBfT35QI01TTyFXMFtPIXMwYU8hdDBhTyF1MF5PIXgwX09+UCNNU08hVCZkT35PIVQmZE9+UCFCcE8hUidyaSFjJ3JpXydyaSdXJ3JpflAhKXdPIXswak8hUidyaSFjJ3JpXydyaSdXJ3Jpfk8hUiZ0TyFjJ3Fpfk94JHVPIVQkdk8jVjBsTyddJGJPfk8jV3JhUXJhWnJhX3JhanJhIWFyYSFicmEhZHJhIWpyYSNbcmEjXXJhI15yYSNfcmEjYHJhI2FyYSNicmEjY3JhI2VyYSNncmEjaXJhI2pyYSdXcmEnZnJhJ3ByYSFjcmEhT3JhIVRyYW5yYSVRcmEhXXJhflAjN3BPI1ckXmFRJF5hWiReYV8kXmFqJF5hdiReYSFhJF5hIWIkXmEhZCReYSFqJF5hI1skXmEjXSReYSNeJF5hI18kXmEjYCReYSNhJF5hI2IkXmEjYyReYSNlJF5hI2ckXmEjaSReYSNqJF5hJ1ckXmEnZiReYSdwJF5hIWMkXmEhTyReYSFUJF5hbiReYSVRJF5hIV0kXmF+UCM4Zk8jVyRgYVEkYGFaJGBhXyRgYWokYGF2JGBhIWEkYGEhYiRgYSFkJGBhIWokYGEjWyRgYSNdJGBhI14kYGEjXyRgYSNgJGBhI2EkYGEjYiRgYSNjJGBhI2UkYGEjZyRgYSNpJGBhI2okYGEnVyRgYSdmJGBhJ3AkYGEhYyRgYSFPJGBhIVQkYGFuJGBhJVEkYGEhXSRgYX5QIzlYTyNXJG5hUSRuYVokbmFfJG5haiRuYXYkbmEhUiRuYSFhJG5hIWIkbmEhZCRuYSFqJG5hI1skbmEjXSRuYSNeJG5hI18kbmEjYCRuYSNhJG5hI2IkbmEjYyRuYSNlJG5hI2ckbmEjaSRuYSNqJG5hJ1ckbmEnZiRuYSdwJG5hIWMkbmEhTyRuYSFUJG5hIXskbmFuJG5hJVEkbmEhXSRuYX5QIUJwT18jT3EhUiNPcSdXI09xIU8jT3EhYyNPcW4jT3EhVCNPcSVRI09xIV0jT3F+UCEpd08hUiZrWCdhJmtYflBKak8hUixfTydhJ21hfk8hUTB0TyFSJmxYIWMmbFh+UCl7TyFSLGJPIWMnbmF+TyFSLGJPIWMnbmF+UCEpd08jbSFmYSFTIWZhflBDZk8jbSFeYSFSIV5hIVMhXmF+UCMqWE8hVDFYTyN4Xk8kUDFZT35PIVMxXk9+T24xX09+UCFCcE9fJFlxIVIkWXEnVyRZcSFPJFlxIWMkWXFuJFlxIVQkWXElUSRZcSFdJFlxflAhKXdPIU8xYE9+T10seU9rLHlPfk91KFNPeChUTyd4KFhPUCR4aSd3JHhpIVIkeGkheyR4aX5PJ2EkeGkjbSR4aX5QJC5QT3UoU094KFRPUCR6aSd3JHppJ3gkemkhUiR6aSF7JHppfk8nYSR6aSNtJHppflAkLnJPJ3AjW09+UCFCcE8hUTFjTyddJGJPIVImdFghYyZ0WH5PIVItUk8hYyd9YX5PIVItUk8hXSF3TyFjJ31hfk8hUi1STyFdIXdPJ3Amb08hYyd9YX5PJ2EkZ2khUiRnaSF7JGdpI20kZ2l+UCEje08hUTFrTyddKGVPIU8mdlghUiZ2WH5QISRqTyFSLVpPIU8oT2F+TyFSLVpPIU8oT2F+UCFCcE8hXSF3T35PIV0hd08jYzFzT35PajF2TyFdIXdPJ3Amb09+TyFSJ2RpJ2EnZGl+UCEje08hezF5TyFSJ2RpJ2EnZGl+UCEje08hYzF8T35PXyRacSFSJFpxJ1ckWnEhTyRacSFjJFpxbiRacSFUJFpxJVEkWnEhXSRacX5QISl3TyFSMlFPIVQoUFh+UCFCcE8hVCZkTyVRMlRPfk8hVCZkTyVRMlRPflAhQnBPIVQkZVgkdVtYXyRlWCFSJGVYJ1ckZVh+UCEhck8kdTJYT1BnWHVnWHhnWCFUZ1gnd2dYJ3hnWF9nWCFSZ1gnV2dYfk8kdTJYT35PXTJfTyVSMmBPJ10paU8hUidQWCFTJ1BYfk8hUi5eTyFTKFZhfk9aMmRPfk9eMmVPfk9dMmhPfk9QMmpPIVQmZE8hbzJpTyVRMlRPfk9fJF5PJ1ckXk9+UCFCcE8hVCN6T35QIUJwTyFSMm9PIXsycU8hUyhTWH5PIVMyck9+T3g7b08hVzJ7TyFYMnRPIVkydE8hcjJ6TyFzMnlPIXQyeU8heDJ4TydeJGRPJ2coak8nbytpT35PIVMyd09+UCQ3Wk9QM1NPIVQueU8hbzNSTyVRM1FPfk9QM1NPIVQueU8hbzNSTyVRM1FPJ2IkUE9+TyddKHxPIVInT1ghUydPWH5PIVIvVk8hUyhUYX5PXTNeTydnM11Pfk9dM19Pfk9eM2FPfk8hYzNkT35QKXtPXzNmT35PXzNmT35QKXtPI2MzaE8lcjNpT35QRk9PYC9tTyFTM21PJlEvbE9+UGBPIV0zb09+TyFSI1RpIVMjVGl+UCMqWE8hezNxTyFSI1RpIVMjVGl+TyFSIVZpIVMhVml+UCMqWE9fJF5PIXszeE8nVyReT35PXyReTyFdIXdPIXszeE8nVyReT35PIVgzfE8hWTN8TydeJGRPJ2coak8nbytpT35PXyReTyFdIXdPIWQkWk8hajN9TyF7M3hPJ1ckXk8nYiRQTydwJm9Pfk8hVzRPT35QJDt4TyFXNE9PIXU0Uk8heDRTT35QJDt4T18kXk8hXSF3TyFqM31PIXszeE8nVyReTydwJm9Pfk8hUidycSFjJ3JxXydycSdXJ3JxflAhKXdPIVImdE8hYydxcX5PI1ckeGlRJHhpWiR4aV8keGlqJHhpdiR4aSFhJHhpIWIkeGkhZCR4aSFqJHhpI1skeGkjXSR4aSNeJHhpI18keGkjYCR4aSNhJHhpI2IkeGkjYyR4aSNlJHhpI2ckeGkjaSR4aSNqJHhpJ1ckeGknZiR4aSdwJHhpIWMkeGkhTyR4aSFUJHhpbiR4aSVRJHhpIV0keGl+UCQuUE8jVyR6aVEkemlaJHppXyR6aWokeml2JHppIWEkemkhYiR6aSFkJHppIWokemkjWyR6aSNdJHppI14kemkjXyR6aSNgJHppI2EkemkjYiR6aSNjJHppI2UkemkjZyR6aSNpJHppI2okemknVyR6aSdmJHppJ3AkemkhYyR6aSFPJHppIVQkemluJHppJVEkemkhXSR6aX5QJC5yTyNXJGdpUSRnaVokZ2lfJGdpaiRnaXYkZ2khUiRnaSFhJGdpIWIkZ2khZCRnaSFqJGdpI1skZ2kjXSRnaSNeJGdpI18kZ2kjYCRnaSNhJGdpI2IkZ2kjYyRnaSNlJGdpI2ckZ2kjaSRnaSNqJGdpJ1ckZ2knZiRnaSdwJGdpIWMkZ2khTyRnaSFUJGdpIXskZ2luJGdpJVEkZ2khXSRnaX5QIUJwTyFSJmthJ2Ema2F+UCEje08hUiZsYSFjJmxhflAhKXdPIVIsYk8hYyduaX5PI20jT2khUiNPaSFTI09pflAjKlhPUSNeT3Uhe092IXtPeCF8TyFiIXlPIWQhek8haiNeTydmUU9aI1ppaiNaaSFhI1ppI10jWmkjXiNaaSNfI1ppI2AjWmkjYSNaaSNiI1ppI2MjWmkjZSNaaSNnI1ppI2kjWmkjaiNaaSNtI1ppJ3AjWmkndyNaaSd4I1ppIVIjWmkhUyNaaX5PI1sjWml+UCRFaU8jWzllT35QJEVpT1EjXk91IXtPdiF7T3ghfE8hYiF5TyFkIXpPIWojXk8jWzllTyNdOWZPI145Zk8jXzlmTydmUU9aI1ppIWEjWmkjYCNaaSNhI1ppI2IjWmkjYyNaaSNlI1ppI2cjWmkjaSNaaSNqI1ppI20jWmkncCNaaSd3I1ppJ3gjWmkhUiNaaSFTI1ppfk9qI1ppflAkR3FPajlnT35QJEdxT1EjXk9qOWdPdSF7T3Yhe094IXxPIWIheU8hZCF6TyFqI15PI1s5ZU8jXTlmTyNeOWZPI185Zk8jYDloTydmUU8jZSNaaSNnI1ppI2kjWmkjaiNaaSNtI1ppJ3AjWmkndyNaaSd4I1ppIVIjWmkhUyNaaX5PWiNaaSFhI1ppI2EjWmkjYiNaaSNjI1ppflAkSXlPWjlyTyFhOWlPI2E5aU8jYjlpTyNjOWlPflAkSXlPUSNeT1o5ck9qOWdPdSF7T3Yhe094IXxPIWE5aU8hYiF5TyFkIXpPIWojXk8jWzllTyNdOWZPI145Zk8jXzlmTyNgOWhPI2E5aU8jYjlpTyNjOWlPI2U5ak8nZlFPI2cjWmkjaSNaaSNqI1ppI20jWmkncCNaaSd4I1ppIVIjWmkhUyNaaX5PJ3cjWml+UCRMX08ndyF9T35QJExfT1EjXk9aOXJPajlnT3Uhe092IXtPeCF8TyFhOWlPIWIheU8hZCF6TyFqI15PI1s5ZU8jXTlmTyNeOWZPI185Zk8jYDloTyNhOWlPI2I5aU8jYzlpTyNlOWpPI2c5bE8nZlFPJ3chfU8jaSNaaSNqI1ppI20jWmkncCNaaSFSI1ppIVMjWml+Tyd4I1ppflAkTmdPJ3gjT09+UCROZ09RI15PWjlyT2o5Z091IXtPdiF7T3ghfE8hYTlpTyFiIXlPIWQhek8haiNeTyNbOWVPI105Zk8jXjlmTyNfOWZPI2A5aE8jYTlpTyNiOWlPI2M5aU8jZTlqTyNnOWxPI2k5bk8nZlFPJ3chfU8neCNPT35PI2ojWmkjbSNaaSdwI1ppIVIjWmkhUyNaaX5QJSFvT18ja3khUiNreSdXI2t5IU8ja3khYyNreW4ja3khVCNreSVRI2t5IV0ja3l+UCEpd09QO3ZPdShTT3goVE8ndyhWTyd4KFhPfk9RI1ppWiNaaWojWml2I1ppIWEjWmkhYiNaaSFkI1ppIWojWmkjWyNaaSNdI1ppI14jWmkjXyNaaSNgI1ppI2EjWmkjYiNaaSNjI1ppI2UjWmkjZyNaaSNpI1ppI2ojWmkjbSNaaSdmI1ppJ3AjWmkhUiNaaSFTI1ppflAlJWFPIWIheU9QJ2VYdSdlWHgnZVgndydlWCd4J2VYIVMnZVh+T1EnZVhaJ2VYaidlWHYnZVghYSdlWCFkJ2VYIWonZVgjWydlWCNdJ2VYI14nZVgjXydlWCNgJ2VYI2EnZVgjYidlWCNjJ2VYI2UnZVgjZydlWCNpJ2VYI2onZVgjbSdlWCdmJ2VYJ3AnZVghUidlWH5QJSdlTyNtI25pIVIjbmkhUyNuaX5QIypYTyFTNGVPfk8hUiZzYSFTJnNhflAjKlhPIV0hd08ncCZvTyFSJnRhIWMmdGF+TyFSLVJPIWMnfWl+TyFSLVJPIV0hd08hYyd9aX5PJ2EkZ3EhUiRncSF7JGdxI20kZ3F+UCEje08hTyZ2YSFSJnZhflAhQnBPIV00bE9+TyFSLVpPIU8oT2l+UCFCcE8hUi1aTyFPKE9pfk8hTzRwT35PIV0hd08jYzR1T35PajR2TyFdIXdPJ3Amb09+TyFPNHhPfk8nYSRpcSFSJGlxIXskaXEjbSRpcX5QISN7T18kWnkhUiRaeSdXJFp5IU8kWnkhYyRaeW4kWnkhVCRaeSVRJFp5IV0kWnl+UCEpd08hUjJRTyFUKFBhfk8hVCZkTyVRNH1Pfk8hVCZkTyVRNH1PflAhQnBPXyNPeSFSI095J1cjT3khTyNPeSFjI095biNPeSFUI095JVEjT3khXSNPeX5QISl3T1o1UU9+T101U08nXSlpT35PIVIuXk8hUyhWaX5PXTVWT35PXjVXT35PJ2cnVE8hUiZ7WCFTJntYfk8hUjJvTyFTKFNhfk8hUzVlT35QJDdaT3g7c08nZyhqTydvK2lPfk8hVzVoTyFYNWdPIVk1Z08heDBfTydeJGRPJ2coak8nbytpT35PIXM1aU8hdDVpT35QJTBeTyFYNWdPIVk1Z08nXiRkTydnKGpPJ28raU9+TyFULnlPfk8hVC55TyVRNWtPfk8hVC55TyVRNWtPflAhQnBPUDVwTyFULnlPIW81b08lUTVrT35PWjV1TyFSJ09hIVMnT2F+TyFSL1ZPIVMoVGl+T101eE9+TyFjNXlPfk8hYzV6T35PIWM1e09+TyFjNXtPflApe09fNX1Pfk8hXTZRT35PIWM2Uk9+TyFSJ3VpIVMndWl+UCMqWE9fJF5PJ1ckXk9+UCEpd09fJF5PIXs2V08nVyReT35PXyReTyFdIXdPIXs2V08nVyReT35PIVg2XU8hWTZdTydeJGRPJ2coak8nbytpT35PXyReTyFdIXdPIWo2Xk8hezZXTydXJF5PJ3Amb09+TyFkJFpPJ2IkUE9+UCU0eE8hVzZfT35QJTRnTyFSJ3J5IWMncnlfJ3J5J1cncnl+UCEpd08jVyRncVEkZ3FaJGdxXyRncWokZ3F2JGdxIVIkZ3EhYSRncSFiJGdxIWQkZ3EhaiRncSNbJGdxI10kZ3EjXiRncSNfJGdxI2AkZ3EjYSRncSNiJGdxI2MkZ3EjZSRncSNnJGdxI2kkZ3EjaiRncSdXJGdxJ2YkZ3EncCRncSFjJGdxIU8kZ3EhVCRncSF7JGdxbiRncSVRJGdxIV0kZ3F+UCFCcE8jVyRpcVEkaXFaJGlxXyRpcWokaXF2JGlxIVIkaXEhYSRpcSFiJGlxIWQkaXEhaiRpcSNbJGlxI10kaXEjXiRpcSNfJGlxI2AkaXEjYSRpcSNiJGlxI2MkaXEjZSRpcSNnJGlxI2kkaXEjaiRpcSdXJGlxJ2YkaXEncCRpcSFjJGlxIU8kaXEhVCRpcSF7JGlxbiRpcSVRJGlxIV0kaXF+UCFCcE8hUiZsaSFjJmxpflAhKXdPI20jT3EhUiNPcSFTI09xflAjKlhPdS10T3YtdE94LXVPUHJhJ3dyYSd4cmEhU3Jhfk9RcmFacmFqcmEhYXJhIWJyYSFkcmEhanJhI1tyYSNdcmEjXnJhI19yYSNgcmEjYXJhI2JyYSNjcmEjZXJhI2dyYSNpcmEjanJhI21yYSdmcmEncHJhIVJyYX5QJTtPT3UoU094KFRPUCReYSd3JF5hJ3gkXmEhUyReYX5PUSReYVokXmFqJF5hdiReYSFhJF5hIWIkXmEhZCReYSFqJF5hI1skXmEjXSReYSNeJF5hI18kXmEjYCReYSNhJF5hI2IkXmEjYyReYSNlJF5hI2ckXmEjaSReYSNqJF5hI20kXmEnZiReYSdwJF5hIVIkXmF+UCU9U091KFNPeChUT1AkYGEndyRgYSd4JGBhIVMkYGF+T1EkYGFaJGBhaiRgYXYkYGEhYSRgYSFiJGBhIWQkYGEhaiRgYSNbJGBhI10kYGEjXiRgYSNfJGBhI2AkYGEjYSRgYSNiJGBhI2MkYGEjZSRgYSNnJGBhI2kkYGEjaiRgYSNtJGBhJ2YkYGEncCRgYSFSJGBhflAlP1dPUSRuYVokbmFqJG5hdiRuYSFhJG5hIWIkbmEhZCRuYSFqJG5hI1skbmEjXSRuYSNeJG5hI18kbmEjYCRuYSNhJG5hI2IkbmEjYyRuYSNlJG5hI2ckbmEjaSRuYSNqJG5hI20kbmEnZiRuYSdwJG5hIVIkbmEhUyRuYX5QJSVhTyNtJFlxIVIkWXEhUyRZcX5QIypYTyNtJFpxIVIkWnEhUyRacX5QIypYTyFTNmhPfk8jbTZpT35QISN7TyFdIXdPIVImdGkhYyZ0aX5PIV0hd08ncCZvTyFSJnRpIWMmdGl+TyFSLVJPIWMnfXF+TyFPJnZpIVImdml+UCFCcE8hUi1aTyFPKE9xfk8hTzZvT35QIUJwTyFPNm9Pfk8hUidkeSdhJ2R5flAhI3tPIVImeWEhVCZ5YX5QIUJwTyFUJHRxXyR0cSFSJHRxJ1ckdHF+UCFCcE9aNnZPfk8hUi5eTyFTKFZxfk9dNnlPfk8hVCZkTyVRNnpPfk8hVCZkTyVRNnpPflAhQnBPIXs2e08hUiZ7YSFTJnthfk8hUjJvTyFTKFNpflAjKlhPIVg3Uk8hWTdSTydeJGRPJ2coak8nbytpT35PIVc3VE8heDRTT35QJUdYTyFULnlPJVE3V09+TyFULnlPJVE3V09+UCFCcE9dN19PJ2c3Xk9+TyFSL1ZPIVMoVHF+TyFjN2FPfk8hYzdhT35QKXtPIWM3Y09+TyFjN2RPfk8hUiNUeSFTI1R5flAjKlhPXyReTyF7N2pPJ1ckXk9+T18kXk8hXSF3TyF7N2pPJ1ckXk9+TyFYN21PIVk3bU8nXiRkTydnKGpPJ28raU9+T18kXk8hXSF3TyFqN25PIXs3ak8nVyReTydwJm9Pfk8jbSNreSFSI2t5IVMja3l+UCMqWE9RJGdpWiRnaWokZ2l2JGdpIWEkZ2khYiRnaSFkJGdpIWokZ2kjWyRnaSNdJGdpI14kZ2kjXyRnaSNgJGdpI2EkZ2kjYiRnaSNjJGdpI2UkZ2kjZyRnaSNpJGdpI2okZ2kjbSRnaSdmJGdpJ3AkZ2khUiRnaSFTJGdpflAlJWFPdShTT3goVE8neChYT1AkeGkndyR4aSFTJHhpfk9RJHhpWiR4aWokeGl2JHhpIWEkeGkhYiR4aSFkJHhpIWokeGkjWyR4aSNdJHhpI14keGkjXyR4aSNgJHhpI2EkeGkjYiR4aSNjJHhpI2UkeGkjZyR4aSNpJHhpI2okeGkjbSR4aSdmJHhpJ3AkeGkhUiR4aX5QJUxqT3UoU094KFRPUCR6aSd3JHppJ3gkemkhUyR6aX5PUSR6aVokemlqJHppdiR6aSFhJHppIWIkemkhZCR6aSFqJHppI1skemkjXSR6aSNeJHppI18kemkjYCR6aSNhJHppI2IkemkjYyR6aSNlJHppI2ckemkjaSR6aSNqJHppI20kemknZiR6aSdwJHppIVIkeml+UCVObk8jbSRaeSFSJFp5IVMkWnl+UCMqWE8jbSNPeSFSI095IVMjT3l+UCMqWE8hXSF3TyFSJnRxIWMmdHF+TyFSLVJPIWMnfXl+TyFPJnZxIVImdnF+UCFCcE8hTzd0T35QIUJwTyFSLl5PIVMoVnl+TyFSMm9PIVMoU3F+TyFYOFFPIVk4UU8nXiRkTydnKGpPJ28raU9+TyFULnlPJVE4VE9+TyFULnlPJVE4VE9+UCFCcE8hYzhXT35PXyReTyF7OF1PJ1ckXk9+T18kXk8hXSF3TyF7OF1PJ1ckXk9+T1EkZ3FaJGdxaiRncXYkZ3EhYSRncSFiJGdxIWQkZ3EhaiRncSNbJGdxI10kZ3EjXiRncSNfJGdxI2AkZ3EjYSRncSNiJGdxI2MkZ3EjZSRncSNnJGdxI2kkZ3EjaiRncSNtJGdxJ2YkZ3EncCRncSFSJGdxIVMkZ3F+UCUlYU9RJGlxWiRpcWokaXF2JGlxIWEkaXEhYiRpcSFkJGlxIWokaXEjWyRpcSNdJGlxI14kaXEjXyRpcSNgJGlxI2EkaXEjYiRpcSNjJGlxI2UkaXEjZyRpcSNpJGlxI2okaXEjbSRpcSdmJGlxJ3AkaXEhUiRpcSFTJGlxflAlJWFPJ2EkfCFaIVIkfCFaIXskfCFaI20kfCFaflAhI3tPIVIme3EhUyZ7cX5QIypYT18kXk8hezhvTydXJF5Pfk8jVyR8IVpRJHwhWlokfCFaXyR8IVpqJHwhWnYkfCFaIVIkfCFaIWEkfCFaIWIkfCFaIWQkfCFaIWokfCFaI1skfCFaI10kfCFaI14kfCFaI18kfCFaI2AkfCFaI2EkfCFaI2IkfCFaI2MkfCFaI2UkfCFaI2ckfCFaI2kkfCFaI2okfCFaJ1ckfCFaJ2YkfCFaJ3AkfCFaIWMkfCFaIU8kfCFaIVQkfCFaIXskfCFabiR8IVolUSR8IVohXSR8IVp+UCFCcE9QO3VPdShTT3goVE8ndyhWTyd4KFhPfk8hUyF6YSFXIXphIVghemEhWSF6YSFyIXphIXMhemEhdCF6YSF4IXphJ14hemEnZyF6YSdvIXphflAmLF9PIVcnZVghWCdlWCFZJ2VYIXInZVghcydlWCF0J2VYIXgnZVgnXidlWCdnJ2VYJ28nZVh+UCUnZU9RJHwhWlokfCFaaiR8IVp2JHwhWiFhJHwhWiFiJHwhWiFkJHwhWiFqJHwhWiNbJHwhWiNdJHwhWiNeJHwhWiNfJHwhWiNgJHwhWiNhJHwhWiNiJHwhWiNjJHwhWiNlJHwhWiNnJHwhWiNpJHwhWiNqJHwhWiNtJHwhWidmJHwhWidwJHwhWiFSJHwhWiFTJHwhWn5QJSVhTyFXcmEhWHJhIVlyYSFycmEhc3JhIXRyYSF4cmEnXnJhJ2dyYSdvcmF+UCU7T08hVyReYSFYJF5hIVkkXmEhciReYSFzJF5hIXQkXmEheCReYSdeJF5hJ2ckXmEnbyReYX5QJT1TTyFXJGBhIVgkYGEhWSRgYSFyJGBhIXMkYGEhdCRgYSF4JGBhJ14kYGEnZyRgYSdvJGBhflAlP1dPIVMkbmEhVyRuYSFYJG5hIVkkbmEhciRuYSFzJG5hIXQkbmEheCRuYSdeJG5hJ2ckbmEnbyRuYX5QJixfTyFXJHhpIVgkeGkhWSR4aSFyJHhpIXMkeGkhdCR4aSF4JHhpJ14keGknZyR4aSdvJHhpflAlTGpPIVckemkhWCR6aSFZJHppIXIkemkhcyR6aSF0JHppIXgkemknXiR6aSdnJHppJ28keml+UCVObk8hUyRnaSFXJGdpIVgkZ2khWSRnaSFyJGdpIXMkZ2khdCRnaSF4JGdpJ14kZ2knZyRnaSdvJGdpflAmLF9PIVMkZ3EhVyRncSFYJGdxIVkkZ3EhciRncSFzJGdxIXQkZ3EheCRncSdeJGdxJ2ckZ3EnbyRncX5QJixfTyFTJGlxIVckaXEhWCRpcSFZJGlxIXIkaXEhcyRpcSF0JGlxIXgkaXEnXiRpcSdnJGlxJ28kaXF+UCYsX08hUyR8IVohVyR8IVohWCR8IVohWSR8IVohciR8IVohcyR8IVohdCR8IVoheCR8IVonXiR8IVonZyR8IVonbyR8IVp+UCYsX09uJ2hYflAuak9uW1ghT1tYIWNbWCVyW1ghVFtYJVFbWCFdW1h+UCR6TyFdZFghY1tYIWNkWCdwZFh+UDtkT1E5Xk9SOV5PXWNPYjtgT2Mhak9oY09qOV5Pa2NPbGNPcTleT3M5Xk94Uk97Y098Y099Y08hVFNPIV85YE8hZFVPIWc5Xk8haDleTyFpOV5PIWo5Xk8hazleTyFuIWlPI3QhbE8jeF5PJ10nY08nZlFPJ29ZTyd8O15Pfk9dI3FPaCRRT2ojck9rI3FPbCNxT3EkUk9zOXVPeCN5TyFUI3pPIV87Zk8hZCN2TyNWOk9PI3QkVk8kXzl4TyRhOXtPJGQkV08nXSZ7TydiJFBPJ2Yjc09+TyFSOXBPIVMkXWF+T10jcU9oJFFPaiNyT2sjcU9sI3FPcSRST3M5dk94I3lPIVQjek8hXztnTyFkI3ZPI1Y6UE8jdCRWTyRfOXlPJGE5fE8kZCRXTyddJntPJ2IkUE8nZiNzT35PI2Qnak9+UCY8V08hU1tYIVNkWH5QO2RPIV05ZE9+TyNXOWNPfk8hXSF3TyNXOWNPfk8hezlzT35PI2M5aU9+TyF7OlFPIVIndVghUyd1WH5PIXs5c08hUidzWCFTJ3NYfk8jVzpST35PJ2E6VE9+UCEje08jVzpbT35PI1c6XU9+TyNXOl5Pfk8hXSF3TyNXOl9Pfk8hXSF3TyNXOlJPfk8jbTpgT35QIypYTyNXOmFPfk8jVzpiT35PI1c6Y09+TyNXOmRPfk8jVzplT35PI1c6Zk9+TyNXOmdPfk8jVzpoT35PIU86aU9+TyNtOmpPflAhI3tPI206a09+UCEje08jbTpsT35QISN7TyFPOm1PflAhQnBPIU86bU9+TyFPOm5PflAhQnBPIV0hd08jYztsT35PIV0hd08jYztuT35PI3h+IWIhciF0IXUjVSNWJ3wkXyRhJGQkdSVQJVElUiVYJVolXiVfJWElY35VVCN4J3wjXX0nWSdaI3onWSddJ2d+XCIsXG4gIGdvdG86IFwiI0trKFpQUFBQUFBQUChbUChsUCpgUFBQUC16UFAuYTNzN284U1A4U1BQUDhTUDpVOFNQOFNQOllQUDpgUDp0P1ZQUFBQP1pQUFBQP1pBe1BQUEJSRGRQP1pQRndQUFBQSHA/WlBQUFBQSmk/WlBQTWpOZ1BQUFBOayEhVFAhIV0hI15QTmc/Wj9aISZuISlpIS5bIS5bITFrUFBQITFyITRoP1pQUFBQUFBQUFBQITdfUCE4cFBQP1ohOX1QP1pQP1o/Wj9aP1pQP1ohO2RQUCE+XVAhQVEhQVkhQV4hQV5QIT5ZUCFBYiFBYlAhRFZQIURaP1o/WiFEYSFHVDhTUDhTUDhTOFNQIUhXOFM4UyFKZjhTIU1fOFMjIGc4UzhTIyFUIyRjIyRjIyRnIyRjIyRvUCMkY1A4UyMlazhTIydYOFM4Uy16UFBQIyh5UFAjKWMjKWNQIyljUCMpeCMpY1BQIypPUCMpdVAjKXUjKmIhIVgjKXUjK1AjK1YjK1koWyMrXShbUCMrZCMrZCMrZFAoW1AoW1AoW1AoW1BQKFtQIytqIyttUCMrbShbUCMrcVAjK3RQKFtQKFtQKFtQKFtQKFtQKFsoWyMreiMsVSMsWyMsYiMscCMsdiMsfCMtVyMtXiMtbSMtcyMuUiMuWCMuXyMubSMvUyMweiMxWSMxYCMxZiMxbCMxciMxfCMyUyMyWSMyZCMydiMyfFBQUFBQUFBQIzNTUFAjM3YjN09QUCM4ZiM4bSM4dVBQIz5hI0B0I0ZwI0ZzI0Z2I0dSI0dVUFAjR1gjR10jR3ojSHEjSHUjSVpQUCNJXyNJZSNJaVAjSWwjSXAjSXMjSmMjSnkjS08jS1IjS1UjS1sjS18jS2MjS2dtaE9Tan0hbiRdJWMlZiVnJWkqbyp0L2cvalEkaW1RJHBwUSVaeVMmViFiK2BRJmshalMobCN6KHFRKWckalEpdCRyUSpgJVRRK2YmXlMrayZkK21RK30mbFEtayhzUS9VKmFZMForbytwK3ErcitzUzJ0LnkydlUzfDBbMF4wYVU1ZzJ5Mnoye1M2XTRPNFJTN1I1aDVpUTdtNl9SOFE3VCRwW09SU1RVamt9IVMhVyFdIWAhbiF2IXohfCNQI1EjUiNTI1QjVSNWI1cjWCNZI1ojYiNlJF0kbiVbJV8lYyVlJWYlZyVpJW0leCV6JlMmXyZmJnAmfSdSKFIpVileKmsqbyp0K1QreCxQLGIsaC11LXouUy5dLnwvXy9gL2EvYy9nL2ovbDBUMGowdDJpM1IzZjNoM2kzeDVvNX02VzdqOF04byFqJ2UjXSNrJlcndytYK1ssbS97MVgycTNxNns5XjlgOWM5ZTlmOWc5aDlpOWo5azlsOW05bjlvOXA5czpROlI6VDpfOmA6ZzpoO2FRKH0kU1EpbCRsUSpiJVdRKmklYFEsWDl0US5XKWFRLmMpbVEvXipnUTJfLl5RM1ovVlE0Xjl2UTVTMmBSOHs5dXBlT1NqeX0hbiRdJVklYyVmJWclaSpvKnQvZy9qUipkJVsmV1ZPU1Rqa259IVMhVyFrIW4hdiF6IXwjUCNRI1IjUyNUI1UjViNXI1gjWSNaI10jYiNlI2skXSRuJVslXyVgJWMlZSVmJWclaSVtJXomUyZfJmYmcCZ9J1IndyhSKVYpXiprKm8qdCtUK1grWyt4LFAsYixoLG0tdS16LlMuXS58L18vYC9hL2MvZy9qL2wvezBUMGowdDFYMmkycTNSM2YzaDNpM3EzeDVvNX02VzZ7N2o4XThvOV45YDljOWU5ZjlnOWg5aTlqOWs5bDltOW45bzlwOXM6UTpSOlQ6XzpgOmc6aDtgO2FbIWNSVSFdIWAleCZXUSRjbFEkaG1TJG1wJHJ2JHdycyFyIXUkWiR1JmAmdCZ3KXgpeSl6Km0rWStoLFMsVS9vMGxRJVB3USZoIWlRJmohalMoXyN2KGNTKWYkaSRqUSlqJGxRKXckdFEqWiVSUSpfJVRTK3wmayZsUS1WKGBRLlspZ1EuYiltUS5kKW5RLmcpclEvUCpbUy9UKmAqYVEwaCt9UTFiLVJRMl4uXlEyYi5hUTJnLmlRM1kvVVE0aTFjUTVSMmBRNVUyZFE2dTVRUjd3NnZ4I3hhIXkkVCRVJFkoVyhZKGIodyh4LF8tWS13MWExeTZpO147aTtqO2shWSRmbSFqJGgkaSRqJlUmaiZrJmwoaylmKWcrXStqK3wrfS1kLlswUTBXMF0waDF1M3s0UTZaN2s4XlEpYCRjUSpQJHxRKlMkfVEqXiVUUS5rKXdRL08qWlUvUypfKmAqYVEzVC9QUzNYL1QvVVE1YjJzUTV0M1lTN1A1YzVmUzhPN1E3U1E4ZjhQUTh1OGcjWztiIXcjZCN2I3kmZyd9KFooaCldKV8pYSpPKlIreS1aLV0uUi5ULnAucy57Ln0xazFzMlEyVDJYMmozUTNTNGw0dTR9NWs1cDZ6N1c4VDl3OXo5fTpVOlg6WzphOmQ6ajtsO247dDt1O3ZkO2M5ZDl4OXs6TzpWOlk6XTpiOmU6a2U7ZDlyOXk5fDpQOlc6WjpeOmM6ZjpsVyN9YSRQKHk7XlMkfHQlWVEkfXVRJU92Uil9JHolUCN8YSF3IXkjZCN2I3kkVCRVJFkmZyd9KFcoWShaKGIoaCh3KHgpXSlfKWEqTypSK3ksXy1ZLVotXS13LlIuVC5wLnMuey59MWExazFzMXkyUTJUMlgyajNRM1M0bDR1NH01azVwNmk2ejdXOFQ5ZDlyOXc5eDl5OXo5ezl8OX06TzpQOlU6VjpXOlg6WTpaOls6XTpeOmE6YjpjOmQ6ZTpmOmo6azpsO147aTtqO2s7bDtuO3Q7dTt2VChPI3MoUFgpTyRTOXQ5dTl2VSZaIWIkditjUSdVIXtRKXEkb1EudCpUUTF6LXRSNV4ybyZeY09SU1RVamt9IVMhVyFdIWAhbiF2IXohfCNQI1EjUiNTI1QjVSNWI1cjWCNZI1ojXSNiI2UjayRdJG4lWyVfJWAlYyVlJWYlZyVpJW0leCV6JlMmVyZfJmYmcCZ9J1IndyhSKVYpXiprKm8qdCtUK1grWyt4LFAsYixoLG0tdS16LlMuXS58L18vYC9hL2MvZy9qL2wvezBUMGowdDFYMmkycTNSM2YzaDNpM3EzeDVvNX02VzZ7N2o4XThvOV45YDljOWU5ZjlnOWg5aTlqOWs5bDltOW45bzlwOXM6UTpSOlQ6XzpgOmc6aDthJF0jYVohXyFvJGEldyV9JnknUSdXJ1gnWSdaJ1snXSdeJ18nYCdhJ2InZCdnJ2sndSlwK1IrXitnLE8sXixkLGcsaSx3LXgvdi95MGkwczB3MHgweTB6MHswfDB9MU8xUDFRMVIxUzFUMVcxXTJPMlszczN2NFc0WzRdNGI0YzVgNlM2VjZiNmY2ZzdnN3o4WjhtOHk5Xzp8VCFYUSFZJl9jT1JTVFVqa30hUyFXIV0hYCFuIXYheiF8I1AjUSNSI1MjVCNVI1YjVyNYI1kjWiNdI2IjZSNrJF0kbiVbJV8lYCVjJWUlZiVnJWklbSV4JXomUyZXJl8mZiZwJn0nUid3KFIpVileKmsqbyp0K1QrWCtbK3gsUCxiLGgsbS11LXouUy5dLnwvXy9gL2EvYy9nL2ovbC97MFQwajB0MVgyaTJxM1IzZjNoM2kzcTN4NW81fTZXNns3ajhdOG85XjlgOWM5ZTlmOWc5aDlpOWo5azlsOW05bjlvOXA5czpROlI6VDpfOmA6ZzpoO2FRJlghYlIvfCtgWSZSIWImViZeK2ArZlMoayN6KHFTK2omZCttUy1kKGwoc1EtZShtUS1sKHRRLnYqVlUwVytrK28rcFUwXStxK3Irc1MwYit0MnhRMXUta1Exdy1tUTF4LW5TMnMueTJ2VTN7MFowWzBeUTRQMF9RNFEwYVM1YzJ0MntTNWYyeTJ6VTZaM3w0TzRSUTZgNFNTN1E1ZzVoUTdTNWlTN2s2XTZfUzhQN1I3VFE4XjdtUThnOFFRO2g7b1I7bTtzbGhPU2p9IW4kXSVjJWYlZyVpKm8qdC9nL2pRJWshUVMmeCF2OWNRKWQkZ1EqWCVQUSpZJVFRK3omaVMsXSZ9OlJTLXkpVjpfUS5ZKWVRLngqV1Evbip2US9wKndRL3grWlEwYCtxUTBmK3tTMlAtejpnUTJZLlpTMl0uXTpoUTNyL3pRM3UwUlE0VTBnUTVQMlpRNlQzdFE2WDN6UTZhNFZRN2U2UlE3aDZZUThZN2lROGw4W1I4eDhuJFcjYFohXyFvJXclfSZ5J1EnVydYJ1knWidbJ10nXidfJ2AnYSdiJ2QnZydrJ3UpcCtSK14rZyxPLF4sZCxnLHcteC92L3kwaTBzMHcweDB5MHowezB8MH0xTzFQMVExUjFTMVQxVzFdMk8yWzNzM3Y0VzRbNF00YjRjNWA2UzZWNmI2ZjZnN2c3ejhaOG04eTlfOnxXKHYjeyZ8MVY4cVQpWiRhLGkkVyNfWiFfIW8ldyV9JnknUSdXJ1gnWSdaJ1snXSdeJ18nYCdhJ2InZCdnJ2sndSlwK1IrXitnLE8sXixkLGcsdy14L3YveTBpMHMwdzB4MHkwejB7MHwwfTFPMVAxUTFSMVMxVDFXMV0yTzJbM3MzdjRXNFs0XTRiNGM1YDZTNlY2YjZmNmc3Zzd6OFo4bTh5OV86fFEnZiNgUylZJGEsaVIteylaJl5jT1JTVFVqa30hUyFXIV0hYCFuIXYheiF8I1AjUSNSI1MjVCNVI1YjVyNYI1kjWiNdI2IjZSNrJF0kbiVbJV8lYCVjJWUlZiVnJWklbSV4JXomUyZXJl8mZiZwJn0nUid3KFIpVileKmsqbyp0K1QrWCtbK3gsUCxiLGgsbS11LXouUy5dLnwvXy9gL2EvYy9nL2ovbC97MFQwajB0MVgyaTJxM1IzZjNoM2kzcTN4NW81fTZXNns3ajhdOG85XjlgOWM5ZTlmOWc5aDlpOWo5azlsOW05bjlvOXA5czpROlI6VDpfOmA6ZzpoO2FRJWZ7USVnfFElaSFPUSVqIVBSL2YqclEmZSFpUSlbJGNRK3cmaFMuUSlgKXdTMGMrdSt2VzJTLX0uTy5QLmtTNFQwZDBlVTR8MlUyVjJXVTZzNHs1WTVaUTd2NnRSOGI3eVQrbCZkK21TK2omZCttVTBXK2srbytwVTBdK3ErcitzUzBiK3QyeFMycy55MnZVM3swWjBbMF5RNFAwX1E0UTBhUzVjMnQye1M1ZjJ5MnpVNlozfDRPNFJRNmA0U1M3UTVnNWhRN1M1aVM3azZdNl9TOFA3UjdUUTheN21SOGc4UVMrbCZkK21UMnUueTJ2UyZyIXEvZFEtVShfUS1iKGtTMFYrajJzUTFnLVZTMXAtYy1sVTN9MF0wYjVmUTRoMWJTNHMxdjF4VTZeNFA0UTdTUTZrNGlRNnI0dlI3bjZgUSF4WFMmcSFxL2RRKVckW1EpYiRlUSloJGtRLFEmclEtVChfUS1hKGtRLWYoblEuWCljUS9RKl1TMFUrajJzUzFmLVUtVlMxby1iLWxRMXItZVExdC1nUTNWL1JXM3kwVjBdMGI1ZlE0ZzFiUTRrMWdTNG8xcDF4UTR0MXdRNXIzV1c2WzN9NFA0UTdTUzZqNGg0aVM2bjRwOmlRNnA0c1E2fTVhUTdbNXNTN2w2XjZgUTdyNmtTN3M2bzptUTd1NnJRN3w3T1E4VjddUThfN25TOGE3dDpuUThkN31ROHM4ZVE5UTh0UTlYOVJROnU6cFE7VDp6UTtVOntRO1Y7aFI7WzttJHJXT1JTVFVqa30hUyFXIV0hYCFuIXYheiF8I1AjUSNSI1MjVCNVI1YjVyNYI1kjWiNiI2UkXSRuJVslXyVgJWMlZSVmJWclaSVtJXgleiZTJl8mZiZwJn0nUihSKVYpXiprKm8qdCtUK3gsUCxiLGgtdS16LlMuXS58L18vYC9hL2MvZy9qL2wwVDBqMHQyaTNSM2YzaDNpM3g1bzV9Nlc3ajhdOG9TIXhuIWshajpvI10jayZXJ3crWCtbLG0vezFYMnEzcTZ7OV45YDljOWU5ZjlnOWg5aTlqOWs5bDltOW45bzlwOXM6UTpSOlQ6XzpgOmc6aDthUjp1O2AkclhPUlNUVWprfSFTIVchXSFgIW4hdiF6IXwjUCNRI1IjUyNUI1UjViNXI1gjWSNaI2IjZSRdJG4lWyVfJWAlYyVlJWYlZyVpJW0leCV6JlMmXyZmJnAmfSdSKFIpVileKmsqbyp0K1QreCxQLGIsaC11LXouUy5dLnwvXy9gL2EvYy9nL2ovbDBUMGowdDJpM1IzZjNoM2kzeDVvNX02VzdqOF04b1EkW2IhWSRlbSFqJGgkaSRqJlUmaiZrJmwoaylmKWcrXStqK3wrfS1kLlswUTBXMF0waDF1M3s0UTZaN2s4XlMka24ha1EpYyRmUSpdJVRXL1IqXipfKmAqYVUzVy9TL1QvVVE1YTJzUzVzM1gzWVU3TzViNWM1ZlE3XTV0VTd9N1A3UTdTUzhlOE84UFM4dDhmOGdROVI4dSFqOnAjXSNrJlcndytYK1ssbS97MVgycTNxNns5XjlgOWM5ZTlmOWc5aDlpOWo5azlsOW05bjlvOXA5czpROlI6VDpfOmA6ZzpoO2FROno7X1I6eztgJGZdT1NUamt9IVMhVyFuIXYheiF8I1AjUSNSI1MjVCNVI1YjVyNYI1kjWiNiI2UkXSRuJVslXyVjJWUlZiVnJWklbSV6JlMmXyZmJnAmfSdSKFIpVileKmsqbyp0K1QreCxQLGIsaC11LXouUy5dLnwvXy9gL2EvYy9nL2ovbDBUMGowdDJpM1IzZjNoM2kzeDVvNX02VzdqOF04b1khaFJVIV0hYCV4diR3cnMhciF1JFokdSZgJnQmdyl4KXkpeiptK1kraCxTLFUvbzBsUSpqJWAhaDpxI10jayd3K1grWyxtL3sxWDJxM3E2ezleOWA5YzllOWY5ZzloOWk5ajlrOWw5bTluOW85cDlzOlE6UjpUOl86YDpnOmg7YVI6dCZXUyZbIWIkdlIwTytjJHBbT1JTVFVqa30hUyFXIV0hYCFuIXYheiF8I1AjUSNSI1MjVCNVI1YjVyNYI1kjWiNiI2UkXSRuJVslXyVjJWUlZiVnJWklbSV4JXomUyZfJmYmcCZ9J1IoUilWKV4qaypvKnQrVCt4LFAsYixoLXUtei5TLl0ufC9fL2AvYS9jL2cvai9sMFQwajB0MmkzUjNmM2gzaTN4NW81fTZXN2o4XThvIWonZSNdI2smVyd3K1grWyxtL3sxWDJxM3E2ezleOWA5YzllOWY5ZzloOWk5ajlrOWw5bTluOW85cDlzOlE6UjpUOl86YDpnOmg7YVIqaSVgJHJvT1JTVFVqa30hUyFXIV0hYCFuIXYheiF8I1AjUSNSI1MjVCNVI1YjVyNYI1kjWiNiI2UkXSRuJVslXyVgJWMlZSVmJWclaSVtJXgleiZTJl8mZiZwJn0nUihSKVYpXiprKm8qdCtUK3gsUCxiLGgtdS16LlMuXS58L18vYC9hL2MvZy9qL2wwVDBqMHQyaTNSM2YzaDNpM3g1bzV9Nlc3ajhdOG9RJ1UheyFrOnIjXSNrJlcndytYK1ssbS97MVgycTNxNns5XjlgOWM5ZTlmOWc5aDlpOWo5azlsOW05bjlvOXA5czpROlI6VDpfOmA6ZzpoO2EhaCNWWiFfJGEldyV9JnknUSdfJ2AnYSdiJ2cnaylwK1IrZyxPLF4sZCx3LXgwaTBzMVQyTzJbM3Y0VzRbNlY3ZzhaOG04eTlfIVI5aydkJ3UrXixpL3YveTB3MVAxUTFSMVMxVzFdM3M0XTRiNGM1YDZTNmI2ZjZnN3o6fCFkI1haIV8kYSV3JX0meSdRJ2EnYidnJ2spcCtSK2csTyxeLGQsdy14MGkwczFUMk8yWzN2NFc0WzZWN2c4WjhtOHk5X305bSdkJ3UrXixpL3YveTB3MVIxUzFXMV0zczRdNGI0YzVgNlM2YjZmNmc3ejp8IWAjXVohXyRhJXclfSZ5J1EnZydrKXArUitnLE8sXixkLHcteDBpMHMxVDJPMlszdjRXNFs2VjdnOFo4bTh5OV9RMWEtUHg7YSdkJ3UrXixpL3YveTB3MVcxXTNzNF00YjRjNWA2UzZiNmY2Zzd6OnxRO2k7cFE7ajtxUjtrO3ImXmNPUlNUVWprfSFTIVchXSFgIW4hdiF6IXwjUCNRI1IjUyNUI1UjViNXI1gjWSNaI10jYiNlI2skXSRuJVslXyVgJWMlZSVmJWclaSVtJXgleiZTJlcmXyZmJnAmfSdSJ3coUilWKV4qaypvKnQrVCtYK1sreCxQLGIsaCxtLXUtei5TLl0ufC9fL2AvYS9jL2cvai9sL3swVDBqMHQxWDJpMnEzUjNmM2gzaTNxM3g1bzV9Nlc2ezdqOF04bzleOWA5YzllOWY5ZzloOWk5ajlrOWw5bTluOW85cDlzOlE6UjpUOl86YDpnOmg7YVMjbGAjbVIxWSxsJmVfT1JTVFVgamt9IVMhVyFdIWAhbiF2IXohfCNQI1EjUiNTI1QjVSNWI1cjWCNZI1ojXSNiI2UjayNtJF0kbiVbJV8lYCVjJWUlZiVnJWklbSV4JXomUyZXJl8mZiZwJn0nUid3KFIpVileKmsqbyp0K1QrWCtbK3gsUCxiLGgsbCxtLXUtei5TLl0ufC9fL2AvYS9jL2cvai9sL3swVDBqMHQxWDJpMnEzUjNmM2gzaTNxM3g1bzV9Nlc2ezdqOF04bzleOWA5YzllOWY5ZzloOWk5ajlrOWw5bTluOW85cDlzOlE6UjpUOl86YDpnOmg7YVMjZ14jblQnbiNpJ3JUI2heI25UJ3AjaSdyJmVgT1JTVFVgamt9IVMhVyFdIWAhbiF2IXohfCNQI1EjUiNTI1QjVSNWI1cjWCNZI1ojXSNiI2UjayNtJF0kbiVbJV8lYCVjJWUlZiVnJWklbSV4JXomUyZXJl8mZiZwJn0nUid3KFIpVileKmsqbyp0K1QrWCtbK3gsUCxiLGgsbCxtLXUtei5TLl0ufC9fL2AvYS9jL2cvai9sL3swVDBqMHQxWDJpMnEzUjNmM2gzaTNxM3g1bzV9Nlc2ezdqOF04bzleOWA5YzllOWY5ZzloOWk5ajlrOWw5bTluOW85cDlzOlE6UjpUOl86YDpnOmg7YVQjbGAjbVEjb2BSJ3kjbSRyYk9SU1RVamt9IVMhVyFdIWAhbiF2IXohfCNQI1EjUiNTI1QjVSNWI1cjWCNZI1ojYiNlJF0kbiVbJV8lYCVjJWUlZiVnJWklbSV4JXomUyZfJmYmcCZ9J1IoUilWKV4qaypvKnQrVCt4LFAsYixoLXUtei5TLl0ufC9fL2AvYS9jL2cvai9sMFQwajB0MmkzUjNmM2gzaTN4NW81fTZXN2o4XThvIWs7XyNdI2smVyd3K1grWyxtL3sxWDJxM3E2ezleOWA5YzllOWY5ZzloOWk5ajlrOWw5bTluOW85cDlzOlE6UjpUOl86YDpnOmg7YSNSZE9TVWp9IVMhVyFuIXwjayRdJVslXyVgJWMlZSVmJWclaSVtJlMmZid3KV4qaypvKnQreCxtLXUuUy58L18vYC9hL2MvZy9qL2wxWDJpM1IzZjNoM2k1bzV9eCN7YSF5JFQkVSRZKFcoWShiKHcoeCxfLVktdzFhMXk2aTteO2k7ajtrI1smfCF3I2QjdiN5JmcnfShaKGgpXSlfKWEqTypSK3ktWi1dLlIuVC5wLnMuey59MWsxczJRMlQyWDJqM1EzUzRsNHU0fTVrNXA2ejdXOFQ5dzl6OX06VTpYOls6YTpkOmo7bDtuO3Q7dTt2USlTJFdRLHgoU2QxVjlyOXk5fDpQOlc6WjpeOmM6ZjpsZThxOWQ5eDl7Ok86VjpZOl06YjplOmt4I3dhIXkkVCRVJFkoVyhZKGIodyh4LF8tWS13MWExeTZpO147aTtqO2tRKGQjeFMobiN6KHFRKVQkWFEtZyhvI1s6dyF3I2QjdiN5JmcnfShaKGgpXSlfKWEqTypSK3ktWi1dLlIuVC5wLnMuey59MWsxczJRMlQyWDJqM1EzUzRsNHU0fTVrNXA2ejdXOFQ5dzl6OX06VTpYOls6YTpkOmo7bDtuO3Q7dTt2ZDp4OWQ5eDl7Ok86VjpZOl06YjplOmtkOnk5cjl5OXw6UDpXOlo6XjpjOmY6bFE6fTtiUTtPO2NRO1A7ZFE7UTtlUTtSO2ZSO1M7Z3gje2EheSRUJFUkWShXKFkoYih3KHgsXy1ZLXcxYTF5Nmk7XjtpO2o7ayNbJnwhdyNkI3YjeSZnJ30oWihoKV0pXylhKk8qUit5LVotXS5SLlQucC5zLnsufTFrMXMyUTJUMlgyajNRM1M0bDR1NH01azVwNno3VzhUOXc5ejl9OlU6WDpbOmE6ZDpqO2w7bjt0O3U7dmQxVjlyOXk5fDpQOlc6WjpeOmM6ZjpsZThxOWQ5eDl7Ok86VjpZOl06YjplOmtsZk9Tan0hbiRdJWMlZiVnJWkqbyp0L2cvalEoZyN5USp9JXBRK08lclIxai1aJU8jfGEhdyF5I2QjdiN5JFQkVSRZJmcnfShXKFkoWihiKGgodyh4KV0pXylhKk8qUit5LF8tWS1aLV0tdy5SLlQucC5zLnsufTFhMWsxczF5MlEyVDJYMmozUTNTNGw0dTR9NWs1cDZpNno3VzhUOWQ5cjl3OXg5eTl6OXs5fDl9Ok86UDpVOlY6VzpYOlk6WjpbOl06XjphOmI6YzpkOmU6ZjpqOms6bDteO2k7ajtrO2w7bjt0O3U7dlEqUSR9US5yKlNRMm0ucVI1XTJuVChwI3oocVMocCN6KHFUMnUueTJ2USliJGVRLWYoblEuWCljUS9RKl1RM1YvUlE1cjNXUTZ9NWFRN1s1c1E3fDdPUThWN11ROGQ3fVE4czhlUTlROHRSOVg5UnAoVyN0J08pVS1YLW8tcDBxMWgxfTRmNHc3cTp2O1c7WDtZIW46VSZ6J2koXihmK3YsWyx0LVAtXi18LlAuby5xMGUwcDFpMW0yVzJsMm4zTzRZNFo0bTRxNHk1TzVaNW42bTZxN1k4YDtaO107cDtxO3JbOlY4cDlPOVY5WTlaOV1dOlcxVTRhNmM3bzdwOHpyKFkjdCdPKVUsfS1YLW8tcDBxMWgxfTRmNHc3cTp2O1c7WDtZIXA6WCZ6J2koXihmK3YsWyx0LVAtXi18LlAuby5xMGUwbjBwMWkxbTJXMmwybjNPNFk0WjRtNHE0eTVPNVo1bjZtNnE3WThgO1o7XTtwO3E7cl46WThwOU85VDlWOVk5WjldXzpaMVU0YTZjNmQ3bzdwOHpwZU9Tanl9IW4kXSVZJWMlZiVnJWkqbyp0L2cvalElVnhSKmslYHBlT1NqeX0hbiRdJVklYyVmJWclaSpvKnQvZy9qUiVWeFEqVSVPUi5uKX1xZU9Tanl9IW4kXSVZJWMlZiVnJWkqbyp0L2cvalEueipaUzNQL08vUFc1ajJ8Mn0zTzNUVTdWNWw1bTVuVThSN1U3WDdZUThoOFNSOHY4aVElXnlSKmUlWVIzXi9YUjdfNXVTJG1wJHJSLmQpblElY3pSKm8lZFIqdSVqVC9oKnQvalIqeSVrUSp4JWtSL3EqeVFqT1EhblNUJGBqIW5RKFAjc1IsdShQUSFZUVIldSFZUSFeUlUleyFeJXwrVVElfCFfUitVJX1RK2EmWFIvfSthUSxgJ09SMHIsYFEsYydRUzB1LGMwdlIwdixkUSttJmRSMFgrbVMhZVIkdVUmYSFlJmIrVlEmYiFmUitWJk9RK2QmW1IwUCtkUSZ1IXNRLFImc1UsViZ1LFIwbVIwbSxXUSdyI2lSLG4nclEjbWBSJ3gjbVEjY1pVJ2gjYytROXFRK1E5X1I5cSd1US1TKF9XMWQtUzFlNGo2bFUxZS1ULVUtVlM0ajFmMWdSNmw0ayRrKFUjdCZ6J08naSheKGYpUClRKVUrdixZLFosWyx0LH0tTy1QLVgtXi1vLXAtfC5QLm8ucTBlMG4wbzBwMHExVTFoMWkxbTF9MlcybDJuM080WTRaNF80YDRhNGY0bTRxNHc0eTVPNVo1bjZjNmQ2ZTZtNnE3WTdvN3A3cThgOHA4ejh8OH05TzlUOVU5VjlZOVo5XTp2O1c7WDtZO1o7XTtwO3E7clEtWyhmVTFsLVsxbjRuUTFuLV5SNG4xbVEocSN6Ui1pKHFRKHokT1Itcih6UTJSLXxSNHoyUlEpeyR4Ui5tKXtRMnAudFM1XzJwNnxSNnw1YFEqVyVQUi53KldRMnYueVI1ZDJ2US9XKmJTM1svVzV2UjV2M15RLl8palcyYS5fMmM1VDZ3UTJjLmJRNVQyYlI2dzVVUSlvJG1SLmUpb1Evaip0UjNsL2pXaU9TaiFuUSVofVEpWCRdUSpuJWNRKnAlZlEqcSVnUSpzJWlRL2Uqb1MvaCp0L2pSM2svZ1EkX2dRJWwhUlElbyFUUSVxIVVRJXMhVlEpdiRzUSl8JHlRKmQlXlEqeyVuUS1oKHBTL1oqZSpoUS9yKnpRL3MqfVEvdCtPUzBTK2oyc1EyZi5oUTJrLm9RM1UvUVEzYC9dUTNqL2ZZM3cwVTBWMF0wYjVmUTVYMmhRNVsybFE1cTNWUTV3M19bNlUzdjN5M300UDRRN1NRNng1VlE3WjVyUTdgNXhXN2Y2VjZbNl42YFE3eDZ5UTd7Nn1ROFU3W1U4WDdnN2w3blE4Yzd8UThqOFZTOGs4WjhfUThyOGRROHc4bVE5UDhzUTlTOHlROVc5UVI5WzlYUSRnbVEmaSFqVSllJGgkaSRqUStaJlVVK3smaiZrJmxRLWAoa1MuWilmKWdRL3orXVEwUitqUzBnK3wrfVExcS1kUTJaLltRM3QwUVMzejBXMF1RNFYwaFE0cjF1UzZZM3s0UVE3aTZaUThbN2tSOG44XlMjdWE7XlIoeyRQVSRPYSRQO15SLXEoeVEjdGFTJnohdylhUSdPIXlRJ2kjZFEoXiN2UShmI3lRKVAkVFEpUSRVUSlVJFlRK3YmZ1EsWTl3USxaOXpRLFs5fVEsdCd9USx9KFdRLU8oWVEtUChaUS1YKGJRLV4oaFEtbyh3US1wKHhkLXwpXS5SLnsyVDNRNH01azZ6N1c4VFEuUClfUS5vKk9RLnEqUlEwZSt5UTBuOlVRMG86WFEwcDpbUTBxLF9RMVU5clExaC1ZUTFpLVpRMW0tXVExfS13UTJXLlRRMmwucFEybi5zUTNPLn1RNFk6YVE0WjpkUTRfOXlRNGA5fFE0YTpQUTRmMWFRNG0xa1E0cTFzUTR3MXlRNHkyUVE1TzJYUTVaMmpRNW4zU1E2YzpeUTZkOldRNmU6WlE2bTRsUTZxNHVRN1k1cFE3bzpjUTdwOmZRN3E2aVE4YDpqUThwOWRROHo6bFE4fDl4UTh9OXtROU86T1E5VDpWUTlVOllROVY6XVE5WTpiUTlaOmVROV06a1E6djteUTtXO2lRO1g7alE7WTtrUTtaO2xRO107blE7cDt0UTtxO3VSO3I7dmxnT1NqfSFuJF0lYyVmJWclaSpvKnQvZy9qUyFwVSVlUSVuIVNRJXQhV1EnViF8USd2I2tTKmglWyVfUSpsJWBRKnolbVErVyZTUSt1JmZRLHInd1EuTyleUS9iKmtRMGQreFExWyxtUTF7LXVRMlYuU1EyfS58UTNiL19RM2MvYFEzZS9hUTNnL2NRM24vbFE0ZDFYUTVZMmlRNW0zUlE1fDNmUTZPM2hRNlAzaVE3WDVvUjdiNX0hdlpPU1VqfSFTIW4hfCRdJVslXyVgJWMlZSVmJWclaSVtJlMmZileKmsqbyp0K3gtdS5TLnwvXy9gL2EvYy9nL2ovbDJpM1IzZjNoM2k1bzV9USFfUlEhb1RRJGFrUyV3IV0lelElfSFgUSZ5IXZRJ1EhelEnVyNQUSdYI1FRJ1kjUlEnWiNTUSdbI1RRJ10jVVEnXiNWUSdfI1dRJ2AjWFEnYSNZUSdiI1pRJ2QjXVEnZyNiUSdrI2VXJ3Ujayd3LG0xWFEpcCRuUytSJXgrVFMrXiZXL3tRK2cmX1EsTyZwUSxeJn1RLGQnUlEsZzleUSxpOWBRLHcoUlEteClWUS92K1hRL3krW1EwaSxQUTBzLGJRMHc5Y1EweDllUTB5OWZRMHo5Z1EwezloUTB8OWlRMH05alExTzlrUTFQOWxRMVE5bVExUjluUTFTOW9RMVQsaFExVzlzUTFdOXBRMk8telEyWy5dUTNzOlFRM3YwVFE0VzBqUTRbMHRRNF06UlE0YjpUUTRjOl9RNWAycVE2UzNxUTZWM3hRNmI6YFE2ZjpnUTZnOmhRN2c2V1E3ejZ7UThaN2pROG04XVE4eThvUTlfIVdSOnw7YVIhYVJSJlkhYlMmVSFiK2BTK10mViZeUjBRK2ZSJ1AheVInUyF6VCF0VSRaUyFzVSRaVSR4cnMqbVMmcyFyIXVRLFQmdFEsVyZ3US5sKXpTMGssUyxVUjRYMGxgIWRSIV0hYCR1JXgmYCl4K2hoIXFVcnMhciF1JFomdCZ3KXosUyxVMGxRL2QqbVEvdytZUTNwL29UOnMmVyl5VCFnUiR1UyFmUiR1UyV5IV0mYFMmTyFgKXhTK1MleCtoVCtfJlcpeVQmXSFiJHZRI2leUid7I25UJ3EjaSdyUjFaLGxUKGEjdihjUihpI3lRLX0pXVEyVS5SUTJ8LntRNHsyVFE1bDNRUTZ0NH1RN1U1a1E3eTZ6UThTN1dSOGk4VGxoT1NqfSFuJF0lYyVmJWclaSpvKnQvZy9qUSVdeVIqZCVZViR5cnMqbVIudSpUUipjJVdRJHFwUil1JHJSKWskbFQlYXolZFQlYnolZFQvaSp0L2pcIixcbiAgbm9kZU5hbWVzOiBcIlx1MjZBMCBleHRlbmRzIEFyaXRoT3AgQXJpdGhPcCBJbnRlcnBvbGF0aW9uU3RhcnQgTGluZUNvbW1lbnQgQmxvY2tDb21tZW50IFNjcmlwdCBFeHBvcnREZWNsYXJhdGlvbiBleHBvcnQgU3RhciBhcyBWYXJpYWJsZU5hbWUgU3RyaW5nIGZyb20gOyBkZWZhdWx0IEZ1bmN0aW9uRGVjbGFyYXRpb24gYXN5bmMgZnVuY3Rpb24gVmFyaWFibGVEZWZpbml0aW9uIFR5cGVQYXJhbUxpc3QgVHlwZURlZmluaXRpb24gVGhpc1R5cGUgdGhpcyBMaXRlcmFsVHlwZSBBcml0aE9wIE51bWJlciBCb29sZWFuTGl0ZXJhbCBUZW1wbGF0ZVR5cGUgSW50ZXJwb2xhdGlvbkVuZCBJbnRlcnBvbGF0aW9uIFZvaWRUeXBlIHZvaWQgVHlwZW9mVHlwZSB0eXBlb2YgTWVtYmVyRXhwcmVzc2lvbiAuID8uIFByb3BlcnR5TmFtZSBbIFRlbXBsYXRlU3RyaW5nIEludGVycG9sYXRpb24gbnVsbCBzdXBlciBSZWdFeHAgXSBBcnJheUV4cHJlc3Npb24gU3ByZWFkICwgfSB7IE9iamVjdEV4cHJlc3Npb24gUHJvcGVydHkgYXN5bmMgZ2V0IHNldCBQcm9wZXJ0eURlZmluaXRpb24gQmxvY2sgOiBOZXdFeHByZXNzaW9uIG5ldyBUeXBlQXJnTGlzdCBDb21wYXJlT3AgPCApICggQXJnTGlzdCBVbmFyeUV4cHJlc3Npb24gYXdhaXQgeWllbGQgZGVsZXRlIExvZ2ljT3AgQml0T3AgUGFyZW50aGVzaXplZEV4cHJlc3Npb24gQ2xhc3NFeHByZXNzaW9uIGNsYXNzIGV4dGVuZHMgQ2xhc3NCb2R5IE1ldGhvZERlY2xhcmF0aW9uIFByaXZhY3kgc3RhdGljIGFic3RyYWN0IG92ZXJyaWRlIFByaXZhdGVQcm9wZXJ0eURlZmluaXRpb24gUHJvcGVydHlEZWNsYXJhdGlvbiByZWFkb25seSBPcHRpb25hbCBUeXBlQW5ub3RhdGlvbiBFcXVhbHMgU3RhdGljQmxvY2sgRnVuY3Rpb25FeHByZXNzaW9uIEFycm93RnVuY3Rpb24gUGFyYW1MaXN0IFBhcmFtTGlzdCBBcnJheVBhdHRlcm4gT2JqZWN0UGF0dGVybiBQYXR0ZXJuUHJvcGVydHkgUHJpdmFjeSByZWFkb25seSBBcnJvdyBNZW1iZXJFeHByZXNzaW9uIFByaXZhdGVQcm9wZXJ0eU5hbWUgQmluYXJ5RXhwcmVzc2lvbiBBcml0aE9wIEFyaXRoT3AgQXJpdGhPcCBBcml0aE9wIEJpdE9wIENvbXBhcmVPcCBpbnN0YW5jZW9mIGluIGNvbnN0IENvbXBhcmVPcCBCaXRPcCBCaXRPcCBCaXRPcCBMb2dpY09wIExvZ2ljT3AgQ29uZGl0aW9uYWxFeHByZXNzaW9uIExvZ2ljT3AgTG9naWNPcCBBc3NpZ25tZW50RXhwcmVzc2lvbiBVcGRhdGVPcCBQb3N0Zml4RXhwcmVzc2lvbiBDYWxsRXhwcmVzc2lvbiBUYWdnZWRUZW1wbGF0ZUV4cHJlc3Npb24gRHluYW1pY0ltcG9ydCBpbXBvcnQgSW1wb3J0TWV0YSBKU1hFbGVtZW50IEpTWFNlbGZDbG9zZUVuZFRhZyBKU1hTdGFydFRhZyBKU1hTZWxmQ2xvc2luZ1RhZyBKU1hJZGVudGlmaWVyIEpTWE5hbWVzcGFjZWROYW1lIEpTWE1lbWJlckV4cHJlc3Npb24gSlNYU3ByZWFkQXR0cmlidXRlIEpTWEF0dHJpYnV0ZSBKU1hBdHRyaWJ1dGVWYWx1ZSBKU1hFc2NhcGUgSlNYRW5kVGFnIEpTWE9wZW5UYWcgSlNYRnJhZ21lbnRUYWcgSlNYVGV4dCBKU1hFc2NhcGUgSlNYU3RhcnRDbG9zZVRhZyBKU1hDbG9zZVRhZyBQcmVmaXhDYXN0IEFycm93RnVuY3Rpb24gVHlwZVBhcmFtTGlzdCBTZXF1ZW5jZUV4cHJlc3Npb24gS2V5b2ZUeXBlIGtleW9mIFVuaXF1ZVR5cGUgdW5pcXVlIEltcG9ydFR5cGUgSW5mZXJyZWRUeXBlIGluZmVyIFR5cGVOYW1lIFBhcmVudGhlc2l6ZWRUeXBlIEZ1bmN0aW9uU2lnbmF0dXJlIFBhcmFtTGlzdCBOZXdTaWduYXR1cmUgSW5kZXhlZFR5cGUgVHVwbGVUeXBlIExhYmVsIEFycmF5VHlwZSBSZWFkb25seVR5cGUgT2JqZWN0VHlwZSBNZXRob2RUeXBlIFByb3BlcnR5VHlwZSBJbmRleFNpZ25hdHVyZSBDYWxsU2lnbmF0dXJlIFR5cGVQcmVkaWNhdGUgaXMgTmV3U2lnbmF0dXJlIG5ldyBVbmlvblR5cGUgTG9naWNPcCBJbnRlcnNlY3Rpb25UeXBlIExvZ2ljT3AgQ29uZGl0aW9uYWxUeXBlIFBhcmFtZXRlcml6ZWRUeXBlIENsYXNzRGVjbGFyYXRpb24gYWJzdHJhY3QgaW1wbGVtZW50cyB0eXBlIFZhcmlhYmxlRGVjbGFyYXRpb24gbGV0IHZhciBUeXBlQWxpYXNEZWNsYXJhdGlvbiBJbnRlcmZhY2VEZWNsYXJhdGlvbiBpbnRlcmZhY2UgRW51bURlY2xhcmF0aW9uIGVudW0gRW51bUJvZHkgTmFtZXNwYWNlRGVjbGFyYXRpb24gbmFtZXNwYWNlIG1vZHVsZSBBbWJpZW50RGVjbGFyYXRpb24gZGVjbGFyZSBHbG9iYWxEZWNsYXJhdGlvbiBnbG9iYWwgQ2xhc3NEZWNsYXJhdGlvbiBDbGFzc0JvZHkgTWV0aG9kRGVjbGFyYXRpb24gQW1iaWVudEZ1bmN0aW9uRGVjbGFyYXRpb24gRXhwb3J0R3JvdXAgVmFyaWFibGVOYW1lIFZhcmlhYmxlTmFtZSBJbXBvcnREZWNsYXJhdGlvbiBJbXBvcnRHcm91cCBGb3JTdGF0ZW1lbnQgZm9yIEZvclNwZWMgRm9ySW5TcGVjIEZvck9mU3BlYyBvZiBXaGlsZVN0YXRlbWVudCB3aGlsZSBXaXRoU3RhdGVtZW50IHdpdGggRG9TdGF0ZW1lbnQgZG8gSWZTdGF0ZW1lbnQgaWYgZWxzZSBTd2l0Y2hTdGF0ZW1lbnQgc3dpdGNoIFN3aXRjaEJvZHkgQ2FzZUxhYmVsIGNhc2UgRGVmYXVsdExhYmVsIFRyeVN0YXRlbWVudCB0cnkgQ2F0Y2hDbGF1c2UgY2F0Y2ggRmluYWxseUNsYXVzZSBmaW5hbGx5IFJldHVyblN0YXRlbWVudCByZXR1cm4gVGhyb3dTdGF0ZW1lbnQgdGhyb3cgQnJlYWtTdGF0ZW1lbnQgYnJlYWsgQ29udGludWVTdGF0ZW1lbnQgY29udGludWUgRGVidWdnZXJTdGF0ZW1lbnQgZGVidWdnZXIgTGFiZWxlZFN0YXRlbWVudCBFeHByZXNzaW9uU3RhdGVtZW50XCIsXG4gIG1heFRlcm06IDMzMixcbiAgY29udGV4dDogdHJhY2tOZXdsaW5lLFxuICBub2RlUHJvcHM6IFtcbiAgICBbXCJjbG9zZWRCeVwiLCA0LFwiSW50ZXJwb2xhdGlvbkVuZFwiLDQwLFwiXVwiLDUxLFwifVwiLDY2LFwiKVwiLDEzMixcIkpTWFNlbGZDbG9zZUVuZFRhZyBKU1hFbmRUYWdcIiwxNDYsXCJKU1hFbmRUYWdcIl0sXG4gICAgW1wiZ3JvdXBcIiwgLTI2LDgsMTUsMTcsNTgsMTg0LDE4OCwxOTEsMTkyLDE5NCwxOTcsMjAwLDIxMSwyMTMsMjE5LDIyMSwyMjMsMjI1LDIyOCwyMzQsMjQwLDI0MiwyNDQsMjQ2LDI0OCwyNTAsMjUxLFwiU3RhdGVtZW50XCIsLTMwLDEyLDEzLDI0LDI3LDI4LDQxLDQzLDQ0LDQ1LDQ3LDUyLDYwLDY4LDc0LDc1LDkxLDkyLDEwMSwxMDMsMTE5LDEyMiwxMjQsMTI1LDEyNiwxMjcsMTI5LDEzMCwxNDgsMTQ5LDE1MSxcIkV4cHJlc3Npb25cIiwtMjIsMjMsMjUsMjksMzIsMzQsMTUyLDE1NCwxNTYsMTU3LDE1OSwxNjAsMTYxLDE2MywxNjQsMTY1LDE2NywxNjgsMTY5LDE3OCwxODAsMTgyLDE4MyxcIlR5cGVcIiwtMyw3OSw4NSw5MCxcIkNsYXNzSXRlbVwiXSxcbiAgICBbXCJvcGVuZWRCeVwiLCAzMCxcIkludGVycG9sYXRpb25TdGFydFwiLDQ2LFwiW1wiLDUwLFwie1wiLDY1LFwiKFwiLDEzMSxcIkpTWFN0YXJ0VGFnXCIsMTQxLFwiSlNYU3RhcnRUYWcgSlNYU3RhcnRDbG9zZVRhZ1wiXVxuICBdLFxuICBwcm9wU291cmNlczogW2pzSGlnaGxpZ2h0XSxcbiAgc2tpcHBlZE5vZGVzOiBbMCw1LDZdLFxuICByZXBlYXROb2RlQ291bnQ6IDI4LFxuICB0b2tlbkRhdGE6IFwiIUN9flIhYE9YJVRYWSVjWVonUlpbJWNbXSVUXV4nUl5wJVRwcSVjcXInY3JzKGtzdDBodHUyYHV2NHB2dzVld3g2Y3h5PHl5ej1aens9a3t8Pmt8fT9PfSFPPmshTyFQP2AhUCFRQ2whUSFSITBbIVIhWyExcSFbIV0hN3MhXSFeIThWIV4hXyE4ZyFfIWAhOWQhYCFhITpbIWEhYiE8UiFiIWMlVCFjIX0yYCF9I08hPWQjTyNQJVQjUCNRIT10I1EjUiE+VSNSI1MyYCNTI1QhPmkjVCNvMmAjbyNwIT55I3AjcSE/TyNxI3IhP2YjciNzIT94I3MkZiVUJGYkZyVjJGcjQlkyYCNCWSNCWiFAWSNCWiRJUzJgJElTJElfIUBZJElfJEl8MmAkSXwkSX0hQnEkSX0kSk8hQnEkSk8kSlQyYCRKVCRKVSFAWSRKVSRLVjJgJEtWJEtXIUBZJEtXJkZVMmAmRlUmRlYhQFkmRlY/SFQyYD9IVD9IVSFAWT9IVX4yYFclWVIkVVdPIV4lVCFfI28lVCNwfiVUN1olamckVVcnWTdST1glVFhZJWNZWiVUWlslY1twJVRwcSVjcSFeJVQhXyNvJVQjcCRmJVQkZiRnJWMkZyNCWSVUI0JZI0JaJWMjQlokSVMlVCRJUyRJXyVjJElfJEpUJVQkSlQkSlUlYyRKVSRLViVUJEtWJEtXJWMkS1cmRlUlVCZGVSZGViVjJkZWP0hUJVQ/SFQ/SFUlYz9IVX4lVDdaJ1lSJFVXJ1o3Uk8hXiVUIV8jbyVUI3B+JVQkVCdqUyRVVyFqI3tPIV4lVCFfIWAndiFgI28lVCNwfiVUJE8nfVMjZSN2JFVXTyFeJVQhXyFgKFohYCNvJVQjcH4lVCRPKGJSI2UjdiRVV08hXiVUIV8jbyVUI3B+JVQpWChyWiRVV10jZU9ZKGtZWillWnIoa3JzKnJzIV4oayFeIV8rVSFfI08oayNPI1AtYiNQI28oayNvI3ArVSNwfihrJnIpalYkVVdPcillcnMqUHMhXillIV4hXyphIV8jbyllI28jcCphI3B+KWUmcipXUiRQJmokVVdPIV4lVCFfI28lVCNwfiVUJmoqZFJPciphcnMqbXN+KmEmaipyTyRQJmopWCp7UiRQJmokVVddI2VPIV4lVCFfI28lVCNwfiVUKVArWlZdI2VPWStVWVoqYVpyK1VycytwcyNPK1UjTyNQK3cjUH4rVSlQK3dPJFAmal0jZSlQK3pST3IrVXJzLFRzfitVKVAsW1UkUCZqXSNlT1ksblpyLG5ycy1WcyNPLG4jTyNQLVsjUH4sbiNlLHNVXSNlT1ksblpyLG5ycy1WcyNPLG4jTyNQLVsjUH4sbiNlLVtPXSNlI2UtX1BPfixuKVgtZ1YkVVdPcihrcnMtfHMhXihrIV4hXytVIV8jbyhrI28jcCtVI3B+KGspWC5WWiRQJmokVVddI2VPWS54WVolVFpyLnhycy9ycyFeLnghXiFfLG4hXyNPLngjTyNQMFMjUCNvLngjbyNwLG4jcH4ueCNtL1BaJFVXXSNlT1kueFlaJVRaci54cnMvcnMhXi54IV4hXyxuIV8jTy54I08jUDBTI1Ajby54I28jcCxuI3B+LngjbS95UiRVV10jZU8hXiVUIV8jbyVUI3B+JVQjbTBYVCRVV08hXi54IV4hXyxuIV8jby54I28jcCxuI3B+LngzXTBtWiRVV090JVR0dTFgdSFeJVQhXyFjJVQhYyF9MWAhfSNSJVQjUiNTMWAjUyNUJVQjVCNvMWAjcCRnJVQkZ34xYDNdMWddJFVXJ28zVE90JVR0dTFgdSFRJVQhUSFbMWAhWyFeJVQhXyFjJVQhYyF9MWAhfSNSJVQjUiNTMWAjUyNUJVQjVCNvMWAjcCRnJVQkZ34xYDdaMmtfJFVXI3pTJ10keSdnM1NPdCVUdHUyYHV9JVR9IU8zaiFPIVElVCFRIVsyYCFbIV4lVCFfIWMlVCFjIX0yYCF9I1IlVCNSI1MyYCNTI1QlVCNUI28yYCNwJGclVCRnfjJgWzNxXyRVVyN6U090JVR0dTNqdX0lVH0hTzNqIU8hUSVUIVEhWzNqIVshXiVUIV8hYyVUIWMhfTNqIX0jUiVUI1IjUzNqI1MjVCVUI1QjbzNqI3AkZyVUJGd+M2okTzR3UyNeI3YkVVdPIV4lVCFfIWA1VCFgI28lVCNwfiVUJE81W1IkVVcjbyN2TyFeJVQhXyNvJVQjcH4lVDViNWxVJ3g1WSRVV092JVR2dzZPdyFeJVQhXyFgNVQhYCNvJVQjcH4lVCRPNlZTJFVXI2kjdk8hXiVUIV8hYDVUIWAjbyVUI3B+JVQpWDZqWiRVV10jZU9ZNmNZWjddWnc2Y3d4KnJ4IV42YyFeIV84VCFfI082YyNPI1A6VCNQI282YyNvI3A4VCNwfjZjJnI3YlYkVVdPdzddd3gqUHghXjddIV4hXzd3IV8jbzddI28jcDd3I3B+N10majd6Uk93N3d3eCpteH43dylQOFlWXSNlT1k4VFlaN3dadzhUd3grcHgjTzhUI08jUDhvI1B+OFQpUDhyUk93OFR3eDh7eH44VClQOVNVJFAmal0jZU9ZOWZadzlmd3gtVngjTzlmI08jUDl9I1B+OWYjZTlrVV0jZU9ZOWZadzlmd3gtVngjTzlmI08jUDl9I1B+OWYjZTpRUE9+OWYpWDpZViRVV093NmN3eDpveCFeNmMhXiFfOFQhXyNvNmMjbyNwOFQjcH42YylYOnhaJFAmaiRVV10jZU9ZO2tZWiVUWnc7a3d4L3J4IV47ayFeIV85ZiFfI087ayNPI1A8ZSNQI287ayNvI3A5ZiNwfjtrI207clokVVddI2VPWTtrWVolVFp3O2t3eC9yeCFeO2shXiFfOWYhXyNPO2sjTyNQPGUjUCNvO2sjbyNwOWYjcH47ayNtPGpUJFVXTyFeO2shXiFfOWYhXyNvO2sjbyNwOWYjcH47ayZpPVFSIWQmYSRVV08hXiVUIV8jbyVUI3B+JVRrPWJSIWNjJFVXTyFeJVQhXyNvJVQjcH4lVDdWPXRVJ140ViNfI3YkVVdPeiVUens+V3shXiVUIV8hYDVUIWAjbyVUI3B+JVQkTz5fUyNbI3YkVVdPIV4lVCFfIWA1VCFgI28lVCNwfiVUJXc+clNqJW8kVVdPIV4lVCFfIWA1VCFgI28lVCNwfiVUJmk/VlIhUiZhJFVXTyFeJVQhXyNvJVQjcH4lVDdaP2dWdTVeJFVXTyFPJVQhTyFQP3whUCFRJVQhUSFbQHIhWyFeJVQhXyNvJVQjcH4lVCF7QFJUJFVXTyFPJVQhTyFQQGIhUCFeJVQhXyNvJVQjcH4lVCF7QGlSIVEhcyRVV08hXiVUIV8jbyVUI3B+JVQhe0B5WiRVV2shc08hUSVUIVEhW0ByIVshXiVUIV8hZyVUIWchaEFsIWgjUiVUI1IjU0ByI1MjWCVUI1gjWUFsI1kjbyVUI3B+JVQhe0FxWiRVV097JVR7fEJkfH0lVH0hT0JkIU8hUSVUIVEhW0NPIVshXiVUIV8jUiVUI1IjU0NPI1MjbyVUI3B+JVQhe0JpViRVV08hUSVUIVEhW0NPIVshXiVUIV8jUiVUI1IjU0NPI1MjbyVUI3B+JVQhe0NWViRVV2shc08hUSVUIVEhW0NPIVshXiVUIV8jUiVUI1IjU0NPI1MjbyVUI3B+JVQ3WkNzYCRVVyNdI3ZPWUR1WVolVFp6RHV6e0pseyFQRHUhUCFRIS1lIVEhXkR1IV4hX0Z4IV8hYCEuXiFgIWEhL10hYSF9RHUhfSNPSHEjTyNQSlEjUCNvRHUjbyNwRngjcH5EdVhEfFskVVd9UE9ZRHVZWiVUWiFQRHUhUCFRRXIhUSFeRHUhXiFfRnghXyF9RHUhfSNPSHEjTyNQSlEjUCNvRHUjbyNwRngjcH5EdVhFeV8kVVd9UE8hXiVUIV8jWiVUI1ojW0VyI1sjXSVUI10jXkVyI14jYSVUI2EjYkVyI2IjZyVUI2cjaEVyI2gjaSVUI2kjakVyI2ojbSVUI20jbkVyI24jbyVUI3B+JVRQRn1WfVBPWUZ4WiFQRnghUCFRR2QhUSF9RnghfSNPR3sjTyNQSGgjUH5GeFBHaVV9UCNaI1tHZCNdI15HZCNhI2JHZCNnI2hHZCNpI2pHZCNtI25HZFBIT1RPWUd7WiNPR3sjTyNQSF8jUCNRRngjUX5He1BIYlFPWUd7Wn5He1BIa1FPWUZ4Wn5GeFhIdlkkVVdPWUhxWVolVFohXkhxIV4hX0d7IV8jT0hxI08jUElmI1AjUUR1I1Ejb0hxI28jcEd7I3B+SHFYSWtWJFVXT1lIcVlaJVRaIV5IcSFeIV9HeyFfI29IcSNvI3BHeyNwfkhxWEpWViRVV09ZRHVZWiVUWiFeRHUhXiFfRnghXyNvRHUjbyNwRngjcH5EdTdaSnNeJFVXfVBPWUpsWVpLb1p6Smx6e05ReyFQSmwhUCFRISxSIVEhXkpsIV4hXyEhXSFfIX1KbCF9I08hJ3wjTyNQISthI1Ajb0psI28jcCEhXSNwfkpsN1pLdFYkVVdPektventMWnshXktvIV4hX01dIV8jb0tvI28jcE1dI3B+S283WkxgWCRVV096S296e0xaeyFQS28hUCFRTHshUSFeS28hXiFfTV0hXyNvS28jbyNwTV0jcH5LbzdaTVNSJFVXVTdSTyFeJVQhXyNvJVQjcH4lVDdSTWBST3pNXXp7TWl7fk1dN1JNbFRPek1dentNaXshUE1dIVAhUU17IVF+TV03Uk5RT1U3UjdaTlheJFVXfVBPWUpsWVpLb1p6Smx6e05ReyFQSmwhUCFRISBUIVEhXkpsIV4hXyEhXSFfIX1KbCF9I08hJ3wjTyNQISthI1Ajb0psI28jcCEhXSNwfkpsN1ohIF5fJFVXVTdSfVBPIV4lVCFfI1olVCNaI1tFciNbI10lVCNdI15FciNeI2ElVCNhI2JFciNiI2clVCNnI2hFciNoI2klVCNpI2pFciNqI20lVCNtI25FciNuI28lVCNwfiVUN1IhIWJZfVBPWSEhXVlaTV1aeiEhXXp7ISNReyFQISFdIVAhUSEmeCFRIX0hIV0hfSNPISRgI08jUCEmZiNQfiEhXTdSISNWWX1QT1khIV1ZWk1dWnohIV16eyEjUXshUCEhXSFQIVEhI3UhUSF9ISFdIX0jTyEkYCNPI1AhJmYjUH4hIV03UiEjfFVVN1J9UCNaI1tHZCNdI15HZCNhI2JHZCNnI2hHZCNpI2pHZCNtI25HZDdSISRjV09ZISRgWVpNXVp6ISRgenshJHt7I08hJGAjTyNQISZTI1AjUSEhXSNRfiEkYDdSISVPWU9ZISRgWVpNXVp6ISRgenshJHt7IVAhJGAhUCFRISVuIVEjTyEkYCNPI1AhJlMjUCNRISFdI1F+ISRgN1IhJXNUVTdST1lHe1ojT0d7I08jUEhfI1AjUUZ4I1F+R3s3UiEmVlRPWSEkYFlaTV1aeiEkYHp7ISR7e34hJGA3UiEmaVRPWSEhXVlaTV1aeiEhXXp7ISNRe34hIV03UiEmfV99UE96TV16e01peyNaTV0jWiNbISZ4I1sjXU1dI10jXiEmeCNeI2FNXSNhI2IhJngjYiNnTV0jZyNoISZ4I2gjaU1dI2kjaiEmeCNqI21NXSNtI24hJngjbn5NXTdaIShSWyRVV09ZISd8WVpLb1p6ISd8enshKHd7IV4hJ3whXiFfISRgIV8jTyEnfCNPI1AhKm8jUCNRSmwjUSNvISd8I28jcCEkYCNwfiEnfDdaISh8XiRVV09ZISd8WVpLb1p6ISd8enshKHd7IVAhJ3whUCFRISl4IVEhXiEnfCFeIV8hJGAhXyNPISd8I08jUCEqbyNQI1FKbCNRI28hJ3wjbyNwISRgI3B+ISd8N1ohKlBZJFVXVTdST1lIcVlaJVRaIV5IcSFeIV9HeyFfI09IcSNPI1BJZiNQI1FEdSNRI29IcSNvI3BHeyNwfkhxN1ohKnRYJFVXT1khJ3xZWktvWnohJ3x6eyEod3shXiEnfCFeIV8hJGAhXyNvISd8I28jcCEkYCNwfiEnfDdaIStmWCRVV09ZSmxZWktvWnpKbHp7TlF7IV5KbCFeIV8hIV0hXyNvSmwjbyNwISFdI3B+Smw3WiEsWWMkVVd9UE96S296e0xaeyFeS28hXiFfTV0hXyNaS28jWiNbISxSI1sjXUtvI10jXiEsUiNeI2FLbyNhI2IhLFIjYiNnS28jZyNoISxSI2gjaUtvI2kjaiEsUiNqI21LbyNtI24hLFIjbiNvS28jbyNwTV0jcH5LbzdaIS1sViRVV1Q3Uk9ZIS1lWVolVFohXiEtZSFeIV8hLlIhXyNvIS1lI28jcCEuUiNwfiEtZTdSIS5XUVQ3Uk9ZIS5SWn4hLlIkUCEuZ1skVVcjbyN2fVBPWUR1WVolVFohUER1IVAhUUVyIVEhXkR1IV4hX0Z4IV8hfUR1IX0jT0hxI08jUEpRI1Ajb0R1I28jcEZ4I3B+RHVdIS9mWyN3UyRVV31QT1lEdVlaJVRaIVBEdSFQIVFFciFRIV5EdSFeIV9GeCFfIX1EdSF9I09IcSNPI1BKUSNQI29EdSNvI3BGeCNwfkR1IXshMGNkJFVXayFzTyFPJVQhTyFQQHIhUCFRJVQhUSFbITFxIVshXiVUIV8hZyVUIWchaEFsIWgjUiVUI1IjUyExcSNTI1UlVCNVI1YhM1gjViNYJVQjWCNZQWwjWSNiJVQjYiNjITJ3I2MjZCE0bSNkI2wlVCNsI20hNXsjbSNvJVQjcH4lVCF7ITF4XyRVV2shc08hTyVUIU8hUEByIVAhUSVUIVEhWyExcSFbIV4lVCFfIWclVCFnIWhBbCFoI1IlVCNSI1MhMXEjUyNYJVQjWCNZQWwjWSNiJVQjYiNjITJ3I2MjbyVUI3B+JVQheyEzT1IkVVdrIXNPIV4lVCFfI28lVCNwfiVUIXshM15XJFVXTyFRJVQhUSFSITN2IVIhUyEzdiFTIV4lVCFfI1IlVCNSI1MhM3YjUyNvJVQjcH4lVCF7ITN9WSRVV2shc08hUSVUIVEhUiEzdiFSIVMhM3YhUyFeJVQhXyNSJVQjUiNTITN2I1MjYiVUI2IjYyEydyNjI28lVCNwfiVUIXshNHJWJFVXTyFRJVQhUSFZITVYIVkhXiVUIV8jUiVUI1IjUyE1WCNTI28lVCNwfiVUIXshNWBYJFVXayFzTyFRJVQhUSFZITVYIVkhXiVUIV8jUiVUI1IjUyE1WCNTI2IlVCNiI2MhMncjYyNvJVQjcH4lVCF7ITZRWiRVV08hUSVUIVEhWyE2cyFbIV4lVCFfIWMlVCFjIWkhNnMhaSNSJVQjUiNTITZzI1MjVCVUI1QjWiE2cyNaI28lVCNwfiVUIXshNnpdJFVXayFzTyFRJVQhUSFbITZzIVshXiVUIV8hYyVUIWMhaSE2cyFpI1IlVCNSI1MhNnMjUyNUJVQjVCNaITZzI1ojYiVUI2IjYyEydyNjI28lVCNwfiVUJHUhN3xSIV1WJFVXI20kZk8hXiVUIV8jbyVUI3B+JVQhcSE4XlJfIWkkVVdPIV4lVCFfI28lVCNwfiVUNXchOHJSJ2JkIWEvbiN4JnMnfFAhUCFRITh7IV4hXyE5USFfIWAhOV9XITlRTyRXVyN2ITlWUCNgI3YhXyFgITlZI3YhOV9PI28jdiN2ITlkTyNhI3YkdSE5a1QheyRtJFVXTyFeJVQhXyFgJ3YhYCFhITl6IWEjbyVUI3B+JVQkUCE6UlIjVyN3JFVXTyFeJVQhXyNvJVQjcH4lVCVWITpnVCdhIVIjYSN2JFJTJFVXTyFeJVQhXyFgITp2IWAhYSE7VyFhI28lVCNwfiVUJE8hOn1SI2EjdiRVV08hXiVUIV8jbyVUI3B+JVQkTyE7X1QjYCN2JFVXTyFeJVQhXyFgNVQhYCFhITtuIWEjbyVUI3B+JVQkTyE7dVMjYCN2JFVXTyFeJVQhXyFgNVQhYCNvJVQjcH4lVCphITxZVidwI3skVVdPIU8lVCFPIVAhPG8hUCFeJVQhXyFhJVQhYSFiIT1QIWIjbyVUI3B+JVQqWyE8dlJ2KlMkVVdPIV4lVCFfI28lVCNwfiVUJE8hPVdTJFVXI2ojdk8hXiVUIV8hYDVUIWAjbyVUI3B+JVQ3ViE9a1J4Nn0kVVdPIV4lVCFfI28lVCNwfiVUayE9e1IhT2MkVVdPIV4lVCFfI28lVCNwfiVUJE8hPl1TI2cjdiRVV08hXiVUIV8hYDVUIWAjbyVUI3B+JVQkYSE+cFIkVVcnZiRYTyFeJVQhXyNvJVQjcH4lVH4hP09PIVR+NWIhP1ZUJ3c1WSRVV08hXiVUIV8hYDVUIWAjbyVUI3AjcSE9UCNxfiVUNlghP29SIVM1fW5RJFVXTyFeJVQhXyNvJVQjcH4lVFghQFBSIWtQJFVXTyFeJVQhXyNvJVQjcH4lVDdaIUBnciRVVydZN1IjelMnXSR5J2czU09YJVRYWSVjWVolVFpbJWNbcCVUcHElY3F0JVR0dTJgdX0lVH0hTzNqIU8hUSVUIVEhWzJgIVshXiVUIV8hYyVUIWMhfTJgIX0jUiVUI1IjUzJgI1MjVCVUI1QjbzJgI3AkZiVUJGYkZyVjJGcjQlkyYCNCWSNCWiFAWSNCWiRJUzJgJElTJElfIUBZJElfJEpUMmAkSlQkSlUhQFkkSlUkS1YyYCRLViRLVyFAWSRLVyZGVTJgJkZVJkZWIUBZJkZWP0hUMmA/SFQ/SFUhQFk/SFV+MmA3WiFDT18kVVcnWjdSI3pTJ10keSdnM1NPdCVUdHUyYHV9JVR9IU8zaiFPIVElVCFRIVsyYCFbIV4lVCFfIWMlVCFjIX0yYCF9I1IlVCNSI1MyYCNTI1QlVCNUI28yYCNwJGclVCRnfjJgXCIsXG4gIHRva2VuaXplcnM6IFt0c0V4dGVuZHMsIG5vU2VtaWNvbG9uLCBpbmNkZWNUb2tlbiwgdGVtcGxhdGUsIDAsIDEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIGluc2VydFNlbWljb2xvbl0sXG4gIHRvcFJ1bGVzOiB7XCJTY3JpcHRcIjpbMCw3XX0sXG4gIGRpYWxlY3RzOiB7anN4OiAxMjEwNywgdHM6IDEyMTA5fSxcbiAgZHluYW1pY1ByZWNlZGVuY2VzOiB7XCIxNDlcIjoxLFwiMTc2XCI6MX0sXG4gIHNwZWNpYWxpemVkOiBbe3Rlcm06IDI4OSwgZ2V0OiB2YWx1ZSA9PiBzcGVjX2lkZW50aWZpZXJbdmFsdWVdIHx8IC0xfSx7dGVybTogMjk5LCBnZXQ6IHZhbHVlID0+IHNwZWNfd29yZFt2YWx1ZV0gfHwgLTF9LHt0ZXJtOiA2MywgZ2V0OiB2YWx1ZSA9PiBzcGVjX0xlc3NUaGFuW3ZhbHVlXSB8fCAtMX1dLFxuICB0b2tlblByZWM6IDEyMTMwXG59KTtcblxuZXhwb3J0IHsgcGFyc2VyIH07XG4iLCAiaW1wb3J0IHsgcGFyc2VyIH0gZnJvbSAnQGxlemVyL2phdmFzY3JpcHQnO1xuaW1wb3J0IHsgc3ludGF4VHJlZSwgTFJMYW5ndWFnZSwgaW5kZW50Tm9kZVByb3AsIGNvbnRpbnVlZEluZGVudCwgZmxhdEluZGVudCwgZGVsaW1pdGVkSW5kZW50LCBmb2xkTm9kZVByb3AsIGZvbGRJbnNpZGUsIExhbmd1YWdlU3VwcG9ydCB9IGZyb20gJ0Bjb2RlbWlycm9yL2xhbmd1YWdlJztcbmltcG9ydCB7IEVkaXRvclNlbGVjdGlvbiB9IGZyb20gJ0Bjb2RlbWlycm9yL3N0YXRlJztcbmltcG9ydCB7IEVkaXRvclZpZXcgfSBmcm9tICdAY29kZW1pcnJvci92aWV3JztcbmltcG9ydCB7IHNuaXBwZXRDb21wbGV0aW9uLCBpZk5vdEluLCBjb21wbGV0ZUZyb21MaXN0IH0gZnJvbSAnQGNvZGVtaXJyb3IvYXV0b2NvbXBsZXRlJztcbmltcG9ydCB7IE5vZGVXZWFrTWFwLCBJdGVyTW9kZSB9IGZyb20gJ0BsZXplci9jb21tb24nO1xuXG4vKipcbkEgY29sbGVjdGlvbiBvZiBKYXZhU2NyaXB0LXJlbGF0ZWRcbltzbmlwcGV0c10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNhdXRvY29tcGxldGUuc25pcHBldCkuXG4qL1xuY29uc3Qgc25pcHBldHMgPSBbXG4gICAgLypAX19QVVJFX18qL3NuaXBwZXRDb21wbGV0aW9uKFwiZnVuY3Rpb24gJHtuYW1lfSgke3BhcmFtc30pIHtcXG5cXHQke31cXG59XCIsIHtcbiAgICAgICAgbGFiZWw6IFwiZnVuY3Rpb25cIixcbiAgICAgICAgZGV0YWlsOiBcImRlZmluaXRpb25cIixcbiAgICAgICAgdHlwZTogXCJrZXl3b3JkXCJcbiAgICB9KSxcbiAgICAvKkBfX1BVUkVfXyovc25pcHBldENvbXBsZXRpb24oXCJmb3IgKGxldCAke2luZGV4fSA9IDA7ICR7aW5kZXh9IDwgJHtib3VuZH07ICR7aW5kZXh9KyspIHtcXG5cXHQke31cXG59XCIsIHtcbiAgICAgICAgbGFiZWw6IFwiZm9yXCIsXG4gICAgICAgIGRldGFpbDogXCJsb29wXCIsXG4gICAgICAgIHR5cGU6IFwia2V5d29yZFwiXG4gICAgfSksXG4gICAgLypAX19QVVJFX18qL3NuaXBwZXRDb21wbGV0aW9uKFwiZm9yIChsZXQgJHtuYW1lfSBvZiAke2NvbGxlY3Rpb259KSB7XFxuXFx0JHt9XFxufVwiLCB7XG4gICAgICAgIGxhYmVsOiBcImZvclwiLFxuICAgICAgICBkZXRhaWw6IFwib2YgbG9vcFwiLFxuICAgICAgICB0eXBlOiBcImtleXdvcmRcIlxuICAgIH0pLFxuICAgIC8qQF9fUFVSRV9fKi9zbmlwcGV0Q29tcGxldGlvbihcImRvIHtcXG5cXHQke31cXG59IHdoaWxlICgke30pXCIsIHtcbiAgICAgICAgbGFiZWw6IFwiZG9cIixcbiAgICAgICAgZGV0YWlsOiBcImxvb3BcIixcbiAgICAgICAgdHlwZTogXCJrZXl3b3JkXCJcbiAgICB9KSxcbiAgICAvKkBfX1BVUkVfXyovc25pcHBldENvbXBsZXRpb24oXCJ3aGlsZSAoJHt9KSB7XFxuXFx0JHt9XFxufVwiLCB7XG4gICAgICAgIGxhYmVsOiBcIndoaWxlXCIsXG4gICAgICAgIGRldGFpbDogXCJsb29wXCIsXG4gICAgICAgIHR5cGU6IFwia2V5d29yZFwiXG4gICAgfSksXG4gICAgLypAX19QVVJFX18qL3NuaXBwZXRDb21wbGV0aW9uKFwidHJ5IHtcXG5cXHQke31cXG59IGNhdGNoICgke2Vycm9yfSkge1xcblxcdCR7fVxcbn1cIiwge1xuICAgICAgICBsYWJlbDogXCJ0cnlcIixcbiAgICAgICAgZGV0YWlsOiBcIi8gY2F0Y2ggYmxvY2tcIixcbiAgICAgICAgdHlwZTogXCJrZXl3b3JkXCJcbiAgICB9KSxcbiAgICAvKkBfX1BVUkVfXyovc25pcHBldENvbXBsZXRpb24oXCJpZiAoJHt9KSB7XFxuXFx0JHt9XFxufVwiLCB7XG4gICAgICAgIGxhYmVsOiBcImlmXCIsXG4gICAgICAgIGRldGFpbDogXCJibG9ja1wiLFxuICAgICAgICB0eXBlOiBcImtleXdvcmRcIlxuICAgIH0pLFxuICAgIC8qQF9fUFVSRV9fKi9zbmlwcGV0Q29tcGxldGlvbihcImlmICgke30pIHtcXG5cXHQke31cXG59IGVsc2Uge1xcblxcdCR7fVxcbn1cIiwge1xuICAgICAgICBsYWJlbDogXCJpZlwiLFxuICAgICAgICBkZXRhaWw6IFwiLyBlbHNlIGJsb2NrXCIsXG4gICAgICAgIHR5cGU6IFwia2V5d29yZFwiXG4gICAgfSksXG4gICAgLypAX19QVVJFX18qL3NuaXBwZXRDb21wbGV0aW9uKFwiY2xhc3MgJHtuYW1lfSB7XFxuXFx0Y29uc3RydWN0b3IoJHtwYXJhbXN9KSB7XFxuXFx0XFx0JHt9XFxuXFx0fVxcbn1cIiwge1xuICAgICAgICBsYWJlbDogXCJjbGFzc1wiLFxuICAgICAgICBkZXRhaWw6IFwiZGVmaW5pdGlvblwiLFxuICAgICAgICB0eXBlOiBcImtleXdvcmRcIlxuICAgIH0pLFxuICAgIC8qQF9fUFVSRV9fKi9zbmlwcGV0Q29tcGxldGlvbihcImltcG9ydCB7JHtuYW1lc319IGZyb20gXFxcIiR7bW9kdWxlfVxcXCJcXG4ke31cIiwge1xuICAgICAgICBsYWJlbDogXCJpbXBvcnRcIixcbiAgICAgICAgZGV0YWlsOiBcIm5hbWVkXCIsXG4gICAgICAgIHR5cGU6IFwia2V5d29yZFwiXG4gICAgfSksXG4gICAgLypAX19QVVJFX18qL3NuaXBwZXRDb21wbGV0aW9uKFwiaW1wb3J0ICR7bmFtZX0gZnJvbSBcXFwiJHttb2R1bGV9XFxcIlxcbiR7fVwiLCB7XG4gICAgICAgIGxhYmVsOiBcImltcG9ydFwiLFxuICAgICAgICBkZXRhaWw6IFwiZGVmYXVsdFwiLFxuICAgICAgICB0eXBlOiBcImtleXdvcmRcIlxuICAgIH0pXG5dO1xuXG5jb25zdCBjYWNoZSA9IC8qQF9fUFVSRV9fKi9uZXcgTm9kZVdlYWtNYXAoKTtcbmNvbnN0IFNjb3BlTm9kZXMgPSAvKkBfX1BVUkVfXyovbmV3IFNldChbXG4gICAgXCJTY3JpcHRcIiwgXCJCbG9ja1wiLFxuICAgIFwiRnVuY3Rpb25FeHByZXNzaW9uXCIsIFwiRnVuY3Rpb25EZWNsYXJhdGlvblwiLCBcIkFycm93RnVuY3Rpb25cIiwgXCJNZXRob2REZWNsYXJhdGlvblwiLFxuICAgIFwiRm9yU3RhdGVtZW50XCJcbl0pO1xuZnVuY3Rpb24gZGVmSUQodHlwZSkge1xuICAgIHJldHVybiAobm9kZSwgZGVmKSA9PiB7XG4gICAgICAgIGxldCBpZCA9IG5vZGUubm9kZS5nZXRDaGlsZChcIlZhcmlhYmxlRGVmaW5pdGlvblwiKTtcbiAgICAgICAgaWYgKGlkKVxuICAgICAgICAgICAgZGVmKGlkLCB0eXBlKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbn1cbmNvbnN0IGZ1bmN0aW9uQ29udGV4dCA9IFtcIkZ1bmN0aW9uRGVjbGFyYXRpb25cIl07XG5jb25zdCBnYXRoZXJDb21wbGV0aW9ucyA9IHtcbiAgICBGdW5jdGlvbkRlY2xhcmF0aW9uOiAvKkBfX1BVUkVfXyovZGVmSUQoXCJmdW5jdGlvblwiKSxcbiAgICBDbGFzc0RlY2xhcmF0aW9uOiAvKkBfX1BVUkVfXyovZGVmSUQoXCJjbGFzc1wiKSxcbiAgICBDbGFzc0V4cHJlc3Npb246ICgpID0+IHRydWUsXG4gICAgRW51bURlY2xhcmF0aW9uOiAvKkBfX1BVUkVfXyovZGVmSUQoXCJjb25zdGFudFwiKSxcbiAgICBUeXBlQWxpYXNEZWNsYXJhdGlvbjogLypAX19QVVJFX18qL2RlZklEKFwidHlwZVwiKSxcbiAgICBOYW1lc3BhY2VEZWNsYXJhdGlvbjogLypAX19QVVJFX18qL2RlZklEKFwibmFtZXNwYWNlXCIpLFxuICAgIFZhcmlhYmxlRGVmaW5pdGlvbihub2RlLCBkZWYpIHsgaWYgKCFub2RlLm1hdGNoQ29udGV4dChmdW5jdGlvbkNvbnRleHQpKVxuICAgICAgICBkZWYobm9kZSwgXCJ2YXJpYWJsZVwiKTsgfSxcbiAgICBUeXBlRGVmaW5pdGlvbihub2RlLCBkZWYpIHsgZGVmKG5vZGUsIFwidHlwZVwiKTsgfSxcbiAgICBfX3Byb3RvX186IG51bGxcbn07XG5mdW5jdGlvbiBnZXRTY29wZShkb2MsIG5vZGUpIHtcbiAgICBsZXQgY2FjaGVkID0gY2FjaGUuZ2V0KG5vZGUpO1xuICAgIGlmIChjYWNoZWQpXG4gICAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgbGV0IGNvbXBsZXRpb25zID0gW10sIHRvcCA9IHRydWU7XG4gICAgZnVuY3Rpb24gZGVmKG5vZGUsIHR5cGUpIHtcbiAgICAgICAgbGV0IG5hbWUgPSBkb2Muc2xpY2VTdHJpbmcobm9kZS5mcm9tLCBub2RlLnRvKTtcbiAgICAgICAgY29tcGxldGlvbnMucHVzaCh7IGxhYmVsOiBuYW1lLCB0eXBlIH0pO1xuICAgIH1cbiAgICBub2RlLmN1cnNvcihJdGVyTW9kZS5JbmNsdWRlQW5vbnltb3VzKS5pdGVyYXRlKG5vZGUgPT4ge1xuICAgICAgICBpZiAodG9wKSB7XG4gICAgICAgICAgICB0b3AgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChub2RlLm5hbWUpIHtcbiAgICAgICAgICAgIGxldCBnYXRoZXIgPSBnYXRoZXJDb21wbGV0aW9uc1tub2RlLm5hbWVdO1xuICAgICAgICAgICAgaWYgKGdhdGhlciAmJiBnYXRoZXIobm9kZSwgZGVmKSB8fCBTY29wZU5vZGVzLmhhcyhub2RlLm5hbWUpKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChub2RlLnRvIC0gbm9kZS5mcm9tID4gODE5Mikge1xuICAgICAgICAgICAgLy8gQWxsb3cgY2FjaGluZyBmb3IgYmlnZ2VyIGludGVybmFsIG5vZGVzXG4gICAgICAgICAgICBmb3IgKGxldCBjIG9mIGdldFNjb3BlKGRvYywgbm9kZS5ub2RlKSlcbiAgICAgICAgICAgICAgICBjb21wbGV0aW9ucy5wdXNoKGMpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgY2FjaGUuc2V0KG5vZGUsIGNvbXBsZXRpb25zKTtcbiAgICByZXR1cm4gY29tcGxldGlvbnM7XG59XG5jb25zdCBJZGVudGlmaWVyID0gL15bXFx3JFxceGExLVxcdWZmZmZdW1xcdyRcXGRcXHhhMS1cXHVmZmZmXSokLztcbmNvbnN0IGRvbnRDb21wbGV0ZSA9IFtcbiAgICBcIlRlbXBsYXRlU3RyaW5nXCIsIFwiU3RyaW5nXCIsIFwiUmVnRXhwXCIsXG4gICAgXCJMaW5lQ29tbWVudFwiLCBcIkJsb2NrQ29tbWVudFwiLFxuICAgIFwiVmFyaWFibGVEZWZpbml0aW9uXCIsIFwiVHlwZURlZmluaXRpb25cIiwgXCJMYWJlbFwiLFxuICAgIFwiUHJvcGVydHlEZWZpbml0aW9uXCIsIFwiUHJvcGVydHlOYW1lXCIsXG4gICAgXCJQcml2YXRlUHJvcGVydHlEZWZpbml0aW9uXCIsIFwiUHJpdmF0ZVByb3BlcnR5TmFtZVwiXG5dO1xuLyoqXG5Db21wbGV0aW9uIHNvdXJjZSB0aGF0IGxvb2tzIHVwIGxvY2FsbHkgZGVmaW5lZCBuYW1lcyBpblxuSmF2YVNjcmlwdCBjb2RlLlxuKi9cbmZ1bmN0aW9uIGxvY2FsQ29tcGxldGlvblNvdXJjZShjb250ZXh0KSB7XG4gICAgbGV0IGlubmVyID0gc3ludGF4VHJlZShjb250ZXh0LnN0YXRlKS5yZXNvbHZlSW5uZXIoY29udGV4dC5wb3MsIC0xKTtcbiAgICBpZiAoZG9udENvbXBsZXRlLmluZGV4T2YoaW5uZXIubmFtZSkgPiAtMSlcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgbGV0IGlzV29yZCA9IGlubmVyLm5hbWUgPT0gXCJWYXJpYWJsZU5hbWVcIiB8fFxuICAgICAgICBpbm5lci50byAtIGlubmVyLmZyb20gPCAyMCAmJiBJZGVudGlmaWVyLnRlc3QoY29udGV4dC5zdGF0ZS5zbGljZURvYyhpbm5lci5mcm9tLCBpbm5lci50bykpO1xuICAgIGlmICghaXNXb3JkICYmICFjb250ZXh0LmV4cGxpY2l0KVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgb3B0aW9ucyA9IFtdO1xuICAgIGZvciAobGV0IHBvcyA9IGlubmVyOyBwb3M7IHBvcyA9IHBvcy5wYXJlbnQpIHtcbiAgICAgICAgaWYgKFNjb3BlTm9kZXMuaGFzKHBvcy5uYW1lKSlcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zLmNvbmNhdChnZXRTY29wZShjb250ZXh0LnN0YXRlLmRvYywgcG9zKSk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIGZyb206IGlzV29yZCA/IGlubmVyLmZyb20gOiBjb250ZXh0LnBvcyxcbiAgICAgICAgdmFsaWRGb3I6IElkZW50aWZpZXJcbiAgICB9O1xufVxuZnVuY3Rpb24gcGF0aEZvcihyZWFkLCBtZW1iZXIsIG5hbWUpIHtcbiAgICB2YXIgX2E7XG4gICAgbGV0IHBhdGggPSBbXTtcbiAgICBmb3IgKDs7KSB7XG4gICAgICAgIGxldCBvYmogPSBtZW1iZXIuZmlyc3RDaGlsZCwgcHJvcDtcbiAgICAgICAgaWYgKChvYmogPT09IG51bGwgfHwgb2JqID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmoubmFtZSkgPT0gXCJWYXJpYWJsZU5hbWVcIikge1xuICAgICAgICAgICAgcGF0aC5wdXNoKHJlYWQob2JqKSk7XG4gICAgICAgICAgICByZXR1cm4geyBwYXRoOiBwYXRoLnJldmVyc2UoKSwgbmFtZSB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKChvYmogPT09IG51bGwgfHwgb2JqID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmoubmFtZSkgPT0gXCJNZW1iZXJFeHByZXNzaW9uXCIgJiYgKChfYSA9IChwcm9wID0gb2JqLmxhc3RDaGlsZCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5uYW1lKSA9PSBcIlByb3BlcnR5TmFtZVwiKSB7XG4gICAgICAgICAgICBwYXRoLnB1c2gocmVhZChwcm9wKSk7XG4gICAgICAgICAgICBtZW1iZXIgPSBvYmo7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuSGVscGVyIGZ1bmN0aW9uIGZvciBkZWZpbmluZyBKYXZhU2NyaXB0IGNvbXBsZXRpb24gc291cmNlcy4gSXRcbnJldHVybnMgdGhlIGNvbXBsZXRhYmxlIG5hbWUgYW5kIG9iamVjdCBwYXRoIGZvciBhIGNvbXBsZXRpb25cbmNvbnRleHQsIG9yIG51bGwgaWYgbm8gbmFtZS9wcm9wZXJ0eSBjb21wbGV0aW9uIHNob3VsZCBoYXBwZW4gYXRcbnRoYXQgcG9zaXRpb24uIEZvciBleGFtcGxlLCB3aGVuIGNvbXBsZXRpbmcgYWZ0ZXIgYGEuYi5jYCBpdCB3aWxsXG5yZXR1cm4gYHtwYXRoOiBbXCJhXCIsIFwiYlwiXSwgbmFtZTogXCJjXCJ9YC4gV2hlbiBjb21wbGV0aW5nIGFmdGVyIGB4YFxuaXQgd2lsbCByZXR1cm4gYHtwYXRoOiBbXSwgbmFtZTogXCJ4XCJ9YC4gV2hlbiBub3QgaW4gYSBwcm9wZXJ0eSBvclxubmFtZSwgaXQgd2lsbCByZXR1cm4gbnVsbCBpZiBgY29udGV4dC5leHBsaWNpdGAgaXMgZmFsc2UsIGFuZFxuYHtwYXRoOiBbXSwgbmFtZTogXCJcIn1gIG90aGVyd2lzZS5cbiovXG5mdW5jdGlvbiBjb21wbGV0aW9uUGF0aChjb250ZXh0KSB7XG4gICAgbGV0IHJlYWQgPSAobm9kZSkgPT4gY29udGV4dC5zdGF0ZS5kb2Muc2xpY2VTdHJpbmcobm9kZS5mcm9tLCBub2RlLnRvKTtcbiAgICBsZXQgaW5uZXIgPSBzeW50YXhUcmVlKGNvbnRleHQuc3RhdGUpLnJlc29sdmVJbm5lcihjb250ZXh0LnBvcywgLTEpO1xuICAgIGlmIChpbm5lci5uYW1lID09IFwiUHJvcGVydHlOYW1lXCIpIHtcbiAgICAgICAgcmV0dXJuIHBhdGhGb3IocmVhZCwgaW5uZXIucGFyZW50LCByZWFkKGlubmVyKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGRvbnRDb21wbGV0ZS5pbmRleE9mKGlubmVyLm5hbWUpID4gLTEpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlubmVyLm5hbWUgPT0gXCJWYXJpYWJsZU5hbWVcIiB8fCBpbm5lci50byAtIGlubmVyLmZyb20gPCAyMCAmJiBJZGVudGlmaWVyLnRlc3QocmVhZChpbm5lcikpKSB7XG4gICAgICAgIHJldHVybiB7IHBhdGg6IFtdLCBuYW1lOiByZWFkKGlubmVyKSB9O1xuICAgIH1cbiAgICBlbHNlIGlmICgoaW5uZXIubmFtZSA9PSBcIi5cIiB8fCBpbm5lci5uYW1lID09IFwiPy5cIikgJiYgaW5uZXIucGFyZW50Lm5hbWUgPT0gXCJNZW1iZXJFeHByZXNzaW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIHBhdGhGb3IocmVhZCwgaW5uZXIucGFyZW50LCBcIlwiKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaW5uZXIubmFtZSA9PSBcIk1lbWJlckV4cHJlc3Npb25cIikge1xuICAgICAgICByZXR1cm4gcGF0aEZvcihyZWFkLCBpbm5lciwgXCJcIik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gY29udGV4dC5leHBsaWNpdCA/IHsgcGF0aDogW10sIG5hbWU6IFwiXCIgfSA6IG51bGw7XG4gICAgfVxufVxuZnVuY3Rpb24gZW51bWVyYXRlUHJvcGVydHlDb21wbGV0aW9ucyhvYmosIHRvcCkge1xuICAgIGxldCBvcHRpb25zID0gW10sIHNlZW4gPSBuZXcgU2V0O1xuICAgIGZvciAobGV0IGRlcHRoID0gMDs7IGRlcHRoKyspIHtcbiAgICAgICAgZm9yIChsZXQgbmFtZSBvZiAoT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMgfHwgT2JqZWN0LmtleXMpKG9iaikpIHtcbiAgICAgICAgICAgIGlmIChzZWVuLmhhcyhuYW1lKSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIHNlZW4uYWRkKG5hbWUpO1xuICAgICAgICAgICAgbGV0IHZhbHVlO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG9ialtuYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChfKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcHRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgIGxhYmVsOiBuYW1lLFxuICAgICAgICAgICAgICAgIHR5cGU6IHR5cGVvZiB2YWx1ZSA9PSBcImZ1bmN0aW9uXCIgPyAoL15bQS1aXS8udGVzdChuYW1lKSA/IFwiY2xhc3NcIiA6IHRvcCA/IFwiZnVuY3Rpb25cIiA6IFwibWV0aG9kXCIpXG4gICAgICAgICAgICAgICAgICAgIDogdG9wID8gXCJ2YXJpYWJsZVwiIDogXCJwcm9wZXJ0eVwiLFxuICAgICAgICAgICAgICAgIGJvb3N0OiAtZGVwdGhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGxldCBuZXh0ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaik7XG4gICAgICAgIGlmICghbmV4dClcbiAgICAgICAgICAgIHJldHVybiBvcHRpb25zO1xuICAgICAgICBvYmogPSBuZXh0O1xuICAgIH1cbn1cbi8qKlxuRGVmaW5lcyBhIFtjb21wbGV0aW9uIHNvdXJjZV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNhdXRvY29tcGxldGUuQ29tcGxldGlvblNvdXJjZSkgdGhhdFxuY29tcGxldGVzIGZyb20gdGhlIGdpdmVuIHNjb3BlIG9iamVjdCAoZm9yIGV4YW1wbGUgYGdsb2JhbFRoaXNgKS5cbldpbGwgZW50ZXIgcHJvcGVydGllcyBvZiB0aGUgb2JqZWN0IHdoZW4gY29tcGxldGluZyBwcm9wZXJ0aWVzIG9uXG5hIGRpcmVjdGx5LW5hbWVkIHBhdGguXG4qL1xuZnVuY3Rpb24gc2NvcGVDb21wbGV0aW9uU291cmNlKHNjb3BlKSB7XG4gICAgbGV0IGNhY2hlID0gbmV3IE1hcDtcbiAgICByZXR1cm4gKGNvbnRleHQpID0+IHtcbiAgICAgICAgbGV0IHBhdGggPSBjb21wbGV0aW9uUGF0aChjb250ZXh0KTtcbiAgICAgICAgaWYgKCFwYXRoKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGxldCB0YXJnZXQgPSBzY29wZTtcbiAgICAgICAgZm9yIChsZXQgc3RlcCBvZiBwYXRoLnBhdGgpIHtcbiAgICAgICAgICAgIHRhcmdldCA9IHRhcmdldFtzdGVwXTtcbiAgICAgICAgICAgIGlmICghdGFyZ2V0KVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGxldCBvcHRpb25zID0gY2FjaGUuZ2V0KHRhcmdldCk7XG4gICAgICAgIGlmICghb3B0aW9ucylcbiAgICAgICAgICAgIGNhY2hlLnNldCh0YXJnZXQsIG9wdGlvbnMgPSBlbnVtZXJhdGVQcm9wZXJ0eUNvbXBsZXRpb25zKHRhcmdldCwgIXBhdGgucGF0aC5sZW5ndGgpKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZyb206IGNvbnRleHQucG9zIC0gcGF0aC5uYW1lLmxlbmd0aCxcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICB2YWxpZEZvcjogSWRlbnRpZmllclxuICAgICAgICB9O1xuICAgIH07XG59XG5cbi8qKlxuQSBsYW5ndWFnZSBwcm92aWRlciBiYXNlZCBvbiB0aGUgW0xlemVyIEphdmFTY3JpcHRcbnBhcnNlcl0oaHR0cHM6Ly9naXRodWIuY29tL2xlemVyLXBhcnNlci9qYXZhc2NyaXB0KSwgZXh0ZW5kZWQgd2l0aFxuaGlnaGxpZ2h0aW5nIGFuZCBpbmRlbnRhdGlvbiBpbmZvcm1hdGlvbi5cbiovXG5jb25zdCBqYXZhc2NyaXB0TGFuZ3VhZ2UgPSAvKkBfX1BVUkVfXyovTFJMYW5ndWFnZS5kZWZpbmUoe1xuICAgIG5hbWU6IFwiamF2YXNjcmlwdFwiLFxuICAgIHBhcnNlcjogLypAX19QVVJFX18qL3BhcnNlci5jb25maWd1cmUoe1xuICAgICAgICBwcm9wczogW1xuICAgICAgICAgICAgLypAX19QVVJFX18qL2luZGVudE5vZGVQcm9wLmFkZCh7XG4gICAgICAgICAgICAgICAgSWZTdGF0ZW1lbnQ6IC8qQF9fUFVSRV9fKi9jb250aW51ZWRJbmRlbnQoeyBleGNlcHQ6IC9eXFxzKih7fGVsc2VcXGIpLyB9KSxcbiAgICAgICAgICAgICAgICBUcnlTdGF0ZW1lbnQ6IC8qQF9fUFVSRV9fKi9jb250aW51ZWRJbmRlbnQoeyBleGNlcHQ6IC9eXFxzKih7fGNhdGNoXFxifGZpbmFsbHlcXGIpLyB9KSxcbiAgICAgICAgICAgICAgICBMYWJlbGVkU3RhdGVtZW50OiBmbGF0SW5kZW50LFxuICAgICAgICAgICAgICAgIFN3aXRjaEJvZHk6IGNvbnRleHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYWZ0ZXIgPSBjb250ZXh0LnRleHRBZnRlciwgY2xvc2VkID0gL15cXHMqXFx9Ly50ZXN0KGFmdGVyKSwgaXNDYXNlID0gL15cXHMqKGNhc2V8ZGVmYXVsdClcXGIvLnRlc3QoYWZ0ZXIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5iYXNlSW5kZW50ICsgKGNsb3NlZCA/IDAgOiBpc0Nhc2UgPyAxIDogMikgKiBjb250ZXh0LnVuaXQ7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBCbG9jazogLypAX19QVVJFX18qL2RlbGltaXRlZEluZGVudCh7IGNsb3Npbmc6IFwifVwiIH0pLFxuICAgICAgICAgICAgICAgIEFycm93RnVuY3Rpb246IGN4ID0+IGN4LmJhc2VJbmRlbnQgKyBjeC51bml0LFxuICAgICAgICAgICAgICAgIFwiVGVtcGxhdGVTdHJpbmcgQmxvY2tDb21tZW50XCI6ICgpID0+IG51bGwsXG4gICAgICAgICAgICAgICAgXCJTdGF0ZW1lbnQgUHJvcGVydHlcIjogLypAX19QVVJFX18qL2NvbnRpbnVlZEluZGVudCh7IGV4Y2VwdDogL157LyB9KSxcbiAgICAgICAgICAgICAgICBKU1hFbGVtZW50KGNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNsb3NlZCA9IC9eXFxzKjxcXC8vLnRlc3QoY29udGV4dC50ZXh0QWZ0ZXIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5saW5lSW5kZW50KGNvbnRleHQubm9kZS5mcm9tKSArIChjbG9zZWQgPyAwIDogY29udGV4dC51bml0KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIEpTWEVzY2FwZShjb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjbG9zZWQgPSAvXFxzKlxcfS8udGVzdChjb250ZXh0LnRleHRBZnRlcik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmxpbmVJbmRlbnQoY29udGV4dC5ub2RlLmZyb20pICsgKGNsb3NlZCA/IDAgOiBjb250ZXh0LnVuaXQpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJKU1hPcGVuVGFnIEpTWFNlbGZDbG9zaW5nVGFnXCIoY29udGV4dCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5jb2x1bW4oY29udGV4dC5ub2RlLmZyb20pICsgY29udGV4dC51bml0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgLypAX19QVVJFX18qL2ZvbGROb2RlUHJvcC5hZGQoe1xuICAgICAgICAgICAgICAgIFwiQmxvY2sgQ2xhc3NCb2R5IFN3aXRjaEJvZHkgRW51bUJvZHkgT2JqZWN0RXhwcmVzc2lvbiBBcnJheUV4cHJlc3Npb25cIjogZm9sZEluc2lkZSxcbiAgICAgICAgICAgICAgICBCbG9ja0NvbW1lbnQodHJlZSkgeyByZXR1cm4geyBmcm9tOiB0cmVlLmZyb20gKyAyLCB0bzogdHJlZS50byAtIDIgfTsgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgXVxuICAgIH0pLFxuICAgIGxhbmd1YWdlRGF0YToge1xuICAgICAgICBjbG9zZUJyYWNrZXRzOiB7IGJyYWNrZXRzOiBbXCIoXCIsIFwiW1wiLCBcIntcIiwgXCInXCIsICdcIicsIFwiYFwiXSB9LFxuICAgICAgICBjb21tZW50VG9rZW5zOiB7IGxpbmU6IFwiLy9cIiwgYmxvY2s6IHsgb3BlbjogXCIvKlwiLCBjbG9zZTogXCIqL1wiIH0gfSxcbiAgICAgICAgaW5kZW50T25JbnB1dDogL15cXHMqKD86Y2FzZSB8ZGVmYXVsdDp8XFx7fFxcfXw8XFwvKSQvLFxuICAgICAgICB3b3JkQ2hhcnM6IFwiJFwiXG4gICAgfVxufSk7XG4vKipcbkEgbGFuZ3VhZ2UgcHJvdmlkZXIgZm9yIFR5cGVTY3JpcHQuXG4qL1xuY29uc3QgdHlwZXNjcmlwdExhbmd1YWdlID0gLypAX19QVVJFX18qL2phdmFzY3JpcHRMYW5ndWFnZS5jb25maWd1cmUoeyBkaWFsZWN0OiBcInRzXCIgfSwgXCJ0eXBlc2NyaXB0XCIpO1xuLyoqXG5MYW5ndWFnZSBwcm92aWRlciBmb3IgSlNYLlxuKi9cbmNvbnN0IGpzeExhbmd1YWdlID0gLypAX19QVVJFX18qL2phdmFzY3JpcHRMYW5ndWFnZS5jb25maWd1cmUoeyBkaWFsZWN0OiBcImpzeFwiIH0pO1xuLyoqXG5MYW5ndWFnZSBwcm92aWRlciBmb3IgSlNYICsgVHlwZVNjcmlwdC5cbiovXG5jb25zdCB0c3hMYW5ndWFnZSA9IC8qQF9fUFVSRV9fKi9qYXZhc2NyaXB0TGFuZ3VhZ2UuY29uZmlndXJlKHsgZGlhbGVjdDogXCJqc3ggdHNcIiB9LCBcInR5cGVzY3JpcHRcIik7XG5jb25zdCBrZXl3b3JkcyA9IC8qQF9fUFVSRV9fKi9cImJyZWFrIGNhc2UgY29uc3QgY29udGludWUgZGVmYXVsdCBkZWxldGUgZXhwb3J0IGV4dGVuZHMgZmFsc2UgZmluYWxseSBpbiBpbnN0YW5jZW9mIGxldCBuZXcgcmV0dXJuIHN0YXRpYyBzdXBlciBzd2l0Y2ggdGhpcyB0aHJvdyB0cnVlIHR5cGVvZiB2YXIgeWllbGRcIi5zcGxpdChcIiBcIikubWFwKGt3ID0+ICh7IGxhYmVsOiBrdywgdHlwZTogXCJrZXl3b3JkXCIgfSkpO1xuLyoqXG5KYXZhU2NyaXB0IHN1cHBvcnQuIEluY2x1ZGVzIFtzbmlwcGV0XShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmctamF2YXNjcmlwdC5zbmlwcGV0cylcbmNvbXBsZXRpb24uXG4qL1xuZnVuY3Rpb24gamF2YXNjcmlwdChjb25maWcgPSB7fSkge1xuICAgIGxldCBsYW5nID0gY29uZmlnLmpzeCA/IChjb25maWcudHlwZXNjcmlwdCA/IHRzeExhbmd1YWdlIDoganN4TGFuZ3VhZ2UpXG4gICAgICAgIDogY29uZmlnLnR5cGVzY3JpcHQgPyB0eXBlc2NyaXB0TGFuZ3VhZ2UgOiBqYXZhc2NyaXB0TGFuZ3VhZ2U7XG4gICAgcmV0dXJuIG5ldyBMYW5ndWFnZVN1cHBvcnQobGFuZywgW1xuICAgICAgICBqYXZhc2NyaXB0TGFuZ3VhZ2UuZGF0YS5vZih7XG4gICAgICAgICAgICBhdXRvY29tcGxldGU6IGlmTm90SW4oZG9udENvbXBsZXRlLCBjb21wbGV0ZUZyb21MaXN0KHNuaXBwZXRzLmNvbmNhdChrZXl3b3JkcykpKVxuICAgICAgICB9KSxcbiAgICAgICAgamF2YXNjcmlwdExhbmd1YWdlLmRhdGEub2Yoe1xuICAgICAgICAgICAgYXV0b2NvbXBsZXRlOiBsb2NhbENvbXBsZXRpb25Tb3VyY2VcbiAgICAgICAgfSksXG4gICAgICAgIGNvbmZpZy5qc3ggPyBhdXRvQ2xvc2VUYWdzIDogW10sXG4gICAgXSk7XG59XG5mdW5jdGlvbiBlbGVtZW50TmFtZShkb2MsIHRyZWUsIG1heCA9IGRvYy5sZW5ndGgpIHtcbiAgICBpZiAoIXRyZWUpXG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgIGxldCBuYW1lID0gdHJlZS5nZXRDaGlsZChcIkpTWElkZW50aWZpZXJcIik7XG4gICAgcmV0dXJuIG5hbWUgPyBkb2Muc2xpY2VTdHJpbmcobmFtZS5mcm9tLCBNYXRoLm1pbihuYW1lLnRvLCBtYXgpKSA6IFwiXCI7XG59XG5jb25zdCBhbmRyb2lkID0gdHlwZW9mIG5hdmlnYXRvciA9PSBcIm9iamVjdFwiICYmIC8qQF9fUFVSRV9fKi8vQW5kcm9pZFxcYi8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbi8qKlxuRXh0ZW5zaW9uIHRoYXQgd2lsbCBhdXRvbWF0aWNhbGx5IGluc2VydCBKU1ggY2xvc2UgdGFncyB3aGVuIGEgYD5gIG9yXG5gL2AgaXMgdHlwZWQuXG4qL1xuY29uc3QgYXV0b0Nsb3NlVGFncyA9IC8qQF9fUFVSRV9fKi9FZGl0b3JWaWV3LmlucHV0SGFuZGxlci5vZigodmlldywgZnJvbSwgdG8sIHRleHQpID0+IHtcbiAgICBpZiAoKGFuZHJvaWQgPyB2aWV3LmNvbXBvc2luZyA6IHZpZXcuY29tcG9zaXRpb25TdGFydGVkKSB8fCB2aWV3LnN0YXRlLnJlYWRPbmx5IHx8XG4gICAgICAgIGZyb20gIT0gdG8gfHwgKHRleHQgIT0gXCI+XCIgJiYgdGV4dCAhPSBcIi9cIikgfHxcbiAgICAgICAgIWphdmFzY3JpcHRMYW5ndWFnZS5pc0FjdGl2ZUF0KHZpZXcuc3RhdGUsIGZyb20sIC0xKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCB7IHN0YXRlIH0gPSB2aWV3O1xuICAgIGxldCBjaGFuZ2VzID0gc3RhdGUuY2hhbmdlQnlSYW5nZShyYW5nZSA9PiB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICBsZXQgeyBoZWFkIH0gPSByYW5nZSwgYXJvdW5kID0gc3ludGF4VHJlZShzdGF0ZSkucmVzb2x2ZUlubmVyKGhlYWQsIC0xKSwgbmFtZTtcbiAgICAgICAgaWYgKGFyb3VuZC5uYW1lID09IFwiSlNYU3RhcnRUYWdcIilcbiAgICAgICAgICAgIGFyb3VuZCA9IGFyb3VuZC5wYXJlbnQ7XG4gICAgICAgIGlmICh0ZXh0ID09IFwiPlwiICYmIGFyb3VuZC5uYW1lID09IFwiSlNYRnJhZ21lbnRUYWdcIikge1xuICAgICAgICAgICAgcmV0dXJuIHsgcmFuZ2U6IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IoaGVhZCArIDEpLCBjaGFuZ2VzOiB7IGZyb206IGhlYWQsIGluc2VydDogYD48PmAgfSB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRleHQgPT0gXCI+XCIgJiYgYXJvdW5kLm5hbWUgPT0gXCJKU1hJZGVudGlmaWVyXCIpIHtcbiAgICAgICAgICAgIGlmICgoKF9iID0gKF9hID0gYXJvdW5kLnBhcmVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxhc3RDaGlsZCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLm5hbWUpICE9IFwiSlNYRW5kVGFnXCIgJiYgKG5hbWUgPSBlbGVtZW50TmFtZShzdGF0ZS5kb2MsIGFyb3VuZC5wYXJlbnQsIGhlYWQpKSlcbiAgICAgICAgICAgICAgICByZXR1cm4geyByYW5nZTogRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihoZWFkICsgMSksIGNoYW5nZXM6IHsgZnJvbTogaGVhZCwgaW5zZXJ0OiBgPjwvJHtuYW1lfT5gIH0gfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0ZXh0ID09IFwiL1wiICYmIGFyb3VuZC5uYW1lID09IFwiSlNYRnJhZ21lbnRUYWdcIikge1xuICAgICAgICAgICAgbGV0IGVtcHR5ID0gYXJvdW5kLnBhcmVudCwgYmFzZSA9IGVtcHR5ID09PSBudWxsIHx8IGVtcHR5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlbXB0eS5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoZW1wdHkuZnJvbSA9PSBoZWFkIC0gMSAmJiAoKF9jID0gYmFzZS5sYXN0Q2hpbGQpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5uYW1lKSAhPSBcIkpTWEVuZFRhZ1wiICYmIChuYW1lID0gZWxlbWVudE5hbWUoc3RhdGUuZG9jLCBiYXNlID09PSBudWxsIHx8IGJhc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGJhc2UuZmlyc3RDaGlsZCwgaGVhZCkpKSB7XG4gICAgICAgICAgICAgICAgbGV0IGluc2VydCA9IGAvJHtuYW1lfT5gO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHJhbmdlOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKGhlYWQgKyBpbnNlcnQubGVuZ3RoKSwgY2hhbmdlczogeyBmcm9tOiBoZWFkLCBpbnNlcnQgfSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHJhbmdlIH07XG4gICAgfSk7XG4gICAgaWYgKGNoYW5nZXMuY2hhbmdlcy5lbXB0eSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHZpZXcuZGlzcGF0Y2goY2hhbmdlcywgeyB1c2VyRXZlbnQ6IFwiaW5wdXQudHlwZVwiLCBzY3JvbGxJbnRvVmlldzogdHJ1ZSB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbn0pO1xuXG4vKipcbkNvbm5lY3RzIGFuIFtFU0xpbnRdKGh0dHBzOi8vZXNsaW50Lm9yZy8pIGxpbnRlciB0byBDb2RlTWlycm9yJ3NcbltsaW50XShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xpbnQpIGludGVncmF0aW9uLiBgZXNsaW50YCBzaG91bGQgYmUgYW4gaW5zdGFuY2Ugb2YgdGhlXG5bYExpbnRlcmBdKGh0dHBzOi8vZXNsaW50Lm9yZy9kb2NzL2RldmVsb3Blci1ndWlkZS9ub2RlanMtYXBpI2xpbnRlcilcbmNsYXNzLCBhbmQgYGNvbmZpZ2AgYW4gb3B0aW9uYWwgRVNMaW50IGNvbmZpZ3VyYXRpb24uIFRoZSByZXR1cm5cbnZhbHVlIG9mIHRoaXMgZnVuY3Rpb24gY2FuIGJlIHBhc3NlZCB0byBbYGxpbnRlcmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGludC5saW50ZXIpXG50byBjcmVhdGUgYSBKYXZhU2NyaXB0IGxpbnRpbmcgZXh0ZW5zaW9uLlxuXG5Ob3RlIHRoYXQgRVNMaW50IHRhcmdldHMgbm9kZSwgYW5kIGlzIHRyaWNreSB0byBydW4gaW4gdGhlXG5icm93c2VyLiBUaGVcbltlc2xpbnQtbGludGVyLWJyb3dzZXJpZnldKGh0dHBzOi8vZ2l0aHViLmNvbS9VemlUZWNoL2VzbGludC1saW50ZXItYnJvd3NlcmlmeSlcbnBhY2thZ2UgbWF5IGhlbHAgd2l0aCB0aGF0IChzZWVcbltleGFtcGxlXShodHRwczovL2dpdGh1Yi5jb20vVXppVGVjaC9lc2xpbnQtbGludGVyLWJyb3dzZXJpZnkvYmxvYi9tYXN0ZXIvZXhhbXBsZS9zY3JpcHQuanMpKS5cbiovXG5mdW5jdGlvbiBlc0xpbnQoZXNsaW50LCBjb25maWcpIHtcbiAgICBpZiAoIWNvbmZpZykge1xuICAgICAgICBjb25maWcgPSB7XG4gICAgICAgICAgICBwYXJzZXJPcHRpb25zOiB7IGVjbWFWZXJzaW9uOiAyMDE5LCBzb3VyY2VUeXBlOiBcIm1vZHVsZVwiIH0sXG4gICAgICAgICAgICBlbnY6IHsgYnJvd3NlcjogdHJ1ZSwgbm9kZTogdHJ1ZSwgZXM2OiB0cnVlLCBlczIwMTU6IHRydWUsIGVzMjAxNzogdHJ1ZSwgZXMyMDIwOiB0cnVlIH0sXG4gICAgICAgICAgICBydWxlczoge31cbiAgICAgICAgfTtcbiAgICAgICAgZXNsaW50LmdldFJ1bGVzKCkuZm9yRWFjaCgoZGVzYywgbmFtZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGRlc2MubWV0YS5kb2NzLnJlY29tbWVuZGVkKVxuICAgICAgICAgICAgICAgIGNvbmZpZy5ydWxlc1tuYW1lXSA9IDI7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gKHZpZXcpID0+IHtcbiAgICAgICAgbGV0IHsgc3RhdGUgfSA9IHZpZXcsIGZvdW5kID0gW107XG4gICAgICAgIGZvciAobGV0IHsgZnJvbSwgdG8gfSBvZiBqYXZhc2NyaXB0TGFuZ3VhZ2UuZmluZFJlZ2lvbnMoc3RhdGUpKSB7XG4gICAgICAgICAgICBsZXQgZnJvbUxpbmUgPSBzdGF0ZS5kb2MubGluZUF0KGZyb20pLCBvZmZzZXQgPSB7IGxpbmU6IGZyb21MaW5lLm51bWJlciAtIDEsIGNvbDogZnJvbSAtIGZyb21MaW5lLmZyb20sIHBvczogZnJvbSB9O1xuICAgICAgICAgICAgZm9yIChsZXQgZCBvZiBlc2xpbnQudmVyaWZ5KHN0YXRlLnNsaWNlRG9jKGZyb20sIHRvKSwgY29uZmlnKSlcbiAgICAgICAgICAgICAgICBmb3VuZC5wdXNoKHRyYW5zbGF0ZURpYWdub3N0aWMoZCwgc3RhdGUuZG9jLCBvZmZzZXQpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZm91bmQ7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIG1hcFBvcyhsaW5lLCBjb2wsIGRvYywgb2Zmc2V0KSB7XG4gICAgcmV0dXJuIGRvYy5saW5lKGxpbmUgKyBvZmZzZXQubGluZSkuZnJvbSArIGNvbCArIChsaW5lID09IDEgPyBvZmZzZXQuY29sIC0gMSA6IC0xKTtcbn1cbmZ1bmN0aW9uIHRyYW5zbGF0ZURpYWdub3N0aWMoaW5wdXQsIGRvYywgb2Zmc2V0KSB7XG4gICAgbGV0IHN0YXJ0ID0gbWFwUG9zKGlucHV0LmxpbmUsIGlucHV0LmNvbHVtbiwgZG9jLCBvZmZzZXQpO1xuICAgIGxldCByZXN1bHQgPSB7XG4gICAgICAgIGZyb206IHN0YXJ0LFxuICAgICAgICB0bzogaW5wdXQuZW5kTGluZSAhPSBudWxsICYmIGlucHV0LmVuZENvbHVtbiAhPSAxID8gbWFwUG9zKGlucHV0LmVuZExpbmUsIGlucHV0LmVuZENvbHVtbiwgZG9jLCBvZmZzZXQpIDogc3RhcnQsXG4gICAgICAgIG1lc3NhZ2U6IGlucHV0Lm1lc3NhZ2UsXG4gICAgICAgIHNvdXJjZTogaW5wdXQucnVsZUlkID8gXCJlc2xpbnQ6XCIgKyBpbnB1dC5ydWxlSWQgOiBcImVzbGludFwiLFxuICAgICAgICBzZXZlcml0eTogaW5wdXQuc2V2ZXJpdHkgPT0gMSA/IFwid2FybmluZ1wiIDogXCJlcnJvclwiLFxuICAgIH07XG4gICAgaWYgKGlucHV0LmZpeCkge1xuICAgICAgICBsZXQgeyByYW5nZSwgdGV4dCB9ID0gaW5wdXQuZml4LCBmcm9tID0gcmFuZ2VbMF0gKyBvZmZzZXQucG9zIC0gc3RhcnQsIHRvID0gcmFuZ2VbMV0gKyBvZmZzZXQucG9zIC0gc3RhcnQ7XG4gICAgICAgIHJlc3VsdC5hY3Rpb25zID0gW3tcbiAgICAgICAgICAgICAgICBuYW1lOiBcImZpeFwiLFxuICAgICAgICAgICAgICAgIGFwcGx5KHZpZXcsIHN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcuZGlzcGF0Y2goeyBjaGFuZ2VzOiB7IGZyb206IHN0YXJ0ICsgZnJvbSwgdG86IHN0YXJ0ICsgdG8sIGluc2VydDogdGV4dCB9LCBzY3JvbGxJbnRvVmlldzogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IHsgYXV0b0Nsb3NlVGFncywgY29tcGxldGlvblBhdGgsIGVzTGludCwgamF2YXNjcmlwdCwgamF2YXNjcmlwdExhbmd1YWdlLCBqc3hMYW5ndWFnZSwgbG9jYWxDb21wbGV0aW9uU291cmNlLCBzY29wZUNvbXBsZXRpb25Tb3VyY2UsIHNuaXBwZXRzLCB0c3hMYW5ndWFnZSwgdHlwZXNjcmlwdExhbmd1YWdlIH07XG4iLCAiaW1wb3J0IHsgcGFyc2VyLCBjb25maWd1cmVOZXN0aW5nIH0gZnJvbSAnQGxlemVyL2h0bWwnO1xuaW1wb3J0IHsgY3NzTGFuZ3VhZ2UsIGNzcyB9IGZyb20gJ0Bjb2RlbWlycm9yL2xhbmctY3NzJztcbmltcG9ydCB7IHR5cGVzY3JpcHRMYW5ndWFnZSwganN4TGFuZ3VhZ2UsIHRzeExhbmd1YWdlLCBqYXZhc2NyaXB0TGFuZ3VhZ2UsIGphdmFzY3JpcHQgfSBmcm9tICdAY29kZW1pcnJvci9sYW5nLWphdmFzY3JpcHQnO1xuaW1wb3J0IHsgRWRpdG9yVmlldyB9IGZyb20gJ0Bjb2RlbWlycm9yL3ZpZXcnO1xuaW1wb3J0IHsgRWRpdG9yU2VsZWN0aW9uIH0gZnJvbSAnQGNvZGVtaXJyb3Ivc3RhdGUnO1xuaW1wb3J0IHsgc3ludGF4VHJlZSwgTFJMYW5ndWFnZSwgaW5kZW50Tm9kZVByb3AsIGZvbGROb2RlUHJvcCwgTGFuZ3VhZ2VTdXBwb3J0IH0gZnJvbSAnQGNvZGVtaXJyb3IvbGFuZ3VhZ2UnO1xuXG5jb25zdCBUYXJnZXRzID0gW1wiX2JsYW5rXCIsIFwiX3NlbGZcIiwgXCJfdG9wXCIsIFwiX3BhcmVudFwiXTtcbmNvbnN0IENoYXJzZXRzID0gW1wiYXNjaWlcIiwgXCJ1dGYtOFwiLCBcInV0Zi0xNlwiLCBcImxhdGluMVwiLCBcImxhdGluMVwiXTtcbmNvbnN0IE1ldGhvZHMgPSBbXCJnZXRcIiwgXCJwb3N0XCIsIFwicHV0XCIsIFwiZGVsZXRlXCJdO1xuY29uc3QgRW5jcyA9IFtcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLCBcIm11bHRpcGFydC9mb3JtLWRhdGFcIiwgXCJ0ZXh0L3BsYWluXCJdO1xuY29uc3QgQm9vbCA9IFtcInRydWVcIiwgXCJmYWxzZVwiXTtcbmNvbnN0IFMgPSB7fTsgLy8gRW1wdHkgdGFnIHNwZWNcbmNvbnN0IFRhZ3MgPSB7XG4gICAgYToge1xuICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgaHJlZjogbnVsbCwgcGluZzogbnVsbCwgdHlwZTogbnVsbCxcbiAgICAgICAgICAgIG1lZGlhOiBudWxsLFxuICAgICAgICAgICAgdGFyZ2V0OiBUYXJnZXRzLFxuICAgICAgICAgICAgaHJlZmxhbmc6IG51bGxcbiAgICAgICAgfVxuICAgIH0sXG4gICAgYWJicjogUyxcbiAgICBhZGRyZXNzOiBTLFxuICAgIGFyZWE6IHtcbiAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgIGFsdDogbnVsbCwgY29vcmRzOiBudWxsLCBocmVmOiBudWxsLCB0YXJnZXQ6IG51bGwsIHBpbmc6IG51bGwsXG4gICAgICAgICAgICBtZWRpYTogbnVsbCwgaHJlZmxhbmc6IG51bGwsIHR5cGU6IG51bGwsXG4gICAgICAgICAgICBzaGFwZTogW1wiZGVmYXVsdFwiLCBcInJlY3RcIiwgXCJjaXJjbGVcIiwgXCJwb2x5XCJdXG4gICAgICAgIH1cbiAgICB9LFxuICAgIGFydGljbGU6IFMsXG4gICAgYXNpZGU6IFMsXG4gICAgYXVkaW86IHtcbiAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgIHNyYzogbnVsbCwgbWVkaWFncm91cDogbnVsbCxcbiAgICAgICAgICAgIGNyb3Nzb3JpZ2luOiBbXCJhbm9ueW1vdXNcIiwgXCJ1c2UtY3JlZGVudGlhbHNcIl0sXG4gICAgICAgICAgICBwcmVsb2FkOiBbXCJub25lXCIsIFwibWV0YWRhdGFcIiwgXCJhdXRvXCJdLFxuICAgICAgICAgICAgYXV0b3BsYXk6IFtcImF1dG9wbGF5XCJdLFxuICAgICAgICAgICAgbG9vcDogW1wibG9vcFwiXSxcbiAgICAgICAgICAgIGNvbnRyb2xzOiBbXCJjb250cm9sc1wiXVxuICAgICAgICB9XG4gICAgfSxcbiAgICBiOiBTLFxuICAgIGJhc2U6IHsgYXR0cnM6IHsgaHJlZjogbnVsbCwgdGFyZ2V0OiBUYXJnZXRzIH0gfSxcbiAgICBiZGk6IFMsXG4gICAgYmRvOiBTLFxuICAgIGJsb2NrcXVvdGU6IHsgYXR0cnM6IHsgY2l0ZTogbnVsbCB9IH0sXG4gICAgYm9keTogUyxcbiAgICBicjogUyxcbiAgICBidXR0b246IHtcbiAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgIGZvcm06IG51bGwsIGZvcm1hY3Rpb246IG51bGwsIG5hbWU6IG51bGwsIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgYXV0b2ZvY3VzOiBbXCJhdXRvZm9jdXNcIl0sXG4gICAgICAgICAgICBkaXNhYmxlZDogW1wiYXV0b2ZvY3VzXCJdLFxuICAgICAgICAgICAgZm9ybWVuY3R5cGU6IEVuY3MsXG4gICAgICAgICAgICBmb3JtbWV0aG9kOiBNZXRob2RzLFxuICAgICAgICAgICAgZm9ybW5vdmFsaWRhdGU6IFtcIm5vdmFsaWRhdGVcIl0sXG4gICAgICAgICAgICBmb3JtdGFyZ2V0OiBUYXJnZXRzLFxuICAgICAgICAgICAgdHlwZTogW1wic3VibWl0XCIsIFwicmVzZXRcIiwgXCJidXR0b25cIl1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgY2FudmFzOiB7IGF0dHJzOiB7IHdpZHRoOiBudWxsLCBoZWlnaHQ6IG51bGwgfSB9LFxuICAgIGNhcHRpb246IFMsXG4gICAgY2VudGVyOiBTLFxuICAgIGNpdGU6IFMsXG4gICAgY29kZTogUyxcbiAgICBjb2w6IHsgYXR0cnM6IHsgc3BhbjogbnVsbCB9IH0sXG4gICAgY29sZ3JvdXA6IHsgYXR0cnM6IHsgc3BhbjogbnVsbCB9IH0sXG4gICAgY29tbWFuZDoge1xuICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgdHlwZTogW1wiY29tbWFuZFwiLCBcImNoZWNrYm94XCIsIFwicmFkaW9cIl0sXG4gICAgICAgICAgICBsYWJlbDogbnVsbCwgaWNvbjogbnVsbCwgcmFkaW9ncm91cDogbnVsbCwgY29tbWFuZDogbnVsbCwgdGl0bGU6IG51bGwsXG4gICAgICAgICAgICBkaXNhYmxlZDogW1wiZGlzYWJsZWRcIl0sXG4gICAgICAgICAgICBjaGVja2VkOiBbXCJjaGVja2VkXCJdXG4gICAgICAgIH1cbiAgICB9LFxuICAgIGRhdGE6IHsgYXR0cnM6IHsgdmFsdWU6IG51bGwgfSB9LFxuICAgIGRhdGFncmlkOiB7IGF0dHJzOiB7IGRpc2FibGVkOiBbXCJkaXNhYmxlZFwiXSwgbXVsdGlwbGU6IFtcIm11bHRpcGxlXCJdIH0gfSxcbiAgICBkYXRhbGlzdDogeyBhdHRyczogeyBkYXRhOiBudWxsIH0gfSxcbiAgICBkZDogUyxcbiAgICBkZWw6IHsgYXR0cnM6IHsgY2l0ZTogbnVsbCwgZGF0ZXRpbWU6IG51bGwgfSB9LFxuICAgIGRldGFpbHM6IHsgYXR0cnM6IHsgb3BlbjogW1wib3BlblwiXSB9IH0sXG4gICAgZGZuOiBTLFxuICAgIGRpdjogUyxcbiAgICBkbDogUyxcbiAgICBkdDogUyxcbiAgICBlbTogUyxcbiAgICBlbWJlZDogeyBhdHRyczogeyBzcmM6IG51bGwsIHR5cGU6IG51bGwsIHdpZHRoOiBudWxsLCBoZWlnaHQ6IG51bGwgfSB9LFxuICAgIGV2ZW50c291cmNlOiB7IGF0dHJzOiB7IHNyYzogbnVsbCB9IH0sXG4gICAgZmllbGRzZXQ6IHsgYXR0cnM6IHsgZGlzYWJsZWQ6IFtcImRpc2FibGVkXCJdLCBmb3JtOiBudWxsLCBuYW1lOiBudWxsIH0gfSxcbiAgICBmaWdjYXB0aW9uOiBTLFxuICAgIGZpZ3VyZTogUyxcbiAgICBmb290ZXI6IFMsXG4gICAgZm9ybToge1xuICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgYWN0aW9uOiBudWxsLCBuYW1lOiBudWxsLFxuICAgICAgICAgICAgXCJhY2NlcHQtY2hhcnNldFwiOiBDaGFyc2V0cyxcbiAgICAgICAgICAgIGF1dG9jb21wbGV0ZTogW1wib25cIiwgXCJvZmZcIl0sXG4gICAgICAgICAgICBlbmN0eXBlOiBFbmNzLFxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RzLFxuICAgICAgICAgICAgbm92YWxpZGF0ZTogW1wibm92YWxpZGF0ZVwiXSxcbiAgICAgICAgICAgIHRhcmdldDogVGFyZ2V0c1xuICAgICAgICB9XG4gICAgfSxcbiAgICBoMTogUywgaDI6IFMsIGgzOiBTLCBoNDogUywgaDU6IFMsIGg2OiBTLFxuICAgIGhlYWQ6IHtcbiAgICAgICAgY2hpbGRyZW46IFtcInRpdGxlXCIsIFwiYmFzZVwiLCBcImxpbmtcIiwgXCJzdHlsZVwiLCBcIm1ldGFcIiwgXCJzY3JpcHRcIiwgXCJub3NjcmlwdFwiLCBcImNvbW1hbmRcIl1cbiAgICB9LFxuICAgIGhlYWRlcjogUyxcbiAgICBoZ3JvdXA6IFMsXG4gICAgaHI6IFMsXG4gICAgaHRtbDoge1xuICAgICAgICBhdHRyczogeyBtYW5pZmVzdDogbnVsbCB9XG4gICAgfSxcbiAgICBpOiBTLFxuICAgIGlmcmFtZToge1xuICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgc3JjOiBudWxsLCBzcmNkb2M6IG51bGwsIG5hbWU6IG51bGwsIHdpZHRoOiBudWxsLCBoZWlnaHQ6IG51bGwsXG4gICAgICAgICAgICBzYW5kYm94OiBbXCJhbGxvdy10b3AtbmF2aWdhdGlvblwiLCBcImFsbG93LXNhbWUtb3JpZ2luXCIsIFwiYWxsb3ctZm9ybXNcIiwgXCJhbGxvdy1zY3JpcHRzXCJdLFxuICAgICAgICAgICAgc2VhbWxlc3M6IFtcInNlYW1sZXNzXCJdXG4gICAgICAgIH1cbiAgICB9LFxuICAgIGltZzoge1xuICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgYWx0OiBudWxsLCBzcmM6IG51bGwsIGlzbWFwOiBudWxsLCB1c2VtYXA6IG51bGwsIHdpZHRoOiBudWxsLCBoZWlnaHQ6IG51bGwsXG4gICAgICAgICAgICBjcm9zc29yaWdpbjogW1wiYW5vbnltb3VzXCIsIFwidXNlLWNyZWRlbnRpYWxzXCJdXG4gICAgICAgIH1cbiAgICB9LFxuICAgIGlucHV0OiB7XG4gICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICBhbHQ6IG51bGwsIGRpcm5hbWU6IG51bGwsIGZvcm06IG51bGwsIGZvcm1hY3Rpb246IG51bGwsXG4gICAgICAgICAgICBoZWlnaHQ6IG51bGwsIGxpc3Q6IG51bGwsIG1heDogbnVsbCwgbWF4bGVuZ3RoOiBudWxsLCBtaW46IG51bGwsXG4gICAgICAgICAgICBuYW1lOiBudWxsLCBwYXR0ZXJuOiBudWxsLCBwbGFjZWhvbGRlcjogbnVsbCwgc2l6ZTogbnVsbCwgc3JjOiBudWxsLFxuICAgICAgICAgICAgc3RlcDogbnVsbCwgdmFsdWU6IG51bGwsIHdpZHRoOiBudWxsLFxuICAgICAgICAgICAgYWNjZXB0OiBbXCJhdWRpby8qXCIsIFwidmlkZW8vKlwiLCBcImltYWdlLypcIl0sXG4gICAgICAgICAgICBhdXRvY29tcGxldGU6IFtcIm9uXCIsIFwib2ZmXCJdLFxuICAgICAgICAgICAgYXV0b2ZvY3VzOiBbXCJhdXRvZm9jdXNcIl0sXG4gICAgICAgICAgICBjaGVja2VkOiBbXCJjaGVja2VkXCJdLFxuICAgICAgICAgICAgZGlzYWJsZWQ6IFtcImRpc2FibGVkXCJdLFxuICAgICAgICAgICAgZm9ybWVuY3R5cGU6IEVuY3MsXG4gICAgICAgICAgICBmb3JtbWV0aG9kOiBNZXRob2RzLFxuICAgICAgICAgICAgZm9ybW5vdmFsaWRhdGU6IFtcIm5vdmFsaWRhdGVcIl0sXG4gICAgICAgICAgICBmb3JtdGFyZ2V0OiBUYXJnZXRzLFxuICAgICAgICAgICAgbXVsdGlwbGU6IFtcIm11bHRpcGxlXCJdLFxuICAgICAgICAgICAgcmVhZG9ubHk6IFtcInJlYWRvbmx5XCJdLFxuICAgICAgICAgICAgcmVxdWlyZWQ6IFtcInJlcXVpcmVkXCJdLFxuICAgICAgICAgICAgdHlwZTogW1wiaGlkZGVuXCIsIFwidGV4dFwiLCBcInNlYXJjaFwiLCBcInRlbFwiLCBcInVybFwiLCBcImVtYWlsXCIsIFwicGFzc3dvcmRcIiwgXCJkYXRldGltZVwiLCBcImRhdGVcIiwgXCJtb250aFwiLFxuICAgICAgICAgICAgICAgIFwid2Vla1wiLCBcInRpbWVcIiwgXCJkYXRldGltZS1sb2NhbFwiLCBcIm51bWJlclwiLCBcInJhbmdlXCIsIFwiY29sb3JcIiwgXCJjaGVja2JveFwiLCBcInJhZGlvXCIsXG4gICAgICAgICAgICAgICAgXCJmaWxlXCIsIFwic3VibWl0XCIsIFwiaW1hZ2VcIiwgXCJyZXNldFwiLCBcImJ1dHRvblwiXVxuICAgICAgICB9XG4gICAgfSxcbiAgICBpbnM6IHsgYXR0cnM6IHsgY2l0ZTogbnVsbCwgZGF0ZXRpbWU6IG51bGwgfSB9LFxuICAgIGtiZDogUyxcbiAgICBrZXlnZW46IHtcbiAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgIGNoYWxsZW5nZTogbnVsbCwgZm9ybTogbnVsbCwgbmFtZTogbnVsbCxcbiAgICAgICAgICAgIGF1dG9mb2N1czogW1wiYXV0b2ZvY3VzXCJdLFxuICAgICAgICAgICAgZGlzYWJsZWQ6IFtcImRpc2FibGVkXCJdLFxuICAgICAgICAgICAga2V5dHlwZTogW1wiUlNBXCJdXG4gICAgICAgIH1cbiAgICB9LFxuICAgIGxhYmVsOiB7IGF0dHJzOiB7IGZvcjogbnVsbCwgZm9ybTogbnVsbCB9IH0sXG4gICAgbGVnZW5kOiBTLFxuICAgIGxpOiB7IGF0dHJzOiB7IHZhbHVlOiBudWxsIH0gfSxcbiAgICBsaW5rOiB7XG4gICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICBocmVmOiBudWxsLCB0eXBlOiBudWxsLFxuICAgICAgICAgICAgaHJlZmxhbmc6IG51bGwsXG4gICAgICAgICAgICBtZWRpYTogbnVsbCxcbiAgICAgICAgICAgIHNpemVzOiBbXCJhbGxcIiwgXCIxNngxNlwiLCBcIjE2eDE2IDMyeDMyXCIsIFwiMTZ4MTYgMzJ4MzIgNjR4NjRcIl1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgbWFwOiB7IGF0dHJzOiB7IG5hbWU6IG51bGwgfSB9LFxuICAgIG1hcms6IFMsXG4gICAgbWVudTogeyBhdHRyczogeyBsYWJlbDogbnVsbCwgdHlwZTogW1wibGlzdFwiLCBcImNvbnRleHRcIiwgXCJ0b29sYmFyXCJdIH0gfSxcbiAgICBtZXRhOiB7XG4gICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICBjb250ZW50OiBudWxsLFxuICAgICAgICAgICAgY2hhcnNldDogQ2hhcnNldHMsXG4gICAgICAgICAgICBuYW1lOiBbXCJ2aWV3cG9ydFwiLCBcImFwcGxpY2F0aW9uLW5hbWVcIiwgXCJhdXRob3JcIiwgXCJkZXNjcmlwdGlvblwiLCBcImdlbmVyYXRvclwiLCBcImtleXdvcmRzXCJdLFxuICAgICAgICAgICAgXCJodHRwLWVxdWl2XCI6IFtcImNvbnRlbnQtbGFuZ3VhZ2VcIiwgXCJjb250ZW50LXR5cGVcIiwgXCJkZWZhdWx0LXN0eWxlXCIsIFwicmVmcmVzaFwiXVxuICAgICAgICB9XG4gICAgfSxcbiAgICBtZXRlcjogeyBhdHRyczogeyB2YWx1ZTogbnVsbCwgbWluOiBudWxsLCBsb3c6IG51bGwsIGhpZ2g6IG51bGwsIG1heDogbnVsbCwgb3B0aW11bTogbnVsbCB9IH0sXG4gICAgbmF2OiBTLFxuICAgIG5vc2NyaXB0OiBTLFxuICAgIG9iamVjdDoge1xuICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgZGF0YTogbnVsbCwgdHlwZTogbnVsbCwgbmFtZTogbnVsbCwgdXNlbWFwOiBudWxsLCBmb3JtOiBudWxsLCB3aWR0aDogbnVsbCwgaGVpZ2h0OiBudWxsLFxuICAgICAgICAgICAgdHlwZW11c3RtYXRjaDogW1widHlwZW11c3RtYXRjaFwiXVxuICAgICAgICB9XG4gICAgfSxcbiAgICBvbDogeyBhdHRyczogeyByZXZlcnNlZDogW1wicmV2ZXJzZWRcIl0sIHN0YXJ0OiBudWxsLCB0eXBlOiBbXCIxXCIsIFwiYVwiLCBcIkFcIiwgXCJpXCIsIFwiSVwiXSB9LFxuICAgICAgICBjaGlsZHJlbjogW1wibGlcIiwgXCJzY3JpcHRcIiwgXCJ0ZW1wbGF0ZVwiLCBcInVsXCIsIFwib2xcIl0gfSxcbiAgICBvcHRncm91cDogeyBhdHRyczogeyBkaXNhYmxlZDogW1wiZGlzYWJsZWRcIl0sIGxhYmVsOiBudWxsIH0gfSxcbiAgICBvcHRpb246IHsgYXR0cnM6IHsgZGlzYWJsZWQ6IFtcImRpc2FibGVkXCJdLCBsYWJlbDogbnVsbCwgc2VsZWN0ZWQ6IFtcInNlbGVjdGVkXCJdLCB2YWx1ZTogbnVsbCB9IH0sXG4gICAgb3V0cHV0OiB7IGF0dHJzOiB7IGZvcjogbnVsbCwgZm9ybTogbnVsbCwgbmFtZTogbnVsbCB9IH0sXG4gICAgcDogUyxcbiAgICBwYXJhbTogeyBhdHRyczogeyBuYW1lOiBudWxsLCB2YWx1ZTogbnVsbCB9IH0sXG4gICAgcHJlOiBTLFxuICAgIHByb2dyZXNzOiB7IGF0dHJzOiB7IHZhbHVlOiBudWxsLCBtYXg6IG51bGwgfSB9LFxuICAgIHE6IHsgYXR0cnM6IHsgY2l0ZTogbnVsbCB9IH0sXG4gICAgcnA6IFMsXG4gICAgcnQ6IFMsXG4gICAgcnVieTogUyxcbiAgICBzYW1wOiBTLFxuICAgIHNjcmlwdDoge1xuICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgdHlwZTogW1widGV4dC9qYXZhc2NyaXB0XCJdLFxuICAgICAgICAgICAgc3JjOiBudWxsLFxuICAgICAgICAgICAgYXN5bmM6IFtcImFzeW5jXCJdLFxuICAgICAgICAgICAgZGVmZXI6IFtcImRlZmVyXCJdLFxuICAgICAgICAgICAgY2hhcnNldDogQ2hhcnNldHNcbiAgICAgICAgfVxuICAgIH0sXG4gICAgc2VjdGlvbjogUyxcbiAgICBzZWxlY3Q6IHtcbiAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgIGZvcm06IG51bGwsIG5hbWU6IG51bGwsIHNpemU6IG51bGwsXG4gICAgICAgICAgICBhdXRvZm9jdXM6IFtcImF1dG9mb2N1c1wiXSxcbiAgICAgICAgICAgIGRpc2FibGVkOiBbXCJkaXNhYmxlZFwiXSxcbiAgICAgICAgICAgIG11bHRpcGxlOiBbXCJtdWx0aXBsZVwiXVxuICAgICAgICB9XG4gICAgfSxcbiAgICBzbG90OiB7IGF0dHJzOiB7IG5hbWU6IG51bGwgfSB9LFxuICAgIHNtYWxsOiBTLFxuICAgIHNvdXJjZTogeyBhdHRyczogeyBzcmM6IG51bGwsIHR5cGU6IG51bGwsIG1lZGlhOiBudWxsIH0gfSxcbiAgICBzcGFuOiBTLFxuICAgIHN0cm9uZzogUyxcbiAgICBzdHlsZToge1xuICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgdHlwZTogW1widGV4dC9jc3NcIl0sXG4gICAgICAgICAgICBtZWRpYTogbnVsbCxcbiAgICAgICAgICAgIHNjb3BlZDogbnVsbFxuICAgICAgICB9XG4gICAgfSxcbiAgICBzdWI6IFMsXG4gICAgc3VtbWFyeTogUyxcbiAgICBzdXA6IFMsXG4gICAgdGFibGU6IFMsXG4gICAgdGJvZHk6IFMsXG4gICAgdGQ6IHsgYXR0cnM6IHsgY29sc3BhbjogbnVsbCwgcm93c3BhbjogbnVsbCwgaGVhZGVyczogbnVsbCB9IH0sXG4gICAgdGVtcGxhdGU6IFMsXG4gICAgdGV4dGFyZWE6IHtcbiAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgIGRpcm5hbWU6IG51bGwsIGZvcm06IG51bGwsIG1heGxlbmd0aDogbnVsbCwgbmFtZTogbnVsbCwgcGxhY2Vob2xkZXI6IG51bGwsXG4gICAgICAgICAgICByb3dzOiBudWxsLCBjb2xzOiBudWxsLFxuICAgICAgICAgICAgYXV0b2ZvY3VzOiBbXCJhdXRvZm9jdXNcIl0sXG4gICAgICAgICAgICBkaXNhYmxlZDogW1wiZGlzYWJsZWRcIl0sXG4gICAgICAgICAgICByZWFkb25seTogW1wicmVhZG9ubHlcIl0sXG4gICAgICAgICAgICByZXF1aXJlZDogW1wicmVxdWlyZWRcIl0sXG4gICAgICAgICAgICB3cmFwOiBbXCJzb2Z0XCIsIFwiaGFyZFwiXVxuICAgICAgICB9XG4gICAgfSxcbiAgICB0Zm9vdDogUyxcbiAgICB0aDogeyBhdHRyczogeyBjb2xzcGFuOiBudWxsLCByb3dzcGFuOiBudWxsLCBoZWFkZXJzOiBudWxsLCBzY29wZTogW1wicm93XCIsIFwiY29sXCIsIFwicm93Z3JvdXBcIiwgXCJjb2xncm91cFwiXSB9IH0sXG4gICAgdGhlYWQ6IFMsXG4gICAgdGltZTogeyBhdHRyczogeyBkYXRldGltZTogbnVsbCB9IH0sXG4gICAgdGl0bGU6IFMsXG4gICAgdHI6IFMsXG4gICAgdHJhY2s6IHtcbiAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgIHNyYzogbnVsbCwgbGFiZWw6IG51bGwsIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICBraW5kOiBbXCJzdWJ0aXRsZXNcIiwgXCJjYXB0aW9uc1wiLCBcImRlc2NyaXB0aW9uc1wiLCBcImNoYXB0ZXJzXCIsIFwibWV0YWRhdGFcIl0sXG4gICAgICAgICAgICBzcmNsYW5nOiBudWxsXG4gICAgICAgIH1cbiAgICB9LFxuICAgIHVsOiB7IGNoaWxkcmVuOiBbXCJsaVwiLCBcInNjcmlwdFwiLCBcInRlbXBsYXRlXCIsIFwidWxcIiwgXCJvbFwiXSB9LFxuICAgIHZhcjogUyxcbiAgICB2aWRlbzoge1xuICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgc3JjOiBudWxsLCBwb3N0ZXI6IG51bGwsIHdpZHRoOiBudWxsLCBoZWlnaHQ6IG51bGwsXG4gICAgICAgICAgICBjcm9zc29yaWdpbjogW1wiYW5vbnltb3VzXCIsIFwidXNlLWNyZWRlbnRpYWxzXCJdLFxuICAgICAgICAgICAgcHJlbG9hZDogW1wiYXV0b1wiLCBcIm1ldGFkYXRhXCIsIFwibm9uZVwiXSxcbiAgICAgICAgICAgIGF1dG9wbGF5OiBbXCJhdXRvcGxheVwiXSxcbiAgICAgICAgICAgIG1lZGlhZ3JvdXA6IFtcIm1vdmllXCJdLFxuICAgICAgICAgICAgbXV0ZWQ6IFtcIm11dGVkXCJdLFxuICAgICAgICAgICAgY29udHJvbHM6IFtcImNvbnRyb2xzXCJdXG4gICAgICAgIH1cbiAgICB9LFxuICAgIHdicjogU1xufTtcbmNvbnN0IEdsb2JhbEF0dHJzID0ge1xuICAgIGFjY2Vzc2tleTogbnVsbCxcbiAgICBjbGFzczogbnVsbCxcbiAgICBjb250ZW50ZWRpdGFibGU6IEJvb2wsXG4gICAgY29udGV4dG1lbnU6IG51bGwsXG4gICAgZGlyOiBbXCJsdHJcIiwgXCJydGxcIiwgXCJhdXRvXCJdLFxuICAgIGRyYWdnYWJsZTogW1widHJ1ZVwiLCBcImZhbHNlXCIsIFwiYXV0b1wiXSxcbiAgICBkcm9wem9uZTogW1wiY29weVwiLCBcIm1vdmVcIiwgXCJsaW5rXCIsIFwic3RyaW5nOlwiLCBcImZpbGU6XCJdLFxuICAgIGhpZGRlbjogW1wiaGlkZGVuXCJdLFxuICAgIGlkOiBudWxsLFxuICAgIGluZXJ0OiBbXCJpbmVydFwiXSxcbiAgICBpdGVtaWQ6IG51bGwsXG4gICAgaXRlbXByb3A6IG51bGwsXG4gICAgaXRlbXJlZjogbnVsbCxcbiAgICBpdGVtc2NvcGU6IFtcIml0ZW1zY29wZVwiXSxcbiAgICBpdGVtdHlwZTogbnVsbCxcbiAgICBsYW5nOiBbXCJhclwiLCBcImJuXCIsIFwiZGVcIiwgXCJlbi1HQlwiLCBcImVuLVVTXCIsIFwiZXNcIiwgXCJmclwiLCBcImhpXCIsIFwiaWRcIiwgXCJqYVwiLCBcInBhXCIsIFwicHRcIiwgXCJydVwiLCBcInRyXCIsIFwiemhcIl0sXG4gICAgc3BlbGxjaGVjazogQm9vbCxcbiAgICBhdXRvY29ycmVjdDogQm9vbCxcbiAgICBhdXRvY2FwaXRhbGl6ZTogQm9vbCxcbiAgICBzdHlsZTogbnVsbCxcbiAgICB0YWJpbmRleDogbnVsbCxcbiAgICB0aXRsZTogbnVsbCxcbiAgICB0cmFuc2xhdGU6IFtcInllc1wiLCBcIm5vXCJdLFxuICAgIG9uY2xpY2s6IG51bGwsXG4gICAgcmVsOiBbXCJzdHlsZXNoZWV0XCIsIFwiYWx0ZXJuYXRlXCIsIFwiYXV0aG9yXCIsIFwiYm9va21hcmtcIiwgXCJoZWxwXCIsIFwibGljZW5zZVwiLCBcIm5leHRcIiwgXCJub2ZvbGxvd1wiLCBcIm5vcmVmZXJyZXJcIiwgXCJwcmVmZXRjaFwiLCBcInByZXZcIiwgXCJzZWFyY2hcIiwgXCJ0YWdcIl0sXG4gICAgcm9sZTogLypAX19QVVJFX18qL1wiYWxlcnQgYXBwbGljYXRpb24gYXJ0aWNsZSBiYW5uZXIgYnV0dG9uIGNlbGwgY2hlY2tib3ggY29tcGxlbWVudGFyeSBjb250ZW50aW5mbyBkaWFsb2cgZG9jdW1lbnQgZmVlZCBmaWd1cmUgZm9ybSBncmlkIGdyaWRjZWxsIGhlYWRpbmcgaW1nIGxpc3QgbGlzdGJveCBsaXN0aXRlbSBtYWluIG5hdmlnYXRpb24gcmVnaW9uIHJvdyByb3dncm91cCBzZWFyY2ggc3dpdGNoIHRhYiB0YWJsZSB0YWJwYW5lbCB0ZXh0Ym94IHRpbWVyXCIuc3BsaXQoXCIgXCIpLFxuICAgIFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCI6IG51bGwsXG4gICAgXCJhcmlhLWF0b21pY1wiOiBCb29sLFxuICAgIFwiYXJpYS1hdXRvY29tcGxldGVcIjogW1wiaW5saW5lXCIsIFwibGlzdFwiLCBcImJvdGhcIiwgXCJub25lXCJdLFxuICAgIFwiYXJpYS1idXN5XCI6IEJvb2wsXG4gICAgXCJhcmlhLWNoZWNrZWRcIjogW1widHJ1ZVwiLCBcImZhbHNlXCIsIFwibWl4ZWRcIiwgXCJ1bmRlZmluZWRcIl0sXG4gICAgXCJhcmlhLWNvbnRyb2xzXCI6IG51bGwsXG4gICAgXCJhcmlhLWRlc2NyaWJlZGJ5XCI6IG51bGwsXG4gICAgXCJhcmlhLWRpc2FibGVkXCI6IEJvb2wsXG4gICAgXCJhcmlhLWRyb3BlZmZlY3RcIjogbnVsbCxcbiAgICBcImFyaWEtZXhwYW5kZWRcIjogW1widHJ1ZVwiLCBcImZhbHNlXCIsIFwidW5kZWZpbmVkXCJdLFxuICAgIFwiYXJpYS1mbG93dG9cIjogbnVsbCxcbiAgICBcImFyaWEtZ3JhYmJlZFwiOiBbXCJ0cnVlXCIsIFwiZmFsc2VcIiwgXCJ1bmRlZmluZWRcIl0sXG4gICAgXCJhcmlhLWhhc3BvcHVwXCI6IEJvb2wsXG4gICAgXCJhcmlhLWhpZGRlblwiOiBCb29sLFxuICAgIFwiYXJpYS1pbnZhbGlkXCI6IFtcInRydWVcIiwgXCJmYWxzZVwiLCBcImdyYW1tYXJcIiwgXCJzcGVsbGluZ1wiXSxcbiAgICBcImFyaWEtbGFiZWxcIjogbnVsbCxcbiAgICBcImFyaWEtbGFiZWxsZWRieVwiOiBudWxsLFxuICAgIFwiYXJpYS1sZXZlbFwiOiBudWxsLFxuICAgIFwiYXJpYS1saXZlXCI6IFtcIm9mZlwiLCBcInBvbGl0ZVwiLCBcImFzc2VydGl2ZVwiXSxcbiAgICBcImFyaWEtbXVsdGlsaW5lXCI6IEJvb2wsXG4gICAgXCJhcmlhLW11bHRpc2VsZWN0YWJsZVwiOiBCb29sLFxuICAgIFwiYXJpYS1vd25zXCI6IG51bGwsXG4gICAgXCJhcmlhLXBvc2luc2V0XCI6IG51bGwsXG4gICAgXCJhcmlhLXByZXNzZWRcIjogW1widHJ1ZVwiLCBcImZhbHNlXCIsIFwibWl4ZWRcIiwgXCJ1bmRlZmluZWRcIl0sXG4gICAgXCJhcmlhLXJlYWRvbmx5XCI6IEJvb2wsXG4gICAgXCJhcmlhLXJlbGV2YW50XCI6IG51bGwsXG4gICAgXCJhcmlhLXJlcXVpcmVkXCI6IEJvb2wsXG4gICAgXCJhcmlhLXNlbGVjdGVkXCI6IFtcInRydWVcIiwgXCJmYWxzZVwiLCBcInVuZGVmaW5lZFwiXSxcbiAgICBcImFyaWEtc2V0c2l6ZVwiOiBudWxsLFxuICAgIFwiYXJpYS1zb3J0XCI6IFtcImFzY2VuZGluZ1wiLCBcImRlc2NlbmRpbmdcIiwgXCJub25lXCIsIFwib3RoZXJcIl0sXG4gICAgXCJhcmlhLXZhbHVlbWF4XCI6IG51bGwsXG4gICAgXCJhcmlhLXZhbHVlbWluXCI6IG51bGwsXG4gICAgXCJhcmlhLXZhbHVlbm93XCI6IG51bGwsXG4gICAgXCJhcmlhLXZhbHVldGV4dFwiOiBudWxsXG59O1xuY2xhc3MgU2NoZW1hIHtcbiAgICBjb25zdHJ1Y3RvcihleHRyYVRhZ3MsIGV4dHJhQXR0cnMpIHtcbiAgICAgICAgdGhpcy50YWdzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBUYWdzKSwgZXh0cmFUYWdzKTtcbiAgICAgICAgdGhpcy5nbG9iYWxBdHRycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgR2xvYmFsQXR0cnMpLCBleHRyYUF0dHJzKTtcbiAgICAgICAgdGhpcy5hbGxUYWdzID0gT2JqZWN0LmtleXModGhpcy50YWdzKTtcbiAgICAgICAgdGhpcy5nbG9iYWxBdHRyTmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLmdsb2JhbEF0dHJzKTtcbiAgICB9XG59XG5TY2hlbWEuZGVmYXVsdCA9IC8qQF9fUFVSRV9fKi9uZXcgU2NoZW1hO1xuZnVuY3Rpb24gZWxlbWVudE5hbWUoZG9jLCB0cmVlLCBtYXggPSBkb2MubGVuZ3RoKSB7XG4gICAgaWYgKCF0cmVlKVxuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICBsZXQgdGFnID0gdHJlZS5maXJzdENoaWxkO1xuICAgIGxldCBuYW1lID0gdGFnICYmIHRhZy5nZXRDaGlsZChcIlRhZ05hbWVcIik7XG4gICAgcmV0dXJuIG5hbWUgPyBkb2Muc2xpY2VTdHJpbmcobmFtZS5mcm9tLCBNYXRoLm1pbihuYW1lLnRvLCBtYXgpKSA6IFwiXCI7XG59XG5mdW5jdGlvbiBmaW5kUGFyZW50RWxlbWVudCh0cmVlLCBza2lwID0gZmFsc2UpIHtcbiAgICBmb3IgKGxldCBjdXIgPSB0cmVlLnBhcmVudDsgY3VyOyBjdXIgPSBjdXIucGFyZW50KVxuICAgICAgICBpZiAoY3VyLm5hbWUgPT0gXCJFbGVtZW50XCIpIHtcbiAgICAgICAgICAgIGlmIChza2lwKVxuICAgICAgICAgICAgICAgIHNraXAgPSBmYWxzZTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VyO1xuICAgICAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBhbGxvd2VkQ2hpbGRyZW4oZG9jLCB0cmVlLCBzY2hlbWEpIHtcbiAgICBsZXQgcGFyZW50SW5mbyA9IHNjaGVtYS50YWdzW2VsZW1lbnROYW1lKGRvYywgZmluZFBhcmVudEVsZW1lbnQodHJlZSwgdHJ1ZSkpXTtcbiAgICByZXR1cm4gKHBhcmVudEluZm8gPT09IG51bGwgfHwgcGFyZW50SW5mbyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyZW50SW5mby5jaGlsZHJlbikgfHwgc2NoZW1hLmFsbFRhZ3M7XG59XG5mdW5jdGlvbiBvcGVuVGFncyhkb2MsIHRyZWUpIHtcbiAgICBsZXQgb3BlbiA9IFtdO1xuICAgIGZvciAobGV0IHBhcmVudCA9IHRyZWU7IHBhcmVudCA9IGZpbmRQYXJlbnRFbGVtZW50KHBhcmVudCk7KSB7XG4gICAgICAgIGxldCB0YWdOYW1lID0gZWxlbWVudE5hbWUoZG9jLCBwYXJlbnQpO1xuICAgICAgICBpZiAodGFnTmFtZSAmJiBwYXJlbnQubGFzdENoaWxkLm5hbWUgPT0gXCJDbG9zZVRhZ1wiKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGlmICh0YWdOYW1lICYmIG9wZW4uaW5kZXhPZih0YWdOYW1lKSA8IDAgJiYgKHRyZWUubmFtZSA9PSBcIkVuZFRhZ1wiIHx8IHRyZWUuZnJvbSA+PSBwYXJlbnQuZmlyc3RDaGlsZC50bykpXG4gICAgICAgICAgICBvcGVuLnB1c2godGFnTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBvcGVuO1xufVxuY29uc3QgaWRlbnRpZmllciA9IC9eWzpcXC1cXC5cXHdcXHUwMGI3LVxcdWZmZmZdKiQvO1xuZnVuY3Rpb24gY29tcGxldGVUYWcoc3RhdGUsIHNjaGVtYSwgdHJlZSwgZnJvbSwgdG8pIHtcbiAgICBsZXQgZW5kID0gL1xccyo+Ly50ZXN0KHN0YXRlLnNsaWNlRG9jKHRvLCB0byArIDUpKSA/IFwiXCIgOiBcIj5cIjtcbiAgICByZXR1cm4geyBmcm9tLCB0byxcbiAgICAgICAgb3B0aW9uczogYWxsb3dlZENoaWxkcmVuKHN0YXRlLmRvYywgdHJlZSwgc2NoZW1hKS5tYXAodGFnTmFtZSA9PiAoeyBsYWJlbDogdGFnTmFtZSwgdHlwZTogXCJ0eXBlXCIgfSkpLmNvbmNhdChvcGVuVGFncyhzdGF0ZS5kb2MsIHRyZWUpLm1hcCgodGFnLCBpKSA9PiAoeyBsYWJlbDogXCIvXCIgKyB0YWcsIGFwcGx5OiBcIi9cIiArIHRhZyArIGVuZCxcbiAgICAgICAgICAgIHR5cGU6IFwidHlwZVwiLCBib29zdDogOTkgLSBpIH0pKSksXG4gICAgICAgIHZhbGlkRm9yOiAvXlxcLz9bOlxcLVxcLlxcd1xcdTAwYjctXFx1ZmZmZl0qJC8gfTtcbn1cbmZ1bmN0aW9uIGNvbXBsZXRlQ2xvc2VUYWcoc3RhdGUsIHRyZWUsIGZyb20sIHRvKSB7XG4gICAgbGV0IGVuZCA9IC9cXHMqPi8udGVzdChzdGF0ZS5zbGljZURvYyh0bywgdG8gKyA1KSkgPyBcIlwiIDogXCI+XCI7XG4gICAgcmV0dXJuIHsgZnJvbSwgdG8sXG4gICAgICAgIG9wdGlvbnM6IG9wZW5UYWdzKHN0YXRlLmRvYywgdHJlZSkubWFwKCh0YWcsIGkpID0+ICh7IGxhYmVsOiB0YWcsIGFwcGx5OiB0YWcgKyBlbmQsIHR5cGU6IFwidHlwZVwiLCBib29zdDogOTkgLSBpIH0pKSxcbiAgICAgICAgdmFsaWRGb3I6IGlkZW50aWZpZXIgfTtcbn1cbmZ1bmN0aW9uIGNvbXBsZXRlU3RhcnRUYWcoc3RhdGUsIHNjaGVtYSwgdHJlZSwgcG9zKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBbXSwgbGV2ZWwgPSAwO1xuICAgIGZvciAobGV0IHRhZ05hbWUgb2YgYWxsb3dlZENoaWxkcmVuKHN0YXRlLmRvYywgdHJlZSwgc2NoZW1hKSlcbiAgICAgICAgb3B0aW9ucy5wdXNoKHsgbGFiZWw6IFwiPFwiICsgdGFnTmFtZSwgdHlwZTogXCJ0eXBlXCIgfSk7XG4gICAgZm9yIChsZXQgb3BlbiBvZiBvcGVuVGFncyhzdGF0ZS5kb2MsIHRyZWUpKVxuICAgICAgICBvcHRpb25zLnB1c2goeyBsYWJlbDogXCI8L1wiICsgb3BlbiArIFwiPlwiLCB0eXBlOiBcInR5cGVcIiwgYm9vc3Q6IDk5IC0gbGV2ZWwrKyB9KTtcbiAgICByZXR1cm4geyBmcm9tOiBwb3MsIHRvOiBwb3MsIG9wdGlvbnMsIHZhbGlkRm9yOiAvXjxcXC8/WzpcXC1cXC5cXHdcXHUwMGI3LVxcdWZmZmZdKiQvIH07XG59XG5mdW5jdGlvbiBjb21wbGV0ZUF0dHJOYW1lKHN0YXRlLCBzY2hlbWEsIHRyZWUsIGZyb20sIHRvKSB7XG4gICAgbGV0IGVsdCA9IGZpbmRQYXJlbnRFbGVtZW50KHRyZWUpLCBpbmZvID0gZWx0ID8gc2NoZW1hLnRhZ3NbZWxlbWVudE5hbWUoc3RhdGUuZG9jLCBlbHQpXSA6IG51bGw7XG4gICAgbGV0IG5hbWVzID0gKGluZm8gJiYgaW5mby5hdHRycyA/IE9iamVjdC5rZXlzKGluZm8uYXR0cnMpLmNvbmNhdChzY2hlbWEuZ2xvYmFsQXR0ck5hbWVzKSA6IHNjaGVtYS5nbG9iYWxBdHRyTmFtZXMpO1xuICAgIHJldHVybiB7IGZyb20sIHRvLFxuICAgICAgICBvcHRpb25zOiBuYW1lcy5tYXAoYXR0ck5hbWUgPT4gKHsgbGFiZWw6IGF0dHJOYW1lLCB0eXBlOiBcInByb3BlcnR5XCIgfSkpLFxuICAgICAgICB2YWxpZEZvcjogaWRlbnRpZmllciB9O1xufVxuZnVuY3Rpb24gY29tcGxldGVBdHRyVmFsdWUoc3RhdGUsIHNjaGVtYSwgdHJlZSwgZnJvbSwgdG8pIHtcbiAgICB2YXIgX2E7XG4gICAgbGV0IG5hbWVOb2RlID0gKF9hID0gdHJlZS5wYXJlbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXRDaGlsZChcIkF0dHJpYnV0ZU5hbWVcIik7XG4gICAgbGV0IG9wdGlvbnMgPSBbXSwgdG9rZW4gPSB1bmRlZmluZWQ7XG4gICAgaWYgKG5hbWVOb2RlKSB7XG4gICAgICAgIGxldCBhdHRyTmFtZSA9IHN0YXRlLnNsaWNlRG9jKG5hbWVOb2RlLmZyb20sIG5hbWVOb2RlLnRvKTtcbiAgICAgICAgbGV0IGF0dHJzID0gc2NoZW1hLmdsb2JhbEF0dHJzW2F0dHJOYW1lXTtcbiAgICAgICAgaWYgKCFhdHRycykge1xuICAgICAgICAgICAgbGV0IGVsdCA9IGZpbmRQYXJlbnRFbGVtZW50KHRyZWUpLCBpbmZvID0gZWx0ID8gc2NoZW1hLnRhZ3NbZWxlbWVudE5hbWUoc3RhdGUuZG9jLCBlbHQpXSA6IG51bGw7XG4gICAgICAgICAgICBhdHRycyA9IChpbmZvID09PSBudWxsIHx8IGluZm8gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGluZm8uYXR0cnMpICYmIGluZm8uYXR0cnNbYXR0ck5hbWVdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdHRycykge1xuICAgICAgICAgICAgbGV0IGJhc2UgPSBzdGF0ZS5zbGljZURvYyhmcm9tLCB0bykudG9Mb3dlckNhc2UoKSwgcXVvdGVTdGFydCA9ICdcIicsIHF1b3RlRW5kID0gJ1wiJztcbiAgICAgICAgICAgIGlmICgvXlsnXCJdLy50ZXN0KGJhc2UpKSB7XG4gICAgICAgICAgICAgICAgdG9rZW4gPSBiYXNlWzBdID09ICdcIicgPyAvXlteXCJdKiQvIDogL15bXiddKiQvO1xuICAgICAgICAgICAgICAgIHF1b3RlU3RhcnQgPSBcIlwiO1xuICAgICAgICAgICAgICAgIHF1b3RlRW5kID0gc3RhdGUuc2xpY2VEb2ModG8sIHRvICsgMSkgPT0gYmFzZVswXSA/IFwiXCIgOiBiYXNlWzBdO1xuICAgICAgICAgICAgICAgIGJhc2UgPSBiYXNlLnNsaWNlKDEpO1xuICAgICAgICAgICAgICAgIGZyb20rKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRva2VuID0gL15bXlxcczw+PSdcIl0qJC87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCB2YWx1ZSBvZiBhdHRycylcbiAgICAgICAgICAgICAgICBvcHRpb25zLnB1c2goeyBsYWJlbDogdmFsdWUsIGFwcGx5OiBxdW90ZVN0YXJ0ICsgdmFsdWUgKyBxdW90ZUVuZCwgdHlwZTogXCJjb25zdGFudFwiIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7IGZyb20sIHRvLCBvcHRpb25zLCB2YWxpZEZvcjogdG9rZW4gfTtcbn1cbmZ1bmN0aW9uIGh0bWxDb21wbGV0aW9uRm9yKHNjaGVtYSwgY29udGV4dCkge1xuICAgIGxldCB7IHN0YXRlLCBwb3MgfSA9IGNvbnRleHQsIGFyb3VuZCA9IHN5bnRheFRyZWUoc3RhdGUpLnJlc29sdmVJbm5lcihwb3MpLCB0cmVlID0gYXJvdW5kLnJlc29sdmUocG9zLCAtMSk7XG4gICAgZm9yIChsZXQgc2NhbiA9IHBvcywgYmVmb3JlOyBhcm91bmQgPT0gdHJlZSAmJiAoYmVmb3JlID0gdHJlZS5jaGlsZEJlZm9yZShzY2FuKSk7KSB7XG4gICAgICAgIGxldCBsYXN0ID0gYmVmb3JlLmxhc3RDaGlsZDtcbiAgICAgICAgaWYgKCFsYXN0IHx8ICFsYXN0LnR5cGUuaXNFcnJvciB8fCBsYXN0LmZyb20gPCBsYXN0LnRvKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGFyb3VuZCA9IHRyZWUgPSBiZWZvcmU7XG4gICAgICAgIHNjYW4gPSBsYXN0LmZyb207XG4gICAgfVxuICAgIGlmICh0cmVlLm5hbWUgPT0gXCJUYWdOYW1lXCIpIHtcbiAgICAgICAgcmV0dXJuIHRyZWUucGFyZW50ICYmIC9DbG9zZVRhZyQvLnRlc3QodHJlZS5wYXJlbnQubmFtZSkgPyBjb21wbGV0ZUNsb3NlVGFnKHN0YXRlLCB0cmVlLCB0cmVlLmZyb20sIHBvcylcbiAgICAgICAgICAgIDogY29tcGxldGVUYWcoc3RhdGUsIHNjaGVtYSwgdHJlZSwgdHJlZS5mcm9tLCBwb3MpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0cmVlLm5hbWUgPT0gXCJTdGFydFRhZ1wiKSB7XG4gICAgICAgIHJldHVybiBjb21wbGV0ZVRhZyhzdGF0ZSwgc2NoZW1hLCB0cmVlLCBwb3MsIHBvcyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRyZWUubmFtZSA9PSBcIlN0YXJ0Q2xvc2VUYWdcIiB8fCB0cmVlLm5hbWUgPT0gXCJJbmNvbXBsZXRlQ2xvc2VUYWdcIikge1xuICAgICAgICByZXR1cm4gY29tcGxldGVDbG9zZVRhZyhzdGF0ZSwgdHJlZSwgcG9zLCBwb3MpO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb250ZXh0LmV4cGxpY2l0ICYmICh0cmVlLm5hbWUgPT0gXCJPcGVuVGFnXCIgfHwgdHJlZS5uYW1lID09IFwiU2VsZkNsb3NpbmdUYWdcIikgfHwgdHJlZS5uYW1lID09IFwiQXR0cmlidXRlTmFtZVwiKSB7XG4gICAgICAgIHJldHVybiBjb21wbGV0ZUF0dHJOYW1lKHN0YXRlLCBzY2hlbWEsIHRyZWUsIHRyZWUubmFtZSA9PSBcIkF0dHJpYnV0ZU5hbWVcIiA/IHRyZWUuZnJvbSA6IHBvcywgcG9zKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHJlZS5uYW1lID09IFwiSXNcIiB8fCB0cmVlLm5hbWUgPT0gXCJBdHRyaWJ1dGVWYWx1ZVwiIHx8IHRyZWUubmFtZSA9PSBcIlVucXVvdGVkQXR0cmlidXRlVmFsdWVcIikge1xuICAgICAgICByZXR1cm4gY29tcGxldGVBdHRyVmFsdWUoc3RhdGUsIHNjaGVtYSwgdHJlZSwgdHJlZS5uYW1lID09IFwiSXNcIiA/IHBvcyA6IHRyZWUuZnJvbSwgcG9zKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29udGV4dC5leHBsaWNpdCAmJiAoYXJvdW5kLm5hbWUgPT0gXCJFbGVtZW50XCIgfHwgYXJvdW5kLm5hbWUgPT0gXCJUZXh0XCIgfHwgYXJvdW5kLm5hbWUgPT0gXCJEb2N1bWVudFwiKSkge1xuICAgICAgICByZXR1cm4gY29tcGxldGVTdGFydFRhZyhzdGF0ZSwgc2NoZW1hLCB0cmVlLCBwb3MpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuLyoqXG5IVE1MIHRhZyBjb21wbGV0aW9uLiBPcGVucyBhbmQgY2xvc2VzIHRhZ3MgYW5kIGF0dHJpYnV0ZXMgaW4gYVxuY29udGV4dC1hd2FyZSB3YXkuXG4qL1xuZnVuY3Rpb24gaHRtbENvbXBsZXRpb25Tb3VyY2UoY29udGV4dCkge1xuICAgIHJldHVybiBodG1sQ29tcGxldGlvbkZvcihTY2hlbWEuZGVmYXVsdCwgY29udGV4dCk7XG59XG4vKipcbkNyZWF0ZSBhIGNvbXBsZXRpb24gc291cmNlIGZvciBIVE1MIGV4dGVuZGVkIHdpdGggYWRkaXRpb25hbCB0YWdzXG5vciBhdHRyaWJ1dGVzLlxuKi9cbmZ1bmN0aW9uIGh0bWxDb21wbGV0aW9uU291cmNlV2l0aChjb25maWcpIHtcbiAgICBsZXQgeyBleHRyYVRhZ3MsIGV4dHJhR2xvYmFsQXR0cmlidXRlczogZXh0cmFBdHRycyB9ID0gY29uZmlnO1xuICAgIGxldCBzY2hlbWEgPSBleHRyYUF0dHJzIHx8IGV4dHJhVGFncyA/IG5ldyBTY2hlbWEoZXh0cmFUYWdzLCBleHRyYUF0dHJzKSA6IFNjaGVtYS5kZWZhdWx0O1xuICAgIHJldHVybiAoY29udGV4dCkgPT4gaHRtbENvbXBsZXRpb25Gb3Ioc2NoZW1hLCBjb250ZXh0KTtcbn1cblxuLyoqXG5BIGxhbmd1YWdlIHByb3ZpZGVyIGJhc2VkIG9uIHRoZSBbTGV6ZXIgSFRNTFxucGFyc2VyXShodHRwczovL2dpdGh1Yi5jb20vbGV6ZXItcGFyc2VyL2h0bWwpLCBleHRlbmRlZCB3aXRoIHRoZVxuSmF2YVNjcmlwdCBhbmQgQ1NTIHBhcnNlcnMgdG8gcGFyc2UgdGhlIGNvbnRlbnQgb2YgYDxzY3JpcHQ+YCBhbmRcbmA8c3R5bGU+YCB0YWdzLlxuKi9cbmNvbnN0IGh0bWxMYW5ndWFnZSA9IC8qQF9fUFVSRV9fKi9MUkxhbmd1YWdlLmRlZmluZSh7XG4gICAgbmFtZTogXCJodG1sXCIsXG4gICAgcGFyc2VyOiAvKkBfX1BVUkVfXyovcGFyc2VyLmNvbmZpZ3VyZSh7XG4gICAgICAgIHByb3BzOiBbXG4gICAgICAgICAgICAvKkBfX1BVUkVfXyovaW5kZW50Tm9kZVByb3AuYWRkKHtcbiAgICAgICAgICAgICAgICBFbGVtZW50KGNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFmdGVyID0gL14oXFxzKikoPFxcLyk/Ly5leGVjKGNvbnRleHQudGV4dEFmdGVyKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRleHQubm9kZS50byA8PSBjb250ZXh0LnBvcyArIGFmdGVyWzBdLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmNvbnRpbnVlKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmxpbmVJbmRlbnQoY29udGV4dC5ub2RlLmZyb20pICsgKGFmdGVyWzJdID8gMCA6IGNvbnRleHQudW5pdCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcIk9wZW5UYWcgQ2xvc2VUYWcgU2VsZkNsb3NpbmdUYWdcIihjb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmNvbHVtbihjb250ZXh0Lm5vZGUuZnJvbSkgKyBjb250ZXh0LnVuaXQ7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBEb2N1bWVudChjb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZXh0LnBvcyArIC9cXHMqLy5leGVjKGNvbnRleHQudGV4dEFmdGVyKVswXS5sZW5ndGggPCBjb250ZXh0Lm5vZGUudG8pXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5jb250aW51ZSgpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgZW5kRWx0ID0gbnVsbCwgY2xvc2U7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGN1ciA9IGNvbnRleHQubm9kZTs7KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbGFzdCA9IGN1ci5sYXN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxhc3QgfHwgbGFzdC5uYW1lICE9IFwiRWxlbWVudFwiIHx8IGxhc3QudG8gIT0gY3VyLnRvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5kRWx0ID0gY3VyID0gbGFzdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZW5kRWx0ICYmICEoKGNsb3NlID0gZW5kRWx0Lmxhc3RDaGlsZCkgJiYgKGNsb3NlLm5hbWUgPT0gXCJDbG9zZVRhZ1wiIHx8IGNsb3NlLm5hbWUgPT0gXCJTZWxmQ2xvc2luZ1RhZ1wiKSkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5saW5lSW5kZW50KGVuZEVsdC5mcm9tKSArIGNvbnRleHQudW5pdDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAvKkBfX1BVUkVfXyovZm9sZE5vZGVQcm9wLmFkZCh7XG4gICAgICAgICAgICAgICAgRWxlbWVudChub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmaXJzdCA9IG5vZGUuZmlyc3RDaGlsZCwgbGFzdCA9IG5vZGUubGFzdENoaWxkO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpcnN0IHx8IGZpcnN0Lm5hbWUgIT0gXCJPcGVuVGFnXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZnJvbTogZmlyc3QudG8sIHRvOiBsYXN0Lm5hbWUgPT0gXCJDbG9zZVRhZ1wiID8gbGFzdC5mcm9tIDogbm9kZS50byB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIF0sXG4gICAgICAgIHdyYXA6IC8qQF9fUFVSRV9fKi9jb25maWd1cmVOZXN0aW5nKFtcbiAgICAgICAgICAgIHsgdGFnOiBcInNjcmlwdFwiLFxuICAgICAgICAgICAgICAgIGF0dHJzOiBhdHRycyA9PiBhdHRycy50eXBlID09IFwidGV4dC90eXBlc2NyaXB0XCIgfHwgYXR0cnMubGFuZyA9PSBcInRzXCIsXG4gICAgICAgICAgICAgICAgcGFyc2VyOiB0eXBlc2NyaXB0TGFuZ3VhZ2UucGFyc2VyIH0sXG4gICAgICAgICAgICB7IHRhZzogXCJzY3JpcHRcIixcbiAgICAgICAgICAgICAgICBhdHRyczogYXR0cnMgPT4gYXR0cnMudHlwZSA9PSBcInRleHQvanN4XCIsXG4gICAgICAgICAgICAgICAgcGFyc2VyOiBqc3hMYW5ndWFnZS5wYXJzZXIgfSxcbiAgICAgICAgICAgIHsgdGFnOiBcInNjcmlwdFwiLFxuICAgICAgICAgICAgICAgIGF0dHJzOiBhdHRycyA9PiBhdHRycy50eXBlID09IFwidGV4dC90eXBlc2NyaXB0LWpzeFwiLFxuICAgICAgICAgICAgICAgIHBhcnNlcjogdHN4TGFuZ3VhZ2UucGFyc2VyIH0sXG4gICAgICAgICAgICB7IHRhZzogXCJzY3JpcHRcIixcbiAgICAgICAgICAgICAgICBhdHRycyhhdHRycykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWF0dHJzLnR5cGUgfHwgL14oPzp0ZXh0fGFwcGxpY2F0aW9uKVxcLyg/OngtKT8oPzpqYXZhfGVjbWEpc2NyaXB0JHxebW9kdWxlJHxeJC9pLnRlc3QoYXR0cnMudHlwZSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwYXJzZXI6IGphdmFzY3JpcHRMYW5ndWFnZS5wYXJzZXIgfSxcbiAgICAgICAgICAgIHsgdGFnOiBcInN0eWxlXCIsXG4gICAgICAgICAgICAgICAgYXR0cnMoYXR0cnMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICghYXR0cnMubGFuZyB8fCBhdHRycy5sYW5nID09IFwiY3NzXCIpICYmICghYXR0cnMudHlwZSB8fCAvXih0ZXh0XFwvKT8oeC0pPyhzdHlsZXNoZWV0fGNzcykkL2kudGVzdChhdHRycy50eXBlKSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwYXJzZXI6IGNzc0xhbmd1YWdlLnBhcnNlciB9XG4gICAgICAgIF0pXG4gICAgfSksXG4gICAgbGFuZ3VhZ2VEYXRhOiB7XG4gICAgICAgIGNvbW1lbnRUb2tlbnM6IHsgYmxvY2s6IHsgb3BlbjogXCI8IS0tXCIsIGNsb3NlOiBcIi0tPlwiIH0gfSxcbiAgICAgICAgaW5kZW50T25JbnB1dDogL15cXHMqPFxcL1xcdytcXFckLyxcbiAgICAgICAgd29yZENoYXJzOiBcIi0uX1wiXG4gICAgfVxufSk7XG4vKipcbkxhbmd1YWdlIHN1cHBvcnQgZm9yIEhUTUwsIGluY2x1ZGluZ1xuW2BodG1sQ29tcGxldGlvbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZy1odG1sLmh0bWxDb21wbGV0aW9uKSBhbmQgSmF2YVNjcmlwdCBhbmRcbkNTUyBzdXBwb3J0IGV4dGVuc2lvbnMuXG4qL1xuZnVuY3Rpb24gaHRtbChjb25maWcgPSB7fSkge1xuICAgIGxldCBsYW5nID0gaHRtbExhbmd1YWdlO1xuICAgIGlmIChjb25maWcubWF0Y2hDbG9zaW5nVGFncyA9PT0gZmFsc2UpXG4gICAgICAgIGxhbmcgPSBsYW5nLmNvbmZpZ3VyZSh7IGRpYWxlY3Q6IFwibm9NYXRjaFwiIH0pO1xuICAgIHJldHVybiBuZXcgTGFuZ3VhZ2VTdXBwb3J0KGxhbmcsIFtcbiAgICAgICAgaHRtbExhbmd1YWdlLmRhdGEub2YoeyBhdXRvY29tcGxldGU6IGh0bWxDb21wbGV0aW9uU291cmNlV2l0aChjb25maWcpIH0pLFxuICAgICAgICBjb25maWcuYXV0b0Nsb3NlVGFncyAhPT0gZmFsc2UgPyBhdXRvQ2xvc2VUYWdzIDogW10sXG4gICAgICAgIGphdmFzY3JpcHQoKS5zdXBwb3J0LFxuICAgICAgICBjc3MoKS5zdXBwb3J0XG4gICAgXSk7XG59XG4vKipcbkV4dGVuc2lvbiB0aGF0IHdpbGwgYXV0b21hdGljYWxseSBpbnNlcnQgY2xvc2UgdGFncyB3aGVuIGEgYD5gIG9yXG5gL2AgaXMgdHlwZWQuXG4qL1xuY29uc3QgYXV0b0Nsb3NlVGFncyA9IC8qQF9fUFVSRV9fKi9FZGl0b3JWaWV3LmlucHV0SGFuZGxlci5vZigodmlldywgZnJvbSwgdG8sIHRleHQpID0+IHtcbiAgICBpZiAodmlldy5jb21wb3NpbmcgfHwgdmlldy5zdGF0ZS5yZWFkT25seSB8fCBmcm9tICE9IHRvIHx8ICh0ZXh0ICE9IFwiPlwiICYmIHRleHQgIT0gXCIvXCIpIHx8XG4gICAgICAgICFodG1sTGFuZ3VhZ2UuaXNBY3RpdmVBdCh2aWV3LnN0YXRlLCBmcm9tLCAtMSkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgeyBzdGF0ZSB9ID0gdmlldztcbiAgICBsZXQgY2hhbmdlcyA9IHN0YXRlLmNoYW5nZUJ5UmFuZ2UocmFuZ2UgPT4ge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgbGV0IHsgaGVhZCB9ID0gcmFuZ2UsIGFyb3VuZCA9IHN5bnRheFRyZWUoc3RhdGUpLnJlc29sdmVJbm5lcihoZWFkLCAtMSksIG5hbWU7XG4gICAgICAgIGlmIChhcm91bmQubmFtZSA9PSBcIlRhZ05hbWVcIiB8fCBhcm91bmQubmFtZSA9PSBcIlN0YXJ0VGFnXCIpXG4gICAgICAgICAgICBhcm91bmQgPSBhcm91bmQucGFyZW50O1xuICAgICAgICBpZiAodGV4dCA9PSBcIj5cIiAmJiBhcm91bmQubmFtZSA9PSBcIk9wZW5UYWdcIikge1xuICAgICAgICAgICAgaWYgKCgoX2IgPSAoX2EgPSBhcm91bmQucGFyZW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubGFzdENoaWxkKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IubmFtZSkgIT0gXCJDbG9zZVRhZ1wiICYmIChuYW1lID0gZWxlbWVudE5hbWUoc3RhdGUuZG9jLCBhcm91bmQucGFyZW50LCBoZWFkKSkpIHtcbiAgICAgICAgICAgICAgICBsZXQgaGFzUmlnaHRCcmFja2V0ID0gdmlldy5zdGF0ZS5kb2Muc2xpY2VTdHJpbmcoaGVhZCwgaGVhZCArIDEpID09PSBcIj5cIjtcbiAgICAgICAgICAgICAgICBsZXQgaW5zZXJ0ID0gYCR7aGFzUmlnaHRCcmFja2V0ID8gXCJcIiA6IFwiPlwifTwvJHtuYW1lfT5gO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHJhbmdlOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKGhlYWQgKyAxKSwgY2hhbmdlczogeyBmcm9tOiBoZWFkICsgKGhhc1JpZ2h0QnJhY2tldCA/IDEgOiAwKSwgaW5zZXJ0IH0gfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0ZXh0ID09IFwiL1wiICYmIGFyb3VuZC5uYW1lID09IFwiT3BlblRhZ1wiKSB7XG4gICAgICAgICAgICBsZXQgZW1wdHkgPSBhcm91bmQucGFyZW50LCBiYXNlID0gZW1wdHkgPT09IG51bGwgfHwgZW1wdHkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVtcHR5LnBhcmVudDtcbiAgICAgICAgICAgIGlmIChlbXB0eS5mcm9tID09IGhlYWQgLSAxICYmICgoX2MgPSBiYXNlLmxhc3RDaGlsZCkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLm5hbWUpICE9IFwiQ2xvc2VUYWdcIiAmJiAobmFtZSA9IGVsZW1lbnROYW1lKHN0YXRlLmRvYywgYmFzZSwgaGVhZCkpKSB7XG4gICAgICAgICAgICAgICAgbGV0IGhhc1JpZ2h0QnJhY2tldCA9IHZpZXcuc3RhdGUuZG9jLnNsaWNlU3RyaW5nKGhlYWQsIGhlYWQgKyAxKSA9PT0gXCI+XCI7XG4gICAgICAgICAgICAgICAgbGV0IGluc2VydCA9IGAvJHtuYW1lfSR7aGFzUmlnaHRCcmFja2V0ID8gXCJcIiA6IFwiPlwifWA7XG4gICAgICAgICAgICAgICAgbGV0IHBvcyA9IGhlYWQgKyBpbnNlcnQubGVuZ3RoICsgKGhhc1JpZ2h0QnJhY2tldCA/IDEgOiAwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyByYW5nZTogRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihwb3MpLCBjaGFuZ2VzOiB7IGZyb206IGhlYWQsIGluc2VydCB9IH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgcmFuZ2UgfTtcbiAgICB9KTtcbiAgICBpZiAoY2hhbmdlcy5jaGFuZ2VzLmVtcHR5KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdmlldy5kaXNwYXRjaChjaGFuZ2VzLCB7IHVzZXJFdmVudDogXCJpbnB1dC50eXBlXCIsIHNjcm9sbEludG9WaWV3OiB0cnVlIH0pO1xuICAgIHJldHVybiB0cnVlO1xufSk7XG5cbmV4cG9ydCB7IGF1dG9DbG9zZVRhZ3MsIGh0bWwsIGh0bWxDb21wbGV0aW9uU291cmNlLCBodG1sQ29tcGxldGlvblNvdXJjZVdpdGgsIGh0bWxMYW5ndWFnZSB9O1xuIiwgImltcG9ydCB7IENvbnRleHRUcmFja2VyLCBFeHRlcm5hbFRva2VuaXplciwgTFJQYXJzZXIgfSBmcm9tICdAbGV6ZXIvbHInO1xuaW1wb3J0IHsgc3R5bGVUYWdzLCB0YWdzIH0gZnJvbSAnQGxlemVyL2hpZ2hsaWdodCc7XG5cbi8vIFRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IGxlemVyLWdlbmVyYXRvci4gWW91IHByb2JhYmx5IHNob3VsZG4ndCBlZGl0IGl0LlxuY29uc3QgU3RhcnRUYWcgPSAxLFxuICBTdGFydENsb3NlVGFnID0gMixcbiAgTWlzc2luZ0Nsb3NlVGFnID0gMyxcbiAgbWlzbWF0Y2hlZFN0YXJ0Q2xvc2VUYWcgPSA0LFxuICBpbmNvbXBsZXRlU3RhcnRDbG9zZVRhZyA9IDUsXG4gIGNvbW1lbnRDb250ZW50JDEgPSAzNSxcbiAgcGlDb250ZW50JDEgPSAzNixcbiAgY2RhdGFDb250ZW50JDEgPSAzNyxcbiAgRWxlbWVudCA9IDExLFxuICBPcGVuVGFnID0gMTM7XG5cbi8qIEhhbmQtd3JpdHRlbiB0b2tlbml6ZXIgZm9yIFhNTCB0YWcgbWF0Y2hpbmcuICovXG5cbmZ1bmN0aW9uIG5hbWVDaGFyKGNoKSB7XG4gIHJldHVybiBjaCA9PSA0NSB8fCBjaCA9PSA0NiB8fCBjaCA9PSA1OCB8fCBjaCA+PSA2NSAmJiBjaCA8PSA5MCB8fCBjaCA9PSA5NSB8fCBjaCA+PSA5NyAmJiBjaCA8PSAxMjIgfHwgY2ggPj0gMTYxXG59XG5cbmZ1bmN0aW9uIGlzU3BhY2UoY2gpIHtcbiAgcmV0dXJuIGNoID09IDkgfHwgY2ggPT0gMTAgfHwgY2ggPT0gMTMgfHwgY2ggPT0gMzJcbn1cblxubGV0IGNhY2hlZE5hbWUgPSBudWxsLCBjYWNoZWRJbnB1dCA9IG51bGwsIGNhY2hlZFBvcyA9IDA7XG5mdW5jdGlvbiB0YWdOYW1lQWZ0ZXIoaW5wdXQsIG9mZnNldCkge1xuICBsZXQgcG9zID0gaW5wdXQucG9zICsgb2Zmc2V0O1xuICBpZiAoY2FjaGVkSW5wdXQgPT0gaW5wdXQgJiYgY2FjaGVkUG9zID09IHBvcykgcmV0dXJuIGNhY2hlZE5hbWVcbiAgd2hpbGUgKGlzU3BhY2UoaW5wdXQucGVlayhvZmZzZXQpKSkgb2Zmc2V0Kys7XG4gIGxldCBuYW1lID0gXCJcIjtcbiAgZm9yICg7Oykge1xuICAgIGxldCBuZXh0ID0gaW5wdXQucGVlayhvZmZzZXQpO1xuICAgIGlmICghbmFtZUNoYXIobmV4dCkpIGJyZWFrXG4gICAgbmFtZSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKG5leHQpO1xuICAgIG9mZnNldCsrO1xuICB9XG4gIGNhY2hlZElucHV0ID0gaW5wdXQ7IGNhY2hlZFBvcyA9IHBvcztcbiAgcmV0dXJuIGNhY2hlZE5hbWUgPSBuYW1lIHx8IG51bGxcbn1cblxuZnVuY3Rpb24gRWxlbWVudENvbnRleHQobmFtZSwgcGFyZW50KSB7XG4gIHRoaXMubmFtZSA9IG5hbWU7XG4gIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICB0aGlzLmhhc2ggPSBwYXJlbnQgPyBwYXJlbnQuaGFzaCA6IDA7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbmFtZS5sZW5ndGg7IGkrKykgdGhpcy5oYXNoICs9ICh0aGlzLmhhc2ggPDwgNCkgKyBuYW1lLmNoYXJDb2RlQXQoaSkgKyAobmFtZS5jaGFyQ29kZUF0KGkpIDw8IDgpO1xufVxuXG5jb25zdCBlbGVtZW50Q29udGV4dCA9IG5ldyBDb250ZXh0VHJhY2tlcih7XG4gIHN0YXJ0OiBudWxsLFxuICBzaGlmdChjb250ZXh0LCB0ZXJtLCBzdGFjaywgaW5wdXQpIHtcbiAgICByZXR1cm4gdGVybSA9PSBTdGFydFRhZyA/IG5ldyBFbGVtZW50Q29udGV4dCh0YWdOYW1lQWZ0ZXIoaW5wdXQsIDEpIHx8IFwiXCIsIGNvbnRleHQpIDogY29udGV4dFxuICB9LFxuICByZWR1Y2UoY29udGV4dCwgdGVybSkge1xuICAgIHJldHVybiB0ZXJtID09IEVsZW1lbnQgJiYgY29udGV4dCA/IGNvbnRleHQucGFyZW50IDogY29udGV4dFxuICB9LFxuICByZXVzZShjb250ZXh0LCBub2RlLCBfc3RhY2ssIGlucHV0KSB7XG4gICAgbGV0IHR5cGUgPSBub2RlLnR5cGUuaWQ7XG4gICAgcmV0dXJuIHR5cGUgPT0gU3RhcnRUYWcgfHwgdHlwZSA9PSBPcGVuVGFnXG4gICAgICA/IG5ldyBFbGVtZW50Q29udGV4dCh0YWdOYW1lQWZ0ZXIoaW5wdXQsIDEpIHx8IFwiXCIsIGNvbnRleHQpIDogY29udGV4dFxuICB9LFxuICBoYXNoKGNvbnRleHQpIHsgcmV0dXJuIGNvbnRleHQgPyBjb250ZXh0Lmhhc2ggOiAwIH0sXG4gIHN0cmljdDogZmFsc2Vcbn0pO1xuXG5jb25zdCBzdGFydFRhZyA9IG5ldyBFeHRlcm5hbFRva2VuaXplcigoaW5wdXQsIHN0YWNrKSA9PiB7XG4gIGlmIChpbnB1dC5uZXh0ICE9IDYwIC8qICc8JyAqLykgcmV0dXJuXG4gIGlucHV0LmFkdmFuY2UoKTtcbiAgaWYgKGlucHV0Lm5leHQgPT0gNDcgLyogJy8nICovKSB7XG4gICAgaW5wdXQuYWR2YW5jZSgpO1xuICAgIGxldCBuYW1lID0gdGFnTmFtZUFmdGVyKGlucHV0LCAwKTtcbiAgICBpZiAoIW5hbWUpIHJldHVybiBpbnB1dC5hY2NlcHRUb2tlbihpbmNvbXBsZXRlU3RhcnRDbG9zZVRhZylcbiAgICBpZiAoc3RhY2suY29udGV4dCAmJiBuYW1lID09IHN0YWNrLmNvbnRleHQubmFtZSkgcmV0dXJuIGlucHV0LmFjY2VwdFRva2VuKFN0YXJ0Q2xvc2VUYWcpXG4gICAgZm9yIChsZXQgY3ggPSBzdGFjay5jb250ZXh0OyBjeDsgY3ggPSBjeC5wYXJlbnQpIGlmIChjeC5uYW1lID09IG5hbWUpIHJldHVybiBpbnB1dC5hY2NlcHRUb2tlbihNaXNzaW5nQ2xvc2VUYWcsIC0yKVxuICAgIGlucHV0LmFjY2VwdFRva2VuKG1pc21hdGNoZWRTdGFydENsb3NlVGFnKTtcbiAgfSBlbHNlIGlmIChpbnB1dC5uZXh0ICE9IDMzIC8qICchJyAqLyAmJiBpbnB1dC5uZXh0ICE9IDYzIC8qICc/JyAqLykge1xuICAgIHJldHVybiBpbnB1dC5hY2NlcHRUb2tlbihTdGFydFRhZylcbiAgfVxufSwge2NvbnRleHR1YWw6IHRydWV9KTtcblxuZnVuY3Rpb24gc2NhblRvKHR5cGUsIGVuZCkge1xuICByZXR1cm4gbmV3IEV4dGVybmFsVG9rZW5pemVyKGlucHV0ID0+IHtcbiAgICBmb3IgKGxldCBlbmRQb3MgPSAwLCBsZW4gPSAwOzsgbGVuKyspIHtcbiAgICAgIGlmIChpbnB1dC5uZXh0IDwgMCkge1xuICAgICAgICBpZiAobGVuKSBpbnB1dC5hY2NlcHRUb2tlbih0eXBlKTtcbiAgICAgICAgYnJlYWtcbiAgICAgIH0gXG4gICAgICBpZiAoaW5wdXQubmV4dCA9PSBlbmQuY2hhckNvZGVBdChlbmRQb3MpKSB7XG4gICAgICAgIGVuZFBvcysrO1xuICAgICAgICBpZiAoZW5kUG9zID09IGVuZC5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAobGVuID4gZW5kLmxlbmd0aCkgaW5wdXQuYWNjZXB0VG9rZW4odHlwZSwgMSAtIGVuZC5sZW5ndGgpO1xuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVuZFBvcyA9IGlucHV0Lm5leHQgPT0gZW5kLmNoYXJDb2RlQXQoMCkgPyAxIDogMDtcbiAgICAgIH1cbiAgICAgIGlucHV0LmFkdmFuY2UoKTtcbiAgICB9XG4gIH0pXG59XG5cbmNvbnN0IGNvbW1lbnRDb250ZW50ID0gc2NhblRvKGNvbW1lbnRDb250ZW50JDEsIFwiLS0+XCIpO1xuY29uc3QgcGlDb250ZW50ID0gc2NhblRvKHBpQ29udGVudCQxLCBcIj8+XCIpO1xuY29uc3QgY2RhdGFDb250ZW50ID0gc2NhblRvKGNkYXRhQ29udGVudCQxLCBcIl1dPlwiKTtcblxuY29uc3QgeG1sSGlnaGxpZ2h0aW5nID0gc3R5bGVUYWdzKHtcbiAgVGV4dDogdGFncy5jb250ZW50LFxuICBcIlN0YXJ0VGFnIFN0YXJ0Q2xvc2VUYWcgRW5kVGFnIFNlbGZDbG9zZUVuZFRhZ1wiOiB0YWdzLmFuZ2xlQnJhY2tldCxcbiAgVGFnTmFtZTogdGFncy50YWdOYW1lLFxuICBcIk1pc21hdGNoZWRDbG9zZVRhZy9UYWduYW1lXCI6IFt0YWdzLnRhZ05hbWUsIHRhZ3MuaW52YWxpZF0sXG4gIEF0dHJpYnV0ZU5hbWU6IHRhZ3MuYXR0cmlidXRlTmFtZSxcbiAgQXR0cmlidXRlVmFsdWU6IHRhZ3MuYXR0cmlidXRlVmFsdWUsXG4gIElzOiB0YWdzLmRlZmluaXRpb25PcGVyYXRvcixcbiAgXCJFbnRpdHlSZWZlcmVuY2UgQ2hhcmFjdGVyUmVmZXJlbmNlXCI6IHRhZ3MuY2hhcmFjdGVyLFxuICBDb21tZW50OiB0YWdzLmJsb2NrQ29tbWVudCxcbiAgUHJvY2Vzc2luZ0luc3Q6IHRhZ3MucHJvY2Vzc2luZ0luc3RydWN0aW9uLFxuICBEb2N0eXBlRGVjbDogdGFncy5kb2N1bWVudE1ldGEsXG4gIENkYXRhOiB0YWdzLnNwZWNpYWwodGFncy5zdHJpbmcpXG59KTtcblxuLy8gVGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgbGV6ZXItZ2VuZXJhdG9yLiBZb3UgcHJvYmFibHkgc2hvdWxkbid0IGVkaXQgaXQuXG5jb25zdCBwYXJzZXIgPSBMUlBhcnNlci5kZXNlcmlhbGl6ZSh7XG4gIHZlcnNpb246IDE0LFxuICBzdGF0ZXM6IFwiLFNPUU9hT09Pck94TycjQ2ZPek9wTycjQ2lPIXRPYU8nI0NnT09PUCcjQ2cnI0NnTyF7T3JPJyNDck8jVE90TycjQ3NPI11PcE8nI0N0T09PUCcjRFMnI0RTT09PUCcjQ3YnI0N2UVFPYU9PT09PVycjQ3cnI0N3TyNlT3hPLDU5UU9PT1AsNTlRLDU5UU9PT08nI0N4JyNDeE8jbU9wTyw1OVRPI3VPIWJPLDU5VE9PT1AnI0N7JyNDe08kVE9hTyw1OVJPJFtPcE8nI0NvT09PUCw1OVIsNTlST09PUScjQ3wnI0N8TyRkT3JPLDU5Xk9PT1AsNTleLDU5Xk9PT1MnI0N9JyNDfU8kbE90Tyw1OV9PT09QLDU5Xyw1OV9PJHRPcE8sNTlgTyR8T3BPLDU5YE9PT1AtRTZ0LUU2dE9PT1ctRTZ1LUU2dU9PT1AxRy5sMUcubE9PT08tRTZ2LUU2dk8lVU8hYk8xRy5vTyVVTyFiTzFHLm9PJWRPcE8nI0NrTyVsTyFiTycjQ3lPJXpPIWJPMUcub09PT1AxRy5vMUcub09PT1AxRy53MUcud09PT1AtRTZ5LUU2eU9PT1AxRy5tMUcubU8mVk9wTyw1OVpPJl9PcE8sNTlaT09PUS1FNnotRTZ6T09PUDFHLngxRy54T09PUy1FNnstRTZ7T09PUDFHLnkxRy55TyZnT3BPMUcuek8mZ09wTzFHLnpPT09QMUcuejFHLnpPJm9PIWJPNyskWk8mfU8hYk83KyRaT09PUDcrJFo3KyRaT09PUDcrJGM3KyRjTydZT3BPLDU5Vk8nYk9wTyw1OVZPJ2pPIWJPLDU5ZU9PT08tRTZ3LUU2d08neE9wTzFHLnVPJ3hPcE8xRy51T09PUDFHLnUxRy51TyhRT3BPNyskZk9PT1A3KyRmNyskZk8oWU8hYk88PEd1T09PUDw8R3U8PEd1T09PUDw8R308PEd9TydiT3BPMUcucU8nYk9wTzFHLnFPKGVPI3RPJyNDbk9PT08xRy5xMUcucU8oc09wTzcrJGFPT09QNyskYTcrJGFPT09QPDxIUTw8SFFPT09QQU49YUFOPWFPT09QQU49aUFOPWlPJ2JPcE83KyRdT09PTzcrJF03KyRdT09PTycjQ3onI0N6Tyh7TyN0Tyw1OVlPT09PLDU5WSw1OVlPT09QPDxHezw8R3tPT09PPDxHdzw8R3dPT09PLUU2eC1FNnhPT09PMUcudDFHLnRcIixcbiAgc3RhdGVEYXRhOiBcIilafk9QUU9TVk9UV09WV09XV09YV09pWE94UE99VE8hUFVPfk91Wk93XU9+T15gT3leT35PUFFPUWNPU1ZPVFdPVldPV1dPWFdPeFBPfVRPIVBVT35PUmRPflAhU09zZU98Z09+T3RoTyFPak9+T15sT3leT35PdVpPd29Pfk9ecU95Xk9+T1t2T2BzT2R3T3leT35PUnlPflAhU09ee095Xk9+T3NlT3x9T35PdGhPIU8hUE9+T14hUU95Xk9+T1shU095Xk9+T1shVk9gc09kIVdPeV5Pfk9hIVlPeV5Pfk95Xk9bbVhgbVhkbVh+T1shVk9gc09kIVdPfk9eIV1PeV5Pfk9bIV9PeV5Pfk9bIWFPeV5Pfk9bIWNPYHNPZCFkT3leT35PWyFjT2BzT2QhZE9+T2EhZU95Xk9+T3leT3ohZ09+T3leT1ttYWBtYWRtYX5PWyFqT3leT35PWyFrT3leT35PWyFsT2BzT2QhbU9+T1chcE9YIXBPeiFyT3shcE9+T1shc095Xk9+T1chcE9YIXBPeiF2T3shcE9+T1wiLFxuICBnb3RvOiBcIiVbd1BQUFBQUFBQUFB4eFAhT1AhVVBQIV8haVAhb3h4eFAhdSF7I1IkWiRqJHAkdiR8UFBQUCVTWFdPUlliWFJPUlliX3RgcXJ1IVQhVSFiUSFoIVlTIW8hZSFmUiF0IW5RZFJSeWJYU09SWWJRWU9SbVlRW1BSbltRX1FRa1ZqcF9rcnohUiFUIVghWiFeIWAhZiFpIW5RcmBRemNRIVJsUSFUcVEhWHNRIVp0USFee1EhYCFRUSFmIVlRIWkhXVIhbiFlUXVgUyFVcXJVIVt1IVUhYlIhYiFUUSFxIWdSIXUhcVFiUlJ4YlFmVFJ8ZlFpVVIhT2lTWE9ZVGFSYlwiLFxuICBub2RlTmFtZXM6IFwiXHUyNkEwIFN0YXJ0VGFnIFN0YXJ0Q2xvc2VUYWcgTWlzc2luZ0Nsb3NlVGFnIFN0YXJ0Q2xvc2VUYWcgU3RhcnRDbG9zZVRhZyBEb2N1bWVudCBUZXh0IEVudGl0eVJlZmVyZW5jZSBDaGFyYWN0ZXJSZWZlcmVuY2UgQ2RhdGEgRWxlbWVudCBFbmRUYWcgT3BlblRhZyBUYWdOYW1lIEF0dHJpYnV0ZSBBdHRyaWJ1dGVOYW1lIElzIEF0dHJpYnV0ZVZhbHVlIENsb3NlVGFnIFNlbGZDbG9zZUVuZFRhZyBTZWxmQ2xvc2luZ1RhZyBDb21tZW50IFByb2Nlc3NpbmdJbnN0IE1pc21hdGNoZWRDbG9zZVRhZyBEb2N0eXBlRGVjbFwiLFxuICBtYXhUZXJtOiA0NyxcbiAgY29udGV4dDogZWxlbWVudENvbnRleHQsXG4gIG5vZGVQcm9wczogW1xuICAgIFtcImNsb3NlZEJ5XCIsIDEsXCJTZWxmQ2xvc2VFbmRUYWcgRW5kVGFnXCIsMTMsXCJDbG9zZVRhZyBNaXNzaW5nQ2xvc2VUYWdcIl0sXG4gICAgW1wib3BlbmVkQnlcIiwgMTIsXCJTdGFydFRhZyBTdGFydENsb3NlVGFnXCIsMTksXCJPcGVuVGFnXCIsMjAsXCJTdGFydFRhZ1wiXVxuICBdLFxuICBwcm9wU291cmNlczogW3htbEhpZ2hsaWdodGluZ10sXG4gIHNraXBwZWROb2RlczogWzBdLFxuICByZXBlYXROb2RlQ291bnQ6IDgsXG4gIHRva2VuRGF0YTogXCJBen5SIVdPWCRrWFklcllaJXJaXSRrXV4lcl5wJGtwcSVycXIka3JzJnRzdiRrdncnVXd9JGt9IU8ocSFPIVAkayFQIVEqbiFRIVskayFbIV0reiFdIV4kayFeIV8vcyFfIWA9aSFgIWE+VSFhIWI+cSFiIWMkayFjIX0reiF9I1AkayNQI1E/fSNRI1IkayNSI1MreiNTI1QkayNUI28reiNvJVckayVXJW8reiVvJXAkayVwJmEreiZhJmIkayZiMXArejFwNFUkazRVNGQrejRkNGUkazRlJElTK3okSVMkSWAkayRJYCRJYit6JEliJEtoJGskS2glI3QreiUjdCYveCRrJi94JkV0K3omRXQmRlYkayZGVjsnUyt6OydTOzpqL1M7Omo/JnIkaz8mcj9BaCt6P0FoP0JZJGs/Qlk/TW4rej9Nbn4ka1gkclVWUHtXT3Ika3JzJVVzdiRrdyFeJGshXiFfJWQhX34ka1AlWlJWUE92JVV3IV4lVSFffiVVVyVpUntXT3IlZHN2JWR3fiVkXyV7XVZQe1d5VU9YJGtYWSVyWVolclpdJGtdXiVyXnAka3BxJXJxciRrcnMlVXN2JGt3IV4kayFeIV8lZCFffiRrWiZ7UnpZVlBPdiVVdyFeJVUhX34lVX4nWFRPcCdocXMnaHN0KFB0IV0naCFefidofidrVE9wJ2hxcydodCFdJ2ghXSFeJ3ohXn4naH4oUE9Xfn4oU1JPcChdcSFdKF0hXn4oXX4oYFNPcChdcSFdKF0hXSFeKGwhXn4oXX4ocU9YflooeFdWUHtXT3Ika3JzJVVzdiRrd30ka30hTyliIU8hXiRrIV4hXyVkIV9+JGtaKWlXVlB7V09yJGtycyVVc3Yka3chXiRrIV4hXyVkIV8hYCRrIWAhYSpSIWF+JGtaKltVfFFWUHtXT3Ika3JzJVVzdiRrdyFeJGshXiFfJWQhX34ka10qdVdWUHtXT3Ika3JzJVVzdiRrdyFeJGshXiFfJWQhXyFgJGshYCFhK18hYX4ka10raFVkU1ZQe1dPciRrcnMlVXN2JGt3IV4kayFeIV8lZCFffiRrXyxWfWBTXlFWUHtXT3Ika3JzJVVzdiRrd30ka30hTyt6IU8hUCt6IVAhUSRrIVEhWyt6IVshXSt6IV0hXiRrIV4hXyVkIV8hYyRrIWMhfSt6IX0jUiRrI1IjUyt6I1MjVCRrI1Qjbyt6I28kfSRrJH0lTyt6JU8lVyRrJVclbyt6JW8lcCRrJXAmYSt6JmEmYiRrJmIxcCt6MXA0VSt6NFU0ZCt6NGQ0ZSRrNGUkSVMreiRJUyRJYCRrJElgJEliK3okSWIkSmUkayRKZSRKZyt6JEpnJEtoJGskS2glI3QreiUjdCYveCRrJi94JkV0K3omRXQmRlYkayZGVjsnUyt6OydTOzpqL1M7Omo/JnIkaz8mcj9BaCt6P0FoP0JZJGs/Qlk/TW4rej9Nbn4ka18vWldWUHtXT3Ika3JzJVVzdiRrdyFeJGshXiFfJWQhXzs9YCRrOz1gPCVsK3o8JWx+JGtYL3hVe1dPcSVkcXIwW3N2JWR3IWElZCFhIWI9WCFifiVkWDBhWntXT3IlZHN2JWR3fSVkfSFPMVMhTyFmJWQhZiFnMXghZyF9JWQhfSNPNXMjTyNXJWQjVyNYOmsjWH4lZFgxWFR7V09yJWRzdiVkd30lZH0hTzFoIU9+JWRYMW9SfVB7V09yJWRzdiVkd34lZFgxfVR7V09yJWRzdiVkdyFxJWQhcSFyMl4hcn4lZFgyY1R7V09yJWRzdiVkdyFlJWQhZSFmMnIhZn4lZFgyd1R7V09yJWRzdiVkdyF2JWQhdiF3M1chd34lZFgzXVR7V09yJWRzdiVkdyF7JWQheyF8M2whfH4lZFgzcVR7V09yJWRzdiVkdyFyJWQhciFzNFEhc34lZFg0VlR7V09yJWRzdiVkdyFnJWQhZyFoNGYhaH4lZFg0a1Z7V09yNGZyczVRc3Y0ZnZ3NVF3IWA0ZiFgIWE1YyFhfjRmUDVUUk8hYDVRIWAhYTVeIWF+NVFQNWNPaVBYNWpSaVB7V09yJWRzdiVkd34lZFg1eFZ7V09yJWRzdiVkdyFlJWQhZSFmNl8hZiNWJWQjViNXOHcjV34lZFg2ZFR7V09yJWRzdiVkdyFmJWQhZiFnNnMhZ34lZFg2eFR7V09yJWRzdiVkdyFjJWQhYyFkN1ghZH4lZFg3XlR7V09yJWRzdiVkdyF2JWQhdiF3N20hd34lZFg3clR7V09yJWRzdiVkdyFjJWQhYyFkOFIhZH4lZFg4V1R7V09yJWRzdiVkdyF9JWQhfSNPOGcjT34lZFg4blJ7V3hQT3IlZHN2JWR3fiVkWDh8VHtXT3IlZHN2JWR3I1clZCNXI1g5XSNYfiVkWDliVHtXT3IlZHN2JWR3I1QlZCNUI1U5cSNVfiVkWDl2VHtXT3IlZHN2JWR3I2glZCNoI2k6ViNpfiVkWDpbVHtXT3IlZHN2JWR3I1QlZCNUI1U4UiNVfiVkWDpwVHtXT3IlZHN2JWR3I2MlZCNjI2Q7UCNkfiVkWDtVVHtXT3IlZHN2JWR3I1YlZCNWI1c7ZSNXfiVkWDtqVHtXT3IlZHN2JWR3I2glZCNoI2k7eSNpfiVkWDxPVHtXT3IlZHN2JWR3I20lZCNtI248XyNufiVkWDxkVHtXT3IlZHN2JWR3I2QlZCNkI2U8cyNlfiVkWDx4VHtXT3IlZHN2JWR3I1glZCNYI1k0ZiNZfiVkWD1gUiFQUHtXT3IlZHN2JWR3fiVkWj1yVWFRVlB7V09yJGtycyVVc3Yka3chXiRrIV4hXyVkIV9+JGtfPl9VW1VWUHtXT3Ika3JzJVVzdiRrdyFeJGshXiFfJWQhX34ka1o+eFdWUHtXT3Ika3JzJVVzdiRrdyFeJGshXiFfJWQhXyFgJGshYCFhP2IhYX4ka1o/a1UhT1FWUHtXT3Ika3JzJVVzdiRrdyFeJGshXiFfJWQhX34ka1pAVVdWUHtXT3Ika3JzJVVzdiRrdyFeJGshXiFfJWQhXyNQJGsjUCNRQG4jUX4ka1pAdVdWUHtXT3Ika3JzJVVzdiRrdyFeJGshXiFfJWQhXyFgJGshYCFhQV8hYX4ka1pBaFV3UVZQe1dPciRrcnMlVXN2JGt3IV4kayFeIV8lZCFffiRrXCIsXG4gIHRva2VuaXplcnM6IFtzdGFydFRhZywgY29tbWVudENvbnRlbnQsIHBpQ29udGVudCwgY2RhdGFDb250ZW50LCAwLCAxLCAyLCAzXSxcbiAgdG9wUnVsZXM6IHtcIkRvY3VtZW50XCI6WzAsNl19LFxuICB0b2tlblByZWM6IDBcbn0pO1xuXG5leHBvcnQgeyBwYXJzZXIgfTtcbiIsICJpbXBvcnQgeyBwYXJzZXIgfSBmcm9tICdAbGV6ZXIveG1sJztcbmltcG9ydCB7IHN5bnRheFRyZWUsIExSTGFuZ3VhZ2UsIGluZGVudE5vZGVQcm9wLCBmb2xkTm9kZVByb3AsIExhbmd1YWdlU3VwcG9ydCB9IGZyb20gJ0Bjb2RlbWlycm9yL2xhbmd1YWdlJztcblxuZnVuY3Rpb24gdGFnTmFtZShkb2MsIHRhZykge1xuICAgIGxldCBuYW1lID0gdGFnICYmIHRhZy5nZXRDaGlsZChcIlRhZ05hbWVcIik7XG4gICAgcmV0dXJuIG5hbWUgPyBkb2Muc2xpY2VTdHJpbmcobmFtZS5mcm9tLCBuYW1lLnRvKSA6IFwiXCI7XG59XG5mdW5jdGlvbiBlbGVtZW50TmFtZShkb2MsIHRyZWUpIHtcbiAgICBsZXQgdGFnID0gdHJlZSAmJiB0cmVlLmZpcnN0Q2hpbGQ7XG4gICAgcmV0dXJuICF0YWcgfHwgdGFnLm5hbWUgIT0gXCJPcGVuVGFnXCIgPyBcIlwiIDogdGFnTmFtZShkb2MsIHRhZyk7XG59XG5mdW5jdGlvbiBhdHRyTmFtZShkb2MsIHRhZywgcG9zKSB7XG4gICAgbGV0IGF0dHIgPSB0YWcgJiYgdGFnLmdldENoaWxkcmVuKFwiQXR0cmlidXRlXCIpLmZpbmQoYSA9PiBhLmZyb20gPD0gcG9zICYmIGEudG8gPj0gcG9zKTtcbiAgICBsZXQgbmFtZSA9IGF0dHIgJiYgYXR0ci5nZXRDaGlsZChcIkF0dHJpYnV0ZU5hbWVcIik7XG4gICAgcmV0dXJuIG5hbWUgPyBkb2Muc2xpY2VTdHJpbmcobmFtZS5mcm9tLCBuYW1lLnRvKSA6IFwiXCI7XG59XG5mdW5jdGlvbiBmaW5kUGFyZW50RWxlbWVudCh0cmVlKSB7XG4gICAgZm9yIChsZXQgY3VyID0gdHJlZSAmJiB0cmVlLnBhcmVudDsgY3VyOyBjdXIgPSBjdXIucGFyZW50KVxuICAgICAgICBpZiAoY3VyLm5hbWUgPT0gXCJFbGVtZW50XCIpXG4gICAgICAgICAgICByZXR1cm4gY3VyO1xuICAgIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gZmluZExvY2F0aW9uKHN0YXRlLCBwb3MpIHtcbiAgICB2YXIgX2E7XG4gICAgbGV0IGF0ID0gc3ludGF4VHJlZShzdGF0ZSkucmVzb2x2ZUlubmVyKHBvcywgLTEpLCBpblRhZyA9IG51bGw7XG4gICAgZm9yIChsZXQgY3VyID0gYXQ7ICFpblRhZyAmJiBjdXIucGFyZW50OyBjdXIgPSBjdXIucGFyZW50KVxuICAgICAgICBpZiAoY3VyLm5hbWUgPT0gXCJPcGVuVGFnXCIgfHwgY3VyLm5hbWUgPT0gXCJDbG9zZVRhZ1wiIHx8IGN1ci5uYW1lID09IFwiU2VsZkNsb3NpbmdUYWdcIiB8fCBjdXIubmFtZSA9PSBcIk1pc21hdGNoZWRDbG9zZVRhZ1wiKVxuICAgICAgICAgICAgaW5UYWcgPSBjdXI7XG4gICAgaWYgKGluVGFnICYmIChpblRhZy50byA+IHBvcyB8fCBpblRhZy5sYXN0Q2hpbGQudHlwZS5pc0Vycm9yKSkge1xuICAgICAgICBsZXQgZWx0ID0gaW5UYWcucGFyZW50O1xuICAgICAgICBpZiAoYXQubmFtZSA9PSBcIlRhZ05hbWVcIilcbiAgICAgICAgICAgIHJldHVybiBpblRhZy5uYW1lID09IFwiQ2xvc2VUYWdcIiB8fCBpblRhZy5uYW1lID09IFwiTWlzbWF0Y2hlZENsb3NlVGFnXCJcbiAgICAgICAgICAgICAgICA/IHsgdHlwZTogXCJjbG9zZVRhZ1wiLCBmcm9tOiBhdC5mcm9tLCBjb250ZXh0OiBlbHQgfVxuICAgICAgICAgICAgICAgIDogeyB0eXBlOiBcIm9wZW5UYWdcIiwgZnJvbTogYXQuZnJvbSwgY29udGV4dDogZmluZFBhcmVudEVsZW1lbnQoZWx0KSB9O1xuICAgICAgICBpZiAoYXQubmFtZSA9PSBcIkF0dHJpYnV0ZU5hbWVcIilcbiAgICAgICAgICAgIHJldHVybiB7IHR5cGU6IFwiYXR0ck5hbWVcIiwgZnJvbTogYXQuZnJvbSwgY29udGV4dDogaW5UYWcgfTtcbiAgICAgICAgaWYgKGF0Lm5hbWUgPT0gXCJBdHRyaWJ1dGVWYWx1ZVwiKVxuICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJhdHRyVmFsdWVcIiwgZnJvbTogYXQuZnJvbSwgY29udGV4dDogaW5UYWcgfTtcbiAgICAgICAgbGV0IGJlZm9yZSA9IGF0ID09IGluVGFnIHx8IGF0Lm5hbWUgPT0gXCJBdHRyaWJ1dGVcIiA/IGF0LmNoaWxkQmVmb3JlKHBvcykgOiBhdDtcbiAgICAgICAgaWYgKChiZWZvcmUgPT09IG51bGwgfHwgYmVmb3JlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBiZWZvcmUubmFtZSkgPT0gXCJTdGFydFRhZ1wiKVxuICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJvcGVuVGFnXCIsIGZyb206IHBvcywgY29udGV4dDogZmluZFBhcmVudEVsZW1lbnQoZWx0KSB9O1xuICAgICAgICBpZiAoKGJlZm9yZSA9PT0gbnVsbCB8fCBiZWZvcmUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGJlZm9yZS5uYW1lKSA9PSBcIlN0YXJ0Q2xvc2VUYWdcIiAmJiBiZWZvcmUudG8gPD0gcG9zKVxuICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJjbG9zZVRhZ1wiLCBmcm9tOiBwb3MsIGNvbnRleHQ6IGVsdCB9O1xuICAgICAgICBpZiAoKGJlZm9yZSA9PT0gbnVsbCB8fCBiZWZvcmUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGJlZm9yZS5uYW1lKSA9PSBcIklzXCIpXG4gICAgICAgICAgICByZXR1cm4geyB0eXBlOiBcImF0dHJWYWx1ZVwiLCBmcm9tOiBwb3MsIGNvbnRleHQ6IGluVGFnIH07XG4gICAgICAgIGlmIChiZWZvcmUpXG4gICAgICAgICAgICByZXR1cm4geyB0eXBlOiBcImF0dHJOYW1lXCIsIGZyb206IHBvcywgY29udGV4dDogaW5UYWcgfTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGVsc2UgaWYgKGF0Lm5hbWUgPT0gXCJTdGFydENsb3NlVGFnXCIpIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJjbG9zZVRhZ1wiLCBmcm9tOiBwb3MsIGNvbnRleHQ6IGF0LnBhcmVudCB9O1xuICAgIH1cbiAgICB3aGlsZSAoYXQucGFyZW50ICYmIGF0LnRvID09IHBvcyAmJiAhKChfYSA9IGF0Lmxhc3RDaGlsZCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnR5cGUuaXNFcnJvcikpXG4gICAgICAgIGF0ID0gYXQucGFyZW50O1xuICAgIGlmIChhdC5uYW1lID09IFwiRWxlbWVudFwiIHx8IGF0Lm5hbWUgPT0gXCJUZXh0XCIgfHwgYXQubmFtZSA9PSBcIkRvY3VtZW50XCIpXG4gICAgICAgIHJldHVybiB7IHR5cGU6IFwidGFnXCIsIGZyb206IHBvcywgY29udGV4dDogYXQubmFtZSA9PSBcIkVsZW1lbnRcIiA/IGF0IDogZmluZFBhcmVudEVsZW1lbnQoYXQpIH07XG4gICAgcmV0dXJuIG51bGw7XG59XG5jbGFzcyBFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcihzcGVjLCBhdHRycywgYXR0clZhbHVlcykge1xuICAgICAgICB0aGlzLmF0dHJzID0gYXR0cnM7XG4gICAgICAgIHRoaXMuYXR0clZhbHVlcyA9IGF0dHJWYWx1ZXM7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSBbXTtcbiAgICAgICAgdGhpcy5uYW1lID0gc3BlYy5uYW1lO1xuICAgICAgICB0aGlzLmNvbXBsZXRpb24gPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyB0eXBlOiBcInR5cGVcIiB9LCBzcGVjLmNvbXBsZXRpb24gfHwge30pLCB7IGxhYmVsOiB0aGlzLm5hbWUgfSk7XG4gICAgICAgIHRoaXMub3BlbkNvbXBsZXRpb24gPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuY29tcGxldGlvbiksIHsgbGFiZWw6IFwiPFwiICsgdGhpcy5uYW1lIH0pO1xuICAgICAgICB0aGlzLmNsb3NlQ29tcGxldGlvbiA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5jb21wbGV0aW9uKSwgeyBsYWJlbDogXCI8L1wiICsgdGhpcy5uYW1lICsgXCI+XCIsIGJvb3N0OiAyIH0pO1xuICAgICAgICB0aGlzLmNsb3NlTmFtZUNvbXBsZXRpb24gPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuY29tcGxldGlvbiksIHsgbGFiZWw6IHRoaXMubmFtZSArIFwiPlwiIH0pO1xuICAgICAgICB0aGlzLnRleHQgPSBzcGVjLnRleHRDb250ZW50ID8gc3BlYy50ZXh0Q29udGVudC5tYXAocyA9PiAoeyBsYWJlbDogcywgdHlwZTogXCJ0ZXh0XCIgfSkpIDogW107XG4gICAgfVxufVxuY29uc3QgSWRlbnRpZmllciA9IC9eWzpcXC1cXC5cXHdcXHUwMGI3LVxcdWZmZmZdKiQvO1xuZnVuY3Rpb24gYXR0ckNvbXBsZXRpb24oc3BlYykge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyB0eXBlOiBcInByb3BlcnR5XCIgfSwgc3BlYy5jb21wbGV0aW9uIHx8IHt9KSwgeyBsYWJlbDogc3BlYy5uYW1lIH0pO1xufVxuZnVuY3Rpb24gdmFsdWVDb21wbGV0aW9uKHNwZWMpIHtcbiAgICByZXR1cm4gdHlwZW9mIHNwZWMgPT0gXCJzdHJpbmdcIiA/IHsgbGFiZWw6IGBcIiR7c3BlY31cImAsIHR5cGU6IFwiY29uc3RhbnRcIiB9XG4gICAgICAgIDogL15cIi8udGVzdChzcGVjLmxhYmVsKSA/IHNwZWNcbiAgICAgICAgICAgIDogT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBzcGVjKSwgeyBsYWJlbDogYFwiJHtzcGVjLmxhYmVsfVwiYCB9KTtcbn1cbi8qKlxuQ3JlYXRlIGEgY29tcGxldGlvbiBzb3VyY2UgZm9yIHRoZSBnaXZlbiBzY2hlbWEuXG4qL1xuZnVuY3Rpb24gY29tcGxldGVGcm9tU2NoZW1hKGVsdFNwZWNzLCBhdHRyU3BlY3MpIHtcbiAgICBsZXQgYWxsQXR0cnMgPSBbXSwgZ2xvYmFsQXR0cnMgPSBbXTtcbiAgICBsZXQgYXR0clZhbHVlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgZm9yIChsZXQgcyBvZiBhdHRyU3BlY3MpIHtcbiAgICAgICAgbGV0IGNvbXBsZXRpb24gPSBhdHRyQ29tcGxldGlvbihzKTtcbiAgICAgICAgYWxsQXR0cnMucHVzaChjb21wbGV0aW9uKTtcbiAgICAgICAgaWYgKHMuZ2xvYmFsKVxuICAgICAgICAgICAgZ2xvYmFsQXR0cnMucHVzaChjb21wbGV0aW9uKTtcbiAgICAgICAgaWYgKHMudmFsdWVzKVxuICAgICAgICAgICAgYXR0clZhbHVlc1tzLm5hbWVdID0gcy52YWx1ZXMubWFwKHZhbHVlQ29tcGxldGlvbik7XG4gICAgfVxuICAgIGxldCBhbGxFbGVtZW50cyA9IFtdLCB0b3BFbGVtZW50cyA9IFtdO1xuICAgIGxldCBieU5hbWUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIGZvciAobGV0IHMgb2YgZWx0U3BlY3MpIHtcbiAgICAgICAgbGV0IGF0dHJzID0gZ2xvYmFsQXR0cnMsIGF0dHJWYWxzID0gYXR0clZhbHVlcztcbiAgICAgICAgaWYgKHMuYXR0cmlidXRlcylcbiAgICAgICAgICAgIGF0dHJzID0gYXR0cnMuY29uY2F0KHMuYXR0cmlidXRlcy5tYXAocyA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzID09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhbGxBdHRycy5maW5kKGEgPT4gYS5sYWJlbCA9PSBzKSB8fCB7IGxhYmVsOiBzLCB0eXBlOiBcInByb3BlcnR5XCIgfTtcbiAgICAgICAgICAgICAgICBpZiAocy52YWx1ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJWYWxzID09IGF0dHJWYWx1ZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyVmFscyA9IE9iamVjdC5jcmVhdGUoYXR0clZhbHMpO1xuICAgICAgICAgICAgICAgICAgICBhdHRyVmFsc1tzLm5hbWVdID0gcy52YWx1ZXMubWFwKHZhbHVlQ29tcGxldGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhdHRyQ29tcGxldGlvbihzKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgbGV0IGVsdCA9IG5ldyBFbGVtZW50KHMsIGF0dHJzLCBhdHRyVmFscyk7XG4gICAgICAgIGJ5TmFtZVtlbHQubmFtZV0gPSBlbHQ7XG4gICAgICAgIGFsbEVsZW1lbnRzLnB1c2goZWx0KTtcbiAgICAgICAgaWYgKHMudG9wKVxuICAgICAgICAgICAgdG9wRWxlbWVudHMucHVzaChlbHQpO1xuICAgIH1cbiAgICBpZiAoIXRvcEVsZW1lbnRzLmxlbmd0aClcbiAgICAgICAgdG9wRWxlbWVudHMgPSBhbGxFbGVtZW50cztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbEVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBzID0gZWx0U3BlY3NbaV0sIGVsdCA9IGFsbEVsZW1lbnRzW2ldO1xuICAgICAgICBpZiAocy5jaGlsZHJlbikge1xuICAgICAgICAgICAgZm9yIChsZXQgY2ggb2Ygcy5jaGlsZHJlbilcbiAgICAgICAgICAgICAgICBpZiAoYnlOYW1lW2NoXSlcbiAgICAgICAgICAgICAgICAgICAgZWx0LmNoaWxkcmVuLnB1c2goYnlOYW1lW2NoXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbHQuY2hpbGRyZW4gPSBhbGxFbGVtZW50cztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY3ggPT4ge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGxldCB7IGRvYyB9ID0gY3guc3RhdGUsIGxvYyA9IGZpbmRMb2NhdGlvbihjeC5zdGF0ZSwgY3gucG9zKTtcbiAgICAgICAgaWYgKCFsb2MgfHwgKGxvYy50eXBlID09IFwidGFnXCIgJiYgIWN4LmV4cGxpY2l0KSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBsZXQgeyB0eXBlLCBmcm9tLCBjb250ZXh0IH0gPSBsb2M7XG4gICAgICAgIGlmICh0eXBlID09IFwib3BlblRhZ1wiKSB7XG4gICAgICAgICAgICBsZXQgY2hpbGRyZW4gPSB0b3BFbGVtZW50cztcbiAgICAgICAgICAgIGxldCBwYXJlbnROYW1lID0gZWxlbWVudE5hbWUoZG9jLCBjb250ZXh0KTtcbiAgICAgICAgICAgIGlmIChwYXJlbnROYW1lKSB7XG4gICAgICAgICAgICAgICAgbGV0IHBhcmVudCA9IGJ5TmFtZVtwYXJlbnROYW1lXTtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbiA9IChwYXJlbnQgPT09IG51bGwgfHwgcGFyZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJlbnQuY2hpbGRyZW4pIHx8IGFsbEVsZW1lbnRzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBmcm9tLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGNoaWxkcmVuLm1hcChjaCA9PiBjaC5jb21wbGV0aW9uKSxcbiAgICAgICAgICAgICAgICB2YWxpZEZvcjogSWRlbnRpZmllclxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlID09IFwiY2xvc2VUYWdcIikge1xuICAgICAgICAgICAgbGV0IHBhcmVudE5hbWUgPSBlbGVtZW50TmFtZShkb2MsIGNvbnRleHQpO1xuICAgICAgICAgICAgcmV0dXJuIHBhcmVudE5hbWUgPyB7XG4gICAgICAgICAgICAgICAgZnJvbSxcbiAgICAgICAgICAgICAgICB0bzogY3gucG9zICsgKGRvYy5zbGljZVN0cmluZyhjeC5wb3MsIGN4LnBvcyArIDEpID09IFwiPlwiID8gMSA6IDApLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IFsoKF9hID0gYnlOYW1lW3BhcmVudE5hbWVdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2xvc2VOYW1lQ29tcGxldGlvbikgfHwgeyBsYWJlbDogcGFyZW50TmFtZSArIFwiPlwiLCB0eXBlOiBcInR5cGVcIiB9XSxcbiAgICAgICAgICAgICAgICB2YWxpZEZvcjogSWRlbnRpZmllclxuICAgICAgICAgICAgfSA6IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PSBcImF0dHJOYW1lXCIpIHtcbiAgICAgICAgICAgIGxldCBwYXJlbnQgPSBieU5hbWVbdGFnTmFtZShkb2MsIGNvbnRleHQpXTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZnJvbSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiAocGFyZW50ID09PSBudWxsIHx8IHBhcmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyZW50LmF0dHJzKSB8fCBnbG9iYWxBdHRycyxcbiAgICAgICAgICAgICAgICB2YWxpZEZvcjogSWRlbnRpZmllclxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlID09IFwiYXR0clZhbHVlXCIpIHtcbiAgICAgICAgICAgIGxldCBhdHRyID0gYXR0ck5hbWUoZG9jLCBjb250ZXh0LCBmcm9tKTtcbiAgICAgICAgICAgIGlmICghYXR0cilcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGxldCBwYXJlbnQgPSBieU5hbWVbdGFnTmFtZShkb2MsIGNvbnRleHQpXTtcbiAgICAgICAgICAgIGxldCB2YWx1ZXMgPSAoKHBhcmVudCA9PT0gbnVsbCB8fCBwYXJlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmVudC5hdHRyVmFsdWVzKSB8fCBhdHRyVmFsdWVzKVthdHRyXTtcbiAgICAgICAgICAgIGlmICghdmFsdWVzIHx8ICF2YWx1ZXMubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBmcm9tLFxuICAgICAgICAgICAgICAgIHRvOiBjeC5wb3MgKyAoZG9jLnNsaWNlU3RyaW5nKGN4LnBvcywgY3gucG9zICsgMSkgPT0gJ1wiJyA/IDEgOiAwKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiB2YWx1ZXMsXG4gICAgICAgICAgICAgICAgdmFsaWRGb3I6IC9eXCJbXlwiXSpcIj8kL1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlID09IFwidGFnXCIpIHtcbiAgICAgICAgICAgIGxldCBwYXJlbnROYW1lID0gZWxlbWVudE5hbWUoZG9jLCBjb250ZXh0KSwgcGFyZW50ID0gYnlOYW1lW3BhcmVudE5hbWVdO1xuICAgICAgICAgICAgbGV0IGNsb3NpbmcgPSBbXSwgbGFzdCA9IGNvbnRleHQgJiYgY29udGV4dC5sYXN0Q2hpbGQ7XG4gICAgICAgICAgICBpZiAocGFyZW50TmFtZSAmJiAoIWxhc3QgfHwgbGFzdC5uYW1lICE9IFwiQ2xvc2VUYWdcIiB8fCB0YWdOYW1lKGRvYywgbGFzdCkgIT0gcGFyZW50TmFtZSkpXG4gICAgICAgICAgICAgICAgY2xvc2luZy5wdXNoKHBhcmVudCA/IHBhcmVudC5jbG9zZUNvbXBsZXRpb24gOiB7IGxhYmVsOiBcIjwvXCIgKyBwYXJlbnROYW1lICsgXCI+XCIsIHR5cGU6IFwidHlwZVwiLCBib29zdDogMiB9KTtcbiAgICAgICAgICAgIGxldCBvcHRpb25zID0gY2xvc2luZy5jb25jYXQoKChwYXJlbnQgPT09IG51bGwgfHwgcGFyZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJlbnQuY2hpbGRyZW4pIHx8IChjb250ZXh0ID8gYWxsRWxlbWVudHMgOiB0b3BFbGVtZW50cykpLm1hcChlID0+IGUub3BlbkNvbXBsZXRpb24pKTtcbiAgICAgICAgICAgIGlmIChjb250ZXh0ICYmIChwYXJlbnQgPT09IG51bGwgfHwgcGFyZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJlbnQudGV4dC5sZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgbGV0IG9wZW5UYWcgPSBjb250ZXh0LmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgaWYgKG9wZW5UYWcudG8gPiBjeC5wb3MgLSAyMCAmJiAhL1xcUy8udGVzdChjeC5zdGF0ZS5zbGljZURvYyhvcGVuVGFnLnRvLCBjeC5wb3MpKSlcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMuY29uY2F0KHBhcmVudC50ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZnJvbSxcbiAgICAgICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgICAgIHZhbGlkRm9yOiAvXjxcXC8/WzpcXC1cXC5cXHdcXHUwMGI3LVxcdWZmZmZdKiQvXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vKipcbkEgbGFuZ3VhZ2UgcHJvdmlkZXIgYmFzZWQgb24gdGhlIFtMZXplciBYTUxcbnBhcnNlcl0oaHR0cHM6Ly9naXRodWIuY29tL2xlemVyLXBhcnNlci94bWwpLCBleHRlbmRlZCB3aXRoXG5oaWdobGlnaHRpbmcgYW5kIGluZGVudGF0aW9uIGluZm9ybWF0aW9uLlxuKi9cbmNvbnN0IHhtbExhbmd1YWdlID0gLypAX19QVVJFX18qL0xSTGFuZ3VhZ2UuZGVmaW5lKHtcbiAgICBuYW1lOiBcInhtbFwiLFxuICAgIHBhcnNlcjogLypAX19QVVJFX18qL3BhcnNlci5jb25maWd1cmUoe1xuICAgICAgICBwcm9wczogW1xuICAgICAgICAgICAgLypAX19QVVJFX18qL2luZGVudE5vZGVQcm9wLmFkZCh7XG4gICAgICAgICAgICAgICAgRWxlbWVudChjb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjbG9zZWQgPSAvXlxccyo8XFwvLy50ZXN0KGNvbnRleHQudGV4dEFmdGVyKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQubGluZUluZGVudChjb250ZXh0Lm5vZGUuZnJvbSkgKyAoY2xvc2VkID8gMCA6IGNvbnRleHQudW5pdCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcIk9wZW5UYWcgQ2xvc2VUYWcgU2VsZkNsb3NpbmdUYWdcIihjb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmNvbHVtbihjb250ZXh0Lm5vZGUuZnJvbSkgKyBjb250ZXh0LnVuaXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAvKkBfX1BVUkVfXyovZm9sZE5vZGVQcm9wLmFkZCh7XG4gICAgICAgICAgICAgICAgRWxlbWVudChzdWJ0cmVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmaXJzdCA9IHN1YnRyZWUuZmlyc3RDaGlsZCwgbGFzdCA9IHN1YnRyZWUubGFzdENoaWxkO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpcnN0IHx8IGZpcnN0Lm5hbWUgIT0gXCJPcGVuVGFnXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZnJvbTogZmlyc3QudG8sIHRvOiBsYXN0Lm5hbWUgPT0gXCJDbG9zZVRhZ1wiID8gbGFzdC5mcm9tIDogc3VidHJlZS50byB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIF1cbiAgICB9KSxcbiAgICBsYW5ndWFnZURhdGE6IHtcbiAgICAgICAgY29tbWVudFRva2VuczogeyBibG9jazogeyBvcGVuOiBcIjwhLS1cIiwgY2xvc2U6IFwiLS0+XCIgfSB9LFxuICAgICAgICBpbmRlbnRPbklucHV0OiAvXlxccyo8XFwvJC9cbiAgICB9XG59KTtcbi8qKlxuWE1MIGxhbmd1YWdlIHN1cHBvcnQuIEluY2x1ZGVzIHNjaGVtYS1iYXNlZCBhdXRvY29tcGxldGlvbiB3aGVuXG5jb25maWd1cmVkLlxuKi9cbmZ1bmN0aW9uIHhtbChjb25mID0ge30pIHtcbiAgICByZXR1cm4gbmV3IExhbmd1YWdlU3VwcG9ydCh4bWxMYW5ndWFnZSwgeG1sTGFuZ3VhZ2UuZGF0YS5vZih7XG4gICAgICAgIGF1dG9jb21wbGV0ZTogY29tcGxldGVGcm9tU2NoZW1hKGNvbmYuZWxlbWVudHMgfHwgW10sIGNvbmYuYXR0cmlidXRlcyB8fCBbXSlcbiAgICB9KSk7XG59XG5cbmV4cG9ydCB7IGNvbXBsZXRlRnJvbVNjaGVtYSwgeG1sLCB4bWxMYW5ndWFnZSB9O1xuIiwgImltcG9ydCB7IE5vZGVUeXBlLCBOb2RlUHJvcCwgTm9kZVNldCwgVHJlZSwgUGFyc2VyLCBwYXJzZU1peGVkIH0gZnJvbSAnQGxlemVyL2NvbW1vbic7XG5pbXBvcnQgeyBzdHlsZVRhZ3MsIHRhZ3MsIFRhZyB9IGZyb20gJ0BsZXplci9oaWdobGlnaHQnO1xuXG5jbGFzcyBDb21wb3NpdGVCbG9jayB7XG4gICAgY29uc3RydWN0b3IodHlwZSwgXG4gICAgLy8gVXNlZCBmb3IgaW5kZW50YXRpb24gaW4gbGlzdCBpdGVtcywgbWFya3VwIGNoYXJhY3RlciBpbiBsaXN0c1xuICAgIHZhbHVlLCBmcm9tLCBoYXNoLCBlbmQsIGNoaWxkcmVuLCBwb3NpdGlvbnMpIHtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgICAgICB0aGlzLmhhc2ggPSBoYXNoO1xuICAgICAgICB0aGlzLmVuZCA9IGVuZDtcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuICAgICAgICB0aGlzLnBvc2l0aW9ucyA9IHBvc2l0aW9ucztcbiAgICAgICAgdGhpcy5oYXNoUHJvcCA9IFtbTm9kZVByb3AuY29udGV4dEhhc2gsIGhhc2hdXTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZSh0eXBlLCB2YWx1ZSwgZnJvbSwgcGFyZW50SGFzaCwgZW5kKSB7XG4gICAgICAgIGxldCBoYXNoID0gKHBhcmVudEhhc2ggKyAocGFyZW50SGFzaCA8PCA4KSArIHR5cGUgKyAodmFsdWUgPDwgNCkpIHwgMDtcbiAgICAgICAgcmV0dXJuIG5ldyBDb21wb3NpdGVCbG9jayh0eXBlLCB2YWx1ZSwgZnJvbSwgaGFzaCwgZW5kLCBbXSwgW10pO1xuICAgIH1cbiAgICBhZGRDaGlsZChjaGlsZCwgcG9zKSB7XG4gICAgICAgIGlmIChjaGlsZC5wcm9wKE5vZGVQcm9wLmNvbnRleHRIYXNoKSAhPSB0aGlzLmhhc2gpXG4gICAgICAgICAgICBjaGlsZCA9IG5ldyBUcmVlKGNoaWxkLnR5cGUsIGNoaWxkLmNoaWxkcmVuLCBjaGlsZC5wb3NpdGlvbnMsIGNoaWxkLmxlbmd0aCwgdGhpcy5oYXNoUHJvcCk7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaChjaGlsZCk7XG4gICAgICAgIHRoaXMucG9zaXRpb25zLnB1c2gocG9zKTtcbiAgICB9XG4gICAgdG9UcmVlKG5vZGVTZXQsIGVuZCA9IHRoaXMuZW5kKSB7XG4gICAgICAgIGxldCBsYXN0ID0gdGhpcy5jaGlsZHJlbi5sZW5ndGggLSAxO1xuICAgICAgICBpZiAobGFzdCA+PSAwKVxuICAgICAgICAgICAgZW5kID0gTWF0aC5tYXgoZW5kLCB0aGlzLnBvc2l0aW9uc1tsYXN0XSArIHRoaXMuY2hpbGRyZW5bbGFzdF0ubGVuZ3RoICsgdGhpcy5mcm9tKTtcbiAgICAgICAgbGV0IHRyZWUgPSBuZXcgVHJlZShub2RlU2V0LnR5cGVzW3RoaXMudHlwZV0sIHRoaXMuY2hpbGRyZW4sIHRoaXMucG9zaXRpb25zLCBlbmQgLSB0aGlzLmZyb20pLmJhbGFuY2Uoe1xuICAgICAgICAgICAgbWFrZVRyZWU6IChjaGlsZHJlbiwgcG9zaXRpb25zLCBsZW5ndGgpID0+IG5ldyBUcmVlKE5vZGVUeXBlLm5vbmUsIGNoaWxkcmVuLCBwb3NpdGlvbnMsIGxlbmd0aCwgdGhpcy5oYXNoUHJvcClcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0cmVlO1xuICAgIH1cbn1cbnZhciBUeXBlO1xuKGZ1bmN0aW9uIChUeXBlKSB7XG4gICAgVHlwZVtUeXBlW1wiRG9jdW1lbnRcIl0gPSAxXSA9IFwiRG9jdW1lbnRcIjtcbiAgICBUeXBlW1R5cGVbXCJDb2RlQmxvY2tcIl0gPSAyXSA9IFwiQ29kZUJsb2NrXCI7XG4gICAgVHlwZVtUeXBlW1wiRmVuY2VkQ29kZVwiXSA9IDNdID0gXCJGZW5jZWRDb2RlXCI7XG4gICAgVHlwZVtUeXBlW1wiQmxvY2txdW90ZVwiXSA9IDRdID0gXCJCbG9ja3F1b3RlXCI7XG4gICAgVHlwZVtUeXBlW1wiSG9yaXpvbnRhbFJ1bGVcIl0gPSA1XSA9IFwiSG9yaXpvbnRhbFJ1bGVcIjtcbiAgICBUeXBlW1R5cGVbXCJCdWxsZXRMaXN0XCJdID0gNl0gPSBcIkJ1bGxldExpc3RcIjtcbiAgICBUeXBlW1R5cGVbXCJPcmRlcmVkTGlzdFwiXSA9IDddID0gXCJPcmRlcmVkTGlzdFwiO1xuICAgIFR5cGVbVHlwZVtcIkxpc3RJdGVtXCJdID0gOF0gPSBcIkxpc3RJdGVtXCI7XG4gICAgVHlwZVtUeXBlW1wiQVRYSGVhZGluZzFcIl0gPSA5XSA9IFwiQVRYSGVhZGluZzFcIjtcbiAgICBUeXBlW1R5cGVbXCJBVFhIZWFkaW5nMlwiXSA9IDEwXSA9IFwiQVRYSGVhZGluZzJcIjtcbiAgICBUeXBlW1R5cGVbXCJBVFhIZWFkaW5nM1wiXSA9IDExXSA9IFwiQVRYSGVhZGluZzNcIjtcbiAgICBUeXBlW1R5cGVbXCJBVFhIZWFkaW5nNFwiXSA9IDEyXSA9IFwiQVRYSGVhZGluZzRcIjtcbiAgICBUeXBlW1R5cGVbXCJBVFhIZWFkaW5nNVwiXSA9IDEzXSA9IFwiQVRYSGVhZGluZzVcIjtcbiAgICBUeXBlW1R5cGVbXCJBVFhIZWFkaW5nNlwiXSA9IDE0XSA9IFwiQVRYSGVhZGluZzZcIjtcbiAgICBUeXBlW1R5cGVbXCJTZXRleHRIZWFkaW5nMVwiXSA9IDE1XSA9IFwiU2V0ZXh0SGVhZGluZzFcIjtcbiAgICBUeXBlW1R5cGVbXCJTZXRleHRIZWFkaW5nMlwiXSA9IDE2XSA9IFwiU2V0ZXh0SGVhZGluZzJcIjtcbiAgICBUeXBlW1R5cGVbXCJIVE1MQmxvY2tcIl0gPSAxN10gPSBcIkhUTUxCbG9ja1wiO1xuICAgIFR5cGVbVHlwZVtcIkxpbmtSZWZlcmVuY2VcIl0gPSAxOF0gPSBcIkxpbmtSZWZlcmVuY2VcIjtcbiAgICBUeXBlW1R5cGVbXCJQYXJhZ3JhcGhcIl0gPSAxOV0gPSBcIlBhcmFncmFwaFwiO1xuICAgIFR5cGVbVHlwZVtcIkNvbW1lbnRCbG9ja1wiXSA9IDIwXSA9IFwiQ29tbWVudEJsb2NrXCI7XG4gICAgVHlwZVtUeXBlW1wiUHJvY2Vzc2luZ0luc3RydWN0aW9uQmxvY2tcIl0gPSAyMV0gPSBcIlByb2Nlc3NpbmdJbnN0cnVjdGlvbkJsb2NrXCI7XG4gICAgLy8gSW5saW5lXG4gICAgVHlwZVtUeXBlW1wiRXNjYXBlXCJdID0gMjJdID0gXCJFc2NhcGVcIjtcbiAgICBUeXBlW1R5cGVbXCJFbnRpdHlcIl0gPSAyM10gPSBcIkVudGl0eVwiO1xuICAgIFR5cGVbVHlwZVtcIkhhcmRCcmVha1wiXSA9IDI0XSA9IFwiSGFyZEJyZWFrXCI7XG4gICAgVHlwZVtUeXBlW1wiRW1waGFzaXNcIl0gPSAyNV0gPSBcIkVtcGhhc2lzXCI7XG4gICAgVHlwZVtUeXBlW1wiU3Ryb25nRW1waGFzaXNcIl0gPSAyNl0gPSBcIlN0cm9uZ0VtcGhhc2lzXCI7XG4gICAgVHlwZVtUeXBlW1wiTGlua1wiXSA9IDI3XSA9IFwiTGlua1wiO1xuICAgIFR5cGVbVHlwZVtcIkltYWdlXCJdID0gMjhdID0gXCJJbWFnZVwiO1xuICAgIFR5cGVbVHlwZVtcIklubGluZUNvZGVcIl0gPSAyOV0gPSBcIklubGluZUNvZGVcIjtcbiAgICBUeXBlW1R5cGVbXCJIVE1MVGFnXCJdID0gMzBdID0gXCJIVE1MVGFnXCI7XG4gICAgVHlwZVtUeXBlW1wiQ29tbWVudFwiXSA9IDMxXSA9IFwiQ29tbWVudFwiO1xuICAgIFR5cGVbVHlwZVtcIlByb2Nlc3NpbmdJbnN0cnVjdGlvblwiXSA9IDMyXSA9IFwiUHJvY2Vzc2luZ0luc3RydWN0aW9uXCI7XG4gICAgVHlwZVtUeXBlW1wiVVJMXCJdID0gMzNdID0gXCJVUkxcIjtcbiAgICAvLyBTbWFsbGVyIHRva2Vuc1xuICAgIFR5cGVbVHlwZVtcIkhlYWRlck1hcmtcIl0gPSAzNF0gPSBcIkhlYWRlck1hcmtcIjtcbiAgICBUeXBlW1R5cGVbXCJRdW90ZU1hcmtcIl0gPSAzNV0gPSBcIlF1b3RlTWFya1wiO1xuICAgIFR5cGVbVHlwZVtcIkxpc3RNYXJrXCJdID0gMzZdID0gXCJMaXN0TWFya1wiO1xuICAgIFR5cGVbVHlwZVtcIkxpbmtNYXJrXCJdID0gMzddID0gXCJMaW5rTWFya1wiO1xuICAgIFR5cGVbVHlwZVtcIkVtcGhhc2lzTWFya1wiXSA9IDM4XSA9IFwiRW1waGFzaXNNYXJrXCI7XG4gICAgVHlwZVtUeXBlW1wiQ29kZU1hcmtcIl0gPSAzOV0gPSBcIkNvZGVNYXJrXCI7XG4gICAgVHlwZVtUeXBlW1wiQ29kZVRleHRcIl0gPSA0MF0gPSBcIkNvZGVUZXh0XCI7XG4gICAgVHlwZVtUeXBlW1wiQ29kZUluZm9cIl0gPSA0MV0gPSBcIkNvZGVJbmZvXCI7XG4gICAgVHlwZVtUeXBlW1wiTGlua1RpdGxlXCJdID0gNDJdID0gXCJMaW5rVGl0bGVcIjtcbiAgICBUeXBlW1R5cGVbXCJMaW5rTGFiZWxcIl0gPSA0M10gPSBcIkxpbmtMYWJlbFwiO1xufSkoVHlwZSB8fCAoVHlwZSA9IHt9KSk7XG4vLy8gRGF0YSBzdHJ1Y3R1cmUgdXNlZCB0byBhY2N1bXVsYXRlIGEgYmxvY2sncyBjb250ZW50IGR1cmluZyBbbGVhZlxuLy8vIGJsb2NrIHBhcnNpbmddKCNCbG9ja1BhcnNlci5sZWFmKS5cbmNsYXNzIExlYWZCbG9jayB7XG4gICAgLy8vIEBpbnRlcm5hbFxuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8vLyBUaGUgc3RhcnQgcG9zaXRpb24gb2YgdGhlIGJsb2NrLlxuICAgIHN0YXJ0LCBcbiAgICAvLy8gVGhlIGJsb2NrJ3MgdGV4dCBjb250ZW50LlxuICAgIGNvbnRlbnQpIHtcbiAgICAgICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xuICAgICAgICB0aGlzLmNvbnRlbnQgPSBjb250ZW50O1xuICAgICAgICAvLy8gQGludGVybmFsXG4gICAgICAgIHRoaXMubWFya3MgPSBbXTtcbiAgICAgICAgLy8vIFRoZSBibG9jayBwYXJzZXJzIGFjdGl2ZSBmb3IgdGhpcyBibG9jay5cbiAgICAgICAgdGhpcy5wYXJzZXJzID0gW107XG4gICAgfVxufVxuLy8vIERhdGEgc3RydWN0dXJlIHVzZWQgZHVyaW5nIGJsb2NrLWxldmVsIHBlci1saW5lIHBhcnNpbmcuXG5jbGFzcyBMaW5lIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8vIFRoZSBsaW5lJ3MgZnVsbCB0ZXh0LlxuICAgICAgICB0aGlzLnRleHQgPSBcIlwiO1xuICAgICAgICAvLy8gVGhlIGJhc2UgaW5kZW50IHByb3ZpZGVkIGJ5IHRoZSBjb21wb3NpdGUgY29udGV4dHMgKHRoYXQgaGF2ZVxuICAgICAgICAvLy8gYmVlbiBoYW5kbGVkIHNvIGZhcikuXG4gICAgICAgIHRoaXMuYmFzZUluZGVudCA9IDA7XG4gICAgICAgIC8vLyBUaGUgc3RyaW5nIHBvc2l0aW9uIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGJhc2UgaW5kZW50LlxuICAgICAgICB0aGlzLmJhc2VQb3MgPSAwO1xuICAgICAgICAvLy8gVGhlIG51bWJlciBvZiBjb250ZXh0cyBoYW5kbGVkIEBpbnRlcm5hbFxuICAgICAgICB0aGlzLmRlcHRoID0gMDtcbiAgICAgICAgLy8vIEFueSBtYXJrZXJzIChpLmUuIGJsb2NrIHF1b3RlIG1hcmtlcnMpIHBhcnNlZCBmb3IgdGhlIGNvbnRleHRzLiBAaW50ZXJuYWxcbiAgICAgICAgdGhpcy5tYXJrZXJzID0gW107XG4gICAgICAgIC8vLyBUaGUgcG9zaXRpb24gb2YgdGhlIG5leHQgbm9uLXdoaXRlc3BhY2UgY2hhcmFjdGVyIGJleW9uZCBhbnlcbiAgICAgICAgLy8vIGxpc3QsIGJsb2NrcXVvdGUsIG9yIG90aGVyIGNvbXBvc2l0ZSBibG9jayBtYXJrZXJzLlxuICAgICAgICB0aGlzLnBvcyA9IDA7XG4gICAgICAgIC8vLyBUaGUgY29sdW1uIG9mIHRoZSBuZXh0IG5vbi13aGl0ZXNwYWNlIGNoYXJhY3Rlci5cbiAgICAgICAgdGhpcy5pbmRlbnQgPSAwO1xuICAgICAgICAvLy8gVGhlIGNoYXJhY3RlciBjb2RlIG9mIHRoZSBjaGFyYWN0ZXIgYWZ0ZXIgYHBvc2AuXG4gICAgICAgIHRoaXMubmV4dCA9IC0xO1xuICAgIH1cbiAgICAvLy8gQGludGVybmFsXG4gICAgZm9yd2FyZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuYmFzZVBvcyA+IHRoaXMucG9zKVxuICAgICAgICAgICAgdGhpcy5mb3J3YXJkSW5uZXIoKTtcbiAgICB9XG4gICAgLy8vIEBpbnRlcm5hbFxuICAgIGZvcndhcmRJbm5lcigpIHtcbiAgICAgICAgbGV0IG5ld1BvcyA9IHRoaXMuc2tpcFNwYWNlKHRoaXMuYmFzZVBvcyk7XG4gICAgICAgIHRoaXMuaW5kZW50ID0gdGhpcy5jb3VudEluZGVudChuZXdQb3MsIHRoaXMucG9zLCB0aGlzLmluZGVudCk7XG4gICAgICAgIHRoaXMucG9zID0gbmV3UG9zO1xuICAgICAgICB0aGlzLm5leHQgPSBuZXdQb3MgPT0gdGhpcy50ZXh0Lmxlbmd0aCA/IC0xIDogdGhpcy50ZXh0LmNoYXJDb2RlQXQobmV3UG9zKTtcbiAgICB9XG4gICAgLy8vIFNraXAgd2hpdGVzcGFjZSBhZnRlciB0aGUgZ2l2ZW4gcG9zaXRpb24sIHJldHVybiB0aGUgcG9zaXRpb24gb2ZcbiAgICAvLy8gdGhlIG5leHQgbm9uLXNwYWNlIGNoYXJhY3RlciBvciB0aGUgZW5kIG9mIHRoZSBsaW5lIGlmIHRoZXJlJ3NcbiAgICAvLy8gb25seSBzcGFjZSBhZnRlciBgZnJvbWAuXG4gICAgc2tpcFNwYWNlKGZyb20pIHsgcmV0dXJuIHNraXBTcGFjZSh0aGlzLnRleHQsIGZyb20pOyB9XG4gICAgLy8vIEBpbnRlcm5hbFxuICAgIHJlc2V0KHRleHQpIHtcbiAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgICAgICAgdGhpcy5iYXNlSW5kZW50ID0gdGhpcy5iYXNlUG9zID0gdGhpcy5wb3MgPSB0aGlzLmluZGVudCA9IDA7XG4gICAgICAgIHRoaXMuZm9yd2FyZElubmVyKCk7XG4gICAgICAgIHRoaXMuZGVwdGggPSAxO1xuICAgICAgICB3aGlsZSAodGhpcy5tYXJrZXJzLmxlbmd0aClcbiAgICAgICAgICAgIHRoaXMubWFya2Vycy5wb3AoKTtcbiAgICB9XG4gICAgLy8vIE1vdmUgdGhlIGxpbmUncyBiYXNlIHBvc2l0aW9uIGZvcndhcmQgdG8gdGhlIGdpdmVuIHBvc2l0aW9uLlxuICAgIC8vLyBUaGlzIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBieSBjb21wb3NpdGUgW2Jsb2NrXG4gICAgLy8vIHBhcnNlcnNdKCNCbG9ja1BhcnNlci5wYXJzZSkgb3IgW21hcmt1cCBza2lwcGluZ1xuICAgIC8vLyBmdW5jdGlvbnNdKCNOb2RlU3BlYy5jb21wb3NpdGUpLlxuICAgIG1vdmVCYXNlKHRvKSB7XG4gICAgICAgIHRoaXMuYmFzZVBvcyA9IHRvO1xuICAgICAgICB0aGlzLmJhc2VJbmRlbnQgPSB0aGlzLmNvdW50SW5kZW50KHRvLCB0aGlzLnBvcywgdGhpcy5pbmRlbnQpO1xuICAgIH1cbiAgICAvLy8gTW92ZSB0aGUgbGluZSdzIGJhc2UgcG9zaXRpb24gZm9yd2FyZCB0byB0aGUgZ2l2ZW4gX2NvbHVtbl8uXG4gICAgbW92ZUJhc2VDb2x1bW4oaW5kZW50KSB7XG4gICAgICAgIHRoaXMuYmFzZUluZGVudCA9IGluZGVudDtcbiAgICAgICAgdGhpcy5iYXNlUG9zID0gdGhpcy5maW5kQ29sdW1uKGluZGVudCk7XG4gICAgfVxuICAgIC8vLyBTdG9yZSBhIGNvbXBvc2l0ZS1ibG9jay1sZXZlbCBtYXJrZXIuIFNob3VsZCBiZSBjYWxsZWQgZnJvbVxuICAgIC8vLyBbbWFya3VwIHNraXBwaW5nIGZ1bmN0aW9uc10oI05vZGVTcGVjLmNvbXBvc2l0ZSkgd2hlbiB0aGV5XG4gICAgLy8vIGNvbnN1bWUgYW55IG5vbi13aGl0ZXNwYWNlIGNoYXJhY3RlcnMuXG4gICAgYWRkTWFya2VyKGVsdCkge1xuICAgICAgICB0aGlzLm1hcmtlcnMucHVzaChlbHQpO1xuICAgIH1cbiAgICAvLy8gRmluZCB0aGUgY29sdW1uIHBvc2l0aW9uIGF0IGB0b2AsIG9wdGlvbmFsbHkgc3RhcnRpbmcgYXQgYSBnaXZlblxuICAgIC8vLyBwb3NpdGlvbiBhbmQgY29sdW1uLlxuICAgIGNvdW50SW5kZW50KHRvLCBmcm9tID0gMCwgaW5kZW50ID0gMCkge1xuICAgICAgICBmb3IgKGxldCBpID0gZnJvbTsgaSA8IHRvOyBpKyspXG4gICAgICAgICAgICBpbmRlbnQgKz0gdGhpcy50ZXh0LmNoYXJDb2RlQXQoaSkgPT0gOSA/IDQgLSBpbmRlbnQgJSA0IDogMTtcbiAgICAgICAgcmV0dXJuIGluZGVudDtcbiAgICB9XG4gICAgLy8vIEZpbmQgdGhlIHBvc2l0aW9uIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGdpdmVuIGNvbHVtbi5cbiAgICBmaW5kQ29sdW1uKGdvYWwpIHtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICBmb3IgKGxldCBpbmRlbnQgPSAwOyBpIDwgdGhpcy50ZXh0Lmxlbmd0aCAmJiBpbmRlbnQgPCBnb2FsOyBpKyspXG4gICAgICAgICAgICBpbmRlbnQgKz0gdGhpcy50ZXh0LmNoYXJDb2RlQXQoaSkgPT0gOSA/IDQgLSBpbmRlbnQgJSA0IDogMTtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICAgIC8vLyBAaW50ZXJuYWxcbiAgICBzY3J1YigpIHtcbiAgICAgICAgaWYgKCF0aGlzLmJhc2VJbmRlbnQpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50ZXh0O1xuICAgICAgICBsZXQgcmVzdWx0ID0gXCJcIjtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmJhc2VQb3M7IGkrKylcbiAgICAgICAgICAgIHJlc3VsdCArPSBcIiBcIjtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCArIHRoaXMudGV4dC5zbGljZSh0aGlzLmJhc2VQb3MpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNraXBGb3JMaXN0KGJsLCBjeCwgbGluZSkge1xuICAgIGlmIChsaW5lLnBvcyA9PSBsaW5lLnRleHQubGVuZ3RoIHx8XG4gICAgICAgIChibCAhPSBjeC5ibG9jayAmJiBsaW5lLmluZGVudCA+PSBjeC5zdGFja1tsaW5lLmRlcHRoICsgMV0udmFsdWUgKyBsaW5lLmJhc2VJbmRlbnQpKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBpZiAobGluZS5pbmRlbnQgPj0gbGluZS5iYXNlSW5kZW50ICsgNClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBzaXplID0gKGJsLnR5cGUgPT0gVHlwZS5PcmRlcmVkTGlzdCA/IGlzT3JkZXJlZExpc3QgOiBpc0J1bGxldExpc3QpKGxpbmUsIGN4LCBmYWxzZSk7XG4gICAgcmV0dXJuIHNpemUgPiAwICYmXG4gICAgICAgIChibC50eXBlICE9IFR5cGUuQnVsbGV0TGlzdCB8fCBpc0hvcml6b250YWxSdWxlKGxpbmUsIGN4LCBmYWxzZSkgPCAwKSAmJlxuICAgICAgICBsaW5lLnRleHQuY2hhckNvZGVBdChsaW5lLnBvcyArIHNpemUgLSAxKSA9PSBibC52YWx1ZTtcbn1cbmNvbnN0IERlZmF1bHRTa2lwTWFya3VwID0ge1xuICAgIFtUeXBlLkJsb2NrcXVvdGVdKGJsLCBjeCwgbGluZSkge1xuICAgICAgICBpZiAobGluZS5uZXh0ICE9IDYyIC8qICc+JyAqLylcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgbGluZS5tYXJrZXJzLnB1c2goZWx0KFR5cGUuUXVvdGVNYXJrLCBjeC5saW5lU3RhcnQgKyBsaW5lLnBvcywgY3gubGluZVN0YXJ0ICsgbGluZS5wb3MgKyAxKSk7XG4gICAgICAgIGxpbmUubW92ZUJhc2UobGluZS5wb3MgKyAoc3BhY2UobGluZS50ZXh0LmNoYXJDb2RlQXQobGluZS5wb3MgKyAxKSkgPyAyIDogMSkpO1xuICAgICAgICBibC5lbmQgPSBjeC5saW5lU3RhcnQgKyBsaW5lLnRleHQubGVuZ3RoO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIFtUeXBlLkxpc3RJdGVtXShibCwgX2N4LCBsaW5lKSB7XG4gICAgICAgIGlmIChsaW5lLmluZGVudCA8IGxpbmUuYmFzZUluZGVudCArIGJsLnZhbHVlICYmIGxpbmUubmV4dCA+IC0xKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBsaW5lLm1vdmVCYXNlQ29sdW1uKGxpbmUuYmFzZUluZGVudCArIGJsLnZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBbVHlwZS5PcmRlcmVkTGlzdF06IHNraXBGb3JMaXN0LFxuICAgIFtUeXBlLkJ1bGxldExpc3RdOiBza2lwRm9yTGlzdCxcbiAgICBbVHlwZS5Eb2N1bWVudF0oKSB7IHJldHVybiB0cnVlOyB9XG59O1xuZnVuY3Rpb24gc3BhY2UoY2gpIHsgcmV0dXJuIGNoID09IDMyIHx8IGNoID09IDkgfHwgY2ggPT0gMTAgfHwgY2ggPT0gMTM7IH1cbmZ1bmN0aW9uIHNraXBTcGFjZShsaW5lLCBpID0gMCkge1xuICAgIHdoaWxlIChpIDwgbGluZS5sZW5ndGggJiYgc3BhY2UobGluZS5jaGFyQ29kZUF0KGkpKSlcbiAgICAgICAgaSsrO1xuICAgIHJldHVybiBpO1xufVxuZnVuY3Rpb24gc2tpcFNwYWNlQmFjayhsaW5lLCBpLCB0bykge1xuICAgIHdoaWxlIChpID4gdG8gJiYgc3BhY2UobGluZS5jaGFyQ29kZUF0KGkgLSAxKSkpXG4gICAgICAgIGktLTtcbiAgICByZXR1cm4gaTtcbn1cbmZ1bmN0aW9uIGlzRmVuY2VkQ29kZShsaW5lKSB7XG4gICAgaWYgKGxpbmUubmV4dCAhPSA5NiAmJiBsaW5lLm5leHQgIT0gMTI2IC8qICdgficgKi8pXG4gICAgICAgIHJldHVybiAtMTtcbiAgICBsZXQgcG9zID0gbGluZS5wb3MgKyAxO1xuICAgIHdoaWxlIChwb3MgPCBsaW5lLnRleHQubGVuZ3RoICYmIGxpbmUudGV4dC5jaGFyQ29kZUF0KHBvcykgPT0gbGluZS5uZXh0KVxuICAgICAgICBwb3MrKztcbiAgICBpZiAocG9zIDwgbGluZS5wb3MgKyAzKVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgaWYgKGxpbmUubmV4dCA9PSA5NilcbiAgICAgICAgZm9yIChsZXQgaSA9IHBvczsgaSA8IGxpbmUudGV4dC5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIGlmIChsaW5lLnRleHQuY2hhckNvZGVBdChpKSA9PSA5NilcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgcmV0dXJuIHBvcztcbn1cbmZ1bmN0aW9uIGlzQmxvY2txdW90ZShsaW5lKSB7XG4gICAgcmV0dXJuIGxpbmUubmV4dCAhPSA2MiAvKiAnPicgKi8gPyAtMSA6IGxpbmUudGV4dC5jaGFyQ29kZUF0KGxpbmUucG9zICsgMSkgPT0gMzIgPyAyIDogMTtcbn1cbmZ1bmN0aW9uIGlzSG9yaXpvbnRhbFJ1bGUobGluZSwgY3gsIGJyZWFraW5nKSB7XG4gICAgaWYgKGxpbmUubmV4dCAhPSA0MiAmJiBsaW5lLm5leHQgIT0gNDUgJiYgbGluZS5uZXh0ICE9IDk1IC8qICdfLSonICovKVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgbGV0IGNvdW50ID0gMTtcbiAgICBmb3IgKGxldCBwb3MgPSBsaW5lLnBvcyArIDE7IHBvcyA8IGxpbmUudGV4dC5sZW5ndGg7IHBvcysrKSB7XG4gICAgICAgIGxldCBjaCA9IGxpbmUudGV4dC5jaGFyQ29kZUF0KHBvcyk7XG4gICAgICAgIGlmIChjaCA9PSBsaW5lLm5leHQpXG4gICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICBlbHNlIGlmICghc3BhY2UoY2gpKVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICAvLyBTZXRleHQgaGVhZGVycyB0YWtlIHByZWNlZGVuY2VcbiAgICBpZiAoYnJlYWtpbmcgJiYgbGluZS5uZXh0ID09IDQ1ICYmIGlzU2V0ZXh0VW5kZXJsaW5lKGxpbmUpID4gLTEgJiYgbGluZS5kZXB0aCA9PSBjeC5zdGFjay5sZW5ndGgpXG4gICAgICAgIHJldHVybiAtMTtcbiAgICByZXR1cm4gY291bnQgPCAzID8gLTEgOiAxO1xufVxuZnVuY3Rpb24gaW5MaXN0KGN4LCB0eXBlKSB7XG4gICAgZm9yIChsZXQgaSA9IGN4LnN0YWNrLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKVxuICAgICAgICBpZiAoY3guc3RhY2tbaV0udHlwZSA9PSB0eXBlKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gaXNCdWxsZXRMaXN0KGxpbmUsIGN4LCBicmVha2luZykge1xuICAgIHJldHVybiAobGluZS5uZXh0ID09IDQ1IHx8IGxpbmUubmV4dCA9PSA0MyB8fCBsaW5lLm5leHQgPT0gNDIgLyogJy0rKicgKi8pICYmXG4gICAgICAgIChsaW5lLnBvcyA9PSBsaW5lLnRleHQubGVuZ3RoIC0gMSB8fCBzcGFjZShsaW5lLnRleHQuY2hhckNvZGVBdChsaW5lLnBvcyArIDEpKSkgJiZcbiAgICAgICAgKCFicmVha2luZyB8fCBpbkxpc3QoY3gsIFR5cGUuQnVsbGV0TGlzdCkgfHwgbGluZS5za2lwU3BhY2UobGluZS5wb3MgKyAyKSA8IGxpbmUudGV4dC5sZW5ndGgpID8gMSA6IC0xO1xufVxuZnVuY3Rpb24gaXNPcmRlcmVkTGlzdChsaW5lLCBjeCwgYnJlYWtpbmcpIHtcbiAgICBsZXQgcG9zID0gbGluZS5wb3MsIG5leHQgPSBsaW5lLm5leHQ7XG4gICAgZm9yICg7Oykge1xuICAgICAgICBpZiAobmV4dCA+PSA0OCAmJiBuZXh0IDw9IDU3IC8qICcwLTknICovKVxuICAgICAgICAgICAgcG9zKys7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBpZiAocG9zID09IGxpbmUudGV4dC5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIG5leHQgPSBsaW5lLnRleHQuY2hhckNvZGVBdChwb3MpO1xuICAgIH1cbiAgICBpZiAocG9zID09IGxpbmUucG9zIHx8IHBvcyA+IGxpbmUucG9zICsgOSB8fFxuICAgICAgICAobmV4dCAhPSA0NiAmJiBuZXh0ICE9IDQxIC8qICcuKScgKi8pIHx8XG4gICAgICAgIChwb3MgPCBsaW5lLnRleHQubGVuZ3RoIC0gMSAmJiAhc3BhY2UobGluZS50ZXh0LmNoYXJDb2RlQXQocG9zICsgMSkpKSB8fFxuICAgICAgICBicmVha2luZyAmJiAhaW5MaXN0KGN4LCBUeXBlLk9yZGVyZWRMaXN0KSAmJlxuICAgICAgICAgICAgKGxpbmUuc2tpcFNwYWNlKHBvcyArIDEpID09IGxpbmUudGV4dC5sZW5ndGggfHwgcG9zID4gbGluZS5wb3MgKyAxIHx8IGxpbmUubmV4dCAhPSA0OSAvKiAnMScgKi8pKVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgcmV0dXJuIHBvcyArIDEgLSBsaW5lLnBvcztcbn1cbmZ1bmN0aW9uIGlzQXR4SGVhZGluZyhsaW5lKSB7XG4gICAgaWYgKGxpbmUubmV4dCAhPSAzNSAvKiAnIycgKi8pXG4gICAgICAgIHJldHVybiAtMTtcbiAgICBsZXQgcG9zID0gbGluZS5wb3MgKyAxO1xuICAgIHdoaWxlIChwb3MgPCBsaW5lLnRleHQubGVuZ3RoICYmIGxpbmUudGV4dC5jaGFyQ29kZUF0KHBvcykgPT0gMzUpXG4gICAgICAgIHBvcysrO1xuICAgIGlmIChwb3MgPCBsaW5lLnRleHQubGVuZ3RoICYmIGxpbmUudGV4dC5jaGFyQ29kZUF0KHBvcykgIT0gMzIpXG4gICAgICAgIHJldHVybiAtMTtcbiAgICBsZXQgc2l6ZSA9IHBvcyAtIGxpbmUucG9zO1xuICAgIHJldHVybiBzaXplID4gNiA/IC0xIDogc2l6ZTtcbn1cbmZ1bmN0aW9uIGlzU2V0ZXh0VW5kZXJsaW5lKGxpbmUpIHtcbiAgICBpZiAobGluZS5uZXh0ICE9IDQ1ICYmIGxpbmUubmV4dCAhPSA2MSAvKiAnLT0nICovIHx8IGxpbmUuaW5kZW50ID49IGxpbmUuYmFzZUluZGVudCArIDQpXG4gICAgICAgIHJldHVybiAtMTtcbiAgICBsZXQgcG9zID0gbGluZS5wb3MgKyAxO1xuICAgIHdoaWxlIChwb3MgPCBsaW5lLnRleHQubGVuZ3RoICYmIGxpbmUudGV4dC5jaGFyQ29kZUF0KHBvcykgPT0gbGluZS5uZXh0KVxuICAgICAgICBwb3MrKztcbiAgICBsZXQgZW5kID0gcG9zO1xuICAgIHdoaWxlIChwb3MgPCBsaW5lLnRleHQubGVuZ3RoICYmIHNwYWNlKGxpbmUudGV4dC5jaGFyQ29kZUF0KHBvcykpKVxuICAgICAgICBwb3MrKztcbiAgICByZXR1cm4gcG9zID09IGxpbmUudGV4dC5sZW5ndGggPyBlbmQgOiAtMTtcbn1cbmNvbnN0IEVtcHR5TGluZSA9IC9eWyBcXHRdKiQvLCBDb21tZW50RW5kID0gLy0tPi8sIFByb2Nlc3NpbmdFbmQgPSAvXFw/Pi87XG5jb25zdCBIVE1MQmxvY2tTdHlsZSA9IFtcbiAgICBbL148KD86c2NyaXB0fHByZXxzdHlsZSkoPzpcXHN8PnwkKS9pLCAvPFxcLyg/OnNjcmlwdHxwcmV8c3R5bGUpPi9pXSxcbiAgICBbL15cXHMqPCEtLS8sIENvbW1lbnRFbmRdLFxuICAgIFsvXlxccyo8XFw/LywgUHJvY2Vzc2luZ0VuZF0sXG4gICAgWy9eXFxzKjwhW0EtWl0vLCAvPi9dLFxuICAgIFsvXlxccyo8IVxcW0NEQVRBXFxbLywgL1xcXVxcXT4vXSxcbiAgICBbL15cXHMqPFxcLz8oPzphZGRyZXNzfGFydGljbGV8YXNpZGV8YmFzZXxiYXNlZm9udHxibG9ja3F1b3RlfGJvZHl8Y2FwdGlvbnxjZW50ZXJ8Y29sfGNvbGdyb3VwfGRkfGRldGFpbHN8ZGlhbG9nfGRpcnxkaXZ8ZGx8ZHR8ZmllbGRzZXR8ZmlnY2FwdGlvbnxmaWd1cmV8Zm9vdGVyfGZvcm18ZnJhbWV8ZnJhbWVzZXR8aDF8aDJ8aDN8aDR8aDV8aDZ8aGVhZHxoZWFkZXJ8aHJ8aHRtbHxpZnJhbWV8bGVnZW5kfGxpfGxpbmt8bWFpbnxtZW51fG1lbnVpdGVtfG5hdnxub2ZyYW1lc3xvbHxvcHRncm91cHxvcHRpb258cHxwYXJhbXxzZWN0aW9ufHNvdXJjZXxzdW1tYXJ5fHRhYmxlfHRib2R5fHRkfHRmb290fHRofHRoZWFkfHRpdGxlfHRyfHRyYWNrfHVsKSg/Olxcc3xcXC8/PnwkKS9pLCBFbXB0eUxpbmVdLFxuICAgIFsvXlxccyooPzo8XFwvW2Etel1bXFx3LV0qXFxzKj58PFthLXpdW1xcdy1dKihcXHMrW2EtejpfXVtcXHctLl0qKD86XFxzKj1cXHMqKD86W15cXHNcIic9PD5gXSt8J1teJ10qJ3xcIlteXCJdKlwiKSk/KSpcXHMqPilcXHMqJC9pLCBFbXB0eUxpbmVdXG5dO1xuZnVuY3Rpb24gaXNIVE1MQmxvY2sobGluZSwgX2N4LCBicmVha2luZykge1xuICAgIGlmIChsaW5lLm5leHQgIT0gNjAgLyogJzwnICovKVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgbGV0IHJlc3QgPSBsaW5lLnRleHQuc2xpY2UobGluZS5wb3MpO1xuICAgIGZvciAobGV0IGkgPSAwLCBlID0gSFRNTEJsb2NrU3R5bGUubGVuZ3RoIC0gKGJyZWFraW5nID8gMSA6IDApOyBpIDwgZTsgaSsrKVxuICAgICAgICBpZiAoSFRNTEJsb2NrU3R5bGVbaV1bMF0udGVzdChyZXN0KSlcbiAgICAgICAgICAgIHJldHVybiBpO1xuICAgIHJldHVybiAtMTtcbn1cbmZ1bmN0aW9uIGdldExpc3RJbmRlbnQobGluZSwgcG9zKSB7XG4gICAgbGV0IGluZGVudEFmdGVyID0gbGluZS5jb3VudEluZGVudChwb3MsIGxpbmUucG9zLCBsaW5lLmluZGVudCk7XG4gICAgbGV0IGluZGVudGVkID0gbGluZS5jb3VudEluZGVudChsaW5lLnNraXBTcGFjZShwb3MpLCBwb3MsIGluZGVudEFmdGVyKTtcbiAgICByZXR1cm4gaW5kZW50ZWQgPj0gaW5kZW50QWZ0ZXIgKyA1ID8gaW5kZW50QWZ0ZXIgKyAxIDogaW5kZW50ZWQ7XG59XG5mdW5jdGlvbiBhZGRDb2RlVGV4dChtYXJrcywgZnJvbSwgdG8pIHtcbiAgICBsZXQgbGFzdCA9IG1hcmtzLmxlbmd0aCAtIDE7XG4gICAgaWYgKGxhc3QgPj0gMCAmJiBtYXJrc1tsYXN0XS50byA9PSBmcm9tICYmIG1hcmtzW2xhc3RdLnR5cGUgPT0gVHlwZS5Db2RlVGV4dClcbiAgICAgICAgbWFya3NbbGFzdF0udG8gPSB0bztcbiAgICBlbHNlXG4gICAgICAgIG1hcmtzLnB1c2goZWx0KFR5cGUuQ29kZVRleHQsIGZyb20sIHRvKSk7XG59XG4vLyBSdWxlcyBmb3IgcGFyc2luZyBibG9ja3MuIEEgcmV0dXJuIHZhbHVlIG9mIGZhbHNlIG1lYW5zIHRoZSBydWxlXG4vLyBkb2Vzbid0IGFwcGx5IGhlcmUsIHRydWUgbWVhbnMgaXQgZG9lcy4gV2hlbiB0cnVlIGlzIHJldHVybmVkIGFuZFxuLy8gYHAubGluZWAgaGFzIGJlZW4gdXBkYXRlZCwgdGhlIHJ1bGUgaXMgYXNzdW1lZCB0byBoYXZlIGNvbnN1bWVkIGFcbi8vIGxlYWYgYmxvY2suIE90aGVyd2lzZSwgaXQgaXMgYXNzdW1lZCB0byBoYXZlIG9wZW5lZCBhIGNvbnRleHQuXG5jb25zdCBEZWZhdWx0QmxvY2tQYXJzZXJzID0ge1xuICAgIExpbmtSZWZlcmVuY2U6IHVuZGVmaW5lZCxcbiAgICBJbmRlbnRlZENvZGUoY3gsIGxpbmUpIHtcbiAgICAgICAgbGV0IGJhc2UgPSBsaW5lLmJhc2VJbmRlbnQgKyA0O1xuICAgICAgICBpZiAobGluZS5pbmRlbnQgPCBiYXNlKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBsZXQgc3RhcnQgPSBsaW5lLmZpbmRDb2x1bW4oYmFzZSk7XG4gICAgICAgIGxldCBmcm9tID0gY3gubGluZVN0YXJ0ICsgc3RhcnQsIHRvID0gY3gubGluZVN0YXJ0ICsgbGluZS50ZXh0Lmxlbmd0aDtcbiAgICAgICAgbGV0IG1hcmtzID0gW10sIHBlbmRpbmdNYXJrcyA9IFtdO1xuICAgICAgICBhZGRDb2RlVGV4dChtYXJrcywgZnJvbSwgdG8pO1xuICAgICAgICB3aGlsZSAoY3gubmV4dExpbmUoKSAmJiBsaW5lLmRlcHRoID49IGN4LnN0YWNrLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKGxpbmUucG9zID09IGxpbmUudGV4dC5sZW5ndGgpIHsgLy8gRW1wdHlcbiAgICAgICAgICAgICAgICBhZGRDb2RlVGV4dChwZW5kaW5nTWFya3MsIGN4LmxpbmVTdGFydCAtIDEsIGN4LmxpbmVTdGFydCk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgbSBvZiBsaW5lLm1hcmtlcnMpXG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmdNYXJrcy5wdXNoKG0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobGluZS5pbmRlbnQgPCBiYXNlKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAocGVuZGluZ01hcmtzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBtIG9mIHBlbmRpbmdNYXJrcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG0udHlwZSA9PSBUeXBlLkNvZGVUZXh0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZENvZGVUZXh0KG1hcmtzLCBtLmZyb20sIG0udG8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtzLnB1c2gobSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZ01hcmtzID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFkZENvZGVUZXh0KG1hcmtzLCBjeC5saW5lU3RhcnQgLSAxLCBjeC5saW5lU3RhcnQpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IG0gb2YgbGluZS5tYXJrZXJzKVxuICAgICAgICAgICAgICAgICAgICBtYXJrcy5wdXNoKG0pO1xuICAgICAgICAgICAgICAgIHRvID0gY3gubGluZVN0YXJ0ICsgbGluZS50ZXh0Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICBsZXQgY29kZVN0YXJ0ID0gY3gubGluZVN0YXJ0ICsgbGluZS5maW5kQ29sdW1uKGxpbmUuYmFzZUluZGVudCArIDQpO1xuICAgICAgICAgICAgICAgIGlmIChjb2RlU3RhcnQgPCB0bylcbiAgICAgICAgICAgICAgICAgICAgYWRkQ29kZVRleHQobWFya3MsIGNvZGVTdGFydCwgdG8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwZW5kaW5nTWFya3MubGVuZ3RoKSB7XG4gICAgICAgICAgICBwZW5kaW5nTWFya3MgPSBwZW5kaW5nTWFya3MuZmlsdGVyKG0gPT4gbS50eXBlICE9IFR5cGUuQ29kZVRleHQpO1xuICAgICAgICAgICAgaWYgKHBlbmRpbmdNYXJrcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgbGluZS5tYXJrZXJzID0gcGVuZGluZ01hcmtzLmNvbmNhdChsaW5lLm1hcmtlcnMpO1xuICAgICAgICB9XG4gICAgICAgIGN4LmFkZE5vZGUoY3guYnVmZmVyLndyaXRlRWxlbWVudHMobWFya3MsIC1mcm9tKS5maW5pc2goVHlwZS5Db2RlQmxvY2ssIHRvIC0gZnJvbSksIGZyb20pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIEZlbmNlZENvZGUoY3gsIGxpbmUpIHtcbiAgICAgICAgbGV0IGZlbmNlRW5kID0gaXNGZW5jZWRDb2RlKGxpbmUpO1xuICAgICAgICBpZiAoZmVuY2VFbmQgPCAwKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBsZXQgZnJvbSA9IGN4LmxpbmVTdGFydCArIGxpbmUucG9zLCBjaCA9IGxpbmUubmV4dCwgbGVuID0gZmVuY2VFbmQgLSBsaW5lLnBvcztcbiAgICAgICAgbGV0IGluZm9Gcm9tID0gbGluZS5za2lwU3BhY2UoZmVuY2VFbmQpLCBpbmZvVG8gPSBza2lwU3BhY2VCYWNrKGxpbmUudGV4dCwgbGluZS50ZXh0Lmxlbmd0aCwgaW5mb0Zyb20pO1xuICAgICAgICBsZXQgbWFya3MgPSBbZWx0KFR5cGUuQ29kZU1hcmssIGZyb20sIGZyb20gKyBsZW4pXTtcbiAgICAgICAgaWYgKGluZm9Gcm9tIDwgaW5mb1RvKVxuICAgICAgICAgICAgbWFya3MucHVzaChlbHQoVHlwZS5Db2RlSW5mbywgY3gubGluZVN0YXJ0ICsgaW5mb0Zyb20sIGN4LmxpbmVTdGFydCArIGluZm9UbykpO1xuICAgICAgICBmb3IgKGxldCBmaXJzdCA9IHRydWU7IGN4Lm5leHRMaW5lKCkgJiYgbGluZS5kZXB0aCA+PSBjeC5zdGFjay5sZW5ndGg7IGZpcnN0ID0gZmFsc2UpIHtcbiAgICAgICAgICAgIGxldCBpID0gbGluZS5wb3M7XG4gICAgICAgICAgICBpZiAobGluZS5pbmRlbnQgLSBsaW5lLmJhc2VJbmRlbnQgPCA0KVxuICAgICAgICAgICAgICAgIHdoaWxlIChpIDwgbGluZS50ZXh0Lmxlbmd0aCAmJiBsaW5lLnRleHQuY2hhckNvZGVBdChpKSA9PSBjaClcbiAgICAgICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgaWYgKGkgLSBsaW5lLnBvcyA+PSBsZW4gJiYgbGluZS5za2lwU3BhY2UoaSkgPT0gbGluZS50ZXh0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IG0gb2YgbGluZS5tYXJrZXJzKVxuICAgICAgICAgICAgICAgICAgICBtYXJrcy5wdXNoKG0pO1xuICAgICAgICAgICAgICAgIG1hcmtzLnB1c2goZWx0KFR5cGUuQ29kZU1hcmssIGN4LmxpbmVTdGFydCArIGxpbmUucG9zLCBjeC5saW5lU3RhcnQgKyBpKSk7XG4gICAgICAgICAgICAgICAgY3gubmV4dExpbmUoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICghZmlyc3QpXG4gICAgICAgICAgICAgICAgICAgIGFkZENvZGVUZXh0KG1hcmtzLCBjeC5saW5lU3RhcnQgLSAxLCBjeC5saW5lU3RhcnQpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IG0gb2YgbGluZS5tYXJrZXJzKVxuICAgICAgICAgICAgICAgICAgICBtYXJrcy5wdXNoKG0pO1xuICAgICAgICAgICAgICAgIGxldCB0ZXh0U3RhcnQgPSBjeC5saW5lU3RhcnQgKyBsaW5lLmJhc2VQb3MsIHRleHRFbmQgPSBjeC5saW5lU3RhcnQgKyBsaW5lLnRleHQubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmICh0ZXh0U3RhcnQgPCB0ZXh0RW5kKVxuICAgICAgICAgICAgICAgICAgICBhZGRDb2RlVGV4dChtYXJrcywgdGV4dFN0YXJ0LCB0ZXh0RW5kKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjeC5hZGROb2RlKGN4LmJ1ZmZlci53cml0ZUVsZW1lbnRzKG1hcmtzLCAtZnJvbSlcbiAgICAgICAgICAgIC5maW5pc2goVHlwZS5GZW5jZWRDb2RlLCBjeC5wcmV2TGluZUVuZCgpIC0gZnJvbSksIGZyb20pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIEJsb2NrcXVvdGUoY3gsIGxpbmUpIHtcbiAgICAgICAgbGV0IHNpemUgPSBpc0Jsb2NrcXVvdGUobGluZSk7XG4gICAgICAgIGlmIChzaXplIDwgMClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgY3guc3RhcnRDb250ZXh0KFR5cGUuQmxvY2txdW90ZSwgbGluZS5wb3MpO1xuICAgICAgICBjeC5hZGROb2RlKFR5cGUuUXVvdGVNYXJrLCBjeC5saW5lU3RhcnQgKyBsaW5lLnBvcywgY3gubGluZVN0YXJ0ICsgbGluZS5wb3MgKyAxKTtcbiAgICAgICAgbGluZS5tb3ZlQmFzZShsaW5lLnBvcyArIHNpemUpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIEhvcml6b250YWxSdWxlKGN4LCBsaW5lKSB7XG4gICAgICAgIGlmIChpc0hvcml6b250YWxSdWxlKGxpbmUsIGN4LCBmYWxzZSkgPCAwKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBsZXQgZnJvbSA9IGN4LmxpbmVTdGFydCArIGxpbmUucG9zO1xuICAgICAgICBjeC5uZXh0TGluZSgpO1xuICAgICAgICBjeC5hZGROb2RlKFR5cGUuSG9yaXpvbnRhbFJ1bGUsIGZyb20pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIEJ1bGxldExpc3QoY3gsIGxpbmUpIHtcbiAgICAgICAgbGV0IHNpemUgPSBpc0J1bGxldExpc3QobGluZSwgY3gsIGZhbHNlKTtcbiAgICAgICAgaWYgKHNpemUgPCAwKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoY3guYmxvY2sudHlwZSAhPSBUeXBlLkJ1bGxldExpc3QpXG4gICAgICAgICAgICBjeC5zdGFydENvbnRleHQoVHlwZS5CdWxsZXRMaXN0LCBsaW5lLmJhc2VQb3MsIGxpbmUubmV4dCk7XG4gICAgICAgIGxldCBuZXdCYXNlID0gZ2V0TGlzdEluZGVudChsaW5lLCBsaW5lLnBvcyArIDEpO1xuICAgICAgICBjeC5zdGFydENvbnRleHQoVHlwZS5MaXN0SXRlbSwgbGluZS5iYXNlUG9zLCBuZXdCYXNlIC0gbGluZS5iYXNlSW5kZW50KTtcbiAgICAgICAgY3guYWRkTm9kZShUeXBlLkxpc3RNYXJrLCBjeC5saW5lU3RhcnQgKyBsaW5lLnBvcywgY3gubGluZVN0YXJ0ICsgbGluZS5wb3MgKyBzaXplKTtcbiAgICAgICAgbGluZS5tb3ZlQmFzZUNvbHVtbihuZXdCYXNlKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcbiAgICBPcmRlcmVkTGlzdChjeCwgbGluZSkge1xuICAgICAgICBsZXQgc2l6ZSA9IGlzT3JkZXJlZExpc3QobGluZSwgY3gsIGZhbHNlKTtcbiAgICAgICAgaWYgKHNpemUgPCAwKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoY3guYmxvY2sudHlwZSAhPSBUeXBlLk9yZGVyZWRMaXN0KVxuICAgICAgICAgICAgY3guc3RhcnRDb250ZXh0KFR5cGUuT3JkZXJlZExpc3QsIGxpbmUuYmFzZVBvcywgbGluZS50ZXh0LmNoYXJDb2RlQXQobGluZS5wb3MgKyBzaXplIC0gMSkpO1xuICAgICAgICBsZXQgbmV3QmFzZSA9IGdldExpc3RJbmRlbnQobGluZSwgbGluZS5wb3MgKyBzaXplKTtcbiAgICAgICAgY3guc3RhcnRDb250ZXh0KFR5cGUuTGlzdEl0ZW0sIGxpbmUuYmFzZVBvcywgbmV3QmFzZSAtIGxpbmUuYmFzZUluZGVudCk7XG4gICAgICAgIGN4LmFkZE5vZGUoVHlwZS5MaXN0TWFyaywgY3gubGluZVN0YXJ0ICsgbGluZS5wb3MsIGN4LmxpbmVTdGFydCArIGxpbmUucG9zICsgc2l6ZSk7XG4gICAgICAgIGxpbmUubW92ZUJhc2VDb2x1bW4obmV3QmFzZSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgQVRYSGVhZGluZyhjeCwgbGluZSkge1xuICAgICAgICBsZXQgc2l6ZSA9IGlzQXR4SGVhZGluZyhsaW5lKTtcbiAgICAgICAgaWYgKHNpemUgPCAwKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBsZXQgb2ZmID0gbGluZS5wb3MsIGZyb20gPSBjeC5saW5lU3RhcnQgKyBvZmY7XG4gICAgICAgIGxldCBlbmRPZlNwYWNlID0gc2tpcFNwYWNlQmFjayhsaW5lLnRleHQsIGxpbmUudGV4dC5sZW5ndGgsIG9mZiksIGFmdGVyID0gZW5kT2ZTcGFjZTtcbiAgICAgICAgd2hpbGUgKGFmdGVyID4gb2ZmICYmIGxpbmUudGV4dC5jaGFyQ29kZUF0KGFmdGVyIC0gMSkgPT0gbGluZS5uZXh0KVxuICAgICAgICAgICAgYWZ0ZXItLTtcbiAgICAgICAgaWYgKGFmdGVyID09IGVuZE9mU3BhY2UgfHwgYWZ0ZXIgPT0gb2ZmIHx8ICFzcGFjZShsaW5lLnRleHQuY2hhckNvZGVBdChhZnRlciAtIDEpKSlcbiAgICAgICAgICAgIGFmdGVyID0gbGluZS50ZXh0Lmxlbmd0aDtcbiAgICAgICAgbGV0IGJ1ZiA9IGN4LmJ1ZmZlclxuICAgICAgICAgICAgLndyaXRlKFR5cGUuSGVhZGVyTWFyaywgMCwgc2l6ZSlcbiAgICAgICAgICAgIC53cml0ZUVsZW1lbnRzKGN4LnBhcnNlci5wYXJzZUlubGluZShsaW5lLnRleHQuc2xpY2Uob2ZmICsgc2l6ZSArIDEsIGFmdGVyKSwgZnJvbSArIHNpemUgKyAxKSwgLWZyb20pO1xuICAgICAgICBpZiAoYWZ0ZXIgPCBsaW5lLnRleHQubGVuZ3RoKVxuICAgICAgICAgICAgYnVmLndyaXRlKFR5cGUuSGVhZGVyTWFyaywgYWZ0ZXIgLSBvZmYsIGVuZE9mU3BhY2UgLSBvZmYpO1xuICAgICAgICBsZXQgbm9kZSA9IGJ1Zi5maW5pc2goVHlwZS5BVFhIZWFkaW5nMSAtIDEgKyBzaXplLCBsaW5lLnRleHQubGVuZ3RoIC0gb2ZmKTtcbiAgICAgICAgY3gubmV4dExpbmUoKTtcbiAgICAgICAgY3guYWRkTm9kZShub2RlLCBmcm9tKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBIVE1MQmxvY2soY3gsIGxpbmUpIHtcbiAgICAgICAgbGV0IHR5cGUgPSBpc0hUTUxCbG9jayhsaW5lLCBjeCwgZmFsc2UpO1xuICAgICAgICBpZiAodHlwZSA8IDApXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCBmcm9tID0gY3gubGluZVN0YXJ0ICsgbGluZS5wb3MsIGVuZCA9IEhUTUxCbG9ja1N0eWxlW3R5cGVdWzFdO1xuICAgICAgICBsZXQgbWFya3MgPSBbXSwgdHJhaWxpbmcgPSBlbmQgIT0gRW1wdHlMaW5lO1xuICAgICAgICB3aGlsZSAoIWVuZC50ZXN0KGxpbmUudGV4dCkgJiYgY3gubmV4dExpbmUoKSkge1xuICAgICAgICAgICAgaWYgKGxpbmUuZGVwdGggPCBjeC5zdGFjay5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0cmFpbGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgbSBvZiBsaW5lLm1hcmtlcnMpXG4gICAgICAgICAgICAgICAgbWFya3MucHVzaChtKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhaWxpbmcpXG4gICAgICAgICAgICBjeC5uZXh0TGluZSgpO1xuICAgICAgICBsZXQgbm9kZVR5cGUgPSBlbmQgPT0gQ29tbWVudEVuZCA/IFR5cGUuQ29tbWVudEJsb2NrIDogZW5kID09IFByb2Nlc3NpbmdFbmQgPyBUeXBlLlByb2Nlc3NpbmdJbnN0cnVjdGlvbkJsb2NrIDogVHlwZS5IVE1MQmxvY2s7XG4gICAgICAgIGxldCB0byA9IGN4LnByZXZMaW5lRW5kKCk7XG4gICAgICAgIGN4LmFkZE5vZGUoY3guYnVmZmVyLndyaXRlRWxlbWVudHMobWFya3MsIC1mcm9tKS5maW5pc2gobm9kZVR5cGUsIHRvIC0gZnJvbSksIGZyb20pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIFNldGV4dEhlYWRpbmc6IHVuZGVmaW5lZCAvLyBTcGVjaWZpZXMgcmVsYXRpdmUgcHJlY2VkZW5jZSBmb3IgYmxvY2stY29udGludWUgZnVuY3Rpb25cbn07XG4vLyBUaGlzIGltcGxlbWVudHMgYSBzdGF0ZSBtYWNoaW5lIHRoYXQgaW5jcmVtZW50YWxseSBwYXJzZXMgbGluayByZWZlcmVuY2VzLiBBdCBlYWNoXG4vLyBuZXh0IGxpbmUsIGl0IGxvb2tzIGFoZWFkIHRvIHNlZSBpZiB0aGUgbGluZSBjb250aW51ZXMgdGhlIHJlZmVyZW5jZSBvciBub3QuIElmIGl0XG4vLyBkb2Vzbid0IGFuZCBhIHZhbGlkIGxpbmsgaXMgYXZhaWxhYmxlIGVuZGluZyBiZWZvcmUgdGhhdCBsaW5lLCBpdCBmaW5pc2hlcyB0aGF0LlxuLy8gU2ltaWxhcmx5LCBvbiBgZmluaXNoYCAod2hlbiB0aGUgbGVhZiBpcyB0ZXJtaW5hdGVkIGJ5IGV4dGVybmFsIGNpcmN1bXN0YW5jZXMpLCBpdFxuLy8gY3JlYXRlcyBhIGxpbmsgcmVmZXJlbmNlIGlmIHRoZXJlJ3MgYSB2YWxpZCByZWZlcmVuY2UgdXAgdG8gdGhlIGN1cnJlbnQgcG9pbnQuXG5jbGFzcyBMaW5rUmVmZXJlbmNlUGFyc2VyIHtcbiAgICBjb25zdHJ1Y3RvcihsZWFmKSB7XG4gICAgICAgIHRoaXMuc3RhZ2UgPSAwIC8qIFN0YXJ0ICovO1xuICAgICAgICB0aGlzLmVsdHMgPSBbXTtcbiAgICAgICAgdGhpcy5wb3MgPSAwO1xuICAgICAgICB0aGlzLnN0YXJ0ID0gbGVhZi5zdGFydDtcbiAgICAgICAgdGhpcy5hZHZhbmNlKGxlYWYuY29udGVudCk7XG4gICAgfVxuICAgIG5leHRMaW5lKGN4LCBsaW5lLCBsZWFmKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YWdlID09IC0xIC8qIEZhaWxlZCAqLylcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgbGV0IGNvbnRlbnQgPSBsZWFmLmNvbnRlbnQgKyBcIlxcblwiICsgbGluZS5zY3J1YigpO1xuICAgICAgICBsZXQgZmluaXNoID0gdGhpcy5hZHZhbmNlKGNvbnRlbnQpO1xuICAgICAgICBpZiAoZmluaXNoID4gLTEgJiYgZmluaXNoIDwgY29udGVudC5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb21wbGV0ZShjeCwgbGVhZiwgZmluaXNoKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmaW5pc2goY3gsIGxlYWYpIHtcbiAgICAgICAgaWYgKCh0aGlzLnN0YWdlID09IDIgLyogTGluayAqLyB8fCB0aGlzLnN0YWdlID09IDMgLyogVGl0bGUgKi8pICYmIHNraXBTcGFjZShsZWFmLmNvbnRlbnQsIHRoaXMucG9zKSA9PSBsZWFmLmNvbnRlbnQubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcGxldGUoY3gsIGxlYWYsIGxlYWYuY29udGVudC5sZW5ndGgpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbXBsZXRlKGN4LCBsZWFmLCBsZW4pIHtcbiAgICAgICAgY3guYWRkTGVhZkVsZW1lbnQobGVhZiwgZWx0KFR5cGUuTGlua1JlZmVyZW5jZSwgdGhpcy5zdGFydCwgdGhpcy5zdGFydCArIGxlbiwgdGhpcy5lbHRzKSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBuZXh0U3RhZ2UoZWx0KSB7XG4gICAgICAgIGlmIChlbHQpIHtcbiAgICAgICAgICAgIHRoaXMucG9zID0gZWx0LnRvIC0gdGhpcy5zdGFydDtcbiAgICAgICAgICAgIHRoaXMuZWx0cy5wdXNoKGVsdCk7XG4gICAgICAgICAgICB0aGlzLnN0YWdlKys7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZWx0ID09PSBmYWxzZSlcbiAgICAgICAgICAgIHRoaXMuc3RhZ2UgPSAtMSAvKiBGYWlsZWQgKi87XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgYWR2YW5jZShjb250ZW50KSB7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YWdlID09IC0xIC8qIEZhaWxlZCAqLykge1xuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuc3RhZ2UgPT0gMCAvKiBTdGFydCAqLykge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5uZXh0U3RhZ2UocGFyc2VMaW5rTGFiZWwoY29udGVudCwgdGhpcy5wb3MsIHRoaXMuc3RhcnQsIHRydWUpKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgICAgIGlmIChjb250ZW50LmNoYXJDb2RlQXQodGhpcy5wb3MpICE9IDU4IC8qICc6JyAqLylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhZ2UgPSAtMSAvKiBGYWlsZWQgKi87XG4gICAgICAgICAgICAgICAgdGhpcy5lbHRzLnB1c2goZWx0KFR5cGUuTGlua01hcmssIHRoaXMucG9zICsgdGhpcy5zdGFydCwgdGhpcy5wb3MgKyB0aGlzLnN0YXJ0ICsgMSkpO1xuICAgICAgICAgICAgICAgIHRoaXMucG9zKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLnN0YWdlID09IDEgLyogTGFiZWwgKi8pIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMubmV4dFN0YWdlKHBhcnNlVVJMKGNvbnRlbnQsIHNraXBTcGFjZShjb250ZW50LCB0aGlzLnBvcyksIHRoaXMuc3RhcnQpKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5zdGFnZSA9PSAyIC8qIExpbmsgKi8pIHtcbiAgICAgICAgICAgICAgICBsZXQgc2tpcCA9IHNraXBTcGFjZShjb250ZW50LCB0aGlzLnBvcyksIGVuZCA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKHNraXAgPiB0aGlzLnBvcykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdGl0bGUgPSBwYXJzZUxpbmtUaXRsZShjb250ZW50LCBza2lwLCB0aGlzLnN0YXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpdGxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGl0bGVFbmQgPSBsaW5lRW5kKGNvbnRlbnQsIHRpdGxlLnRvIC0gdGhpcy5zdGFydCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGl0bGVFbmQgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhZ2UodGl0bGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZCA9IHRpdGxlRW5kO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghZW5kKVxuICAgICAgICAgICAgICAgICAgICBlbmQgPSBsaW5lRW5kKGNvbnRlbnQsIHRoaXMucG9zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZW5kID4gMCAmJiBlbmQgPCBjb250ZW50Lmxlbmd0aCA/IGVuZCA6IC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7IC8vIFJlZlN0YWdlLlRpdGxlXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpbmVFbmQoY29udGVudCwgdGhpcy5wb3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gbGluZUVuZCh0ZXh0LCBwb3MpIHtcbiAgICBmb3IgKDsgcG9zIDwgdGV4dC5sZW5ndGg7IHBvcysrKSB7XG4gICAgICAgIGxldCBuZXh0ID0gdGV4dC5jaGFyQ29kZUF0KHBvcyk7XG4gICAgICAgIGlmIChuZXh0ID09IDEwKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGlmICghc3BhY2UobmV4dCkpXG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIHJldHVybiBwb3M7XG59XG5jbGFzcyBTZXRleHRIZWFkaW5nUGFyc2VyIHtcbiAgICBuZXh0TGluZShjeCwgbGluZSwgbGVhZikge1xuICAgICAgICBsZXQgdW5kZXJsaW5lID0gbGluZS5kZXB0aCA8IGN4LnN0YWNrLmxlbmd0aCA/IC0xIDogaXNTZXRleHRVbmRlcmxpbmUobGluZSk7XG4gICAgICAgIGxldCBuZXh0ID0gbGluZS5uZXh0O1xuICAgICAgICBpZiAodW5kZXJsaW5lIDwgMClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgbGV0IHVuZGVybGluZU1hcmsgPSBlbHQoVHlwZS5IZWFkZXJNYXJrLCBjeC5saW5lU3RhcnQgKyBsaW5lLnBvcywgY3gubGluZVN0YXJ0ICsgdW5kZXJsaW5lKTtcbiAgICAgICAgY3gubmV4dExpbmUoKTtcbiAgICAgICAgY3guYWRkTGVhZkVsZW1lbnQobGVhZiwgZWx0KG5leHQgPT0gNjEgPyBUeXBlLlNldGV4dEhlYWRpbmcxIDogVHlwZS5TZXRleHRIZWFkaW5nMiwgbGVhZi5zdGFydCwgY3gucHJldkxpbmVFbmQoKSwgW1xuICAgICAgICAgICAgLi4uY3gucGFyc2VyLnBhcnNlSW5saW5lKGxlYWYuY29udGVudCwgbGVhZi5zdGFydCksXG4gICAgICAgICAgICB1bmRlcmxpbmVNYXJrXG4gICAgICAgIF0pKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGZpbmlzaCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbmNvbnN0IERlZmF1bHRMZWFmQmxvY2tzID0ge1xuICAgIExpbmtSZWZlcmVuY2UoXywgbGVhZikgeyByZXR1cm4gbGVhZi5jb250ZW50LmNoYXJDb2RlQXQoMCkgPT0gOTEgLyogJ1snICovID8gbmV3IExpbmtSZWZlcmVuY2VQYXJzZXIobGVhZikgOiBudWxsOyB9LFxuICAgIFNldGV4dEhlYWRpbmcoKSB7IHJldHVybiBuZXcgU2V0ZXh0SGVhZGluZ1BhcnNlcjsgfVxufTtcbmNvbnN0IERlZmF1bHRFbmRMZWFmID0gW1xuICAgIChfLCBsaW5lKSA9PiBpc0F0eEhlYWRpbmcobGluZSkgPj0gMCxcbiAgICAoXywgbGluZSkgPT4gaXNGZW5jZWRDb2RlKGxpbmUpID49IDAsXG4gICAgKF8sIGxpbmUpID0+IGlzQmxvY2txdW90ZShsaW5lKSA+PSAwLFxuICAgIChwLCBsaW5lKSA9PiBpc0J1bGxldExpc3QobGluZSwgcCwgdHJ1ZSkgPj0gMCxcbiAgICAocCwgbGluZSkgPT4gaXNPcmRlcmVkTGlzdChsaW5lLCBwLCB0cnVlKSA+PSAwLFxuICAgIChwLCBsaW5lKSA9PiBpc0hvcml6b250YWxSdWxlKGxpbmUsIHAsIHRydWUpID49IDAsXG4gICAgKHAsIGxpbmUpID0+IGlzSFRNTEJsb2NrKGxpbmUsIHAsIHRydWUpID49IDBcbl07XG5jb25zdCBzY2FuTGluZVJlc3VsdCA9IHsgdGV4dDogXCJcIiwgZW5kOiAwIH07XG4vLy8gQmxvY2stbGV2ZWwgcGFyc2luZyBmdW5jdGlvbnMgZ2V0IGFjY2VzcyB0byB0aGlzIGNvbnRleHQgb2JqZWN0LlxuY2xhc3MgQmxvY2tDb250ZXh0IHtcbiAgICAvLy8gQGludGVybmFsXG4gICAgY29uc3RydWN0b3IoXG4gICAgLy8vIFRoZSBwYXJzZXIgY29uZmlndXJhdGlvbiB1c2VkLlxuICAgIHBhcnNlciwgXG4gICAgLy8vIEBpbnRlcm5hbFxuICAgIGlucHV0LCBmcmFnbWVudHMsIFxuICAgIC8vLyBAaW50ZXJuYWxcbiAgICByYW5nZXMpIHtcbiAgICAgICAgdGhpcy5wYXJzZXIgPSBwYXJzZXI7XG4gICAgICAgIHRoaXMuaW5wdXQgPSBpbnB1dDtcbiAgICAgICAgdGhpcy5yYW5nZXMgPSByYW5nZXM7XG4gICAgICAgIHRoaXMubGluZSA9IG5ldyBMaW5lKCk7XG4gICAgICAgIHRoaXMuYXRFbmQgPSBmYWxzZTtcbiAgICAgICAgLy8vIEBpbnRlcm5hbFxuICAgICAgICB0aGlzLmRvbnRJbmplY3QgPSBuZXcgU2V0O1xuICAgICAgICB0aGlzLnN0b3BwZWRBdCA9IG51bGw7XG4gICAgICAgIC8vLyBUaGUgcmFuZ2UgaW5kZXggdGhhdCBhYnNvbHV0ZUxpbmVTdGFydCBwb2ludHMgaW50byBAaW50ZXJuYWxcbiAgICAgICAgdGhpcy5yYW5nZUkgPSAwO1xuICAgICAgICB0aGlzLnRvID0gcmFuZ2VzW3Jhbmdlcy5sZW5ndGggLSAxXS50bztcbiAgICAgICAgdGhpcy5saW5lU3RhcnQgPSB0aGlzLmFic29sdXRlTGluZVN0YXJ0ID0gdGhpcy5hYnNvbHV0ZUxpbmVFbmQgPSByYW5nZXNbMF0uZnJvbTtcbiAgICAgICAgdGhpcy5ibG9jayA9IENvbXBvc2l0ZUJsb2NrLmNyZWF0ZShUeXBlLkRvY3VtZW50LCAwLCB0aGlzLmxpbmVTdGFydCwgMCwgMCk7XG4gICAgICAgIHRoaXMuc3RhY2sgPSBbdGhpcy5ibG9ja107XG4gICAgICAgIHRoaXMuZnJhZ21lbnRzID0gZnJhZ21lbnRzLmxlbmd0aCA/IG5ldyBGcmFnbWVudEN1cnNvcihmcmFnbWVudHMsIGlucHV0KSA6IG51bGw7XG4gICAgICAgIHRoaXMucmVhZExpbmUoKTtcbiAgICB9XG4gICAgZ2V0IHBhcnNlZFBvcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWJzb2x1dGVMaW5lU3RhcnQ7XG4gICAgfVxuICAgIGFkdmFuY2UoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0b3BwZWRBdCAhPSBudWxsICYmIHRoaXMuYWJzb2x1dGVMaW5lU3RhcnQgPiB0aGlzLnN0b3BwZWRBdClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbmlzaCgpO1xuICAgICAgICBsZXQgeyBsaW5lIH0gPSB0aGlzO1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICB3aGlsZSAobGluZS5kZXB0aCA8IHRoaXMuc3RhY2subGVuZ3RoKVxuICAgICAgICAgICAgICAgIHRoaXMuZmluaXNoQ29udGV4dCgpO1xuICAgICAgICAgICAgZm9yIChsZXQgbWFyayBvZiBsaW5lLm1hcmtlcnMpXG4gICAgICAgICAgICAgICAgdGhpcy5hZGROb2RlKG1hcmsudHlwZSwgbWFyay5mcm9tLCBtYXJrLnRvKTtcbiAgICAgICAgICAgIGlmIChsaW5lLnBvcyA8IGxpbmUudGV4dC5sZW5ndGgpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAvLyBFbXB0eSBsaW5lXG4gICAgICAgICAgICBpZiAoIXRoaXMubmV4dExpbmUoKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5maW5pc2goKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5mcmFnbWVudHMgJiYgdGhpcy5yZXVzZUZyYWdtZW50KGxpbmUuYmFzZVBvcykpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgc3RhcnQ6IGZvciAoOzspIHtcbiAgICAgICAgICAgIGZvciAobGV0IHR5cGUgb2YgdGhpcy5wYXJzZXIuYmxvY2tQYXJzZXJzKVxuICAgICAgICAgICAgICAgIGlmICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSB0eXBlKHRoaXMsIGxpbmUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09IHRydWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lLmZvcndhcmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlIHN0YXJ0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxlYWYgPSBuZXcgTGVhZkJsb2NrKHRoaXMubGluZVN0YXJ0ICsgbGluZS5wb3MsIGxpbmUudGV4dC5zbGljZShsaW5lLnBvcykpO1xuICAgICAgICBmb3IgKGxldCBwYXJzZSBvZiB0aGlzLnBhcnNlci5sZWFmQmxvY2tQYXJzZXJzKVxuICAgICAgICAgICAgaWYgKHBhcnNlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHBhcnNlciA9IHBhcnNlKHRoaXMsIGxlYWYpO1xuICAgICAgICAgICAgICAgIGlmIChwYXJzZXIpXG4gICAgICAgICAgICAgICAgICAgIGxlYWYucGFyc2Vycy5wdXNoKHBhcnNlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIGxpbmVzOiB3aGlsZSAodGhpcy5uZXh0TGluZSgpKSB7XG4gICAgICAgICAgICBpZiAobGluZS5wb3MgPT0gbGluZS50ZXh0Lmxlbmd0aClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGlmIChsaW5lLmluZGVudCA8IGxpbmUuYmFzZUluZGVudCArIDQpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBzdG9wIG9mIHRoaXMucGFyc2VyLmVuZExlYWZCbG9jaylcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3AodGhpcywgbGluZSwgbGVhZikpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhayBsaW5lcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IHBhcnNlciBvZiBsZWFmLnBhcnNlcnMpXG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlci5uZXh0TGluZSh0aGlzLCBsaW5lLCBsZWFmKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBsZWFmLmNvbnRlbnQgKz0gXCJcXG5cIiArIGxpbmUuc2NydWIoKTtcbiAgICAgICAgICAgIGZvciAobGV0IG0gb2YgbGluZS5tYXJrZXJzKVxuICAgICAgICAgICAgICAgIGxlYWYubWFya3MucHVzaChtKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZpbmlzaExlYWYobGVhZik7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBzdG9wQXQocG9zKSB7XG4gICAgICAgIGlmICh0aGlzLnN0b3BwZWRBdCAhPSBudWxsICYmIHRoaXMuc3RvcHBlZEF0IDwgcG9zKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJDYW4ndCBtb3ZlIHN0b3BwZWRBdCBmb3J3YXJkXCIpO1xuICAgICAgICB0aGlzLnN0b3BwZWRBdCA9IHBvcztcbiAgICB9XG4gICAgcmV1c2VGcmFnbWVudChzdGFydCkge1xuICAgICAgICBpZiAoIXRoaXMuZnJhZ21lbnRzLm1vdmVUbyh0aGlzLmFic29sdXRlTGluZVN0YXJ0ICsgc3RhcnQsIHRoaXMuYWJzb2x1dGVMaW5lU3RhcnQpIHx8XG4gICAgICAgICAgICAhdGhpcy5mcmFnbWVudHMubWF0Y2hlcyh0aGlzLmJsb2NrLmhhc2gpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBsZXQgdGFrZW4gPSB0aGlzLmZyYWdtZW50cy50YWtlTm9kZXModGhpcyk7XG4gICAgICAgIGlmICghdGFrZW4pXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCB3aXRob3V0R2FwcyA9IHRha2VuLCBlbmQgPSB0aGlzLmFic29sdXRlTGluZVN0YXJ0ICsgdGFrZW47XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5yYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBnYXBGcm9tID0gdGhpcy5yYW5nZXNbaSAtIDFdLnRvLCBnYXBUbyA9IHRoaXMucmFuZ2VzW2ldLmZyb207XG4gICAgICAgICAgICBpZiAoZ2FwRnJvbSA+PSB0aGlzLmxpbmVTdGFydCAmJiBnYXBUbyA8IGVuZClcbiAgICAgICAgICAgICAgICB3aXRob3V0R2FwcyAtPSBnYXBUbyAtIGdhcEZyb207XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5saW5lU3RhcnQgKz0gd2l0aG91dEdhcHM7XG4gICAgICAgIHRoaXMuYWJzb2x1dGVMaW5lU3RhcnQgKz0gdGFrZW47XG4gICAgICAgIHRoaXMubW92ZVJhbmdlSSgpO1xuICAgICAgICBpZiAodGhpcy5hYnNvbHV0ZUxpbmVTdGFydCA8IHRoaXMudG8pIHtcbiAgICAgICAgICAgIHRoaXMubGluZVN0YXJ0Kys7XG4gICAgICAgICAgICB0aGlzLmFic29sdXRlTGluZVN0YXJ0Kys7XG4gICAgICAgICAgICB0aGlzLnJlYWRMaW5lKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmF0RW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucmVhZExpbmUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLy8vIFRoZSBudW1iZXIgb2YgcGFyZW50IGJsb2NrcyBzdXJyb3VuZGluZyB0aGUgY3VycmVudCBibG9jay5cbiAgICBnZXQgZGVwdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YWNrLmxlbmd0aDtcbiAgICB9XG4gICAgLy8vIEdldCB0aGUgdHlwZSBvZiB0aGUgcGFyZW50IGJsb2NrIGF0IHRoZSBnaXZlbiBkZXB0aC4gV2hlbiBub1xuICAgIC8vLyBkZXB0aCBpcyBwYXNzZWQsIHJldHVybiB0aGUgdHlwZSBvZiB0aGUgaW5uZXJtb3N0IHBhcmVudC5cbiAgICBwYXJlbnRUeXBlKGRlcHRoID0gdGhpcy5kZXB0aCAtIDEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VyLm5vZGVTZXQudHlwZXNbdGhpcy5zdGFja1tkZXB0aF0udHlwZV07XG4gICAgfVxuICAgIC8vLyBNb3ZlIHRvIHRoZSBuZXh0IGlucHV0IGxpbmUuIFRoaXMgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGJ5XG4gICAgLy8vIChub24tY29tcG9zaXRlKSBbYmxvY2sgcGFyc2Vyc10oI0Jsb2NrUGFyc2VyLnBhcnNlKSB0aGF0IGNvbnN1bWVcbiAgICAvLy8gdGhlIGxpbmUgZGlyZWN0bHksIG9yIGxlYWYgYmxvY2sgcGFyc2VyXG4gICAgLy8vIFtgbmV4dExpbmVgXSgjTGVhZkJsb2NrUGFyc2VyLm5leHRMaW5lKSBtZXRob2RzIHdoZW4gdGhleVxuICAgIC8vLyBjb25zdW1lIHRoZSBjdXJyZW50IGxpbmUgKGFuZCByZXR1cm4gdHJ1ZSkuXG4gICAgbmV4dExpbmUoKSB7XG4gICAgICAgIHRoaXMubGluZVN0YXJ0ICs9IHRoaXMubGluZS50ZXh0Lmxlbmd0aDtcbiAgICAgICAgaWYgKHRoaXMuYWJzb2x1dGVMaW5lRW5kID49IHRoaXMudG8pIHtcbiAgICAgICAgICAgIHRoaXMuYWJzb2x1dGVMaW5lU3RhcnQgPSB0aGlzLmFic29sdXRlTGluZUVuZDtcbiAgICAgICAgICAgIHRoaXMuYXRFbmQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5yZWFkTGluZSgpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5saW5lU3RhcnQrKztcbiAgICAgICAgICAgIHRoaXMuYWJzb2x1dGVMaW5lU3RhcnQgPSB0aGlzLmFic29sdXRlTGluZUVuZCArIDE7XG4gICAgICAgICAgICB0aGlzLm1vdmVSYW5nZUkoKTtcbiAgICAgICAgICAgIHRoaXMucmVhZExpbmUoKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIG1vdmVSYW5nZUkoKSB7XG4gICAgICAgIHdoaWxlICh0aGlzLnJhbmdlSSA8IHRoaXMucmFuZ2VzLmxlbmd0aCAtIDEgJiYgdGhpcy5hYnNvbHV0ZUxpbmVTdGFydCA+PSB0aGlzLnJhbmdlc1t0aGlzLnJhbmdlSV0udG8pIHtcbiAgICAgICAgICAgIHRoaXMucmFuZ2VJKys7XG4gICAgICAgICAgICB0aGlzLmFic29sdXRlTGluZVN0YXJ0ID0gTWF0aC5tYXgodGhpcy5hYnNvbHV0ZUxpbmVTdGFydCwgdGhpcy5yYW5nZXNbdGhpcy5yYW5nZUldLmZyb20pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vLyBAaW50ZXJuYWxcbiAgICBzY2FuTGluZShzdGFydCkge1xuICAgICAgICBsZXQgciA9IHNjYW5MaW5lUmVzdWx0O1xuICAgICAgICByLmVuZCA9IHN0YXJ0O1xuICAgICAgICBpZiAoc3RhcnQgPj0gdGhpcy50bykge1xuICAgICAgICAgICAgci50ZXh0ID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHIudGV4dCA9IHRoaXMubGluZUNodW5rQXQoc3RhcnQpO1xuICAgICAgICAgICAgci5lbmQgKz0gci50ZXh0Lmxlbmd0aDtcbiAgICAgICAgICAgIGlmICh0aGlzLnJhbmdlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRleHRPZmZzZXQgPSB0aGlzLmFic29sdXRlTGluZVN0YXJ0LCByYW5nZUkgPSB0aGlzLnJhbmdlSTtcbiAgICAgICAgICAgICAgICB3aGlsZSAodGhpcy5yYW5nZXNbcmFuZ2VJXS50byA8IHIuZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlSSsrO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbmV4dEZyb20gPSB0aGlzLnJhbmdlc1tyYW5nZUldLmZyb207XG4gICAgICAgICAgICAgICAgICAgIGxldCBhZnRlciA9IHRoaXMubGluZUNodW5rQXQobmV4dEZyb20pO1xuICAgICAgICAgICAgICAgICAgICByLmVuZCA9IG5leHRGcm9tICsgYWZ0ZXIubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICByLnRleHQgPSByLnRleHQuc2xpY2UoMCwgdGhpcy5yYW5nZXNbcmFuZ2VJIC0gMV0udG8gLSB0ZXh0T2Zmc2V0KSArIGFmdGVyO1xuICAgICAgICAgICAgICAgICAgICB0ZXh0T2Zmc2V0ID0gci5lbmQgLSByLnRleHQubGVuZ3RoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcjtcbiAgICB9XG4gICAgLy8vIEBpbnRlcm5hbFxuICAgIHJlYWRMaW5lKCkge1xuICAgICAgICBsZXQgeyBsaW5lIH0gPSB0aGlzLCB7IHRleHQsIGVuZCB9ID0gdGhpcy5zY2FuTGluZSh0aGlzLmFic29sdXRlTGluZVN0YXJ0KTtcbiAgICAgICAgdGhpcy5hYnNvbHV0ZUxpbmVFbmQgPSBlbmQ7XG4gICAgICAgIGxpbmUucmVzZXQodGV4dCk7XG4gICAgICAgIGZvciAoOyBsaW5lLmRlcHRoIDwgdGhpcy5zdGFjay5sZW5ndGg7IGxpbmUuZGVwdGgrKykge1xuICAgICAgICAgICAgbGV0IGN4ID0gdGhpcy5zdGFja1tsaW5lLmRlcHRoXSwgaGFuZGxlciA9IHRoaXMucGFyc2VyLnNraXBDb250ZXh0TWFya3VwW2N4LnR5cGVdO1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuaGFuZGxlZCBibG9jayBjb250ZXh0IFwiICsgVHlwZVtjeC50eXBlXSk7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIoY3gsIHRoaXMsIGxpbmUpKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgbGluZS5mb3J3YXJkKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGluZUNodW5rQXQocG9zKSB7XG4gICAgICAgIGxldCBuZXh0ID0gdGhpcy5pbnB1dC5jaHVuayhwb3MpLCB0ZXh0O1xuICAgICAgICBpZiAoIXRoaXMuaW5wdXQubGluZUNodW5rcykge1xuICAgICAgICAgICAgbGV0IGVvbCA9IG5leHQuaW5kZXhPZihcIlxcblwiKTtcbiAgICAgICAgICAgIHRleHQgPSBlb2wgPCAwID8gbmV4dCA6IG5leHQuc2xpY2UoMCwgZW9sKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRleHQgPSBuZXh0ID09IFwiXFxuXCIgPyBcIlwiIDogbmV4dDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcG9zICsgdGV4dC5sZW5ndGggPiB0aGlzLnRvID8gdGV4dC5zbGljZSgwLCB0aGlzLnRvIC0gcG9zKSA6IHRleHQ7XG4gICAgfVxuICAgIC8vLyBUaGUgZW5kIHBvc2l0aW9uIG9mIHRoZSBwcmV2aW91cyBsaW5lLlxuICAgIHByZXZMaW5lRW5kKCkgeyByZXR1cm4gdGhpcy5hdEVuZCA/IHRoaXMubGluZVN0YXJ0IDogdGhpcy5saW5lU3RhcnQgLSAxOyB9XG4gICAgLy8vIEBpbnRlcm5hbFxuICAgIHN0YXJ0Q29udGV4dCh0eXBlLCBzdGFydCwgdmFsdWUgPSAwKSB7XG4gICAgICAgIHRoaXMuYmxvY2sgPSBDb21wb3NpdGVCbG9jay5jcmVhdGUodHlwZSwgdmFsdWUsIHRoaXMubGluZVN0YXJ0ICsgc3RhcnQsIHRoaXMuYmxvY2suaGFzaCwgdGhpcy5saW5lU3RhcnQgKyB0aGlzLmxpbmUudGV4dC5sZW5ndGgpO1xuICAgICAgICB0aGlzLnN0YWNrLnB1c2godGhpcy5ibG9jayk7XG4gICAgfVxuICAgIC8vLyBTdGFydCBhIGNvbXBvc2l0ZSBibG9jay4gU2hvdWxkIG9ubHkgYmUgY2FsbGVkIGZyb20gW2Jsb2NrXG4gICAgLy8vIHBhcnNlciBmdW5jdGlvbnNdKCNCbG9ja1BhcnNlci5wYXJzZSkgdGhhdCByZXR1cm4gbnVsbC5cbiAgICBzdGFydENvbXBvc2l0ZSh0eXBlLCBzdGFydCwgdmFsdWUgPSAwKSB7XG4gICAgICAgIHRoaXMuc3RhcnRDb250ZXh0KHRoaXMucGFyc2VyLmdldE5vZGVUeXBlKHR5cGUpLCBzdGFydCwgdmFsdWUpO1xuICAgIH1cbiAgICAvLy8gQGludGVybmFsXG4gICAgYWRkTm9kZShibG9jaywgZnJvbSwgdG8pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBibG9jayA9PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgYmxvY2sgPSBuZXcgVHJlZSh0aGlzLnBhcnNlci5ub2RlU2V0LnR5cGVzW2Jsb2NrXSwgbm9uZSwgbm9uZSwgKHRvICE9PSBudWxsICYmIHRvICE9PSB2b2lkIDAgPyB0byA6IHRoaXMucHJldkxpbmVFbmQoKSkgLSBmcm9tKTtcbiAgICAgICAgdGhpcy5ibG9jay5hZGRDaGlsZChibG9jaywgZnJvbSAtIHRoaXMuYmxvY2suZnJvbSk7XG4gICAgfVxuICAgIC8vLyBBZGQgYSBibG9jayBlbGVtZW50LiBDYW4gYmUgY2FsbGVkIGJ5IFtibG9ja1xuICAgIC8vLyBwYXJzZXJzXSgjQmxvY2tQYXJzZXIucGFyc2UpLlxuICAgIGFkZEVsZW1lbnQoZWx0KSB7XG4gICAgICAgIHRoaXMuYmxvY2suYWRkQ2hpbGQoZWx0LnRvVHJlZSh0aGlzLnBhcnNlci5ub2RlU2V0KSwgZWx0LmZyb20gLSB0aGlzLmJsb2NrLmZyb20pO1xuICAgIH1cbiAgICAvLy8gQWRkIGEgYmxvY2sgZWxlbWVudCBmcm9tIGEgW2xlYWYgcGFyc2VyXSgjTGVhZkJsb2NrUGFyc2VyKS4gVGhpc1xuICAgIC8vLyBtYWtlcyBzdXJlIGFueSBleHRyYSBjb21wb3NpdGUgYmxvY2sgbWFya3VwIChzdWNoIGFzIGJsb2NrcXVvdGVcbiAgICAvLy8gbWFya2VycykgaW5zaWRlIHRoZSBibG9jayBhcmUgYWxzbyBhZGRlZCB0byB0aGUgc3ludGF4IHRyZWUuXG4gICAgYWRkTGVhZkVsZW1lbnQobGVhZiwgZWx0KSB7XG4gICAgICAgIHRoaXMuYWRkTm9kZSh0aGlzLmJ1ZmZlclxuICAgICAgICAgICAgLndyaXRlRWxlbWVudHMoaW5qZWN0TWFya3MoZWx0LmNoaWxkcmVuLCBsZWFmLm1hcmtzKSwgLWVsdC5mcm9tKVxuICAgICAgICAgICAgLmZpbmlzaChlbHQudHlwZSwgZWx0LnRvIC0gZWx0LmZyb20pLCBlbHQuZnJvbSk7XG4gICAgfVxuICAgIC8vLyBAaW50ZXJuYWxcbiAgICBmaW5pc2hDb250ZXh0KCkge1xuICAgICAgICBsZXQgY3ggPSB0aGlzLnN0YWNrLnBvcCgpO1xuICAgICAgICBsZXQgdG9wID0gdGhpcy5zdGFja1t0aGlzLnN0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgICB0b3AuYWRkQ2hpbGQoY3gudG9UcmVlKHRoaXMucGFyc2VyLm5vZGVTZXQpLCBjeC5mcm9tIC0gdG9wLmZyb20pO1xuICAgICAgICB0aGlzLmJsb2NrID0gdG9wO1xuICAgIH1cbiAgICBmaW5pc2goKSB7XG4gICAgICAgIHdoaWxlICh0aGlzLnN0YWNrLmxlbmd0aCA+IDEpXG4gICAgICAgICAgICB0aGlzLmZpbmlzaENvbnRleHQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkR2Fwcyh0aGlzLmJsb2NrLnRvVHJlZSh0aGlzLnBhcnNlci5ub2RlU2V0LCB0aGlzLmxpbmVTdGFydCkpO1xuICAgIH1cbiAgICBhZGRHYXBzKHRyZWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmFuZ2VzLmxlbmd0aCA+IDEgPyBpbmplY3RHYXBzKHRoaXMucmFuZ2VzLCAwLCB0cmVlLnRvcE5vZGUsIHRoaXMucmFuZ2VzWzBdLmZyb20sIHRoaXMuZG9udEluamVjdCkgOiB0cmVlO1xuICAgIH1cbiAgICAvLy8gQGludGVybmFsXG4gICAgZmluaXNoTGVhZihsZWFmKSB7XG4gICAgICAgIGZvciAobGV0IHBhcnNlciBvZiBsZWFmLnBhcnNlcnMpXG4gICAgICAgICAgICBpZiAocGFyc2VyLmZpbmlzaCh0aGlzLCBsZWFmKSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCBpbmxpbmUgPSBpbmplY3RNYXJrcyh0aGlzLnBhcnNlci5wYXJzZUlubGluZShsZWFmLmNvbnRlbnQsIGxlYWYuc3RhcnQpLCBsZWFmLm1hcmtzKTtcbiAgICAgICAgdGhpcy5hZGROb2RlKHRoaXMuYnVmZmVyXG4gICAgICAgICAgICAud3JpdGVFbGVtZW50cyhpbmxpbmUsIC1sZWFmLnN0YXJ0KVxuICAgICAgICAgICAgLmZpbmlzaChUeXBlLlBhcmFncmFwaCwgbGVhZi5jb250ZW50Lmxlbmd0aCksIGxlYWYuc3RhcnQpO1xuICAgIH1cbiAgICBlbHQodHlwZSwgZnJvbSwgdG8sIGNoaWxkcmVuKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdHlwZSA9PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgcmV0dXJuIGVsdCh0aGlzLnBhcnNlci5nZXROb2RlVHlwZSh0eXBlKSwgZnJvbSwgdG8sIGNoaWxkcmVuKTtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmVlRWxlbWVudCh0eXBlLCBmcm9tKTtcbiAgICB9XG4gICAgLy8vIEBpbnRlcm5hbFxuICAgIGdldCBidWZmZXIoKSB7IHJldHVybiBuZXcgQnVmZmVyKHRoaXMucGFyc2VyLm5vZGVTZXQpOyB9XG59XG5mdW5jdGlvbiBpbmplY3RHYXBzKHJhbmdlcywgcmFuZ2VJLCB0cmVlLCBvZmZzZXQsIGRvbnQpIHtcbiAgICBpZiAoZG9udC5oYXModHJlZS50cmVlKSlcbiAgICAgICAgcmV0dXJuIHRyZWUudHJlZTtcbiAgICBsZXQgcmFuZ2VFbmQgPSByYW5nZXNbcmFuZ2VJXS50bztcbiAgICBsZXQgY2hpbGRyZW4gPSBbXSwgcG9zaXRpb25zID0gW10sIHN0YXJ0ID0gdHJlZS5mcm9tICsgb2Zmc2V0O1xuICAgIGZ1bmN0aW9uIG1vdmVQYXN0TmV4dCh1cHRvLCBpbmNsdXNpdmUpIHtcbiAgICAgICAgd2hpbGUgKGluY2x1c2l2ZSA/IHVwdG8gPj0gcmFuZ2VFbmQgOiB1cHRvID4gcmFuZ2VFbmQpIHtcbiAgICAgICAgICAgIGxldCBzaXplID0gcmFuZ2VzW3JhbmdlSSArIDFdLmZyb20gLSByYW5nZUVuZDtcbiAgICAgICAgICAgIG9mZnNldCArPSBzaXplO1xuICAgICAgICAgICAgdXB0byArPSBzaXplO1xuICAgICAgICAgICAgcmFuZ2VJKys7XG4gICAgICAgICAgICByYW5nZUVuZCA9IHJhbmdlc1tyYW5nZUldLnRvO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAobGV0IGNoID0gdHJlZS5maXJzdENoaWxkOyBjaDsgY2ggPSBjaC5uZXh0U2libGluZykge1xuICAgICAgICBtb3ZlUGFzdE5leHQoY2guZnJvbSArIG9mZnNldCwgdHJ1ZSk7XG4gICAgICAgIGxldCBmcm9tID0gY2guZnJvbSArIG9mZnNldCwgbm9kZTtcbiAgICAgICAgaWYgKGNoLnRvICsgb2Zmc2V0ID4gcmFuZ2VFbmQpIHtcbiAgICAgICAgICAgIG5vZGUgPSBpbmplY3RHYXBzKHJhbmdlcywgcmFuZ2VJLCBjaCwgb2Zmc2V0LCBkb250KTtcbiAgICAgICAgICAgIG1vdmVQYXN0TmV4dChjaC50byArIG9mZnNldCwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbm9kZSA9IGNoLnRvVHJlZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNoaWxkcmVuLnB1c2gobm9kZSk7XG4gICAgICAgIHBvc2l0aW9ucy5wdXNoKGZyb20gLSBzdGFydCk7XG4gICAgfVxuICAgIG1vdmVQYXN0TmV4dCh0cmVlLnRvICsgb2Zmc2V0LCBmYWxzZSk7XG4gICAgcmV0dXJuIG5ldyBUcmVlKHRyZWUudHlwZSwgY2hpbGRyZW4sIHBvc2l0aW9ucywgdHJlZS50byArIG9mZnNldCAtIHN0YXJ0LCB0cmVlLnRyZWUgPyB0cmVlLnRyZWUucHJvcFZhbHVlcyA6IHVuZGVmaW5lZCk7XG59XG4vLy8gQSBNYXJrZG93biBwYXJzZXIgY29uZmlndXJhdGlvbi5cbmNsYXNzIE1hcmtkb3duUGFyc2VyIGV4dGVuZHMgUGFyc2VyIHtcbiAgICAvLy8gQGludGVybmFsXG4gICAgY29uc3RydWN0b3IoXG4gICAgLy8vIFRoZSBwYXJzZXIncyBzeW50YXggW25vZGVcbiAgICAvLy8gdHlwZXNdKGh0dHBzOi8vbGV6ZXIuY29kZW1pcnJvci5uZXQvZG9jcy9yZWYvI2NvbW1vbi5Ob2RlU2V0KS5cbiAgICBub2RlU2V0LCBcbiAgICAvLy8gQGludGVybmFsXG4gICAgYmxvY2tQYXJzZXJzLCBcbiAgICAvLy8gQGludGVybmFsXG4gICAgbGVhZkJsb2NrUGFyc2VycywgXG4gICAgLy8vIEBpbnRlcm5hbFxuICAgIGJsb2NrTmFtZXMsIFxuICAgIC8vLyBAaW50ZXJuYWxcbiAgICBlbmRMZWFmQmxvY2ssIFxuICAgIC8vLyBAaW50ZXJuYWxcbiAgICBza2lwQ29udGV4dE1hcmt1cCwgXG4gICAgLy8vIEBpbnRlcm5hbFxuICAgIGlubGluZVBhcnNlcnMsIFxuICAgIC8vLyBAaW50ZXJuYWxcbiAgICBpbmxpbmVOYW1lcywgXG4gICAgLy8vIEBpbnRlcm5hbFxuICAgIHdyYXBwZXJzKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMubm9kZVNldCA9IG5vZGVTZXQ7XG4gICAgICAgIHRoaXMuYmxvY2tQYXJzZXJzID0gYmxvY2tQYXJzZXJzO1xuICAgICAgICB0aGlzLmxlYWZCbG9ja1BhcnNlcnMgPSBsZWFmQmxvY2tQYXJzZXJzO1xuICAgICAgICB0aGlzLmJsb2NrTmFtZXMgPSBibG9ja05hbWVzO1xuICAgICAgICB0aGlzLmVuZExlYWZCbG9jayA9IGVuZExlYWZCbG9jaztcbiAgICAgICAgdGhpcy5za2lwQ29udGV4dE1hcmt1cCA9IHNraXBDb250ZXh0TWFya3VwO1xuICAgICAgICB0aGlzLmlubGluZVBhcnNlcnMgPSBpbmxpbmVQYXJzZXJzO1xuICAgICAgICB0aGlzLmlubGluZU5hbWVzID0gaW5saW5lTmFtZXM7XG4gICAgICAgIHRoaXMud3JhcHBlcnMgPSB3cmFwcGVycztcbiAgICAgICAgLy8vIEBpbnRlcm5hbFxuICAgICAgICB0aGlzLm5vZGVUeXBlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIGZvciAobGV0IHQgb2Ygbm9kZVNldC50eXBlcylcbiAgICAgICAgICAgIHRoaXMubm9kZVR5cGVzW3QubmFtZV0gPSB0LmlkO1xuICAgIH1cbiAgICBjcmVhdGVQYXJzZShpbnB1dCwgZnJhZ21lbnRzLCByYW5nZXMpIHtcbiAgICAgICAgbGV0IHBhcnNlID0gbmV3IEJsb2NrQ29udGV4dCh0aGlzLCBpbnB1dCwgZnJhZ21lbnRzLCByYW5nZXMpO1xuICAgICAgICBmb3IgKGxldCB3IG9mIHRoaXMud3JhcHBlcnMpXG4gICAgICAgICAgICBwYXJzZSA9IHcocGFyc2UsIGlucHV0LCBmcmFnbWVudHMsIHJhbmdlcyk7XG4gICAgICAgIHJldHVybiBwYXJzZTtcbiAgICB9XG4gICAgLy8vIFJlY29uZmlndXJlIHRoZSBwYXJzZXIuXG4gICAgY29uZmlndXJlKHNwZWMpIHtcbiAgICAgICAgbGV0IGNvbmZpZyA9IHJlc29sdmVDb25maWcoc3BlYyk7XG4gICAgICAgIGlmICghY29uZmlnKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIGxldCB7IG5vZGVTZXQsIHNraXBDb250ZXh0TWFya3VwIH0gPSB0aGlzO1xuICAgICAgICBsZXQgYmxvY2tQYXJzZXJzID0gdGhpcy5ibG9ja1BhcnNlcnMuc2xpY2UoKSwgbGVhZkJsb2NrUGFyc2VycyA9IHRoaXMubGVhZkJsb2NrUGFyc2Vycy5zbGljZSgpLCBibG9ja05hbWVzID0gdGhpcy5ibG9ja05hbWVzLnNsaWNlKCksIGlubGluZVBhcnNlcnMgPSB0aGlzLmlubGluZVBhcnNlcnMuc2xpY2UoKSwgaW5saW5lTmFtZXMgPSB0aGlzLmlubGluZU5hbWVzLnNsaWNlKCksIGVuZExlYWZCbG9jayA9IHRoaXMuZW5kTGVhZkJsb2NrLnNsaWNlKCksIHdyYXBwZXJzID0gdGhpcy53cmFwcGVycztcbiAgICAgICAgaWYgKG5vbkVtcHR5KGNvbmZpZy5kZWZpbmVOb2RlcykpIHtcbiAgICAgICAgICAgIHNraXBDb250ZXh0TWFya3VwID0gT2JqZWN0LmFzc2lnbih7fSwgc2tpcENvbnRleHRNYXJrdXApO1xuICAgICAgICAgICAgbGV0IG5vZGVUeXBlcyA9IG5vZGVTZXQudHlwZXMuc2xpY2UoKSwgc3R5bGVzO1xuICAgICAgICAgICAgZm9yIChsZXQgcyBvZiBjb25maWcuZGVmaW5lTm9kZXMpIHtcbiAgICAgICAgICAgICAgICBsZXQgeyBuYW1lLCBibG9jaywgY29tcG9zaXRlLCBzdHlsZSB9ID0gdHlwZW9mIHMgPT0gXCJzdHJpbmdcIiA/IHsgbmFtZTogcyB9IDogcztcbiAgICAgICAgICAgICAgICBpZiAobm9kZVR5cGVzLnNvbWUodCA9PiB0Lm5hbWUgPT0gbmFtZSkpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGlmIChjb21wb3NpdGUpXG4gICAgICAgICAgICAgICAgICAgIHNraXBDb250ZXh0TWFya3VwW25vZGVUeXBlcy5sZW5ndGhdID1cbiAgICAgICAgICAgICAgICAgICAgICAgIChibCwgY3gsIGxpbmUpID0+IGNvbXBvc2l0ZShjeCwgbGluZSwgYmwudmFsdWUpO1xuICAgICAgICAgICAgICAgIGxldCBpZCA9IG5vZGVUeXBlcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgbGV0IGdyb3VwID0gY29tcG9zaXRlID8gW1wiQmxvY2tcIiwgXCJCbG9ja0NvbnRleHRcIl0gOiAhYmxvY2sgPyB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgOiBpZCA+PSBUeXBlLkFUWEhlYWRpbmcxICYmIGlkIDw9IFR5cGUuU2V0ZXh0SGVhZGluZzIgPyBbXCJCbG9ja1wiLCBcIkxlYWZCbG9ja1wiLCBcIkhlYWRpbmdcIl0gOiBbXCJCbG9ja1wiLCBcIkxlYWZCbG9ja1wiXTtcbiAgICAgICAgICAgICAgICBub2RlVHlwZXMucHVzaChOb2RlVHlwZS5kZWZpbmUoe1xuICAgICAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcHJvcHM6IGdyb3VwICYmIFtbTm9kZVByb3AuZ3JvdXAsIGdyb3VwXV1cbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0eWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc3R5bGVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVzID0ge307XG4gICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHN0eWxlKSB8fCBzdHlsZSBpbnN0YW5jZW9mIFRhZylcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlc1tuYW1lXSA9IHN0eWxlO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHN0eWxlcywgc3R5bGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vZGVTZXQgPSBuZXcgTm9kZVNldChub2RlVHlwZXMpO1xuICAgICAgICAgICAgaWYgKHN0eWxlcylcbiAgICAgICAgICAgICAgICBub2RlU2V0ID0gbm9kZVNldC5leHRlbmQoc3R5bGVUYWdzKHN0eWxlcykpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChub25FbXB0eShjb25maWcucHJvcHMpKVxuICAgICAgICAgICAgbm9kZVNldCA9IG5vZGVTZXQuZXh0ZW5kKC4uLmNvbmZpZy5wcm9wcyk7XG4gICAgICAgIGlmIChub25FbXB0eShjb25maWcucmVtb3ZlKSkge1xuICAgICAgICAgICAgZm9yIChsZXQgcm0gb2YgY29uZmlnLnJlbW92ZSkge1xuICAgICAgICAgICAgICAgIGxldCBibG9jayA9IHRoaXMuYmxvY2tOYW1lcy5pbmRleE9mKHJtKSwgaW5saW5lID0gdGhpcy5pbmxpbmVOYW1lcy5pbmRleE9mKHJtKTtcbiAgICAgICAgICAgICAgICBpZiAoYmxvY2sgPiAtMSlcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tQYXJzZXJzW2Jsb2NrXSA9IGxlYWZCbG9ja1BhcnNlcnNbYmxvY2tdID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGlmIChpbmxpbmUgPiAtMSlcbiAgICAgICAgICAgICAgICAgICAgaW5saW5lUGFyc2Vyc1tpbmxpbmVdID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChub25FbXB0eShjb25maWcucGFyc2VCbG9jaykpIHtcbiAgICAgICAgICAgIGZvciAobGV0IHNwZWMgb2YgY29uZmlnLnBhcnNlQmxvY2spIHtcbiAgICAgICAgICAgICAgICBsZXQgZm91bmQgPSBibG9ja05hbWVzLmluZGV4T2Yoc3BlYy5uYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAoZm91bmQgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICBibG9ja1BhcnNlcnNbZm91bmRdID0gc3BlYy5wYXJzZTtcbiAgICAgICAgICAgICAgICAgICAgbGVhZkJsb2NrUGFyc2Vyc1tmb3VuZF0gPSBzcGVjLmxlYWY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcG9zID0gc3BlYy5iZWZvcmUgPyBmaW5kTmFtZShibG9ja05hbWVzLCBzcGVjLmJlZm9yZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogc3BlYy5hZnRlciA/IGZpbmROYW1lKGJsb2NrTmFtZXMsIHNwZWMuYWZ0ZXIpICsgMSA6IGJsb2NrTmFtZXMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tQYXJzZXJzLnNwbGljZShwb3MsIDAsIHNwZWMucGFyc2UpO1xuICAgICAgICAgICAgICAgICAgICBsZWFmQmxvY2tQYXJzZXJzLnNwbGljZShwb3MsIDAsIHNwZWMubGVhZik7XG4gICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZXMuc3BsaWNlKHBvcywgMCwgc3BlYy5uYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNwZWMuZW5kTGVhZilcbiAgICAgICAgICAgICAgICAgICAgZW5kTGVhZkJsb2NrLnB1c2goc3BlYy5lbmRMZWFmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobm9uRW1wdHkoY29uZmlnLnBhcnNlSW5saW5lKSkge1xuICAgICAgICAgICAgZm9yIChsZXQgc3BlYyBvZiBjb25maWcucGFyc2VJbmxpbmUpIHtcbiAgICAgICAgICAgICAgICBsZXQgZm91bmQgPSBpbmxpbmVOYW1lcy5pbmRleE9mKHNwZWMubmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5saW5lUGFyc2Vyc1tmb3VuZF0gPSBzcGVjLnBhcnNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBvcyA9IHNwZWMuYmVmb3JlID8gZmluZE5hbWUoaW5saW5lTmFtZXMsIHNwZWMuYmVmb3JlKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBzcGVjLmFmdGVyID8gZmluZE5hbWUoaW5saW5lTmFtZXMsIHNwZWMuYWZ0ZXIpICsgMSA6IGlubGluZU5hbWVzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgICAgIGlubGluZVBhcnNlcnMuc3BsaWNlKHBvcywgMCwgc3BlYy5wYXJzZSk7XG4gICAgICAgICAgICAgICAgICAgIGlubGluZU5hbWVzLnNwbGljZShwb3MsIDAsIHNwZWMubmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjb25maWcud3JhcClcbiAgICAgICAgICAgIHdyYXBwZXJzID0gd3JhcHBlcnMuY29uY2F0KGNvbmZpZy53cmFwKTtcbiAgICAgICAgcmV0dXJuIG5ldyBNYXJrZG93blBhcnNlcihub2RlU2V0LCBibG9ja1BhcnNlcnMsIGxlYWZCbG9ja1BhcnNlcnMsIGJsb2NrTmFtZXMsIGVuZExlYWZCbG9jaywgc2tpcENvbnRleHRNYXJrdXAsIGlubGluZVBhcnNlcnMsIGlubGluZU5hbWVzLCB3cmFwcGVycyk7XG4gICAgfVxuICAgIC8vLyBAaW50ZXJuYWxcbiAgICBnZXROb2RlVHlwZShuYW1lKSB7XG4gICAgICAgIGxldCBmb3VuZCA9IHRoaXMubm9kZVR5cGVzW25hbWVdO1xuICAgICAgICBpZiAoZm91bmQgPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBVbmtub3duIG5vZGUgdHlwZSAnJHtuYW1lfSdgKTtcbiAgICAgICAgcmV0dXJuIGZvdW5kO1xuICAgIH1cbiAgICAvLy8gUGFyc2UgdGhlIGdpdmVuIHBpZWNlIG9mIGlubGluZSB0ZXh0IGF0IHRoZSBnaXZlbiBvZmZzZXQsXG4gICAgLy8vIHJldHVybmluZyBhbiBhcnJheSBvZiBbYEVsZW1lbnRgXSgjRWxlbWVudCkgb2JqZWN0cyByZXByZXNlbnRpbmdcbiAgICAvLy8gdGhlIGlubGluZSBjb250ZW50LlxuICAgIHBhcnNlSW5saW5lKHRleHQsIG9mZnNldCkge1xuICAgICAgICBsZXQgY3ggPSBuZXcgSW5saW5lQ29udGV4dCh0aGlzLCB0ZXh0LCBvZmZzZXQpO1xuICAgICAgICBvdXRlcjogZm9yIChsZXQgcG9zID0gb2Zmc2V0OyBwb3MgPCBjeC5lbmQ7KSB7XG4gICAgICAgICAgICBsZXQgbmV4dCA9IGN4LmNoYXIocG9zKTtcbiAgICAgICAgICAgIGZvciAobGV0IHRva2VuIG9mIHRoaXMuaW5saW5lUGFyc2VycylcbiAgICAgICAgICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IHRva2VuKGN4LCBuZXh0LCBwb3MpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcyA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlIG91dGVyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgcG9zKys7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGN4LnJlc29sdmVNYXJrZXJzKDApO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG5vbkVtcHR5KGEpIHtcbiAgICByZXR1cm4gYSAhPSBudWxsICYmIGEubGVuZ3RoID4gMDtcbn1cbmZ1bmN0aW9uIHJlc29sdmVDb25maWcoc3BlYykge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShzcGVjKSlcbiAgICAgICAgcmV0dXJuIHNwZWM7XG4gICAgaWYgKHNwZWMubGVuZ3RoID09IDApXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGxldCBjb25mID0gcmVzb2x2ZUNvbmZpZyhzcGVjWzBdKTtcbiAgICBpZiAoc3BlYy5sZW5ndGggPT0gMSlcbiAgICAgICAgcmV0dXJuIGNvbmY7XG4gICAgbGV0IHJlc3QgPSByZXNvbHZlQ29uZmlnKHNwZWMuc2xpY2UoMSkpO1xuICAgIGlmICghcmVzdCB8fCAhY29uZilcbiAgICAgICAgcmV0dXJuIGNvbmYgfHwgcmVzdDtcbiAgICBsZXQgY29uYyA9IChhLCBiKSA9PiAoYSB8fCBub25lKS5jb25jYXQoYiB8fCBub25lKTtcbiAgICBsZXQgd3JhcEEgPSBjb25mLndyYXAsIHdyYXBCID0gcmVzdC53cmFwO1xuICAgIHJldHVybiB7XG4gICAgICAgIHByb3BzOiBjb25jKGNvbmYucHJvcHMsIHJlc3QucHJvcHMpLFxuICAgICAgICBkZWZpbmVOb2RlczogY29uYyhjb25mLmRlZmluZU5vZGVzLCByZXN0LmRlZmluZU5vZGVzKSxcbiAgICAgICAgcGFyc2VCbG9jazogY29uYyhjb25mLnBhcnNlQmxvY2ssIHJlc3QucGFyc2VCbG9jayksXG4gICAgICAgIHBhcnNlSW5saW5lOiBjb25jKGNvbmYucGFyc2VJbmxpbmUsIHJlc3QucGFyc2VJbmxpbmUpLFxuICAgICAgICByZW1vdmU6IGNvbmMoY29uZi5yZW1vdmUsIHJlc3QucmVtb3ZlKSxcbiAgICAgICAgd3JhcDogIXdyYXBBID8gd3JhcEIgOiAhd3JhcEIgPyB3cmFwQSA6XG4gICAgICAgICAgICAoaW5uZXIsIGlucHV0LCBmcmFnbWVudHMsIHJhbmdlcykgPT4gd3JhcEEod3JhcEIoaW5uZXIsIGlucHV0LCBmcmFnbWVudHMsIHJhbmdlcyksIGlucHV0LCBmcmFnbWVudHMsIHJhbmdlcylcbiAgICB9O1xufVxuZnVuY3Rpb24gZmluZE5hbWUobmFtZXMsIG5hbWUpIHtcbiAgICBsZXQgZm91bmQgPSBuYW1lcy5pbmRleE9mKG5hbWUpO1xuICAgIGlmIChmb3VuZCA8IDApXG4gICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBQb3NpdGlvbiBzcGVjaWZpZWQgcmVsYXRpdmUgdG8gdW5rbm93biBwYXJzZXIgJHtuYW1lfWApO1xuICAgIHJldHVybiBmb3VuZDtcbn1cbmxldCBub2RlVHlwZXMgPSBbTm9kZVR5cGUubm9uZV07XG5mb3IgKGxldCBpID0gMSwgbmFtZTsgbmFtZSA9IFR5cGVbaV07IGkrKykge1xuICAgIG5vZGVUeXBlc1tpXSA9IE5vZGVUeXBlLmRlZmluZSh7XG4gICAgICAgIGlkOiBpLFxuICAgICAgICBuYW1lLFxuICAgICAgICBwcm9wczogaSA+PSBUeXBlLkVzY2FwZSA/IFtdIDogW1tOb2RlUHJvcC5ncm91cCwgaSBpbiBEZWZhdWx0U2tpcE1hcmt1cCA/IFtcIkJsb2NrXCIsIFwiQmxvY2tDb250ZXh0XCJdIDogW1wiQmxvY2tcIiwgXCJMZWFmQmxvY2tcIl1dXVxuICAgIH0pO1xufVxuY29uc3Qgbm9uZSA9IFtdO1xuY2xhc3MgQnVmZmVyIHtcbiAgICBjb25zdHJ1Y3Rvcihub2RlU2V0KSB7XG4gICAgICAgIHRoaXMubm9kZVNldCA9IG5vZGVTZXQ7XG4gICAgICAgIHRoaXMuY29udGVudCA9IFtdO1xuICAgICAgICB0aGlzLm5vZGVzID0gW107XG4gICAgfVxuICAgIHdyaXRlKHR5cGUsIGZyb20sIHRvLCBjaGlsZHJlbiA9IDApIHtcbiAgICAgICAgdGhpcy5jb250ZW50LnB1c2godHlwZSwgZnJvbSwgdG8sIDQgKyBjaGlsZHJlbiAqIDQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgd3JpdGVFbGVtZW50cyhlbHRzLCBvZmZzZXQgPSAwKSB7XG4gICAgICAgIGZvciAobGV0IGUgb2YgZWx0cylcbiAgICAgICAgICAgIGUud3JpdGVUbyh0aGlzLCBvZmZzZXQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZmluaXNoKHR5cGUsIGxlbmd0aCkge1xuICAgICAgICByZXR1cm4gVHJlZS5idWlsZCh7XG4gICAgICAgICAgICBidWZmZXI6IHRoaXMuY29udGVudCxcbiAgICAgICAgICAgIG5vZGVTZXQ6IHRoaXMubm9kZVNldCxcbiAgICAgICAgICAgIHJldXNlZDogdGhpcy5ub2RlcyxcbiAgICAgICAgICAgIHRvcElEOiB0eXBlLFxuICAgICAgICAgICAgbGVuZ3RoXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8vLyBFbGVtZW50cyBhcmUgdXNlZCB0byBjb21wb3NlIHN5bnRheCBub2RlcyBkdXJpbmcgcGFyc2luZy5cbmNsYXNzIEVsZW1lbnQge1xuICAgIC8vLyBAaW50ZXJuYWxcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvLy8gVGhlIG5vZGUnc1xuICAgIC8vLyBbaWRdKGh0dHBzOi8vbGV6ZXIuY29kZW1pcnJvci5uZXQvZG9jcy9yZWYvI2NvbW1vbi5Ob2RlVHlwZS5pZCkuXG4gICAgdHlwZSwgXG4gICAgLy8vIFRoZSBzdGFydCBvZiB0aGUgbm9kZSwgYXMgYW4gb2Zmc2V0IGZyb20gdGhlIHN0YXJ0IG9mIHRoZSBkb2N1bWVudC5cbiAgICBmcm9tLCBcbiAgICAvLy8gVGhlIGVuZCBvZiB0aGUgbm9kZS5cbiAgICB0bywgXG4gICAgLy8vIFRoZSBub2RlJ3MgY2hpbGQgbm9kZXMgQGludGVybmFsXG4gICAgY2hpbGRyZW4gPSBub25lKSB7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuICAgIH1cbiAgICAvLy8gQGludGVybmFsXG4gICAgd3JpdGVUbyhidWYsIG9mZnNldCkge1xuICAgICAgICBsZXQgc3RhcnRPZmYgPSBidWYuY29udGVudC5sZW5ndGg7XG4gICAgICAgIGJ1Zi53cml0ZUVsZW1lbnRzKHRoaXMuY2hpbGRyZW4sIG9mZnNldCk7XG4gICAgICAgIGJ1Zi5jb250ZW50LnB1c2godGhpcy50eXBlLCB0aGlzLmZyb20gKyBvZmZzZXQsIHRoaXMudG8gKyBvZmZzZXQsIGJ1Zi5jb250ZW50Lmxlbmd0aCArIDQgLSBzdGFydE9mZik7XG4gICAgfVxuICAgIC8vLyBAaW50ZXJuYWxcbiAgICB0b1RyZWUobm9kZVNldCkge1xuICAgICAgICByZXR1cm4gbmV3IEJ1ZmZlcihub2RlU2V0KS53cml0ZUVsZW1lbnRzKHRoaXMuY2hpbGRyZW4sIC10aGlzLmZyb20pLmZpbmlzaCh0aGlzLnR5cGUsIHRoaXMudG8gLSB0aGlzLmZyb20pO1xuICAgIH1cbn1cbmNsYXNzIFRyZWVFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3Rvcih0cmVlLCBmcm9tKSB7XG4gICAgICAgIHRoaXMudHJlZSA9IHRyZWU7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgfVxuICAgIGdldCB0bygpIHsgcmV0dXJuIHRoaXMuZnJvbSArIHRoaXMudHJlZS5sZW5ndGg7IH1cbiAgICBnZXQgdHlwZSgpIHsgcmV0dXJuIHRoaXMudHJlZS50eXBlLmlkOyB9XG4gICAgZ2V0IGNoaWxkcmVuKCkgeyByZXR1cm4gbm9uZTsgfVxuICAgIHdyaXRlVG8oYnVmLCBvZmZzZXQpIHtcbiAgICAgICAgYnVmLm5vZGVzLnB1c2godGhpcy50cmVlKTtcbiAgICAgICAgYnVmLmNvbnRlbnQucHVzaChidWYubm9kZXMubGVuZ3RoIC0gMSwgdGhpcy5mcm9tICsgb2Zmc2V0LCB0aGlzLnRvICsgb2Zmc2V0LCAtMSk7XG4gICAgfVxuICAgIHRvVHJlZSgpIHsgcmV0dXJuIHRoaXMudHJlZTsgfVxufVxuZnVuY3Rpb24gZWx0KHR5cGUsIGZyb20sIHRvLCBjaGlsZHJlbikge1xuICAgIHJldHVybiBuZXcgRWxlbWVudCh0eXBlLCBmcm9tLCB0bywgY2hpbGRyZW4pO1xufVxuY29uc3QgRW1waGFzaXNVbmRlcnNjb3JlID0geyByZXNvbHZlOiBcIkVtcGhhc2lzXCIsIG1hcms6IFwiRW1waGFzaXNNYXJrXCIgfTtcbmNvbnN0IEVtcGhhc2lzQXN0ZXJpc2sgPSB7IHJlc29sdmU6IFwiRW1waGFzaXNcIiwgbWFyazogXCJFbXBoYXNpc01hcmtcIiB9O1xuY29uc3QgTGlua1N0YXJ0ID0ge30sIEltYWdlU3RhcnQgPSB7fTtcbmNsYXNzIElubGluZURlbGltaXRlciB7XG4gICAgY29uc3RydWN0b3IodHlwZSwgZnJvbSwgdG8sIHNpZGUpIHtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgICAgICB0aGlzLnNpZGUgPSBzaWRlO1xuICAgIH1cbn1cbmNvbnN0IEVzY2FwYWJsZSA9IFwiIVxcXCIjJCUmJygpKissLS4vOjs8PT4/QFtcXFxcXV5fYHt8fX5cIjtcbmxldCBQdW5jdHVhdGlvbiA9IC9bIVwiIyQlJicoKSorLFxcLS5cXC86Ozw9Pj9AXFxbXFxcXFxcXV5fYHt8fX5cXHhBMVxcdTIwMTAtXFx1MjAyN10vO1xudHJ5IHtcbiAgICBQdW5jdHVhdGlvbiA9IG5ldyBSZWdFeHAoXCJbXFxcXHB7UGN9fFxcXFxwe1BkfXxcXFxccHtQZX18XFxcXHB7UGZ9fFxcXFxwe1BpfXxcXFxccHtQb318XFxcXHB7UHN9XVwiLCBcInVcIik7XG59XG5jYXRjaCAoXykgeyB9XG5jb25zdCBEZWZhdWx0SW5saW5lID0ge1xuICAgIEVzY2FwZShjeCwgbmV4dCwgc3RhcnQpIHtcbiAgICAgICAgaWYgKG5leHQgIT0gOTIgLyogJ1xcXFwnICovIHx8IHN0YXJ0ID09IGN4LmVuZCAtIDEpXG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIGxldCBlc2NhcGVkID0gY3guY2hhcihzdGFydCArIDEpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IEVzY2FwYWJsZS5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIGlmIChFc2NhcGFibGUuY2hhckNvZGVBdChpKSA9PSBlc2NhcGVkKVxuICAgICAgICAgICAgICAgIHJldHVybiBjeC5hcHBlbmQoZWx0KFR5cGUuRXNjYXBlLCBzdGFydCwgc3RhcnQgKyAyKSk7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9LFxuICAgIEVudGl0eShjeCwgbmV4dCwgc3RhcnQpIHtcbiAgICAgICAgaWYgKG5leHQgIT0gMzggLyogJyYnICovKVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICBsZXQgbSA9IC9eKD86I1xcZCt8I3hbYS1mXFxkXSt8XFx3Kyk7L2kuZXhlYyhjeC5zbGljZShzdGFydCArIDEsIHN0YXJ0ICsgMzEpKTtcbiAgICAgICAgcmV0dXJuIG0gPyBjeC5hcHBlbmQoZWx0KFR5cGUuRW50aXR5LCBzdGFydCwgc3RhcnQgKyAxICsgbVswXS5sZW5ndGgpKSA6IC0xO1xuICAgIH0sXG4gICAgSW5saW5lQ29kZShjeCwgbmV4dCwgc3RhcnQpIHtcbiAgICAgICAgaWYgKG5leHQgIT0gOTYgLyogJ2AnICovIHx8IHN0YXJ0ICYmIGN4LmNoYXIoc3RhcnQgLSAxKSA9PSA5NilcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgbGV0IHBvcyA9IHN0YXJ0ICsgMTtcbiAgICAgICAgd2hpbGUgKHBvcyA8IGN4LmVuZCAmJiBjeC5jaGFyKHBvcykgPT0gOTYpXG4gICAgICAgICAgICBwb3MrKztcbiAgICAgICAgbGV0IHNpemUgPSBwb3MgLSBzdGFydCwgY3VyU2l6ZSA9IDA7XG4gICAgICAgIGZvciAoOyBwb3MgPCBjeC5lbmQ7IHBvcysrKSB7XG4gICAgICAgICAgICBpZiAoY3guY2hhcihwb3MpID09IDk2KSB7XG4gICAgICAgICAgICAgICAgY3VyU2l6ZSsrO1xuICAgICAgICAgICAgICAgIGlmIChjdXJTaXplID09IHNpemUgJiYgY3guY2hhcihwb3MgKyAxKSAhPSA5NilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN4LmFwcGVuZChlbHQoVHlwZS5JbmxpbmVDb2RlLCBzdGFydCwgcG9zICsgMSwgW1xuICAgICAgICAgICAgICAgICAgICAgICAgZWx0KFR5cGUuQ29kZU1hcmssIHN0YXJ0LCBzdGFydCArIHNpemUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZWx0KFR5cGUuQ29kZU1hcmssIHBvcyArIDEgLSBzaXplLCBwb3MgKyAxKVxuICAgICAgICAgICAgICAgICAgICBdKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdXJTaXplID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfSxcbiAgICBIVE1MVGFnKGN4LCBuZXh0LCBzdGFydCkge1xuICAgICAgICBpZiAobmV4dCAhPSA2MCAvKiAnPCcgKi8gfHwgc3RhcnQgPT0gY3guZW5kIC0gMSlcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgbGV0IGFmdGVyID0gY3guc2xpY2Uoc3RhcnQgKyAxLCBjeC5lbmQpO1xuICAgICAgICBsZXQgdXJsID0gL14oPzpbYS16XVstXFx3Ky5dKzpbXlxccz5dK3xbYS16XFxkLiEjJCUmJyorLz0/Xl9ge3x9fi1dK0BbYS16XFxkXSg/OlthLXpcXGQtXXswLDYxfVthLXpcXGRdKT8oPzpcXC5bYS16XFxkXSg/OlthLXpcXGQtXXswLDYxfVthLXpcXGRdKT8pKik+L2kuZXhlYyhhZnRlcik7XG4gICAgICAgIGlmICh1cmwpXG4gICAgICAgICAgICByZXR1cm4gY3guYXBwZW5kKGVsdChUeXBlLlVSTCwgc3RhcnQsIHN0YXJ0ICsgMSArIHVybFswXS5sZW5ndGgpKTtcbiAgICAgICAgbGV0IGNvbW1lbnQgPSAvXiEtLVtePl0oPzotW14tXXxbXi1dKSo/LS0+L2kuZXhlYyhhZnRlcik7XG4gICAgICAgIGlmIChjb21tZW50KVxuICAgICAgICAgICAgcmV0dXJuIGN4LmFwcGVuZChlbHQoVHlwZS5Db21tZW50LCBzdGFydCwgc3RhcnQgKyAxICsgY29tbWVudFswXS5sZW5ndGgpKTtcbiAgICAgICAgbGV0IHByb2NJbnN0ID0gL15cXD9bXl0qP1xcPz4vLmV4ZWMoYWZ0ZXIpO1xuICAgICAgICBpZiAocHJvY0luc3QpXG4gICAgICAgICAgICByZXR1cm4gY3guYXBwZW5kKGVsdChUeXBlLlByb2Nlc3NpbmdJbnN0cnVjdGlvbiwgc3RhcnQsIHN0YXJ0ICsgMSArIHByb2NJbnN0WzBdLmxlbmd0aCkpO1xuICAgICAgICBsZXQgbSA9IC9eKD86IVtBLVpdW15dKj8+fCFcXFtDREFUQVxcW1teXSo/XFxdXFxdPnxcXC9cXHMqW2EtekEtWl1bXFx3LV0qXFxzKj58XFxzKlthLXpBLVpdW1xcdy1dKihcXHMrW2EtekEtWjpfXVtcXHctLjpdKig/Olxccyo9XFxzKig/OlteXFxzXCInPTw+YF0rfCdbXiddKid8XCJbXlwiXSpcIikpPykqXFxzKihcXC9cXHMqKT8+KS8uZXhlYyhhZnRlcik7XG4gICAgICAgIGlmICghbSlcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgcmV0dXJuIGN4LmFwcGVuZChlbHQoVHlwZS5IVE1MVGFnLCBzdGFydCwgc3RhcnQgKyAxICsgbVswXS5sZW5ndGgpKTtcbiAgICB9LFxuICAgIEVtcGhhc2lzKGN4LCBuZXh0LCBzdGFydCkge1xuICAgICAgICBpZiAobmV4dCAhPSA5NSAmJiBuZXh0ICE9IDQyKVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICBsZXQgcG9zID0gc3RhcnQgKyAxO1xuICAgICAgICB3aGlsZSAoY3guY2hhcihwb3MpID09IG5leHQpXG4gICAgICAgICAgICBwb3MrKztcbiAgICAgICAgbGV0IGJlZm9yZSA9IGN4LnNsaWNlKHN0YXJ0IC0gMSwgc3RhcnQpLCBhZnRlciA9IGN4LnNsaWNlKHBvcywgcG9zICsgMSk7XG4gICAgICAgIGxldCBwQmVmb3JlID0gUHVuY3R1YXRpb24udGVzdChiZWZvcmUpLCBwQWZ0ZXIgPSBQdW5jdHVhdGlvbi50ZXN0KGFmdGVyKTtcbiAgICAgICAgbGV0IHNCZWZvcmUgPSAvXFxzfF4kLy50ZXN0KGJlZm9yZSksIHNBZnRlciA9IC9cXHN8XiQvLnRlc3QoYWZ0ZXIpO1xuICAgICAgICBsZXQgbGVmdEZsYW5raW5nID0gIXNBZnRlciAmJiAoIXBBZnRlciB8fCBzQmVmb3JlIHx8IHBCZWZvcmUpO1xuICAgICAgICBsZXQgcmlnaHRGbGFua2luZyA9ICFzQmVmb3JlICYmICghcEJlZm9yZSB8fCBzQWZ0ZXIgfHwgcEFmdGVyKTtcbiAgICAgICAgbGV0IGNhbk9wZW4gPSBsZWZ0RmxhbmtpbmcgJiYgKG5leHQgPT0gNDIgfHwgIXJpZ2h0RmxhbmtpbmcgfHwgcEJlZm9yZSk7XG4gICAgICAgIGxldCBjYW5DbG9zZSA9IHJpZ2h0RmxhbmtpbmcgJiYgKG5leHQgPT0gNDIgfHwgIWxlZnRGbGFua2luZyB8fCBwQWZ0ZXIpO1xuICAgICAgICByZXR1cm4gY3guYXBwZW5kKG5ldyBJbmxpbmVEZWxpbWl0ZXIobmV4dCA9PSA5NSA/IEVtcGhhc2lzVW5kZXJzY29yZSA6IEVtcGhhc2lzQXN0ZXJpc2ssIHN0YXJ0LCBwb3MsIChjYW5PcGVuID8gMSAvKiBPcGVuICovIDogMCkgfCAoY2FuQ2xvc2UgPyAyIC8qIENsb3NlICovIDogMCkpKTtcbiAgICB9LFxuICAgIEhhcmRCcmVhayhjeCwgbmV4dCwgc3RhcnQpIHtcbiAgICAgICAgaWYgKG5leHQgPT0gOTIgLyogJ1xcXFwnICovICYmIGN4LmNoYXIoc3RhcnQgKyAxKSA9PSAxMCAvKiAnXFxuJyAqLylcbiAgICAgICAgICAgIHJldHVybiBjeC5hcHBlbmQoZWx0KFR5cGUuSGFyZEJyZWFrLCBzdGFydCwgc3RhcnQgKyAyKSk7XG4gICAgICAgIGlmIChuZXh0ID09IDMyKSB7XG4gICAgICAgICAgICBsZXQgcG9zID0gc3RhcnQgKyAxO1xuICAgICAgICAgICAgd2hpbGUgKGN4LmNoYXIocG9zKSA9PSAzMilcbiAgICAgICAgICAgICAgICBwb3MrKztcbiAgICAgICAgICAgIGlmIChjeC5jaGFyKHBvcykgPT0gMTAgJiYgcG9zID49IHN0YXJ0ICsgMilcbiAgICAgICAgICAgICAgICByZXR1cm4gY3guYXBwZW5kKGVsdChUeXBlLkhhcmRCcmVhaywgc3RhcnQsIHBvcyArIDEpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfSxcbiAgICBMaW5rKGN4LCBuZXh0LCBzdGFydCkge1xuICAgICAgICByZXR1cm4gbmV4dCA9PSA5MSAvKiAnWycgKi8gPyBjeC5hcHBlbmQobmV3IElubGluZURlbGltaXRlcihMaW5rU3RhcnQsIHN0YXJ0LCBzdGFydCArIDEsIDEgLyogT3BlbiAqLykpIDogLTE7XG4gICAgfSxcbiAgICBJbWFnZShjeCwgbmV4dCwgc3RhcnQpIHtcbiAgICAgICAgcmV0dXJuIG5leHQgPT0gMzMgLyogJyEnICovICYmIGN4LmNoYXIoc3RhcnQgKyAxKSA9PSA5MSAvKiAnWycgKi9cbiAgICAgICAgICAgID8gY3guYXBwZW5kKG5ldyBJbmxpbmVEZWxpbWl0ZXIoSW1hZ2VTdGFydCwgc3RhcnQsIHN0YXJ0ICsgMiwgMSAvKiBPcGVuICovKSkgOiAtMTtcbiAgICB9LFxuICAgIExpbmtFbmQoY3gsIG5leHQsIHN0YXJ0KSB7XG4gICAgICAgIGlmIChuZXh0ICE9IDkzIC8qICddJyAqLylcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgLy8gU2Nhbm5pbmcgYmFjayB0byB0aGUgbmV4dCBsaW5rL2ltYWdlIHN0YXJ0IG1hcmtlclxuICAgICAgICBmb3IgKGxldCBpID0gY3gucGFydHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGxldCBwYXJ0ID0gY3gucGFydHNbaV07XG4gICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIElubGluZURlbGltaXRlciAmJiAocGFydC50eXBlID09IExpbmtTdGFydCB8fCBwYXJ0LnR5cGUgPT0gSW1hZ2VTdGFydCkpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIG9uZSBoYXMgYmVlbiBzZXQgaW52YWxpZCAoYmVjYXVzZSBpdCB3b3VsZCBwcm9kdWNlXG4gICAgICAgICAgICAgICAgLy8gYSBuZXN0ZWQgbGluaykgb3IgdGhlcmUncyBubyB2YWxpZCBsaW5rIGhlcmUgaWdub3JlIGJvdGguXG4gICAgICAgICAgICAgICAgaWYgKCFwYXJ0LnNpZGUgfHwgY3guc2tpcFNwYWNlKHBhcnQudG8pID09IHN0YXJ0ICYmICEvWyhcXFtdLy50ZXN0KGN4LnNsaWNlKHN0YXJ0ICsgMSwgc3RhcnQgKyAyKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3gucGFydHNbaV0gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEZpbmlzaCB0aGUgY29udGVudCBhbmQgcmVwbGFjZSB0aGUgZW50aXJlIHJhbmdlIGluXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5wYXJ0cyB3aXRoIHRoZSBsaW5rL2ltYWdlIG5vZGUuXG4gICAgICAgICAgICAgICAgbGV0IGNvbnRlbnQgPSBjeC50YWtlQ29udGVudChpKTtcbiAgICAgICAgICAgICAgICBsZXQgbGluayA9IGN4LnBhcnRzW2ldID0gZmluaXNoTGluayhjeCwgY29udGVudCwgcGFydC50eXBlID09IExpbmtTdGFydCA/IFR5cGUuTGluayA6IFR5cGUuSW1hZ2UsIHBhcnQuZnJvbSwgc3RhcnQgKyAxKTtcbiAgICAgICAgICAgICAgICAvLyBTZXQgYW55IG9wZW4tbGluayBtYXJrZXJzIGJlZm9yZSB0aGlzIGxpbmsgdG8gaW52YWxpZC5cbiAgICAgICAgICAgICAgICBpZiAocGFydC50eXBlID09IExpbmtTdGFydClcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBpOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwID0gY3gucGFydHNbal07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocCBpbnN0YW5jZW9mIElubGluZURlbGltaXRlciAmJiBwLnR5cGUgPT0gTGlua1N0YXJ0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAuc2lkZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbGluay50bztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxufTtcbmZ1bmN0aW9uIGZpbmlzaExpbmsoY3gsIGNvbnRlbnQsIHR5cGUsIHN0YXJ0LCBzdGFydFBvcykge1xuICAgIGxldCB7IHRleHQgfSA9IGN4LCBuZXh0ID0gY3guY2hhcihzdGFydFBvcyksIGVuZFBvcyA9IHN0YXJ0UG9zO1xuICAgIGNvbnRlbnQudW5zaGlmdChlbHQoVHlwZS5MaW5rTWFyaywgc3RhcnQsIHN0YXJ0ICsgKHR5cGUgPT0gVHlwZS5JbWFnZSA/IDIgOiAxKSkpO1xuICAgIGNvbnRlbnQucHVzaChlbHQoVHlwZS5MaW5rTWFyaywgc3RhcnRQb3MgLSAxLCBzdGFydFBvcykpO1xuICAgIGlmIChuZXh0ID09IDQwIC8qICcoJyAqLykge1xuICAgICAgICBsZXQgcG9zID0gY3guc2tpcFNwYWNlKHN0YXJ0UG9zICsgMSk7XG4gICAgICAgIGxldCBkZXN0ID0gcGFyc2VVUkwodGV4dCwgcG9zIC0gY3gub2Zmc2V0LCBjeC5vZmZzZXQpLCB0aXRsZTtcbiAgICAgICAgaWYgKGRlc3QpIHtcbiAgICAgICAgICAgIHBvcyA9IGN4LnNraXBTcGFjZShkZXN0LnRvKTtcbiAgICAgICAgICAgIHRpdGxlID0gcGFyc2VMaW5rVGl0bGUodGV4dCwgcG9zIC0gY3gub2Zmc2V0LCBjeC5vZmZzZXQpO1xuICAgICAgICAgICAgaWYgKHRpdGxlKVxuICAgICAgICAgICAgICAgIHBvcyA9IGN4LnNraXBTcGFjZSh0aXRsZS50byk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN4LmNoYXIocG9zKSA9PSA0MSAvKiAnKScgKi8pIHtcbiAgICAgICAgICAgIGNvbnRlbnQucHVzaChlbHQoVHlwZS5MaW5rTWFyaywgc3RhcnRQb3MsIHN0YXJ0UG9zICsgMSkpO1xuICAgICAgICAgICAgZW5kUG9zID0gcG9zICsgMTtcbiAgICAgICAgICAgIGlmIChkZXN0KVxuICAgICAgICAgICAgICAgIGNvbnRlbnQucHVzaChkZXN0KTtcbiAgICAgICAgICAgIGlmICh0aXRsZSlcbiAgICAgICAgICAgICAgICBjb250ZW50LnB1c2godGl0bGUpO1xuICAgICAgICAgICAgY29udGVudC5wdXNoKGVsdChUeXBlLkxpbmtNYXJrLCBwb3MsIGVuZFBvcykpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKG5leHQgPT0gOTEgLyogJ1snICovKSB7XG4gICAgICAgIGxldCBsYWJlbCA9IHBhcnNlTGlua0xhYmVsKHRleHQsIHN0YXJ0UG9zIC0gY3gub2Zmc2V0LCBjeC5vZmZzZXQsIGZhbHNlKTtcbiAgICAgICAgaWYgKGxhYmVsKSB7XG4gICAgICAgICAgICBjb250ZW50LnB1c2gobGFiZWwpO1xuICAgICAgICAgICAgZW5kUG9zID0gbGFiZWwudG87XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGVsdCh0eXBlLCBzdGFydCwgZW5kUG9zLCBjb250ZW50KTtcbn1cbi8vIFRoZXNlIHJldHVybiBgbnVsbGAgd2hlbiBmYWxsaW5nIG9mZiB0aGUgZW5kIG9mIHRoZSBpbnB1dCwgYGZhbHNlYFxuLy8gd2hlbiBwYXJzaW5nIGZhaWxzIG90aGVyd2lzZSAoZm9yIHVzZSBpbiB0aGUgaW5jcmVtZW50YWwgbGlua1xuLy8gcmVmZXJlbmNlIHBhcnNlcikuXG5mdW5jdGlvbiBwYXJzZVVSTCh0ZXh0LCBzdGFydCwgb2Zmc2V0KSB7XG4gICAgbGV0IG5leHQgPSB0ZXh0LmNoYXJDb2RlQXQoc3RhcnQpO1xuICAgIGlmIChuZXh0ID09IDYwIC8qICc8JyAqLykge1xuICAgICAgICBmb3IgKGxldCBwb3MgPSBzdGFydCArIDE7IHBvcyA8IHRleHQubGVuZ3RoOyBwb3MrKykge1xuICAgICAgICAgICAgbGV0IGNoID0gdGV4dC5jaGFyQ29kZUF0KHBvcyk7XG4gICAgICAgICAgICBpZiAoY2ggPT0gNjIgLyogJz4nICovKVxuICAgICAgICAgICAgICAgIHJldHVybiBlbHQoVHlwZS5VUkwsIHN0YXJ0ICsgb2Zmc2V0LCBwb3MgKyAxICsgb2Zmc2V0KTtcbiAgICAgICAgICAgIGlmIChjaCA9PSA2MCB8fCBjaCA9PSAxMCAvKiAnPFxcbicgKi8pXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbGV0IGRlcHRoID0gMCwgcG9zID0gc3RhcnQ7XG4gICAgICAgIGZvciAobGV0IGVzY2FwZWQgPSBmYWxzZTsgcG9zIDwgdGV4dC5sZW5ndGg7IHBvcysrKSB7XG4gICAgICAgICAgICBsZXQgY2ggPSB0ZXh0LmNoYXJDb2RlQXQocG9zKTtcbiAgICAgICAgICAgIGlmIChzcGFjZShjaCkpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGVzY2FwZWQpIHtcbiAgICAgICAgICAgICAgICBlc2NhcGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaCA9PSA0MCAvKiAnKCcgKi8pIHtcbiAgICAgICAgICAgICAgICBkZXB0aCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2ggPT0gNDEgLyogJyknICovKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkZXB0aClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVwdGgtLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoID09IDkyIC8qICdcXFxcJyAqLykge1xuICAgICAgICAgICAgICAgIGVzY2FwZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwb3MgPiBzdGFydCA/IGVsdChUeXBlLlVSTCwgc3RhcnQgKyBvZmZzZXQsIHBvcyArIG9mZnNldCkgOiBwb3MgPT0gdGV4dC5sZW5ndGggPyBudWxsIDogZmFsc2U7XG4gICAgfVxufVxuZnVuY3Rpb24gcGFyc2VMaW5rVGl0bGUodGV4dCwgc3RhcnQsIG9mZnNldCkge1xuICAgIGxldCBuZXh0ID0gdGV4dC5jaGFyQ29kZUF0KHN0YXJ0KTtcbiAgICBpZiAobmV4dCAhPSAzOSAmJiBuZXh0ICE9IDM0ICYmIG5leHQgIT0gNDAgLyogJ1wiXFwnKCcgKi8pXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgZW5kID0gbmV4dCA9PSA0MCA/IDQxIDogbmV4dDtcbiAgICBmb3IgKGxldCBwb3MgPSBzdGFydCArIDEsIGVzY2FwZWQgPSBmYWxzZTsgcG9zIDwgdGV4dC5sZW5ndGg7IHBvcysrKSB7XG4gICAgICAgIGxldCBjaCA9IHRleHQuY2hhckNvZGVBdChwb3MpO1xuICAgICAgICBpZiAoZXNjYXBlZClcbiAgICAgICAgICAgIGVzY2FwZWQgPSBmYWxzZTtcbiAgICAgICAgZWxzZSBpZiAoY2ggPT0gZW5kKVxuICAgICAgICAgICAgcmV0dXJuIGVsdChUeXBlLkxpbmtUaXRsZSwgc3RhcnQgKyBvZmZzZXQsIHBvcyArIDEgKyBvZmZzZXQpO1xuICAgICAgICBlbHNlIGlmIChjaCA9PSA5MiAvKiAnXFxcXCcgKi8pXG4gICAgICAgICAgICBlc2NhcGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBwYXJzZUxpbmtMYWJlbCh0ZXh0LCBzdGFydCwgb2Zmc2V0LCByZXF1aXJlTm9uV1MpIHtcbiAgICBmb3IgKGxldCBlc2NhcGVkID0gZmFsc2UsIHBvcyA9IHN0YXJ0ICsgMSwgZW5kID0gTWF0aC5taW4odGV4dC5sZW5ndGgsIHBvcyArIDk5OSk7IHBvcyA8IGVuZDsgcG9zKyspIHtcbiAgICAgICAgbGV0IGNoID0gdGV4dC5jaGFyQ29kZUF0KHBvcyk7XG4gICAgICAgIGlmIChlc2NhcGVkKVxuICAgICAgICAgICAgZXNjYXBlZCA9IGZhbHNlO1xuICAgICAgICBlbHNlIGlmIChjaCA9PSA5MyAvKiAnXScgKi8pXG4gICAgICAgICAgICByZXR1cm4gcmVxdWlyZU5vbldTID8gZmFsc2UgOiBlbHQoVHlwZS5MaW5rTGFiZWwsIHN0YXJ0ICsgb2Zmc2V0LCBwb3MgKyAxICsgb2Zmc2V0KTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAocmVxdWlyZU5vbldTICYmICFzcGFjZShjaCkpXG4gICAgICAgICAgICAgICAgcmVxdWlyZU5vbldTID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoY2ggPT0gOTEgLyogJ1snICovKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGNoID09IDkyIC8qICdcXFxcJyAqLylcbiAgICAgICAgICAgICAgICBlc2NhcGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbi8vLyBJbmxpbmUgcGFyc2luZyBmdW5jdGlvbnMgZ2V0IGFjY2VzcyB0byB0aGlzIGNvbnRleHQsIGFuZCB1c2UgaXQgdG9cbi8vLyByZWFkIHRoZSBjb250ZW50IGFuZCBlbWl0IHN5bnRheCBub2Rlcy5cbmNsYXNzIElubGluZUNvbnRleHQge1xuICAgIC8vLyBAaW50ZXJuYWxcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvLy8gVGhlIHBhcnNlciB0aGF0IGlzIGJlaW5nIHVzZWQuXG4gICAgcGFyc2VyLCBcbiAgICAvLy8gVGhlIHRleHQgb2YgdGhpcyBpbmxpbmUgc2VjdGlvbi5cbiAgICB0ZXh0LCBcbiAgICAvLy8gVGhlIHN0YXJ0aW5nIG9mZnNldCBvZiB0aGUgc2VjdGlvbiBpbiB0aGUgZG9jdW1lbnQuXG4gICAgb2Zmc2V0KSB7XG4gICAgICAgIHRoaXMucGFyc2VyID0gcGFyc2VyO1xuICAgICAgICB0aGlzLnRleHQgPSB0ZXh0O1xuICAgICAgICB0aGlzLm9mZnNldCA9IG9mZnNldDtcbiAgICAgICAgLy8vIEBpbnRlcm5hbFxuICAgICAgICB0aGlzLnBhcnRzID0gW107XG4gICAgfVxuICAgIC8vLyBHZXQgdGhlIGNoYXJhY3RlciBjb2RlIGF0IHRoZSBnaXZlbiAoZG9jdW1lbnQtcmVsYXRpdmUpXG4gICAgLy8vIHBvc2l0aW9uLlxuICAgIGNoYXIocG9zKSB7IHJldHVybiBwb3MgPj0gdGhpcy5lbmQgPyAtMSA6IHRoaXMudGV4dC5jaGFyQ29kZUF0KHBvcyAtIHRoaXMub2Zmc2V0KTsgfVxuICAgIC8vLyBUaGUgcG9zaXRpb24gb2YgdGhlIGVuZCBvZiB0aGlzIGlubGluZSBzZWN0aW9uLlxuICAgIGdldCBlbmQoKSB7IHJldHVybiB0aGlzLm9mZnNldCArIHRoaXMudGV4dC5sZW5ndGg7IH1cbiAgICAvLy8gR2V0IGEgc3Vic3RyaW5nIG9mIHRoaXMgaW5saW5lIHNlY3Rpb24uIEFnYWluIHVzZXNcbiAgICAvLy8gZG9jdW1lbnQtcmVsYXRpdmUgcG9zaXRpb25zLlxuICAgIHNsaWNlKGZyb20sIHRvKSB7IHJldHVybiB0aGlzLnRleHQuc2xpY2UoZnJvbSAtIHRoaXMub2Zmc2V0LCB0byAtIHRoaXMub2Zmc2V0KTsgfVxuICAgIC8vLyBAaW50ZXJuYWxcbiAgICBhcHBlbmQoZWx0KSB7XG4gICAgICAgIHRoaXMucGFydHMucHVzaChlbHQpO1xuICAgICAgICByZXR1cm4gZWx0LnRvO1xuICAgIH1cbiAgICAvLy8gQWRkIGEgW2RlbGltaXRlcl0oI0RlbGltaXRlclR5cGUpIGF0IHRoaXMgZ2l2ZW4gcG9zaXRpb24uIGBvcGVuYFxuICAgIC8vLyBhbmQgYGNsb3NlYCBpbmRpY2F0ZSB3aGV0aGVyIHRoaXMgZGVsaW1pdGVyIGlzIG9wZW5pbmcsIGNsb3NpbmcsXG4gICAgLy8vIG9yIGJvdGguIFJldHVybnMgdGhlIGVuZCBvZiB0aGUgZGVsaW1pdGVyLCBmb3IgY29udmVuaWVudFxuICAgIC8vLyByZXR1cm5pbmcgZnJvbSBbcGFyc2UgZnVuY3Rpb25zXSgjSW5saW5lUGFyc2VyLnBhcnNlKS5cbiAgICBhZGREZWxpbWl0ZXIodHlwZSwgZnJvbSwgdG8sIG9wZW4sIGNsb3NlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwcGVuZChuZXcgSW5saW5lRGVsaW1pdGVyKHR5cGUsIGZyb20sIHRvLCAob3BlbiA/IDEgLyogT3BlbiAqLyA6IDApIHwgKGNsb3NlID8gMiAvKiBDbG9zZSAqLyA6IDApKSk7XG4gICAgfVxuICAgIC8vLyBBZGQgYW4gaW5saW5lIGVsZW1lbnQuIFJldHVybnMgdGhlIGVuZCBvZiB0aGUgZWxlbWVudC5cbiAgICBhZGRFbGVtZW50KGVsdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcHBlbmQoZWx0KTtcbiAgICB9XG4gICAgLy8vIFJlc29sdmUgbWFya2VycyBiZXR3ZWVuIHRoaXMucGFydHMubGVuZ3RoIGFuZCBmcm9tLCB3cmFwcGluZyBtYXRjaGVkIG1hcmtlcnMgaW4gdGhlXG4gICAgLy8vIGFwcHJvcHJpYXRlIG5vZGUgYW5kIHVwZGF0aW5nIHRoZSBjb250ZW50IG9mIHRoaXMucGFydHMuIEBpbnRlcm5hbFxuICAgIHJlc29sdmVNYXJrZXJzKGZyb20pIHtcbiAgICAgICAgLy8gU2NhbiBmb3J3YXJkLCBsb29raW5nIGZvciBjbG9zaW5nIHRva2Vuc1xuICAgICAgICBmb3IgKGxldCBpID0gZnJvbTsgaSA8IHRoaXMucGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBjbG9zZSA9IHRoaXMucGFydHNbaV07XG4gICAgICAgICAgICBpZiAoIShjbG9zZSBpbnN0YW5jZW9mIElubGluZURlbGltaXRlciAmJiBjbG9zZS50eXBlLnJlc29sdmUgJiYgKGNsb3NlLnNpZGUgJiAyIC8qIENsb3NlICovKSkpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBsZXQgZW1wID0gY2xvc2UudHlwZSA9PSBFbXBoYXNpc1VuZGVyc2NvcmUgfHwgY2xvc2UudHlwZSA9PSBFbXBoYXNpc0FzdGVyaXNrO1xuICAgICAgICAgICAgbGV0IGNsb3NlU2l6ZSA9IGNsb3NlLnRvIC0gY2xvc2UuZnJvbTtcbiAgICAgICAgICAgIGxldCBvcGVuLCBqID0gaSAtIDE7XG4gICAgICAgICAgICAvLyBDb250aW51ZSBzY2FubmluZyBmb3IgYSBtYXRjaGluZyBvcGVuaW5nIHRva2VuXG4gICAgICAgICAgICBmb3IgKDsgaiA+PSBmcm9tOyBqLS0pIHtcbiAgICAgICAgICAgICAgICBsZXQgcGFydCA9IHRoaXMucGFydHNbal07XG4gICAgICAgICAgICAgICAgaWYgKHBhcnQgaW5zdGFuY2VvZiBJbmxpbmVEZWxpbWl0ZXIgJiYgKHBhcnQuc2lkZSAmIDEgLyogT3BlbiAqLykgJiYgcGFydC50eXBlID09IGNsb3NlLnR5cGUgJiZcbiAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIGVtcGhhc2lzIGRlbGltaXRlcnMgd2hlcmUgdGhlIGNoYXJhY3RlciBjb3VudCBkb2Vzbid0IG1hdGNoXG4gICAgICAgICAgICAgICAgICAgICEoZW1wICYmICgoY2xvc2Uuc2lkZSAmIDEgLyogT3BlbiAqLykgfHwgKHBhcnQuc2lkZSAmIDIgLyogQ2xvc2UgKi8pKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKHBhcnQudG8gLSBwYXJ0LmZyb20gKyBjbG9zZVNpemUpICUgMyA9PSAwICYmICgocGFydC50byAtIHBhcnQuZnJvbSkgJSAzIHx8IGNsb3NlU2l6ZSAlIDMpKSkge1xuICAgICAgICAgICAgICAgICAgICBvcGVuID0gcGFydDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFvcGVuKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgbGV0IHR5cGUgPSBjbG9zZS50eXBlLnJlc29sdmUsIGNvbnRlbnQgPSBbXTtcbiAgICAgICAgICAgIGxldCBzdGFydCA9IG9wZW4uZnJvbSwgZW5kID0gY2xvc2UudG87XG4gICAgICAgICAgICAvLyBFbXBoYXNpcyBtYXJrZXIgZWZmZWN0IGRlcGVuZHMgb24gdGhlIGNoYXJhY3RlciBjb3VudC4gU2l6ZSBjb25zdW1lZCBpcyBtaW5pbXVtIG9mIHRoZSB0d29cbiAgICAgICAgICAgIC8vIG1hcmtlcnMuXG4gICAgICAgICAgICBpZiAoZW1wKSB7XG4gICAgICAgICAgICAgICAgbGV0IHNpemUgPSBNYXRoLm1pbigyLCBvcGVuLnRvIC0gb3Blbi5mcm9tLCBjbG9zZVNpemUpO1xuICAgICAgICAgICAgICAgIHN0YXJ0ID0gb3Blbi50byAtIHNpemU7XG4gICAgICAgICAgICAgICAgZW5kID0gY2xvc2UuZnJvbSArIHNpemU7XG4gICAgICAgICAgICAgICAgdHlwZSA9IHNpemUgPT0gMSA/IFwiRW1waGFzaXNcIiA6IFwiU3Ryb25nRW1waGFzaXNcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE1vdmUgdGhlIGNvdmVyZWQgcmVnaW9uIGludG8gY29udGVudCwgb3B0aW9uYWxseSBhZGRpbmcgbWFya2VyIG5vZGVzXG4gICAgICAgICAgICBpZiAob3Blbi50eXBlLm1hcmspXG4gICAgICAgICAgICAgICAgY29udGVudC5wdXNoKHRoaXMuZWx0KG9wZW4udHlwZS5tYXJrLCBzdGFydCwgb3Blbi50bykpO1xuICAgICAgICAgICAgZm9yIChsZXQgayA9IGogKyAxOyBrIDwgaTsgaysrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFydHNba10gaW5zdGFuY2VvZiBFbGVtZW50KVxuICAgICAgICAgICAgICAgICAgICBjb250ZW50LnB1c2godGhpcy5wYXJ0c1trXSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJ0c1trXSA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2xvc2UudHlwZS5tYXJrKVxuICAgICAgICAgICAgICAgIGNvbnRlbnQucHVzaCh0aGlzLmVsdChjbG9zZS50eXBlLm1hcmssIGNsb3NlLmZyb20sIGVuZCkpO1xuICAgICAgICAgICAgbGV0IGVsZW1lbnQgPSB0aGlzLmVsdCh0eXBlLCBzdGFydCwgZW5kLCBjb250ZW50KTtcbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBsZWZ0b3ZlciBlbXBoYXNpcyBtYXJrZXIgY2hhcmFjdGVycywgc2hyaW5rIHRoZSBjbG9zZS9vcGVuIG1hcmtlcnMuIE90aGVyd2lzZSwgY2xlYXIgdGhlbS5cbiAgICAgICAgICAgIHRoaXMucGFydHNbal0gPSBlbXAgJiYgb3Blbi5mcm9tICE9IHN0YXJ0ID8gbmV3IElubGluZURlbGltaXRlcihvcGVuLnR5cGUsIG9wZW4uZnJvbSwgc3RhcnQsIG9wZW4uc2lkZSkgOiBudWxsO1xuICAgICAgICAgICAgbGV0IGtlZXAgPSB0aGlzLnBhcnRzW2ldID0gZW1wICYmIGNsb3NlLnRvICE9IGVuZCA/IG5ldyBJbmxpbmVEZWxpbWl0ZXIoY2xvc2UudHlwZSwgZW5kLCBjbG9zZS50bywgY2xvc2Uuc2lkZSkgOiBudWxsO1xuICAgICAgICAgICAgLy8gSW5zZXJ0IHRoZSBuZXcgZWxlbWVudCBpbiB0aGlzLnBhcnRzXG4gICAgICAgICAgICBpZiAoa2VlcClcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnRzLnNwbGljZShpLCAwLCBlbGVtZW50KTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnRzW2ldID0gZWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICAvLyBDb2xsZWN0IHRoZSBlbGVtZW50cyByZW1haW5pbmcgaW4gdGhpcy5wYXJ0cyBpbnRvIGFuIGFycmF5LlxuICAgICAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSBmcm9tOyBpIDwgdGhpcy5wYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHBhcnQgPSB0aGlzLnBhcnRzW2ldO1xuICAgICAgICAgICAgaWYgKHBhcnQgaW5zdGFuY2VvZiBFbGVtZW50KVxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHBhcnQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8vLyBGaW5kIGFuIG9wZW5pbmcgZGVsaW1pdGVyIG9mIHRoZSBnaXZlbiB0eXBlLiBSZXR1cm5zIGBudWxsYCBpZlxuICAgIC8vLyBubyBkZWxpbWl0ZXIgaXMgZm91bmQsIG9yIGFuIGluZGV4IHRoYXQgY2FuIGJlIHBhc3NlZCB0b1xuICAgIC8vLyBbYHRha2VDb250ZW50YF0oI0lubGluZUNvbnRleHQudGFrZUNvbnRlbnQpIG90aGVyd2lzZS5cbiAgICBmaW5kT3BlbmluZ0RlbGltaXRlcih0eXBlKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLnBhcnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBsZXQgcGFydCA9IHRoaXMucGFydHNbaV07XG4gICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIElubGluZURlbGltaXRlciAmJiBwYXJ0LnR5cGUgPT0gdHlwZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLy8vIFJlbW92ZSBhbGwgaW5saW5lIGVsZW1lbnRzIGFuZCBkZWxpbWl0ZXJzIHN0YXJ0aW5nIGZyb20gdGhlXG4gICAgLy8vIGdpdmVuIGluZGV4ICh3aGljaCB5b3Ugc2hvdWxkIGdldCBmcm9tXG4gICAgLy8vIFtgZmluZE9wZW5pbmdEZWxpbWl0ZXJgXSgjSW5saW5lQ29udGV4dC5maW5kT3BlbmluZ0RlbGltaXRlciksXG4gICAgLy8vIHJlc29sdmUgZGVsaW1pdGVycyBpbnNpZGUgb2YgdGhlbSwgYW5kIHJldHVybiB0aGVtIGFzIGFuIGFycmF5XG4gICAgLy8vIG9mIGVsZW1lbnRzLlxuICAgIHRha2VDb250ZW50KHN0YXJ0SW5kZXgpIHtcbiAgICAgICAgbGV0IGNvbnRlbnQgPSB0aGlzLnJlc29sdmVNYXJrZXJzKHN0YXJ0SW5kZXgpO1xuICAgICAgICB0aGlzLnBhcnRzLmxlbmd0aCA9IHN0YXJ0SW5kZXg7XG4gICAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH1cbiAgICAvLy8gU2tpcCBzcGFjZSBhZnRlciB0aGUgZ2l2ZW4gKGRvY3VtZW50KSBwb3NpdGlvbiwgcmV0dXJuaW5nIGVpdGhlclxuICAgIC8vLyB0aGUgcG9zaXRpb24gb2YgdGhlIG5leHQgbm9uLXNwYWNlIGNoYXJhY3RlciBvciB0aGUgZW5kIG9mIHRoZVxuICAgIC8vLyBzZWN0aW9uLlxuICAgIHNraXBTcGFjZShmcm9tKSB7IHJldHVybiBza2lwU3BhY2UodGhpcy50ZXh0LCBmcm9tIC0gdGhpcy5vZmZzZXQpICsgdGhpcy5vZmZzZXQ7IH1cbiAgICBlbHQodHlwZSwgZnJvbSwgdG8sIGNoaWxkcmVuKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdHlwZSA9PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgcmV0dXJuIGVsdCh0aGlzLnBhcnNlci5nZXROb2RlVHlwZSh0eXBlKSwgZnJvbSwgdG8sIGNoaWxkcmVuKTtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmVlRWxlbWVudCh0eXBlLCBmcm9tKTtcbiAgICB9XG59XG5mdW5jdGlvbiBpbmplY3RNYXJrcyhlbGVtZW50cywgbWFya3MpIHtcbiAgICBpZiAoIW1hcmtzLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIGVsZW1lbnRzO1xuICAgIGlmICghZWxlbWVudHMubGVuZ3RoKVxuICAgICAgICByZXR1cm4gbWFya3M7XG4gICAgbGV0IGVsdHMgPSBlbGVtZW50cy5zbGljZSgpLCBlSSA9IDA7XG4gICAgZm9yIChsZXQgbWFyayBvZiBtYXJrcykge1xuICAgICAgICB3aGlsZSAoZUkgPCBlbHRzLmxlbmd0aCAmJiBlbHRzW2VJXS50byA8IG1hcmsudG8pXG4gICAgICAgICAgICBlSSsrO1xuICAgICAgICBpZiAoZUkgPCBlbHRzLmxlbmd0aCAmJiBlbHRzW2VJXS5mcm9tIDwgbWFyay5mcm9tKSB7XG4gICAgICAgICAgICBsZXQgZSA9IGVsdHNbZUldO1xuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBFbGVtZW50KVxuICAgICAgICAgICAgICAgIGVsdHNbZUldID0gbmV3IEVsZW1lbnQoZS50eXBlLCBlLmZyb20sIGUudG8sIGluamVjdE1hcmtzKGUuY2hpbGRyZW4sIFttYXJrXSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZWx0cy5zcGxpY2UoZUkrKywgMCwgbWFyayk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGVsdHM7XG59XG4vLyBUaGVzZSBhcmUgYmxvY2tzIHRoYXQgY2FuIHNwYW4gYmxhbmsgbGluZXMsIGFuZCBzaG91bGQgdGh1cyBvbmx5IGJlXG4vLyByZXVzZWQgaWYgdGhlaXIgbmV4dCBzaWJsaW5nIGlzIGFsc28gYmVpbmcgcmV1c2VkLlxuY29uc3QgTm90TGFzdCA9IFtUeXBlLkNvZGVCbG9jaywgVHlwZS5MaXN0SXRlbSwgVHlwZS5PcmRlcmVkTGlzdCwgVHlwZS5CdWxsZXRMaXN0XTtcbmNsYXNzIEZyYWdtZW50Q3Vyc29yIHtcbiAgICBjb25zdHJ1Y3RvcihmcmFnbWVudHMsIGlucHV0KSB7XG4gICAgICAgIHRoaXMuZnJhZ21lbnRzID0gZnJhZ21lbnRzO1xuICAgICAgICB0aGlzLmlucHV0ID0gaW5wdXQ7XG4gICAgICAgIC8vIEluZGV4IGludG8gZnJhZ21lbnQgYXJyYXlcbiAgICAgICAgdGhpcy5pID0gMDtcbiAgICAgICAgLy8gQWN0aXZlIGZyYWdtZW50XG4gICAgICAgIHRoaXMuZnJhZ21lbnQgPSBudWxsO1xuICAgICAgICB0aGlzLmZyYWdtZW50RW5kID0gLTE7XG4gICAgICAgIC8vIEN1cnNvciBpbnRvIHRoZSBjdXJyZW50IGZyYWdtZW50LCBpZiBhbnkuIFdoZW4gYG1vdmVUb2AgcmV0dXJuc1xuICAgICAgICAvLyB0cnVlLCB0aGlzIHBvaW50cyBhdCB0aGUgZmlyc3QgYmxvY2sgYWZ0ZXIgYHBvc2AuXG4gICAgICAgIHRoaXMuY3Vyc29yID0gbnVsbDtcbiAgICAgICAgaWYgKGZyYWdtZW50cy5sZW5ndGgpXG4gICAgICAgICAgICB0aGlzLmZyYWdtZW50ID0gZnJhZ21lbnRzW3RoaXMuaSsrXTtcbiAgICB9XG4gICAgbmV4dEZyYWdtZW50KCkge1xuICAgICAgICB0aGlzLmZyYWdtZW50ID0gdGhpcy5pIDwgdGhpcy5mcmFnbWVudHMubGVuZ3RoID8gdGhpcy5mcmFnbWVudHNbdGhpcy5pKytdIDogbnVsbDtcbiAgICAgICAgdGhpcy5jdXJzb3IgPSBudWxsO1xuICAgICAgICB0aGlzLmZyYWdtZW50RW5kID0gLTE7XG4gICAgfVxuICAgIG1vdmVUbyhwb3MsIGxpbmVTdGFydCkge1xuICAgICAgICB3aGlsZSAodGhpcy5mcmFnbWVudCAmJiB0aGlzLmZyYWdtZW50LnRvIDw9IHBvcylcbiAgICAgICAgICAgIHRoaXMubmV4dEZyYWdtZW50KCk7XG4gICAgICAgIGlmICghdGhpcy5mcmFnbWVudCB8fCB0aGlzLmZyYWdtZW50LmZyb20gPiAocG9zID8gcG9zIC0gMSA6IDApKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5mcmFnbWVudEVuZCA8IDApIHtcbiAgICAgICAgICAgIGxldCBlbmQgPSB0aGlzLmZyYWdtZW50LnRvO1xuICAgICAgICAgICAgd2hpbGUgKGVuZCA+IDAgJiYgdGhpcy5pbnB1dC5yZWFkKGVuZCAtIDEsIGVuZCkgIT0gXCJcXG5cIilcbiAgICAgICAgICAgICAgICBlbmQtLTtcbiAgICAgICAgICAgIHRoaXMuZnJhZ21lbnRFbmQgPSBlbmQgPyBlbmQgLSAxIDogMDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgYyA9IHRoaXMuY3Vyc29yO1xuICAgICAgICBpZiAoIWMpIHtcbiAgICAgICAgICAgIGMgPSB0aGlzLmN1cnNvciA9IHRoaXMuZnJhZ21lbnQudHJlZS5jdXJzb3IoKTtcbiAgICAgICAgICAgIGMuZmlyc3RDaGlsZCgpO1xuICAgICAgICB9XG4gICAgICAgIGxldCByUG9zID0gcG9zICsgdGhpcy5mcmFnbWVudC5vZmZzZXQ7XG4gICAgICAgIHdoaWxlIChjLnRvIDw9IHJQb3MpXG4gICAgICAgICAgICBpZiAoIWMucGFyZW50KCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBpZiAoYy5mcm9tID49IHJQb3MpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnJhZ21lbnQuZnJvbSA8PSBsaW5lU3RhcnQ7XG4gICAgICAgICAgICBpZiAoIWMuY2hpbGRBZnRlcihyUG9zKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbWF0Y2hlcyhoYXNoKSB7XG4gICAgICAgIGxldCB0cmVlID0gdGhpcy5jdXJzb3IudHJlZTtcbiAgICAgICAgcmV0dXJuIHRyZWUgJiYgdHJlZS5wcm9wKE5vZGVQcm9wLmNvbnRleHRIYXNoKSA9PSBoYXNoO1xuICAgIH1cbiAgICB0YWtlTm9kZXMoY3gpIHtcbiAgICAgICAgbGV0IGN1ciA9IHRoaXMuY3Vyc29yLCBvZmYgPSB0aGlzLmZyYWdtZW50Lm9mZnNldCwgZnJhZ0VuZCA9IHRoaXMuZnJhZ21lbnRFbmQgLSAodGhpcy5mcmFnbWVudC5vcGVuRW5kID8gMSA6IDApO1xuICAgICAgICBsZXQgc3RhcnQgPSBjeC5hYnNvbHV0ZUxpbmVTdGFydCwgZW5kID0gc3RhcnQsIGJsb2NrSSA9IGN4LmJsb2NrLmNoaWxkcmVuLmxlbmd0aDtcbiAgICAgICAgbGV0IHByZXZFbmQgPSBlbmQsIHByZXZJID0gYmxvY2tJO1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBpZiAoY3VyLnRvIC0gb2ZmID4gZnJhZ0VuZCkge1xuICAgICAgICAgICAgICAgIGlmIChjdXIudHlwZS5pc0Fub255bW91cyAmJiBjdXIuZmlyc3RDaGlsZCgpKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN4LmRvbnRJbmplY3QuYWRkKGN1ci50cmVlKTtcbiAgICAgICAgICAgIGN4LmFkZE5vZGUoY3VyLnRyZWUsIGN1ci5mcm9tIC0gb2ZmKTtcbiAgICAgICAgICAgIC8vIFRha2VuIGNvbnRlbnQgbXVzdCBhbHdheXMgZW5kIGluIGEgYmxvY2ssIGJlY2F1c2UgaW5jcmVtZW50YWxcbiAgICAgICAgICAgIC8vIHBhcnNpbmcgaGFwcGVucyBvbiBibG9jayBib3VuZGFyaWVzLiBOZXZlciBzdG9wIGRpcmVjdGx5XG4gICAgICAgICAgICAvLyBhZnRlciBhbiBpbmRlbnRlZCBjb2RlIGJsb2NrLCBzaW5jZSB0aG9zZSBjYW4gY29udGludWUgYWZ0ZXJcbiAgICAgICAgICAgIC8vIGFueSBudW1iZXIgb2YgYmxhbmsgbGluZXMuXG4gICAgICAgICAgICBpZiAoY3VyLnR5cGUuaXMoXCJCbG9ja1wiKSkge1xuICAgICAgICAgICAgICAgIGlmIChOb3RMYXN0LmluZGV4T2YoY3VyLnR5cGUuaWQpIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBlbmQgPSBjdXIudG8gLSBvZmY7XG4gICAgICAgICAgICAgICAgICAgIGJsb2NrSSA9IGN4LmJsb2NrLmNoaWxkcmVuLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVuZCA9IHByZXZFbmQ7XG4gICAgICAgICAgICAgICAgICAgIGJsb2NrSSA9IHByZXZJO1xuICAgICAgICAgICAgICAgICAgICBwcmV2RW5kID0gY3VyLnRvIC0gb2ZmO1xuICAgICAgICAgICAgICAgICAgICBwcmV2SSA9IGN4LmJsb2NrLmNoaWxkcmVuLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWN1ci5uZXh0U2libGluZygpKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChjeC5ibG9jay5jaGlsZHJlbi5sZW5ndGggPiBibG9ja0kpIHtcbiAgICAgICAgICAgIGN4LmJsb2NrLmNoaWxkcmVuLnBvcCgpO1xuICAgICAgICAgICAgY3guYmxvY2sucG9zaXRpb25zLnBvcCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbmQgLSBzdGFydDtcbiAgICB9XG59XG5jb25zdCBtYXJrZG93bkhpZ2hsaWdodGluZyA9IHN0eWxlVGFncyh7XG4gICAgXCJCbG9ja3F1b3RlLy4uLlwiOiB0YWdzLnF1b3RlLFxuICAgIEhvcml6b250YWxSdWxlOiB0YWdzLmNvbnRlbnRTZXBhcmF0b3IsXG4gICAgXCJBVFhIZWFkaW5nMS8uLi4gU2V0ZXh0SGVhZGluZzEvLi4uXCI6IHRhZ3MuaGVhZGluZzEsXG4gICAgXCJBVFhIZWFkaW5nMi8uLi4gU2V0ZXh0SGVhZGluZzIvLi4uXCI6IHRhZ3MuaGVhZGluZzIsXG4gICAgXCJBVFhIZWFkaW5nMy8uLi5cIjogdGFncy5oZWFkaW5nMyxcbiAgICBcIkFUWEhlYWRpbmc0Ly4uLlwiOiB0YWdzLmhlYWRpbmc0LFxuICAgIFwiQVRYSGVhZGluZzUvLi4uXCI6IHRhZ3MuaGVhZGluZzUsXG4gICAgXCJBVFhIZWFkaW5nNi8uLi5cIjogdGFncy5oZWFkaW5nNixcbiAgICBcIkNvbW1lbnQgQ29tbWVudEJsb2NrXCI6IHRhZ3MuY29tbWVudCxcbiAgICBFc2NhcGU6IHRhZ3MuZXNjYXBlLFxuICAgIEVudGl0eTogdGFncy5jaGFyYWN0ZXIsXG4gICAgXCJFbXBoYXNpcy8uLi5cIjogdGFncy5lbXBoYXNpcyxcbiAgICBcIlN0cm9uZ0VtcGhhc2lzLy4uLlwiOiB0YWdzLnN0cm9uZyxcbiAgICBcIkxpbmsvLi4uIEltYWdlLy4uLlwiOiB0YWdzLmxpbmssXG4gICAgXCJPcmRlcmVkTGlzdC8uLi4gQnVsbGV0TGlzdC8uLi5cIjogdGFncy5saXN0LFxuICAgIFwiQmxvY2tRdW90ZS8uLi5cIjogdGFncy5xdW90ZSxcbiAgICBcIklubGluZUNvZGUgQ29kZVRleHRcIjogdGFncy5tb25vc3BhY2UsXG4gICAgVVJMOiB0YWdzLnVybCxcbiAgICBcIkhlYWRlck1hcmsgSGFyZEJyZWFrIFF1b3RlTWFyayBMaXN0TWFyayBMaW5rTWFyayBFbXBoYXNpc01hcmsgQ29kZU1hcmtcIjogdGFncy5wcm9jZXNzaW5nSW5zdHJ1Y3Rpb24sXG4gICAgXCJDb2RlSW5mbyBMaW5rTGFiZWxcIjogdGFncy5sYWJlbE5hbWUsXG4gICAgTGlua1RpdGxlOiB0YWdzLnN0cmluZyxcbiAgICBQYXJhZ3JhcGg6IHRhZ3MuY29udGVudFxufSk7XG4vLy8gVGhlIGRlZmF1bHQgQ29tbW9uTWFyayBwYXJzZXIuXG5jb25zdCBwYXJzZXIgPSBuZXcgTWFya2Rvd25QYXJzZXIobmV3IE5vZGVTZXQobm9kZVR5cGVzKS5leHRlbmQobWFya2Rvd25IaWdobGlnaHRpbmcpLCBPYmplY3Qua2V5cyhEZWZhdWx0QmxvY2tQYXJzZXJzKS5tYXAobiA9PiBEZWZhdWx0QmxvY2tQYXJzZXJzW25dKSwgT2JqZWN0LmtleXMoRGVmYXVsdEJsb2NrUGFyc2VycykubWFwKG4gPT4gRGVmYXVsdExlYWZCbG9ja3Nbbl0pLCBPYmplY3Qua2V5cyhEZWZhdWx0QmxvY2tQYXJzZXJzKSwgRGVmYXVsdEVuZExlYWYsIERlZmF1bHRTa2lwTWFya3VwLCBPYmplY3Qua2V5cyhEZWZhdWx0SW5saW5lKS5tYXAobiA9PiBEZWZhdWx0SW5saW5lW25dKSwgT2JqZWN0LmtleXMoRGVmYXVsdElubGluZSksIFtdKTtcblxuZnVuY3Rpb24gbGVmdE92ZXJTcGFjZShub2RlLCBmcm9tLCB0bykge1xuICAgIGxldCByYW5nZXMgPSBbXTtcbiAgICBmb3IgKGxldCBuID0gbm9kZS5maXJzdENoaWxkLCBwb3MgPSBmcm9tOzsgbiA9IG4ubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgbGV0IG5leHRQb3MgPSBuID8gbi5mcm9tIDogdG87XG4gICAgICAgIGlmIChuZXh0UG9zID4gcG9zKVxuICAgICAgICAgICAgcmFuZ2VzLnB1c2goeyBmcm9tOiBwb3MsIHRvOiBuZXh0UG9zIH0pO1xuICAgICAgICBpZiAoIW4pXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgcG9zID0gbi50bztcbiAgICB9XG4gICAgcmV0dXJuIHJhbmdlcztcbn1cbi8vLyBDcmVhdGUgYSBNYXJrZG93biBleHRlbnNpb24gdG8gZW5hYmxlIG5lc3RlZCBwYXJzaW5nIG9uIGNvZGVcbi8vLyBibG9ja3MgYW5kL29yIGVtYmVkZGVkIEhUTUwuXG5mdW5jdGlvbiBwYXJzZUNvZGUoY29uZmlnKSB7XG4gICAgbGV0IHsgY29kZVBhcnNlciwgaHRtbFBhcnNlciB9ID0gY29uZmlnO1xuICAgIGxldCB3cmFwID0gcGFyc2VNaXhlZCgobm9kZSwgaW5wdXQpID0+IHtcbiAgICAgICAgbGV0IGlkID0gbm9kZS50eXBlLmlkO1xuICAgICAgICBpZiAoY29kZVBhcnNlciAmJiAoaWQgPT0gVHlwZS5Db2RlQmxvY2sgfHwgaWQgPT0gVHlwZS5GZW5jZWRDb2RlKSkge1xuICAgICAgICAgICAgbGV0IGluZm8gPSBcIlwiO1xuICAgICAgICAgICAgaWYgKGlkID09IFR5cGUuRmVuY2VkQ29kZSkge1xuICAgICAgICAgICAgICAgIGxldCBpbmZvTm9kZSA9IG5vZGUubm9kZS5nZXRDaGlsZChUeXBlLkNvZGVJbmZvKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5mb05vZGUpXG4gICAgICAgICAgICAgICAgICAgIGluZm8gPSBpbnB1dC5yZWFkKGluZm9Ob2RlLmZyb20sIGluZm9Ob2RlLnRvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBwYXJzZXIgPSBjb2RlUGFyc2VyKGluZm8pO1xuICAgICAgICAgICAgaWYgKHBhcnNlcilcbiAgICAgICAgICAgICAgICByZXR1cm4geyBwYXJzZXIsIG92ZXJsYXk6IG5vZGUgPT4gbm9kZS50eXBlLmlkID09IFR5cGUuQ29kZVRleHQgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChodG1sUGFyc2VyICYmIChpZCA9PSBUeXBlLkhUTUxCbG9jayB8fCBpZCA9PSBUeXBlLkhUTUxUYWcpKSB7XG4gICAgICAgICAgICByZXR1cm4geyBwYXJzZXI6IGh0bWxQYXJzZXIsIG92ZXJsYXk6IGxlZnRPdmVyU3BhY2Uobm9kZS5ub2RlLCBub2RlLmZyb20sIG5vZGUudG8pIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSk7XG4gICAgcmV0dXJuIHsgd3JhcCB9O1xufVxuXG5jb25zdCBTdHJpa2V0aHJvdWdoRGVsaW0gPSB7IHJlc29sdmU6IFwiU3RyaWtldGhyb3VnaFwiLCBtYXJrOiBcIlN0cmlrZXRocm91Z2hNYXJrXCIgfTtcbi8vLyBBbiBleHRlbnNpb24gdGhhdCBpbXBsZW1lbnRzXG4vLy8gW0dGTS1zdHlsZV0oaHR0cHM6Ly9naXRodWIuZ2l0aHViLmNvbS9nZm0vI3N0cmlrZXRocm91Z2gtZXh0ZW5zaW9uLSlcbi8vLyBTdHJpa2V0aHJvdWdoIHN5bnRheCB1c2luZyBgfn5gIGRlbGltaXRlcnMuXG5jb25zdCBTdHJpa2V0aHJvdWdoID0ge1xuICAgIGRlZmluZU5vZGVzOiBbe1xuICAgICAgICAgICAgbmFtZTogXCJTdHJpa2V0aHJvdWdoXCIsXG4gICAgICAgICAgICBzdHlsZTogeyBcIlN0cmlrZXRocm91Z2gvLi4uXCI6IHRhZ3Muc3RyaWtldGhyb3VnaCB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6IFwiU3RyaWtldGhyb3VnaE1hcmtcIixcbiAgICAgICAgICAgIHN0eWxlOiB0YWdzLnByb2Nlc3NpbmdJbnN0cnVjdGlvblxuICAgICAgICB9XSxcbiAgICBwYXJzZUlubGluZTogW3tcbiAgICAgICAgICAgIG5hbWU6IFwiU3RyaWtldGhyb3VnaFwiLFxuICAgICAgICAgICAgcGFyc2UoY3gsIG5leHQsIHBvcykge1xuICAgICAgICAgICAgICAgIGlmIChuZXh0ICE9IDEyNiAvKiAnficgKi8gfHwgY3guY2hhcihwb3MgKyAxKSAhPSAxMjYgfHwgY3guY2hhcihwb3MgKyAyKSA9PSAxMjYpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICBsZXQgYmVmb3JlID0gY3guc2xpY2UocG9zIC0gMSwgcG9zKSwgYWZ0ZXIgPSBjeC5zbGljZShwb3MgKyAyLCBwb3MgKyAzKTtcbiAgICAgICAgICAgICAgICBsZXQgc0JlZm9yZSA9IC9cXHN8XiQvLnRlc3QoYmVmb3JlKSwgc0FmdGVyID0gL1xcc3xeJC8udGVzdChhZnRlcik7XG4gICAgICAgICAgICAgICAgbGV0IHBCZWZvcmUgPSBQdW5jdHVhdGlvbi50ZXN0KGJlZm9yZSksIHBBZnRlciA9IFB1bmN0dWF0aW9uLnRlc3QoYWZ0ZXIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjeC5hZGREZWxpbWl0ZXIoU3RyaWtldGhyb3VnaERlbGltLCBwb3MsIHBvcyArIDIsICFzQWZ0ZXIgJiYgKCFwQWZ0ZXIgfHwgc0JlZm9yZSB8fCBwQmVmb3JlKSwgIXNCZWZvcmUgJiYgKCFwQmVmb3JlIHx8IHNBZnRlciB8fCBwQWZ0ZXIpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhZnRlcjogXCJFbXBoYXNpc1wiXG4gICAgICAgIH1dXG59O1xuZnVuY3Rpb24gcGFyc2VSb3coY3gsIGxpbmUsIHN0YXJ0SSA9IDAsIGVsdHMsIG9mZnNldCA9IDApIHtcbiAgICBsZXQgY291bnQgPSAwLCBmaXJzdCA9IHRydWUsIGNlbGxTdGFydCA9IC0xLCBjZWxsRW5kID0gLTEsIGVzYyA9IGZhbHNlO1xuICAgIGxldCBwYXJzZUNlbGwgPSAoKSA9PiB7XG4gICAgICAgIGVsdHMucHVzaChjeC5lbHQoXCJUYWJsZUNlbGxcIiwgb2Zmc2V0ICsgY2VsbFN0YXJ0LCBvZmZzZXQgKyBjZWxsRW5kLCBjeC5wYXJzZXIucGFyc2VJbmxpbmUobGluZS5zbGljZShjZWxsU3RhcnQsIGNlbGxFbmQpLCBvZmZzZXQgKyBjZWxsU3RhcnQpKSk7XG4gICAgfTtcbiAgICBmb3IgKGxldCBpID0gc3RhcnRJOyBpIDwgbGluZS5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgbmV4dCA9IGxpbmUuY2hhckNvZGVBdChpKTtcbiAgICAgICAgaWYgKG5leHQgPT0gMTI0IC8qICd8JyAqLyAmJiAhZXNjKSB7XG4gICAgICAgICAgICBpZiAoIWZpcnN0IHx8IGNlbGxTdGFydCA+IC0xKVxuICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICBmaXJzdCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKGVsdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2VsbFN0YXJ0ID4gLTEpXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlQ2VsbCgpO1xuICAgICAgICAgICAgICAgIGVsdHMucHVzaChjeC5lbHQoXCJUYWJsZURlbGltaXRlclwiLCBpICsgb2Zmc2V0LCBpICsgb2Zmc2V0ICsgMSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2VsbFN0YXJ0ID0gY2VsbEVuZCA9IC0xO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGVzYyB8fCBuZXh0ICE9IDMyICYmIG5leHQgIT0gOSkge1xuICAgICAgICAgICAgaWYgKGNlbGxTdGFydCA8IDApXG4gICAgICAgICAgICAgICAgY2VsbFN0YXJ0ID0gaTtcbiAgICAgICAgICAgIGNlbGxFbmQgPSBpICsgMTtcbiAgICAgICAgfVxuICAgICAgICBlc2MgPSAhZXNjICYmIG5leHQgPT0gOTI7XG4gICAgfVxuICAgIGlmIChjZWxsU3RhcnQgPiAtMSkge1xuICAgICAgICBjb3VudCsrO1xuICAgICAgICBpZiAoZWx0cylcbiAgICAgICAgICAgIHBhcnNlQ2VsbCgpO1xuICAgIH1cbiAgICByZXR1cm4gY291bnQ7XG59XG5mdW5jdGlvbiBoYXNQaXBlKHN0ciwgc3RhcnQpIHtcbiAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IG5leHQgPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICAgICAgaWYgKG5leHQgPT0gMTI0IC8qICd8JyAqLylcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAobmV4dCA9PSA5MiAvKiAnXFxcXCcgKi8pXG4gICAgICAgICAgICBpKys7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmNvbnN0IGRlbGltaXRlckxpbmUgPSAvXlxcfD8oXFxzKjo/LSs6P1xccypcXHwpKyhcXHMqOj8tKzo/XFxzKik/JC87XG5jbGFzcyBUYWJsZVBhcnNlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIE51bGwgbWVhbnMgd2UgaGF2ZW4ndCBzZWVuIHRoZSBzZWNvbmQgbGluZSB5ZXQsIGZhbHNlIG1lYW5zIHRoaXNcbiAgICAgICAgLy8gaXNuJ3QgYSB0YWJsZSwgYW5kIGFuIGFycmF5IG1lYW5zIHRoaXMgaXMgYSB0YWJsZSBhbmQgd2UndmVcbiAgICAgICAgLy8gcGFyc2VkIHRoZSBnaXZlbiByb3dzIHNvIGZhci5cbiAgICAgICAgdGhpcy5yb3dzID0gbnVsbDtcbiAgICB9XG4gICAgbmV4dExpbmUoY3gsIGxpbmUsIGxlYWYpIHtcbiAgICAgICAgaWYgKHRoaXMucm93cyA9PSBudWxsKSB7IC8vIFNlY29uZCBsaW5lXG4gICAgICAgICAgICB0aGlzLnJvd3MgPSBmYWxzZTtcbiAgICAgICAgICAgIGxldCBsaW5lVGV4dDtcbiAgICAgICAgICAgIGlmICgobGluZS5uZXh0ID09IDQ1IHx8IGxpbmUubmV4dCA9PSA1OCB8fCBsaW5lLm5leHQgPT0gMTI0IC8qICctOnwnICovKSAmJlxuICAgICAgICAgICAgICAgIGRlbGltaXRlckxpbmUudGVzdChsaW5lVGV4dCA9IGxpbmUudGV4dC5zbGljZShsaW5lLnBvcykpKSB7XG4gICAgICAgICAgICAgICAgbGV0IGZpcnN0Um93ID0gW10sIGZpcnN0Q291bnQgPSBwYXJzZVJvdyhjeCwgbGVhZi5jb250ZW50LCAwLCBmaXJzdFJvdywgbGVhZi5zdGFydCk7XG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0Q291bnQgPT0gcGFyc2VSb3coY3gsIGxpbmVUZXh0LCBsaW5lLnBvcykpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm93cyA9IFtjeC5lbHQoXCJUYWJsZUhlYWRlclwiLCBsZWFmLnN0YXJ0LCBsZWFmLnN0YXJ0ICsgbGVhZi5jb250ZW50Lmxlbmd0aCwgZmlyc3RSb3cpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3guZWx0KFwiVGFibGVEZWxpbWl0ZXJcIiwgY3gubGluZVN0YXJ0ICsgbGluZS5wb3MsIGN4LmxpbmVTdGFydCArIGxpbmUudGV4dC5sZW5ndGgpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnJvd3MpIHsgLy8gTGluZSBhZnRlciB0aGUgc2Vjb25kXG4gICAgICAgICAgICBsZXQgY29udGVudCA9IFtdO1xuICAgICAgICAgICAgcGFyc2VSb3coY3gsIGxpbmUudGV4dCwgbGluZS5wb3MsIGNvbnRlbnQsIGN4LmxpbmVTdGFydCk7XG4gICAgICAgICAgICB0aGlzLnJvd3MucHVzaChjeC5lbHQoXCJUYWJsZVJvd1wiLCBjeC5saW5lU3RhcnQgKyBsaW5lLnBvcywgY3gubGluZVN0YXJ0ICsgbGluZS50ZXh0Lmxlbmd0aCwgY29udGVudCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZmluaXNoKGN4LCBsZWFmKSB7XG4gICAgICAgIGlmICghdGhpcy5yb3dzKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBjeC5hZGRMZWFmRWxlbWVudChsZWFmLCBjeC5lbHQoXCJUYWJsZVwiLCBsZWFmLnN0YXJ0LCBsZWFmLnN0YXJ0ICsgbGVhZi5jb250ZW50Lmxlbmd0aCwgdGhpcy5yb3dzKSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cbi8vLyBUaGlzIGV4dGVuc2lvbiBwcm92aWRlc1xuLy8vIFtHRk0tc3R5bGVdKGh0dHBzOi8vZ2l0aHViLmdpdGh1Yi5jb20vZ2ZtLyN0YWJsZXMtZXh0ZW5zaW9uLSlcbi8vLyB0YWJsZXMsIHVzaW5nIHN5bnRheCBsaWtlIHRoaXM6XG4vLy9cbi8vLyBgYGBcbi8vLyB8IGhlYWQgMSB8IGhlYWQgMiB8XG4vLy8gfCAtLS0gICAgfCAtLS0gICAgfFxuLy8vIHwgY2VsbCAxIHwgY2VsbCAyIHxcbi8vLyBgYGBcbmNvbnN0IFRhYmxlID0ge1xuICAgIGRlZmluZU5vZGVzOiBbXG4gICAgICAgIHsgbmFtZTogXCJUYWJsZVwiLCBibG9jazogdHJ1ZSB9LFxuICAgICAgICB7IG5hbWU6IFwiVGFibGVIZWFkZXJcIiwgc3R5bGU6IHsgXCJUYWJsZUhlYWRlci8uLi5cIjogdGFncy5oZWFkaW5nIH0gfSxcbiAgICAgICAgXCJUYWJsZVJvd1wiLFxuICAgICAgICB7IG5hbWU6IFwiVGFibGVDZWxsXCIsIHN0eWxlOiB0YWdzLmNvbnRlbnQgfSxcbiAgICAgICAgeyBuYW1lOiBcIlRhYmxlRGVsaW1pdGVyXCIsIHN0eWxlOiB0YWdzLnByb2Nlc3NpbmdJbnN0cnVjdGlvbiB9LFxuICAgIF0sXG4gICAgcGFyc2VCbG9jazogW3tcbiAgICAgICAgICAgIG5hbWU6IFwiVGFibGVcIixcbiAgICAgICAgICAgIGxlYWYoXywgbGVhZikgeyByZXR1cm4gaGFzUGlwZShsZWFmLmNvbnRlbnQsIDApID8gbmV3IFRhYmxlUGFyc2VyIDogbnVsbDsgfSxcbiAgICAgICAgICAgIGVuZExlYWYoY3gsIGxpbmUsIGxlYWYpIHtcbiAgICAgICAgICAgICAgICBpZiAobGVhZi5wYXJzZXJzLnNvbWUocCA9PiBwIGluc3RhbmNlb2YgVGFibGVQYXJzZXIpIHx8ICFoYXNQaXBlKGxpbmUudGV4dCwgbGluZS5iYXNlUG9zKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gY3guc2NhbkxpbmUoY3guYWJzb2x1dGVMaW5lRW5kICsgMSkudGV4dDtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVsaW1pdGVyTGluZS50ZXN0KG5leHQpICYmIHBhcnNlUm93KGN4LCBsaW5lLnRleHQsIGxpbmUuYmFzZVBvcykgPT0gcGFyc2VSb3coY3gsIG5leHQsIGxpbmUuYmFzZVBvcyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYmVmb3JlOiBcIlNldGV4dEhlYWRpbmdcIlxuICAgICAgICB9XVxufTtcbmNsYXNzIFRhc2tQYXJzZXIge1xuICAgIG5leHRMaW5lKCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICBmaW5pc2goY3gsIGxlYWYpIHtcbiAgICAgICAgY3guYWRkTGVhZkVsZW1lbnQobGVhZiwgY3guZWx0KFwiVGFza1wiLCBsZWFmLnN0YXJ0LCBsZWFmLnN0YXJ0ICsgbGVhZi5jb250ZW50Lmxlbmd0aCwgW1xuICAgICAgICAgICAgY3guZWx0KFwiVGFza01hcmtlclwiLCBsZWFmLnN0YXJ0LCBsZWFmLnN0YXJ0ICsgMyksXG4gICAgICAgICAgICAuLi5jeC5wYXJzZXIucGFyc2VJbmxpbmUobGVhZi5jb250ZW50LnNsaWNlKDMpLCBsZWFmLnN0YXJ0ICsgMylcbiAgICAgICAgXSkpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG4vLy8gRXh0ZW5zaW9uIHByb3ZpZGluZ1xuLy8vIFtHRk0tc3R5bGVdKGh0dHBzOi8vZ2l0aHViLmdpdGh1Yi5jb20vZ2ZtLyN0YXNrLWxpc3QtaXRlbXMtZXh0ZW5zaW9uLSlcbi8vLyB0YXNrIGxpc3QgaXRlbXMsIHdoZXJlIGxpc3QgaXRlbXMgY2FuIGJlIHByZWZpeGVkIHdpdGggYFsgXWAgb3Jcbi8vLyBgW3hdYCB0byBhZGQgYSBjaGVja2JveC5cbmNvbnN0IFRhc2tMaXN0ID0ge1xuICAgIGRlZmluZU5vZGVzOiBbXG4gICAgICAgIHsgbmFtZTogXCJUYXNrXCIsIGJsb2NrOiB0cnVlLCBzdHlsZTogdGFncy5saXN0IH0sXG4gICAgICAgIHsgbmFtZTogXCJUYXNrTWFya2VyXCIsIHN0eWxlOiB0YWdzLmF0b20gfVxuICAgIF0sXG4gICAgcGFyc2VCbG9jazogW3tcbiAgICAgICAgICAgIG5hbWU6IFwiVGFza0xpc3RcIixcbiAgICAgICAgICAgIGxlYWYoY3gsIGxlYWYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gL15cXFtbIHhYXVxcXS8udGVzdChsZWFmLmNvbnRlbnQpICYmIGN4LnBhcmVudFR5cGUoKS5uYW1lID09IFwiTGlzdEl0ZW1cIiA/IG5ldyBUYXNrUGFyc2VyIDogbnVsbDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhZnRlcjogXCJTZXRleHRIZWFkaW5nXCJcbiAgICAgICAgfV1cbn07XG4vLy8gRXh0ZW5zaW9uIGJ1bmRsZSBjb250YWluaW5nIFtgVGFibGVgXSgjVGFibGUpLFxuLy8vIFtgVGFza0xpc3RgXSgjVGFza0xpc3QpIGFuZCBbYFN0cmlrZXRocm91Z2hgXSgjU3RyaWtldGhyb3VnaCkuXG5jb25zdCBHRk0gPSBbVGFibGUsIFRhc2tMaXN0LCBTdHJpa2V0aHJvdWdoXTtcbmZ1bmN0aW9uIHBhcnNlU3ViU3VwZXIoY2gsIG5vZGUsIG1hcmspIHtcbiAgICByZXR1cm4gKGN4LCBuZXh0LCBwb3MpID0+IHtcbiAgICAgICAgaWYgKG5leHQgIT0gY2ggfHwgY3guY2hhcihwb3MgKyAxKSA9PSBjaClcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgbGV0IGVsdHMgPSBbY3guZWx0KG1hcmssIHBvcywgcG9zICsgMSldO1xuICAgICAgICBmb3IgKGxldCBpID0gcG9zICsgMTsgaSA8IGN4LmVuZDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgbmV4dCA9IGN4LmNoYXIoaSk7XG4gICAgICAgICAgICBpZiAobmV4dCA9PSBjaClcbiAgICAgICAgICAgICAgICByZXR1cm4gY3guYWRkRWxlbWVudChjeC5lbHQobm9kZSwgcG9zLCBpICsgMSwgZWx0cy5jb25jYXQoY3guZWx0KG1hcmssIGksIGkgKyAxKSkpKTtcbiAgICAgICAgICAgIGlmIChuZXh0ID09IDkyIC8qICdcXFxcJyAqLylcbiAgICAgICAgICAgICAgICBlbHRzLnB1c2goY3guZWx0KFwiRXNjYXBlXCIsIGksIGkrKyArIDIpKTtcbiAgICAgICAgICAgIGlmIChzcGFjZShuZXh0KSlcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfTtcbn1cbi8vLyBFeHRlbnNpb24gcHJvdmlkaW5nXG4vLy8gW1BhbmRvYy1zdHlsZV0oaHR0cHM6Ly9wYW5kb2Mub3JnL01BTlVBTC5odG1sI3N1cGVyc2NyaXB0cy1hbmQtc3Vic2NyaXB0cylcbi8vLyBzdXBlcnNjcmlwdCB1c2luZyBgXmAgbWFya2Vycy5cbmNvbnN0IFN1cGVyc2NyaXB0ID0ge1xuICAgIGRlZmluZU5vZGVzOiBbXG4gICAgICAgIHsgbmFtZTogXCJTdXBlcnNjcmlwdFwiLCBzdHlsZTogdGFncy5zcGVjaWFsKHRhZ3MuY29udGVudCkgfSxcbiAgICAgICAgeyBuYW1lOiBcIlN1cGVyc2NyaXB0TWFya1wiLCBzdHlsZTogdGFncy5wcm9jZXNzaW5nSW5zdHJ1Y3Rpb24gfVxuICAgIF0sXG4gICAgcGFyc2VJbmxpbmU6IFt7XG4gICAgICAgICAgICBuYW1lOiBcIlN1cGVyc2NyaXB0XCIsXG4gICAgICAgICAgICBwYXJzZTogcGFyc2VTdWJTdXBlcig5NCAvKiAnXicgKi8sIFwiU3VwZXJzY3JpcHRcIiwgXCJTdXBlcnNjcmlwdE1hcmtcIilcbiAgICAgICAgfV1cbn07XG4vLy8gRXh0ZW5zaW9uIHByb3ZpZGluZ1xuLy8vIFtQYW5kb2Mtc3R5bGVdKGh0dHBzOi8vcGFuZG9jLm9yZy9NQU5VQUwuaHRtbCNzdXBlcnNjcmlwdHMtYW5kLXN1YnNjcmlwdHMpXG4vLy8gc3Vic2NyaXB0IHVzaW5nIGB+YCBtYXJrZXJzLlxuY29uc3QgU3Vic2NyaXB0ID0ge1xuICAgIGRlZmluZU5vZGVzOiBbXG4gICAgICAgIHsgbmFtZTogXCJTdWJzY3JpcHRcIiwgc3R5bGU6IHRhZ3Muc3BlY2lhbCh0YWdzLmNvbnRlbnQpIH0sXG4gICAgICAgIHsgbmFtZTogXCJTdWJzY3JpcHRNYXJrXCIsIHN0eWxlOiB0YWdzLnByb2Nlc3NpbmdJbnN0cnVjdGlvbiB9XG4gICAgXSxcbiAgICBwYXJzZUlubGluZTogW3tcbiAgICAgICAgICAgIG5hbWU6IFwiU3Vic2NyaXB0XCIsXG4gICAgICAgICAgICBwYXJzZTogcGFyc2VTdWJTdXBlcigxMjYgLyogJ34nICovLCBcIlN1YnNjcmlwdFwiLCBcIlN1YnNjcmlwdE1hcmtcIilcbiAgICAgICAgfV1cbn07XG4vLy8gRXh0ZW5zaW9uIHRoYXQgcGFyc2VzIHR3byBjb2xvbnMgd2l0aCBvbmx5IGxldHRlcnMsIHVuZGVyc2NvcmVzLFxuLy8vIGFuZCBudW1iZXJzIGJldHdlZW4gdGhlbSBhcyBgRW1vamlgIG5vZGVzLlxuY29uc3QgRW1vamkgPSB7XG4gICAgZGVmaW5lTm9kZXM6IFt7IG5hbWU6IFwiRW1vamlcIiwgc3R5bGU6IHRhZ3MuY2hhcmFjdGVyIH1dLFxuICAgIHBhcnNlSW5saW5lOiBbe1xuICAgICAgICAgICAgbmFtZTogXCJFbW9qaVwiLFxuICAgICAgICAgICAgcGFyc2UoY3gsIG5leHQsIHBvcykge1xuICAgICAgICAgICAgICAgIGxldCBtYXRjaDtcbiAgICAgICAgICAgICAgICBpZiAobmV4dCAhPSA1OCAvKiAnOicgKi8gfHwgIShtYXRjaCA9IC9eW2EtekEtWl8wLTldKzovLmV4ZWMoY3guc2xpY2UocG9zICsgMSwgY3guZW5kKSkpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN4LmFkZEVsZW1lbnQoY3guZWx0KFwiRW1vamlcIiwgcG9zLCBwb3MgKyAxICsgbWF0Y2hbMF0ubGVuZ3RoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1dXG59O1xuXG5leHBvcnQgeyBCbG9ja0NvbnRleHQsIEVsZW1lbnQsIEVtb2ppLCBHRk0sIElubGluZUNvbnRleHQsIExlYWZCbG9jaywgTGluZSwgTWFya2Rvd25QYXJzZXIsIFN0cmlrZXRocm91Z2gsIFN1YnNjcmlwdCwgU3VwZXJzY3JpcHQsIFRhYmxlLCBUYXNrTGlzdCwgcGFyc2VDb2RlLCBwYXJzZXIgfTtcbiIsICJpbXBvcnQgeyBFZGl0b3JTZWxlY3Rpb24sIFByZWMgfSBmcm9tICdAY29kZW1pcnJvci9zdGF0ZSc7XG5pbXBvcnQgeyBrZXltYXAgfSBmcm9tICdAY29kZW1pcnJvci92aWV3JztcbmltcG9ydCB7IGRlZmluZUxhbmd1YWdlRmFjZXQsIGZvbGROb2RlUHJvcCwgaW5kZW50Tm9kZVByb3AsIGxhbmd1YWdlRGF0YVByb3AsIExhbmd1YWdlLCBMYW5ndWFnZURlc2NyaXB0aW9uLCBQYXJzZUNvbnRleHQsIHN5bnRheFRyZWUsIExhbmd1YWdlU3VwcG9ydCB9IGZyb20gJ0Bjb2RlbWlycm9yL2xhbmd1YWdlJztcbmltcG9ydCB7IHBhcnNlciwgR0ZNLCBTdWJzY3JpcHQsIFN1cGVyc2NyaXB0LCBFbW9qaSwgTWFya2Rvd25QYXJzZXIsIHBhcnNlQ29kZSB9IGZyb20gJ0BsZXplci9tYXJrZG93bic7XG5pbXBvcnQgeyBodG1sIH0gZnJvbSAnQGNvZGVtaXJyb3IvbGFuZy1odG1sJztcblxuY29uc3QgZGF0YSA9IC8qQF9fUFVSRV9fKi9kZWZpbmVMYW5ndWFnZUZhY2V0KHsgYmxvY2s6IHsgb3BlbjogXCI8IS0tXCIsIGNsb3NlOiBcIi0tPlwiIH0gfSk7XG5jb25zdCBjb21tb25tYXJrID0gLypAX19QVVJFX18qL3BhcnNlci5jb25maWd1cmUoe1xuICAgIHByb3BzOiBbXG4gICAgICAgIC8qQF9fUFVSRV9fKi9mb2xkTm9kZVByb3AuYWRkKHR5cGUgPT4ge1xuICAgICAgICAgICAgaWYgKCF0eXBlLmlzKFwiQmxvY2tcIikgfHwgdHlwZS5pcyhcIkRvY3VtZW50XCIpKVxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICByZXR1cm4gKHRyZWUsIHN0YXRlKSA9PiAoeyBmcm9tOiBzdGF0ZS5kb2MubGluZUF0KHRyZWUuZnJvbSkudG8sIHRvOiB0cmVlLnRvIH0pO1xuICAgICAgICB9KSxcbiAgICAgICAgLypAX19QVVJFX18qL2luZGVudE5vZGVQcm9wLmFkZCh7XG4gICAgICAgICAgICBEb2N1bWVudDogKCkgPT4gbnVsbFxuICAgICAgICB9KSxcbiAgICAgICAgLypAX19QVVJFX18qL2xhbmd1YWdlRGF0YVByb3AuYWRkKHtcbiAgICAgICAgICAgIERvY3VtZW50OiBkYXRhXG4gICAgICAgIH0pXG4gICAgXVxufSk7XG5mdW5jdGlvbiBta0xhbmcocGFyc2VyKSB7XG4gICAgcmV0dXJuIG5ldyBMYW5ndWFnZShkYXRhLCBwYXJzZXIsIFtdLCBcIm1hcmtkb3duXCIpO1xufVxuLyoqXG5MYW5ndWFnZSBzdXBwb3J0IGZvciBzdHJpY3QgQ29tbW9uTWFyay5cbiovXG5jb25zdCBjb21tb25tYXJrTGFuZ3VhZ2UgPSAvKkBfX1BVUkVfXyovbWtMYW5nKGNvbW1vbm1hcmspO1xuY29uc3QgZXh0ZW5kZWQgPSAvKkBfX1BVUkVfXyovY29tbW9ubWFyay5jb25maWd1cmUoW0dGTSwgU3Vic2NyaXB0LCBTdXBlcnNjcmlwdCwgRW1vamldKTtcbi8qKlxuTGFuZ3VhZ2Ugc3VwcG9ydCBmb3IgW0dGTV0oaHR0cHM6Ly9naXRodWIuZ2l0aHViLmNvbS9nZm0vKSBwbHVzXG5zdWJzY3JpcHQsIHN1cGVyc2NyaXB0LCBhbmQgZW1vamkgc3ludGF4LlxuKi9cbmNvbnN0IG1hcmtkb3duTGFuZ3VhZ2UgPSAvKkBfX1BVUkVfXyovbWtMYW5nKGV4dGVuZGVkKTtcbmZ1bmN0aW9uIGdldENvZGVQYXJzZXIobGFuZ3VhZ2VzLCBkZWZhdWx0TGFuZ3VhZ2UpIHtcbiAgICByZXR1cm4gKGluZm8pID0+IHtcbiAgICAgICAgaWYgKGluZm8gJiYgbGFuZ3VhZ2VzKSB7XG4gICAgICAgICAgICBsZXQgZm91bmQgPSBudWxsO1xuICAgICAgICAgICAgLy8gU3RyaXAgYW55dGhpbmcgYWZ0ZXIgd2hpdGVzcGFjZVxuICAgICAgICAgICAgaW5mbyA9IC9cXFMqLy5leGVjKGluZm8pWzBdO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBsYW5ndWFnZXMgPT0gXCJmdW5jdGlvblwiKVxuICAgICAgICAgICAgICAgIGZvdW5kID0gbGFuZ3VhZ2VzKGluZm8pO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGZvdW5kID0gTGFuZ3VhZ2VEZXNjcmlwdGlvbi5tYXRjaExhbmd1YWdlTmFtZShsYW5ndWFnZXMsIGluZm8sIHRydWUpO1xuICAgICAgICAgICAgaWYgKGZvdW5kIGluc3RhbmNlb2YgTGFuZ3VhZ2VEZXNjcmlwdGlvbilcbiAgICAgICAgICAgICAgICByZXR1cm4gZm91bmQuc3VwcG9ydCA/IGZvdW5kLnN1cHBvcnQubGFuZ3VhZ2UucGFyc2VyIDogUGFyc2VDb250ZXh0LmdldFNraXBwaW5nUGFyc2VyKGZvdW5kLmxvYWQoKSk7XG4gICAgICAgICAgICBlbHNlIGlmIChmb3VuZClcbiAgICAgICAgICAgICAgICByZXR1cm4gZm91bmQucGFyc2VyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWZhdWx0TGFuZ3VhZ2UgPyBkZWZhdWx0TGFuZ3VhZ2UucGFyc2VyIDogbnVsbDtcbiAgICB9O1xufVxuXG5jbGFzcyBDb250ZXh0IHtcbiAgICBjb25zdHJ1Y3Rvcihub2RlLCBmcm9tLCB0bywgc3BhY2VCZWZvcmUsIHNwYWNlQWZ0ZXIsIHR5cGUsIGl0ZW0pIHtcbiAgICAgICAgdGhpcy5ub2RlID0gbm9kZTtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgICAgICB0aGlzLnNwYWNlQmVmb3JlID0gc3BhY2VCZWZvcmU7XG4gICAgICAgIHRoaXMuc3BhY2VBZnRlciA9IHNwYWNlQWZ0ZXI7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMuaXRlbSA9IGl0ZW07XG4gICAgfVxuICAgIGJsYW5rKG1heFdpZHRoLCB0cmFpbGluZyA9IHRydWUpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IHRoaXMuc3BhY2VCZWZvcmUgKyAodGhpcy5ub2RlLm5hbWUgPT0gXCJCbG9ja3F1b3RlXCIgPyBcIj5cIiA6IFwiXCIpO1xuICAgICAgICBpZiAobWF4V2lkdGggIT0gbnVsbCkge1xuICAgICAgICAgICAgd2hpbGUgKHJlc3VsdC5sZW5ndGggPCBtYXhXaWR0aClcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gXCIgXCI7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMudG8gLSB0aGlzLmZyb20gLSByZXN1bHQubGVuZ3RoIC0gdGhpcy5zcGFjZUFmdGVyLmxlbmd0aDsgaSA+IDA7IGktLSlcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gXCIgXCI7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0ICsgKHRyYWlsaW5nID8gdGhpcy5zcGFjZUFmdGVyIDogXCJcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbWFya2VyKGRvYywgYWRkKSB7XG4gICAgICAgIGxldCBudW1iZXIgPSB0aGlzLm5vZGUubmFtZSA9PSBcIk9yZGVyZWRMaXN0XCIgPyBTdHJpbmcoKCtpdGVtTnVtYmVyKHRoaXMuaXRlbSwgZG9jKVsyXSArIGFkZCkpIDogXCJcIjtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3BhY2VCZWZvcmUgKyBudW1iZXIgKyB0aGlzLnR5cGUgKyB0aGlzLnNwYWNlQWZ0ZXI7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0Q29udGV4dChub2RlLCBkb2MpIHtcbiAgICBsZXQgbm9kZXMgPSBbXTtcbiAgICBmb3IgKGxldCBjdXIgPSBub2RlOyBjdXIgJiYgY3VyLm5hbWUgIT0gXCJEb2N1bWVudFwiOyBjdXIgPSBjdXIucGFyZW50KSB7XG4gICAgICAgIGlmIChjdXIubmFtZSA9PSBcIkxpc3RJdGVtXCIgfHwgY3VyLm5hbWUgPT0gXCJCbG9ja3F1b3RlXCIgfHwgY3VyLm5hbWUgPT0gXCJGZW5jZWRDb2RlXCIpXG4gICAgICAgICAgICBub2Rlcy5wdXNoKGN1cik7XG4gICAgfVxuICAgIGxldCBjb250ZXh0ID0gW107XG4gICAgZm9yIChsZXQgaSA9IG5vZGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGxldCBub2RlID0gbm9kZXNbaV0sIG1hdGNoO1xuICAgICAgICBsZXQgbGluZSA9IGRvYy5saW5lQXQobm9kZS5mcm9tKSwgc3RhcnRQb3MgPSBub2RlLmZyb20gLSBsaW5lLmZyb207XG4gICAgICAgIGlmIChub2RlLm5hbWUgPT0gXCJGZW5jZWRDb2RlXCIpIHtcbiAgICAgICAgICAgIGNvbnRleHQucHVzaChuZXcgQ29udGV4dChub2RlLCBzdGFydFBvcywgc3RhcnRQb3MsIFwiXCIsIFwiXCIsIFwiXCIsIG51bGwpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChub2RlLm5hbWUgPT0gXCJCbG9ja3F1b3RlXCIgJiYgKG1hdGNoID0gL15bIFxcdF0qPiggPykvLmV4ZWMobGluZS50ZXh0LnNsaWNlKHN0YXJ0UG9zKSkpKSB7XG4gICAgICAgICAgICBjb250ZXh0LnB1c2gobmV3IENvbnRleHQobm9kZSwgc3RhcnRQb3MsIHN0YXJ0UG9zICsgbWF0Y2hbMF0ubGVuZ3RoLCBcIlwiLCBtYXRjaFsxXSwgXCI+XCIsIG51bGwpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChub2RlLm5hbWUgPT0gXCJMaXN0SXRlbVwiICYmIG5vZGUucGFyZW50Lm5hbWUgPT0gXCJPcmRlcmVkTGlzdFwiICYmXG4gICAgICAgICAgICAobWF0Y2ggPSAvXihbIFxcdF0qKVxcZCsoWy4pXSkoWyBcXHRdKikvLmV4ZWMobGluZS50ZXh0LnNsaWNlKHN0YXJ0UG9zKSkpKSB7XG4gICAgICAgICAgICBsZXQgYWZ0ZXIgPSBtYXRjaFszXSwgbGVuID0gbWF0Y2hbMF0ubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGFmdGVyLmxlbmd0aCA+PSA0KSB7XG4gICAgICAgICAgICAgICAgYWZ0ZXIgPSBhZnRlci5zbGljZSgwLCBhZnRlci5sZW5ndGggLSA0KTtcbiAgICAgICAgICAgICAgICBsZW4gLT0gNDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRleHQucHVzaChuZXcgQ29udGV4dChub2RlLnBhcmVudCwgc3RhcnRQb3MsIHN0YXJ0UG9zICsgbGVuLCBtYXRjaFsxXSwgYWZ0ZXIsIG1hdGNoWzJdLCBub2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobm9kZS5uYW1lID09IFwiTGlzdEl0ZW1cIiAmJiBub2RlLnBhcmVudC5uYW1lID09IFwiQnVsbGV0TGlzdFwiICYmXG4gICAgICAgICAgICAobWF0Y2ggPSAvXihbIFxcdF0qKShbLSsqXSkoWyBcXHRdezEsNH1cXFtbIHhYXVxcXSk/KFsgXFx0XSspLy5leGVjKGxpbmUudGV4dC5zbGljZShzdGFydFBvcykpKSkge1xuICAgICAgICAgICAgbGV0IGFmdGVyID0gbWF0Y2hbNF0sIGxlbiA9IG1hdGNoWzBdLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChhZnRlci5sZW5ndGggPiA0KSB7XG4gICAgICAgICAgICAgICAgYWZ0ZXIgPSBhZnRlci5zbGljZSgwLCBhZnRlci5sZW5ndGggLSA0KTtcbiAgICAgICAgICAgICAgICBsZW4gLT0gNDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCB0eXBlID0gbWF0Y2hbMl07XG4gICAgICAgICAgICBpZiAobWF0Y2hbM10pXG4gICAgICAgICAgICAgICAgdHlwZSArPSBtYXRjaFszXS5yZXBsYWNlKC9beFhdLywgJyAnKTtcbiAgICAgICAgICAgIGNvbnRleHQucHVzaChuZXcgQ29udGV4dChub2RlLnBhcmVudCwgc3RhcnRQb3MsIHN0YXJ0UG9zICsgbGVuLCBtYXRjaFsxXSwgYWZ0ZXIsIHR5cGUsIG5vZGUpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29udGV4dDtcbn1cbmZ1bmN0aW9uIGl0ZW1OdW1iZXIoaXRlbSwgZG9jKSB7XG4gICAgcmV0dXJuIC9eKFxccyopKFxcZCspKD89Wy4pXSkvLmV4ZWMoZG9jLnNsaWNlU3RyaW5nKGl0ZW0uZnJvbSwgaXRlbS5mcm9tICsgMTApKTtcbn1cbmZ1bmN0aW9uIHJlbnVtYmVyTGlzdChhZnRlciwgZG9jLCBjaGFuZ2VzLCBvZmZzZXQgPSAwKSB7XG4gICAgZm9yIChsZXQgcHJldiA9IC0xLCBub2RlID0gYWZ0ZXI7Oykge1xuICAgICAgICBpZiAobm9kZS5uYW1lID09IFwiTGlzdEl0ZW1cIikge1xuICAgICAgICAgICAgbGV0IG0gPSBpdGVtTnVtYmVyKG5vZGUsIGRvYyk7XG4gICAgICAgICAgICBsZXQgbnVtYmVyID0gK21bMl07XG4gICAgICAgICAgICBpZiAocHJldiA+PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKG51bWJlciAhPSBwcmV2ICsgMSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGNoYW5nZXMucHVzaCh7IGZyb206IG5vZGUuZnJvbSArIG1bMV0ubGVuZ3RoLCB0bzogbm9kZS5mcm9tICsgbVswXS5sZW5ndGgsIGluc2VydDogU3RyaW5nKHByZXYgKyAyICsgb2Zmc2V0KSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByZXYgPSBudW1iZXI7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG5leHQgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgICAgICBpZiAoIW5leHQpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgbm9kZSA9IG5leHQ7XG4gICAgfVxufVxuLyoqXG5UaGlzIGNvbW1hbmQsIHdoZW4gaW52b2tlZCBpbiBNYXJrZG93biBjb250ZXh0IHdpdGggY3Vyc29yXG5zZWxlY3Rpb24ocyksIHdpbGwgY3JlYXRlIGEgbmV3IGxpbmUgd2l0aCB0aGUgbWFya3VwIGZvclxuYmxvY2txdW90ZXMgYW5kIGxpc3RzIHRoYXQgd2VyZSBhY3RpdmUgb24gdGhlIG9sZCBsaW5lLiBJZiB0aGVcbmN1cnNvciB3YXMgZGlyZWN0bHkgYWZ0ZXIgdGhlIGVuZCBvZiB0aGUgbWFya3VwIGZvciB0aGUgb2xkIGxpbmUsXG50cmFpbGluZyB3aGl0ZXNwYWNlIGFuZCBsaXN0IG1hcmtlcnMgYXJlIHJlbW92ZWQgZnJvbSB0aGF0IGxpbmUuXG5cblRoZSBjb21tYW5kIGRvZXMgbm90aGluZyBpbiBub24tTWFya2Rvd24gY29udGV4dCwgc28gaXQgc2hvdWxkXG5ub3QgYmUgdXNlZCBhcyB0aGUgb25seSBiaW5kaW5nIGZvciBFbnRlciAoZXZlbiBpbiBhIE1hcmtkb3duXG5kb2N1bWVudCwgSFRNTCBhbmQgY29kZSByZWdpb25zIG1pZ2h0IHVzZSBhIGRpZmZlcmVudCBsYW5ndWFnZSkuXG4qL1xuY29uc3QgaW5zZXJ0TmV3bGluZUNvbnRpbnVlTWFya3VwID0gKHsgc3RhdGUsIGRpc3BhdGNoIH0pID0+IHtcbiAgICBsZXQgdHJlZSA9IHN5bnRheFRyZWUoc3RhdGUpLCB7IGRvYyB9ID0gc3RhdGU7XG4gICAgbGV0IGRvbnQgPSBudWxsLCBjaGFuZ2VzID0gc3RhdGUuY2hhbmdlQnlSYW5nZShyYW5nZSA9PiB7XG4gICAgICAgIGlmICghcmFuZ2UuZW1wdHkgfHwgIW1hcmtkb3duTGFuZ3VhZ2UuaXNBY3RpdmVBdChzdGF0ZSwgcmFuZ2UuZnJvbSkpXG4gICAgICAgICAgICByZXR1cm4gZG9udCA9IHsgcmFuZ2UgfTtcbiAgICAgICAgbGV0IHBvcyA9IHJhbmdlLmZyb20sIGxpbmUgPSBkb2MubGluZUF0KHBvcyk7XG4gICAgICAgIGxldCBjb250ZXh0ID0gZ2V0Q29udGV4dCh0cmVlLnJlc29sdmVJbm5lcihwb3MsIC0xKSwgZG9jKTtcbiAgICAgICAgd2hpbGUgKGNvbnRleHQubGVuZ3RoICYmIGNvbnRleHRbY29udGV4dC5sZW5ndGggLSAxXS5mcm9tID4gcG9zIC0gbGluZS5mcm9tKVxuICAgICAgICAgICAgY29udGV4dC5wb3AoKTtcbiAgICAgICAgaWYgKCFjb250ZXh0Lmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBkb250ID0geyByYW5nZSB9O1xuICAgICAgICBsZXQgaW5uZXIgPSBjb250ZXh0W2NvbnRleHQubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmIChpbm5lci50byAtIGlubmVyLnNwYWNlQWZ0ZXIubGVuZ3RoID4gcG9zIC0gbGluZS5mcm9tKVxuICAgICAgICAgICAgcmV0dXJuIGRvbnQgPSB7IHJhbmdlIH07XG4gICAgICAgIGxldCBlbXB0eUxpbmUgPSBwb3MgPj0gKGlubmVyLnRvIC0gaW5uZXIuc3BhY2VBZnRlci5sZW5ndGgpICYmICEvXFxTLy50ZXN0KGxpbmUudGV4dC5zbGljZShpbm5lci50bykpO1xuICAgICAgICAvLyBFbXB0eSBsaW5lIGluIGxpc3RcbiAgICAgICAgaWYgKGlubmVyLml0ZW0gJiYgZW1wdHlMaW5lKSB7XG4gICAgICAgICAgICAvLyBGaXJzdCBsaXN0IGl0ZW0gb3IgYmxhbmsgbGluZSBiZWZvcmU6IGRlbGV0ZSBhIGxldmVsIG9mIG1hcmt1cFxuICAgICAgICAgICAgaWYgKGlubmVyLm5vZGUuZmlyc3RDaGlsZC50byA+PSBwb3MgfHxcbiAgICAgICAgICAgICAgICBsaW5lLmZyb20gPiAwICYmICEvW15cXHM+XS8udGVzdChkb2MubGluZUF0KGxpbmUuZnJvbSAtIDEpLnRleHQpKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5leHQgPSBjb250ZXh0Lmxlbmd0aCA+IDEgPyBjb250ZXh0W2NvbnRleHQubGVuZ3RoIC0gMl0gOiBudWxsO1xuICAgICAgICAgICAgICAgIGxldCBkZWxUbywgaW5zZXJ0ID0gXCJcIjtcbiAgICAgICAgICAgICAgICBpZiAobmV4dCAmJiBuZXh0Lml0ZW0pIHsgLy8gUmUtYWRkIG1hcmtlciBmb3IgdGhlIGxpc3QgYXQgdGhlIG5leHQgbGV2ZWxcbiAgICAgICAgICAgICAgICAgICAgZGVsVG8gPSBsaW5lLmZyb20gKyBuZXh0LmZyb207XG4gICAgICAgICAgICAgICAgICAgIGluc2VydCA9IG5leHQubWFya2VyKGRvYywgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZWxUbyA9IGxpbmUuZnJvbSArIChuZXh0ID8gbmV4dC50byA6IDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgY2hhbmdlcyA9IFt7IGZyb206IGRlbFRvLCB0bzogcG9zLCBpbnNlcnQgfV07XG4gICAgICAgICAgICAgICAgaWYgKGlubmVyLm5vZGUubmFtZSA9PSBcIk9yZGVyZWRMaXN0XCIpXG4gICAgICAgICAgICAgICAgICAgIHJlbnVtYmVyTGlzdChpbm5lci5pdGVtLCBkb2MsIGNoYW5nZXMsIC0yKTtcbiAgICAgICAgICAgICAgICBpZiAobmV4dCAmJiBuZXh0Lm5vZGUubmFtZSA9PSBcIk9yZGVyZWRMaXN0XCIpXG4gICAgICAgICAgICAgICAgICAgIHJlbnVtYmVyTGlzdChuZXh0Lml0ZW0sIGRvYywgY2hhbmdlcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgcmFuZ2U6IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IoZGVsVG8gKyBpbnNlcnQubGVuZ3RoKSwgY2hhbmdlcyB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7IC8vIE1vdmUgdGhpcyBsaW5lIGRvd25cbiAgICAgICAgICAgICAgICBsZXQgaW5zZXJ0ID0gXCJcIjtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgZSA9IGNvbnRleHQubGVuZ3RoIC0gMjsgaSA8PSBlOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaW5zZXJ0ICs9IGNvbnRleHRbaV0uYmxhbmsoaSA8IGUgPyBjb250ZXh0W2kgKyAxXS5mcm9tIC0gaW5zZXJ0Lmxlbmd0aCA6IG51bGwsIGkgPCBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5zZXJ0ICs9IHN0YXRlLmxpbmVCcmVhaztcbiAgICAgICAgICAgICAgICByZXR1cm4geyByYW5nZTogRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihwb3MgKyBpbnNlcnQubGVuZ3RoKSwgY2hhbmdlczogeyBmcm9tOiBsaW5lLmZyb20sIGluc2VydCB9IH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlubmVyLm5vZGUubmFtZSA9PSBcIkJsb2NrcXVvdGVcIiAmJiBlbXB0eUxpbmUgJiYgbGluZS5mcm9tKSB7XG4gICAgICAgICAgICBsZXQgcHJldkxpbmUgPSBkb2MubGluZUF0KGxpbmUuZnJvbSAtIDEpLCBxdW90ZWQgPSAvPlxccyokLy5leGVjKHByZXZMaW5lLnRleHQpO1xuICAgICAgICAgICAgLy8gVHdvIGFsaWduZWQgZW1wdHkgcXVvdGVkIGxpbmVzIGluIGEgcm93XG4gICAgICAgICAgICBpZiAocXVvdGVkICYmIHF1b3RlZC5pbmRleCA9PSBpbm5lci5mcm9tKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNoYW5nZXMgPSBzdGF0ZS5jaGFuZ2VzKFt7IGZyb206IHByZXZMaW5lLmZyb20gKyBxdW90ZWQuaW5kZXgsIHRvOiBwcmV2TGluZS50byB9LFxuICAgICAgICAgICAgICAgICAgICB7IGZyb206IGxpbmUuZnJvbSArIGlubmVyLmZyb20sIHRvOiBsaW5lLnRvIH1dKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyByYW5nZTogcmFuZ2UubWFwKGNoYW5nZXMpLCBjaGFuZ2VzIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGNoYW5nZXMgPSBbXTtcbiAgICAgICAgaWYgKGlubmVyLm5vZGUubmFtZSA9PSBcIk9yZGVyZWRMaXN0XCIpXG4gICAgICAgICAgICByZW51bWJlckxpc3QoaW5uZXIuaXRlbSwgZG9jLCBjaGFuZ2VzKTtcbiAgICAgICAgbGV0IGNvbnRpbnVlZCA9IGlubmVyLml0ZW0gJiYgaW5uZXIuaXRlbS5mcm9tIDwgbGluZS5mcm9tO1xuICAgICAgICBsZXQgaW5zZXJ0ID0gXCJcIjtcbiAgICAgICAgLy8gSWYgbm90IGRlZGVudGVkXG4gICAgICAgIGlmICghY29udGludWVkIHx8IC9eW1xcc1xcZC4pXFwtKyo+XSovLmV4ZWMobGluZS50ZXh0KVswXS5sZW5ndGggPj0gaW5uZXIudG8pIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBlID0gY29udGV4dC5sZW5ndGggLSAxOyBpIDw9IGU7IGkrKykge1xuICAgICAgICAgICAgICAgIGluc2VydCArPSBpID09IGUgJiYgIWNvbnRpbnVlZCA/IGNvbnRleHRbaV0ubWFya2VyKGRvYywgMSlcbiAgICAgICAgICAgICAgICAgICAgOiBjb250ZXh0W2ldLmJsYW5rKGkgPCBlID8gY29udGV4dFtpICsgMV0uZnJvbSAtIGluc2VydC5sZW5ndGggOiBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgZnJvbSA9IHBvcztcbiAgICAgICAgd2hpbGUgKGZyb20gPiBsaW5lLmZyb20gJiYgL1xccy8udGVzdChsaW5lLnRleHQuY2hhckF0KGZyb20gLSBsaW5lLmZyb20gLSAxKSkpXG4gICAgICAgICAgICBmcm9tLS07XG4gICAgICAgIGluc2VydCA9IHN0YXRlLmxpbmVCcmVhayArIGluc2VydDtcbiAgICAgICAgY2hhbmdlcy5wdXNoKHsgZnJvbSwgdG86IHBvcywgaW5zZXJ0IH0pO1xuICAgICAgICByZXR1cm4geyByYW5nZTogRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihmcm9tICsgaW5zZXJ0Lmxlbmd0aCksIGNoYW5nZXMgfTtcbiAgICB9KTtcbiAgICBpZiAoZG9udClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGRpc3BhdGNoKHN0YXRlLnVwZGF0ZShjaGFuZ2VzLCB7IHNjcm9sbEludG9WaWV3OiB0cnVlLCB1c2VyRXZlbnQ6IFwiaW5wdXRcIiB9KSk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuZnVuY3Rpb24gaXNNYXJrKG5vZGUpIHtcbiAgICByZXR1cm4gbm9kZS5uYW1lID09IFwiUXVvdGVNYXJrXCIgfHwgbm9kZS5uYW1lID09IFwiTGlzdE1hcmtcIjtcbn1cbmZ1bmN0aW9uIGNvbnRleHROb2RlRm9yRGVsZXRlKHRyZWUsIHBvcykge1xuICAgIGxldCBub2RlID0gdHJlZS5yZXNvbHZlSW5uZXIocG9zLCAtMSksIHNjYW4gPSBwb3M7XG4gICAgaWYgKGlzTWFyayhub2RlKSkge1xuICAgICAgICBzY2FuID0gbm9kZS5mcm9tO1xuICAgICAgICBub2RlID0gbm9kZS5wYXJlbnQ7XG4gICAgfVxuICAgIGZvciAobGV0IHByZXY7IHByZXYgPSBub2RlLmNoaWxkQmVmb3JlKHNjYW4pOykge1xuICAgICAgICBpZiAoaXNNYXJrKHByZXYpKSB7XG4gICAgICAgICAgICBzY2FuID0gcHJldi5mcm9tO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHByZXYubmFtZSA9PSBcIk9yZGVyZWRMaXN0XCIgfHwgcHJldi5uYW1lID09IFwiQnVsbGV0TGlzdFwiKSB7XG4gICAgICAgICAgICBub2RlID0gcHJldi5sYXN0Q2hpbGQ7XG4gICAgICAgICAgICBzY2FuID0gbm9kZS50bztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBub2RlO1xufVxuLyoqXG5UaGlzIGNvbW1hbmQgd2lsbCwgd2hlbiBpbnZva2VkIGluIGEgTWFya2Rvd24gY29udGV4dCB3aXRoIHRoZVxuY3Vyc29yIGRpcmVjdGx5IGFmdGVyIGxpc3Qgb3IgYmxvY2txdW90ZSBtYXJrdXAsIGRlbGV0ZSBvbmUgbGV2ZWxcbm9mIG1hcmt1cC4gV2hlbiB0aGUgbWFya3VwIGlzIGZvciBhIGxpc3QsIGl0IHdpbGwgYmUgcmVwbGFjZWQgYnlcbnNwYWNlcyBvbiB0aGUgZmlyc3QgaW52b2NhdGlvbiAoYSBmdXJ0aGVyIGludm9jYXRpb24gd2lsbCBkZWxldGVcbnRoZSBzcGFjZXMpLCB0byBtYWtlIGl0IGVhc3kgdG8gY29udGludWUgYSBsaXN0LlxuXG5XaGVuIG5vdCBhZnRlciBNYXJrZG93biBibG9jayBtYXJrdXAsIHRoaXMgY29tbWFuZCB3aWxsIHJldHVyblxuZmFsc2UsIHNvIGl0IGlzIGludGVuZGVkIHRvIGJlIGJvdW5kIGFsb25nc2lkZSBvdGhlciBkZWxldGlvblxuY29tbWFuZHMsIHdpdGggYSBoaWdoZXIgcHJlY2VkZW5jZSB0aGFuIHRoZSBtb3JlIGdlbmVyaWMgY29tbWFuZHMuXG4qL1xuY29uc3QgZGVsZXRlTWFya3VwQmFja3dhcmQgPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICAgIGxldCB0cmVlID0gc3ludGF4VHJlZShzdGF0ZSk7XG4gICAgbGV0IGRvbnQgPSBudWxsLCBjaGFuZ2VzID0gc3RhdGUuY2hhbmdlQnlSYW5nZShyYW5nZSA9PiB7XG4gICAgICAgIGxldCBwb3MgPSByYW5nZS5mcm9tLCB7IGRvYyB9ID0gc3RhdGU7XG4gICAgICAgIGlmIChyYW5nZS5lbXB0eSAmJiBtYXJrZG93bkxhbmd1YWdlLmlzQWN0aXZlQXQoc3RhdGUsIHJhbmdlLmZyb20pKSB7XG4gICAgICAgICAgICBsZXQgbGluZSA9IGRvYy5saW5lQXQocG9zKTtcbiAgICAgICAgICAgIGxldCBjb250ZXh0ID0gZ2V0Q29udGV4dChjb250ZXh0Tm9kZUZvckRlbGV0ZSh0cmVlLCBwb3MpLCBkb2MpO1xuICAgICAgICAgICAgaWYgKGNvbnRleHQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgbGV0IGlubmVyID0gY29udGV4dFtjb250ZXh0Lmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICAgIGxldCBzcGFjZUVuZCA9IGlubmVyLnRvIC0gaW5uZXIuc3BhY2VBZnRlci5sZW5ndGggKyAoaW5uZXIuc3BhY2VBZnRlciA/IDEgOiAwKTtcbiAgICAgICAgICAgICAgICAvLyBEZWxldGUgZXh0cmEgdHJhaWxpbmcgc3BhY2UgYWZ0ZXIgbWFya3VwXG4gICAgICAgICAgICAgICAgaWYgKHBvcyAtIGxpbmUuZnJvbSA+IHNwYWNlRW5kICYmICEvXFxTLy50ZXN0KGxpbmUudGV4dC5zbGljZShzcGFjZUVuZCwgcG9zIC0gbGluZS5mcm9tKSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHJhbmdlOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKGxpbmUuZnJvbSArIHNwYWNlRW5kKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZXM6IHsgZnJvbTogbGluZS5mcm9tICsgc3BhY2VFbmQsIHRvOiBwb3MgfSB9O1xuICAgICAgICAgICAgICAgIGlmIChwb3MgLSBsaW5lLmZyb20gPT0gc3BhY2VFbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHN0YXJ0ID0gbGluZS5mcm9tICsgaW5uZXIuZnJvbTtcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVwbGFjZSBhIGxpc3QgaXRlbSBtYXJrZXIgd2l0aCBibGFuayBzcGFjZVxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXIuaXRlbSAmJiBpbm5lci5ub2RlLmZyb20gPCBpbm5lci5pdGVtLmZyb20gJiYgL1xcUy8udGVzdChsaW5lLnRleHQuc2xpY2UoaW5uZXIuZnJvbSwgaW5uZXIudG8pKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHJhbmdlLCBjaGFuZ2VzOiB7IGZyb206IHN0YXJ0LCB0bzogbGluZS5mcm9tICsgaW5uZXIudG8sIGluc2VydDogaW5uZXIuYmxhbmsoaW5uZXIudG8gLSBpbm5lci5mcm9tKSB9IH07XG4gICAgICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBvbmUgbGV2ZWwgb2YgaW5kZW50YXRpb25cbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0IDwgcG9zKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgcmFuZ2U6IEVkaXRvclNlbGVjdGlvbi5jdXJzb3Ioc3RhcnQpLCBjaGFuZ2VzOiB7IGZyb206IHN0YXJ0LCB0bzogcG9zIH0gfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRvbnQgPSB7IHJhbmdlIH07XG4gICAgfSk7XG4gICAgaWYgKGRvbnQpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBkaXNwYXRjaChzdGF0ZS51cGRhdGUoY2hhbmdlcywgeyBzY3JvbGxJbnRvVmlldzogdHJ1ZSwgdXNlckV2ZW50OiBcImRlbGV0ZVwiIH0pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG5cbi8qKlxuQSBzbWFsbCBrZXltYXAgd2l0aCBNYXJrZG93bi1zcGVjaWZpYyBiaW5kaW5ncy4gQmluZHMgRW50ZXIgdG9cbltgaW5zZXJ0TmV3bGluZUNvbnRpbnVlTWFya3VwYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5nLW1hcmtkb3duLmluc2VydE5ld2xpbmVDb250aW51ZU1hcmt1cClcbmFuZCBCYWNrc3BhY2UgdG9cbltgZGVsZXRlTWFya3VwQmFja3dhcmRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmctbWFya2Rvd24uZGVsZXRlTWFya3VwQmFja3dhcmQpLlxuKi9cbmNvbnN0IG1hcmtkb3duS2V5bWFwID0gW1xuICAgIHsga2V5OiBcIkVudGVyXCIsIHJ1bjogaW5zZXJ0TmV3bGluZUNvbnRpbnVlTWFya3VwIH0sXG4gICAgeyBrZXk6IFwiQmFja3NwYWNlXCIsIHJ1bjogZGVsZXRlTWFya3VwQmFja3dhcmQgfVxuXTtcbmNvbnN0IGh0bWxOb01hdGNoID0gLypAX19QVVJFX18qL2h0bWwoeyBtYXRjaENsb3NpbmdUYWdzOiBmYWxzZSB9KTtcbi8qKlxuTWFya2Rvd24gbGFuZ3VhZ2Ugc3VwcG9ydC5cbiovXG5mdW5jdGlvbiBtYXJrZG93bihjb25maWcgPSB7fSkge1xuICAgIGxldCB7IGNvZGVMYW5ndWFnZXMsIGRlZmF1bHRDb2RlTGFuZ3VhZ2UsIGFkZEtleW1hcCA9IHRydWUsIGJhc2U6IHsgcGFyc2VyIH0gPSBjb21tb25tYXJrTGFuZ3VhZ2UgfSA9IGNvbmZpZztcbiAgICBpZiAoIShwYXJzZXIgaW5zdGFuY2VvZiBNYXJrZG93blBhcnNlcikpXG4gICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiQmFzZSBwYXJzZXIgcHJvdmlkZWQgdG8gYG1hcmtkb3duYCBzaG91bGQgYmUgYSBNYXJrZG93biBwYXJzZXJcIik7XG4gICAgbGV0IGV4dGVuc2lvbnMgPSBjb25maWcuZXh0ZW5zaW9ucyA/IFtjb25maWcuZXh0ZW5zaW9uc10gOiBbXTtcbiAgICBsZXQgc3VwcG9ydCA9IFtodG1sTm9NYXRjaC5zdXBwb3J0XSwgZGVmYXVsdENvZGU7XG4gICAgaWYgKGRlZmF1bHRDb2RlTGFuZ3VhZ2UgaW5zdGFuY2VvZiBMYW5ndWFnZVN1cHBvcnQpIHtcbiAgICAgICAgc3VwcG9ydC5wdXNoKGRlZmF1bHRDb2RlTGFuZ3VhZ2Uuc3VwcG9ydCk7XG4gICAgICAgIGRlZmF1bHRDb2RlID0gZGVmYXVsdENvZGVMYW5ndWFnZS5sYW5ndWFnZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZGVmYXVsdENvZGVMYW5ndWFnZSkge1xuICAgICAgICBkZWZhdWx0Q29kZSA9IGRlZmF1bHRDb2RlTGFuZ3VhZ2U7XG4gICAgfVxuICAgIGxldCBjb2RlUGFyc2VyID0gY29kZUxhbmd1YWdlcyB8fCBkZWZhdWx0Q29kZSA/IGdldENvZGVQYXJzZXIoY29kZUxhbmd1YWdlcywgZGVmYXVsdENvZGUpIDogdW5kZWZpbmVkO1xuICAgIGV4dGVuc2lvbnMucHVzaChwYXJzZUNvZGUoeyBjb2RlUGFyc2VyLCBodG1sUGFyc2VyOiBodG1sTm9NYXRjaC5sYW5ndWFnZS5wYXJzZXIgfSkpO1xuICAgIGlmIChhZGRLZXltYXApXG4gICAgICAgIHN1cHBvcnQucHVzaChQcmVjLmhpZ2goa2V5bWFwLm9mKG1hcmtkb3duS2V5bWFwKSkpO1xuICAgIHJldHVybiBuZXcgTGFuZ3VhZ2VTdXBwb3J0KG1rTGFuZyhwYXJzZXIuY29uZmlndXJlKGV4dGVuc2lvbnMpKSwgc3VwcG9ydCk7XG59XG5cbmV4cG9ydCB7IGNvbW1vbm1hcmtMYW5ndWFnZSwgZGVsZXRlTWFya3VwQmFja3dhcmQsIGluc2VydE5ld2xpbmVDb250aW51ZU1hcmt1cCwgbWFya2Rvd24sIG1hcmtkb3duS2V5bWFwLCBtYXJrZG93bkxhbmd1YWdlIH07XG4iLCAiaW1wb3J0IHsgRWRpdG9yVmlldyB9IGZyb20gJ0Bjb2RlbWlycm9yL3ZpZXcnO1xuaW1wb3J0IHsgRXh0ZW5zaW9uIH0gZnJvbSAnQGNvZGVtaXJyb3Ivc3RhdGUnO1xuaW1wb3J0IHsgSGlnaGxpZ2h0U3R5bGUsIFRhZ1N0eWxlLCBzeW50YXhIaWdobGlnaHRpbmcgfSBmcm9tICdAY29kZW1pcnJvci9sYW5ndWFnZSc7XG5pbXBvcnQgeyBTdHlsZVNwZWMgfSBmcm9tICdzdHlsZS1tb2QnO1xuXG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZVRoZW1lT3B0aW9ucyB7XG4gIC8qKlxuICAgKiBUaGVtZSBpbmhlcml0YW5jZS4gRGV0ZXJtaW5lcyB3aGljaCBzdHlsZXMgQ29kZU1pcnJvciB3aWxsIGFwcGx5IGJ5IGRlZmF1bHQuXG4gICAqL1xuICB0aGVtZTogVGhlbWU7XG4gIC8qKlxuICAgKiBTZXR0aW5ncyB0byBjdXN0b21pemUgdGhlIGxvb2sgb2YgdGhlIGVkaXRvciwgbGlrZSBiYWNrZ3JvdW5kLCBndXR0ZXIsIHNlbGVjdGlvbiBhbmQgb3RoZXJzLlxuICAgKi9cbiAgc2V0dGluZ3M6IFNldHRpbmdzO1xuICAvKiogU3ludGF4IGhpZ2hsaWdodGluZyBzdHlsZXMuICovXG4gIHN0eWxlczogVGFnU3R5bGVbXTtcbn1cblxudHlwZSBUaGVtZSA9ICdsaWdodCcgfCAnZGFyayc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2V0dGluZ3Mge1xuICAvKiogRWRpdG9yIGJhY2tncm91bmQuICovXG4gIGJhY2tncm91bmQ6IHN0cmluZztcbiAgLyoqIERlZmF1bHQgdGV4dCBjb2xvci4gKi9cbiAgZm9yZWdyb3VuZDogc3RyaW5nO1xuICAvKiogQ2FyZXQgY29sb3IuICovXG4gIGNhcmV0Pzogc3RyaW5nO1xuICAvKiogU2VsZWN0aW9uIGJhY2tncm91bmQuICovXG4gIHNlbGVjdGlvbj86IHN0cmluZztcbiAgLyoqIFNlbGVjdGlvbiBtYXRjaCBiYWNrZ3JvdW5kLiAqL1xuICBzZWxlY3Rpb25NYXRjaD86IHN0cmluZztcbiAgLyoqIEJhY2tncm91bmQgb2YgaGlnaGxpZ2h0ZWQgbGluZXMuICovXG4gIGxpbmVIaWdobGlnaHQ/OiBzdHJpbmc7XG4gIC8qKiBHdXR0ZXIgYmFja2dyb3VuZC4gKi9cbiAgZ3V0dGVyQmFja2dyb3VuZD86IHN0cmluZztcbiAgLyoqIFRleHQgY29sb3IgaW5zaWRlIGd1dHRlci4gKi9cbiAgZ3V0dGVyRm9yZWdyb3VuZD86IHN0cmluZztcbiAgLyoqIFRleHQgYWN0aXZlIGNvbG9yIGluc2lkZSBndXR0ZXIuICovXG4gIGd1dHRlckFjdGl2ZUZvcmVncm91bmQ/OiBzdHJpbmc7XG4gIC8qKiBHdXR0ZXIgcmlnaHQgYm9yZGVyIGNvbG9yLiAqL1xuICBndXR0ZXJCb3JkZXI/OiBzdHJpbmc7XG4gIC8qKiBzZXQgZWRpdG9yIGZvbnQgKi9cbiAgZm9udEZhbWlseT86IHN0cmluZztcbn1cblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVRoZW1lID0gKHsgdGhlbWUsIHNldHRpbmdzLCBzdHlsZXMgfTogQ3JlYXRlVGhlbWVPcHRpb25zKTogRXh0ZW5zaW9uID0+IHtcbiAgY29uc3QgdGhlbWVPcHRpb25zOiBSZWNvcmQ8c3RyaW5nLCBTdHlsZVNwZWM+ID0ge1xuICAgICcmJzoge1xuICAgICAgYmFja2dyb3VuZENvbG9yOiBzZXR0aW5ncy5iYWNrZ3JvdW5kLFxuICAgICAgY29sb3I6IHNldHRpbmdzLmZvcmVncm91bmQsXG4gICAgfSxcbiAgICAnLmNtLWd1dHRlcnMnOiB7fSxcbiAgfTtcblxuICBpZiAoc2V0dGluZ3MuZm9udEZhbWlseSkge1xuICAgIHRoZW1lT3B0aW9uc1snJi5jbS1lZGl0b3IgLmNtLXNjcm9sbGVyJ10gPSB7XG4gICAgICBmb250RmFtaWx5OiBzZXR0aW5ncy5mb250RmFtaWx5LFxuICAgIH07XG4gIH1cbiAgaWYgKHNldHRpbmdzLmd1dHRlckJhY2tncm91bmQpIHtcbiAgICB0aGVtZU9wdGlvbnNbJy5jbS1ndXR0ZXJzJ10uYmFja2dyb3VuZENvbG9yID0gc2V0dGluZ3MuZ3V0dGVyQmFja2dyb3VuZDtcbiAgfVxuICBpZiAoc2V0dGluZ3MuZ3V0dGVyRm9yZWdyb3VuZCkge1xuICAgIHRoZW1lT3B0aW9uc1snLmNtLWd1dHRlcnMnXS5jb2xvciA9IHNldHRpbmdzLmd1dHRlckZvcmVncm91bmQ7XG4gIH1cbiAgaWYgKHNldHRpbmdzLmd1dHRlckJvcmRlcikge1xuICAgIHRoZW1lT3B0aW9uc1snLmNtLWd1dHRlcnMnXS5ib3JkZXJSaWdodENvbG9yID0gc2V0dGluZ3MuZ3V0dGVyQm9yZGVyO1xuICB9XG5cbiAgaWYgKHNldHRpbmdzLmNhcmV0KSB7XG4gICAgdGhlbWVPcHRpb25zWycuY20tY29udGVudCddID0ge1xuICAgICAgY2FyZXRDb2xvcjogc2V0dGluZ3MuY2FyZXQsXG4gICAgfTtcbiAgICB0aGVtZU9wdGlvbnNbJy5jbS1jdXJzb3IsIC5jbS1kcm9wQ3Vyc29yJ10gPSB7XG4gICAgICBib3JkZXJMZWZ0Q29sb3I6IHNldHRpbmdzLmNhcmV0LFxuICAgIH07XG4gIH1cbiAgbGV0IGFjdGl2ZUxpbmVHdXR0ZXJTdHlsZTogU3R5bGVTcGVjID0ge307XG4gIGlmIChzZXR0aW5ncy5ndXR0ZXJBY3RpdmVGb3JlZ3JvdW5kKSB7XG4gICAgYWN0aXZlTGluZUd1dHRlclN0eWxlLmNvbG9yID0gc2V0dGluZ3MuZ3V0dGVyQWN0aXZlRm9yZWdyb3VuZDtcbiAgfVxuICBpZiAoc2V0dGluZ3MubGluZUhpZ2hsaWdodCkge1xuICAgIHRoZW1lT3B0aW9uc1snLmNtLWFjdGl2ZUxpbmUnXSA9IHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogc2V0dGluZ3MubGluZUhpZ2hsaWdodCxcbiAgICB9O1xuICAgIGFjdGl2ZUxpbmVHdXR0ZXJTdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBzZXR0aW5ncy5saW5lSGlnaGxpZ2h0O1xuICB9XG4gIHRoZW1lT3B0aW9uc1snLmNtLWFjdGl2ZUxpbmVHdXR0ZXInXSA9IGFjdGl2ZUxpbmVHdXR0ZXJTdHlsZTtcblxuICBpZiAoc2V0dGluZ3Muc2VsZWN0aW9uKSB7XG4gICAgdGhlbWVPcHRpb25zW1xuICAgICAgJyYuY20tZm9jdXNlZCAuY20tc2VsZWN0aW9uQmFja2dyb3VuZCwgJiAuY20tc2VsZWN0aW9uTGF5ZXIgLmNtLXNlbGVjdGlvbkJhY2tncm91bmQsIC5jbS1jb250ZW50IDo6c2VsZWN0aW9uJ1xuICAgIF0gPSB7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IHNldHRpbmdzLnNlbGVjdGlvbixcbiAgICB9O1xuICB9XG4gIGlmIChzZXR0aW5ncy5zZWxlY3Rpb25NYXRjaCkge1xuICAgIHRoZW1lT3B0aW9uc1snJiAuY20tc2VsZWN0aW9uTWF0Y2gnXSA9IHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogc2V0dGluZ3Muc2VsZWN0aW9uTWF0Y2gsXG4gICAgfTtcbiAgfVxuICBjb25zdCB0aGVtZUV4dGVuc2lvbiA9IEVkaXRvclZpZXcudGhlbWUodGhlbWVPcHRpb25zLCB7XG4gICAgZGFyazogdGhlbWUgPT09ICdkYXJrJyxcbiAgfSk7XG5cbiAgY29uc3QgaGlnaGxpZ2h0U3R5bGUgPSBIaWdobGlnaHRTdHlsZS5kZWZpbmUoc3R5bGVzKTtcbiAgY29uc3QgZXh0ZW5zaW9uID0gW3RoZW1lRXh0ZW5zaW9uLCBzeW50YXhIaWdobGlnaHRpbmcoaGlnaGxpZ2h0U3R5bGUpXTtcblxuICByZXR1cm4gZXh0ZW5zaW9uO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlVGhlbWU7XG4iLCAiaW1wb3J0IHtjcmVhdGVUaGVtZX0gZnJvbSAnQHVpdy9jb2RlbWlycm9yLXRoZW1lcyc7XG5pbXBvcnQge3RhZ3MgYXMgdH0gZnJvbSAnQGxlemVyL2hpZ2hsaWdodCc7XG5cbmNvbnN0IGRhcmtUaGVtZSA9IGNyZWF0ZVRoZW1lKHtcbiAgICB0aGVtZTogJ2RhcmsnLFxuICAgIHNldHRpbmdzOiB7XG4gICAgICAgIGJhY2tncm91bmQ6ICcjMjkyQTMwJyxcbiAgICAgICAgZm9yZWdyb3VuZDogJyNDRUNGRDAnLFxuICAgICAgICBjYXJldDogJyNmZmYnLFxuICAgICAgICBzZWxlY3Rpb246ICcjNzI3Mzc3JyxcbiAgICAgICAgc2VsZWN0aW9uTWF0Y2g6ICcjNzI3Mzc3JyxcbiAgICAgICAgbGluZUhpZ2hsaWdodDogJyMyRjMyMzknLFxuICAgIH0sXG4gICAgc3R5bGVzOiBbXG4gICAgICAgIHsgdGFnOiBbdC5jb21tZW50LCB0LnF1b3RlXSwgY29sb3I6ICcjN0Y4Qzk4JyB9LFxuICAgICAgICB7IHRhZzogW3Qua2V5d29yZF0sIGNvbG9yOiAnI0ZGN0FCMicsIGZvbnRXZWlnaHQ6ICdib2xkJyB9LFxuICAgICAgICB7IHRhZzogW3Quc3RyaW5nLCB0Lm1ldGFdLCBjb2xvcjogJyNGRjgxNzAnIH0sXG4gICAgICAgIHsgdGFnOiBbdC50eXBlTmFtZV0sIGNvbG9yOiAnI0RBQkFGRicgfSxcbiAgICAgICAgeyB0YWc6IFt0LmRlZmluaXRpb24odC52YXJpYWJsZU5hbWUpXSwgY29sb3I6ICcjNkJERkZGJyB9LFxuICAgICAgICB7IHRhZzogW3QubmFtZV0sIGNvbG9yOiAnIzZCQUE5RicgfSxcbiAgICAgICAgeyB0YWc6IFt0LnZhcmlhYmxlTmFtZV0sIGNvbG9yOiAnI0FDRjJFNCcgfSxcbiAgICAgICAgeyB0YWc6IFt0LnJlZ2V4cCwgdC5saW5rXSwgY29sb3I6ICcjRkY4MTcwJyB9LFxuICAgIF0sXG59KVxuXG5leHBvcnQgZGVmYXVsdCBkYXJrVGhlbWVcbiIsICJpbXBvcnQge2NyZWF0ZVRoZW1lfSBmcm9tICdAdWl3L2NvZGVtaXJyb3ItdGhlbWVzJztcbmltcG9ydCB7dGFncyBhcyB0fSBmcm9tICdAbGV6ZXIvaGlnaGxpZ2h0JztcblxuY29uc3QgbGlnaHRUaGVtZSA9IGNyZWF0ZVRoZW1lKHtcbiAgICB0aGVtZTogJ2xpZ2h0JyxcbiAgICBzZXR0aW5nczoge1xuICAgICAgICBiYWNrZ3JvdW5kOiAnI2ZmZicsXG4gICAgICAgIGZvcmVncm91bmQ6ICcjM0QzRDNEJyxcbiAgICAgICAgc2VsZWN0aW9uOiAnI0JCREZGRicsXG4gICAgICAgIHNlbGVjdGlvbk1hdGNoOiAnI0JCREZGRicsXG4gICAgICAgIGd1dHRlckJhY2tncm91bmQ6ICcjZmZmJyxcbiAgICAgICAgZ3V0dGVyRm9yZWdyb3VuZDogJyNBRkFGQUYnLFxuICAgICAgICBsaW5lSGlnaGxpZ2h0OiAnI0VERjRGRicsXG4gICAgfSxcbiAgICBzdHlsZXM6IFtcbiAgICAgICAgeyB0YWc6IFt0LmNvbW1lbnQsIHQucXVvdGVdLCBjb2xvcjogJyM3MDdGOEQnIH0sXG4gICAgICAgIHsgdGFnOiBbdC50eXBlTmFtZSwgdC50eXBlT3BlcmF0b3JdLCBjb2xvcjogJyNhYTBkOTEnIH0sXG4gICAgICAgIHsgdGFnOiBbdC5rZXl3b3JkXSwgY29sb3I6ICcjYWEwZDkxJywgZm9udFdlaWdodDogJ2JvbGQnIH0sXG4gICAgICAgIHsgdGFnOiBbdC5zdHJpbmcsIHQubWV0YV0sIGNvbG9yOiAnI0QyMzQyMycgfSxcbiAgICAgICAgeyB0YWc6IFt0Lm5hbWVdLCBjb2xvcjogJyMwMzJmNjInIH0sXG4gICAgICAgIHsgdGFnOiBbdC50eXBlTmFtZV0sIGNvbG9yOiAnIzUyMkJCMicgfSxcbiAgICAgICAgeyB0YWc6IFt0LnZhcmlhYmxlTmFtZV0sIGNvbG9yOiAnIzIzNTc1QycgfSxcbiAgICAgICAgeyB0YWc6IFt0LmRlZmluaXRpb24odC52YXJpYWJsZU5hbWUpXSwgY29sb3I6ICcjMzI3QTlFJyB9LFxuICAgICAgICB7IHRhZzogW3QucmVnZXhwLCB0LmxpbmtdLCBjb2xvcjogJyMwZTBlZmYnIH0sXG4gICAgXSxcbn0pXG5cbmV4cG9ydCBkZWZhdWx0IGxpZ2h0VGhlbWVcbiIsICJpbXBvcnQgeyBFZGl0b3JWaWV3IH0gZnJvbSBcImNvZGVtaXJyb3JcIlxuaW1wb3J0IHsgaW5kZW50V2l0aFRhYiB9IGZyb20gJ0Bjb2RlbWlycm9yL2NvbW1hbmRzJztcbmltcG9ydCB7IGtleW1hcCwgbGluZU51bWJlcnMgfSBmcm9tICdAY29kZW1pcnJvci92aWV3JztcbmltcG9ydCB7IENvbXBhcnRtZW50IH0gZnJvbSAnQGNvZGVtaXJyb3Ivc3RhdGUnO1xuaW1wb3J0IHsganNvbiB9IGZyb20gXCJAY29kZW1pcnJvci9sYW5nLWpzb25cIlxuaW1wb3J0IHsgY3NzIH0gZnJvbSAnQGNvZGVtaXJyb3IvbGFuZy1jc3MnO1xuaW1wb3J0IHsgaHRtbCB9IGZyb20gXCJAY29kZW1pcnJvci9sYW5nLWh0bWxcIlxuaW1wb3J0IHsgamF2YXNjcmlwdCB9IGZyb20gXCJAY29kZW1pcnJvci9sYW5nLWphdmFzY3JpcHRcIlxuaW1wb3J0IHsgeG1sIH0gZnJvbSBcIkBjb2RlbWlycm9yL2xhbmcteG1sXCJcbmltcG9ydCB7IG1hcmtkb3duIH0gZnJvbSBcIkBjb2RlbWlycm9yL2xhbmctbWFya2Rvd25cIlxuaW1wb3J0IHsgYXV0b2NvbXBsZXRpb24gfSBmcm9tICdAY29kZW1pcnJvci9hdXRvY29tcGxldGUnO1xuaW1wb3J0IGRhcmtUaGVtZSBmcm9tICcuL3RoZW1lcy9kYXJrJ1xuaW1wb3J0IGxpZ2h0VGhlbWUgZnJvbSAnLi90aGVtZXMvbGlnaHQnXG5cbmxldCB0aGVtZSA9IG5ldyBDb21wYXJ0bWVudFxuXG5cbmV4cG9ydCBkZWZhdWx0IChBbHBpbmUpID0+IHtcbiAgICBBbHBpbmUuZGF0YSgnZmlsYW1lbnRDb2RlRmllbGQnLCAoe1xuICAgICAgICBzdGF0ZSxcbiAgICAgICAgbGFuZ3VhZ2UsXG4gICAgICAgIGRpc2FibGVkLFxuICAgICAgICB3aXRoTGluZU51bWJlcnMsXG4gICAgICAgIHdpdGhBdXRvY29tcGxldGlvblxuICAgIH0pID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0YXRlLFxuICAgICAgICAgICAgY29kZU1pcnJvcjogbnVsbCxcbiAgICAgICAgICAgIHBhcnNlcnM6IHsganNvbiwgY3NzLCBodG1sLCBqYXZhc2NyaXB0LCB4bWwsIG1hcmtkb3duIH0sXG4gICAgICAgICAgICBpbml0KCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29kZU1pcnJvciA9IG5ldyBFZGl0b3JWaWV3KHtcbiAgICAgICAgICAgICAgICAgICAgZG9jOiB0aGlzLnBhcnNlZFN0YXRlKCksXG4gICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbnM6IHRoaXMuYnVpbGRFeHRlbnNpb25zQXJyYXkoKSxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiB0aGlzLiRyZWZzLmNvZGVCbG9ja1xuICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZGFyay1tb2RlLXRvZ2dsZWQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvZGVNaXJyb3IuZGlzcGF0Y2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgZWZmZWN0czogdGhlbWUucmVjb25maWd1cmUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5kZXRhaWwgPT09ICdkYXJrJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGRhcmtUaGVtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGxpZ2h0VGhlbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXJzZWRTdGF0ZSgpIHtcbiAgICAgICAgICAgICAgICBpZiAobGFuZ3VhZ2UgPT09ICdqc29uJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnN0YXRlXG4gICAgICAgICAgICAgICAgICAgICAgICA6ICd7XFxuXFxufSdcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJ1aWxkRXh0ZW5zaW9uc0FycmF5KCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhcmtNb2RlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXJrLW1vZGVdJylcbiAgICAgICAgICAgICAgICBjb25zdCBsaWdodE1vZGUgPSBkYXJrTW9kZUVsZW1lbnQuX3hfZGF0YVN0YWNrWzBdLnRoZW1lID09PSAnbGlnaHQnXG5cbiAgICAgICAgICAgICAgICBsZXQgZXh0ZW5zaW9ucyA9IFtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZXJzW2xhbmd1YWdlXSgpLFxuICAgICAgICAgICAgICAgICAgICBrZXltYXAub2YoW2luZGVudFdpdGhUYWJdKSxcbiAgICAgICAgICAgICAgICAgICAgdGhlbWUub2YobGlnaHRNb2RlID8gbGlnaHRUaGVtZSA6IGRhcmtUaGVtZSksXG4gICAgICAgICAgICAgICAgICAgIEVkaXRvclZpZXcuY29udGVudEF0dHJpYnV0ZXMub2Yoe2NvbnRlbnRlZGl0YWJsZTogIWRpc2FibGVkfSksXG4gICAgICAgICAgICAgICAgICAgIEVkaXRvclZpZXcubGluZVdyYXBwaW5nLFxuICAgICAgICAgICAgICAgICAgICBFZGl0b3JWaWV3LnVwZGF0ZUxpc3RlbmVyLm9mKCh2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodi5kb2NDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHYuc3RhdGUuZG9jLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgICAgIGlmICh3aXRoQXV0b2NvbXBsZXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW5zaW9ucy5wdXNoKGF1dG9jb21wbGV0aW9uKCkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh3aXRoTGluZU51bWJlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW5zaW9ucy5wdXNoKGxpbmVOdW1iZXJzKCkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBleHRlbnNpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59XG4iLCAiaW1wb3J0IENvZGVGaWVsZEFscGluZVBsdWdpbiBmcm9tICcuL2NvZGUtZmllbGQnO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdhbHBpbmU6aW5pdCcsICgpID0+IHtcbiAgICB3aW5kb3cuQWxwaW5lLnBsdWdpbihDb2RlRmllbGRBbHBpbmVQbHVnaW4pO1xufSlcbiJdLAogICJtYXBwaW5ncyI6ICI7O0FBR0EsbUJBQVc7QUFBQSxJQUlQLGNBQWM7QUFBQTtBQUFBLElBSWQsT0FBTyxLQUFLO0FBQ1IsVUFBSSxNQUFNLEtBQUssTUFBTSxL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
